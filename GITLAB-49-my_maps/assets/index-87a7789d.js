var RN=Object.defineProperty;var kN=(a,e,t)=>e in a?RN(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var _a=(a,e,t)=>(kN(a,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const $a=a=>typeof a=="string",hy=()=>{let a,e;const t=new Promise((i,n)=>{a=i,e=n});return t.resolve=a,t.reject=e,t},eM=a=>a==null?"":""+a,WN=(a,e,t)=>{a.forEach(i=>{e[i]&&(t[i]=e[i])})},GN=/###/g,tM=a=>a&&a.indexOf("###")>-1?a.replace(GN,"."):a,aM=a=>!a||$a(a),qy=(a,e,t)=>{const i=$a(e)?e.split("."):e;let n=0;for(;n<i.length-1;){if(aM(a))return{};const s=tM(i[n]);!a[s]&&t&&(a[s]=new t),Object.prototype.hasOwnProperty.call(a,s)?a=a[s]:a={},++n}return aM(a)?{}:{obj:a,k:tM(i[n])}},iM=(a,e,t)=>{const{obj:i,k:n}=qy(a,e,Object);if(i!==void 0||e.length===1){i[n]=t;return}let s=e[e.length-1],r=e.slice(0,e.length-1),l=qy(a,r,Object);for(;l.obj===void 0&&r.length;)s=`${r[r.length-1]}.${s}`,r=r.slice(0,r.length-1),l=qy(a,r,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${s}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${s}`]=t},ON=(a,e,t,i)=>{const{obj:n,k:s}=qy(a,e,Object);n[s]=n[s]||[],n[s].push(t)},T2=(a,e)=>{const{obj:t,k:i}=qy(a,e);if(t&&Object.prototype.hasOwnProperty.call(t,i))return t[i]},PN=(a,e,t)=>{const i=T2(a,t);return i!==void 0?i:T2(e,t)},V8=(a,e,t)=>{for(const i in e)i!=="__proto__"&&i!=="constructor"&&(i in a?$a(a[i])||a[i]instanceof String||$a(e[i])||e[i]instanceof String?t&&(a[i]=e[i]):V8(a[i],e[i],t):a[i]=e[i]);return a},Ag=a=>a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var BN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const FN=a=>$a(a)?a.replace(/[&<>"'\/]/g,e=>BN[e]):a;class NN{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}const DN=[" ",",","?","!",";"],VN=new NN(20),ZN=(a,e,t)=>{e=e||"",t=t||"";const i=DN.filter(r=>e.indexOf(r)<0&&t.indexOf(r)<0);if(i.length===0)return!0;const n=VN.getRegExp(`(${i.map(r=>r==="?"?"\\?":r).join("|")})`);let s=!n.test(a);if(!s){const r=a.indexOf(t);r>0&&!n.test(a.substring(0,r))&&(s=!0)}return s},HA=function(a,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!a)return;if(a[e])return Object.prototype.hasOwnProperty.call(a,e)?a[e]:void 0;const i=e.split(t);let n=a;for(let s=0;s<i.length;){if(!n||typeof n!="object")return;let r,l="";for(let c=s;c<i.length;++c)if(c!==s&&(l+=t),l+=i[c],r=n[l],r!==void 0){if(["string","number","boolean"].indexOf(typeof r)>-1&&c<i.length-1)continue;s+=c-s+1;break}n=r}return n},E2=a=>a==null?void 0:a.replace("_","-"),zN={type:"logger",log(a){this.output("log",a)},warn(a){this.output("warn",a)},error(a){this.output("error",a)},output(a,e){var t,i;(i=(t=console==null?void 0:console[a])==null?void 0:t.apply)==null||i.call(t,console,e)}};class M2{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||zN,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,n){return n&&!this.debug?null:($a(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new M2(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new M2(this.logger,e)}}var Zu=new M2;class nw{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(i=>{this.observers[i]||(this.observers[i]=new Map);const n=this.observers[i].get(t)||0;this.observers[i].set(t,n+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(r=>{let[l,c]=r;for(let h=0;h<c;h++)l(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(r=>{let[l,c]=r;for(let h=0;h<c;h++)l.apply(l,[e,...i])})}}class nM extends nw{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i){var h,g;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,r=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],i&&(Array.isArray(i)?l.push(...i):$a(i)&&s?l.push(...i.split(s)):l.push(i)));const c=T2(this.data,l);return!c&&!t&&!i&&e.indexOf(".")>-1&&(e=l[0],t=l[1],i=l.slice(2).join(".")),c||!r||!$a(i)?c:HA((g=(h=this.data)==null?void 0:h[e])==null?void 0:g[t],i,s)}addResource(e,t,i,n){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const r=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let l=[e,t];i&&(l=l.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(l=e.split("."),n=t,t=l[1]),this.addNamespaces(t),iM(this.data,l,n),s.silent||this.emit("added",e,t,i,n)}addResources(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in i)($a(i[s])||Array.isArray(i[s]))&&this.addResource(e,t,s,i[s],{silent:!0});n.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,n,s){let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),n=i,i=t,t=l[1]),this.addNamespaces(t);let c=T2(this.data,l)||{};r.skipCopy||(i=JSON.parse(JSON.stringify(i))),n?V8(c,i,s):c={...c,...i},iM(this.data,l,c),r.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(n=>t[n]&&Object.keys(t[n]).length>0)}toJSON(){return this.data}}var Z8={processors:{},addPostProcessor(a){this.processors[a.name]=a},handle(a,e,t,i,n){return a.forEach(s=>{var r;e=((r=this.processors[s])==null?void 0:r.process(e,t,i,n))??e}),e}};const rM={},sM=a=>!$a(a)&&typeof a!="boolean"&&typeof a!="number";class L2 extends nw{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),WN(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Zu.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const i=this.resolve(e,t);return(i==null?void 0:i.res)!==void 0}extractFromKey(e,t){let i=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;i===void 0&&(i=":");const n=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const r=i&&e.indexOf(i)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!ZN(e,i,n);if(r&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:$a(s)?[s]:s};const h=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(h[0])>-1)&&(s=h.shift()),e=h.join(n)}return{key:e,namespaces:$a(s)?[s]:s}}translate(e,t,i){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const n=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:r,namespaces:l}=this.extractFromKey(e[e.length-1],t),c=l[l.length-1],h=t.lng||this.language,g=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((h==null?void 0:h.toLowerCase())==="cimode"){if(g){const ue=t.nsSeparator||this.options.nsSeparator;return n?{res:`${c}${ue}${r}`,usedKey:r,exactUsedKey:r,usedLng:h,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${ue}${r}`}return n?{res:r,usedKey:r,exactUsedKey:r,usedLng:h,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:r}const b=this.resolve(e,t);let v=b==null?void 0:b.res;const C=(b==null?void 0:b.usedKey)||r,S=(b==null?void 0:b.exactUsedKey)||r,L=["[object Number]","[object Function]","[object RegExp]"],R=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,G=!this.i18nFormat||this.i18nFormat.handleAsObject,O=t.count!==void 0&&!$a(t.count),V=L2.hasDefaultValue(t),B=O?this.pluralResolver.getSuffix(h,t.count,t):"",z=t.ordinal&&O?this.pluralResolver.getSuffix(h,t.count,{ordinal:!1}):"",j=O&&!t.ordinal&&t.count===0,re=j&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${B}`]||t[`defaultValue${z}`]||t.defaultValue;let ne=v;G&&!v&&V&&(ne=re);const te=sM(ne),le=Object.prototype.toString.apply(ne);if(G&&ne&&te&&L.indexOf(le)<0&&!($a(R)&&Array.isArray(ne))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ue=this.options.returnedObjectHandler?this.options.returnedObjectHandler(C,ne,{...t,ns:l}):`key '${r} (${this.language})' returned an object instead of string.`;return n?(b.res=ue,b.usedParams=this.getUsedParamsDetails(t),b):ue}if(s){const ue=Array.isArray(ne),fe=ue?[]:{},be=ue?S:C;for(const Pe in ne)if(Object.prototype.hasOwnProperty.call(ne,Pe)){const Be=`${be}${s}${Pe}`;V&&!v?fe[Pe]=this.translate(Be,{...t,defaultValue:sM(re)?re[Pe]:void 0,joinArrays:!1,ns:l}):fe[Pe]=this.translate(Be,{...t,joinArrays:!1,ns:l}),fe[Pe]===Be&&(fe[Pe]=ne[Pe])}v=fe}}else if(G&&$a(R)&&Array.isArray(v))v=v.join(R),v&&(v=this.extendTranslation(v,e,t,i));else{let ue=!1,fe=!1;!this.isValidLookup(v)&&V&&(ue=!0,v=re),this.isValidLookup(v)||(fe=!0,v=r);const Pe=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&fe?void 0:v,Be=V&&re!==v&&this.options.updateMissing;if(fe||ue||Be){if(this.logger.log(Be?"updateKey":"missingKey",h,c,r,Be?re:v),s){const ut=this.resolve(r,{...t,keySeparator:!1});ut&&ut.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Me=[];const ke=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ke&&ke[0])for(let ut=0;ut<ke.length;ut++)Me.push(ke[ut]);else this.options.saveMissingTo==="all"?Me=this.languageUtils.toResolveHierarchy(t.lng||this.language):Me.push(t.lng||this.language);const Je=(ut,ht,Dt)=>{var oa;const We=V&&Dt!==v?Dt:Pe;this.options.missingKeyHandler?this.options.missingKeyHandler(ut,c,ht,We,Be,t):(oa=this.backendConnector)!=null&&oa.saveMissing&&this.backendConnector.saveMissing(ut,c,ht,We,Be,t),this.emit("missingKey",ut,c,ht,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&O?Me.forEach(ut=>{const ht=this.pluralResolver.getSuffixes(ut,t);j&&t[`defaultValue${this.options.pluralSeparator}zero`]&&ht.indexOf(`${this.options.pluralSeparator}zero`)<0&&ht.push(`${this.options.pluralSeparator}zero`),ht.forEach(Dt=>{Je([ut],r+Dt,t[`defaultValue${Dt}`]||re)})}):Je(Me,r,re))}v=this.extendTranslation(v,e,t,b,i),fe&&v===r&&this.options.appendNamespaceToMissingKey&&(v=`${c}:${r}`),(fe||ue)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${r}`:r,ue?v:void 0))}return n?(b.res=v,b.usedParams=this.getUsedParamsDetails(t),b):v}extendTranslation(e,t,i,n,s){var h,g;var r=this;if((h=this.i18nFormat)!=null&&h.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const b=$a(e)&&(((g=i==null?void 0:i.interpolation)==null?void 0:g.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(b){const S=e.match(this.interpolator.nestingRegexp);v=S&&S.length}let C=i.replace&&!$a(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(C={...this.options.interpolation.defaultVariables,...C}),e=this.interpolator.interpolate(e,C,i.lng||this.language||n.usedLng,i),b){const S=e.match(this.interpolator.nestingRegexp),L=S&&S.length;v<L&&(i.nest=!1)}!i.lng&&n&&n.res&&(i.lng=this.language||n.usedLng),i.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var S=arguments.length,L=new Array(S),R=0;R<S;R++)L[R]=arguments[R];return(s==null?void 0:s[0])===L[0]&&!i.context?(r.logger.warn(`It seems you are nesting recursively key: ${L[0]} in key: ${t[0]}`),null):r.translate(...L,t)},i)),i.interpolation&&this.interpolator.reset()}const l=i.postProcess||this.options.postProcess,c=$a(l)?[l]:l;return e!=null&&(c!=null&&c.length)&&i.applyPostProcessor!==!1&&(e=Z8.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i,n,s,r,l;return $a(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(i))return;const h=this.extractFromKey(c,t),g=h.key;n=g;let b=h.namespaces;this.options.fallbackNS&&(b=b.concat(this.options.fallbackNS));const v=t.count!==void 0&&!$a(t.count),C=v&&!t.ordinal&&t.count===0,S=t.context!==void 0&&($a(t.context)||typeof t.context=="number")&&t.context!=="",L=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);b.forEach(R=>{var G,O;this.isValidLookup(i)||(l=R,!rM[`${L[0]}-${R}`]&&((G=this.utils)!=null&&G.hasLoadedNamespace)&&!((O=this.utils)!=null&&O.hasLoadedNamespace(l))&&(rM[`${L[0]}-${R}`]=!0,this.logger.warn(`key "${n}" for languages "${L.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),L.forEach(V=>{var j;if(this.isValidLookup(i))return;r=V;const B=[g];if((j=this.i18nFormat)!=null&&j.addLookupKeys)this.i18nFormat.addLookupKeys(B,g,V,R,t);else{let re;v&&(re=this.pluralResolver.getSuffix(V,t.count,t));const ne=`${this.options.pluralSeparator}zero`,te=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(B.push(g+re),t.ordinal&&re.indexOf(te)===0&&B.push(g+re.replace(te,this.options.pluralSeparator)),C&&B.push(g+ne)),S){const le=`${g}${this.options.contextSeparator}${t.context}`;B.push(le),v&&(B.push(le+re),t.ordinal&&re.indexOf(te)===0&&B.push(le+re.replace(te,this.options.pluralSeparator)),C&&B.push(le+ne))}}let z;for(;z=B.pop();)this.isValidLookup(i)||(s=z,i=this.getResource(V,R,z,t))}))})}),{res:i,usedKey:n,exactUsedKey:s,usedLng:r,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,i){var s;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,t,i,n):this.resourceStore.getResource(e,t,i,n)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!$a(e.replace);let n=i?e.replace:e;if(i&&typeof e.count<"u"&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!i){n={...n};for(const s of t)delete n[s]}return n}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,t.length)&&e[i]!==void 0)return!0;return!1}}class oM{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Zu.create("languageUtils")}getScriptPartFromCode(e){if(e=E2(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=E2(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if($a(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch{}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(i=>{if(t)return;const n=this.formatLanguageCode(i);(!this.options.supportedLngs||this.isSupportedCode(n))&&(t=n)}),!t&&this.options.supportedLngs&&e.forEach(i=>{if(t)return;const n=this.getLanguagePartFromCode(i);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(s=>{if(s===n)return s;if(!(s.indexOf("-")<0&&n.indexOf("-")<0)&&(s.indexOf("-")>0&&n.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===n||s.indexOf(n)===0&&n.length>1))return s})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),$a(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],s=r=>{r&&(this.isSupportedCode(r)?n.push(r):this.logger.warn(`rejecting language code not found in supportedLngs: ${r}`))};return $a(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):$a(e)&&s(this.formatLanguageCode(e)),i.forEach(r=>{n.indexOf(r)<0&&s(this.formatLanguageCode(r))}),n}}const lM={zero:0,one:1,two:2,few:3,many:4,other:5},uM={select:a=>a===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class UN{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=Zu.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=E2(e==="dev"?"en":e),n=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:n});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let r;try{r=new Intl.PluralRules(i,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),uM;if(!e.match(/-|_/))return uM;const c=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(c,t)}return this.pluralRulesCache[s]=r,r}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),(i==null?void 0:i.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,i).map(n=>`${t}${n}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(e,t);return i||(i=this.getRule("dev",t)),i?i.resolvedOptions().pluralCategories.sort((n,s)=>lM[n]-lM[s]).map(n=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(e,i);return n?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,i))}}const cM=function(a,e,t){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=PN(a,e,t);return!s&&n&&$a(t)&&(s=HA(a,t,i),s===void 0&&(s=HA(e,t,i))),s},tC=a=>a.replace(/\$/g,"$$$$");class XN{constructor(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Zu.create("interpolator"),this.options=e,this.format=((t=e==null?void 0:e.interpolation)==null?void 0:t.format)||(i=>i),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:n,prefix:s,prefixEscaped:r,suffix:l,suffixEscaped:c,formatSeparator:h,unescapeSuffix:g,unescapePrefix:b,nestingPrefix:v,nestingPrefixEscaped:C,nestingSuffix:S,nestingSuffixEscaped:L,nestingOptionsSeparator:R,maxReplaces:G,alwaysFormat:O}=e.interpolation;this.escape=t!==void 0?t:FN,this.escapeValue=i!==void 0?i:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=s?Ag(s):r||"{{",this.suffix=l?Ag(l):c||"}}",this.formatSeparator=h||",",this.unescapePrefix=g?"":b||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?Ag(v):C||Ag("$t("),this.nestingSuffix=S?Ag(S):L||Ag(")"),this.nestingOptionsSeparator=R||",",this.maxReplaces=G||1e3,this.alwaysFormat=O!==void 0?O:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,i)=>(t==null?void 0:t.source)===i?(t.lastIndex=0,t):new RegExp(i,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,i,n){var C;let s,r,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},h=S=>{if(S.indexOf(this.formatSeparator)<0){const O=cM(t,c,S,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(O,void 0,i,{...n,...t,interpolationkey:S}):O}const L=S.split(this.formatSeparator),R=L.shift().trim(),G=L.join(this.formatSeparator).trim();return this.format(cM(t,c,R,this.options.keySeparator,this.options.ignoreJSONStructure),G,i,{...n,...t,interpolationkey:R})};this.resetRegExp();const g=(n==null?void 0:n.missingInterpolationHandler)||this.options.missingInterpolationHandler,b=((C=n==null?void 0:n.interpolation)==null?void 0:C.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:S=>tC(S)},{regex:this.regexp,safeValue:S=>this.escapeValue?tC(this.escape(S)):tC(S)}].forEach(S=>{for(l=0;s=S.regex.exec(e);){const L=s[1].trim();if(r=h(L),r===void 0)if(typeof g=="function"){const G=g(e,s,n);r=$a(G)?G:""}else if(n&&Object.prototype.hasOwnProperty.call(n,L))r="";else if(b){r=s[0];continue}else this.logger.warn(`missed to pass in variable ${L} for interpolating ${e}`),r="";else!$a(r)&&!this.useRawValueToEscape&&(r=eM(r));const R=S.safeValue(r);if(e=e.replace(s[0],R),b?(S.regex.lastIndex+=r.length,S.regex.lastIndex-=s[0].length):S.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,s,r;const l=(c,h)=>{const g=this.nestingOptionsSeparator;if(c.indexOf(g)<0)return c;const b=c.split(new RegExp(`${g}[ ]*{`));let v=`{${b[1]}`;c=b[0],v=this.interpolate(v,r);const C=v.match(/'/g),S=v.match(/"/g);(((C==null?void 0:C.length)??0)%2===0&&!S||S.length%2!==0)&&(v=v.replace(/'/g,'"'));try{r=JSON.parse(v),h&&(r={...h,...r})}catch(L){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,L),`${c}${g}${v}`}return r.defaultValue&&r.defaultValue.indexOf(this.prefix)>-1&&delete r.defaultValue,c};for(;n=this.nestingRegexp.exec(e);){let c=[];r={...i},r=r.replace&&!$a(r.replace)?r.replace:r,r.applyPostProcessor=!1,delete r.defaultValue;let h=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const g=n[1].split(this.formatSeparator).map(b=>b.trim());n[1]=g.shift(),c=g,h=!0}if(s=t(l.call(this,n[1].trim(),r),r),s&&n[0]===e&&!$a(s))return s;$a(s)||(s=eM(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),h&&(s=c.reduce((g,b)=>this.format(g,b,i.lng,{...i,interpolationkey:n[1].trim()}),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const HN=a=>{let e=a.toLowerCase().trim();const t={};if(a.indexOf("(")>-1){const i=a.split("(");e=i[0].toLowerCase().trim();const n=i[1].substring(0,i[1].length-1);e==="currency"&&n.indexOf(":")<0?t.currency||(t.currency=n.trim()):e==="relativetime"&&n.indexOf(":")<0?t.range||(t.range=n.trim()):n.split(";").forEach(r=>{if(r){const[l,...c]=r.split(":"),h=c.join(":").trim().replace(/^'+|'+$/g,""),g=l.trim();t[g]||(t[g]=h),h==="false"&&(t[g]=!1),h==="true"&&(t[g]=!0),isNaN(h)||(t[g]=parseInt(h,10))}})}return{formatName:e,formatOptions:t}},Sg=a=>{const e={};return(t,i,n)=>{let s=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(s={...s,[n.interpolationkey]:void 0});const r=i+JSON.stringify(s);let l=e[r];return l||(l=a(E2(i),n),e[r]=l),l(t)}};let YN=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Zu.create("formatter"),this.options=e,this.formats={number:Sg((t,i)=>{const n=new Intl.NumberFormat(t,{...i});return s=>n.format(s)}),currency:Sg((t,i)=>{const n=new Intl.NumberFormat(t,{...i,style:"currency"});return s=>n.format(s)}),datetime:Sg((t,i)=>{const n=new Intl.DateTimeFormat(t,{...i});return s=>n.format(s)}),relativetime:Sg((t,i)=>{const n=new Intl.RelativeTimeFormat(t,{...i});return s=>n.format(s,i.range||"day")}),list:Sg((t,i)=>{const n=new Intl.ListFormat(t,{...i});return s=>n.format(s)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=Sg(t)}format(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(l=>l.indexOf(")")>-1)){const l=s.findIndex(c=>c.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,l)].join(this.formatSeparator)}return s.reduce((l,c)=>{var b;const{formatName:h,formatOptions:g}=HN(c);if(this.formats[h]){let v=l;try{const C=((b=n==null?void 0:n.formatParams)==null?void 0:b[n.interpolationkey])||{},S=C.locale||C.lng||n.locale||n.lng||i;v=this.formats[h](l,S,{...g,...n,...C})}catch(C){this.logger.warn(C)}return v}else this.logger.warn(`there was no format function for ${h}`);return l},e)}};const KN=(a,e)=>{a.pending[e]!==void 0&&(delete a.pending[e],a.pendingCount--)};class qN extends nw{constructor(e,t,i){var s,r;let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=n,this.logger=Zu.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],(r=(s=this.backend)==null?void 0:s.init)==null||r.call(s,i,n.backend,n)}queueLoad(e,t,i,n){const s={},r={},l={},c={};return e.forEach(h=>{let g=!0;t.forEach(b=>{const v=`${h}|${b}`;!i.reload&&this.store.hasResourceBundle(h,b)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?r[v]===void 0&&(r[v]=!0):(this.state[v]=1,g=!1,r[v]===void 0&&(r[v]=!0),s[v]===void 0&&(s[v]=!0),c[b]===void 0&&(c[b]=!0)))}),g||(l[h]=!0)}),(Object.keys(s).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(s),pending:Object.keys(r),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,t,i){const n=e.split("|"),s=n[0],r=n[1];t&&this.emit("failedLoading",s,r,t),!t&&i&&this.store.addResourceBundle(s,r,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const l={};this.queue.forEach(c=>{ON(c.loaded,[s],r),KN(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(h=>{l[h]||(l[h]={});const g=c.loaded[h];g.length&&g.forEach(b=>{l[h][b]===void 0&&(l[h][b]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,t,i){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:i,tried:n,wait:s,callback:r});return}this.readingCalls++;const l=(h,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const b=this.waitingReads.shift();this.read(b.lng,b.ns,b.fcName,b.tried,b.wait,b.callback)}if(h&&g&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,i,n+1,s*2,r)},s);return}r(h,g)},c=this.backend[i].bind(this.backend);if(c.length===2){try{const h=c(e,t);h&&typeof h.then=="function"?h.then(g=>l(null,g)).catch(l):l(null,h)}catch(h){l(h)}return}return c(e,t,l)}prepareLoading(e,t){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();$a(e)&&(e=this.languageUtils.toResolveHierarchy(e)),$a(t)&&(t=[t]);const s=this.queueLoad(e,t,i,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach(r=>{this.loadOne(r)})}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=e.split("|"),n=i[0],s=i[1];this.read(n,s,"read",void 0,void 0,(r,l)=>{r&&this.logger.warn(`${t}loading namespace ${s} for language ${n} failed`,r),!r&&l&&this.logger.log(`${t}loaded namespace ${s} for language ${n}`,l),this.loaded(e,r,l)})}saveMissing(e,t,i,n,s){var c,h,g,b,v;let r=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((h=(c=this.services)==null?void 0:c.utils)!=null&&h.hasLoadedNamespace&&!((b=(g=this.services)==null?void 0:g.utils)!=null&&b.hasLoadedNamespace(t))){this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(i==null||i==="")){if((v=this.backend)!=null&&v.create){const C={...r,isUpdate:s},S=this.backend.create.bind(this.backend);if(S.length<6)try{let L;S.length===5?L=S(e,t,i,n,C):L=S(e,t,i,n),L&&typeof L.then=="function"?L.then(R=>l(null,R)).catch(l):l(null,L)}catch(L){l(L)}else S(e,t,i,n,l,C)}!e||!e[0]||this.store.addResource(e[0],t,i,n)}}}const dM=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:a=>{let e={};if(typeof a[1]=="object"&&(e=a[1]),$a(a[1])&&(e.defaultValue=a[1]),$a(a[2])&&(e.tDescription=a[2]),typeof a[2]=="object"||typeof a[3]=="object"){const t=a[3]||a[2];Object.keys(t).forEach(i=>{e[i]=t[i]})}return e},interpolation:{escapeValue:!0,format:a=>a,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),hM=a=>{var e,t;return $a(a.ns)&&(a.ns=[a.ns]),$a(a.fallbackLng)&&(a.fallbackLng=[a.fallbackLng]),$a(a.fallbackNS)&&(a.fallbackNS=[a.fallbackNS]),((t=(e=a.supportedLngs)==null?void 0:e.indexOf)==null?void 0:t.call(e,"cimode"))<0&&(a.supportedLngs=a.supportedLngs.concat(["cimode"])),typeof a.initImmediate=="boolean"&&(a.initAsync=a.initImmediate),a},Kb=()=>{},jN=a=>{Object.getOwnPropertyNames(Object.getPrototypeOf(a)).forEach(t=>{typeof a[t]=="function"&&(a[t]=a[t].bind(a))})};class C0 extends nw{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=hM(e),this.services={},this.logger=Zu,this.modules={external:[]},jN(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(i=t,t={}),t.defaultNS==null&&t.ns&&($a(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=dM();this.options={...n,...this.options,...hM(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?Zu.init(s(this.modules.logger),this.options):Zu.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=YN;const b=new oM(this.options);this.store=new nM(this.options.resources,this.options);const v=this.services;v.logger=Zu,v.resourceStore=this.store,v.languageUtils=b,v.pluralResolver=new UN(b,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(v.formatter=s(g),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new XN(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new qN(s(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(C){for(var S=arguments.length,L=new Array(S>1?S-1:0),R=1;R<S;R++)L[R-1]=arguments[R];e.emit(C,...L)}),this.modules.languageDetector&&(v.languageDetector=s(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=s(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new L2(this.services,this.options),this.translator.on("*",function(C){for(var S=arguments.length,L=new Array(S>1?S-1:0),R=1;R<S;R++)L[R-1]=arguments[R];e.emit(C,...L)}),this.modules.external.forEach(C=>{C.init&&C.init(this)})}if(this.format=this.options.interpolation.format,i||(i=Kb),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return e.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return e.store[g](...arguments),e}});const c=hy(),h=()=>{const g=(b,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(v),i(b,v)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?h():setTimeout(h,0),c}loadResources(e){var s,r;let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kb;const n=$a(e)?e:this.language;if(typeof e=="function"&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if((n==null?void 0:n.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return i();const l=[],c=h=>{if(!h||h==="cimode")return;this.services.languageUtils.toResolveHierarchy(h).forEach(b=>{b!=="cimode"&&l.indexOf(b)<0&&l.push(b)})};n?c(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>c(g)),(r=(s=this.options.preload)==null?void 0:s.forEach)==null||r.call(s,h=>c(h)),this.services.backendConnector.load(l,this.options.ns,h=>{!h&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),i(h)})}else i(null)}reloadResources(e,t,i){const n=hy();return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=Kb),this.services.backendConnector.reload(e,t,s=>{n.resolve(),i(s)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Z8.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const i=this.languages[t];if(!(["cimode","dev"].indexOf(i)>-1)&&this.store.hasLanguageSomeTranslations(i)){this.resolvedLanguage=i;break}}}changeLanguage(e,t){var i=this;this.isLanguageChangingTo=e;const n=hy();this.emit("languageChanging",e);const s=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},r=(c,h)=>{h?(s(h),this.translator.changeLanguage(h),this.isLanguageChangingTo=void 0,this.emit("languageChanged",h),this.logger.log("languageChanged",h)):this.isLanguageChangingTo=void 0,n.resolve(function(){return i.t(...arguments)}),t&&t(c,function(){return i.t(...arguments)})},l=c=>{var g,b;!e&&!c&&this.services.languageDetector&&(c=[]);const h=$a(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);h&&(this.language||s(h),this.translator.language||this.translator.changeLanguage(h),(b=(g=this.services.languageDetector)==null?void 0:g.cacheUserLanguage)==null||b.call(g,h)),this.loadResources(h,v=>{r(v,h)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),n}getFixedT(e,t,i){var n=this;const s=function(r,l){let c;if(typeof l!="object"){for(var h=arguments.length,g=new Array(h>2?h-2:0),b=2;b<h;b++)g[b-2]=arguments[b];c=n.options.overloadTranslationOptionHandler([r,l].concat(g))}else c={...l};c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||i||s.keyPrefix);const v=n.options.keySeparator||".";let C;return c.keyPrefix&&Array.isArray(r)?C=r.map(S=>`${c.keyPrefix}${v}${S}`):C=c.keyPrefix?`${c.keyPrefix}${v}${r}`:r,n.t(C,c)};return $a(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=i,s}t(){var n;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(n=this.translator)==null?void 0:n.translate(...t)}exists(){var n;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(i.toLowerCase()==="cimode")return!0;const r=(l,c)=>{const h=this.services.backendConnector.state[`${l}|${c}`];return h===-1||h===0||h===2};if(t.precheck){const l=t.precheck(this,r);if(l!==void 0)return l}return!!(this.hasResourceBundle(i,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||r(i,e)&&(!n||r(s,e)))}loadNamespaces(e,t){const i=hy();return this.options.ns?($a(e)&&(e=[e]),e.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{i.resolve(),t&&t(n)}),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=hy();$a(e)&&(e=[e]);const n=this.options.preload||[],s=e.filter(r=>n.indexOf(r)<0&&this.services.languageUtils.isSupportedCode(r));return s.length?(this.options.preload=n.concat(s),this.loadResources(r=>{i.resolve(),t&&t(r)}),i):(t&&t(),Promise.resolve())}dir(e){var n,s;if(e||(e=this.resolvedLanguage||(((n=this.languages)==null?void 0:n.length)>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],i=((s=this.services)==null?void 0:s.languageUtils)||new oM(dM());return t.indexOf(i.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new C0(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kb;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},s=new C0(n);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(l=>{s[l]=this[l]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i){const l=Object.keys(this.store.data).reduce((c,h)=>(c[h]={...this.store.data[h]},Object.keys(c[h]).reduce((g,b)=>(g[b]={...c[h][b]},g),{})),{});s.store=new nM(l,n),s.services.resourceStore=s.store}return s.translator=new L2(s.services,n),s.translator.on("*",function(l){for(var c=arguments.length,h=new Array(c>1?c-1:0),g=1;g<c;g++)h[g-1]=arguments[g];s.emit(l,...h)}),s.init(n,t),s.translator.options=n,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const _n=C0.createInstance();_n.createInstance=C0.createInstance;_n.createInstance;_n.dir;_n.init;_n.loadResources;_n.reloadResources;_n.use;_n.changeLanguage;_n.getFixedT;const JN=_n.t;_n.exists;_n.setDefaultNamespace;_n.hasLoadedNamespace;_n.loadNamespaces;_n.loadLanguages;function YA(a){"@babel/helpers - typeof";return YA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YA(a)}function z8(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":YA(XMLHttpRequest))==="object"}function QN(a){return!!a&&typeof a.then=="function"}function $N(a){return QN(a)?a:Promise.resolve(a)}const eD="modulepreload",tD=function(a){return"/luxembourg-geoportail/GITLAB-49-my_maps/"+a},_M={},U8=function(e,t,i){if(!t||t.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=tD(s),s in _M)return;_M[s]=!0;const r=s.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(!!i)for(let g=n.length-1;g>=0;g--){const b=n[g];if(b.href===s&&(!r||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const h=document.createElement("link");if(h.rel=r?"stylesheet":eD,r||(h.as="script",h.crossOrigin=""),h.href=s,document.head.appendChild(h),r)return new Promise((g,b)=>{h.addEventListener("load",g),h.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})};function mM(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function gM(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mM(Object(t),!0).forEach(function(i){aD(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):mM(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function aD(a,e,t){return(e=iD(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function iD(a){var e=nD(a,"string");return im(e)=="symbol"?e:e+""}function nD(a,e){if(im(a)!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var i=t.call(a,e||"default");if(im(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function im(a){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},im(a)}var Sh=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Sh=global.fetch:typeof window<"u"&&window.fetch&&(Sh=window.fetch);var A0;z8()&&(typeof global<"u"&&global.XMLHttpRequest?A0=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(A0=window.XMLHttpRequest));var R2;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?R2=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(R2=window.ActiveXObject));typeof Sh!="function"&&(Sh=void 0);if(!Sh&&!A0&&!R2)try{U8(()=>import("./browser-ponyfill-2f4b4bd4.js").then(a=>a.b),[]).then(function(a){Sh=a.default}).catch(function(){})}catch{}var KA=function(e,t){if(t&&im(t)==="object"){var i="";for(var n in t)i+="&"+encodeURIComponent(n)+"="+encodeURIComponent(t[n]);if(!i)return e;e=e+(e.indexOf("?")!==-1?"&":"?")+i.slice(1)}return e},pM=function(e,t,i,n){var s=function(c){if(!c.ok)return i(c.statusText||"Error",{status:c.status});c.text().then(function(h){i(null,{status:c.status,data:h})}).catch(i)};if(n){var r=n(e,t);if(r instanceof Promise){r.then(s).catch(i);return}}typeof fetch=="function"?fetch(e,t).then(s).catch(i):Sh(e,t).then(s).catch(i)},fM=!1,rD=function(e,t,i,n){e.queryStringParams&&(t=KA(t,e.queryStringParams));var s=gM({},typeof e.customHeaders=="function"?e.customHeaders():e.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),i&&(s["Content-Type"]="application/json");var r=typeof e.requestOptions=="function"?e.requestOptions(i):e.requestOptions,l=gM({method:i?"POST":"GET",body:i?e.stringify(i):void 0,headers:s},fM?{}:r),c=typeof e.alternateFetch=="function"&&e.alternateFetch.length>=1?e.alternateFetch:void 0;try{pM(t,l,n,c)}catch(h){if(!r||Object.keys(r).length===0||!h.message||h.message.indexOf("not implemented")<0)return n(h);try{Object.keys(r).forEach(function(g){delete l[g]}),pM(t,l,n,c),fM=!0}catch(g){n(g)}}},sD=function(e,t,i,n){i&&im(i)==="object"&&(i=KA("",i).slice(1)),e.queryStringParams&&(t=KA(t,e.queryStringParams));try{var s=A0?new A0:new R2("MSXML2.XMLHTTP.3.0");s.open(i?"POST":"GET",t,1),e.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!e.withCredentials,i&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var r=e.customHeaders;if(r=typeof r=="function"?r():r,r)for(var l in r)s.setRequestHeader(l,r[l]);s.onreadystatechange=function(){s.readyState>3&&n(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(i)}catch(c){console&&console.log(c)}},oD=function(e,t,i,n){if(typeof i=="function"&&(n=i,i=void 0),n=n||function(){},Sh&&t.indexOf("file:")!==0)return rD(e,t,i,n);if(z8()||typeof ActiveXObject=="function")return sD(e,t,i,n);n(new Error("No fetch and no xhr implementation found!"))};function kp(a){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kp(a)}function yM(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function aC(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?yM(Object(t),!0).forEach(function(i){X8(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):yM(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function lD(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function bM(a,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,H8(i.key),i)}}function uD(a,e,t){return e&&bM(a.prototype,e),t&&bM(a,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function X8(a,e,t){return(e=H8(e))in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function H8(a){var e=cD(a,"string");return kp(e)=="symbol"?e:e+""}function cD(a,e){if(kp(a)!="object"||!a)return a;var t=a[Symbol.toPrimitive];if(t!==void 0){var i=t.call(a,e||"default");if(kp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}var dD=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(t){return JSON.parse(t)},stringify:JSON.stringify,parsePayload:function(t,i,n){return X8({},i,n||"")},parseLoadPayload:function(t,i){},request:oD,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},Y8=function(){function a(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};lD(this,a),this.services=e,this.options=t,this.allOptions=i,this.type="backend",this.init(e,t,i)}return uD(a,[{key:"init",value:function(t){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=t,this.options=aC(aC(aC({},dD()),this.options||{}),n),this.allOptions=s,this.services&&this.options.reloadInterval){var r=setInterval(function(){return i.reload()},this.options.reloadInterval);kp(r)==="object"&&typeof r.unref=="function"&&r.unref()}}},{key:"readMulti",value:function(t,i,n){this._readAny(t,t,i,i,n)}},{key:"read",value:function(t,i,n){this._readAny([t],t,[i],i,n)}},{key:"_readAny",value:function(t,i,n,s,r){var l=this,c=this.options.loadPath;typeof this.options.loadPath=="function"&&(c=this.options.loadPath(t,n)),c=$N(c),c.then(function(h){if(!h)return r(null,{});var g=l.services.interpolator.interpolate(h,{lng:t.join("+"),ns:n.join("+")});l.loadUrl(g,r,i,s)})}},{key:"loadUrl",value:function(t,i,n,s){var r=this,l=typeof n=="string"?[n]:n,c=typeof s=="string"?[s]:s,h=this.options.parseLoadPayload(l,c);this.options.request(this.options,t,h,function(g,b){if(b&&(b.status>=500&&b.status<600||!b.status))return i("failed loading "+t+"; status code: "+b.status,!0);if(b&&b.status>=400&&b.status<500)return i("failed loading "+t+"; status code: "+b.status,!1);if(!b&&g&&g.message){var v=g.message.toLowerCase(),C=["failed","fetch","network","load"].find(function(R){return v.indexOf(R)>-1});if(C)return i("failed loading "+t+": "+g.message,!0)}if(g)return i(g,!1);var S,L;try{typeof b.data=="string"?S=r.options.parse(b.data,n,s):S=b.data}catch{L="failed parsing "+t+" to json"}if(L)return i(L,!1);i(null,S)})}},{key:"create",value:function(t,i,n,s,r){var l=this;if(this.options.addPath){typeof t=="string"&&(t=[t]);var c=this.options.parsePayload(i,n,s),h=0,g=[],b=[];t.forEach(function(v){var C=l.options.addPath;typeof l.options.addPath=="function"&&(C=l.options.addPath(v,i));var S=l.services.interpolator.interpolate(C,{lng:v,ns:i});l.options.request(l.options,S,c,function(L,R){h+=1,g.push(L),b.push(R),h===t.length&&typeof r=="function"&&r(g,b)})})}}},{key:"reload",value:function(){var t=this,i=this.services,n=i.backendConnector,s=i.languageUtils,r=i.logger,l=n.language;if(!(l&&l.toLowerCase()==="cimode")){var c=[],h=function(b){var v=s.toResolveHierarchy(b);v.forEach(function(C){c.indexOf(C)<0&&c.push(C)})};h(l),this.allOptions.preload&&this.allOptions.preload.forEach(function(g){return h(g)}),c.forEach(function(g){t.allOptions.ns.forEach(function(b){n.read(g,b,"read",null,null,function(v,C){v&&r.warn("loading namespace ".concat(b," for language ").concat(g," failed"),v),!v&&C&&r.log("loaded namespace ".concat(b," for language ").concat(g),C),n.loaded("".concat(g,"|").concat(b),v,C)})})})}}}])}();Y8.type="backend";/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function U4(a){const e=Object.create(null);for(const t of a.split(","))e[t]=1;return t=>t in e}const vn={},hp=[],Jl=()=>{},hD=()=>!1,rw=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&(a.charCodeAt(2)>122||a.charCodeAt(2)<97),X4=a=>a.startsWith("onUpdate:"),Wr=Object.assign,H4=(a,e)=>{const t=a.indexOf(e);t>-1&&a.splice(t,1)},_D=Object.prototype.hasOwnProperty,$i=(a,e)=>_D.call(a,e),Ra=Array.isArray,_p=a=>l1(a)==="[object Map]",sw=a=>l1(a)==="[object Set]",vM=a=>l1(a)==="[object Date]",ja=a=>typeof a=="function",$n=a=>typeof a=="string",tu=a=>typeof a=="symbol",gn=a=>a!==null&&typeof a=="object",K8=a=>(gn(a)||ja(a))&&ja(a.then)&&ja(a.catch),q8=Object.prototype.toString,l1=a=>q8.call(a),mD=a=>l1(a).slice(8,-1),j8=a=>l1(a)==="[object Object]",Y4=a=>$n(a)&&a!=="NaN"&&a[0]!=="-"&&""+parseInt(a,10)===a,jy=U4(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ow=a=>{const e=Object.create(null);return t=>e[t]||(e[t]=a(t))},gD=/-(\w)/g,Al=ow(a=>a.replace(gD,(e,t)=>t?t.toUpperCase():"")),pD=/\B([A-Z])/g,Gh=ow(a=>a.replace(pD,"-$1").toLowerCase()),lw=ow(a=>a.charAt(0).toUpperCase()+a.slice(1)),iC=ow(a=>a?`on${lw(a)}`:""),vh=(a,e)=>!Object.is(a,e),jv=(a,...e)=>{for(let t=0;t<a.length;t++)a[t](...e)},J8=(a,e,t,i=!1)=>{Object.defineProperty(a,e,{configurable:!0,enumerable:!1,writable:i,value:t})},qA=a=>{const e=parseFloat(a);return isNaN(e)?a:e},fD=a=>{const e=$n(a)?Number(a):NaN;return isNaN(e)?a:e};let xM;const uw=()=>xM||(xM=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Oh(a){if(Ra(a)){const e={};for(let t=0;t<a.length;t++){const i=a[t],n=$n(i)?xD(i):Oh(i);if(n)for(const s in n)e[s]=n[s]}return e}else if($n(a)||gn(a))return a}const yD=/;(?![^(]*\))/g,bD=/:([^]+)/,vD=/\/\*[^]*?\*\//g;function xD(a){const e={};return a.replace(vD,"").split(yD).forEach(t=>{if(t){const i=t.split(bD);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function ti(a){let e="";if($n(a))e=a;else if(Ra(a))for(let t=0;t<a.length;t++){const i=ti(a[t]);i&&(e+=i+" ")}else if(gn(a))for(const t in a)a[t]&&(e+=t+" ");return e.trim()}const wD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ID=U4(wD);function Q8(a){return!!a||a===""}function CD(a,e){if(a.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<a.length;i++)t=cw(a[i],e[i]);return t}function cw(a,e){if(a===e)return!0;let t=vM(a),i=vM(e);if(t||i)return t&&i?a.getTime()===e.getTime():!1;if(t=tu(a),i=tu(e),t||i)return a===e;if(t=Ra(a),i=Ra(e),t||i)return t&&i?CD(a,e):!1;if(t=gn(a),i=gn(e),t||i){if(!t||!i)return!1;const n=Object.keys(a).length,s=Object.keys(e).length;if(n!==s)return!1;for(const r in a){const l=a.hasOwnProperty(r),c=e.hasOwnProperty(r);if(l&&!c||!l&&c||!cw(a[r],e[r]))return!1}}return String(a)===String(e)}function $8(a,e){return a.findIndex(t=>cw(t,e))}const e6=a=>!!(a&&a.__v_isRef===!0),Fe=a=>$n(a)?a:a==null?"":Ra(a)||gn(a)&&(a.toString===q8||!ja(a.toString))?e6(a)?Fe(a.value):JSON.stringify(a,t6,2):String(a),t6=(a,e)=>e6(e)?t6(a,e.value):_p(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n],s)=>(t[nC(i,s)+" =>"]=n,t),{})}:sw(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>nC(t))}:tu(e)?nC(e):gn(e)&&!Ra(e)&&!j8(e)?String(e):e,nC=(a,e="")=>{var t;return tu(a)?`Symbol(${(t=a.description)!=null?t:e})`:a};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qs;class a6{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Qs,!e&&Qs&&(this.index=(Qs.scopes||(Qs.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Qs;try{return Qs=this,e()}finally{Qs=t}}}on(){Qs=this}off(){Qs=this.parent}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function i6(a){return new a6(a)}function n6(){return Qs}function AD(a,e=!1){Qs&&Qs.cleanups.push(a)}let An;const rC=new WeakSet;class r6{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Qs&&Qs.active&&Qs.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,rC.has(this)&&(rC.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||o6(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,wM(this),l6(this);const e=An,t=Ql;An=this,Ql=!0;try{return this.fn()}finally{u6(this),An=e,Ql=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)j4(e);this.deps=this.depsTail=void 0,wM(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?rC.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){jA(this)&&this.run()}get dirty(){return jA(this)}}let s6=0,Jy,Qy;function o6(a,e=!1){if(a.flags|=8,e){a.next=Qy,Qy=a;return}a.next=Jy,Jy=a}function K4(){s6++}function q4(){if(--s6>0)return;if(Qy){let e=Qy;for(Qy=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let a;for(;Jy;){let e=Jy;for(Jy=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){a||(a=i)}e=t}}if(a)throw a}function l6(a){for(let e=a.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function u6(a){let e,t=a.depsTail,i=t;for(;i;){const n=i.prevDep;i.version===-1?(i===t&&(t=n),j4(i),SD(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}a.deps=e,a.depsTail=t}function jA(a){for(let e=a.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(c6(e.dep.computed)||e.dep.version!==e.version))return!0;return!!a._dirty}function c6(a){if(a.flags&4&&!(a.flags&16)||(a.flags&=-17,a.globalVersion===S0))return;a.globalVersion=S0;const e=a.dep;if(a.flags|=2,e.version>0&&!a.isSSR&&a.deps&&!jA(a)){a.flags&=-3;return}const t=An,i=Ql;An=a,Ql=!0;try{l6(a);const n=a.fn(a._value);(e.version===0||vh(n,a._value))&&(a._value=n,e.version++)}catch(n){throw e.version++,n}finally{An=t,Ql=i,u6(a),a.flags&=-3}}function j4(a,e=!1){const{dep:t,prevSub:i,nextSub:n}=a;if(i&&(i.nextSub=n,a.prevSub=void 0),n&&(n.prevSub=i,a.nextSub=void 0),t.subs===a&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)j4(s,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function SD(a){const{prevDep:e,nextDep:t}=a;e&&(e.nextDep=t,a.prevDep=void 0),t&&(t.prevDep=e,a.nextDep=void 0)}let Ql=!0;const d6=[];function Ph(){d6.push(Ql),Ql=!1}function Bh(){const a=d6.pop();Ql=a===void 0?!0:a}function wM(a){const{cleanup:e}=a;if(a.cleanup=void 0,e){const t=An;An=void 0;try{e()}finally{An=t}}}let S0=0;class TD{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class J4{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!An||!Ql||An===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==An)t=this.activeLink=new TD(An,this),An.deps?(t.prevDep=An.depsTail,An.depsTail.nextDep=t,An.depsTail=t):An.deps=An.depsTail=t,h6(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=An.depsTail,t.nextDep=void 0,An.depsTail.nextDep=t,An.depsTail=t,An.deps===t&&(An.deps=i)}return t}trigger(e){this.version++,S0++,this.notify(e)}notify(e){K4();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{q4()}}}function h6(a){if(a.dep.sc++,a.sub.flags&4){const e=a.dep.computed;if(e&&!a.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)h6(i)}const t=a.dep.subs;t!==a&&(a.prevSub=t,t&&(t.nextSub=a)),a.dep.subs=a}}const k2=new WeakMap,$_=Symbol(""),JA=Symbol(""),T0=Symbol("");function Ws(a,e,t){if(Ql&&An){let i=k2.get(a);i||k2.set(a,i=new Map);let n=i.get(t);n||(i.set(t,n=new J4),n.map=i,n.key=t),n.track()}}function Qc(a,e,t,i,n,s){const r=k2.get(a);if(!r){S0++;return}const l=c=>{c&&c.trigger()};if(K4(),e==="clear")r.forEach(l);else{const c=Ra(a),h=c&&Y4(t);if(c&&t==="length"){const g=Number(i);r.forEach((b,v)=>{(v==="length"||v===T0||!tu(v)&&v>=g)&&l(b)})}else switch((t!==void 0||r.has(void 0))&&l(r.get(t)),h&&l(r.get(T0)),e){case"add":c?h&&l(r.get("length")):(l(r.get($_)),_p(a)&&l(r.get(JA)));break;case"delete":c||(l(r.get($_)),_p(a)&&l(r.get(JA)));break;case"set":_p(a)&&l(r.get($_));break}}q4()}function ED(a,e){const t=k2.get(a);return t&&t.get(e)}function Tg(a){const e=ki(a);return e===a?e:(Ws(e,"iterate",T0),wl(a)?e:e.map(Gs))}function dw(a){return Ws(a=ki(a),"iterate",T0),a}const MD={__proto__:null,[Symbol.iterator](){return sC(this,Symbol.iterator,Gs)},concat(...a){return Tg(this).concat(...a.map(e=>Ra(e)?Tg(e):e))},entries(){return sC(this,"entries",a=>(a[1]=Gs(a[1]),a))},every(a,e){return Fc(this,"every",a,e,void 0,arguments)},filter(a,e){return Fc(this,"filter",a,e,t=>t.map(Gs),arguments)},find(a,e){return Fc(this,"find",a,e,Gs,arguments)},findIndex(a,e){return Fc(this,"findIndex",a,e,void 0,arguments)},findLast(a,e){return Fc(this,"findLast",a,e,Gs,arguments)},findLastIndex(a,e){return Fc(this,"findLastIndex",a,e,void 0,arguments)},forEach(a,e){return Fc(this,"forEach",a,e,void 0,arguments)},includes(...a){return oC(this,"includes",a)},indexOf(...a){return oC(this,"indexOf",a)},join(a){return Tg(this).join(a)},lastIndexOf(...a){return oC(this,"lastIndexOf",a)},map(a,e){return Fc(this,"map",a,e,void 0,arguments)},pop(){return _y(this,"pop")},push(...a){return _y(this,"push",a)},reduce(a,...e){return IM(this,"reduce",a,e)},reduceRight(a,...e){return IM(this,"reduceRight",a,e)},shift(){return _y(this,"shift")},some(a,e){return Fc(this,"some",a,e,void 0,arguments)},splice(...a){return _y(this,"splice",a)},toReversed(){return Tg(this).toReversed()},toSorted(a){return Tg(this).toSorted(a)},toSpliced(...a){return Tg(this).toSpliced(...a)},unshift(...a){return _y(this,"unshift",a)},values(){return sC(this,"values",Gs)}};function sC(a,e,t){const i=dw(a),n=i[e]();return i!==a&&!wl(a)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.value&&(s.value=t(s.value)),s}),n}const LD=Array.prototype;function Fc(a,e,t,i,n,s){const r=dw(a),l=r!==a&&!wl(a),c=r[e];if(c!==LD[e]){const b=c.apply(a,s);return l?Gs(b):b}let h=t;r!==a&&(l?h=function(b,v){return t.call(this,Gs(b),v,a)}:t.length>2&&(h=function(b,v){return t.call(this,b,v,a)}));const g=c.call(r,h,i);return l&&n?n(g):g}function IM(a,e,t,i){const n=dw(a);let s=t;return n!==a&&(wl(a)?t.length>3&&(s=function(r,l,c){return t.call(this,r,l,c,a)}):s=function(r,l,c){return t.call(this,r,Gs(l),c,a)}),n[e](s,...i)}function oC(a,e,t){const i=ki(a);Ws(i,"iterate",T0);const n=i[e](...t);return(n===-1||n===!1)&&eT(t[0])?(t[0]=ki(t[0]),i[e](...t)):n}function _y(a,e,t=[]){Ph(),K4();const i=ki(a)[e].apply(a,t);return q4(),Bh(),i}const RD=U4("__proto__,__v_isRef,__isVue"),_6=new Set(Object.getOwnPropertyNames(Symbol).filter(a=>a!=="arguments"&&a!=="caller").map(a=>Symbol[a]).filter(tu));function kD(a){tu(a)||(a=String(a));const e=ki(this);return Ws(e,"has",a),e.hasOwnProperty(a)}class m6{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const n=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(n?s?ZD:y6:s?f6:p6).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=Ra(e);if(!n){let c;if(r&&(c=MD[t]))return c;if(t==="hasOwnProperty")return kD}const l=Reflect.get(e,t,Zn(e)?e:i);return(tu(t)?_6.has(t):RD(t))||(n||Ws(e,"get",t),s)?l:Zn(l)?r&&Y4(t)?l:l.value:gn(l)?n?b6(l):hw(l):l}}class g6 extends m6{constructor(e=!1){super(!1,e)}set(e,t,i,n){let s=e[t];if(!this._isShallow){const c=nm(s);if(!wl(i)&&!nm(i)&&(s=ki(s),i=ki(i)),!Ra(e)&&Zn(s)&&!Zn(i))return c?!1:(s.value=i,!0)}const r=Ra(e)&&Y4(t)?Number(t)<e.length:$i(e,t),l=Reflect.set(e,t,i,Zn(e)?e:n);return e===ki(n)&&(r?vh(i,s)&&Qc(e,"set",t,i):Qc(e,"add",t,i)),l}deleteProperty(e,t){const i=$i(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&Qc(e,"delete",t,void 0),n}has(e,t){const i=Reflect.has(e,t);return(!tu(t)||!_6.has(t))&&Ws(e,"has",t),i}ownKeys(e){return Ws(e,"iterate",Ra(e)?"length":$_),Reflect.ownKeys(e)}}class WD extends m6{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const GD=new g6,OD=new WD,PD=new g6(!0);const QA=a=>a,qb=a=>Reflect.getPrototypeOf(a);function BD(a,e,t){return function(...i){const n=this.__v_raw,s=ki(n),r=_p(s),l=a==="entries"||a===Symbol.iterator&&r,c=a==="keys"&&r,h=n[a](...i),g=t?QA:e?$A:Gs;return!e&&Ws(s,"iterate",c?JA:$_),{next(){const{value:b,done:v}=h.next();return v?{value:b,done:v}:{value:l?[g(b[0]),g(b[1])]:g(b),done:v}},[Symbol.iterator](){return this}}}}function jb(a){return function(...e){return a==="delete"?!1:a==="clear"?void 0:this}}function FD(a,e){const t={get(n){const s=this.__v_raw,r=ki(s),l=ki(n);a||(vh(n,l)&&Ws(r,"get",n),Ws(r,"get",l));const{has:c}=qb(r),h=e?QA:a?$A:Gs;if(c.call(r,n))return h(s.get(n));if(c.call(r,l))return h(s.get(l));s!==r&&s.get(n)},get size(){const n=this.__v_raw;return!a&&Ws(ki(n),"iterate",$_),Reflect.get(n,"size",n)},has(n){const s=this.__v_raw,r=ki(s),l=ki(n);return a||(vh(n,l)&&Ws(r,"has",n),Ws(r,"has",l)),n===l?s.has(n):s.has(n)||s.has(l)},forEach(n,s){const r=this,l=r.__v_raw,c=ki(l),h=e?QA:a?$A:Gs;return!a&&Ws(c,"iterate",$_),l.forEach((g,b)=>n.call(s,h(g),h(b),r))}};return Wr(t,a?{add:jb("add"),set:jb("set"),delete:jb("delete"),clear:jb("clear")}:{add(n){!e&&!wl(n)&&!nm(n)&&(n=ki(n));const s=ki(this);return qb(s).has.call(s,n)||(s.add(n),Qc(s,"add",n,n)),this},set(n,s){!e&&!wl(s)&&!nm(s)&&(s=ki(s));const r=ki(this),{has:l,get:c}=qb(r);let h=l.call(r,n);h||(n=ki(n),h=l.call(r,n));const g=c.call(r,n);return r.set(n,s),h?vh(s,g)&&Qc(r,"set",n,s):Qc(r,"add",n,s),this},delete(n){const s=ki(this),{has:r,get:l}=qb(s);let c=r.call(s,n);c||(n=ki(n),c=r.call(s,n)),l&&l.call(s,n);const h=s.delete(n);return c&&Qc(s,"delete",n,void 0),h},clear(){const n=ki(this),s=n.size!==0,r=n.clear();return s&&Qc(n,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=BD(n,a,e)}),t}function Q4(a,e){const t=FD(a,e);return(i,n,s)=>n==="__v_isReactive"?!a:n==="__v_isReadonly"?a:n==="__v_raw"?i:Reflect.get($i(t,n)&&n in i?t:i,n,s)}const ND={get:Q4(!1,!1)},DD={get:Q4(!1,!0)},VD={get:Q4(!0,!1)};const p6=new WeakMap,f6=new WeakMap,y6=new WeakMap,ZD=new WeakMap;function zD(a){switch(a){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function UD(a){return a.__v_skip||!Object.isExtensible(a)?0:zD(mD(a))}function hw(a){return nm(a)?a:$4(a,!1,GD,ND,p6)}function XD(a){return $4(a,!1,PD,DD,f6)}function b6(a){return $4(a,!0,OD,VD,y6)}function $4(a,e,t,i,n){if(!gn(a)||a.__v_raw&&!(e&&a.__v_isReactive))return a;const s=n.get(a);if(s)return s;const r=UD(a);if(r===0)return a;const l=new Proxy(a,r===2?i:t);return n.set(a,l),l}function td(a){return nm(a)?td(a.__v_raw):!!(a&&a.__v_isReactive)}function nm(a){return!!(a&&a.__v_isReadonly)}function wl(a){return!!(a&&a.__v_isShallow)}function eT(a){return a?!!a.__v_raw:!1}function ki(a){const e=a&&a.__v_raw;return e?ki(e):a}function tT(a){return!$i(a,"__v_skip")&&Object.isExtensible(a)&&J8(a,"__v_skip",!0),a}const Gs=a=>gn(a)?hw(a):a,$A=a=>gn(a)?b6(a):a;function Zn(a){return a?a.__v_isRef===!0:!1}function Qe(a){return v6(a,!1)}function Wi(a){return v6(a,!0)}function v6(a,e){return Zn(a)?a:new HD(a,e)}class HD{constructor(e,t){this.dep=new J4,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:ki(e),this._value=t?e:Gs(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||wl(e)||nm(e);e=i?e:ki(e),vh(e,t)&&(this._rawValue=e,this._value=i?e:Gs(e),this.dep.trigger())}}function X(a){return Zn(a)?a.value:a}function YD(a){return ja(a)?a():X(a)}const KD={get:(a,e,t)=>e==="__v_raw"?a:X(Reflect.get(a,e,t)),set:(a,e,t,i)=>{const n=a[e];return Zn(n)&&!Zn(t)?(n.value=t,!0):Reflect.set(a,e,t,i)}};function x6(a){return td(a)?a:new Proxy(a,KD)}function qD(a){const e=Ra(a)?new Array(a.length):{};for(const t in a)e[t]=I6(a,t);return e}class jD{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return ED(ki(this._object),this._key)}}class JD{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function w6(a,e,t){return Zn(a)?a:ja(a)?new JD(a):gn(a)&&arguments.length>1?I6(a,e,t):Qe(a)}function I6(a,e,t){const i=a[e];return Zn(i)?i:new jD(a,e,t)}class QD{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new J4(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=S0-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&An!==this)return o6(this,!0),!0}get value(){const e=this.dep.track();return c6(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function $D(a,e,t=!1){let i,n;return ja(a)?i=a:(i=a.get,n=a.set),new QD(i,n,t)}const Jb={},W2=new WeakMap;let B_;function eV(a,e=!1,t=B_){if(t){let i=W2.get(t);i||W2.set(t,i=[]),i.push(a)}}function tV(a,e,t=vn){const{immediate:i,deep:n,once:s,scheduler:r,augmentJob:l,call:c}=t,h=B=>n?B:wl(B)||n===!1||n===0?$c(B,1):$c(B);let g,b,v,C,S=!1,L=!1;if(Zn(a)?(b=()=>a.value,S=wl(a)):td(a)?(b=()=>h(a),S=!0):Ra(a)?(L=!0,S=a.some(B=>td(B)||wl(B)),b=()=>a.map(B=>{if(Zn(B))return B.value;if(td(B))return h(B);if(ja(B))return c?c(B,2):B()})):ja(a)?e?b=c?()=>c(a,2):a:b=()=>{if(v){Ph();try{v()}finally{Bh()}}const B=B_;B_=g;try{return c?c(a,3,[C]):a(C)}finally{B_=B}}:b=Jl,e&&n){const B=b,z=n===!0?1/0:n;b=()=>$c(B(),z)}const R=n6(),G=()=>{g.stop(),R&&R.active&&H4(R.effects,g)};if(s&&e){const B=e;e=(...z)=>{B(...z),G()}}let O=L?new Array(a.length).fill(Jb):Jb;const V=B=>{if(!(!(g.flags&1)||!g.dirty&&!B))if(e){const z=g.run();if(n||S||(L?z.some((j,re)=>vh(j,O[re])):vh(z,O))){v&&v();const j=B_;B_=g;try{const re=[z,O===Jb?void 0:L&&O[0]===Jb?[]:O,C];c?c(e,3,re):e(...re),O=z}finally{B_=j}}}else g.run()};return l&&l(V),g=new r6(b),g.scheduler=r?()=>r(V,!1):V,C=B=>eV(B,!1,g),v=g.onStop=()=>{const B=W2.get(g);if(B){if(c)c(B,4);else for(const z of B)z();W2.delete(g)}},e?i?V(!0):O=g.run():r?r(V.bind(null,!0),!0):g.run(),G.pause=g.pause.bind(g),G.resume=g.resume.bind(g),G.stop=G,G}function $c(a,e=1/0,t){if(e<=0||!gn(a)||a.__v_skip||(t=t||new Set,t.has(a)))return a;if(t.add(a),e--,Zn(a))$c(a.value,e,t);else if(Ra(a))for(let i=0;i<a.length;i++)$c(a[i],e,t);else if(sw(a)||_p(a))a.forEach(i=>{$c(i,e,t)});else if(j8(a)){for(const i in a)$c(a[i],e,t);for(const i of Object.getOwnPropertySymbols(a))Object.prototype.propertyIsEnumerable.call(a,i)&&$c(a[i],e,t)}return a}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function u1(a,e,t,i){try{return i?a(...i):a()}catch(n){_w(n,e,t)}}function au(a,e,t,i){if(ja(a)){const n=u1(a,e,t,i);return n&&K8(n)&&n.catch(s=>{_w(s,e,t)}),n}if(Ra(a)){const n=[];for(let s=0;s<a.length;s++)n.push(au(a[s],e,t,i));return n}}function _w(a,e,t,i=!0){const n=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||vn;if(e){let l=e.parent;const c=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${t}`;for(;l;){const g=l.ec;if(g){for(let b=0;b<g.length;b++)if(g[b](a,c,h)===!1)return}l=l.parent}if(s){Ph(),u1(s,null,10,[a,c,h]),Bh();return}}aV(a,t,n,i,r)}function aV(a,e,t,i=!0,n=!1){if(n)throw a;console.error(a)}const $s=[];let Nu=-1;const mp=[];let th=null,Zg=0;const C6=Promise.resolve();let G2=null;function E0(a){const e=G2||C6;return a?e.then(this?a.bind(this):a):e}function iV(a){let e=Nu+1,t=$s.length;for(;e<t;){const i=e+t>>>1,n=$s[i],s=M0(n);s<a||s===a&&n.flags&2?e=i+1:t=i}return e}function aT(a){if(!(a.flags&1)){const e=M0(a),t=$s[$s.length-1];!t||!(a.flags&2)&&e>=M0(t)?$s.push(a):$s.splice(iV(e),0,a),a.flags|=1,A6()}}function A6(){G2||(G2=C6.then(T6))}function nV(a){Ra(a)?mp.push(...a):th&&a.id===-1?th.splice(Zg+1,0,a):a.flags&1||(mp.push(a),a.flags|=1),A6()}function CM(a,e,t=Nu+1){for(;t<$s.length;t++){const i=$s[t];if(i&&i.flags&2){if(a&&i.id!==a.uid)continue;$s.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function S6(a){if(mp.length){const e=[...new Set(mp)].sort((t,i)=>M0(t)-M0(i));if(mp.length=0,th){th.push(...e);return}for(th=e,Zg=0;Zg<th.length;Zg++){const t=th[Zg];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}th=null,Zg=0}}const M0=a=>a.id==null?a.flags&2?-1:1/0:a.id;function T6(a){const e=Jl;try{for(Nu=0;Nu<$s.length;Nu++){const t=$s[Nu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),u1(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Nu<$s.length;Nu++){const t=$s[Nu];t&&(t.flags&=-2)}Nu=-1,$s.length=0,S6(),G2=null,($s.length||mp.length)&&T6()}}let Dr=null,E6=null;function O2(a){const e=Dr;return Dr=a,E6=a&&a.type.__scopeId||null,e}function Ha(a,e=Dr,t){if(!e||a._n)return a;const i=(...n)=>{i._d&&BM(-1);const s=O2(e);let r;try{r=a(...n)}finally{O2(s),i._d&&BM(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function Mi(a,e){if(Dr===null)return a;const t=vw(Dr),i=a.dirs||(a.dirs=[]);for(let n=0;n<e.length;n++){let[s,r,l,c=vn]=e[n];s&&(ja(s)&&(s={mounted:s,updated:s}),s.deep&&$c(r),i.push({dir:s,instance:t,value:r,oldValue:void 0,arg:l,modifiers:c}))}return a}function I_(a,e,t,i){const n=a.dirs,s=e&&e.dirs;for(let r=0;r<n.length;r++){const l=n[r];s&&(l.oldValue=s[r].value);let c=l.dir[i];c&&(Ph(),au(c,t,8,[a.el,l,a,e]),Bh())}}const M6=Symbol("_vte"),L6=a=>a.__isTeleport,$y=a=>a&&(a.disabled||a.disabled===""),AM=a=>a&&(a.defer||a.defer===""),SM=a=>typeof SVGElement<"u"&&a instanceof SVGElement,TM=a=>typeof MathMLElement=="function"&&a instanceof MathMLElement,eS=(a,e)=>{const t=a&&a.to;return $n(t)?e?e(t):null:t},R6={name:"Teleport",__isTeleport:!0,process(a,e,t,i,n,s,r,l,c,h){const{mc:g,pc:b,pbc:v,o:{insert:C,querySelector:S,createText:L,createComment:R}}=h,G=$y(e.props);let{shapeFlag:O,children:V,dynamicChildren:B}=e;if(a==null){const z=e.el=L(""),j=e.anchor=L("");C(z,t,i),C(j,t,i);const re=(te,le)=>{O&16&&(n&&n.isCE&&(n.ce._teleportTarget=te),g(V,te,le,n,s,r,l,c))},ne=()=>{const te=e.target=eS(e.props,S),le=k6(te,e,L,C);te&&(r!=="svg"&&SM(te)?r="svg":r!=="mathml"&&TM(te)&&(r="mathml"),G||(re(te,le),Jv(e,!1)))};G&&(re(t,j),Jv(e,!0)),AM(e.props)?qs(()=>{ne(),e.el.__isMounted=!0},s):ne()}else{if(AM(e.props)&&!a.el.__isMounted){qs(()=>{R6.process(a,e,t,i,n,s,r,l,c,h),delete a.el.__isMounted},s);return}e.el=a.el,e.targetStart=a.targetStart;const z=e.anchor=a.anchor,j=e.target=a.target,re=e.targetAnchor=a.targetAnchor,ne=$y(a.props),te=ne?t:j,le=ne?z:re;if(r==="svg"||SM(j)?r="svg":(r==="mathml"||TM(j))&&(r="mathml"),B?(v(a.dynamicChildren,B,te,n,s,r,l),lT(a,e,!0)):c||b(a,e,te,le,n,s,r,l,!1),G)ne?e.props&&a.props&&e.props.to!==a.props.to&&(e.props.to=a.props.to):Qb(e,t,z,h,1);else if((e.props&&e.props.to)!==(a.props&&a.props.to)){const ue=e.target=eS(e.props,S);ue&&Qb(e,ue,null,h,0)}else ne&&Qb(e,j,re,h,1);Jv(e,G)}},remove(a,e,t,{um:i,o:{remove:n}},s){const{shapeFlag:r,children:l,anchor:c,targetStart:h,targetAnchor:g,target:b,props:v}=a;if(b&&(n(h),n(g)),s&&n(c),r&16){const C=s||!$y(v);for(let S=0;S<l.length;S++){const L=l[S];i(L,e,t,C,!!L.dynamicChildren)}}},move:Qb,hydrate:rV};function Qb(a,e,t,{o:{insert:i},m:n},s=2){s===0&&i(a.targetAnchor,e,t);const{el:r,anchor:l,shapeFlag:c,children:h,props:g}=a,b=s===2;if(b&&i(r,e,t),(!b||$y(g))&&c&16)for(let v=0;v<h.length;v++)n(h[v],e,t,2);b&&i(l,e,t)}function rV(a,e,t,i,n,s,{o:{nextSibling:r,parentNode:l,querySelector:c,insert:h,createText:g}},b){const v=e.target=eS(e.props,c);if(v){const C=$y(e.props),S=v._lpa||v.firstChild;if(e.shapeFlag&16)if(C)e.anchor=b(r(a),e,l(a),t,i,n,s),e.targetStart=S,e.targetAnchor=S&&r(S);else{e.anchor=r(a);let L=S;for(;L;){if(L&&L.nodeType===8){if(L.data==="teleport start anchor")e.targetStart=L;else if(L.data==="teleport anchor"){e.targetAnchor=L,v._lpa=e.targetAnchor&&r(e.targetAnchor);break}}L=r(L)}e.targetAnchor||k6(v,e,g,h),b(S&&r(S),e,v,t,i,n,s)}Jv(e,C)}return e.anchor&&r(e.anchor)}const mw=R6;function Jv(a,e){const t=a.ctx;if(t&&t.ut){let i,n;for(e?(i=a.el,n=a.anchor):(i=a.targetStart,n=a.targetAnchor);i&&i!==n;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function k6(a,e,t,i){const n=e.targetStart=t(""),s=e.targetAnchor=t("");return n[M6]=s,a&&(i(n,a),i(s,a)),s}const ah=Symbol("_leaveCb"),$b=Symbol("_enterCb");function sV(){const a={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return tr(()=>{a.isMounted=!0}),iT(()=>{a.isUnmounting=!0}),a}const ml=[Function,Array],W6={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ml,onEnter:ml,onAfterEnter:ml,onEnterCancelled:ml,onBeforeLeave:ml,onLeave:ml,onAfterLeave:ml,onLeaveCancelled:ml,onBeforeAppear:ml,onAppear:ml,onAfterAppear:ml,onAppearCancelled:ml},G6=a=>{const e=a.subTree;return e.component?G6(e.component):e},oV={name:"BaseTransition",props:W6,setup(a,{slots:e}){const t=ok(),i=sV();return()=>{const n=e.default&&B6(e.default(),!0);if(!n||!n.length)return;const s=O6(n),r=ki(a),{mode:l}=r;if(i.isLeaving)return lC(s);const c=EM(s);if(!c)return lC(s);let h=tS(c,r,i,t,b=>h=b);c.type!==to&&L0(c,h);let g=t.subTree&&EM(t.subTree);if(g&&g.type!==to&&!Z_(c,g)&&G6(t).type!==to){let b=tS(g,r,i,t);if(L0(g,b),l==="out-in"&&c.type!==to)return i.isLeaving=!0,b.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete b.afterLeave,g=void 0},lC(s);l==="in-out"&&c.type!==to?b.delayLeave=(v,C,S)=>{const L=P6(i,g);L[String(g.key)]=g,v[ah]=()=>{C(),v[ah]=void 0,delete h.delayedLeave,g=void 0},h.delayedLeave=()=>{S(),delete h.delayedLeave,g=void 0}}:g=void 0}else g&&(g=void 0);return s}}};function O6(a){let e=a[0];if(a.length>1){for(const t of a)if(t.type!==to){e=t;break}}return e}const lV=oV;function P6(a,e){const{leavingVNodes:t}=a;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function tS(a,e,t,i,n){const{appear:s,mode:r,persisted:l=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:g,onEnterCancelled:b,onBeforeLeave:v,onLeave:C,onAfterLeave:S,onLeaveCancelled:L,onBeforeAppear:R,onAppear:G,onAfterAppear:O,onAppearCancelled:V}=e,B=String(a.key),z=P6(t,a),j=(te,le)=>{te&&au(te,i,9,le)},re=(te,le)=>{const ue=le[1];j(te,le),Ra(te)?te.every(fe=>fe.length<=1)&&ue():te.length<=1&&ue()},ne={mode:r,persisted:l,beforeEnter(te){let le=c;if(!t.isMounted)if(s)le=R||c;else return;te[ah]&&te[ah](!0);const ue=z[B];ue&&Z_(a,ue)&&ue.el[ah]&&ue.el[ah](),j(le,[te])},enter(te){let le=h,ue=g,fe=b;if(!t.isMounted)if(s)le=G||h,ue=O||g,fe=V||b;else return;let be=!1;const Pe=te[$b]=Be=>{be||(be=!0,Be?j(fe,[te]):j(ue,[te]),ne.delayedLeave&&ne.delayedLeave(),te[$b]=void 0)};le?re(le,[te,Pe]):Pe()},leave(te,le){const ue=String(a.key);if(te[$b]&&te[$b](!0),t.isUnmounting)return le();j(v,[te]);let fe=!1;const be=te[ah]=Pe=>{fe||(fe=!0,le(),Pe?j(L,[te]):j(S,[te]),te[ah]=void 0,z[ue]===a&&delete z[ue])};z[ue]=a,C?re(C,[te,be]):be()},clone(te){const le=tS(te,e,t,i,n);return n&&n(le),le}};return ne}function lC(a){if(gw(a))return a=Th(a),a.children=null,a}function EM(a){if(!gw(a))return L6(a.type)&&a.children?O6(a.children):a;const{shapeFlag:e,children:t}=a;if(t){if(e&16)return t[0];if(e&32&&ja(t.default))return t.default()}}function L0(a,e){a.shapeFlag&6&&a.component?(a.transition=e,L0(a.component.subTree,e)):a.shapeFlag&128?(a.ssContent.transition=e.clone(a.ssContent),a.ssFallback.transition=e.clone(a.ssFallback)):a.transition=e}function B6(a,e=!1,t){let i=[],n=0;for(let s=0;s<a.length;s++){let r=a[s];const l=t==null?r.key:String(t)+String(r.key!=null?r.key:s);r.type===ua?(r.patchFlag&128&&n++,i=i.concat(B6(r.children,e,l))):(e||r.type!==to)&&i.push(l!=null?Th(r,{key:l}):r)}if(n>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function bt(a,e){return ja(a)?(()=>Wr({name:a.name},e,{setup:a}))():a}function F6(a){a.ids=[a.ids[0]+a.ids[2]+++"-",0,0]}function P2(a,e,t,i,n=!1){if(Ra(a)){a.forEach((S,L)=>P2(S,e&&(Ra(e)?e[L]:e),t,i,n));return}if(gp(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&P2(a,e,t,i.component.subTree);return}const s=i.shapeFlag&4?vw(i.component):i.el,r=n?null:s,{i:l,r:c}=a,h=e&&e.r,g=l.refs===vn?l.refs={}:l.refs,b=l.setupState,v=ki(b),C=b===vn?()=>!1:S=>$i(v,S);if(h!=null&&h!==c&&($n(h)?(g[h]=null,C(h)&&(b[h]=null)):Zn(h)&&(h.value=null)),ja(c))u1(c,l,12,[r,g]);else{const S=$n(c),L=Zn(c);if(S||L){const R=()=>{if(a.f){const G=S?C(c)?b[c]:g[c]:c.value;n?Ra(G)&&H4(G,s):Ra(G)?G.includes(s)||G.push(s):S?(g[c]=[s],C(c)&&(b[c]=g[c])):(c.value=[s],a.k&&(g[a.k]=c.value))}else S?(g[c]=r,C(c)&&(b[c]=r)):L&&(c.value=r,a.k&&(g[a.k]=r))};r?(R.id=-1,qs(R,t)):R()}}}uw().requestIdleCallback;uw().cancelIdleCallback;const gp=a=>!!a.type.__asyncLoader,gw=a=>a.type.__isKeepAlive;function N6(a,e){D6(a,"a",e)}function uV(a,e){D6(a,"da",e)}function D6(a,e,t=as){const i=a.__wdc||(a.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return a()});if(pw(e,i,t),t){let n=t.parent;for(;n&&n.parent;)gw(n.parent.vnode)&&cV(i,e,t,n),n=n.parent}}function cV(a,e,t,i){const n=pw(e,a,i,!0);Ds(()=>{H4(i[e],n)},t)}function pw(a,e,t=as,i=!1){if(t){const n=t[a]||(t[a]=[]),s=e.__weh||(e.__weh=(...r)=>{Ph();const l=d1(t),c=au(e,t,a,r);return l(),Bh(),c});return i?n.unshift(s):n.push(s),s}}const yd=a=>(e,t=as)=>{(!W0||a==="sp")&&pw(a,(...i)=>e(...i),t)},dV=yd("bm"),tr=yd("m"),hV=yd("bu"),_V=yd("u"),iT=yd("bum"),Ds=yd("um"),mV=yd("sp"),gV=yd("rtg"),pV=yd("rtc");function fV(a,e=as){pw("ec",a,e)}const nT="components",yV="directives";function V6(a,e){return rT(nT,a,!0,e)||a}const Z6=Symbol.for("v-ndc");function c1(a){return $n(a)?rT(nT,a,!1)||a:a||Z6}function Fh(a){return rT(yV,a)}function rT(a,e,t=!0,i=!1){const n=Dr||as;if(n){const s=n.type;if(a===nT){const l=nZ(s,!1);if(l&&(l===e||l===Al(e)||l===lw(Al(e))))return s}const r=MM(n[a]||s[a],e)||MM(n.appContext[a],e);return!r&&i?s:r}}function MM(a,e){return a&&(a[e]||a[Al(e)]||a[lw(Al(e))])}function Gn(a,e,t,i){let n;const s=t&&t[i],r=Ra(a);if(r||$n(a)){const l=r&&td(a);let c=!1;l&&(c=!wl(a),a=dw(a)),n=new Array(a.length);for(let h=0,g=a.length;h<g;h++)n[h]=e(c?Gs(a[h]):a[h],h,void 0,s&&s[h])}else if(typeof a=="number"){n=new Array(a);for(let l=0;l<a;l++)n[l]=e(l+1,l,void 0,s&&s[l])}else if(gn(a))if(a[Symbol.iterator])n=Array.from(a,(l,c)=>e(l,c,void 0,s&&s[c]));else{const l=Object.keys(a);n=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const g=l[c];n[c]=e(a[g],g,c,s&&s[c])}}else n=[];return t&&(t[i]=n),n}function qa(a,e,t={},i,n){if(Dr.ce||Dr.parent&&gp(Dr.parent)&&Dr.parent.ce)return e!=="default"&&(t.name=e),se(),xa(ua,null,[dt("slot",t,i&&i())],64);let s=a[e];s&&s._c&&(s._d=!1),se();const r=s&&z6(s(t)),l=t.key||r&&r.key,c=xa(ua,{key:(l&&!tu(l)?l:`_${e}`)+(!r&&i?"_fb":"")},r||(i?i():[]),r&&a._===1?64:-2);return!n&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),s&&s._c&&(s._d=!0),c}function z6(a){return a.some(e=>k0(e)?!(e.type===to||e.type===ua&&!z6(e.children)):!0)?a:null}const aS=a=>a?lk(a)?vw(a):aS(a.parent):null,e0=Wr(Object.create(null),{$:a=>a,$el:a=>a.vnode.el,$data:a=>a.data,$props:a=>a.props,$attrs:a=>a.attrs,$slots:a=>a.slots,$refs:a=>a.refs,$parent:a=>aS(a.parent),$root:a=>aS(a.root),$host:a=>a.ce,$emit:a=>a.emit,$options:a=>sT(a),$forceUpdate:a=>a.f||(a.f=()=>{aT(a.update)}),$nextTick:a=>a.n||(a.n=E0.bind(a.proxy)),$watch:a=>DV.bind(a)}),uC=(a,e)=>a!==vn&&!a.__isScriptSetup&&$i(a,e),bV={get({_:a},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:n,props:s,accessCache:r,type:l,appContext:c}=a;let h;if(e[0]!=="$"){const C=r[e];if(C!==void 0)switch(C){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return s[e]}else{if(uC(i,e))return r[e]=1,i[e];if(n!==vn&&$i(n,e))return r[e]=2,n[e];if((h=a.propsOptions[0])&&$i(h,e))return r[e]=3,s[e];if(t!==vn&&$i(t,e))return r[e]=4,t[e];iS&&(r[e]=0)}}const g=e0[e];let b,v;if(g)return e==="$attrs"&&Ws(a.attrs,"get",""),g(a);if((b=l.__cssModules)&&(b=b[e]))return b;if(t!==vn&&$i(t,e))return r[e]=4,t[e];if(v=c.config.globalProperties,$i(v,e))return v[e]},set({_:a},e,t){const{data:i,setupState:n,ctx:s}=a;return uC(n,e)?(n[e]=t,!0):i!==vn&&$i(i,e)?(i[e]=t,!0):$i(a.props,e)||e[0]==="$"&&e.slice(1)in a?!1:(s[e]=t,!0)},has({_:{data:a,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:s}},r){let l;return!!t[r]||a!==vn&&$i(a,r)||uC(e,r)||(l=s[0])&&$i(l,r)||$i(i,r)||$i(e0,r)||$i(n.config.globalProperties,r)},defineProperty(a,e,t){return t.get!=null?a._.accessCache[e]=0:$i(t,"value")&&this.set(a,e,t.value,null),Reflect.defineProperty(a,e,t)}};function LM(a){return Ra(a)?a.reduce((e,t)=>(e[t]=null,e),{}):a}let iS=!0;function vV(a){const e=sT(a),t=a.proxy,i=a.ctx;iS=!1,e.beforeCreate&&RM(e.beforeCreate,a,"bc");const{data:n,computed:s,methods:r,watch:l,provide:c,inject:h,created:g,beforeMount:b,mounted:v,beforeUpdate:C,updated:S,activated:L,deactivated:R,beforeDestroy:G,beforeUnmount:O,destroyed:V,unmounted:B,render:z,renderTracked:j,renderTriggered:re,errorCaptured:ne,serverPrefetch:te,expose:le,inheritAttrs:ue,components:fe,directives:be,filters:Pe}=e;if(h&&xV(h,i,null),r)for(const ke in r){const Je=r[ke];ja(Je)&&(i[ke]=Je.bind(t))}if(n){const ke=n.call(t,t);gn(ke)&&(a.data=hw(ke))}if(iS=!0,s)for(const ke in s){const Je=s[ke],ut=ja(Je)?Je.bind(t,t):ja(Je.get)?Je.get.bind(t,t):Jl,ht=!ja(Je)&&ja(Je.set)?Je.set.bind(t):Jl,Dt=Ft({get:ut,set:ht});Object.defineProperty(i,ke,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:We=>Dt.value=We})}if(l)for(const ke in l)U6(l[ke],i,t,ke);if(c){const ke=ja(c)?c.call(t):c;Reflect.ownKeys(ke).forEach(Je=>{fw(Je,ke[Je])})}g&&RM(g,a,"c");function Me(ke,Je){Ra(Je)?Je.forEach(ut=>ke(ut.bind(t))):Je&&ke(Je.bind(t))}if(Me(dV,b),Me(tr,v),Me(hV,C),Me(_V,S),Me(N6,L),Me(uV,R),Me(fV,ne),Me(pV,j),Me(gV,re),Me(iT,O),Me(Ds,B),Me(mV,te),Ra(le))if(le.length){const ke=a.exposed||(a.exposed={});le.forEach(Je=>{Object.defineProperty(ke,Je,{get:()=>t[Je],set:ut=>t[Je]=ut})})}else a.exposed||(a.exposed={});z&&a.render===Jl&&(a.render=z),ue!=null&&(a.inheritAttrs=ue),fe&&(a.components=fe),be&&(a.directives=be),te&&F6(a)}function xV(a,e,t=Jl){Ra(a)&&(a=nS(a));for(const i in a){const n=a[i];let s;gn(n)?"default"in n?s=ys(n.from||i,n.default,!0):s=ys(n.from||i):s=ys(n),Zn(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:r=>s.value=r}):e[i]=s}}function RM(a,e,t){au(Ra(a)?a.map(i=>i.bind(e.proxy)):a.bind(e.proxy),e,t)}function U6(a,e,t,i){let n=i.includes(".")?ak(t,i):()=>t[i];if($n(a)){const s=e[a];ja(s)&&Kt(n,s)}else if(ja(a))Kt(n,a.bind(t));else if(gn(a))if(Ra(a))a.forEach(s=>U6(s,e,t,i));else{const s=ja(a.handler)?a.handler.bind(t):e[a.handler];ja(s)&&Kt(n,s,a)}}function sT(a){const e=a.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:r}}=a.appContext,l=s.get(e);let c;return l?c=l:!n.length&&!t&&!i?c=e:(c={},n.length&&n.forEach(h=>B2(c,h,r,!0)),B2(c,e,r)),gn(e)&&s.set(e,c),c}function B2(a,e,t,i=!1){const{mixins:n,extends:s}=e;s&&B2(a,s,t,!0),n&&n.forEach(r=>B2(a,r,t,!0));for(const r in e)if(!(i&&r==="expose")){const l=wV[r]||t&&t[r];a[r]=l?l(a[r],e[r]):e[r]}return a}const wV={data:kM,props:WM,emits:WM,methods:Ey,computed:Ey,beforeCreate:Ys,created:Ys,beforeMount:Ys,mounted:Ys,beforeUpdate:Ys,updated:Ys,beforeDestroy:Ys,beforeUnmount:Ys,destroyed:Ys,unmounted:Ys,activated:Ys,deactivated:Ys,errorCaptured:Ys,serverPrefetch:Ys,components:Ey,directives:Ey,watch:CV,provide:kM,inject:IV};function kM(a,e){return e?a?function(){return Wr(ja(a)?a.call(this,this):a,ja(e)?e.call(this,this):e)}:e:a}function IV(a,e){return Ey(nS(a),nS(e))}function nS(a){if(Ra(a)){const e={};for(let t=0;t<a.length;t++)e[a[t]]=a[t];return e}return a}function Ys(a,e){return a?[...new Set([].concat(a,e))]:e}function Ey(a,e){return a?Wr(Object.create(null),a,e):e}function WM(a,e){return a?Ra(a)&&Ra(e)?[...new Set([...a,...e])]:Wr(Object.create(null),LM(a),LM(e??{})):e}function CV(a,e){if(!a)return e;if(!e)return a;const t=Wr(Object.create(null),a);for(const i in e)t[i]=Ys(a[i],e[i]);return t}function X6(){return{app:null,config:{isNativeTag:hD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let AV=0;function SV(a,e){return function(i,n=null){ja(i)||(i=Wr({},i)),n!=null&&!gn(n)&&(n=null);const s=X6(),r=new WeakSet,l=[];let c=!1;const h=s.app={_uid:AV++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:oZ,get config(){return s.config},set config(g){},use(g,...b){return r.has(g)||(g&&ja(g.install)?(r.add(g),g.install(h,...b)):ja(g)&&(r.add(g),g(h,...b))),h},mixin(g){return s.mixins.includes(g)||s.mixins.push(g),h},component(g,b){return b?(s.components[g]=b,h):s.components[g]},directive(g,b){return b?(s.directives[g]=b,h):s.directives[g]},mount(g,b,v){if(!c){const C=h._ceVNode||dt(i,n);return C.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),b&&e?e(C,g):a(C,g,v),c=!0,h._container=g,g.__vue_app__=h,vw(C.component)}},onUnmount(g){l.push(g)},unmount(){c&&(au(l,h._instance,16),a(null,h._container),delete h._container.__vue_app__)},provide(g,b){return s.provides[g]=b,h},runWithContext(g){const b=em;em=h;try{return g()}finally{em=b}}};return h}}let em=null;function fw(a,e){if(as){let t=as.provides;const i=as.parent&&as.parent.provides;i===t&&(t=as.provides=Object.create(i)),t[a]=e}}function ys(a,e,t=!1){const i=as||Dr;if(i||em){const n=em?em._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&a in n)return n[a];if(arguments.length>1)return t&&ja(e)?e.call(i&&i.proxy):e}}function TV(){return!!(as||Dr||em)}const H6={},Y6=()=>Object.create(H6),K6=a=>Object.getPrototypeOf(a)===H6;function EV(a,e,t,i=!1){const n={},s=Y6();a.propsDefaults=Object.create(null),q6(a,e,n,s);for(const r in a.propsOptions[0])r in n||(n[r]=void 0);t?a.props=i?n:XD(n):a.type.props?a.props=n:a.props=s,a.attrs=s}function MV(a,e,t,i){const{props:n,attrs:s,vnode:{patchFlag:r}}=a,l=ki(n),[c]=a.propsOptions;let h=!1;if((i||r>0)&&!(r&16)){if(r&8){const g=a.vnode.dynamicProps;for(let b=0;b<g.length;b++){let v=g[b];if(yw(a.emitsOptions,v))continue;const C=e[v];if(c)if($i(s,v))C!==s[v]&&(s[v]=C,h=!0);else{const S=Al(v);n[S]=rS(c,l,S,C,a,!1)}else C!==s[v]&&(s[v]=C,h=!0)}}}else{q6(a,e,n,s)&&(h=!0);let g;for(const b in l)(!e||!$i(e,b)&&((g=Gh(b))===b||!$i(e,g)))&&(c?t&&(t[b]!==void 0||t[g]!==void 0)&&(n[b]=rS(c,l,b,void 0,a,!0)):delete n[b]);if(s!==l)for(const b in s)(!e||!$i(e,b))&&(delete s[b],h=!0)}h&&Qc(a.attrs,"set","")}function q6(a,e,t,i){const[n,s]=a.propsOptions;let r=!1,l;if(e)for(let c in e){if(jy(c))continue;const h=e[c];let g;n&&$i(n,g=Al(c))?!s||!s.includes(g)?t[g]=h:(l||(l={}))[g]=h:yw(a.emitsOptions,c)||(!(c in i)||h!==i[c])&&(i[c]=h,r=!0)}if(s){const c=ki(t),h=l||vn;for(let g=0;g<s.length;g++){const b=s[g];t[b]=rS(n,c,b,h[b],a,!$i(h,b))}}return r}function rS(a,e,t,i,n,s){const r=a[t];if(r!=null){const l=$i(r,"default");if(l&&i===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&ja(c)){const{propsDefaults:h}=n;if(t in h)i=h[t];else{const g=d1(n);i=h[t]=c.call(null,e),g()}}else i=c;n.ce&&n.ce._setProp(t,i)}r[0]&&(s&&!l?i=!1:r[1]&&(i===""||i===Gh(t))&&(i=!0))}return i}const LV=new WeakMap;function j6(a,e,t=!1){const i=t?LV:e.propsCache,n=i.get(a);if(n)return n;const s=a.props,r={},l=[];let c=!1;if(!ja(a)){const g=b=>{c=!0;const[v,C]=j6(b,e,!0);Wr(r,v),C&&l.push(...C)};!t&&e.mixins.length&&e.mixins.forEach(g),a.extends&&g(a.extends),a.mixins&&a.mixins.forEach(g)}if(!s&&!c)return gn(a)&&i.set(a,hp),hp;if(Ra(s))for(let g=0;g<s.length;g++){const b=Al(s[g]);GM(b)&&(r[b]=vn)}else if(s)for(const g in s){const b=Al(g);if(GM(b)){const v=s[g],C=r[b]=Ra(v)||ja(v)?{type:v}:Wr({},v),S=C.type;let L=!1,R=!0;if(Ra(S))for(let G=0;G<S.length;++G){const O=S[G],V=ja(O)&&O.name;if(V==="Boolean"){L=!0;break}else V==="String"&&(R=!1)}else L=ja(S)&&S.name==="Boolean";C[0]=L,C[1]=R,(L||$i(C,"default"))&&l.push(b)}}const h=[r,l];return gn(a)&&i.set(a,h),h}function GM(a){return a[0]!=="$"&&!jy(a)}const J6=a=>a[0]==="_"||a==="$stable",oT=a=>Ra(a)?a.map(Du):[Du(a)],RV=(a,e,t)=>{if(e._n)return e;const i=Ha((...n)=>oT(e(...n)),t);return i._c=!1,i},Q6=(a,e,t)=>{const i=a._ctx;for(const n in a){if(J6(n))continue;const s=a[n];if(ja(s))e[n]=RV(n,s,i);else if(s!=null){const r=oT(s);e[n]=()=>r}}},$6=(a,e)=>{const t=oT(e);a.slots.default=()=>t},ek=(a,e,t)=>{for(const i in e)(t||i!=="_")&&(a[i]=e[i])},kV=(a,e,t)=>{const i=a.slots=Y6();if(a.vnode.shapeFlag&32){const n=e._;n?(ek(i,e,t),t&&J8(i,"_",n,!0)):Q6(e,i)}else e&&$6(a,e)},WV=(a,e,t)=>{const{vnode:i,slots:n}=a;let s=!0,r=vn;if(i.shapeFlag&32){const l=e._;l?t&&l===1?s=!1:ek(n,e,t):(s=!e.$stable,Q6(e,n)),r=e}else e&&($6(a,e),r={default:1});if(s)for(const l in n)!J6(l)&&r[l]==null&&delete n[l]},qs=YV;function GV(a){return OV(a)}function OV(a,e){const t=uw();t.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:r,createText:l,createComment:c,setText:h,setElementText:g,parentNode:b,nextSibling:v,setScopeId:C=Jl,insertStaticContent:S}=a,L=(pe,Ee,ze,et=null,lt=null,ot=null,Tt=void 0,ft=null,vt=!!Ee.dynamicChildren)=>{if(pe===Ee)return;pe&&!Z_(pe,Ee)&&(et=sa(pe),We(pe,lt,ot,!0),pe=null),Ee.patchFlag===-2&&(vt=!1,Ee.dynamicChildren=null);const{type:mt,ref:Ot,shapeFlag:Lt}=Ee;switch(mt){case bw:R(pe,Ee,ze,et);break;case to:G(pe,Ee,ze,et);break;case hC:pe==null&&O(Ee,ze,et,Tt);break;case ua:fe(pe,Ee,ze,et,lt,ot,Tt,ft,vt);break;default:Lt&1?z(pe,Ee,ze,et,lt,ot,Tt,ft,vt):Lt&6?be(pe,Ee,ze,et,lt,ot,Tt,ft,vt):(Lt&64||Lt&128)&&mt.process(pe,Ee,ze,et,lt,ot,Tt,ft,vt,bi)}Ot!=null&&lt&&P2(Ot,pe&&pe.ref,ot,Ee||pe,!Ee)},R=(pe,Ee,ze,et)=>{if(pe==null)i(Ee.el=l(Ee.children),ze,et);else{const lt=Ee.el=pe.el;Ee.children!==pe.children&&h(lt,Ee.children)}},G=(pe,Ee,ze,et)=>{pe==null?i(Ee.el=c(Ee.children||""),ze,et):Ee.el=pe.el},O=(pe,Ee,ze,et)=>{[pe.el,pe.anchor]=S(pe.children,Ee,ze,et,pe.el,pe.anchor)},V=({el:pe,anchor:Ee},ze,et)=>{let lt;for(;pe&&pe!==Ee;)lt=v(pe),i(pe,ze,et),pe=lt;i(Ee,ze,et)},B=({el:pe,anchor:Ee})=>{let ze;for(;pe&&pe!==Ee;)ze=v(pe),n(pe),pe=ze;n(Ee)},z=(pe,Ee,ze,et,lt,ot,Tt,ft,vt)=>{Ee.type==="svg"?Tt="svg":Ee.type==="math"&&(Tt="mathml"),pe==null?j(Ee,ze,et,lt,ot,Tt,ft,vt):te(pe,Ee,lt,ot,Tt,ft,vt)},j=(pe,Ee,ze,et,lt,ot,Tt,ft)=>{let vt,mt;const{props:Ot,shapeFlag:Lt,transition:qt,dirs:Qt}=pe;if(vt=pe.el=r(pe.type,ot,Ot&&Ot.is,Ot),Lt&8?g(vt,pe.children):Lt&16&&ne(pe.children,vt,null,et,lt,cC(pe,ot),Tt,ft),Qt&&I_(pe,null,et,"created"),re(vt,pe,pe.scopeId,Tt,et),Ot){for(const si in Ot)si!=="value"&&!jy(si)&&s(vt,si,null,Ot[si],ot,et);"value"in Ot&&s(vt,"value",null,Ot.value,ot),(mt=Ot.onVnodeBeforeMount)&&Bu(mt,et,pe)}Qt&&I_(pe,null,et,"beforeMount");const Ea=PV(lt,qt);Ea&&qt.beforeEnter(vt),i(vt,Ee,ze),((mt=Ot&&Ot.onVnodeMounted)||Ea||Qt)&&qs(()=>{mt&&Bu(mt,et,pe),Ea&&qt.enter(vt),Qt&&I_(pe,null,et,"mounted")},lt)},re=(pe,Ee,ze,et,lt)=>{if(ze&&C(pe,ze),et)for(let ot=0;ot<et.length;ot++)C(pe,et[ot]);if(lt){let ot=lt.subTree;if(Ee===ot||nk(ot.type)&&(ot.ssContent===Ee||ot.ssFallback===Ee)){const Tt=lt.vnode;re(pe,Tt,Tt.scopeId,Tt.slotScopeIds,lt.parent)}}},ne=(pe,Ee,ze,et,lt,ot,Tt,ft,vt=0)=>{for(let mt=vt;mt<pe.length;mt++){const Ot=pe[mt]=ft?ih(pe[mt]):Du(pe[mt]);L(null,Ot,Ee,ze,et,lt,ot,Tt,ft)}},te=(pe,Ee,ze,et,lt,ot,Tt)=>{const ft=Ee.el=pe.el;let{patchFlag:vt,dynamicChildren:mt,dirs:Ot}=Ee;vt|=pe.patchFlag&16;const Lt=pe.props||vn,qt=Ee.props||vn;let Qt;if(ze&&C_(ze,!1),(Qt=qt.onVnodeBeforeUpdate)&&Bu(Qt,ze,Ee,pe),Ot&&I_(Ee,pe,ze,"beforeUpdate"),ze&&C_(ze,!0),(Lt.innerHTML&&qt.innerHTML==null||Lt.textContent&&qt.textContent==null)&&g(ft,""),mt?le(pe.dynamicChildren,mt,ft,ze,et,cC(Ee,lt),ot):Tt||Je(pe,Ee,ft,null,ze,et,cC(Ee,lt),ot,!1),vt>0){if(vt&16)ue(ft,Lt,qt,ze,lt);else if(vt&2&&Lt.class!==qt.class&&s(ft,"class",null,qt.class,lt),vt&4&&s(ft,"style",Lt.style,qt.style,lt),vt&8){const Ea=Ee.dynamicProps;for(let si=0;si<Ea.length;si++){const ni=Ea[si],pn=Lt[ni],Di=qt[ni];(Di!==pn||ni==="value")&&s(ft,ni,pn,Di,lt,ze)}}vt&1&&pe.children!==Ee.children&&g(ft,Ee.children)}else!Tt&&mt==null&&ue(ft,Lt,qt,ze,lt);((Qt=qt.onVnodeUpdated)||Ot)&&qs(()=>{Qt&&Bu(Qt,ze,Ee,pe),Ot&&I_(Ee,pe,ze,"updated")},et)},le=(pe,Ee,ze,et,lt,ot,Tt)=>{for(let ft=0;ft<Ee.length;ft++){const vt=pe[ft],mt=Ee[ft],Ot=vt.el&&(vt.type===ua||!Z_(vt,mt)||vt.shapeFlag&70)?b(vt.el):ze;L(vt,mt,Ot,null,et,lt,ot,Tt,!0)}},ue=(pe,Ee,ze,et,lt)=>{if(Ee!==ze){if(Ee!==vn)for(const ot in Ee)!jy(ot)&&!(ot in ze)&&s(pe,ot,Ee[ot],null,lt,et);for(const ot in ze){if(jy(ot))continue;const Tt=ze[ot],ft=Ee[ot];Tt!==ft&&ot!=="value"&&s(pe,ot,ft,Tt,lt,et)}"value"in ze&&s(pe,"value",Ee.value,ze.value,lt)}},fe=(pe,Ee,ze,et,lt,ot,Tt,ft,vt)=>{const mt=Ee.el=pe?pe.el:l(""),Ot=Ee.anchor=pe?pe.anchor:l("");let{patchFlag:Lt,dynamicChildren:qt,slotScopeIds:Qt}=Ee;Qt&&(ft=ft?ft.concat(Qt):Qt),pe==null?(i(mt,ze,et),i(Ot,ze,et),ne(Ee.children||[],ze,Ot,lt,ot,Tt,ft,vt)):Lt>0&&Lt&64&&qt&&pe.dynamicChildren?(le(pe.dynamicChildren,qt,ze,lt,ot,Tt,ft),(Ee.key!=null||lt&&Ee===lt.subTree)&&lT(pe,Ee,!0)):Je(pe,Ee,ze,Ot,lt,ot,Tt,ft,vt)},be=(pe,Ee,ze,et,lt,ot,Tt,ft,vt)=>{Ee.slotScopeIds=ft,pe==null?Ee.shapeFlag&512?lt.ctx.activate(Ee,ze,et,Tt,vt):Pe(Ee,ze,et,lt,ot,Tt,vt):Be(pe,Ee,vt)},Pe=(pe,Ee,ze,et,lt,ot,Tt)=>{const ft=pe.component=$V(pe,et,lt);if(gw(pe)&&(ft.ctx.renderer=bi),eZ(ft,!1,Tt),ft.asyncDep){if(lt&&lt.registerDep(ft,Me,Tt),!pe.el){const vt=ft.subTree=dt(to);G(null,vt,Ee,ze)}}else Me(ft,pe,Ee,ze,lt,ot,Tt)},Be=(pe,Ee,ze)=>{const et=Ee.component=pe.component;if(XV(pe,Ee,ze))if(et.asyncDep&&!et.asyncResolved){ke(et,Ee,ze);return}else et.next=Ee,et.update();else Ee.el=pe.el,et.vnode=Ee},Me=(pe,Ee,ze,et,lt,ot,Tt)=>{const ft=()=>{if(pe.isMounted){let{next:Lt,bu:qt,u:Qt,parent:Ea,vnode:si}=pe;{const fn=tk(pe);if(fn){Lt&&(Lt.el=si.el,ke(pe,Lt,Tt)),fn.asyncDep.then(()=>{pe.isUnmounted||ft()});return}}let ni=Lt,pn;C_(pe,!1),Lt?(Lt.el=si.el,ke(pe,Lt,Tt)):Lt=si,qt&&jv(qt),(pn=Lt.props&&Lt.props.onVnodeBeforeUpdate)&&Bu(pn,Ea,Lt,si),C_(pe,!0);const Di=dC(pe),Pn=pe.subTree;pe.subTree=Di,L(Pn,Di,b(Pn.el),sa(Pn),pe,lt,ot),Lt.el=Di.el,ni===null&&HV(pe,Di.el),Qt&&qs(Qt,lt),(pn=Lt.props&&Lt.props.onVnodeUpdated)&&qs(()=>Bu(pn,Ea,Lt,si),lt)}else{let Lt;const{el:qt,props:Qt}=Ee,{bm:Ea,m:si,parent:ni,root:pn,type:Di}=pe,Pn=gp(Ee);if(C_(pe,!1),Ea&&jv(Ea),!Pn&&(Lt=Qt&&Qt.onVnodeBeforeMount)&&Bu(Lt,ni,Ee),C_(pe,!0),qt&&On){const fn=()=>{pe.subTree=dC(pe),On(qt,pe.subTree,pe,lt,null)};Pn&&Di.__asyncHydrate?Di.__asyncHydrate(qt,pe,fn):fn()}else{pn.ce&&pn.ce._injectChildStyle(Di);const fn=pe.subTree=dC(pe);L(null,fn,ze,et,pe,lt,ot),Ee.el=fn.el}if(si&&qs(si,lt),!Pn&&(Lt=Qt&&Qt.onVnodeMounted)){const fn=Ee;qs(()=>Bu(Lt,ni,fn),lt)}(Ee.shapeFlag&256||ni&&gp(ni.vnode)&&ni.vnode.shapeFlag&256)&&pe.a&&qs(pe.a,lt),pe.isMounted=!0,Ee=ze=et=null}};pe.scope.on();const vt=pe.effect=new r6(ft);pe.scope.off();const mt=pe.update=vt.run.bind(vt),Ot=pe.job=vt.runIfDirty.bind(vt);Ot.i=pe,Ot.id=pe.uid,vt.scheduler=()=>aT(Ot),C_(pe,!0),mt()},ke=(pe,Ee,ze)=>{Ee.component=pe;const et=pe.vnode.props;pe.vnode=Ee,pe.next=null,MV(pe,Ee.props,et,ze),WV(pe,Ee.children,ze),Ph(),CM(pe),Bh()},Je=(pe,Ee,ze,et,lt,ot,Tt,ft,vt=!1)=>{const mt=pe&&pe.children,Ot=pe?pe.shapeFlag:0,Lt=Ee.children,{patchFlag:qt,shapeFlag:Qt}=Ee;if(qt>0){if(qt&128){ht(mt,Lt,ze,et,lt,ot,Tt,ft,vt);return}else if(qt&256){ut(mt,Lt,ze,et,lt,ot,Tt,ft,vt);return}}Qt&8?(Ot&16&&Ji(mt,lt,ot),Lt!==mt&&g(ze,Lt)):Ot&16?Qt&16?ht(mt,Lt,ze,et,lt,ot,Tt,ft,vt):Ji(mt,lt,ot,!0):(Ot&8&&g(ze,""),Qt&16&&ne(Lt,ze,et,lt,ot,Tt,ft,vt))},ut=(pe,Ee,ze,et,lt,ot,Tt,ft,vt)=>{pe=pe||hp,Ee=Ee||hp;const mt=pe.length,Ot=Ee.length,Lt=Math.min(mt,Ot);let qt;for(qt=0;qt<Lt;qt++){const Qt=Ee[qt]=vt?ih(Ee[qt]):Du(Ee[qt]);L(pe[qt],Qt,ze,null,lt,ot,Tt,ft,vt)}mt>Ot?Ji(pe,lt,ot,!0,!1,Lt):ne(Ee,ze,et,lt,ot,Tt,ft,vt,Lt)},ht=(pe,Ee,ze,et,lt,ot,Tt,ft,vt)=>{let mt=0;const Ot=Ee.length;let Lt=pe.length-1,qt=Ot-1;for(;mt<=Lt&&mt<=qt;){const Qt=pe[mt],Ea=Ee[mt]=vt?ih(Ee[mt]):Du(Ee[mt]);if(Z_(Qt,Ea))L(Qt,Ea,ze,null,lt,ot,Tt,ft,vt);else break;mt++}for(;mt<=Lt&&mt<=qt;){const Qt=pe[Lt],Ea=Ee[qt]=vt?ih(Ee[qt]):Du(Ee[qt]);if(Z_(Qt,Ea))L(Qt,Ea,ze,null,lt,ot,Tt,ft,vt);else break;Lt--,qt--}if(mt>Lt){if(mt<=qt){const Qt=qt+1,Ea=Qt<Ot?Ee[Qt].el:et;for(;mt<=qt;)L(null,Ee[mt]=vt?ih(Ee[mt]):Du(Ee[mt]),ze,Ea,lt,ot,Tt,ft,vt),mt++}}else if(mt>qt)for(;mt<=Lt;)We(pe[mt],lt,ot,!0),mt++;else{const Qt=mt,Ea=mt,si=new Map;for(mt=Ea;mt<=qt;mt++){const wi=Ee[mt]=vt?ih(Ee[mt]):Du(Ee[mt]);wi.key!=null&&si.set(wi.key,mt)}let ni,pn=0;const Di=qt-Ea+1;let Pn=!1,fn=0;const dr=new Array(Di);for(mt=0;mt<Di;mt++)dr[mt]=0;for(mt=Qt;mt<=Lt;mt++){const wi=pe[mt];if(pn>=Di){We(wi,lt,ot,!0);continue}let hn;if(wi.key!=null)hn=si.get(wi.key);else for(ni=Ea;ni<=qt;ni++)if(dr[ni-Ea]===0&&Z_(wi,Ee[ni])){hn=ni;break}hn===void 0?We(wi,lt,ot,!0):(dr[hn-Ea]=mt+1,hn>=fn?fn=hn:Pn=!0,L(wi,Ee[hn],ze,null,lt,ot,Tt,ft,vt),pn++)}const Ir=Pn?BV(dr):hp;for(ni=Ir.length-1,mt=Di-1;mt>=0;mt--){const wi=Ea+mt,hn=Ee[wi],Vs=wi+1<Ot?Ee[wi+1].el:et;dr[mt]===0?L(null,hn,ze,Vs,lt,ot,Tt,ft,vt):Pn&&(ni<0||mt!==Ir[ni]?Dt(hn,ze,Vs,2):ni--)}}},Dt=(pe,Ee,ze,et,lt=null)=>{const{el:ot,type:Tt,transition:ft,children:vt,shapeFlag:mt}=pe;if(mt&6){Dt(pe.component.subTree,Ee,ze,et);return}if(mt&128){pe.suspense.move(Ee,ze,et);return}if(mt&64){Tt.move(pe,Ee,ze,bi);return}if(Tt===ua){i(ot,Ee,ze);for(let Lt=0;Lt<vt.length;Lt++)Dt(vt[Lt],Ee,ze,et);i(pe.anchor,Ee,ze);return}if(Tt===hC){V(pe,Ee,ze);return}if(et!==2&&mt&1&&ft)if(et===0)ft.beforeEnter(ot),i(ot,Ee,ze),qs(()=>ft.enter(ot),lt);else{const{leave:Lt,delayLeave:qt,afterLeave:Qt}=ft,Ea=()=>i(ot,Ee,ze),si=()=>{Lt(ot,()=>{Ea(),Qt&&Qt()})};qt?qt(ot,Ea,si):si()}else i(ot,Ee,ze)},We=(pe,Ee,ze,et=!1,lt=!1)=>{const{type:ot,props:Tt,ref:ft,children:vt,dynamicChildren:mt,shapeFlag:Ot,patchFlag:Lt,dirs:qt,cacheIndex:Qt}=pe;if(Lt===-2&&(lt=!1),ft!=null&&P2(ft,null,ze,pe,!0),Qt!=null&&(Ee.renderCache[Qt]=void 0),Ot&256){Ee.ctx.deactivate(pe);return}const Ea=Ot&1&&qt,si=!gp(pe);let ni;if(si&&(ni=Tt&&Tt.onVnodeBeforeUnmount)&&Bu(ni,Ee,pe),Ot&6)da(pe.component,ze,et);else{if(Ot&128){pe.suspense.unmount(ze,et);return}Ea&&I_(pe,null,Ee,"beforeUnmount"),Ot&64?pe.type.remove(pe,Ee,ze,bi,et):mt&&!mt.hasOnce&&(ot!==ua||Lt>0&&Lt&64)?Ji(mt,Ee,ze,!1,!0):(ot===ua&&Lt&384||!lt&&Ot&16)&&Ji(vt,Ee,ze),et&&oa(pe)}(si&&(ni=Tt&&Tt.onVnodeUnmounted)||Ea)&&qs(()=>{ni&&Bu(ni,Ee,pe),Ea&&I_(pe,null,Ee,"unmounted")},ze)},oa=pe=>{const{type:Ee,el:ze,anchor:et,transition:lt}=pe;if(Ee===ua){li(ze,et);return}if(Ee===hC){B(pe);return}const ot=()=>{n(ze),lt&&!lt.persisted&&lt.afterLeave&&lt.afterLeave()};if(pe.shapeFlag&1&&lt&&!lt.persisted){const{leave:Tt,delayLeave:ft}=lt,vt=()=>Tt(ze,ot);ft?ft(pe.el,ot,vt):vt()}else ot()},li=(pe,Ee)=>{let ze;for(;pe!==Ee;)ze=v(pe),n(pe),pe=ze;n(Ee)},da=(pe,Ee,ze)=>{const{bum:et,scope:lt,job:ot,subTree:Tt,um:ft,m:vt,a:mt}=pe;OM(vt),OM(mt),et&&jv(et),lt.stop(),ot&&(ot.flags|=8,We(Tt,pe,Ee,ze)),ft&&qs(ft,Ee),qs(()=>{pe.isUnmounted=!0},Ee),Ee&&Ee.pendingBranch&&!Ee.isUnmounted&&pe.asyncDep&&!pe.asyncResolved&&pe.suspenseId===Ee.pendingId&&(Ee.deps--,Ee.deps===0&&Ee.resolve())},Ji=(pe,Ee,ze,et=!1,lt=!1,ot=0)=>{for(let Tt=ot;Tt<pe.length;Tt++)We(pe[Tt],Ee,ze,et,lt)},sa=pe=>{if(pe.shapeFlag&6)return sa(pe.component.subTree);if(pe.shapeFlag&128)return pe.suspense.next();const Ee=v(pe.anchor||pe.el),ze=Ee&&Ee[M6];return ze?v(ze):Ee};let Ni=!1;const ka=(pe,Ee,ze)=>{pe==null?Ee._vnode&&We(Ee._vnode,null,null,!0):L(Ee._vnode||null,pe,Ee,null,null,null,ze),Ee._vnode=pe,Ni||(Ni=!0,CM(),S6(),Ni=!1)},bi={p:L,um:We,m:Dt,r:oa,mt:Pe,mc:ne,pc:Je,pbc:le,n:sa,o:a};let cr,On;return e&&([cr,On]=e(bi)),{render:ka,hydrate:cr,createApp:SV(ka,cr)}}function cC({type:a,props:e},t){return t==="svg"&&a==="foreignObject"||t==="mathml"&&a==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function C_({effect:a,job:e},t){t?(a.flags|=32,e.flags|=4):(a.flags&=-33,e.flags&=-5)}function PV(a,e){return(!a||a&&!a.pendingBranch)&&e&&!e.persisted}function lT(a,e,t=!1){const i=a.children,n=e.children;if(Ra(i)&&Ra(n))for(let s=0;s<i.length;s++){const r=i[s];let l=n[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[s]=ih(n[s]),l.el=r.el),!t&&l.patchFlag!==-2&&lT(r,l)),l.type===bw&&(l.el=r.el)}}function BV(a){const e=a.slice(),t=[0];let i,n,s,r,l;const c=a.length;for(i=0;i<c;i++){const h=a[i];if(h!==0){if(n=t[t.length-1],a[n]<h){e[i]=n,t.push(i);continue}for(s=0,r=t.length-1;s<r;)l=s+r>>1,a[t[l]]<h?s=l+1:r=l;h<a[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,r=t[s-1];s-- >0;)t[s]=r,r=e[r];return t}function tk(a){const e=a.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:tk(e)}function OM(a){if(a)for(let e=0;e<a.length;e++)a[e].flags|=8}const FV=Symbol.for("v-scx"),NV=()=>ys(FV);function er(a,e){return uT(a,null,e)}function Kt(a,e,t){return uT(a,e,t)}function uT(a,e,t=vn){const{immediate:i,deep:n,flush:s,once:r}=t,l=Wr({},t),c=e&&i||!e&&s!=="post";let h;if(W0){if(s==="sync"){const C=NV();h=C.__watcherHandles||(C.__watcherHandles=[])}else if(!c){const C=()=>{};return C.stop=Jl,C.resume=Jl,C.pause=Jl,C}}const g=as;l.call=(C,S,L)=>au(C,g,S,L);let b=!1;s==="post"?l.scheduler=C=>{qs(C,g&&g.suspense)}:s!=="sync"&&(b=!0,l.scheduler=(C,S)=>{S?C():aT(C)}),l.augmentJob=C=>{e&&(C.flags|=4),b&&(C.flags|=2,g&&(C.id=g.uid,C.i=g))};const v=tV(a,e,l);return W0&&(h?h.push(v):c&&v()),v}function DV(a,e,t){const i=this.proxy,n=$n(a)?a.includes(".")?ak(i,a):()=>i[a]:a.bind(i,i);let s;ja(e)?s=e:(s=e.handler,t=e);const r=d1(this),l=uT(n,s.bind(i),t);return r(),l}function ak(a,e){const t=e.split(".");return()=>{let i=a;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}const VV=(a,e)=>e==="modelValue"||e==="model-value"?a.modelModifiers:a[`${e}Modifiers`]||a[`${Al(e)}Modifiers`]||a[`${Gh(e)}Modifiers`];function ZV(a,e,...t){if(a.isUnmounted)return;const i=a.vnode.props||vn;let n=t;const s=e.startsWith("update:"),r=s&&VV(i,e.slice(7));r&&(r.trim&&(n=t.map(g=>$n(g)?g.trim():g)),r.number&&(n=t.map(qA)));let l,c=i[l=iC(e)]||i[l=iC(Al(e))];!c&&s&&(c=i[l=iC(Gh(e))]),c&&au(c,a,6,n);const h=i[l+"Once"];if(h){if(!a.emitted)a.emitted={};else if(a.emitted[l])return;a.emitted[l]=!0,au(h,a,6,n)}}function ik(a,e,t=!1){const i=e.emitsCache,n=i.get(a);if(n!==void 0)return n;const s=a.emits;let r={},l=!1;if(!ja(a)){const c=h=>{const g=ik(h,e,!0);g&&(l=!0,Wr(r,g))};!t&&e.mixins.length&&e.mixins.forEach(c),a.extends&&c(a.extends),a.mixins&&a.mixins.forEach(c)}return!s&&!l?(gn(a)&&i.set(a,null),null):(Ra(s)?s.forEach(c=>r[c]=null):Wr(r,s),gn(a)&&i.set(a,r),r)}function yw(a,e){return!a||!rw(e)?!1:(e=e.slice(2).replace(/Once$/,""),$i(a,e[0].toLowerCase()+e.slice(1))||$i(a,Gh(e))||$i(a,e))}function dC(a){const{type:e,vnode:t,proxy:i,withProxy:n,propsOptions:[s],slots:r,attrs:l,emit:c,render:h,renderCache:g,props:b,data:v,setupState:C,ctx:S,inheritAttrs:L}=a,R=O2(a);let G,O;try{if(t.shapeFlag&4){const B=n||i,z=B;G=Du(h.call(z,B,g,b,C,v,S)),O=l}else{const B=e;G=Du(B.length>1?B(b,{attrs:l,slots:r,emit:c}):B(b,null)),O=e.props?l:zV(l)}}catch(B){t0.length=0,_w(B,a,1),G=dt(to)}let V=G;if(O&&L!==!1){const B=Object.keys(O),{shapeFlag:z}=V;B.length&&z&7&&(s&&B.some(X4)&&(O=UV(O,s)),V=Th(V,O,!1,!0))}return t.dirs&&(V=Th(V,null,!1,!0),V.dirs=V.dirs?V.dirs.concat(t.dirs):t.dirs),t.transition&&L0(V,t.transition),G=V,O2(R),G}const zV=a=>{let e;for(const t in a)(t==="class"||t==="style"||rw(t))&&((e||(e={}))[t]=a[t]);return e},UV=(a,e)=>{const t={};for(const i in a)(!X4(i)||!(i.slice(9)in e))&&(t[i]=a[i]);return t};function XV(a,e,t){const{props:i,children:n,component:s}=a,{props:r,children:l,patchFlag:c}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&c>=0){if(c&1024)return!0;if(c&16)return i?PM(i,r,h):!!r;if(c&8){const g=e.dynamicProps;for(let b=0;b<g.length;b++){const v=g[b];if(r[v]!==i[v]&&!yw(h,v))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:i===r?!1:i?r?PM(i,r,h):!0:!!r;return!1}function PM(a,e,t){const i=Object.keys(e);if(i.length!==Object.keys(a).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(e[s]!==a[s]&&!yw(t,s))return!0}return!1}function HV({vnode:a,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===a&&(i.el=a.el),i===a)(a=e.vnode).el=t,e=e.parent;else break}}const nk=a=>a.__isSuspense;function YV(a,e){e&&e.pendingBranch?Ra(a)?e.effects.push(...a):e.effects.push(a):nV(a)}const ua=Symbol.for("v-fgt"),bw=Symbol.for("v-txt"),to=Symbol.for("v-cmt"),hC=Symbol.for("v-stc"),t0=[];let Qo=null;function se(a=!1){t0.push(Qo=a?null:[])}function KV(){t0.pop(),Qo=t0[t0.length-1]||null}let R0=1;function BM(a,e=!1){R0+=a,a<0&&Qo&&e&&(Qo.hasOnce=!0)}function rk(a){return a.dynamicChildren=R0>0?Qo||hp:null,KV(),R0>0&&Qo&&Qo.push(a),a}function Ie(a,e,t,i,n,s){return rk(q(a,e,t,i,n,s,!0))}function xa(a,e,t,i,n){return rk(dt(a,e,t,i,n,!0))}function k0(a){return a?a.__v_isVNode===!0:!1}function Z_(a,e){return a.type===e.type&&a.key===e.key}const sk=({key:a})=>a??null,Qv=({ref:a,ref_key:e,ref_for:t})=>(typeof a=="number"&&(a=""+a),a!=null?$n(a)||Zn(a)||ja(a)?{i:Dr,r:a,k:e,f:!!t}:a:null);function q(a,e=null,t=null,i=0,n=null,s=a===ua?0:1,r=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:a,props:e,key:e&&sk(e),ref:e&&Qv(e),scopeId:E6,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Dr};return l?(cT(c,t),s&128&&a.normalize(c)):t&&(c.shapeFlag|=$n(t)?8:16),R0>0&&!r&&Qo&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&Qo.push(c),c}const dt=qV;function qV(a,e=null,t=null,i=0,n=null,s=!1){if((!a||a===Z6)&&(a=to),k0(a)){const l=Th(a,e,!0);return t&&cT(l,t),R0>0&&!s&&Qo&&(l.shapeFlag&6?Qo[Qo.indexOf(a)]=l:Qo.push(l)),l.patchFlag=-2,l}if(rZ(a)&&(a=a.__vccOpts),e){e=jV(e);let{class:l,style:c}=e;l&&!$n(l)&&(e.class=ti(l)),gn(c)&&(eT(c)&&!Ra(c)&&(c=Wr({},c)),e.style=Oh(c))}const r=$n(a)?1:nk(a)?128:L6(a)?64:gn(a)?4:ja(a)?2:0;return q(a,e,t,i,n,r,s,!0)}function jV(a){return a?eT(a)||K6(a)?Wr({},a):a:null}function Th(a,e,t=!1,i=!1){const{props:n,ref:s,patchFlag:r,children:l,transition:c}=a,h=e?dT(n||{},e):n,g={__v_isVNode:!0,__v_skip:!0,type:a.type,props:h,key:h&&sk(h),ref:e&&e.ref?t&&s?Ra(s)?s.concat(Qv(e)):[s,Qv(e)]:Qv(e):s,scopeId:a.scopeId,slotScopeIds:a.slotScopeIds,children:l,target:a.target,targetStart:a.targetStart,targetAnchor:a.targetAnchor,staticCount:a.staticCount,shapeFlag:a.shapeFlag,patchFlag:e&&a.type!==ua?r===-1?16:r|16:r,dynamicProps:a.dynamicProps,dynamicChildren:a.dynamicChildren,appContext:a.appContext,dirs:a.dirs,transition:c,component:a.component,suspense:a.suspense,ssContent:a.ssContent&&Th(a.ssContent),ssFallback:a.ssFallback&&Th(a.ssFallback),el:a.el,anchor:a.anchor,ctx:a.ctx,ce:a.ce};return c&&i&&L0(g,c.clone(g)),g}function wr(a=" ",e=0){return dt(bw,null,a,e)}function je(a="",e=!1){return e?(se(),xa(to,null,a)):dt(to,null,a)}function Du(a){return a==null||typeof a=="boolean"?dt(to):Ra(a)?dt(ua,null,a.slice()):k0(a)?ih(a):dt(bw,null,String(a))}function ih(a){return a.el===null&&a.patchFlag!==-1||a.memo?a:Th(a)}function cT(a,e){let t=0;const{shapeFlag:i}=a;if(e==null)e=null;else if(Ra(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),cT(a,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!K6(e)?e._ctx=Dr:n===3&&Dr&&(Dr.slots._===1?e._=1:(e._=2,a.patchFlag|=1024))}else ja(e)?(e={default:e,_ctx:Dr},t=32):(e=String(e),i&64?(t=16,e=[wr(e)]):t=8);a.children=e,a.shapeFlag|=t}function dT(...a){const e={};for(let t=0;t<a.length;t++){const i=a[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=ti([e.class,i.class]));else if(n==="style")e.style=Oh([e.style,i.style]);else if(rw(n)){const s=e[n],r=i[n];r&&s!==r&&!(Ra(s)&&s.includes(r))&&(e[n]=s?[].concat(s,r):r)}else n!==""&&(e[n]=i[n])}return e}function Bu(a,e,t,i=null){au(a,e,7,[t,i])}const JV=X6();let QV=0;function $V(a,e,t){const i=a.type,n=(e?e.appContext:a.appContext)||JV,s={uid:QV++,vnode:a,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new a6(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:j6(i,n),emitsOptions:ik(i,n),emit:null,emitted:null,propsDefaults:vn,inheritAttrs:i.inheritAttrs,ctx:vn,data:vn,props:vn,attrs:vn,slots:vn,refs:vn,setupState:vn,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=ZV.bind(null,s),a.ce&&a.ce(s),s}let as=null;const ok=()=>as||Dr;let F2,sS;{const a=uw(),e=(t,i)=>{let n;return(n=a[t])||(n=a[t]=[]),n.push(i),s=>{n.length>1?n.forEach(r=>r(s)):n[0](s)}};F2=e("__VUE_INSTANCE_SETTERS__",t=>as=t),sS=e("__VUE_SSR_SETTERS__",t=>W0=t)}const d1=a=>{const e=as;return F2(a),a.scope.on(),()=>{a.scope.off(),F2(e)}},FM=()=>{as&&as.scope.off(),F2(null)};function lk(a){return a.vnode.shapeFlag&4}let W0=!1;function eZ(a,e=!1,t=!1){e&&sS(e);const{props:i,children:n}=a.vnode,s=lk(a);EV(a,i,s,e),kV(a,n,t);const r=s?tZ(a,e):void 0;return e&&sS(!1),r}function tZ(a,e){const t=a.type;a.accessCache=Object.create(null),a.proxy=new Proxy(a.ctx,bV);const{setup:i}=t;if(i){Ph();const n=a.setupContext=i.length>1?iZ(a):null,s=d1(a),r=u1(i,a,0,[a.props,n]),l=K8(r);if(Bh(),s(),(l||a.sp)&&!gp(a)&&F6(a),l){if(r.then(FM,FM),e)return r.then(c=>{NM(a,c,e)}).catch(c=>{_w(c,a,0)});a.asyncDep=r}else NM(a,r,e)}else uk(a,e)}function NM(a,e,t){ja(e)?a.type.__ssrInlineRender?a.ssrRender=e:a.render=e:gn(e)&&(a.setupState=x6(e)),uk(a,t)}let DM;function uk(a,e,t){const i=a.type;if(!a.render){if(!e&&DM&&!i.render){const n=i.template||sT(a).template;if(n){const{isCustomElement:s,compilerOptions:r}=a.appContext.config,{delimiters:l,compilerOptions:c}=i,h=Wr(Wr({isCustomElement:s,delimiters:l},r),c);i.render=DM(n,h)}}a.render=i.render||Jl}{const n=d1(a);Ph();try{vV(a)}finally{Bh(),n()}}}const aZ={get(a,e){return Ws(a,"get",""),a[e]}};function iZ(a){const e=t=>{a.exposed=t||{}};return{attrs:new Proxy(a.attrs,aZ),slots:a.slots,emit:a.emit,expose:e}}function vw(a){return a.exposed?a.exposeProxy||(a.exposeProxy=new Proxy(x6(tT(a.exposed)),{get(e,t){if(t in e)return e[t];if(t in e0)return e0[t](a)},has(e,t){return t in e||t in e0}})):a.proxy}function nZ(a,e=!0){return ja(a)?a.displayName||a.name:a.name||e&&a.__name}function rZ(a){return ja(a)&&"__vccOpts"in a}const Ft=(a,e)=>$D(a,e,W0);function sZ(a,e,t){const i=arguments.length;return i===2?gn(e)&&!Ra(e)?k0(e)?dt(a,null,[e]):dt(a,e):dt(a,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&k0(t)&&(t=[t]),dt(a,e,t))}const oZ="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let oS;const VM=typeof window<"u"&&window.trustedTypes;if(VM)try{oS=VM.createPolicy("vue",{createHTML:a=>a})}catch{}const ck=oS?a=>oS.createHTML(a):a=>a,lZ="http://www.w3.org/2000/svg",uZ="http://www.w3.org/1998/Math/MathML",Hc=typeof document<"u"?document:null,ZM=Hc&&Hc.createElement("template"),cZ={insert:(a,e,t)=>{e.insertBefore(a,t||null)},remove:a=>{const e=a.parentNode;e&&e.removeChild(a)},createElement:(a,e,t,i)=>{const n=e==="svg"?Hc.createElementNS(lZ,a):e==="mathml"?Hc.createElementNS(uZ,a):t?Hc.createElement(a,{is:t}):Hc.createElement(a);return a==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:a=>Hc.createTextNode(a),createComment:a=>Hc.createComment(a),setText:(a,e)=>{a.nodeValue=e},setElementText:(a,e)=>{a.textContent=e},parentNode:a=>a.parentNode,nextSibling:a=>a.nextSibling,querySelector:a=>Hc.querySelector(a),setScopeId(a,e){a.setAttribute(e,"")},insertStaticContent(a,e,t,i,n,s){const r=t?t.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===s||!(n=n.nextSibling)););else{ZM.innerHTML=ck(i==="svg"?`<svg>${a}</svg>`:i==="mathml"?`<math>${a}</math>`:a);const l=ZM.content;if(i==="svg"||i==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,t)}return[r?r.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Xd="transition",my="animation",G0=Symbol("_vtc"),dk={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},dZ=Wr({},W6,dk),hZ=a=>(a.displayName="Transition",a.props=dZ,a),hT=hZ((a,{slots:e})=>sZ(lV,_Z(a),e)),A_=(a,e=[])=>{Ra(a)?a.forEach(t=>t(...e)):a&&a(...e)},zM=a=>a?Ra(a)?a.some(e=>e.length>1):a.length>1:!1;function _Z(a){const e={};for(const fe in a)fe in dk||(e[fe]=a[fe]);if(a.css===!1)return e;const{name:t="v",type:i,duration:n,enterFromClass:s=`${t}-enter-from`,enterActiveClass:r=`${t}-enter-active`,enterToClass:l=`${t}-enter-to`,appearFromClass:c=s,appearActiveClass:h=r,appearToClass:g=l,leaveFromClass:b=`${t}-leave-from`,leaveActiveClass:v=`${t}-leave-active`,leaveToClass:C=`${t}-leave-to`}=a,S=mZ(n),L=S&&S[0],R=S&&S[1],{onBeforeEnter:G,onEnter:O,onEnterCancelled:V,onLeave:B,onLeaveCancelled:z,onBeforeAppear:j=G,onAppear:re=O,onAppearCancelled:ne=V}=e,te=(fe,be,Pe,Be)=>{fe._enterCancelled=Be,S_(fe,be?g:l),S_(fe,be?h:r),Pe&&Pe()},le=(fe,be)=>{fe._isLeaving=!1,S_(fe,b),S_(fe,C),S_(fe,v),be&&be()},ue=fe=>(be,Pe)=>{const Be=fe?re:O,Me=()=>te(be,fe,Pe);A_(Be,[be,Me]),UM(()=>{S_(be,fe?c:s),Nc(be,fe?g:l),zM(Be)||XM(be,i,L,Me)})};return Wr(e,{onBeforeEnter(fe){A_(G,[fe]),Nc(fe,s),Nc(fe,r)},onBeforeAppear(fe){A_(j,[fe]),Nc(fe,c),Nc(fe,h)},onEnter:ue(!1),onAppear:ue(!0),onLeave(fe,be){fe._isLeaving=!0;const Pe=()=>le(fe,be);Nc(fe,b),fe._enterCancelled?(Nc(fe,v),KM()):(KM(),Nc(fe,v)),UM(()=>{fe._isLeaving&&(S_(fe,b),Nc(fe,C),zM(B)||XM(fe,i,R,Pe))}),A_(B,[fe,Pe])},onEnterCancelled(fe){te(fe,!1,void 0,!0),A_(V,[fe])},onAppearCancelled(fe){te(fe,!0,void 0,!0),A_(ne,[fe])},onLeaveCancelled(fe){le(fe),A_(z,[fe])}})}function mZ(a){if(a==null)return null;if(gn(a))return[_C(a.enter),_C(a.leave)];{const e=_C(a);return[e,e]}}function _C(a){return fD(a)}function Nc(a,e){e.split(/\s+/).forEach(t=>t&&a.classList.add(t)),(a[G0]||(a[G0]=new Set)).add(e)}function S_(a,e){e.split(/\s+/).forEach(i=>i&&a.classList.remove(i));const t=a[G0];t&&(t.delete(e),t.size||(a[G0]=void 0))}function UM(a){requestAnimationFrame(()=>{requestAnimationFrame(a)})}let gZ=0;function XM(a,e,t,i){const n=a._endId=++gZ,s=()=>{n===a._endId&&i()};if(t!=null)return setTimeout(s,t);const{type:r,timeout:l,propCount:c}=pZ(a,e);if(!r)return i();const h=r+"end";let g=0;const b=()=>{a.removeEventListener(h,v),s()},v=C=>{C.target===a&&++g>=c&&b()};setTimeout(()=>{g<c&&b()},l+1),a.addEventListener(h,v)}function pZ(a,e){const t=window.getComputedStyle(a),i=S=>(t[S]||"").split(", "),n=i(`${Xd}Delay`),s=i(`${Xd}Duration`),r=HM(n,s),l=i(`${my}Delay`),c=i(`${my}Duration`),h=HM(l,c);let g=null,b=0,v=0;e===Xd?r>0&&(g=Xd,b=r,v=s.length):e===my?h>0&&(g=my,b=h,v=c.length):(b=Math.max(r,h),g=b>0?r>h?Xd:my:null,v=g?g===Xd?s.length:c.length:0);const C=g===Xd&&/\b(transform|all)(,|$)/.test(i(`${Xd}Property`).toString());return{type:g,timeout:b,propCount:v,hasTransform:C}}function HM(a,e){for(;a.length<e.length;)a=a.concat(a);return Math.max(...e.map((t,i)=>YM(t)+YM(a[i])))}function YM(a){return a==="auto"?0:Number(a.slice(0,-1).replace(",","."))*1e3}function KM(){return document.body.offsetHeight}function fZ(a,e,t){const i=a[G0];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?a.removeAttribute("class"):t?a.setAttribute("class",e):a.className=e}const N2=Symbol("_vod"),hk=Symbol("_vsh"),xh={beforeMount(a,{value:e},{transition:t}){a[N2]=a.style.display==="none"?"":a.style.display,t&&e?t.beforeEnter(a):gy(a,e)},mounted(a,{value:e},{transition:t}){t&&e&&t.enter(a)},updated(a,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(a),gy(a,!0),i.enter(a)):i.leave(a,()=>{gy(a,!1)}):gy(a,e))},beforeUnmount(a,{value:e}){gy(a,e)}};function gy(a,e){a.style.display=e?a[N2]:"none",a[hk]=!e}const yZ=Symbol(""),bZ=/(^|;)\s*display\s*:/;function vZ(a,e,t){const i=a.style,n=$n(t);let s=!1;if(t&&!n){if(e)if($n(e))for(const r of e.split(";")){const l=r.slice(0,r.indexOf(":")).trim();t[l]==null&&$v(i,l,"")}else for(const r in e)t[r]==null&&$v(i,r,"");for(const r in t)r==="display"&&(s=!0),$v(i,r,t[r])}else if(n){if(e!==t){const r=i[yZ];r&&(t+=";"+r),i.cssText=t,s=bZ.test(t)}}else e&&a.removeAttribute("style");N2 in a&&(a[N2]=s?i.display:"",a[hk]&&(i.display="none"))}const qM=/\s*!important$/;function $v(a,e,t){if(Ra(t))t.forEach(i=>$v(a,e,i));else if(t==null&&(t=""),e.startsWith("--"))a.setProperty(e,t);else{const i=xZ(a,e);qM.test(t)?a.setProperty(Gh(i),t.replace(qM,""),"important"):a[i]=t}}const jM=["Webkit","Moz","ms"],mC={};function xZ(a,e){const t=mC[e];if(t)return t;let i=Al(e);if(i!=="filter"&&i in a)return mC[e]=i;i=lw(i);for(let n=0;n<jM.length;n++){const s=jM[n]+i;if(s in a)return mC[e]=s}return e}const JM="http://www.w3.org/1999/xlink";function QM(a,e,t,i,n,s=ID(e)){i&&e.startsWith("xlink:")?t==null?a.removeAttributeNS(JM,e.slice(6,e.length)):a.setAttributeNS(JM,e,t):t==null||s&&!Q8(t)?a.removeAttribute(e):a.setAttribute(e,s?"":tu(t)?String(t):t)}function $M(a,e,t,i,n){if(e==="innerHTML"||e==="textContent"){t!=null&&(a[e]=e==="innerHTML"?ck(t):t);return}const s=a.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const l=s==="OPTION"?a.getAttribute("value")||"":a.value,c=t==null?a.type==="checkbox"?"on":"":String(t);(l!==c||!("_value"in a))&&(a.value=c),t==null&&a.removeAttribute(e),a._value=t;return}let r=!1;if(t===""||t==null){const l=typeof a[e];l==="boolean"?t=Q8(t):t==null&&l==="string"?(t="",r=!0):l==="number"&&(t=0,r=!0)}try{a[e]=t}catch{}r&&a.removeAttribute(n||e)}function z_(a,e,t,i){a.addEventListener(e,t,i)}function wZ(a,e,t,i){a.removeEventListener(e,t,i)}const eL=Symbol("_vei");function IZ(a,e,t,i,n=null){const s=a[eL]||(a[eL]={}),r=s[e];if(i&&r)r.value=i;else{const[l,c]=CZ(e);if(i){const h=s[e]=TZ(i,n);z_(a,l,h,c)}else r&&(wZ(a,l,r,c),s[e]=void 0)}}const tL=/(?:Once|Passive|Capture)$/;function CZ(a){let e;if(tL.test(a)){e={};let i;for(;i=a.match(tL);)a=a.slice(0,a.length-i[0].length),e[i[0].toLowerCase()]=!0}return[a[2]===":"?a.slice(3):Gh(a.slice(2)),e]}let gC=0;const AZ=Promise.resolve(),SZ=()=>gC||(AZ.then(()=>gC=0),gC=Date.now());function TZ(a,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;au(EZ(i,t.value),e,5,[i])};return t.value=a,t.attached=SZ(),t}function EZ(a,e){if(Ra(e)){const t=a.stopImmediatePropagation;return a.stopImmediatePropagation=()=>{t.call(a),a._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const aL=a=>a.charCodeAt(0)===111&&a.charCodeAt(1)===110&&a.charCodeAt(2)>96&&a.charCodeAt(2)<123,MZ=(a,e,t,i,n,s)=>{const r=n==="svg";e==="class"?fZ(a,i,r):e==="style"?vZ(a,t,i):rw(e)?X4(e)||IZ(a,e,t,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LZ(a,e,i,r))?($M(a,e,i),!a.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&QM(a,e,i,r,s,e!=="value")):a._isVueCE&&(/[A-Z]/.test(e)||!$n(i))?$M(a,Al(e),i,s,e):(e==="true-value"?a._trueValue=i:e==="false-value"&&(a._falseValue=i),QM(a,e,i,r))};function LZ(a,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in a&&aL(e)&&ja(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&a.tagName==="INPUT"||e==="type"&&a.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=a.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return aL(e)&&$n(t)?!1:e in a}const D2=a=>{const e=a.props["onUpdate:modelValue"]||!1;return Ra(e)?t=>jv(e,t):e};function RZ(a){a.target.composing=!0}function iL(a){const e=a.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const pp=Symbol("_assign"),ac={created(a,{modifiers:{lazy:e,trim:t,number:i}},n){a[pp]=D2(n);const s=i||n.props&&n.props.type==="number";z_(a,e?"change":"input",r=>{if(r.target.composing)return;let l=a.value;t&&(l=l.trim()),s&&(l=qA(l)),a[pp](l)}),t&&z_(a,"change",()=>{a.value=a.value.trim()}),e||(z_(a,"compositionstart",RZ),z_(a,"compositionend",iL),z_(a,"change",iL))},mounted(a,{value:e}){a.value=e??""},beforeUpdate(a,{value:e,oldValue:t,modifiers:{lazy:i,trim:n,number:s}},r){if(a[pp]=D2(r),a.composing)return;const l=(s||a.type==="number")&&!/^0\d/.test(a.value)?qA(a.value):a.value,c=e??"";l!==c&&(document.activeElement===a&&a.type!=="range"&&(i&&e===t||n&&a.value.trim()===c)||(a.value=c))}},kZ={deep:!0,created(a,e,t){a[pp]=D2(t),z_(a,"change",()=>{const i=a._modelValue,n=WZ(a),s=a.checked,r=a[pp];if(Ra(i)){const l=$8(i,n),c=l!==-1;if(s&&!c)r(i.concat(n));else if(!s&&c){const h=[...i];h.splice(l,1),r(h)}}else if(sw(i)){const l=new Set(i);s?l.add(n):l.delete(n),r(l)}else r(_k(a,s))})},mounted:nL,beforeUpdate(a,e,t){a[pp]=D2(t),nL(a,e,t)}};function nL(a,{value:e,oldValue:t},i){a._modelValue=e;let n;if(Ra(e))n=$8(e,i.props.value)>-1;else if(sw(e))n=e.has(i.props.value);else{if(e===t)return;n=cw(e,_k(a,!0))}a.checked!==n&&(a.checked=n)}function WZ(a){return"_value"in a?a._value:a.value}function _k(a,e){const t=e?"_trueValue":"_falseValue";return t in a?a[t]:e}const GZ=["ctrl","shift","alt","meta"],OZ={stop:a=>a.stopPropagation(),prevent:a=>a.preventDefault(),self:a=>a.target!==a.currentTarget,ctrl:a=>!a.ctrlKey,shift:a=>!a.shiftKey,alt:a=>!a.altKey,meta:a=>!a.metaKey,left:a=>"button"in a&&a.button!==0,middle:a=>"button"in a&&a.button!==1,right:a=>"button"in a&&a.button!==2,exact:(a,e)=>GZ.some(t=>a[`${t}Key`]&&!e.includes(t))},Hl=(a,e)=>{const t=a._withMods||(a._withMods={}),i=e.join(".");return t[i]||(t[i]=(n,...s)=>{for(let r=0;r<e.length;r++){const l=OZ[e[r]];if(l&&l(n,e))return}return a(n,...s)})},PZ={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Yl=(a,e)=>{const t=a._withKeys||(a._withKeys={}),i=e.join(".");return t[i]||(t[i]=n=>{if(!("key"in n))return;const s=Gh(n.key);if(e.some(r=>r===s||PZ[r]===s))return a(n)})},BZ=Wr({patchProp:MZ},cZ);let rL;function FZ(){return rL||(rL=GV(BZ))}const NZ=(...a)=>{const e=FZ().createApp(...a),{mount:t}=e;return e.mount=i=>{const n=VZ(i);if(!n)return;const s=e._component;!ja(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const r=t(n,!1,DZ(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},e};function DZ(a){if(a instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&a instanceof MathMLElement)return"mathml"}function VZ(a){return $n(a)?document.querySelector(a):a}var mk=Symbol();function ZZ(a,{i18next:e,rerenderOn:t=["languageChanged","loaded","added","removed"],slotStart:i="{",slotEnd:n="}"}){const s=Qe(new Date),r=()=>E0(()=>{s.value=new Date}),l=()=>s.value;t.forEach(g=>{var b;switch(g){case"added":case"removed":(b=e.store)==null||b.on(g,r);break;default:e.on(g,r);break}}),a.component("i18next",XZ);const c=()=>e.isInitialized;a.config.globalProperties.$t=sL(e.t.bind(e),l,c);const h=new Proxy(e,{get(g,b){return l(),Reflect.get(g,b)}});a.config.globalProperties.$i18next=h,a.provide(mk,{i18next:h,slotPattern:UZ(i,n),withAccessRecording(g,b){return sL(g,l,b)}})}function ya(a,e){const{i18next:t,withAccessRecording:i}=gk();let n;return e!=null&&e.lng?n=t.getFixedT(e.lng,a,e==null?void 0:e.keyPrefix):n=t.getFixedT(null,a??null,e==null?void 0:e.keyPrefix),{i18next:t,t:i(n,zZ(t,a))}}function zZ(a,e=[]){let t;return()=>{if(t===void 0)if(a.isInitialized){const n=(typeof e=="string"?[e]:e).filter(s=>!a.hasLoadedNamespace(s));n.length?(t=!1,a.loadNamespaces(n).then(()=>t=!0)):t=!0}else return!1;return t}}function sL(a,e,t){return new Proxy(a,{apply:function(i,n,s){return e(),t()?Reflect.apply(i,n,s):""}})}function gk(){const a=ys(mk);if(!a)throw new Error("i18next-vue: Make sure to register the i18next-vue plugin using app.use(...).");return a}function UZ(a,e){const t=`${a}\\s*([a-z0-9\\-]+)\\s*${e}`;return new RegExp(t,"gi")}var XZ=bt({props:{translation:{type:String,required:!0}},setup(a,{slots:e}){const{slotPattern:t}=gk();return()=>{const i=a.translation,n=[];let s,r=0;for(;(s=t.exec(i))!==null;){n.push(i.substring(r,s.index));const l=e[s[1]];l?n.push(...l()):n.push(s[0]),r=t.lastIndex}return n.push(i.substring(r)),n}}});/*! @license DOMPurify 2.5.8 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.8/LICENSE */function lh(a){"@babel/helpers - typeof";return lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lh(a)}function lS(a,e){return lS=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},lS(a,e)}function HZ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function e2(a,e,t){return HZ()?e2=Reflect.construct:e2=function(n,s,r){var l=[null];l.push.apply(l,s);var c=Function.bind.apply(n,l),h=new c;return r&&lS(h,r.prototype),h},e2.apply(null,arguments)}function zl(a){return YZ(a)||KZ(a)||qZ(a)||jZ()}function YZ(a){if(Array.isArray(a))return uS(a)}function KZ(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function qZ(a,e){if(a){if(typeof a=="string")return uS(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);if(t==="Object"&&a.constructor&&(t=a.constructor.name),t==="Map"||t==="Set")return Array.from(a);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return uS(a,e)}}function uS(a,e){(e==null||e>a.length)&&(e=a.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=a[t];return i}function jZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var JZ=Object.hasOwnProperty,oL=Object.setPrototypeOf,QZ=Object.isFrozen,$Z=Object.getPrototypeOf,ez=Object.getOwnPropertyDescriptor,no=Object.freeze,Sl=Object.seal,tz=Object.create,pk=typeof Reflect<"u"&&Reflect,V2=pk.apply,cS=pk.construct;V2||(V2=function(e,t,i){return e.apply(t,i)});no||(no=function(e){return e});Sl||(Sl=function(e){return e});cS||(cS=function(e,t){return e2(e,zl(t))});var az=Tl(Array.prototype.forEach),lL=Tl(Array.prototype.pop),py=Tl(Array.prototype.push),t2=Tl(String.prototype.toLowerCase),pC=Tl(String.prototype.toString),uL=Tl(String.prototype.match),Fl=Tl(String.prototype.replace),iz=Tl(String.prototype.indexOf),nz=Tl(String.prototype.trim),cs=Tl(RegExp.prototype.test),fC=rz(TypeError);function Tl(a){return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return V2(a,e,i)}}function rz(a){return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return cS(a,t)}}function _i(a,e,t){var i;t=(i=t)!==null&&i!==void 0?i:t2,oL&&oL(a,null);for(var n=e.length;n--;){var s=e[n];if(typeof s=="string"){var r=t(s);r!==s&&(QZ(e)||(e[n]=r),s=r)}a[s]=!0}return a}function T_(a){var e=tz(null),t;for(t in a)V2(JZ,a,[t])===!0&&(e[t]=a[t]);return e}function ev(a,e){for(;a!==null;){var t=ez(a,e);if(t){if(t.get)return Tl(t.get);if(typeof t.value=="function")return Tl(t.value)}a=$Z(a)}function i(n){return console.warn("fallback value for",n),null}return i}var cL=no(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),yC=no(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bC=no(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sz=no(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vC=no(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),oz=no(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dL=no(["#text"]),hL=no(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),xC=no(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),_L=no(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),tv=no(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),lz=Sl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uz=Sl(/<%[\w\W]*|[\w\W]*%>/gm),cz=Sl(/\${[\w\W]*}/gm),dz=Sl(/^data-[\-\w.\u00B7-\uFFFF]+$/),hz=Sl(/^aria-[\-\w]+$/),_z=Sl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mz=Sl(/^(?:\w+script|data):/i),gz=Sl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),pz=Sl(/^html$/i),fz=Sl(/^[a-z][.\w]*(-[.\w]+)+$/i),yz=function(){return typeof window>"u"?null:window},bz=function(e,t){if(lh(e)!=="object"||typeof e.createPolicy!="function")return null;var i=null,n="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(n)&&(i=t.currentScript.getAttribute(n));var s="dompurify"+(i?"#"+i:"");try{return e.createPolicy(s,{createHTML:function(l){return l},createScriptURL:function(l){return l}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function fk(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yz(),e=function(Ae){return fk(Ae)};if(e.version="2.5.8",e.removed=[],!a||!a.document||a.document.nodeType!==9)return e.isSupported=!1,e;var t=a.document,i=a.document,n=a.DocumentFragment,s=a.HTMLTemplateElement,r=a.Node,l=a.Element,c=a.NodeFilter,h=a.NamedNodeMap,g=h===void 0?a.NamedNodeMap||a.MozNamedAttrMap:h,b=a.HTMLFormElement,v=a.DOMParser,C=a.trustedTypes,S=l.prototype,L=ev(S,"cloneNode"),R=ev(S,"nextSibling"),G=ev(S,"childNodes"),O=ev(S,"parentNode");if(typeof s=="function"){var V=i.createElement("template");V.content&&V.content.ownerDocument&&(i=V.content.ownerDocument)}var B=bz(C,t),z=B?B.createHTML(""):"",j=i,re=j.implementation,ne=j.createNodeIterator,te=j.createDocumentFragment,le=j.getElementsByTagName,ue=t.importNode,fe={};try{fe=T_(i).documentMode?i.documentMode:{}}catch{}var be={};e.isSupported=typeof O=="function"&&re&&re.createHTMLDocument!==void 0&&fe!==9;var Pe=lz,Be=uz,Me=cz,ke=dz,Je=hz,ut=mz,ht=gz,Dt=fz,We=_z,oa=null,li=_i({},[].concat(zl(cL),zl(yC),zl(bC),zl(vC),zl(dL))),da=null,Ji=_i({},[].concat(zl(hL),zl(xC),zl(_L),zl(tv))),sa=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ni=null,ka=null,bi=!0,cr=!0,On=!1,pe=!0,Ee=!1,ze=!0,et=!1,lt=!1,ot=!1,Tt=!1,ft=!1,vt=!1,mt=!0,Ot=!1,Lt="user-content-",qt=!0,Qt=!1,Ea={},si=null,ni=_i({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),pn=null,Di=_i({},["audio","video","img","source","image","track"]),Pn=null,fn=_i({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dr="http://www.w3.org/1998/Math/MathML",Ir="http://www.w3.org/2000/svg",wi="http://www.w3.org/1999/xhtml",hn=wi,Vs=!1,oo=null,ns=_i({},[dr,Ir,wi],pC),Tn,Or=["application/xhtml+xml","text/html"],Bo="text/html",nn,Ja=null,D=i.createElement("form"),H=function(Ae){return Ae instanceof RegExp||Ae instanceof Function},K=function(Ae){Ja&&Ja===Ae||((!Ae||lh(Ae)!=="object")&&(Ae={}),Ae=T_(Ae),Tn=Or.indexOf(Ae.PARSER_MEDIA_TYPE)===-1?Tn=Bo:Tn=Ae.PARSER_MEDIA_TYPE,nn=Tn==="application/xhtml+xml"?pC:t2,oa="ALLOWED_TAGS"in Ae?_i({},Ae.ALLOWED_TAGS,nn):li,da="ALLOWED_ATTR"in Ae?_i({},Ae.ALLOWED_ATTR,nn):Ji,oo="ALLOWED_NAMESPACES"in Ae?_i({},Ae.ALLOWED_NAMESPACES,pC):ns,Pn="ADD_URI_SAFE_ATTR"in Ae?_i(T_(fn),Ae.ADD_URI_SAFE_ATTR,nn):fn,pn="ADD_DATA_URI_TAGS"in Ae?_i(T_(Di),Ae.ADD_DATA_URI_TAGS,nn):Di,si="FORBID_CONTENTS"in Ae?_i({},Ae.FORBID_CONTENTS,nn):ni,Ni="FORBID_TAGS"in Ae?_i({},Ae.FORBID_TAGS,nn):{},ka="FORBID_ATTR"in Ae?_i({},Ae.FORBID_ATTR,nn):{},Ea="USE_PROFILES"in Ae?Ae.USE_PROFILES:!1,bi=Ae.ALLOW_ARIA_ATTR!==!1,cr=Ae.ALLOW_DATA_ATTR!==!1,On=Ae.ALLOW_UNKNOWN_PROTOCOLS||!1,pe=Ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ee=Ae.SAFE_FOR_TEMPLATES||!1,ze=Ae.SAFE_FOR_XML!==!1,et=Ae.WHOLE_DOCUMENT||!1,Tt=Ae.RETURN_DOM||!1,ft=Ae.RETURN_DOM_FRAGMENT||!1,vt=Ae.RETURN_TRUSTED_TYPE||!1,ot=Ae.FORCE_BODY||!1,mt=Ae.SANITIZE_DOM!==!1,Ot=Ae.SANITIZE_NAMED_PROPS||!1,qt=Ae.KEEP_CONTENT!==!1,Qt=Ae.IN_PLACE||!1,We=Ae.ALLOWED_URI_REGEXP||We,hn=Ae.NAMESPACE||wi,sa=Ae.CUSTOM_ELEMENT_HANDLING||{},Ae.CUSTOM_ELEMENT_HANDLING&&H(Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(sa.tagNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&H(Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(sa.attributeNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&typeof Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(sa.allowCustomizedBuiltInElements=Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ee&&(cr=!1),ft&&(Tt=!0),Ea&&(oa=_i({},zl(dL)),da=[],Ea.html===!0&&(_i(oa,cL),_i(da,hL)),Ea.svg===!0&&(_i(oa,yC),_i(da,xC),_i(da,tv)),Ea.svgFilters===!0&&(_i(oa,bC),_i(da,xC),_i(da,tv)),Ea.mathMl===!0&&(_i(oa,vC),_i(da,_L),_i(da,tv))),Ae.ADD_TAGS&&(oa===li&&(oa=T_(oa)),_i(oa,Ae.ADD_TAGS,nn)),Ae.ADD_ATTR&&(da===Ji&&(da=T_(da)),_i(da,Ae.ADD_ATTR,nn)),Ae.ADD_URI_SAFE_ATTR&&_i(Pn,Ae.ADD_URI_SAFE_ATTR,nn),Ae.FORBID_CONTENTS&&(si===ni&&(si=T_(si)),_i(si,Ae.FORBID_CONTENTS,nn)),qt&&(oa["#text"]=!0),et&&_i(oa,["html","head","body"]),oa.table&&(_i(oa,["tbody"]),delete Ni.tbody),no&&no(Ae),Ja=Ae)},ae=_i({},["mi","mo","mn","ms","mtext"]),oe=_i({},["annotation-xml"]),Ce=_i({},["title","style","font","a","script"]),ve=_i({},yC);_i(ve,bC),_i(ve,sz);var J=_i({},vC);_i(J,oz);var _e=function(Ae){var at=O(Ae);(!at||!at.tagName)&&(at={namespaceURI:hn,tagName:"template"});var rt=t2(Ae.tagName),$t=t2(at.tagName);return oo[Ae.namespaceURI]?Ae.namespaceURI===Ir?at.namespaceURI===wi?rt==="svg":at.namespaceURI===dr?rt==="svg"&&($t==="annotation-xml"||ae[$t]):!!ve[rt]:Ae.namespaceURI===dr?at.namespaceURI===wi?rt==="math":at.namespaceURI===Ir?rt==="math"&&oe[$t]:!!J[rt]:Ae.namespaceURI===wi?at.namespaceURI===Ir&&!oe[$t]||at.namespaceURI===dr&&!ae[$t]?!1:!J[rt]&&(Ce[rt]||!ve[rt]):!!(Tn==="application/xhtml+xml"&&oo[Ae.namespaceURI]):!1},Re=function(Ae){py(e.removed,{element:Ae});try{Ae.parentNode.removeChild(Ae)}catch{try{Ae.outerHTML=z}catch{Ae.remove()}}},tt=function(Ae,at){try{py(e.removed,{attribute:at.getAttributeNode(Ae),from:at})}catch{py(e.removed,{attribute:null,from:at})}if(at.removeAttribute(Ae),Ae==="is"&&!da[Ae])if(Tt||ft)try{Re(at)}catch{}else try{at.setAttribute(Ae,"")}catch{}},ct=function(Ae){var at,rt;if(ot)Ae="<remove></remove>"+Ae;else{var $t=uL(Ae,/^[\r\n\t ]+/);rt=$t&&$t[0]}Tn==="application/xhtml+xml"&&hn===wi&&(Ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ae+"</body></html>");var wa=B?B.createHTML(Ae):Ae;if(hn===wi)try{at=new v().parseFromString(wa,Tn)}catch{}if(!at||!at.documentElement){at=re.createDocument(hn,"template",null);try{at.documentElement.innerHTML=Vs?z:wa}catch{}}var Ii=at.body||at.documentElement;return Ae&&rt&&Ii.insertBefore(i.createTextNode(rt),Ii.childNodes[0]||null),hn===wi?le.call(at,et?"html":"body")[0]:et?at.documentElement:Ii},Xe=function(Ae){return ne.call(Ae.ownerDocument||Ae,Ae,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null,!1)},nt=function(Ae){return Ae instanceof b&&(typeof Ae.nodeName!="string"||typeof Ae.textContent!="string"||typeof Ae.removeChild!="function"||!(Ae.attributes instanceof g)||typeof Ae.removeAttribute!="function"||typeof Ae.setAttribute!="function"||typeof Ae.namespaceURI!="string"||typeof Ae.insertBefore!="function"||typeof Ae.hasChildNodes!="function")},Pt=function(Ae){return lh(r)==="object"?Ae instanceof r:Ae&&lh(Ae)==="object"&&typeof Ae.nodeType=="number"&&typeof Ae.nodeName=="string"},Et=function(Ae,at,rt){be[Ae]&&az(be[Ae],function($t){$t.call(e,at,rt,Ja)})},Ye=function(Ae){var at;if(Et("beforeSanitizeElements",Ae,null),nt(Ae)||cs(/[\u0080-\uFFFF]/,Ae.nodeName))return Re(Ae),!0;var rt=nn(Ae.nodeName);if(Et("uponSanitizeElement",Ae,{tagName:rt,allowedTags:oa}),Ae.hasChildNodes()&&!Pt(Ae.firstElementChild)&&(!Pt(Ae.content)||!Pt(Ae.content.firstElementChild))&&cs(/<[/\w]/g,Ae.innerHTML)&&cs(/<[/\w]/g,Ae.textContent)||rt==="select"&&cs(/<template/i,Ae.innerHTML)||Ae.nodeType===7||ze&&Ae.nodeType===8&&cs(/<[/\w]/g,Ae.data))return Re(Ae),!0;if(!oa[rt]||Ni[rt]){if(!Ni[rt]&&It(rt)&&(sa.tagNameCheck instanceof RegExp&&cs(sa.tagNameCheck,rt)||sa.tagNameCheck instanceof Function&&sa.tagNameCheck(rt)))return!1;if(qt&&!si[rt]){var $t=O(Ae)||Ae.parentNode,wa=G(Ae)||Ae.childNodes;if(wa&&$t)for(var Ii=wa.length,Sa=Ii-1;Sa>=0;--Sa){var Gi=L(wa[Sa],!0);Gi.__removalCount=(Ae.__removalCount||0)+1,$t.insertBefore(Gi,R(Ae))}}return Re(Ae),!0}return Ae instanceof l&&!_e(Ae)||(rt==="noscript"||rt==="noembed"||rt==="noframes")&&cs(/<\/no(script|embed|frames)/i,Ae.innerHTML)?(Re(Ae),!0):(Ee&&Ae.nodeType===3&&(at=Ae.textContent,at=Fl(at,Pe," "),at=Fl(at,Be," "),at=Fl(at,Me," "),Ae.textContent!==at&&(py(e.removed,{element:Ae.cloneNode()}),Ae.textContent=at)),Et("afterSanitizeElements",Ae,null),!1)},Rt=function(Ae,at,rt){if(mt&&(at==="id"||at==="name")&&(rt in i||rt in D))return!1;if(!(cr&&!ka[at]&&cs(ke,at))){if(!(bi&&cs(Je,at))){if(!da[at]||ka[at]){if(!(It(Ae)&&(sa.tagNameCheck instanceof RegExp&&cs(sa.tagNameCheck,Ae)||sa.tagNameCheck instanceof Function&&sa.tagNameCheck(Ae))&&(sa.attributeNameCheck instanceof RegExp&&cs(sa.attributeNameCheck,at)||sa.attributeNameCheck instanceof Function&&sa.attributeNameCheck(at))||at==="is"&&sa.allowCustomizedBuiltInElements&&(sa.tagNameCheck instanceof RegExp&&cs(sa.tagNameCheck,rt)||sa.tagNameCheck instanceof Function&&sa.tagNameCheck(rt))))return!1}else if(!Pn[at]){if(!cs(We,Fl(rt,ht,""))){if(!((at==="src"||at==="xlink:href"||at==="href")&&Ae!=="script"&&iz(rt,"data:")===0&&pn[Ae])){if(!(On&&!cs(ut,Fl(rt,ht,"")))){if(rt)return!1}}}}}}return!0},It=function(Ae){return Ae!=="annotation-xml"&&uL(Ae,Dt)},At=function(Ae){var at,rt,$t,wa;Et("beforeSanitizeAttributes",Ae,null);var Ii=Ae.attributes;if(!(!Ii||nt(Ae))){var Sa={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:da};for(wa=Ii.length;wa--;){at=Ii[wa];var Gi=at,Ta=Gi.name,Da=Gi.namespaceURI;if(rt=Ta==="value"?at.value:nz(at.value),$t=nn(Ta),Sa.attrName=$t,Sa.attrValue=rt,Sa.keepAttr=!0,Sa.forceKeepAttr=void 0,Et("uponSanitizeAttribute",Ae,Sa),rt=Sa.attrValue,!Sa.forceKeepAttr&&(tt(Ta,Ae),!!Sa.keepAttr)){if(!pe&&cs(/\/>/i,rt)){tt(Ta,Ae);continue}Ee&&(rt=Fl(rt,Pe," "),rt=Fl(rt,Be," "),rt=Fl(rt,Me," "));var ui=nn(Ae.nodeName);if(Rt(ui,$t,rt)){if(Ot&&($t==="id"||$t==="name")&&(tt(Ta,Ae),rt=Lt+rt),ze&&cs(/((--!?|])>)|<\/(style|title)/i,rt)){tt(Ta,Ae);continue}if(B&&lh(C)==="object"&&typeof C.getAttributeType=="function"&&!Da)switch(C.getAttributeType(ui,$t)){case"TrustedHTML":{rt=B.createHTML(rt);break}case"TrustedScriptURL":{rt=B.createScriptURL(rt);break}}try{Da?Ae.setAttributeNS(Da,Ta,rt):Ae.setAttribute(Ta,rt),nt(Ae)?Re(Ae):lL(e.removed)}catch{}}}}Et("afterSanitizeAttributes",Ae,null)}},Oa=function qe(Ae){var at,rt=Xe(Ae);for(Et("beforeSanitizeShadowDOM",Ae,null);at=rt.nextNode();)Et("uponSanitizeShadowNode",at,null),Ye(at),At(at),at.content instanceof n&&qe(at.content);Et("afterSanitizeShadowDOM",Ae,null)};return e.sanitize=function(qe){var Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},at,rt,$t,wa,Ii;if(Vs=!qe,Vs&&(qe="<!-->"),typeof qe!="string"&&!Pt(qe))if(typeof qe.toString=="function"){if(qe=qe.toString(),typeof qe!="string")throw fC("dirty is not a string, aborting")}else throw fC("toString is not a function");if(!e.isSupported){if(lh(a.toStaticHTML)==="object"||typeof a.toStaticHTML=="function"){if(typeof qe=="string")return a.toStaticHTML(qe);if(Pt(qe))return a.toStaticHTML(qe.outerHTML)}return qe}if(lt||K(Ae),e.removed=[],typeof qe=="string"&&(Qt=!1),Qt){if(qe.nodeName){var Sa=nn(qe.nodeName);if(!oa[Sa]||Ni[Sa])throw fC("root node is forbidden and cannot be sanitized in-place")}}else if(qe instanceof r)at=ct("<!---->"),rt=at.ownerDocument.importNode(qe,!0),rt.nodeType===1&&rt.nodeName==="BODY"||rt.nodeName==="HTML"?at=rt:at.appendChild(rt);else{if(!Tt&&!Ee&&!et&&qe.indexOf("<")===-1)return B&&vt?B.createHTML(qe):qe;if(at=ct(qe),!at)return Tt?null:vt?z:""}at&&ot&&Re(at.firstChild);for(var Gi=Xe(Qt?qe:at);$t=Gi.nextNode();)$t.nodeType===3&&$t===wa||(Ye($t),At($t),$t.content instanceof n&&Oa($t.content),wa=$t);if(wa=null,Qt)return qe;if(Tt){if(ft)for(Ii=te.call(at.ownerDocument);at.firstChild;)Ii.appendChild(at.firstChild);else Ii=at;return(da.shadowroot||da.shadowrootmod)&&(Ii=ue.call(t,Ii,!0)),Ii}var Ta=et?at.outerHTML:at.innerHTML;return et&&oa["!doctype"]&&at.ownerDocument&&at.ownerDocument.doctype&&at.ownerDocument.doctype.name&&cs(pz,at.ownerDocument.doctype.name)&&(Ta="<!DOCTYPE "+at.ownerDocument.doctype.name+`>
`+Ta),Ee&&(Ta=Fl(Ta,Pe," "),Ta=Fl(Ta,Be," "),Ta=Fl(Ta,Me," ")),B&&vt?B.createHTML(Ta):Ta},e.setConfig=function(qe){K(qe),lt=!0},e.clearConfig=function(){Ja=null,lt=!1},e.isValidAttribute=function(qe,Ae,at){Ja||K({});var rt=nn(qe),$t=nn(Ae);return Rt(rt,$t,at)},e.addHook=function(qe,Ae){typeof Ae=="function"&&(be[qe]=be[qe]||[],py(be[qe],Ae))},e.removeHook=function(qe){if(be[qe])return lL(be[qe])},e.removeHooks=function(qe){be[qe]&&(be[qe]=[])},e.removeAllHooks=function(){be={}},e}var vz=fk();function xz(a,e){const t=a.hooks??{};let i;for(i in t){const n=t[i];n!==void 0&&e.addHook(i,n)}}function yk(){return vz()}function wz(a={},e=yk){const t=e();xz(a,t);const i=function(n,s){const r=s.value;if(s.oldValue===r)return;const l=`${r}`,c=s.arg,h=a.namedConfigurations,g=a.default??{};if(h&&c!==void 0){n.innerHTML=t.sanitize(l,h[c]??g);return}n.innerHTML=t.sanitize(l,g)};return{mounted:i,updated:i}}const Iz={install(a,e={},t=yk){a.directive("dompurify-html",wz(e,t))}};var Cz=!1;/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let bk;const xw=a=>bk=a,vk=Symbol();function dS(a){return a&&typeof a=="object"&&Object.prototype.toString.call(a)==="[object Object]"&&typeof a.toJSON!="function"}var a0;(function(a){a.direct="direct",a.patchObject="patch object",a.patchFunction="patch function"})(a0||(a0={}));function Az(){const a=i6(!0),e=a.run(()=>Qe({}));let t=[],i=[];const n=tT({install(s){xw(n),n._a=s,s.provide(vk,n),s.config.globalProperties.$pinia=n,i.forEach(r=>t.push(r)),i=[]},use(s){return!this._a&&!Cz?i.push(s):t.push(s),this},_p:t,_a:null,_e:a,_s:new Map,state:e});return n}const xk=()=>{};function mL(a,e,t,i=xk){a.push(e);const n=()=>{const s=a.indexOf(e);s>-1&&(a.splice(s,1),i())};return!t&&n6()&&AD(n),n}function Eg(a,...e){a.slice().forEach(t=>{t(...e)})}const Sz=a=>a(),gL=Symbol(),wC=Symbol();function hS(a,e){a instanceof Map&&e instanceof Map?e.forEach((t,i)=>a.set(i,t)):a instanceof Set&&e instanceof Set&&e.forEach(a.add,a);for(const t in e){if(!e.hasOwnProperty(t))continue;const i=e[t],n=a[t];dS(n)&&dS(i)&&a.hasOwnProperty(t)&&!Zn(i)&&!td(i)?a[t]=hS(n,i):a[t]=i}return a}const Tz=Symbol();function Ez(a){return!dS(a)||!a.hasOwnProperty(Tz)}const{assign:eh}=Object;function Mz(a){return!!(Zn(a)&&a.effect)}function Lz(a,e,t,i){const{state:n,actions:s,getters:r}=e,l=t.state.value[a];let c;function h(){l||(t.state.value[a]=n?n():{});const g=qD(t.state.value[a]);return eh(g,s,Object.keys(r||{}).reduce((b,v)=>(b[v]=tT(Ft(()=>{xw(t);const C=t._s.get(a);return r[v].call(C,C)})),b),{}))}return c=wk(a,h,e,t,i,!0),c}function wk(a,e,t={},i,n,s){let r;const l=eh({actions:{}},t),c={deep:!0};let h,g,b=[],v=[],C;const S=i.state.value[a];!s&&!S&&(i.state.value[a]={}),Qe({});let L;function R(ne){let te;h=g=!1,typeof ne=="function"?(ne(i.state.value[a]),te={type:a0.patchFunction,storeId:a,events:C}):(hS(i.state.value[a],ne),te={type:a0.patchObject,payload:ne,storeId:a,events:C});const le=L=Symbol();E0().then(()=>{L===le&&(h=!0)}),g=!0,Eg(b,te,i.state.value[a])}const G=s?function(){const{state:te}=t,le=te?te():{};this.$patch(ue=>{eh(ue,le)})}:xk;function O(){r.stop(),b=[],v=[],i._s.delete(a)}const V=(ne,te="")=>{if(gL in ne)return ne[wC]=te,ne;const le=function(){xw(i);const ue=Array.from(arguments),fe=[],be=[];function Pe(ke){fe.push(ke)}function Be(ke){be.push(ke)}Eg(v,{args:ue,name:le[wC],store:z,after:Pe,onError:Be});let Me;try{Me=ne.apply(this&&this.$id===a?this:z,ue)}catch(ke){throw Eg(be,ke),ke}return Me instanceof Promise?Me.then(ke=>(Eg(fe,ke),ke)).catch(ke=>(Eg(be,ke),Promise.reject(ke))):(Eg(fe,Me),Me)};return le[gL]=!0,le[wC]=te,le},B={_p:i,$id:a,$onAction:mL.bind(null,v),$patch:R,$reset:G,$subscribe(ne,te={}){const le=mL(b,ne,te.detached,()=>ue()),ue=r.run(()=>Kt(()=>i.state.value[a],fe=>{(te.flush==="sync"?g:h)&&ne({storeId:a,type:a0.direct,events:C},fe)},eh({},c,te)));return le},$dispose:O},z=hw(B);i._s.set(a,z);const re=(i._a&&i._a.runWithContext||Sz)(()=>i._e.run(()=>(r=i6()).run(()=>e({action:V}))));for(const ne in re){const te=re[ne];if(Zn(te)&&!Mz(te)||td(te))s||(S&&Ez(te)&&(Zn(te)?te.value=S[ne]:hS(te,S[ne])),i.state.value[a][ne]=te);else if(typeof te=="function"){const le=V(te,ne);re[ne]=le,l.actions[ne]=te}}return eh(z,re),eh(ki(z),re),Object.defineProperty(z,"$state",{get:()=>i.state.value[a],set:ne=>{R(te=>{eh(te,ne)})}}),i._p.forEach(ne=>{eh(z,r.run(()=>ne({store:z,app:i._a,pinia:i,options:l})))}),S&&s&&t.hydrate&&t.hydrate(z.$state,S),h=!0,g=!0,z}/*! #__NO_SIDE_EFFECTS__ */function rl(a,e,t){let i,n;const s=typeof e=="function";typeof a=="string"?(i=a,n=s?t:e):(n=a,i=a.id);function r(l,c){const h=TV();return l=l||(h?ys(vk,null):null),l&&xw(l),l=bk,l._s.has(i)||(s?wk(i,e,n,l):Lz(i,n,l)),l._s.get(i)}return r.$id=i,r}function Zt(a){{const e=ki(a),t={};for(const i in e){const n=e[i];n.effect?t[i]=Ft({get:()=>a[i],set(s){a[i]=s}}):(Zn(n)||td(n))&&(t[i]=w6(a,i))}return t}}const Ik={info:1,warn:2,error:3,none:4};let Rz=Ik.info;function Ck(...a){Rz>Ik.warn||console.warn(...a)}const es={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function _s(a){const e=nl();for(let t=0,i=a.length;t<i;++t)n0(e,a[t]);return e}function kz(a,e,t){const i=Math.min.apply(null,a),n=Math.min.apply(null,e),s=Math.max.apply(null,a),r=Math.max.apply(null,e);return ic(i,n,s,r,t)}function Eh(a,e,t){return t?(t[0]=a[0]-e,t[1]=a[1]-e,t[2]=a[2]+e,t[3]=a[3]+e,t):[a[0]-e,a[1]-e,a[2]+e,a[3]+e]}function Ak(a,e){return e?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e):a.slice()}function vm(a,e,t){let i,n;return e<a[0]?i=a[0]-e:a[2]<e?i=e-a[2]:i=0,t<a[1]?n=a[1]-t:a[3]<t?n=t-a[3]:n=0,i*i+n*n}function hd(a,e){return _T(a,e[0],e[1])}function zu(a,e){return a[0]<=e[0]&&e[2]<=a[2]&&a[1]<=e[1]&&e[3]<=a[3]}function _T(a,e,t){return a[0]<=e&&e<=a[2]&&a[1]<=t&&t<=a[3]}function _S(a,e){const t=a[0],i=a[1],n=a[2],s=a[3],r=e[0],l=e[1];let c=es.UNKNOWN;return r<t?c=c|es.LEFT:r>n&&(c=c|es.RIGHT),l<i?c=c|es.BELOW:l>s&&(c=c|es.ABOVE),c===es.UNKNOWN&&(c=es.INTERSECTING),c}function nl(){return[1/0,1/0,-1/0,-1/0]}function ic(a,e,t,i,n){return n?(n[0]=a,n[1]=e,n[2]=t,n[3]=i,n):[a,e,t,i]}function Qp(a){return ic(1/0,1/0,-1/0,-1/0,a)}function i0(a,e){const t=a[0],i=a[1];return ic(t,i,t,i,e)}function mT(a,e,t,i,n){const s=Qp(n);return Sk(s,a,e,t,i)}function rm(a,e){return a[0]==e[0]&&a[2]==e[2]&&a[1]==e[1]&&a[3]==e[3]}function gT(a,e){return e[0]<a[0]&&(a[0]=e[0]),e[2]>a[2]&&(a[2]=e[2]),e[1]<a[1]&&(a[1]=e[1]),e[3]>a[3]&&(a[3]=e[3]),a}function n0(a,e){e[0]<a[0]&&(a[0]=e[0]),e[0]>a[2]&&(a[2]=e[0]),e[1]<a[1]&&(a[1]=e[1]),e[1]>a[3]&&(a[3]=e[1])}function Sk(a,e,t,i,n){for(;t<i;t+=n)Wz(a,e[t],e[t+1]);return a}function Wz(a,e,t){a[0]=Math.min(a[0],e),a[1]=Math.min(a[1],t),a[2]=Math.max(a[2],e),a[3]=Math.max(a[3],t)}function pT(a,e){let t;return t=e(ww(a)),t||(t=e(Iw(a)),t)||(t=e(Cw(a)),t)||(t=e(bd(a)),t)?t:!1}function mS(a){let e=0;return xm(a)||(e=fi(a)*ur(a)),e}function ww(a){return[a[0],a[1]]}function Iw(a){return[a[2],a[1]]}function iu(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function Gz(a,e){let t;if(e==="bottom-left")t=ww(a);else if(e==="bottom-right")t=Iw(a);else if(e==="top-left")t=bd(a);else if(e==="top-right")t=Cw(a);else throw new Error("Invalid corner");return t}function O0(a,e,t,i,n){const[s,r,l,c,h,g,b,v]=Tk(a,e,t,i);return ic(Math.min(s,l,h,b),Math.min(r,c,g,v),Math.max(s,l,h,b),Math.max(r,c,g,v),n)}function Tk(a,e,t,i){const n=e*i[0]/2,s=e*i[1]/2,r=Math.cos(t),l=Math.sin(t),c=n*r,h=n*l,g=s*r,b=s*l,v=a[0],C=a[1];return[v-c+b,C-h-g,v-c-b,C-h+g,v+c-b,C+h+g,v+c+b,C+h-g,v-c+b,C-h-g]}function ur(a){return a[3]-a[1]}function qu(a,e,t){const i=t||nl();return xr(a,e)?(a[0]>e[0]?i[0]=a[0]:i[0]=e[0],a[1]>e[1]?i[1]=a[1]:i[1]=e[1],a[2]<e[2]?i[2]=a[2]:i[2]=e[2],a[3]<e[3]?i[3]=a[3]:i[3]=e[3]):Qp(i),i}function bd(a){return[a[0],a[3]]}function Cw(a){return[a[2],a[3]]}function fi(a){return a[2]-a[0]}function xr(a,e){return a[0]<=e[2]&&a[2]>=e[0]&&a[1]<=e[3]&&a[3]>=e[1]}function xm(a){return a[2]<a[0]||a[3]<a[1]}function Oz(a,e){return e?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],e):a}function Pz(a,e,t){let i=!1;const n=_S(a,e),s=_S(a,t);if(n===es.INTERSECTING||s===es.INTERSECTING)i=!0;else{const r=a[0],l=a[1],c=a[2],h=a[3],g=e[0],b=e[1],v=t[0],C=t[1],S=(C-b)/(v-g);let L,R;s&es.ABOVE&&!(n&es.ABOVE)&&(L=v-(C-h)/S,i=L>=r&&L<=c),!i&&s&es.RIGHT&&!(n&es.RIGHT)&&(R=C-(v-c)*S,i=R>=l&&R<=h),!i&&s&es.BELOW&&!(n&es.BELOW)&&(L=v-(C-l)/S,i=L>=r&&L<=c),!i&&s&es.LEFT&&!(n&es.LEFT)&&(R=C-(v-r)*S,i=R>=l&&R<=h)}return i}function Bz(a,e,t,i){if(xm(a))return Qp(t);let n=[];if(i>1){const l=a[2]-a[0],c=a[3]-a[1];for(let h=0;h<i;++h)n.push(a[0]+l*h/i,a[1],a[2],a[1]+c*h/i,a[2]-l*h/i,a[3],a[0],a[3]-c*h/i)}else n=[a[0],a[1],a[2],a[1],a[2],a[3],a[0],a[3]];e(n,n,2);const s=[],r=[];for(let l=0,c=n.length;l<c;l+=2)s.push(n[l]),r.push(n[l+1]);return kz(s,r,t)}function Ek(a,e){const t=e.getExtent(),i=iu(a);if(e.canWrapX()&&(i[0]<t[0]||i[0]>=t[2])){const n=fi(t),r=Math.floor((i[0]-t[0])/n)*n;a[0]-=r,a[2]-=r}return a}function Mk(a,e,t){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(a[0])||!isFinite(a[2]))return[[i[0],a[1],i[2],a[3]]];Ek(a,e);const n=fi(i);if(fi(a)>n&&!t)return[[i[0],a[1],i[2],a[3]]];if(a[0]<i[0])return[[a[0]+n,a[1],i[2],a[3]],[i[0],a[1],a[2],a[3]]];if(a[2]>i[2])return[[a[0],a[1],i[2],a[3]],[i[0],a[1],a[2]-n,a[3]]]}return[a]}function Sn(a,e,t){return Math.min(Math.max(a,e),t)}function Fz(a,e,t,i,n,s){const r=n-t,l=s-i;if(r!==0||l!==0){const c=((a-t)*r+(e-i)*l)/(r*r+l*l);c>1?(t=n,i=s):c>0&&(t+=r*c,i+=l*c)}return ad(a,e,t,i)}function ad(a,e,t,i){const n=t-a,s=i-e;return n*n+s*s}function Nz(a){const e=a.length;for(let i=0;i<e;i++){let n=i,s=Math.abs(a[i][i]);for(let l=i+1;l<e;l++){const c=Math.abs(a[l][i]);c>s&&(s=c,n=l)}if(s===0)return null;const r=a[n];a[n]=a[i],a[i]=r;for(let l=i+1;l<e;l++){const c=-a[l][i]/a[i][i];for(let h=i;h<e+1;h++)i==h?a[l][h]=0:a[l][h]+=c*a[i][h]}}const t=new Array(e);for(let i=e-1;i>=0;i--){t[i]=a[i][e]/a[i][i];for(let n=i-1;n>=0;n--)a[n][e]-=a[n][i]*t[i]}return t}function sm(a){return a*180/Math.PI}function tl(a){return a*Math.PI/180}function id(a,e){const t=a%e;return t*e<0?t+e:t}function jo(a,e,t){return a+t*(e-a)}function $p(a,e){const t=Math.pow(10,e);return Math.round(a*t)/t}function pL(a,e){return Math.round($p(a,e))}function Qg(a,e){return Math.floor($p(a,e))}function hh(a,e){return Math.ceil($p(a,e))}function gS(a,e,t){if(a>=e&&a<t)return a;const i=t-e;return((a-e)%i+i)%i+e}function fy(a,e,t){const i=t!==void 0?a.toFixed(t):""+a;let n=i.indexOf(".");return n=n===-1?i.length:n,n>e?i:new Array(1+e-n).join("0")+i}function fT(a,e){const t=(""+a).split("."),i=(""+e).split(".");for(let n=0;n<Math.max(t.length,i.length);n++){const s=parseInt(t[n]||"0",10),r=parseInt(i[n]||"0",10);if(s>r)return 1;if(r>s)return-1}return 0}function Dz(a,e){return a[0]+=+e[0],a[1]+=+e[1],a}function Lk(a,e){const t=a[0],i=a[1],n=e[0],s=e[1],r=n[0],l=n[1],c=s[0],h=s[1],g=c-r,b=h-l,v=g===0&&b===0?0:(g*(t-r)+b*(i-l))/(g*g+b*b||0);let C,S;return v<=0?(C=r,S=l):v>=1?(C=c,S=h):(C=r+v*g,S=l+v*b),[C,S]}function js(a,e){let t=!0;for(let i=a.length-1;i>=0;--i)if(a[i]!=e[i]){t=!1;break}return t}function yT(a,e){const t=Math.cos(e),i=Math.sin(e),n=a[0]*t-a[1]*i,s=a[1]*t+a[0]*i;return a[0]=n,a[1]=s,a}function Vz(a,e){return a[0]*=e,a[1]*=e,a}function Wp(a,e){const t=a[0]-e[0],i=a[1]-e[1];return t*t+i*i}function Z2(a,e){return Math.sqrt(Wp(a,e))}function Zz(a,e){return Wp(a,Lk(a,e))}function bT(a,e){if(e.canWrapX()){const t=fi(e.getExtent()),i=Rk(a,e,t);i&&(a[0]-=i*t)}return a}function Rk(a,e,t){const i=e.getExtent();let n=0;return e.canWrapX()&&(a[0]<i[0]||a[0]>i[2])&&(t=t||fi(i),n=Math.floor((a[0]-i[0])/t)),n}const Gp={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let zz=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Gp[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const Aw=zz,h1=6378137,$g=Math.PI*h1,Uz=[-$g,-$g,$g,$g],Xz=[-180,-85,180,85],av=h1*Math.log(Math.tan(Math.PI/2));class Mg extends Aw{constructor(e){super({code:e,units:"m",extent:Uz,global:!0,worldExtent:Xz,getPointResolution:function(t,i){return t/Math.cosh(i[1]/h1)}})}}const fL=[new Mg("EPSG:3857"),new Mg("EPSG:102100"),new Mg("EPSG:102113"),new Mg("EPSG:900913"),new Mg("http://www.opengis.net/def/crs/EPSG/0/3857"),new Mg("http://www.opengis.net/gml/srs/epsg.xml#3857")];function Hz(a,e,t,i){const n=a.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=a.slice():e=new Array(n));for(let s=0;s<n;s+=i){e[s]=$g*a[s]/180;let r=h1*Math.log(Math.tan(Math.PI*(+a[s+1]+90)/360));r>av?r=av:r<-av&&(r=-av),e[s+1]=r}return e}function Yz(a,e,t,i){const n=a.length;t=t>1?t:2,i=i??t,e===void 0&&(t>2?e=a.slice():e=new Array(n));for(let s=0;s<n;s+=i)e[s]=180*a[s]/$g,e[s+1]=360*Math.atan(Math.exp(a[s+1]/h1))/Math.PI-90;return e}const Kz=6378137,yL=[-180,-90,180,90],qz=Math.PI*Kz/180;class E_ extends Aw{constructor(e,t){super({code:e,units:"degrees",extent:yL,axisOrientation:t,global:!0,metersPerUnit:qz,worldExtent:yL})}}const bL=[new E_("CRS:84"),new E_("EPSG:4326","neu"),new E_("urn:ogc:def:crs:OGC:1.3:CRS84"),new E_("urn:ogc:def:crs:OGC:2:84"),new E_("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new E_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new E_("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let pS={};function a2(a){return pS[a]||pS[a.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function jz(a,e){pS[a]=e}function ef(a){for(const e in a)delete a[e]}function om(a){let e;for(e in a)return!1;return!e}let fp={};function lm(a,e,t){const i=a.getCode(),n=e.getCode();i in fp||(fp[i]={}),fp[i][n]=t}function i2(a,e){return a in fp&&e in fp[a]?fp[a][e]:null}const z2=.9996,Il=.00669438,Sw=Il*Il,Tw=Sw*Il,U_=Il/(1-Il),vL=Math.sqrt(1-Il),Op=(1-vL)/(1+vL),kk=Op*Op,vT=kk*Op,xT=vT*Op,Wk=xT*Op,Gk=1-Il/4-3*Sw/64-5*Tw/256,Jz=3*Il/8+3*Sw/32+45*Tw/1024,Qz=15*Sw/256+45*Tw/1024,$z=35*Tw/3072,eU=3/2*Op-27/32*vT+269/512*Wk,tU=21/16*kk-55/32*xT,aU=151/96*vT-417/128*Wk,iU=1097/512*xT,U2=6378137;function nU(a,e,t){const i=a-5e5,r=(t.north?e:e-1e7)/z2/(U2*Gk),l=r+eU*Math.sin(2*r)+tU*Math.sin(4*r)+aU*Math.sin(6*r)+iU*Math.sin(8*r),c=Math.sin(l),h=c*c,g=Math.cos(l),b=c/g,v=b*b,C=v*v,S=1-Il*h,L=Math.sqrt(1-Il*h),R=U2/L,G=(1-Il)/S,O=U_*g**2,V=O*O,B=i/(R*z2),z=B*B,j=z*B,re=j*B,ne=re*B,te=ne*B,le=l-b/G*(z/2-re/24*(5+3*v+10*O-4*V-9*U_))+te/720*(61+90*v+298*O+45*C-252*U_-3*V);let ue=(B-j/6*(1+2*v+O)+ne/120*(5-2*O+28*v-3*V+8*U_+24*C))/g;return ue=gS(ue+tl(Ok(t.number)),-Math.PI,Math.PI),[sm(ue),sm(le)]}const xL=-80,wL=84,rU=-180,sU=180;function oU(a,e,t){a=gS(a,rU,sU),e<xL?e=xL:e>wL&&(e=wL);const i=tl(e),n=Math.sin(i),s=Math.cos(i),r=n/s,l=r*r,c=l*l,h=tl(a),g=Ok(t.number),b=tl(g),v=U2/Math.sqrt(1-Il*n**2),C=U_*s**2,S=s*gS(h-b,-Math.PI,Math.PI),L=S*S,R=L*S,G=R*S,O=G*S,V=O*S,B=U2*(Gk*i-Jz*Math.sin(2*i)+Qz*Math.sin(4*i)-$z*Math.sin(6*i)),z=z2*v*(S+R/6*(1-l+C)+O/120*(5-18*l+c+72*C-58*U_))+5e5;let j=z2*(B+v*r*(L/2+G/24*(5-l+9*C+4*C**2)+V/720*(61-58*l+c+600*C-330*U_)));return t.north||(j+=1e7),[z,j]}function Ok(a){return(a-1)*6-180+3}const lU=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Pk(a){let e=0;for(const n of lU){const s=a.match(n);if(s){e=parseInt(s[1]);break}}if(!e)return null;let t=0,i=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(i=!0,t=e-32600),t?{number:t,north:i}:null}function IL(a,e){return function(t,i,n,s){const r=t.length;n=n>1?n:2,s=s??n,i||(n>2?i=t.slice():i=new Array(r));for(let l=0;l<r;l+=s){const c=t[l],h=t[l+1],g=a(c,h,e);i[l]=g[0],i[l+1]=g[1]}return i}}function uU(a){return Pk(a)?new Aw({code:a,units:"m"}):null}function cU(a){const e=Pk(a.getCode());return e?{forward:IL(oU,e),inverse:IL(nU,e)}:null}const Bk=63710088e-1;function X2(a,e,t){t=t||Bk;const i=tl(a[1]),n=tl(e[1]),s=(n-i)/2,r=tl(e[0]-a[0])/2,l=Math.sin(s)*Math.sin(s)+Math.sin(r)*Math.sin(r)*Math.cos(i)*Math.cos(n);return 2*t*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))}function iv(a,e){let t=0;const i=a.length;let n=a[i-1][0],s=a[i-1][1];for(let r=0;r<i;r++){const l=a[r][0],c=a[r][1];t+=tl(l-n)*(2+Math.sin(tl(s))+Math.sin(tl(c))),n=l,s=c}return t*e*e/2}function Fk(a,e){e=e||{};const t=e.radius||Bk,i=e.projection||"EPSG:3857",n=a.getType();n!=="GeometryCollection"&&(a=a.clone().transform(i,"EPSG:4326"));let s=0,r,l,c,h,g,b;switch(n){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(r=a.getCoordinates(),s=Math.abs(iv(r[0],t)),c=1,h=r.length;c<h;++c)s-=Math.abs(iv(r[c],t));break}case"MultiPolygon":{for(r=a.getCoordinates(),c=0,h=r.length;c<h;++c)for(l=r[c],s+=Math.abs(iv(l[0],t)),g=1,b=l.length;g<b;++g)s-=Math.abs(iv(l[g],t));break}case"GeometryCollection":{const v=a.getGeometries();for(c=0,h=v.length;c<h;++c)s+=Fk(v[c],e);break}default:throw new Error("Unsupported geometry type: "+n)}return s}const dU=[cU],hU=[uU];let fS=!0;function Nk(a){fS=!(a===void 0?!0:a)}function wT(a,e){if(e!==void 0){for(let t=0,i=a.length;t<i;++t)e[t]=a[t];e=e}else e=a.slice();return e}function H2(a){jz(a.getCode(),a),lm(a,a,wT)}function _U(a){a.forEach(H2)}function Li(a){if(typeof a!="string")return a;const e=a2(a);if(e)return e;for(const t of hU){const i=t(a);if(i)return i}return null}function yS(a,e,t,i){a=Li(a);let n;const s=a.getPointResolutionFunc();if(s){if(n=s(e,t),i&&i!==a.getUnits()){const r=a.getMetersPerUnit();r&&(n=n*r/Gp[i])}}else{const r=a.getUnits();if(r=="degrees"&&!i||i=="degrees")n=e;else{const l=Ew(a,Li("EPSG:4326"));if(!l&&r!=="degrees")n=e*a.getMetersPerUnit();else{let h=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];h=l(h,h,2);const g=X2(h.slice(0,2),h.slice(2,4)),b=X2(h.slice(4,6),h.slice(6,8));n=(g+b)/2}const c=i?Gp[i]:a.getMetersPerUnit();c!==void 0&&(n/=c)}}return n}function bS(a){_U(a),a.forEach(function(e){a.forEach(function(t){e!==t&&lm(e,t,wT)})})}function mU(a,e,t,i){a.forEach(function(n){e.forEach(function(s){lm(n,s,t),lm(s,n,i)})})}function IT(a,e){return a?typeof a=="string"?Li(a):a:Li(e)}function vS(a){return function(e,t,i,n){const s=e.length;i=i!==void 0?i:2,n=n??i,t=t!==void 0?t:new Array(s);for(let r=0;r<s;r+=n){const l=a(e.slice(r,r+i)),c=l.length;for(let h=0,g=n;h<g;++h)t[r+h]=h>=c?e[r+h]:l[h]}return t}}function gU(a,e,t,i){const n=Li(a),s=Li(e);lm(n,s,vS(t)),lm(s,n,vS(i))}function pU(a,e){return Nk(),Ns(a,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function Pp(a,e){const t=Ns(a,e!==void 0?e:"EPSG:3857","EPSG:4326"),i=t[0];return(i<-180||i>180)&&(t[0]=id(i+180,360)-180),t}function yp(a,e){if(a===e)return!0;const t=a.getUnits()===e.getUnits();return(a.getCode()===e.getCode()||Ew(a,e)===wT)&&t}function Ew(a,e){const t=a.getCode(),i=e.getCode();let n=i2(t,i);if(n)return n;let s=null,r=null;for(const c of dU)s||(s=c(a)),r||(r=c(e));if(!s&&!r)return null;const l="EPSG:4326";if(r)if(s)n=IC(s.inverse,r.forward);else{const c=i2(t,l);c&&(n=IC(c,r.forward))}else{const c=i2(l,i);c&&(n=IC(s.inverse,c))}return n&&(H2(a),H2(e),lm(a,e,n)),n}function IC(a,e){return function(t,i,n,s){return i=a(t,i,n,s),e(i,i,n,s)}}function um(a,e){const t=Li(a),i=Li(e);return Ew(t,i)}function Ns(a,e,t){const i=um(e,t);if(!i){const n=Li(e).getCode(),s=Li(t).getCode();throw new Error(`No transform available between ${n} and ${s}`)}return i(a,void 0,a.length)}function Dk(a,e,t,i){const n=um(e,t);return Bz(a,n,void 0,i)}let fU=null;function yU(){return fU}function cm(a,e){return a}function jn(a,e){return fS&&!js(a,[0,0])&&a[0]>=-180&&a[0]<=180&&a[1]>=-90&&a[1]<=90&&(fS=!1,Ck("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),a}function Mw(a,e){return a}function yl(a,e){return a}function CL(a,e,t){return function(i){let n,s;if(a.canWrapX()){const r=a.getExtent(),l=fi(r);i=i.slice(0),s=Rk(i,a,l),s&&(i[0]=i[0]-s*l),i[0]=Sn(i[0],r[0],r[2]),i[1]=Sn(i[1],r[1],r[3]),n=t(i)}else n=t(i);return s&&e.canWrapX()&&(n[0]+=s*fi(e.getExtent())),n}}function bU(){bS(fL),bS(bL),mU(bL,fL,Hz,Yz)}bU();const Rr={ADD:"add",REMOVE:"remove"},dm={PROPERTYCHANGE:"propertychange"},Ba={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class vU{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const Lw=vU;function xU(a,e,t){let i,n;t=t||ju;let s=0,r=a.length,l=!1;for(;s<r;)i=s+(r-s>>1),n=+t(a[i],e),n<0?s=i+1:(r=i,l=!n);return l?s:~s}function ju(a,e){return a>e?1:a<e?-1:0}function wU(a,e){return a<e?1:a>e?-1:0}function Rw(a,e,t){if(a[0]<=e)return 0;const i=a.length;if(e<=a[i-1])return i-1;if(typeof t=="function"){for(let n=1;n<i;++n){const s=a[n];if(s===e)return n;if(s<e)return t(e,a[n-1],s)>0?n-1:n}return i-1}if(t>0){for(let n=1;n<i;++n)if(a[n]<e)return n-1;return i-1}if(t<0){for(let n=1;n<i;++n)if(a[n]<=e)return n;return i-1}for(let n=1;n<i;++n){if(a[n]==e)return n;if(a[n]<e)return a[n-1]-e<e-a[n]?n-1:n}return i-1}function IU(a,e,t){for(;e<t;){const i=a[e];a[e]=a[t],a[t]=i,++e,--t}}function Vi(a,e){const t=Array.isArray(e)?e:[e],i=t.length;for(let n=0;n<i;n++)a[a.length]=t[n]}function vd(a,e){const t=a.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(a[i]!==e[i])return!1;return!0}function CU(a,e,t){const i=e||ju;return a.every(function(n,s){if(s===0)return!0;const r=i(a[s-1],n);return!(r>0||t&&r===0)})}function Mh(){return!0}function tf(){return!1}function P0(){}function Vk(a){let e,t,i;return function(){const n=Array.prototype.slice.call(arguments);return(!t||this!==i||!vd(n,t))&&(i=this,t=n,e=a.apply(this,arguments)),e}}function Zk(a){function e(){let t;try{t=a()}catch(i){return Promise.reject(i)}return t instanceof Promise?t:Promise.resolve(t)}return e()}class AU{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const sl=AU;class SU extends Lw{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const i=this.listeners_||(this.listeners_={}),n=i[e]||(i[e]=[]);n.includes(t)||n.push(t)}dispatchEvent(e){const t=typeof e=="string",i=t?e:e.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const s=t?new sl(e):e;s.target||(s.target=this.eventTarget_||this);const r=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});i in r||(r[i]=0,l[i]=0),++r[i];let c;for(let h=0,g=n.length;h<g;++h)if("handleEvent"in n[h]?c=n[h].handleEvent(s):c=n[h].call(this,s),c===!1||s.propagationStopped){c=!1;break}if(--r[i]===0){let h=l[i];for(delete l[i];h--;)this.removeEventListener(i,P0);delete r[i]}return c}disposeInternal(){this.listeners_&&ef(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const n=i.indexOf(t);n!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[n]=P0,++this.pendingRemovals_[e]):(i.splice(n,1),i.length===0&&delete this.listeners_[e]))}}const _1=SU;function La(a,e,t,i,n){if(n){const r=t;t=function(l){return a.removeEventListener(e,t),r.call(i??this,l)}}else i&&i!==a&&(t=t.bind(i));const s={target:a,type:e,listener:t};return a.addEventListener(e,t),s}function Y2(a,e,t,i){return La(a,e,t,i,!0)}function dn(a){a&&a.target&&(a.target.removeEventListener(a.type,a.listener),ef(a))}class kw extends _1{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ba.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const i=e.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=La(this,e[s],t);return n}return La(this,e,t)}onceInternal(e,t){let i;if(Array.isArray(e)){const n=e.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=Y2(this,e[s],t)}else i=Y2(this,e,t);return t.ol_key=i,i}unInternal(e,t){const i=t.ol_key;if(i)CT(i);else if(Array.isArray(e))for(let n=0,s=e.length;n<s;++n)this.removeEventListener(e[n],t);else this.removeEventListener(e,t)}}kw.prototype.on;kw.prototype.once;kw.prototype.un;function CT(a){if(Array.isArray(a))for(let e=0,t=a.length;e<t;++e)dn(a[e]);else dn(a)}const zk=kw;function Aa(){throw new Error("Unimplemented abstract method.")}let TU=0;function Ga(a){return a.ol_uid||(a.ol_uid=String(++TU))}const SCe="10.5.0";class AL extends sl{constructor(e,t,i){super(e),this.key=t,this.oldValue=i}}class EU extends zk{constructor(e){super(),this.on,this.once,this.un,Ga(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new AL(i,e,t)),i=dm.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new AL(i,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,i){const n=this.values_||(this.values_={});if(i)n[e]=t;else{const s=n[e];n[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const i in e)this.set(i,e[i],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],om(this.values_)&&(this.values_=null),t||this.notify(e,i)}}}const lu=EU,SL={LENGTH:"length"};class nv extends sl{constructor(e,t,i){super(e),this.element=t,this.index=i}}class MU extends lu{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,i=e.length;t<i;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)e(t[i],i,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(SL.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new nv(Rr.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let i=0,n=t.length;i<n;++i)if(t[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new nv(Rr.REMOVE,t,e)),t}setAt(e,t){const i=this.getLength();if(e>=i){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const n=this.array_[e];this.array_[e]=t,this.dispatchEvent(new nv(Rr.REMOVE,n,e)),this.dispatchEvent(new nv(Rr.ADD,t,e))}updateLength_(){this.set(SL.LENGTH,this.array_.length)}assertUnique_(e,t){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===e&&i!==t)throw new Error("Duplicate item added to a unique collection")}}const $o=MU;class LU extends sl{constructor(e,t,i){super(e),this.map=t,this.frameState=i!==void 0?i:null}}const zg=LU;class RU extends zg{constructor(e,t,i,n,s,r){super(e,t,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=r}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const Yc=RU,Ti={SINGLECLICK:"singleclick",CLICK:Ba.CLICK,DBLCLICK:Ba.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},hm=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",kU=hm.includes("safari")&&!hm.includes("chrom");kU&&(hm.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(hm));const WU=hm.includes("webkit")&&!hm.includes("edge"),AT=hm.includes("macintosh"),Uk=typeof devicePixelRatio<"u"?devicePixelRatio:1,Xk=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,ST=typeof Image<"u"&&Image.prototype.decode,Hk=typeof createImageBitmap=="function",Yk=function(){let a=!1;try{const e=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return a}(),xS={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class GU extends _1{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=La(i,xS.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=La(i,xS.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ba.TOUCHMOVE,this.boundHandleTouchMove_,Yk?{passive:!1}:!1)}emulateClick_(e){let t=new Yc(Ti.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Yc(Ti.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new Yc(Ti.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const t=e,i=t.pointerId;if(t.type==Ti.POINTERUP||t.type==Ti.POINTERCANCEL){delete this.trackedTouches_[i];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==t.target){delete this.trackedTouches_[n];break}}else(t.type==Ti.POINTERDOWN||t.type==Ti.POINTERMOVE)&&(this.trackedTouches_[i]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Yc(Ti.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(dn),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Yc(Ti.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(La(i,Ti.POINTERMOVE,this.handlePointerMove_,this),La(i,Ti.POINTERUP,this.handlePointerUp_,this),La(this.element_,Ti.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(La(this.element_.getRootNode(),Ti.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Yc(Ti.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Yc(Ti.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(dn(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ba.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(dn(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(dn),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const OU=GU,Kc={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Qr={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Ca={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ji(a,e){if(!a)throw new Error(e)}const K2=1/0;class PU{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,ef(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,i=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(e){ji(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=K2?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,i=this.priorities_,n=t.length,s=t[e],r=i[e],l=e;for(;e<n>>1;){const c=this.getLeftChildIndex_(e),h=this.getRightChildIndex_(e),g=h<n&&i[h]<i[c]?h:c;t[e]=t[g],i[e]=i[g],e=g}t[e]=s,i[e]=r,this.siftDown_(l,e)}siftDown_(e,t){const i=this.elements_,n=this.priorities_,s=i[t],r=n[t];for(;t>e;){const l=this.getParentIndex_(t);if(n[l]>r)i[t]=i[l],n[t]=n[l],t=l;else break}i[t]=s,n[t]=r}reprioritize(){const e=this.priorityFunction_,t=this.elements_,i=this.priorities_;let n=0;const s=t.length;let r,l,c;for(l=0;l<s;++l)r=t[l],c=e(r),c==K2?delete this.queuedElements_[this.keyFunction_(r)]:(i[n]=c,t[n++]=r);t.length=n,i.length=n,this.heapify_()}}const BU=PU;class FU extends BU{constructor(e,t){super(i=>e.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(Ba.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,i=t.getState();if(i===Ca.LOADED||i===Ca.ERROR||i===Ca.EMPTY){i!==Ca.ERROR&&t.removeEventListener(Ba.CHANGE,this.boundHandleTileChange_);const n=t.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let i=0;for(;this.tilesLoading_<e&&i<t&&this.getCount()>0;){const n=this.dequeue()[0],s=n.getKey();n.getState()===Ca.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,n.load())}}}const NU=FU;function DU(a,e,t,i,n){if(!a||!(t in a.wantedTiles)||!a.wantedTiles[t][e.getKey()])return K2;const s=a.viewState.center,r=i[0]-s[0],l=i[1]-s[1];return 65536*Math.log(n)+Math.sqrt(r*r+l*l)/n}const Vn={ANIMATING:0,INTERACTING:1},Nl={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function TL(a,e,t){return function(i,n,s,r,l){if(!i)return;if(!n&&!e)return i;const c=e?0:s[0]*n,h=e?0:s[1]*n,g=l?l[0]:0,b=l?l[1]:0;let v=a[0]+c/2+g,C=a[2]-c/2+g,S=a[1]+h/2+b,L=a[3]-h/2+b;v>C&&(v=(C+v)/2,C=v),S>L&&(S=(L+S)/2,L=S);let R=Sn(i[0],v,C),G=Sn(i[1],S,L);if(r&&t&&n){const O=30*n;R+=-O*Math.log(1+Math.max(0,v-i[0])/O)+O*Math.log(1+Math.max(0,i[0]-C)/O),G+=-O*Math.log(1+Math.max(0,S-i[1])/O)+O*Math.log(1+Math.max(0,i[1]-L)/O)}return[R,G]}}function VU(a){return a}function Kk(a){return Math.pow(a,3)}function af(a){return 1-Kk(1-a)}function ZU(a){return 3*a*a-2*a*a*a}function zU(a){return a}const qk=new Array(6);function Wo(){return[1,0,0,1,0,0]}function EL(a){return ET(a,1,0,0,1,0,0)}function TT(a,e){const t=a[0],i=a[1],n=a[2],s=a[3],r=a[4],l=a[5],c=e[0],h=e[1],g=e[2],b=e[3],v=e[4],C=e[5];return a[0]=t*c+n*h,a[1]=i*c+s*h,a[2]=t*g+n*b,a[3]=i*g+s*b,a[4]=t*v+n*C+r,a[5]=i*v+s*C+l,a}function ET(a,e,t,i,n,s,r){return a[0]=e,a[1]=t,a[2]=i,a[3]=n,a[4]=s,a[5]=r,a}function UU(a,e){return a[0]=e[0],a[1]=e[1],a[2]=e[2],a[3]=e[3],a[4]=e[4],a[5]=e[5],a}function br(a,e){const t=e[0],i=e[1];return e[0]=a[0]*t+a[2]*i+a[4],e[1]=a[1]*t+a[3]*i+a[5],e}function n2(a,e,t){return TT(a,ET(qk,e,0,0,t,0,0))}function XU(a,e,t){return TT(a,ET(qk,1,0,0,1,e,t))}function nu(a,e,t,i,n,s,r,l){const c=Math.sin(s),h=Math.cos(s);return a[0]=i*h,a[1]=n*c,a[2]=-i*c,a[3]=n*h,a[4]=r*i*h-l*i*c+e,a[5]=r*n*c+l*n*h+t,a}function jk(a,e){const t=HU(e);ji(t!==0,"Transformation matrix cannot be inverted");const i=e[0],n=e[1],s=e[2],r=e[3],l=e[4],c=e[5];return a[0]=r/t,a[1]=-n/t,a[2]=-s/t,a[3]=i/t,a[4]=(s*c-r*l)/t,a[5]=-(i*c-n*l)/t,a}function HU(a){return a[0]*a[3]-a[1]*a[2]}const YU=[1e5,1e5,1e5,1e5,2,2];function KU(a){return"matrix("+a.join(", ")+")"}function ML(a){return a.substring(7,a.length-1).split(",").map(parseFloat)}function qU(a,e){const t=ML(a),i=ML(e);for(let n=0;n<6;++n)if(Math.round((t[n]-i[n])*YU[n])!==0)return!1;return!0}function nd(a,e,t,i,n,s,r){s=s||[],r=r||2;let l=0;for(let c=e;c<t;c+=i){const h=a[c],g=a[c+1];s[l++]=n[0]*h+n[2]*g+n[4],s[l++]=n[1]*h+n[3]*g+n[5];for(let b=2;b<r;b++)s[l++]=a[c+b]}return s&&s.length!=l&&(s.length=l),s}function MT(a,e,t,i,n,s,r){r=r||[];const l=Math.cos(n),c=Math.sin(n),h=s[0],g=s[1];let b=0;for(let v=e;v<t;v+=i){const C=a[v]-h,S=a[v+1]-g;r[b++]=h+C*l-S*c,r[b++]=g+C*c+S*l;for(let L=v+2;L<v+i;++L)r[b++]=a[L]}return r&&r.length!=b&&(r.length=b),r}function jU(a,e,t,i,n,s,r,l){l=l||[];const c=r[0],h=r[1];let g=0;for(let b=e;b<t;b+=i){const v=a[b]-c,C=a[b+1]-h;l[g++]=c+n*v,l[g++]=h+s*C;for(let S=b+2;S<b+i;++S)l[g++]=a[S]}return l&&l.length!=g&&(l.length=g),l}function JU(a,e,t,i,n,s,r){r=r||[];let l=0;for(let c=e;c<t;c+=i){r[l++]=a[c]+n,r[l++]=a[c+1]+s;for(let h=c+2;h<c+i;++h)r[l++]=a[h]}return r&&r.length!=l&&(r.length=l),r}const LL=Wo(),QU=[NaN,NaN];class $U extends lu{constructor(){super(),this.extent_=nl(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Vk((e,t,i)=>{if(!i)return this.getSimplifiedGeometry(t);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return Aa()}closestPointXY(e,t,i,n){return Aa()}containsXY(e,t){return this.closestPointXY(e,t,QU,Number.MIN_VALUE)===0}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return Aa()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Qp(t),this.extentRevision_=this.getRevision()}return Oz(this.extent_,e)}rotate(e,t){Aa()}scale(e,t,i){Aa()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return Aa()}getType(){return Aa()}applyTransform(e){Aa()}intersectsExtent(e){return Aa()}translate(e,t){Aa()}transform(e,t){const i=Li(e),n=i.getUnits()=="tile-pixels"?function(s,r,l){const c=i.getExtent(),h=i.getWorldExtent(),g=ur(h)/ur(c);nu(LL,h[0],h[3],g,-g,0,0,0);const b=nd(s,0,s.length,l,LL,r),v=um(i,t);return v?v(b,b,l):b}:um(i,t);return this.applyTransform(n),this}}const Jk=$U;class eX extends Jk{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return mT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return Aa()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=q2(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){Aa()}setLayout(e,t,i){let n;if(e)n=q2(e);else{for(let s=0;s<i;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}n=t.length,e=wm(n)}this.layout=e,this.stride=n}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();MT(i,0,i.length,n,e,t,i),this.changed()}}scale(e,t,i){t===void 0&&(t=e),i||(i=iu(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();jU(n,0,n.length,s,e,t,i,n),this.changed()}}translate(e,t){const i=this.getFlatCoordinates();if(i){const n=this.getStride();JU(i,0,i.length,n,e,t,i),this.changed()}}}function wm(a){let e;return a==2?e="XY":a==3?e="XYZ":a==4&&(e="XYZM"),e}function q2(a){let e;return a=="XY"?e=2:a=="XYZ"||a=="XYM"?e=3:a=="XYZM"&&(e=4),e}function tX(a,e,t){const i=a.getFlatCoordinates();if(!i)return null;const n=a.getStride();return nd(i,0,i.length,n,e,t)}const Nh=eX;function Qk(a,e,t,i){let n=0;const s=a[t-i],r=a[t-i+1];let l=0,c=0;for(;e<t;e+=i){const h=a[e]-s,g=a[e+1]-r;n+=c*h-l*g,l=h,c=g}return n/2}function $k(a,e,t,i){let n=0;for(let s=0,r=t.length;s<r;++s){const l=t[s];n+=Qk(a,e,l,i),e=l}return n}function aX(a,e,t,i){let n=0;for(let s=0,r=t.length;s<r;++s){const l=t[s];n+=$k(a,e,l,i),e=l[l.length-1]}return n}function RL(a,e,t,i,n,s,r){const l=a[e],c=a[e+1],h=a[t]-l,g=a[t+1]-c;let b;if(h===0&&g===0)b=e;else{const v=((n-l)*h+(s-c)*g)/(h*h+g*g);if(v>1)b=t;else if(v>0){for(let C=0;C<i;++C)r[C]=jo(a[e+C],a[t+C],v);r.length=i;return}else b=e}for(let v=0;v<i;++v)r[v]=a[b+v];r.length=i}function LT(a,e,t,i,n){let s=a[e],r=a[e+1];for(e+=i;e<t;e+=i){const l=a[e],c=a[e+1],h=ad(s,r,l,c);h>n&&(n=h),s=l,r=c}return n}function RT(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];n=LT(a,e,l,i,n),e=l}return n}function iX(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];n=RT(a,e,l,i,n),e=l[l.length-1]}return n}function kT(a,e,t,i,n,s,r,l,c,h,g){if(e==t)return h;let b,v;if(n===0){if(v=ad(r,l,a[e],a[e+1]),v<h){for(b=0;b<i;++b)c[b]=a[e+b];return c.length=i,v}return h}g=g||[NaN,NaN];let C=e+i;for(;C<t;)if(RL(a,C-i,C,i,r,l,g),v=ad(r,l,g[0],g[1]),v<h){for(h=v,b=0;b<i;++b)c[b]=g[b];c.length=i,C+=i}else C+=i*Math.max((Math.sqrt(v)-Math.sqrt(h))/n|0,1);if(s&&(RL(a,t-i,e,i,r,l,g),v=ad(r,l,g[0],g[1]),v<h)){for(h=v,b=0;b<i;++b)c[b]=g[b];c.length=i}return h}function WT(a,e,t,i,n,s,r,l,c,h,g){g=g||[NaN,NaN];for(let b=0,v=t.length;b<v;++b){const C=t[b];h=kT(a,e,C,i,n,s,r,l,c,h,g),e=C}return h}function nX(a,e,t,i,n,s,r,l,c,h,g){g=g||[NaN,NaN];for(let b=0,v=t.length;b<v;++b){const C=t[b];h=WT(a,e,C,i,n,s,r,l,c,h,g),e=C[C.length-1]}return h}function e7(a,e,t,i){for(let n=0,s=t.length;n<s;++n)a[e++]=t[n];return e}function Ww(a,e,t,i){for(let n=0,s=t.length;n<s;++n){const r=t[n];for(let l=0;l<i;++l)a[e++]=r[l]}return e}function m1(a,e,t,i,n){n=n||[];let s=0;for(let r=0,l=t.length;r<l;++r){const c=Ww(a,e,t[r],i);n[s++]=c,e=c}return n.length=s,n}function t7(a,e,t,i,n){n=n||[];let s=0;for(let r=0,l=t.length;r<l;++r){const c=m1(a,e,t[r],i,n[s]);c.length===0&&(c[0]=e),n[s++]=c,e=c[c.length-1]}return n.length=s,n}function _h(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=e;r<t;r+=i)n[s++]=a.slice(r,r+i);return n.length=s,n}function B0(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=0,l=t.length;r<l;++r){const c=t[r];n[s++]=_h(a,e,c,i,n[s]),e=c}return n.length=s,n}function wS(a,e,t,i,n){n=n!==void 0?n:[];let s=0;for(let r=0,l=t.length;r<l;++r){const c=t[r];n[s++]=c.length===1&&c[0]===e?[]:B0(a,e,c,i,n[s]),e=c[c.length-1]}return n.length=s,n}function Gw(a,e,t,i,n,s,r){const l=(t-e)/i;if(l<3){for(;e<t;e+=i)s[r++]=a[e],s[r++]=a[e+1];return r}const c=new Array(l);c[0]=1,c[l-1]=1;const h=[e,t-i];let g=0;for(;h.length>0;){const b=h.pop(),v=h.pop();let C=0;const S=a[v],L=a[v+1],R=a[b],G=a[b+1];for(let O=v+i;O<b;O+=i){const V=a[O],B=a[O+1],z=Fz(V,B,S,L,R,G);z>C&&(g=O,C=z)}C>n&&(c[(g-e)/i]=1,v+i<g&&h.push(v,g),g+i<b&&h.push(g,b))}for(let b=0;b<l;++b)c[b]&&(s[r++]=a[e+b*i],s[r++]=a[e+b*i+1]);return r}function a7(a,e,t,i,n,s,r,l){for(let c=0,h=t.length;c<h;++c){const g=t[c];r=Gw(a,e,g,i,n,s,r),l.push(r),e=g}return r}function F_(a,e){return e*Math.round(a/e)}function rX(a,e,t,i,n,s,r){if(e==t)return r;let l=F_(a[e],n),c=F_(a[e+1],n);e+=i,s[r++]=l,s[r++]=c;let h,g;do if(h=F_(a[e],n),g=F_(a[e+1],n),e+=i,e==t)return s[r++]=h,s[r++]=g,r;while(h==l&&g==c);for(;e<t;){const b=F_(a[e],n),v=F_(a[e+1],n);if(e+=i,b==h&&v==g)continue;const C=h-l,S=g-c,L=b-l,R=v-c;if(C*R==S*L&&(C<0&&L<C||C==L||C>0&&L>C)&&(S<0&&R<S||S==R||S>0&&R>S)){h=b,g=v;continue}s[r++]=h,s[r++]=g,l=h,c=g,h=b,g=v}return s[r++]=h,s[r++]=g,r}function GT(a,e,t,i,n,s,r,l){for(let c=0,h=t.length;c<h;++c){const g=t[c];r=rX(a,e,g,i,n,s,r),l.push(r),e=g}return r}function sX(a,e,t,i,n,s,r,l){for(let c=0,h=t.length;c<h;++c){const g=t[c],b=[];r=GT(a,e,g,i,n,s,r,b),l.push(b),e=g[g.length-1]}return r}class j2 extends Nh{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new j2(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,i,n){return n<vm(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(LT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,i,n))}getArea(){return Qk(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return _h(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=Gw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new j2(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ww(this.flatCoordinates,0,e,this.stride),this.changed()}}const kL=j2;let oX=class i7 extends Nh{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new i7(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const s=this.flatCoordinates,r=ad(e,t,s[0],s[1]);if(r<n){const l=this.stride;for(let c=0;c<l;++c)i[c]=s[c];return i.length=l,r}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return i0(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return _T(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=e7(this.flatCoordinates,0,e,this.stride),this.changed()}};const Zr=oX;function lX(a,e,t,i,n){return!pT(n,function(r){return!X_(a,e,t,i,r[0],r[1])})}function X_(a,e,t,i,n,s){let r=0,l=a[t-i],c=a[t-i+1];for(;e<t;e+=i){const h=a[e],g=a[e+1];c<=s?g>s&&(h-l)*(s-c)-(n-l)*(g-c)>0&&r++:g<=s&&(h-l)*(s-c)-(n-l)*(g-c)<0&&r--,l=h,c=g}return r!==0}function OT(a,e,t,i,n,s){if(t.length===0||!X_(a,e,t[0],i,n,s))return!1;for(let r=1,l=t.length;r<l;++r)if(X_(a,t[r-1],t[r],i,n,s))return!1;return!0}function uX(a,e,t,i,n,s){if(t.length===0)return!1;for(let r=0,l=t.length;r<l;++r){const c=t[r];if(OT(a,e,c,i,n,s))return!0;e=c[c.length-1]}return!1}function PT(a,e,t,i,n,s,r){let l,c,h,g,b,v,C;const S=n[s+1],L=[];for(let O=0,V=t.length;O<V;++O){const B=t[O];for(g=a[B-i],v=a[B-i+1],l=e;l<B;l+=i)b=a[l],C=a[l+1],(S<=v&&C<=S||v<=S&&S<=C)&&(h=(S-v)/(C-v)*(b-g)+g,L.push(h)),g=b,v=C}let R=NaN,G=-1/0;for(L.sort(ju),g=L[0],l=1,c=L.length;l<c;++l){b=L[l];const O=Math.abs(b-g);O>G&&(h=(g+b)/2,OT(a,e,t,i,h,S)&&(R=h,G=O)),g=b}return isNaN(R)&&(R=n[s]),r?(r.push(R,S,G),r):[R,S,G]}function n7(a,e,t,i,n){let s=[];for(let r=0,l=t.length;r<l;++r){const c=t[r];s=PT(a,e,c,i,n,2*r,s),e=c[c.length-1]}return s}function r7(a,e,t,i,n){let s;for(e+=i;e<t;e+=i)if(s=n(a.slice(e-i,e),a.slice(e,e+i)),s)return s;return!1}function Ow(a,e,t,i,n,s){return s=s??Sk(nl(),a,e,t,i),xr(n,s)?s[0]>=n[0]&&s[2]<=n[2]||s[1]>=n[1]&&s[3]<=n[3]?!0:r7(a,e,t,i,function(r,l){return Pz(n,r,l)}):!1}function cX(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){if(Ow(a,e,t[s],i,n))return!0;e=t[s]}return!1}function s7(a,e,t,i,n){return!!(Ow(a,e,t,i,n)||X_(a,e,t,i,n[0],n[1])||X_(a,e,t,i,n[0],n[3])||X_(a,e,t,i,n[2],n[1])||X_(a,e,t,i,n[2],n[3]))}function o7(a,e,t,i,n){if(!s7(a,e,t[0],i,n))return!1;if(t.length===1)return!0;for(let s=1,r=t.length;s<r;++s)if(lX(a,t[s-1],t[s],i,n)&&!Ow(a,t[s-1],t[s],i,n))return!1;return!0}function dX(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];if(o7(a,e,l,i,n))return!0;e=l[l.length-1]}return!1}function hX(a,e,t,i){for(;e<t-i;){for(let n=0;n<i;++n){const s=a[e+n];a[e+n]=a[t-i+n],a[t-i+n]=s}e+=i,t-=i}}function BT(a,e,t,i){let n=0,s=a[t-i],r=a[t-i+1];for(;e<t;e+=i){const l=a[e],c=a[e+1];n+=(l-s)*(c+r),s=l,r=c}return n===0?void 0:n>0}function FT(a,e,t,i,n){n=n!==void 0?n:!1;for(let s=0,r=t.length;s<r;++s){const l=t[s],c=BT(a,e,l,i);if(s===0){if(n&&c||!n&&!c)return!1}else if(n&&!c||!n&&c)return!1;e=l}return!0}function l7(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s){const l=t[s];if(!FT(a,e,l,i,n))return!1;l.length&&(e=l[l.length-1])}return!0}function J2(a,e,t,i,n){n=n!==void 0?n:!1;for(let s=0,r=t.length;s<r;++s){const l=t[s],c=BT(a,e,l,i);(s===0?n&&c||!n&&!c:n&&!c||!n&&c)&&hX(a,e,l,i),e=l}return e}function IS(a,e,t,i,n){for(let s=0,r=t.length;s<r;++s)e=J2(a,e,t[s],i,n);return e}function _X(a,e){const t=[];let i=0,n=0,s;for(let r=0,l=e.length;r<l;++r){const c=e[r],h=BT(a,i,c,2);if(s===void 0&&(s=h),h===s)t.push(e.slice(n,r+1));else{if(t.length===0)continue;t[t.length-1].push(e[n])}n=r+1,i=c}return t}class Bp extends Nh{constructor(e,t,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&i?(this.setFlatCoordinates(t,e),this.ends_=i):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?Vi(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Bp(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<vm(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(RT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),WT(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return OT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return $k(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),J2(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,B0(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=iu(this.getExtent());this.flatInteriorPoint_=PT(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Zr(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new kL(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let r=0,l=i.length;r<l;++r){const c=i[r],h=new kL(t.slice(s,c),e);n.push(h),s=c}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;FT(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=J2(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=GT(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,i),new Bp(t,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return o7(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=m1(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const nc=Bp;function CS(a){if(xm(a))throw new Error("Cannot create polygon from empty extent");const e=a[0],t=a[1],i=a[2],n=a[3],s=[e,t,e,n,i,n,i,t,e,t];return new Bp(s,"XY",[s.length])}function u7(a,e,t){e=e||32;const i=a.getStride(),n=a.getLayout(),s=a.getCenter(),r=i*(e+1),l=new Array(r);for(let g=0;g<r;g+=i){l[g]=0,l[g+1]=0;for(let b=2;b<i;b++)l[g+b]=s[b]}const c=[l.length],h=new Bp(l,n,c);return mX(h,s,a.getRadius(),t),h}function mX(a,e,t,i){const n=a.getFlatCoordinates(),s=a.getStride(),r=n.length/s-1,l=i||0;for(let c=0;c<=r;++c){const h=c*s,g=l+id(c,r)*2*Math.PI/r;n[h]=e[0]+t*Math.cos(g),n[h+1]=e[1]+t*Math.sin(g)}a.changed()}function NT(a,e,t,i){const n=fi(e)/t[0],s=ur(e)/t[1];return i?Math.min(a,Math.max(n,s)):Math.min(a,Math.min(n,s))}function DT(a,e,t){let i=Math.min(a,e);const n=50;return i*=Math.log(1+n*Math.max(0,a/e-1))/n+1,t&&(i=Math.max(i,t),i/=Math.log(1+n*Math.max(0,t/a-1))/n+1),Sn(i,t/2,e*2)}function gX(a,e,t,i){return e=e!==void 0?e:!0,function(n,s,r,l){if(n!==void 0){const c=a[0],h=a[a.length-1],g=t?NT(c,t,r,i):c;if(l)return e?DT(n,g,h):Sn(n,h,g);const b=Math.min(g,n),v=Math.floor(Rw(a,b,s));return a[v]>g&&v<a.length-1?a[v+1]:a[v]}}}function pX(a,e,t,i,n,s){return i=i!==void 0?i:!0,t=t!==void 0?t:0,function(r,l,c,h){if(r!==void 0){const g=n?NT(e,n,c,s):e;if(h)return i?DT(r,g,t):Sn(r,t,g);const b=1e-9,v=Math.ceil(Math.log(e/g)/Math.log(a)-b),C=-l*(.5-b)+.5,S=Math.min(g,r),L=Math.floor(Math.log(e/S)/Math.log(a)+C),R=Math.max(v,L),G=e/Math.pow(a,R);return Sn(G,t,g)}}}function WL(a,e,t,i,n){return t=t!==void 0?t:!0,function(s,r,l,c){if(s!==void 0){const h=i?NT(a,i,l,n):a;return!t||!c?Sn(s,e,h):DT(s,h,e)}}}function VT(a){if(a!==void 0)return 0}function GL(a){if(a!==void 0)return a}function fX(a){const e=2*Math.PI/a;return function(t,i){if(i)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function yX(a){const e=a===void 0?tl(5):a;return function(t,i){return i||t===void 0?t:Math.abs(t)<=e?0:t}}const bX=42,ZT=256,CC=0;class vX extends lu{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=IT(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&Nk(),e.center&&(e.center=jn(e.center,this.projection_)),e.extent&&(e.extent=yl(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const l in Nl)delete t[l];this.setProperties(t,!0);const i=wX(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const n=xX(e),s=i.constraint,r=IX(e);this.constraints_={center:n,resolution:s,rotation:r},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const n=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),r=s/2*(n[3]-t[3]+t[1]-n[1]),l=s/2*(n[0]-t[0]+t[2]-n[2]);this.setCenterInternal([i[0]+r,i[1]-l])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let i=0;i<t.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=jn(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=jn(n.anchor,this.getProjection())),t[i]=n}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,i;t>1&&typeof arguments[t-1]=="function"&&(i=arguments[t-1],--t);let n=0;for(;n<t&&!this.isDef();++n){const g=arguments[n];g.center&&this.setCenterInternal(g.center),g.zoom!==void 0?this.setZoom(g.zoom):g.resolution&&this.setResolution(g.resolution),g.rotation!==void 0&&this.setRotation(g.rotation)}if(n===t){i&&rv(i,!0);return}let s=Date.now(),r=this.targetCenter_.slice(),l=this.targetResolution_,c=this.targetRotation_;const h=[];for(;n<t;++n){const g=arguments[n],b={start:s,complete:!1,anchor:g.anchor,duration:g.duration!==void 0?g.duration:1e3,easing:g.easing||ZU,callback:i};if(g.center&&(b.sourceCenter=r,b.targetCenter=g.center.slice(),r=b.targetCenter),g.zoom!==void 0?(b.sourceResolution=l,b.targetResolution=this.getResolutionForZoom(g.zoom),l=b.targetResolution):g.resolution&&(b.sourceResolution=l,b.targetResolution=g.resolution,l=b.targetResolution),g.rotation!==void 0){b.sourceRotation=c;const v=id(g.rotation-c+Math.PI,2*Math.PI)-Math.PI;b.targetRotation=c+v,c=b.targetRotation}CX(b)?b.complete=!0:s+=b.duration,h.push(b)}this.animations_.push(h),this.setHint(Vn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Vn.ANIMATING]>0}getInteracting(){return this.hints_[Vn.INTERACTING]>0}cancelAnimations(){this.setHint(Vn.ANIMATING,-this.hints_[Vn.ANIMATING]);let e;for(let t=0,i=this.animations_.length;t<i;++t){const n=this.animations_[t];if(n[0].callback&&rv(n[0].callback,!1),!e)for(let s=0,r=n.length;s<r;++s){const l=n[s];if(!l.complete){e=l.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let r=0,l=n.length;r<l;++r){const c=n[r];if(c.complete)continue;const h=e-c.start;let g=c.duration>0?h/c.duration:1;g>=1?(c.complete=!0,g=1):s=!1;const b=c.easing(g);if(c.sourceCenter){const v=c.sourceCenter[0],C=c.sourceCenter[1],S=c.targetCenter[0],L=c.targetCenter[1];this.nextCenter_=c.targetCenter;const R=v+b*(S-v),G=C+b*(L-C);this.targetCenter_=[R,G]}if(c.sourceResolution&&c.targetResolution){const v=b===1?c.targetResolution:c.sourceResolution+b*(c.targetResolution-c.sourceResolution);if(c.anchor){const C=this.getViewportSize_(this.getRotation()),S=this.constraints_.resolution(v,0,C,!0);this.targetCenter_=this.calculateCenterZoom(S,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=v,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const v=b===1?id(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+b*(c.targetRotation-c.sourceRotation);if(c.anchor){const C=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(C,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=v}if(this.applyTargetState_(!0),t=!0,!c.complete)break}if(s){this.animations_[i]=null,this.setHint(Vn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const r=n[0].callback;r&&rv(r,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let i;const n=this.getCenterInternal();return n!==void 0&&(i=[n[0]-t[0],n[1]-t[1]],yT(i,e-this.getRotation()),Dz(i,t)),i}calculateCenterZoom(e,t){let i;const n=this.getCenterInternal(),s=this.getResolution();if(n!==void 0&&s!==void 0){const r=t[0]-e*(t[0]-n[0])/s,l=t[1]-e*(t[1]-n[1])/s;i=[r,l]}return i}getViewportSize_(e){const t=this.viewportSize_;if(e){const i=t[0],n=t[1];return[Math.abs(i*Math.cos(e))+Math.abs(n*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(n*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&cm(e,this.getProjection())}getCenterInternal(){return this.get(Nl.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Mw(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();ji(t,"The view center is not defined");const i=this.getResolution();ji(i!==void 0,"The view resolution is not defined");const n=this.getRotation();return ji(n!==void 0,"The view rotation is not defined"),O0(t,i,n,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(Nl.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(yl(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const i=fi(e)/t[0],n=ur(e)/t[1];return Math.max(i,n)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(t/i)/Math.log(e);return function(s){return t/Math.pow(e,s*n)}}getRotation(){return this.get(Nl.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/t;return function(r){return Math.log(i/r)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const i=this.padding_;return i&&(t=[t[0]-i[1]-i[3],t[1]-i[0]-i[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const r=this.getViewportSizeMinusPadding_();n=AC(n,this.getViewportSize_(),[r[0]/2+s[3],r[1]/2+s[0]],t,i)}return{center:n.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,i,n;if(this.resolutions_){const s=Rw(this.resolutions_,e,1);t=s,i=this.resolutions_[s],s==this.resolutions_.length-1?n=2:n=i/this.resolutions_[s+1]}else i=this.maxResolution_,n=this.zoomFactor_;return t+Math.log(i/e)/Math.log(n)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=Sn(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(n,Sn(e-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let i;if(ji(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){ji(!xm(e),"Cannot fit empty extent provided as `geometry`");const n=yl(e,this.getProjection());i=CS(n)}else if(e.getType()==="Circle"){const n=yl(e.getExtent(),this.getProjection());i=CS(n),i.rotate(this.getRotation(),iu(n))}else i=e;this.fitInternal(i,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),i=Math.cos(t),n=Math.sin(-t),s=e.getFlatCoordinates(),r=e.getStride();let l=1/0,c=1/0,h=-1/0,g=-1/0;for(let b=0,v=s.length;b<v;b+=r){const C=s[b]*i-s[b+1]*n,S=s[b]*n+s[b+1]*i;l=Math.min(l,C),c=Math.min(c,S),h=Math.max(h,C),g=Math.max(g,S)}return[l,c,h,g]}fitInternal(e,t){t=t||{};let i=t.size;i||(i=this.getViewportSizeMinusPadding_());const n=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let r;t.minResolution!==void 0?r=t.minResolution:t.maxZoom!==void 0?r=this.getResolutionForZoom(t.maxZoom):r=0;const l=this.rotatedExtentForGeometry(e);let c=this.getResolutionForExtentInternal(l,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);c=isNaN(c)?r:Math.max(c,r),c=this.getConstrainedResolution(c,s?0:1);const h=this.getRotation(),g=Math.sin(h),b=Math.cos(h),v=iu(l);v[0]+=(n[1]-n[3])/2*c,v[1]+=(n[0]-n[2])/2*c;const C=v[0]*b-v[1]*g,S=v[1]*b+v[0]*g,L=this.getConstrainedCenter([C,S],c),R=t.callback?t.callback:P0;t.duration!==void 0?this.animateInternal({resolution:c,center:L,duration:t.duration,easing:t.easing},R):(this.targetResolution_=c,this.targetCenter_=L,this.applyTargetState_(!1,!0),rv(R,!0))}centerOn(e,t,i){this.centerOnInternal(jn(e,this.getProjection()),t,i)}centerOnInternal(e,t,i){this.setCenterInternal(AC(e,t,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,i,n){let s;const r=this.padding_;if(r&&e){const l=this.getViewportSizeMinusPadding_(-i),c=AC(e,n,[l[0]/2+r[3],l[1]/2+r[0]],t,i);s=[e[0]-c[0],e[1]-c[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=cm(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&jn(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,n,i);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=jn(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+e,i);t&&(this.targetCenter_=this.calculateCenterRotate(n,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&jn(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const i=this.getAnimating()||this.getInteracting()||t,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),r=this.constraints_.resolution(this.targetResolution_,0,s,i),l=this.constraints_.center(this.targetCenter_,r,s,i,this.calculateCenterShift(this.targetCenter_,r,n,s));this.get(Nl.ROTATION)!==n&&this.set(Nl.ROTATION,n),this.get(Nl.RESOLUTION)!==r&&(this.set(Nl.RESOLUTION,r),this.set("zoom",this.getZoom(),!0)),(!l||!this.get(Nl.CENTER)||!js(this.get(Nl.CENTER),l))&&this.set(Nl.CENTER,l),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,i){e=e!==void 0?e:200;const n=t||0,s=this.constraints_.rotation(this.targetRotation_),r=this.getViewportSize_(s),l=this.constraints_.resolution(this.targetResolution_,n,r),c=this.constraints_.center(this.targetCenter_,l,r,!1,this.calculateCenterShift(this.targetCenter_,l,s,r));if(e===0&&!this.cancelAnchor_){this.targetResolution_=l,this.targetRotation_=s,this.targetCenter_=c,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==l||this.getRotation()!==s||!this.getCenterInternal()||!js(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:c,resolution:l,duration:e,easing:af,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Vn.INTERACTING,1)}endInteraction(e,t,i){i=i&&jn(i,this.getProjection()),this.endInteractionInternal(e,t,i)}endInteractionInternal(e,t,i){this.getInteracting()&&(this.setHint(Vn.INTERACTING,-1),this.resolveConstraints(e,t,i))}getConstrainedCenter(e,t){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),i)}getConstrainedZoom(e,t){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,t))}getConstrainedResolution(e,t){t=t||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,i)}}function rv(a,e){setTimeout(function(){a(e)},0)}function xX(a){if(a.extent!==void 0){const t=a.smoothExtentConstraint!==void 0?a.smoothExtentConstraint:!0;return TL(a.extent,a.constrainOnlyCenter,t)}const e=IT(a.projection,"EPSG:3857");if(a.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,TL(t,!1,!1)}return VU}function wX(a){let e,t,i,r=a.minZoom!==void 0?a.minZoom:CC,l=a.maxZoom!==void 0?a.maxZoom:28;const c=a.zoomFactor!==void 0?a.zoomFactor:2,h=a.multiWorld!==void 0?a.multiWorld:!1,g=a.smoothResolutionConstraint!==void 0?a.smoothResolutionConstraint:!0,b=a.showFullExtent!==void 0?a.showFullExtent:!1,v=IT(a.projection,"EPSG:3857"),C=v.getExtent();let S=a.constrainOnlyCenter,L=a.extent;if(!h&&!L&&v.isGlobal()&&(S=!1,L=C),a.resolutions!==void 0){const R=a.resolutions;t=R[r],i=R[l]!==void 0?R[l]:R[R.length-1],a.constrainResolution?e=gX(R,g,!S&&L,b):e=WL(t,i,g,!S&&L,b)}else{const G=(C?Math.max(fi(C),ur(C)):360*Gp.degrees/v.getMetersPerUnit())/ZT/Math.pow(2,CC),O=G/Math.pow(2,28-CC);t=a.maxResolution,t!==void 0?r=0:t=G/Math.pow(c,r),i=a.minResolution,i===void 0&&(a.maxZoom!==void 0?a.maxResolution!==void 0?i=t/Math.pow(c,l):i=G/Math.pow(c,l):i=O),l=r+Math.floor(Math.log(t/i)/Math.log(c)),i=t/Math.pow(c,l-r),a.constrainResolution?e=pX(c,t,i,g,!S&&L,b):e=WL(t,i,g,!S&&L,b)}return{constraint:e,maxResolution:t,minResolution:i,minZoom:r,zoomFactor:c}}function IX(a){if(a.enableRotation!==void 0?a.enableRotation:!0){const t=a.constrainRotation;return t===void 0||t===!0?yX():t===!1?GL:typeof t=="number"?fX(t):GL}return VT}function CX(a){return!(a.sourceCenter&&a.targetCenter&&!js(a.sourceCenter,a.targetCenter)||a.sourceResolution!==a.targetResolution||a.sourceRotation!==a.targetRotation)}function AC(a,e,t,i,n){const s=Math.cos(-n);let r=Math.sin(-n),l=a[0]*s-a[1]*r,c=a[1]*s+a[0]*r;l+=(e[0]/2-t[0])*i,c+=(t[1]-e[1]/2)*i,r=-r;const h=l*s-c*r,g=c*s+l*r;return[h,g]}const Vu=vX,sv="ol-hidden",AX="ol-selectable",Dh="ol-unselectable",OL="ol-unsupported",Im="ol-control",PL="ol-collapsed",SX=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),BL=["style","variant","weight","size","lineHeight","family"],zT=function(a){const e=a.match(SX);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,n=BL.length;i<n;++i){const s=e[i+1];s!==void 0&&(t[BL[i]]=s)}return t.families=t.family.split(/,\s?/),t};function kr(a,e,t,i){let n;return t&&t.length?n=t.shift():Xk?n=new OffscreenCanvas(a||300,e||300):n=document.createElement("canvas"),a&&(n.width=a),e&&(n.height=e),n.getContext("2d",i)}let SC;function Q2(){return SC||(SC=kr(1,1)),SC}function Pw(a){const e=a.canvas;e.width=1,e.height=1,a.clearRect(0,0,1,1)}function TX(a){let e=a.offsetWidth;const t=getComputedStyle(a);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function EX(a){let e=a.offsetHeight;const t=getComputedStyle(a);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function $2(a,e){const t=e.parentNode;t&&t.replaceChild(a,e)}function c7(a){for(;a.lastChild;)a.lastChild.remove()}function MX(a,e){const t=a.childNodes;for(let i=0;;++i){const n=t[i],s=e[i];if(!n&&!s)break;if(n!==s){if(!n){a.appendChild(s);continue}if(!s){a.removeChild(n),--i;continue}a.insertBefore(s,n)}}}class LX extends lu{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let i=0,n=this.listenerKeys.length;i<n;++i)dn(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=e,e){const i=this.target_??e.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==P0&&this.listenerKeys.push(La(e,Kc.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}const Cm=LX;class RX extends Cm{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",n=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"›",r=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=r):this.collapseLabel_=s;const l=e.label!==void 0?e.label:"i";typeof l=="string"?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=n):this.label_=l;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(Ba.CLICK,this.handleClick_.bind(this),!1);const h=t+" "+Dh+" "+Im+(this.collapsed_&&this.collapsible_?" "+PL:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=h,g.appendChild(this.toggleButton_),g.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),i=new Set(t.flatMap(n=>n.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>i.add(n)):i.add(this.attributions_)),!this.overrideCollapsible_){const n=!t.some(s=>{var r;return((r=s.getSource())==null?void 0:r.getAttributionsCollapsible())===!1});this.setCollapsible(n)}return Array.from(i)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(n=>Zk(()=>n))),i=t.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!vd(t,this.renderedAttributions_)){c7(this.ulElement_);for(let n=0,s=t.length;n<s;++n){const r=document.createElement("li");r.innerHTML=t[n],this.ulElement_.appendChild(r)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(PL),this.collapsed_?$2(this.collapseLabel_,this.label_):$2(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const kX=RX;class WX extends Cm{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",n=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=e.tipLabel?e.tipLabel:"Reset rotation",r=document.createElement("button");r.className=t+"-reset",r.setAttribute("type","button"),r.title=s,r.appendChild(this.label_),r.addEventListener(Ba.CLICK,this.handleClick_.bind(this),!1);const l=t+" "+Dh+" "+Im,c=this.element;c.className=l,c.appendChild(r),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(sv)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const i=t.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:af}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const i=t.viewState.rotation;if(i!=this.rotation_){const n="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(sv);!s&&i===0?this.element.classList.add(sv):s&&i!==0&&this.element.classList.remove(sv)}this.label_.style.transform=n}this.rotation_=i}}const d7=WX;class GX extends Cm{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,n=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",r=e.zoomInLabel!==void 0?e.zoomInLabel:"+",l=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",c=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",h=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",g=document.createElement("button");g.className=n,g.setAttribute("type","button"),g.title=c,g.appendChild(typeof r=="string"?document.createTextNode(r):r),g.addEventListener(Ba.CLICK,this.handleClick_.bind(this,i),!1);const b=document.createElement("button");b.className=s,b.setAttribute("type","button"),b.title=h,b.appendChild(typeof l=="string"?document.createTextNode(l):l),b.addEventListener(Ba.CLICK,this.handleClick_.bind(this,-i),!1);const v=t+" "+Dh+" "+Im,C=this.element;C.className=v,C.appendChild(g),C.appendChild(b),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const s=i.getConstrainedZoom(n+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:af})):i.setZoom(s)}}}const h7=GX;function OX(a){a=a||{};const e=new $o;return(a.zoom!==void 0?a.zoom:!0)&&e.push(new h7(a.zoomOptions)),(a.rotate!==void 0?a.rotate:!0)&&e.push(new d7(a.rotateOptions)),(a.attribution!==void 0?a.attribution:!0)&&e.push(new kX(a.attributionOptions)),e}class PX{constructor(e,t,i){this.decay_=e,this.minVelocity_=t,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let i=t-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const n=this.points_[t+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[t]-this.points_[i],r=this.points_[t+1]-this.points_[i+1];return this.angle_=Math.atan2(r,s),this.initialVelocity_=Math.sqrt(s*s+r*r)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const BX=PX,AS={ACTIVE:"active"};class FX extends lu{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(AS.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(AS.ACTIVE,e)}setMap(e){this.map_=e}}function NX(a,e,t){const i=a.getCenterInternal();if(i){const n=[i[0]+e[0],i[1]+e[1]];a.animateInternal({duration:t!==void 0?t:250,easing:zU,center:a.getConstrainedCenter(n)})}}function UT(a,e,t,i){const n=a.getZoom();if(n===void 0)return;const s=a.getConstrainedZoom(n+e),r=a.getResolutionForZoom(s);a.getAnimating()&&a.cancelAnimations(),a.animate({resolution:r,anchor:t,duration:i!==void 0?i:250,easing:af})}const nf=FX;class DX extends nf{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==Ti.DBLCLICK){const i=e.originalEvent,n=e.map,s=e.coordinate,r=i.shiftKey?-this.delta_:this.delta_,l=n.getView();UT(l,r,s,this.duration_),i.preventDefault(),t=!0}return!t}}const VX=DX;function SS(a){const e=arguments;return function(t){let i=!0;for(let n=0,s=e.length;n<s&&(i=i&&e[n](t),!!i);++n);return i}}const ZX=function(a){const e=a.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},zX=function(a){const e=a.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},UX=function(a){const e=a.map.getTargetElement(),t=e.getRootNode(),i=a.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(i):e.contains(i)},_7=function(a){const e=a.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?UX(a):!0},ex=Mh,m7=function(a){const e=a.originalEvent;return e instanceof PointerEvent&&e.button==0&&!(WU&&AT&&e.ctrlKey)},TS=tf,XT=function(a){return a.type==Ti.SINGLECLICK},Bw=function(a){const e=a.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},XX=function(a){const e=a.originalEvent;return!e.altKey&&(AT?e.metaKey:e.ctrlKey)&&!e.shiftKey},HX=function(a){const e=a.originalEvent;return AT?e.metaKey:e.ctrlKey},HT=function(a){const e=a.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},g7=function(a){const e=a.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},TC=function(a){const e=a.originalEvent;return e instanceof PointerEvent&&e.pointerType=="mouse"},p7=function(a){const e=a.originalEvent;return e instanceof PointerEvent&&e.isPrimary&&e.button===0};class YX extends nf{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==Ti.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==Ti.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==Ti.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,t=this.stopDown(i)}else e.type==Ti.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function YT(a){const e=a.length;let t=0,i=0;for(let n=0;n<e;n++)t+=a[n].clientX,i+=a[n].clientY;return{clientX:t/e,clientY:i/e}}const Am=YX;class KX extends Am{constructor(e){super({stopDown:tf}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:SS(Bw,p7);this.condition_=e.onFocusOnly?SS(_7,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const i=this.targetPointers,n=t.getEventPixel(YT(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const s=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],l=e.map.getView();Vz(s,l.getResolution()),yT(s,l.getRotation()),l.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,i=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),r=i.getCenterInternal(),l=t.getPixelFromCoordinateInternal(r),c=t.getCoordinateFromPixelInternal([l[0]-n*Math.cos(s),l[1]-n*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:af})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const qX=KX;class jX extends Am{constructor(e){e=e||{},super({stopDown:tf}),this.condition_=e.condition?e.condition:zX,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!TC(e))return;const t=e.map,i=t.getView();if(i.getConstraints().rotation===VT)return;const n=t.getSize(),s=e.pixel,r=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(this.lastAngle_!==void 0){const l=r-this.lastAngle_;i.adjustRotationInternal(-l)}this.lastAngle_=r}handleUpEvent(e){return TC(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return TC(e)&&m7(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const ES=jX;class JX extends Lw{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(e[0],t[0])+i,n.top=Math.min(e[1],t[1])+i,n.width=Math.abs(t[0]-e[0])+i,n.height=Math.abs(t[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,n=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new nc([n])}getGeometry(){return this.geometry_}}const QX=JX,Lg={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class yy extends sl{constructor(e,t,i){super(e),this.coordinate=t,this.mapBrowserEvent=i}}class $X extends Am{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new QX(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??m7,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,i){const n=i[0]-t[0],s=i[1]-t[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new yy(Lg.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new yy(t?Lg.BOXEND:Lg.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new yy(Lg.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new yy(Lg.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new yy(Lg.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}const eH=$X;class tH extends eH{constructor(e){e=e||{};const t=e.condition?e.condition:HT;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(n),r=i.getResolutionForExtentInternal(s),l=i.getResolution()/r;n=n.clone(),n.scale(l*l)}i.fitInternal(n,{duration:this.duration_,easing:af})}}const aH=tH,M_={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class iH extends nf{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return Bw(t)&&g7(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==Ba.KEYDOWN){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==M_.DOWN||n==M_.LEFT||n==M_.RIGHT||n==M_.UP)){const r=e.map.getView(),l=r.getResolution()*this.pixelDelta_;let c=0,h=0;n==M_.DOWN?h=-l:n==M_.LEFT?c=-l:n==M_.RIGHT?c=l:h=l;const g=[c,h];yT(g,r.getRotation()),NX(r,g,this.duration_),i.preventDefault(),t=!0}}return!t}}const nH=iH;class rH extends nf{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!HX(t)&&g7(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==Ba.KEYDOWN||e.type==Ba.KEYPRESS){const i=e.originalEvent,n=i.key;if(this.condition_(e)&&(n==="+"||n==="-")){const s=e.map,r=n==="+"?this.delta_:-this.delta_,l=s.getView();UT(l,r,void 0,this.duration_),i.preventDefault(),t=!0}}return!t}}const sH=rH;class oH extends nf{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:ex;this.condition_=e.onFocusOnly?SS(_7,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==Ba.WHEEL)return!0;const i=e.map,n=e.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let s;if(e.type==Ba.WHEEL&&(s=n.deltaY,n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const r=Date.now();this.startTime_===void 0&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const l=i.getView();if(this.mode_==="trackpad"&&!(l.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(l.getAnimating()&&l.cancelAnimations(),l.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),l.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=r,!1;this.totalDelta_+=s;const c=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let i=-Sn(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),UT(t,i,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}const lH=oH;class uH extends Am{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=tf),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(this.lastAngle_!==void 0){const c=s-this.lastAngle_;this.rotationDelta_+=c,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=c}this.lastAngle_=s;const r=e.map,l=r.getView();l.getConstraints().rotation!==VT&&(this.anchor_=r.getCoordinateFromPixelInternal(r.getEventPixel(YT(this.targetPointers))),this.rotating_&&(r.render(),l.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const cH=uH;class dH extends Am{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=tf),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,r=i.clientY-n.clientY,l=Math.sqrt(s*s+r*r);this.lastDistance_!==void 0&&(t=this.lastDistance_/l),this.lastDistance_=l;const c=e.map,h=c.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=c.getCoordinateFromPixelInternal(c.getEventPixel(YT(this.targetPointers))),c.render(),h.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const hH=dH;function _H(a){a=a||{};const e=new $o,t=new BX(-.005,.05,100);return(a.altShiftDragRotate!==void 0?a.altShiftDragRotate:!0)&&e.push(new ES),(a.doubleClickZoom!==void 0?a.doubleClickZoom:!0)&&e.push(new VX({delta:a.zoomDelta,duration:a.zoomDuration})),(a.dragPan!==void 0?a.dragPan:!0)&&e.push(new qX({onFocusOnly:a.onFocusOnly,kinetic:t})),(a.pinchRotate!==void 0?a.pinchRotate:!0)&&e.push(new cH),(a.pinchZoom!==void 0?a.pinchZoom:!0)&&e.push(new hH({duration:a.zoomDuration})),(a.keyboard!==void 0?a.keyboard:!0)&&(e.push(new nH),e.push(new sH({delta:a.zoomDelta,duration:a.zoomDuration}))),(a.mouseWheelZoom!==void 0?a.mouseWheelZoom:!0)&&e.push(new lH({onFocusOnly:a.onFocusOnly,duration:a.zoomDuration})),(a.shiftDragZoom!==void 0?a.shiftDragZoom:!0)&&e.push(new aH({duration:a.zoomDuration})),e}const cn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class mH extends lu{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[cn.OPACITY]=e.opacity!==void 0?e.opacity:1,ji(typeof t[cn.OPACITY]=="number","Layer opacity must be a number"),t[cn.VISIBLE]=e.visible!==void 0?e.visible:!0,t[cn.Z_INDEX]=e.zIndex,t[cn.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[cn.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[cn.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[cn.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return t.opacity=Sn(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=i===void 0&&!t.managed?1/0:i,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return Aa()}getLayerStatesArray(e){return Aa()}getExtent(){return this.get(cn.EXTENT)}getMaxResolution(){return this.get(cn.MAX_RESOLUTION)}getMinResolution(){return this.get(cn.MIN_RESOLUTION)}getMinZoom(){return this.get(cn.MIN_ZOOM)}getMaxZoom(){return this.get(cn.MAX_ZOOM)}getOpacity(){return this.get(cn.OPACITY)}getSourceState(){return Aa()}getVisible(){return this.get(cn.VISIBLE)}getZIndex(){return this.get(cn.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(cn.EXTENT,e)}setMaxResolution(e){this.set(cn.MAX_RESOLUTION,e)}setMinResolution(e){this.set(cn.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(cn.MAX_ZOOM,e)}setMinZoom(e){this.set(cn.MIN_ZOOM,e)}setOpacity(e){ji(typeof e=="number","Layer opacity must be a number"),this.set(cn.OPACITY,e)}setVisible(e){this.set(cn.VISIBLE,e)}setZIndex(e){this.set(cn.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const f7=mH;class nh extends sl{constructor(e,t){super(e),this.layer=t}}const EC={LAYERS:"layers"};class KT extends f7{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let i=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(EC.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new $o(i.slice(),{unique:!0}):ji(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new $o(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(dn),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(La(e,Rr.ADD,this.handleLayersAdd_,this),La(e,Rr.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(dn);ef(this.listenerKeys_);const t=e.getArray();for(let i=0,n=t.length;i<n;i++){const s=t[i];this.registerLayerListeners_(s),this.dispatchEvent(new nh("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[La(e,dm.PROPERTYCHANGE,this.handleLayerChange_,this),La(e,Ba.CHANGE,this.handleLayerChange_,this)];e instanceof KT&&t.push(La(e,"addlayer",this.handleLayerGroupAdd_,this),La(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[Ga(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new nh("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new nh("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new nh("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,i=Ga(t);this.listenerKeys_[i].forEach(dn),delete this.listenerKeys_[i],this.dispatchEvent(new nh("removelayer",t)),this.changed()}getLayers(){return this.get(EC.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const i=t.getArray();for(let n=0,s=i.length;n<s;++n)this.dispatchEvent(new nh("removelayer",i[n]))}this.set(EC.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],i=t.length;this.getLayers().forEach(function(r){r.getLayerStatesArray(t)});const n=this.getLayerState();let s=n.zIndex;!e&&n.zIndex===void 0&&(s=0);for(let r=i,l=t.length;r<l;r++){const c=t[r];c.opacity*=n.opacity,c.visible=c.visible&&n.visible,c.maxResolution=Math.min(c.maxResolution,n.maxResolution),c.minResolution=Math.max(c.minResolution,n.minResolution),c.minZoom=Math.max(c.minZoom,n.minZoom),c.maxZoom=Math.min(c.maxZoom,n.maxZoom),n.extent!==void 0&&(c.extent!==void 0?c.extent=qu(c.extent,n.extent):c.extent=n.extent),c.zIndex===void 0&&(c.zIndex=s)}return t}getSourceState(){return"ready"}}const rf=KT,Ro={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class gH extends f7{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(cn.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(cn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(dn(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=La(e,Ba.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof Vu?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&i&&(t.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let n;if(t.layerStatesArray){if(n=t.layerStatesArray.find(r=>r.layer===this),!n)return!1}else n=this.getLayerState();const s=this.getExtent();return qT(n,t.viewState)&&(!s||xr(s,t.extent))}getAttributions(e){var s;if(!this.isVisible(e))return[];const t=(s=this.getSource())==null?void 0:s.getAttributions();if(!t)return[];const i=e instanceof Vu?e.getViewStateAndExtent():e;let n=t(i);return Array.isArray(n)||(n=[n]),n}render(e,t){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(cn.MAP,e)}getMapInternal(){return this.get(cn.MAP)}setMap(e){this.mapPrecomposeKey_&&(dn(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(dn(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=La(e,Ro.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=La(this,Ba.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,i=this.getLayerState(!1);ji(!t.some(n=>n.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(i)}setSource(e){this.set(cn.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function qT(a,e){if(!a.visible)return!1;const t=e.resolution;if(t<a.minResolution||t>=a.maxResolution)return!1;const i=e.zoom;return i>a.minZoom&&i<=a.maxZoom}const Sm=gH;function y7(a,e,t=0,i=a.length-1,n=pH){for(;i>t;){if(i-t>600){const c=i-t+1,h=e-t+1,g=Math.log(c),b=.5*Math.exp(2*g/3),v=.5*Math.sqrt(g*b*(c-b)/c)*(h-c/2<0?-1:1),C=Math.max(t,Math.floor(e-h*b/c+v)),S=Math.min(i,Math.floor(e+(c-h)*b/c+v));y7(a,e,C,S,n)}const s=a[e];let r=t,l=i;for(by(a,t,e),n(a[i],s)>0&&by(a,t,i);r<l;){for(by(a,r,l),r++,l--;n(a[r],s)<0;)r++;for(;n(a[l],s)>0;)l--}n(a[t],s)===0?by(a,t,l):(l++,by(a,l,i)),l<=e&&(t=l+1),e<=l&&(i=l-1)}}function by(a,e,t){const i=a[e];a[e]=a[t],a[t]=i}function pH(a,e){return a<e?-1:a>e?1:0}let b7=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const i=[];if(!lv(e,t))return i;const n=this.toBBox,s=[];for(;t;){for(let r=0;r<t.children.length;r++){const l=t.children[r],c=t.leaf?n(l):l;lv(e,c)&&(t.leaf?i.push(l):LC(e,c)?this._all(l,i):s.push(l))}t=s.pop()}return i}collides(e){let t=this.data;if(!lv(e,t))return!1;const i=[];for(;t;){for(let n=0;n<t.children.length;n++){const s=t.children[n],r=t.leaf?this.toBBox(s):s;if(lv(e,r)){if(t.leaf||LC(e,r))return!0;i.push(s)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Ug([]),this}remove(e,t){if(!e)return this;let i=this.data;const n=this.toBBox(e),s=[],r=[];let l,c,h;for(;i||s.length;){if(i||(i=s.pop(),c=s[s.length-1],l=r.pop(),h=!0),i.leaf){const g=fH(e,i.children,t);if(g!==-1)return i.children.splice(g,1),s.push(i),this._condense(s),this}!h&&!i.leaf&&LC(i,n)?(s.push(i),r.push(l),l=0,c=i,i=i.children[0]):c?(l++,i=c.children[l],h=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,n){const s=i-t+1;let r=this._maxEntries,l;if(s<=r)return l=Ug(e.slice(t,i+1)),Rg(l,this.toBBox),l;n||(n=Math.ceil(Math.log(s)/Math.log(r)),r=Math.ceil(s/Math.pow(r,n-1))),l=Ug([]),l.leaf=!1,l.height=n;const c=Math.ceil(s/r),h=c*Math.ceil(Math.sqrt(r));FL(e,t,i,h,this.compareMinX);for(let g=t;g<=i;g+=h){const b=Math.min(g+h-1,i);FL(e,g,b,c,this.compareMinY);for(let v=g;v<=b;v+=c){const C=Math.min(v+c-1,b);l.children.push(this._build(e,v,C,n-1))}}return Rg(l,this.toBBox),l}_chooseSubtree(e,t,i,n){for(;n.push(t),!(t.leaf||n.length-1===i);){let s=1/0,r=1/0,l;for(let c=0;c<t.children.length;c++){const h=t.children[c],g=MC(h),b=vH(e,h)-g;b<r?(r=b,s=g<s?g:s,l=h):b===r&&g<s&&(s=g,l=h)}t=l||t.children[0]}return t}_insert(e,t,i){const n=i?e:this.toBBox(e),s=[],r=this._chooseSubtree(n,this.data,t,s);for(r.children.push(e),Ly(r,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)}_split(e,t){const i=e[t],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);const r=this._chooseSplitIndex(i,s,n),l=Ug(i.children.splice(r,i.children.length-r));l.height=i.height,l.leaf=i.leaf,Rg(i,this.toBBox),Rg(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(i,l)}_splitRoot(e,t){this.data=Ug([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Rg(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let n,s=1/0,r=1/0;for(let l=t;l<=i-t;l++){const c=My(e,0,l,this.toBBox),h=My(e,l,i,this.toBBox),g=xH(c,h),b=MC(c)+MC(h);g<s?(s=g,n=l,r=b<r?b:r):g===s&&b<r&&(r=b,n=l)}return n||i-t}_chooseSplitAxis(e,t,i){const n=e.leaf?this.compareMinX:yH,s=e.leaf?this.compareMinY:bH,r=this._allDistMargin(e,t,i,n),l=this._allDistMargin(e,t,i,s);r<l&&e.children.sort(n)}_allDistMargin(e,t,i,n){e.children.sort(n);const s=this.toBBox,r=My(e,0,t,s),l=My(e,i-t,i,s);let c=ov(r)+ov(l);for(let h=t;h<i-t;h++){const g=e.children[h];Ly(r,e.leaf?s(g):g),c+=ov(r)}for(let h=i-t-1;h>=t;h--){const g=e.children[h];Ly(l,e.leaf?s(g):g),c+=ov(l)}return c}_adjustParentBBoxes(e,t,i){for(let n=i;n>=0;n--)Ly(t[n],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():Rg(e[t],this.toBBox)}};function fH(a,e,t){if(!t)return e.indexOf(a);for(let i=0;i<e.length;i++)if(t(a,e[i]))return i;return-1}function Rg(a,e){My(a,0,a.children.length,e,a)}function My(a,e,t,i,n){n||(n=Ug(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let s=e;s<t;s++){const r=a.children[s];Ly(n,a.leaf?i(r):r)}return n}function Ly(a,e){return a.minX=Math.min(a.minX,e.minX),a.minY=Math.min(a.minY,e.minY),a.maxX=Math.max(a.maxX,e.maxX),a.maxY=Math.max(a.maxY,e.maxY),a}function yH(a,e){return a.minX-e.minX}function bH(a,e){return a.minY-e.minY}function MC(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function ov(a){return a.maxX-a.minX+(a.maxY-a.minY)}function vH(a,e){return(Math.max(e.maxX,a.maxX)-Math.min(e.minX,a.minX))*(Math.max(e.maxY,a.maxY)-Math.min(e.minY,a.minY))}function xH(a,e){const t=Math.max(a.minX,e.minX),i=Math.max(a.minY,e.minY),n=Math.min(a.maxX,e.maxX),s=Math.min(a.maxY,e.maxY);return Math.max(0,n-t)*Math.max(0,s-i)}function LC(a,e){return a.minX<=e.minX&&a.minY<=e.minY&&e.maxX<=a.maxX&&e.maxY<=a.maxY}function lv(a,e){return e.minX<=a.maxX&&e.minY<=a.maxY&&e.maxX>=a.minX&&e.maxY>=a.minY}function Ug(a){return{children:a,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function FL(a,e,t,i,n){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=i)continue;const r=e+Math.ceil((t-e)/i/2)*i;y7(a,r,e,t,n),s.push(e,r,r,t)}}const jT=[NaN,NaN,NaN,0];let RC;function wH(){return RC||(RC=kr(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),RC}const IH=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,CH=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,AH=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,SH=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function uv(a,e){return a.endsWith("%")?Number(a.substring(0,a.length-1))/e:Number(a)}function r0(a){throw new Error('failed to parse "'+a+'" as color')}function v7(a){if(a.toLowerCase().startsWith("rgb")){const s=a.match(CH)||a.match(IH)||a.match(AH);if(s){const r=s[4],l=100/255;return[Sn(uv(s[1],l)+.5|0,0,255),Sn(uv(s[2],l)+.5|0,0,255),Sn(uv(s[3],l)+.5|0,0,255),r!==void 0?Sn(uv(r,100),0,1):1]}r0(a)}if(a.startsWith("#")){if(SH.test(a)){const s=a.substring(1),r=s.length<=4?1:2,l=[0,0,0,255];for(let c=0,h=s.length;c<h;c+=r){let g=parseInt(s.substring(c,c+r),16);r===1&&(g+=g<<4),l[c/r]=g}return l[3]=l[3]/255,l}r0(a)}const e=wH();e.fillStyle="#abcdef";let t=e.fillStyle;e.fillStyle=a,e.fillStyle===t&&(e.fillStyle="#fedcba",t=e.fillStyle,e.fillStyle=a,e.fillStyle===t&&r0(a));const i=e.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return v7(i);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const n=Array.from(e.getImageData(0,0,1,1).data);return n[3]=$p(n[3]/255,3),n}function TH(a){return typeof a=="string"?a:QT(a)}const EH=1024,vy={};let kC=0;function MH(a){if(a.length===4)return a;const e=a.slice();return e[3]=1,e}function WC(a){return a>.0031308?Math.pow(a,1/2.4)*269.025-14.025:a*3294.6}function GC(a){return a>.2068965?Math.pow(a,3):(a-4/29)*(108/841)}function OC(a){return a>10.314724?Math.pow((a+14.025)/269.025,2.4):a/3294.6}function PC(a){return a>.0088564?Math.pow(a,1/3):a/(108/841)+4/29}function NL(a){const e=OC(a[0]),t=OC(a[1]),i=OC(a[2]),n=PC(e*.222488403+t*.716873169+i*.06060791),s=500*(PC(e*.452247074+t*.399439023+i*.148375274)-n),r=200*(n-PC(e*.016863605+t*.117638439+i*.865350722)),l=Math.atan2(r,s)*(180/Math.PI);return[116*n-16,Math.sqrt(s*s+r*r),l<0?l+360:l,a[3]]}function LH(a){const e=(a[0]+16)/116,t=a[1],i=a[2]*Math.PI/180,n=GC(e),s=GC(e+t/500*Math.cos(i)),r=GC(e-t/200*Math.sin(i)),l=WC(s*3.021973625-n*1.617392459-r*.404875592),c=WC(s*-.943766287+n*1.916279586+r*.027607165),h=WC(s*.069407491-n*.22898585+r*1.159737864);return[Sn(l+.5|0,0,255),Sn(c+.5|0,0,255),Sn(h+.5|0,0,255),a[3]]}function JT(a){if(a==="none")return jT;if(vy.hasOwnProperty(a))return vy[a];if(kC>=EH){let t=0;for(const i in vy)t++&3||(delete vy[i],--kC)}const e=v7(a);e.length!==4&&r0(a);for(const t of e)isNaN(t)&&r0(a);return vy[a]=e,++kC,e}function Cl(a){return Array.isArray(a)?a:JT(a)}function QT(a){let e=a[0];e!=(e|0)&&(e=e+.5|0);let t=a[1];t!=(t|0)&&(t=t+.5|0);let i=a[2];i!=(i|0)&&(i=i+.5|0);const n=a[3]===void 0?1:Math.round(a[3]*1e3)/1e3;return"rgba("+e+","+t+","+i+","+n+")"}function DL(a){return a[0]>0&&a[1]>0}function RH(a,e,t){return t===void 0&&(t=[0,0]),t[0]=a[0]*e+.5|0,t[1]=a[1]*e+.5|0,t}function Ps(a,e){return Array.isArray(a)?a:(e===void 0?e=[a,a]:(e[0]=a,e[1]=a),e)}let Tm=0;const eo=1<<Tm++,Si=1<<Tm++,Co=1<<Tm++,Kl=1<<Tm++,_m=1<<Tm++,Ry=1<<Tm++,cv=Math.pow(2,Tm)-1,$T={[eo]:"boolean",[Si]:"number",[Co]:"string",[Kl]:"color",[_m]:"number[]",[Ry]:"size"},kH=Object.keys($T).map(Number).sort(ju);function WH(a){return a in $T}function ky(a){const e=[];for(const t of kH)Wy(a,t)&&e.push($T[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Wy(a,e){return(a&e)===e}function Hd(a,e){return a===e}class Nr{constructor(e,t){if(!WH(e))throw new Error(`literal expressions must have a specific type, got ${ky(e)}`);this.type=e,this.value=t}}class GH{constructor(e,t,...i){this.type=e,this.operator=t,this.args=i}}function x7(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function fs(a,e,t){switch(typeof a){case"boolean":{if(Hd(e,Co))return new Nr(Co,a?"true":"false");if(!Wy(e,eo))throw new Error(`got a boolean, but expected ${ky(e)}`);return new Nr(eo,a)}case"number":{if(Hd(e,Ry))return new Nr(Ry,Ps(a));if(Hd(e,eo))return new Nr(eo,!!a);if(Hd(e,Co))return new Nr(Co,a.toString());if(!Wy(e,Si))throw new Error(`got a number, but expected ${ky(e)}`);return new Nr(Si,a)}case"string":{if(Hd(e,Kl))return new Nr(Kl,JT(a));if(Hd(e,eo))return new Nr(eo,!!a);if(!Wy(e,Co))throw new Error(`got a string, but expected ${ky(e)}`);return new Nr(Co,a)}}if(!Array.isArray(a))throw new Error("expression must be an array or a primitive value");if(a.length===0)throw new Error("empty expression");if(typeof a[0]=="string")return XH(a,e,t);for(const i of a)if(typeof i!="number")throw new Error("expected an array of numbers");if(Hd(e,Ry)){if(a.length!==2)throw new Error(`expected an array of two values for a size, got ${a.length}`);return new Nr(Ry,a)}if(Hd(e,Kl)){if(a.length===3)return new Nr(Kl,[...a,1]);if(a.length===4)return new Nr(Kl,a);throw new Error(`expected an array of 3 or 4 values for a color, got ${a.length}`)}if(!Wy(e,_m))throw new Error(`got an array of numbers, but expected ${ky(e)}`);return new Nr(_m,a)}const st={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},OH={[st.Get]:Ua(hi(1,1/0),VL),[st.Var]:Ua(hi(1,1),PH),[st.Has]:Ua(hi(1,1/0),VL),[st.Id]:Ua(BH,kg),[st.Concat]:Ua(hi(2,1/0),Ki(Co)),[st.GeometryType]:Ua(FH,kg),[st.LineMetric]:Ua(kg),[st.Resolution]:Ua(BC,kg),[st.Zoom]:Ua(BC,kg),[st.Time]:Ua(BC,kg),[st.Any]:Ua(hi(2,1/0),Ki(eo)),[st.All]:Ua(hi(2,1/0),Ki(eo)),[st.Not]:Ua(hi(1,1),Ki(eo)),[st.Equal]:Ua(hi(2,2),Ki(cv)),[st.NotEqual]:Ua(hi(2,2),Ki(cv)),[st.GreaterThan]:Ua(hi(2,2),Ki(Si)),[st.GreaterThanOrEqualTo]:Ua(hi(2,2),Ki(Si)),[st.LessThan]:Ua(hi(2,2),Ki(Si)),[st.LessThanOrEqualTo]:Ua(hi(2,2),Ki(Si)),[st.Multiply]:Ua(hi(2,1/0),ZL),[st.Coalesce]:Ua(hi(2,1/0),ZL),[st.Divide]:Ua(hi(2,2),Ki(Si)),[st.Add]:Ua(hi(2,1/0),Ki(Si)),[st.Subtract]:Ua(hi(2,2),Ki(Si)),[st.Clamp]:Ua(hi(3,3),Ki(Si)),[st.Mod]:Ua(hi(2,2),Ki(Si)),[st.Pow]:Ua(hi(2,2),Ki(Si)),[st.Abs]:Ua(hi(1,1),Ki(Si)),[st.Floor]:Ua(hi(1,1),Ki(Si)),[st.Ceil]:Ua(hi(1,1),Ki(Si)),[st.Round]:Ua(hi(1,1),Ki(Si)),[st.Sin]:Ua(hi(1,1),Ki(Si)),[st.Cos]:Ua(hi(1,1),Ki(Si)),[st.Atan]:Ua(hi(1,2),Ki(Si)),[st.Sqrt]:Ua(hi(1,1),Ki(Si)),[st.Match]:Ua(hi(4,1/0),zL,DH),[st.Between]:Ua(hi(3,3),Ki(Si)),[st.Interpolate]:Ua(hi(6,1/0),zL,VH),[st.Case]:Ua(hi(3,1/0),NH,ZH),[st.In]:Ua(hi(2,2),zH),[st.Number]:Ua(hi(1,1/0),Ki(cv)),[st.String]:Ua(hi(1,1/0),Ki(cv)),[st.Array]:Ua(hi(1,1/0),Ki(Si)),[st.Color]:Ua(hi(1,4),Ki(Si)),[st.Band]:Ua(hi(1,3),Ki(Si)),[st.Palette]:Ua(hi(2,2),UH),[st.ToString]:Ua(hi(1,1),Ki(eo|Si|Co|Kl))};function VL(a,e,t){const i=a.length-1,n=new Array(i);for(let s=0;s<i;++s){const r=a[s+1];switch(typeof r){case"number":{n[s]=new Nr(Si,r);break}case"string":{n[s]=new Nr(Co,r);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${r}`)}s===0&&t.properties.add(String(r))}return n}function PH(a,e,t){const i=a[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return t.variables.add(i),[new Nr(Co,i)]}function BH(a,e,t){t.featureId=!0}function FH(a,e,t){t.geometryType=!0}function BC(a,e,t){t.mapState=!0}function kg(a,e,t){const i=a[0];if(a.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function hi(a,e){return function(t,i,n){const s=t[0],r=t.length-1;if(a===e){if(r!==a){const l=a===1?"":"s";throw new Error(`expected ${a} argument${l} for ${s}, got ${r}`)}}else if(r<a||r>e){const l=e===1/0?`${a} or more`:`${a} to ${e}`;throw new Error(`expected ${l} arguments for ${s}, got ${r}`)}}}function ZL(a,e,t){const i=a.length-1,n=new Array(i);for(let s=0;s<i;++s){const r=fs(a[s+1],e,t);n[s]=r}return n}function Ki(a){return function(e,t,i){const n=e.length-1,s=new Array(n);for(let r=0;r<n;++r){const l=fs(e[r+1],a,i);s[r]=l}return s}}function NH(a,e,t){const i=a[0],n=a.length-1;if(n%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${n} instead`)}function zL(a,e,t){const i=a[0],n=a.length-1;if(n%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${n} instead`)}function DH(a,e,t){const i=a.length-1,n=Co|Si|eo,s=fs(a[1],n,t),r=fs(a[a.length-1],e,t),l=new Array(i-2);for(let c=0;c<i-2;c+=2){try{const h=fs(a[c+2],s.type,t);l[c]=h}catch(h){throw new Error(`failed to parse argument ${c+1} of match expression: ${h.message}`)}try{const h=fs(a[c+3],r.type,t);l[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+2} of match expression: ${h.message}`)}}return[s,...l,r]}function VH(a,e,t){const i=a[1];let n;switch(i[0]){case"linear":n=1;break;case"exponential":const c=i[1];if(typeof c!="number"||c<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(c)} instead`);n=c;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new Nr(Si,n);let r;try{r=fs(a[2],Si,t)}catch(c){throw new Error(`failed to parse argument 1 in interpolate expression: ${c.message}`)}const l=new Array(a.length-3);for(let c=0;c<l.length;c+=2){try{const h=fs(a[c+3],Si,t);l[c]=h}catch(h){throw new Error(`failed to parse argument ${c+2} for interpolate expression: ${h.message}`)}try{const h=fs(a[c+4],e,t);l[c+1]=h}catch(h){throw new Error(`failed to parse argument ${c+3} for interpolate expression: ${h.message}`)}}return[s,r,...l]}function ZH(a,e,t){const i=fs(a[a.length-1],e,t),n=new Array(a.length-1);for(let s=0;s<n.length-1;s+=2){try{const r=fs(a[s+1],eo,t);n[s]=r}catch(r){throw new Error(`failed to parse argument ${s} of case expression: ${r.message}`)}try{const r=fs(a[s+2],i.type,t);n[s+1]=r}catch(r){throw new Error(`failed to parse argument ${s+1} of case expression: ${r.message}`)}}return n[n.length-1]=i,n}function zH(a,e,t){let i=a[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let n;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],n=Co}else n=Si;const s=new Array(i.length);for(let l=0;l<s.length;l++)try{const c=fs(i[l],n,t);s[l]=c}catch(c){throw new Error(`failed to parse haystack item ${l} for "in" expression: ${c.message}`)}return[fs(a[1],n,t),...s]}function UH(a,e,t){let i;try{i=fs(a[1],Si,t)}catch(r){throw new Error(`failed to parse first argument in palette expression: ${r.message}`)}const n=a[2];if(!Array.isArray(n))throw new Error("the second argument of palette must be an array");const s=new Array(n.length);for(let r=0;r<s.length;r++){let l;try{l=fs(n[r],Kl,t)}catch(c){throw new Error(`failed to parse color at index ${r} in palette expression: ${c.message}`)}if(!(l instanceof Nr))throw new Error(`the palette color at index ${r} must be a literal value`);s[r]=l}return[i,...s]}function Ua(...a){return function(e,t,i){const n=e[0];let s;for(let r=0;r<a.length;r++){const l=a[r](e,t,i);if(r==a.length-1){if(!l)throw new Error("expected last argument validator to return the parsed args");s=l}}return new GH(t,n,...s)}}function XH(a,e,t){const i=a[0],n=OH[i];if(!n)throw new Error(`unknown operator: ${i}`);return n(a,e,t)}function w7(a){if(!a)return"";const e=a.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return w7(a.getGeometries()[0]);default:return""}}function I7(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function xd(a,e,t){const i=fs(a,e,t);return ru(i)}function ru(a,e){if(a instanceof Nr){if(a.type===Kl&&typeof a.value=="string"){const i=JT(a.value);return function(){return i}}return function(){return a.value}}const t=a.operator;switch(t){case st.Number:case st.String:case st.Coalesce:return HH(a);case st.Get:case st.Var:case st.Has:return YH(a);case st.Id:return i=>i.featureId;case st.GeometryType:return i=>i.geometryType;case st.Concat:{const i=a.args.map(n=>ru(n));return n=>"".concat(...i.map(s=>s(n).toString()))}case st.Resolution:return i=>i.resolution;case st.Any:case st.All:case st.Between:case st.In:case st.Not:return qH(a);case st.Equal:case st.NotEqual:case st.LessThan:case st.LessThanOrEqualTo:case st.GreaterThan:case st.GreaterThanOrEqualTo:return KH(a);case st.Multiply:case st.Divide:case st.Add:case st.Subtract:case st.Clamp:case st.Mod:case st.Pow:case st.Abs:case st.Floor:case st.Ceil:case st.Round:case st.Sin:case st.Cos:case st.Atan:case st.Sqrt:return jH(a);case st.Case:return JH(a);case st.Match:return QH(a);case st.Interpolate:return $H(a);case st.ToString:return eY(a);default:throw new Error(`Unsupported operator ${t}`)}}function HH(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ru(a.args[s]);switch(t){case st.Coalesce:return s=>{for(let r=0;r<i;++r){const l=n[r](s);if(typeof l<"u"&&l!==null)return l}throw new Error("Expected one of the values to be non-null")};case st.Number:case st.String:return s=>{for(let r=0;r<i;++r){const l=n[r](s);if(typeof l===t)return l}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function YH(a,e){const i=a.args[0].value;switch(a.operator){case st.Get:return n=>{const s=a.args;let r=n.properties[i];for(let l=1,c=s.length;l<c;++l){const g=s[l].value;r=r[g]}return r};case st.Var:return n=>n.variables[i];case st.Has:return n=>{const s=a.args;if(!(i in n.properties))return!1;let r=n.properties[i];for(let l=1,c=s.length;l<c;++l){const g=s[l].value;if(!r||!Object.hasOwn(r,g))return!1;r=r[g]}return!0};default:throw new Error(`Unsupported accessor operator ${a.operator}`)}}function KH(a,e){const t=a.operator,i=ru(a.args[0]),n=ru(a.args[1]);switch(t){case st.Equal:return s=>i(s)===n(s);case st.NotEqual:return s=>i(s)!==n(s);case st.LessThan:return s=>i(s)<n(s);case st.LessThanOrEqualTo:return s=>i(s)<=n(s);case st.GreaterThan:return s=>i(s)>n(s);case st.GreaterThanOrEqualTo:return s=>i(s)>=n(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function qH(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ru(a.args[s]);switch(t){case st.Any:return s=>{for(let r=0;r<i;++r)if(n[r](s))return!0;return!1};case st.All:return s=>{for(let r=0;r<i;++r)if(!n[r](s))return!1;return!0};case st.Between:return s=>{const r=n[0](s),l=n[1](s),c=n[2](s);return r>=l&&r<=c};case st.In:return s=>{const r=n[0](s);for(let l=1;l<i;++l)if(r===n[l](s))return!0;return!1};case st.Not:return s=>!n[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function jH(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ru(a.args[s]);switch(t){case st.Multiply:return s=>{let r=1;for(let l=0;l<i;++l)r*=n[l](s);return r};case st.Divide:return s=>n[0](s)/n[1](s);case st.Add:return s=>{let r=0;for(let l=0;l<i;++l)r+=n[l](s);return r};case st.Subtract:return s=>n[0](s)-n[1](s);case st.Clamp:return s=>{const r=n[0](s),l=n[1](s);if(r<l)return l;const c=n[2](s);return r>c?c:r};case st.Mod:return s=>n[0](s)%n[1](s);case st.Pow:return s=>Math.pow(n[0](s),n[1](s));case st.Abs:return s=>Math.abs(n[0](s));case st.Floor:return s=>Math.floor(n[0](s));case st.Ceil:return s=>Math.ceil(n[0](s));case st.Round:return s=>Math.round(n[0](s));case st.Sin:return s=>Math.sin(n[0](s));case st.Cos:return s=>Math.cos(n[0](s));case st.Atan:return i===2?s=>Math.atan2(n[0](s),n[1](s)):s=>Math.atan(n[0](s));case st.Sqrt:return s=>Math.sqrt(n[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function JH(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=ru(a.args[n]);return n=>{for(let s=0;s<t-1;s+=2)if(i[s](n))return i[s+1](n);return i[t-1](n)}}function QH(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=ru(a.args[n]);return n=>{const s=i[0](n);for(let r=1;r<t-1;r+=2)if(s===i[r](n))return i[r+1](n);return i[t-1](n)}}function $H(a,e){const t=a.args.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=ru(a.args[n]);return n=>{const s=i[0](n),r=i[1](n);let l,c;for(let h=2;h<t;h+=2){const g=i[h](n);let b=i[h+1](n);const v=Array.isArray(b);if(v&&(b=MH(b)),g>=r)return h===2?b:v?tY(s,r,l,c,g,b):Gy(s,r,l,c,g,b);l=g,c=b}return c}}function eY(a,e){const t=a.operator,i=a.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=ru(a.args[s]);switch(t){case st.ToString:return s=>{const r=n[0](s);return a.args[0].type===Kl?QT(r):r.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function Gy(a,e,t,i,n,s){const r=n-t;if(r===0)return i;const l=e-t,c=a===1?l/r:(Math.pow(a,l)-1)/(Math.pow(a,r)-1);return i+c*(s-i)}function tY(a,e,t,i,n,s){if(n-t===0)return i;const l=NL(i),c=NL(s);let h=c[2]-l[2];h>180?h-=360:h<-180&&(h+=360);const g=[Gy(a,e,t,l[0],n,c[0]),Gy(a,e,t,l[1],n,c[1]),l[2]+Gy(a,e,t,0,n,h),Gy(a,e,t,i[3],n,s[3])];return LH(g)}const la={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class C7 extends _1{constructor(e,t,i,n){super(),this.extent=e,this.pixelRatio_=i,this.resolution=t,this.state=typeof n=="function"?la.IDLE:n,this.image_=null,this.loader=typeof n=="function"?n:null}changed(){this.dispatchEvent(Ba.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==la.IDLE&&this.loader){this.state=la.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;Zk(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(i=>{"image"in i&&(this.image_=i.image),"extent"in i&&(this.extent=i.extent),"resolution"in i&&(this.resolution=i.resolution),"pixelRatio"in i&&(this.pixelRatio_=i.pixelRatio),(i instanceof HTMLImageElement||Hk&&i instanceof ImageBitmap||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement)&&(this.image_=i),this.state=la.LOADED}).catch(i=>{this.state=la.ERROR,console.error(i)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function aY(a,e,t){const i=a;let n=!0,s=!1,r=!1;const l=[Y2(i,Ba.LOAD,function(){r=!0,s||e()})];return i.src&&ST?(s=!0,i.decode().then(function(){n&&e()}).catch(function(c){n&&(r?e():t())})):l.push(Y2(i,Ba.ERROR,t)),function(){n=!1,l.forEach(dn)}}function iY(a,e){return new Promise((t,i)=>{function n(){r(),t(a)}function s(){r(),i(new Error("Image load error"))}function r(){a.removeEventListener("load",n),a.removeEventListener("error",s)}a.addEventListener("load",n),a.addEventListener("error",s),e&&(a.src=e)})}function A7(a,e){return e&&(a.src=e),a.src&&ST?new Promise((t,i)=>a.decode().then(()=>t(a)).catch(n=>a.complete&&a.width?t(a):i(n))):iY(a)}function S7(a,e){return e&&(a.src=e),a.src&&ST&&Hk?a.decode().then(()=>createImageBitmap(a)).catch(t=>{if(a.complete&&a.width)return a;throw t}):A7(a)}class nY{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const i=this.cache_[t];!(e++&3)&&!i.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,i){const n=FC(e,t,i);return n in this.cache_?this.cache_[n]:null}getPattern(e,t,i){const n=FC(e,t,i);return n in this.patternCache_?this.patternCache_[n]:null}set(e,t,i,n,s){const r=FC(e,t,i),l=r in this.cache_;this.cache_[r]=n,s&&(n.getImageState()===la.IDLE&&n.load(),n.getImageState()===la.LOADING?n.ready().then(()=>{this.patternCache_[r]=Q2().createPattern(n.getImage(1),"repeat")}):this.patternCache_[r]=Q2().createPattern(n.getImage(1),"repeat")),l||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function FC(a,e,t){const i=t?Cl(t):"null";return e+":"+a+":"+i}const bl=new nY;let xy=null;class T7 extends _1{constructor(e,t,i,n,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=n===void 0?la.IDLE:n,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===la.LOADED){xy||(xy=kr(1,1,void 0,{willReadFrequently:!0})),xy.drawImage(this.image_,0,0);try{xy.getImageData(0,0,1,1),this.tainted_=!1}catch{xy=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(Ba.CHANGE)}handleImageError_(){this.imageState_=la.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=la.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],i=kr(e,t);i.fillRect(0,0,e,t),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===la.IDLE){this.image_||this.initializeImage_(),this.imageState_=la.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&A7(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==la.LOADED)return;const t=this.image_,i=kr(Math.ceil(t.width*e),Math.ceil(t.height*e)),n=i.canvas;i.scale(e,e),i.drawImage(t,0,0),i.globalCompositeOperation="multiply",i.fillStyle=TH(this.color_),i.fillRect(0,0,n.width/e,n.height/e),i.globalCompositeOperation="destination-in",i.drawImage(t,0,0),this.canvas_[e]=n}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===la.LOADED||this.imageState_===la.ERROR)e();else{const t=()=>{(this.imageState_===la.LOADED||this.imageState_===la.ERROR)&&(this.removeEventListener(Ba.CHANGE,t),e())};this.addEventListener(Ba.CHANGE,t)}})),this.ready_}}function e3(a,e,t,i,n,s){let r=e===void 0?void 0:bl.get(e,t,n);return r||(r=new T7(a,a&&"src"in a?a.src||void 0:e,t,i,n),bl.set(e,t,n,r,s)),s&&r&&!bl.getPattern(e,t,n)&&bl.set(e,t,n,r,s),r}function Uu(a){return a?Array.isArray(a)?QT(a):typeof a=="object"&&"src"in a?rY(a):a:null}function rY(a){if(!a.offset||!a.size)return bl.getPattern(a.src,"anonymous",a.color);const e=a.src+":"+a.offset,t=bl.getPattern(e,void 0,a.color);if(t)return t;const i=bl.get(a.src,"anonymous",null);if(i.getImageState()!==la.LOADED)return null;const n=kr(a.size[0],a.size[1]);return n.drawImage(i.getImage(1),a.offset[0],a.offset[1],a.size[0],a.size[1],0,0,a.size[0],a.size[1]),e3(n.canvas,e,void 0,la.LOADED,a.color,!0),bl.getPattern(e,void 0,a.color)}const E7="10px sans-serif",Ao="#000",Fp="round",rd=[],sd=0,Np="round",F0=10,N0="#000",D0="center",tx="middle",H_=[0,0,0,0],V0=1,Uc=new lu;let Xg=null,MS;const LS={},sY=function(){const e="32px ",t=["monospace","serif"],i=t.length,n="wmytzilWMYTZIL@#/&?$%10";let s,r;function l(h,g,b){let v=!0;for(let C=0;C<i;++C){const S=t[C];if(r=ax(h+" "+g+" "+e+S,n),b!=S){const L=ax(h+" "+g+" "+e+b+","+S,n);v=v&&L!=r}}return!!v}function c(){let h=!0;const g=Uc.getKeys();for(let b=0,v=g.length;b<v;++b){const C=g[b];if(Uc.get(C)<100){const[S,L,R]=C.split(`
`);l(S,L,R)?(ef(LS),Xg=null,MS=void 0,Uc.set(C,100)):(Uc.set(C,Uc.get(C)+1,!0),h=!1)}}h&&(clearInterval(s),s=void 0)}return function(h){const g=zT(h);if(!g)return;const b=g.families;for(let v=0,C=b.length;v<C;++v){const S=b[v],L=g.style+`
`+g.weight+`
`+S;Uc.get(L)===void 0&&(Uc.set(L,100,!0),l(g.style,g.weight,S)||(Uc.set(L,0,!0),s===void 0&&(s=setInterval(c,32))))}}}(),oY=function(){let a;return function(e){let t=LS[e];if(t==null){if(Xk){const i=zT(e),n=M7(e,"Žg");t=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else a||(a=document.createElement("div"),a.innerHTML="M",a.style.minHeight="0",a.style.maxHeight="none",a.style.height="auto",a.style.padding="0",a.style.border="none",a.style.position="absolute",a.style.display="block",a.style.left="-99999px"),a.style.font=e,document.body.appendChild(a),t=a.offsetHeight,document.body.removeChild(a);LS[e]=t}return t}}();function M7(a,e){return Xg||(Xg=kr(1,1)),a!=MS&&(Xg.font=a,MS=Xg.font),Xg.measureText(e)}function ax(a,e){return M7(a,e).width}function UL(a,e,t){if(e in t)return t[e];const i=e.split(`
`).reduce((n,s)=>Math.max(n,ax(a,s)),0);return t[e]=i,i}function lY(a,e){const t=[],i=[],n=[];let s=0,r=0,l=0,c=0;for(let h=0,g=e.length;h<=g;h+=2){const b=e[h];if(b===`
`||h===g){s=Math.max(s,r),n.push(r),r=0,l+=c,c=0;continue}const v=e[h+1]||a.font,C=ax(v,b);t.push(C),r+=C;const S=oY(v);i.push(S),c=Math.max(c,S)}return{width:s,height:l,widths:t,heights:i,lineWidths:n}}function uY(a,e,t,i,n,s,r,l,c,h,g){a.save(),t!==1&&(a.globalAlpha===void 0?a.globalAlpha=b=>b.globalAlpha*=t:a.globalAlpha*=t),e&&a.transform.apply(a,e),i.contextInstructions?(a.translate(c,h),a.scale(g[0],g[1]),cY(i,a)):g[0]<0||g[1]<0?(a.translate(c,h),a.scale(g[0],g[1]),a.drawImage(i,n,s,r,l,0,0,r,l)):a.drawImage(i,n,s,r,l,c,h,r*g[0],l*g[1]),a.restore()}function cY(a,e){const t=a.contextInstructions;for(let i=0,n=t.length;i<n;i+=2)Array.isArray(t[i+1])?e[t[i]].apply(e,t[i+1]):e[t[i]]=t[i+1]}class t3{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Ps(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new t3({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return Aa()}getImage(e){return Aa()}getHitDetectionImage(){return Aa()}getPixelRatio(e){return 1}getImageState(){return Aa()}getImageSize(){return Aa()}getOrigin(){return Aa()}getSize(){return Aa()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ps(e)}listenImageChange(e){Aa()}load(){Aa()}unlistenImageChange(e){Aa()}ready(){return Promise.resolve()}}const L7=t3;class a3 extends L7{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?la.LOADING:la.LOADED,this.imageState_===la.LOADING&&this.ready().then(()=>this.imageState_=la.LOADED),this.render()}clone(){const e=this.getScale(),t=new a3({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-t[0]/i[0],e[1]/2+t[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var s,r;const t=(s=this.fill_)==null?void 0:s.getKey(),i=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let n=(r=bl.get(i,null,null))==null?void 0:r.getImage(1);if(!n){const l=this.renderOptions_,c=Math.ceil(l.size*e),h=kr(c,c);this.draw_(l,h,e),n=h.canvas,bl.set(i,null,null,new T7(n,void 0,null,la.LOADED,null))}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,i){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let n=this.radius,s=this.radius2_===void 0?n:this.radius2_;if(n<s){const j=n;n=s,s=j}const r=this.radius2_===void 0?this.points_:this.points_*2,l=2*Math.PI/r,c=s*Math.sin(l),h=Math.sqrt(s*s-c*c),g=n-h,b=Math.sqrt(c*c+g*g),v=b/c;if(e==="miter"&&v<=i)return v*t;const C=t/2/v,S=t/2*(g/b),R=Math.sqrt((n+C)*(n+C)+S*S)-n;if(this.radius2_===void 0||e==="bevel")return R*2;const G=n*Math.sin(l),O=Math.sqrt(n*n-G*G),V=s-O,z=Math.sqrt(G*G+V*V)/G;if(z<=i){const j=z*t/2-s-n;return 2*Math.max(R,j)}return R*2}createRenderOptions(){let e=Fp,t=Np,i=0,n=null,s=0,r,l=0;this.stroke_&&(r=Uu(this.stroke_.getColor()??N0),l=this.stroke_.getWidth()??V0,n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??Np,e=this.stroke_.getLineCap()??Fp,i=this.stroke_.getMiterLimit()??F0);const c=this.calculateLineJoinSize_(t,l,i),h=Math.max(this.radius,this.radius2_||0),g=Math.ceil(2*h+c);return{strokeStyle:r,strokeWidth:l,size:g,lineCap:e,lineDash:n,lineDashOffset:s,lineJoin:t,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,i){if(t.scale(i,i),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let n=this.fill_.getColor();n===null&&(n=Ao),t.fillStyle=Uu(n),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let i=this.fill_.getColor(),n=0;typeof i=="string"&&(i=Cl(i)),i===null?n=1:Array.isArray(i)&&(n=i.length===4?i[3]:1),n===0&&(t=kr(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const i=this.radius;if(t===1/0)e.arc(0,0,i,0,2*Math.PI);else{const n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,r=2*Math.PI/t;for(let l=0;l<t;l++){const c=s+l*r,h=l%2===0?i:n;e.lineTo(h*Math.cos(c),h*Math.sin(c))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Ao,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}const uh=a3;class i3 extends uh{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new i3({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}const uu=i3;class n3{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new n3({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=e3(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===la.IDLE&&t.load(),t.getImageState()===la.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?Ga(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:Cl(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}const bs=n3;function XL(a,e,t,i){return t!==void 0&&i!==void 0?[t/a,i/e]:t!==void 0?t/a:i!==void 0?i/e:1}class r3 extends L7{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,n=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:i,scale:n,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const r=e.img!==void 0?e.img:null;let l=e.src;ji(!(l!==void 0&&r),"`image` and `src` cannot be provided at the same time"),(l===void 0||l.length===0)&&r&&(l=r.src||Ga(r)),ji(l!==void 0&&l.length>0,"A defined and non-empty `src` or `image` must be provided"),ji(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let c;if(e.src!==void 0?c=la.IDLE:r!==void 0&&("complete"in r?r.complete?c=r.src?la.LOADED:la.IDLE:c=la.LOADING:c=la.LOADED),this.color_=e.color!==void 0?Cl(e.color):null,this.iconImage_=e3(r,l,this.crossOrigin_,c,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let h,g;if(e.size)[h,g]=e.size;else{const b=this.getImage(1);if(b.width&&b.height)h=b.width,g=b.height;else if(b instanceof HTMLImageElement){this.initialOptions_=e;const v=()=>{if(this.unlistenImageChange(v),!this.initialOptions_)return;const C=this.iconImage_.getSize();this.setScale(XL(C[0],C[1],e.width,e.height))};this.listenImageChange(v);return}}h!==void 0&&this.setScale(XL(h,g,e.width,e.height))}}clone(){let e,t,i;return this.initialOptions_?(t=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new r3({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=n[0]),this.anchorYUnits_=="fraction"&&(e[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+n[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),i=this.getScaleArray();return[e[0]-t[0]/i[0],e[1]+t[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),i=this.iconImage_.getSize();if(!t||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==la.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==la.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(Ba.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(Ba.CHANGE,e)}ready(){return this.iconImage_.ready()}}const rc=r3;class s3{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new s3({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}const Vr=s3;class mh{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=HL,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new mh({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=HL,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function dY(a){let e;if(typeof a=="function")e=a;else{let t;Array.isArray(a)?t=a:(ji(typeof a.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[a]),e=function(){return t}}return e}let NC=null;function R7(a,e){if(!NC){const t=new bs({color:"rgba(255,255,255,0.4)"}),i=new Vr({color:"#3399CC",width:1.25});NC=[new mh({image:new uu({fill:t,stroke:i,radius:5}),fill:t,stroke:i})]}return NC}function o3(){const a={},e=[255,255,255,1],t=[0,153,255,1],i=3;return a.Polygon=[new mh({fill:new bs({color:[255,255,255,.5]})})],a.MultiPolygon=a.Polygon,a.LineString=[new mh({stroke:new Vr({color:e,width:i+2})}),new mh({stroke:new Vr({color:t,width:i})})],a.MultiLineString=a.LineString,a.Circle=a.Polygon.concat(a.LineString),a.Point=[new mh({image:new uu({radius:i*2,fill:new bs({color:t}),stroke:new Vr({color:e,width:i/2})}),zIndex:1/0})],a.MultiPoint=a.Point,a.GeometryCollection=a.Polygon.concat(a.LineString,a.Point),a}function HL(a){return a.getGeometry()}const Qn=mh,hY="#333";class l3{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=Ps(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new bs({color:hY}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new l3({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Ps(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const g1=l3;function _Y(a){return!0}function mY(a){const e=x7(),t=gY(a,e),i=I7();return function(n,s){if(i.properties=n.getPropertiesInternal(),i.resolution=s,e.featureId){const r=n.getId();r!==void 0?i.featureId=r:i.featureId=null}return e.geometryType&&(i.geometryType=w7(n.getGeometry())),t(i)}}function YL(a){const e=x7(),t=a.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=RS(a[r],e);const n=I7(),s=new Array(t);return function(r,l){if(n.properties=r.getPropertiesInternal(),n.resolution=l,e.featureId){const h=r.getId();h!==void 0?n.featureId=h:n.featureId=null}let c=0;for(let h=0;h<t;++h){const g=i[h](n);g&&(s[c]=g,c+=1)}return s.length=c,s}}function gY(a,e){const t=a.length,i=new Array(t);for(let n=0;n<t;++n){const s=a[n],r="filter"in s?xd(s.filter,eo,e):_Y;let l;if(Array.isArray(s.style)){const c=s.style.length;l=new Array(c);for(let h=0;h<c;++h)l[h]=RS(s.style[h],e)}else l=[RS(s.style,e)];i[n]={filter:r,styles:l}}return function(n){const s=[];let r=!1;for(let l=0;l<t;++l){const c=i[l].filter;if(c(n)&&!(a[l].else&&r)){r=!0;for(const h of i[l].styles){const g=h(n);g&&s.push(g)}}}return s}}function RS(a,e){const t=Z0(a,"",e),i=z0(a,"",e),n=pY(a,e),s=fY(a,e),r=To(a,"z-index",e);if(!t&&!i&&!n&&!s&&!om(a))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(a));const l=new Qn;return function(c){let h=!0;if(t){const g=t(c);g&&(h=!1),l.setFill(g)}if(i){const g=i(c);g&&(h=!1),l.setStroke(g)}if(n){const g=n(c);g&&(h=!1),l.setText(g)}if(s){const g=s(c);g&&(h=!1),l.setImage(g)}return r&&l.setZIndex(r(c)),h?null:l}}function Z0(a,e,t){let i;if(e+"fill-pattern-src"in a)i=xY(a,e+"fill-",t);else{if(a[e+"fill-color"]==="none")return s=>null;i=u3(a,e+"fill-color",t)}if(!i)return null;const n=new bs;return function(s){const r=i(s);return r===jT?null:(n.setColor(r),n)}}function z0(a,e,t){const i=To(a,e+"stroke-width",t),n=u3(a,e+"stroke-color",t);if(!i&&!n)return null;const s=qc(a,e+"stroke-line-cap",t),r=qc(a,e+"stroke-line-join",t),l=k7(a,e+"stroke-line-dash",t),c=To(a,e+"stroke-line-dash-offset",t),h=To(a,e+"stroke-miter-limit",t),g=new Vr;return function(b){if(n){const v=n(b);if(v===jT)return null;g.setColor(v)}if(i&&g.setWidth(i(b)),s){const v=s(b);if(v!=="butt"&&v!=="round"&&v!=="square")throw new Error("Expected butt, round, or square line cap");g.setLineCap(v)}if(r){const v=r(b);if(v!=="bevel"&&v!=="round"&&v!=="miter")throw new Error("Expected bevel, round, or miter line join");g.setLineJoin(v)}return l&&g.setLineDash(l(b)),c&&g.setLineDashOffset(c(b)),h&&g.setMiterLimit(h(b)),g}}function pY(a,e){const t="text-",i=qc(a,t+"value",e);if(!i)return null;const n=Z0(a,t,e),s=Z0(a,t+"background-",e),r=z0(a,t,e),l=z0(a,t+"background-",e),c=qc(a,t+"font",e),h=To(a,t+"max-angle",e),g=To(a,t+"offset-x",e),b=To(a,t+"offset-y",e),v=bp(a,t+"overflow",e),C=qc(a,t+"placement",e),S=To(a,t+"repeat",e),L=Fw(a,t+"scale",e),R=bp(a,t+"rotate-with-view",e),G=To(a,t+"rotation",e),O=qc(a,t+"align",e),V=qc(a,t+"justify",e),B=qc(a,t+"baseline",e),z=bp(a,t+"keep-upright",e),j=k7(a,t+"padding",e),re=Nw(a,t+"declutter-mode"),ne=new g1({declutterMode:re});return function(te){if(ne.setText(i(te)),n&&ne.setFill(n(te)),s&&ne.setBackgroundFill(s(te)),r&&ne.setStroke(r(te)),l&&ne.setBackgroundStroke(l(te)),c&&ne.setFont(c(te)),h&&ne.setMaxAngle(h(te)),g&&ne.setOffsetX(g(te)),b&&ne.setOffsetY(b(te)),v&&ne.setOverflow(v(te)),C){const le=C(te);if(le!=="point"&&le!=="line")throw new Error("Expected point or line for text-placement");ne.setPlacement(le)}if(S&&ne.setRepeat(S(te)),L&&ne.setScale(L(te)),R&&ne.setRotateWithView(R(te)),G&&ne.setRotation(G(te)),O){const le=O(te);if(le!=="left"&&le!=="center"&&le!=="right"&&le!=="end"&&le!=="start")throw new Error("Expected left, right, center, start, or end for text-align");ne.setTextAlign(le)}if(V){const le=V(te);if(le!=="left"&&le!=="right"&&le!=="center")throw new Error("Expected left, right, or center for text-justify");ne.setJustify(le)}if(B){const le=B(te);if(le!=="bottom"&&le!=="top"&&le!=="middle"&&le!=="alphabetic"&&le!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");ne.setTextBaseline(le)}return j&&ne.setPadding(j(te)),z&&ne.setKeepUpright(z(te)),ne}}function fY(a,e){return"icon-src"in a?yY(a,e):"shape-points"in a?bY(a,e):"circle-radius"in a?vY(a,e):null}function yY(a,e){const t="icon-",i=t+"src",n=W7(a[i],i),s=ix(a,t+"anchor",e),r=Fw(a,t+"scale",e),l=To(a,t+"opacity",e),c=ix(a,t+"displacement",e),h=To(a,t+"rotation",e),g=bp(a,t+"rotate-with-view",e),b=qL(a,t+"anchor-origin"),v=jL(a,t+"anchor-x-units"),C=jL(a,t+"anchor-y-units"),S=AY(a,t+"color"),L=IY(a,t+"cross-origin"),R=CY(a,t+"offset"),G=qL(a,t+"offset-origin"),O=nx(a,t+"width"),V=nx(a,t+"height"),B=wY(a,t+"size"),z=Nw(a,t+"declutter-mode"),j=new rc({src:n,anchorOrigin:b,anchorXUnits:v,anchorYUnits:C,color:S,crossOrigin:L,offset:R,offsetOrigin:G,height:V,width:O,size:B,declutterMode:z});return function(re){return l&&j.setOpacity(l(re)),c&&j.setDisplacement(c(re)),h&&j.setRotation(h(re)),g&&j.setRotateWithView(g(re)),r&&j.setScale(r(re)),s&&j.setAnchor(s(re)),j}}function bY(a,e){const t="shape-",i=t+"points",n=t+"radius",s=kS(a[i],i),r=kS(a[n],n),l=Z0(a,t,e),c=z0(a,t,e),h=Fw(a,t+"scale",e),g=ix(a,t+"displacement",e),b=To(a,t+"rotation",e),v=bp(a,t+"rotate-with-view",e),C=nx(a,t+"radius2"),S=nx(a,t+"angle"),L=Nw(a,t+"declutter-mode"),R=new uh({points:s,radius:r,radius2:C,angle:S,declutterMode:L});return function(G){return l&&R.setFill(l(G)),c&&R.setStroke(c(G)),g&&R.setDisplacement(g(G)),b&&R.setRotation(b(G)),v&&R.setRotateWithView(v(G)),h&&R.setScale(h(G)),R}}function vY(a,e){const t="circle-",i=Z0(a,t,e),n=z0(a,t,e),s=To(a,t+"radius",e),r=Fw(a,t+"scale",e),l=ix(a,t+"displacement",e),c=To(a,t+"rotation",e),h=bp(a,t+"rotate-with-view",e),g=Nw(a,t+"declutter-mode"),b=new uu({radius:5,declutterMode:g});return function(v){return s&&b.setRadius(s(v)),i&&b.setFill(i(v)),n&&b.setStroke(n(v)),l&&b.setDisplacement(l(v)),c&&b.setRotation(c(v)),h&&b.setRotateWithView(h(v)),r&&b.setScale(r(v)),b}}function To(a,e,t){if(!(e in a))return;const i=xd(a[e],Si,t);return function(n){return kS(i(n),e)}}function qc(a,e,t){if(!(e in a))return null;const i=xd(a[e],Co,t);return function(n){return W7(i(n),e)}}function xY(a,e,t){const i=qc(a,e+"pattern-src",t),n=KL(a,e+"pattern-offset",t),s=KL(a,e+"pattern-size",t),r=u3(a,e+"color",t);return function(l){return{src:i(l),offset:n&&n(l),size:s&&s(l),color:r&&r(l)}}}function bp(a,e,t){if(!(e in a))return null;const i=xd(a[e],eo,t);return function(n){const s=i(n);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function u3(a,e,t){if(!(e in a))return null;const i=xd(a[e],Kl,t);return function(n){return G7(i(n),e)}}function k7(a,e,t){if(!(e in a))return null;const i=xd(a[e],_m,t);return function(n){return p1(i(n),e)}}function ix(a,e,t){if(!(e in a))return null;const i=xd(a[e],_m,t);return function(n){const s=p1(i(n),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function KL(a,e,t){if(!(e in a))return null;const i=xd(a[e],_m,t);return function(n){return O7(i(n),e)}}function Fw(a,e,t){if(!(e in a))return null;const i=xd(a[e],_m|Si,t);return function(n){return SY(i(n),e)}}function nx(a,e){const t=a[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function wY(a,e){const t=a[e];if(t!==void 0){if(typeof t=="number")return Ps(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function IY(a,e){const t=a[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function qL(a,e){const t=a[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function jL(a,e){const t=a[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function CY(a,e){const t=a[e];if(t!==void 0)return p1(t,e)}function Nw(a,e){const t=a[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function AY(a,e){const t=a[e];if(t!==void 0)return G7(t,e)}function p1(a,e){if(!Array.isArray(a))throw new Error(`Expected an array for ${e}`);const t=a.length;for(let i=0;i<t;++i)if(typeof a[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return a}function W7(a,e){if(typeof a!="string")throw new Error(`Expected a string for ${e}`);return a}function kS(a,e){if(typeof a!="number")throw new Error(`Expected a number for ${e}`);return a}function G7(a,e){if(typeof a=="string")return a;const t=p1(a,e),i=t.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function O7(a,e){const t=p1(a,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function SY(a,e){return typeof a=="number"?a:O7(a,e)}const JL={RENDER_ORDER:"renderOrder"};class TY extends Sm{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(JL.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new b7(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(JL.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?R7:e;const t=EY(e);this.styleFunction_=e===null?void 0:dY(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function EY(a){if(a===void 0)return R7;if(!a)return null;if(typeof a=="function"||a instanceof Qn)return a;if(!Array.isArray(a))return YL([a]);if(a.length===0)return[];const e=a.length,t=a[0];if(t instanceof Qn){const n=new Array(e);for(let s=0;s<e;++s){const r=a[s];if(!(r instanceof Qn))throw new Error("Expected a list of style instances");n[s]=r}return n}if("style"in t){const n=new Array(e);for(let s=0;s<e;++s){const r=a[s];if(!("style"in r))throw new Error("Expected a list of rules with a style property");n[s]=r}return mY(n)}return YL(a)}const c3=TY;class MY extends sl{constructor(e,t,i,n){super(e),this.inversePixelTransform=t,this.frameState=i,this.context=n}}const P7=MY;class LY extends Lw{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){Aa()}calculateMatrices2D(e){const t=e.viewState,i=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;nu(i,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),jk(n,i)}forEachFeatureAtCoordinate(e,t,i,n,s,r,l,c){let h;const g=t.viewState;function b(B,z,j,re){return s.call(r,z,B?j:null,re)}const v=g.projection,C=bT(e.slice(),v),S=[[0,0]];if(v.canWrapX()&&n){const B=v.getExtent(),z=fi(B);S.push([-z,0],[z,0])}const L=t.layerStatesArray,R=L.length,G=[],O=[];for(let B=0;B<S.length;B++)for(let z=R-1;z>=0;--z){const j=L[z],re=j.layer;if(re.hasRenderer()&&qT(j,g)&&l.call(c,re)){const ne=re.getRenderer(),te=re.getSource();if(ne&&te){const le=te.getWrapX()?C:e,ue=b.bind(null,j.managed);O[0]=le[0]+S[B][0],O[1]=le[1]+S[B][1],h=ne.forEachFeatureAtCoordinate(O,t,i,ue,G)}if(h)return h}}if(G.length===0)return;const V=1/G.length;return G.forEach((B,z)=>B.distanceSq+=z*V),G.sort((B,z)=>B.distanceSq-z.distanceSq),G.some(B=>h=B.callback(B.feature,B.layer,B.geometry)),h}hasFeatureAtCoordinate(e,t,i,n,s,r){return this.forEachFeatureAtCoordinate(e,t,i,n,Mh,this,s,r)!==void 0}getMap(){return this.map_}renderFrame(e){Aa()}scheduleExpireIconCache(e){bl.canExpireCache()&&e.postRenderFunctions.push(RY)}}function RY(a,e){bl.expire()}const kY=LY;class WY extends kY{constructor(e){super(e),this.fontChangeListenerKey_=La(Uc,dm.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Dh+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const i=this.getMap();if(i.hasListener(e)){const n=new P7(e,void 0,t);i.dispatchEvent(n)}}disposeInternal(){dn(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ro.PRECOMPOSE,e);const t=e.layerStatesArray.sort((l,c)=>l.zIndex-c.zIndex);t.some(l=>l.layer instanceof c3&&l.layer.getDeclutter())&&(e.declutter={});const n=e.viewState;this.children_.length=0;const s=[];let r=null;for(let l=0,c=t.length;l<c;++l){const h=t[l];e.layerIndex=l;const g=h.layer,b=g.getSourceState();if(!qT(h,n)||b!="ready"&&b!="undefined"){g.unrender();continue}const v=g.render(e,r);v&&(v!==r&&(this.children_.push(v),r=v),s.push(h))}this.declutter(e,s),MX(this.element_,this.children_),this.dispatchRenderEvent(Ro.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let i=t.length-1;i>=0;--i){const n=t[i],s=n.layer;s.getDeclutter()&&s.renderDeclutter(e,n)}t.forEach(i=>i.layer.renderDeferred(e))}}}const GY=WY;function B7(a){if(a instanceof Sm){a.setMapInternal(null);return}a instanceof rf&&a.getLayers().forEach(B7)}function F7(a,e){if(a instanceof Sm){a.setMapInternal(e);return}if(a instanceof rf){const t=a.getLayers().getArray();for(let i=0,n=t.length;i<n;++i)F7(t[i],e)}}let OY=class extends lu{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=PY(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:Uk,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Wo(),this.pixelToCoordinateTransform_=Wo(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||OX(),this.interactions=t.interactions||_H({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new NU(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Qr.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Qr.VIEW,this.handleViewChanged_),this.addChangeListener(Qr.SIZE,this.handleSizeChanged_),this.addChangeListener(Qr.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const i=this;e.view&&!(e.view instanceof Vu)&&e.view.then(function(n){i.setView(new Vu(n))}),this.controls.addEventListener(Rr.ADD,n=>{n.element.setMap(this)}),this.controls.addEventListener(Rr.REMOVE,n=>{n.element.setMap(null)}),this.interactions.addEventListener(Rr.ADD,n=>{n.element.setMap(this)}),this.interactions.addEventListener(Rr.REMOVE,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(Rr.ADD,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(Rr.REMOVE,n=>{const s=n.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){F7(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,r=i.layerFilter!==void 0?i.layerFilter:Mh,l=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,l,t,null,r,null)}getFeaturesAtPixel(e,t){const i=[];return this.forEachFeatureAtPixel(e,function(n){i.push(n)},t),i}getAllLayers(){const e=[];function t(i){i.forEach(function(n){n instanceof rf?t(n.getLayers()):e.push(n)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const n=t.layerFilter!==void 0?t.layerFilter:Mh,s=t.hitTolerance!==void 0?t.hitTolerance:0,r=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,r,n,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),n=this.getSize(),s=i.width/n[0],r=i.height/n[1],l="changedTouches"in e?e.changedTouches[0]:e;return[(l.clientX-i.left)/s,(l.clientY-i.top)/r]}getTarget(){return this.get(Qr.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return cm(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?br(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Qr.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof $o){t.setLayers(e);return}const i=t.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const n=e[t];if(!n.visible)continue;const s=n.layer.getRenderer();if(s&&!s.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(e){const t=jn(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?br(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Qr.SIZE)}getView(){return this.get(Qr.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,i,n){return DU(this.frameState_,e,t,i,n)}handleBrowserEvent(e,t){t=t||e.type;const i=new Yc(t,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,i=t.type;if(i===xS.POINTERDOWN||i===Ba.WHEEL||i===Ba.KEYDOWN){const n=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():n,r=t.target,l=s instanceof ShadowRoot?s.host===r?s.host.ownerDocument:s:s===n?n.documentElement:s;if(this.overlayContainerStopEvent_.contains(r)||!l.contains(r))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const n=this.getInteractions().getArray().slice();for(let s=n.length-1;s>=0;s--){const r=n[s];if(r.getMap()!==this||!r.getActive()||!this.getTargetElement())continue;if(!r.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let n=this.maxTilesLoading_,s=n;if(e){const r=e.viewHints;if(r[Vn.ANIMATING]||r[Vn.INTERACTING]){const l=Date.now()-e.time>8;n=l?0:8,s=l?0:2}}t.getTilesLoading()<n&&(t.reprioritize(),t.loadMoreTiles(n,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(Ro.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ro.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new zg(Kc.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new zg(Kc.LOADSTART,this,e))));const i=this.postRenderFunctions_;if(e)for(let n=0,s=i.length;n<s;++n)i[n](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,n=this.targetChangeHandlerKeys_.length;i<n;++i)dn(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ba.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ba.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new GY(this)),this.mapBrowserEventHandler_=new OU(this,this.moveTolerance_);for(const s in Ti)this.mapBrowserEventHandler_.addEventListener(Ti[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ba.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ba.WHEEL,this.boundHandleBrowserEvent_,Yk?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const s=t.getRootNode();i=s instanceof ShadowRoot?s.host:t}this.targetChangeHandlerKeys_=[La(i,Ba.KEYDOWN,this.handleBrowserEvent,this),La(i,Ba.KEYPRESS,this.handleBrowserEvent,this)];const n=t.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(dn(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(dn(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=La(e,dm.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=La(e,Ba.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(dn),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new nh("addlayer",e)),this.layerGroupPropertyListenerKeys_=[La(e,dm.PROPERTYCHANGE,this.render,this),La(e,Ba.CHANGE,this.render,this),La(e,"addlayer",this.handleLayerAdd_,this),La(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,i=e.length;t<i;++t){const n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){B7(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(t!==void 0&&DL(t)&&i&&i.isDef()){const r=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),l=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:O0(l.center,l.resolution,l.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:l,viewHints:r,wantedTiles:{},mapId:Ga(this),renderTargets:{}},l.nextCenter&&l.nextResolution){const c=isNaN(l.nextRotation)?l.rotation:l.nextRotation;s.nextExtent=O0(l.nextCenter,l.nextResolution,c,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!xm(this.previousExtent_)&&!rm(s.extent,this.previousExtent_))&&(this.dispatchEvent(new zg(Kc.MOVESTART,this,n)),this.previousExtent_=Qp(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Vn.ANIMATING]&&!s.viewHints[Vn.INTERACTING]&&!rm(s.extent,this.previousExtent_)&&(this.dispatchEvent(new zg(Kc.MOVEEND,this,s)),Ak(s.extent,this.previousExtent_))),this.dispatchEvent(new zg(Kc.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(Kc.LOADSTART)||this.hasListener(Kc.LOADEND)||this.hasListener(Ro.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new nh("removelayer",t)),this.set(Qr.LAYERGROUP,e)}setSize(e){this.set(Qr.SIZE,e)}setTarget(e){this.set(Qr.TARGET,e)}setView(e){if(!e||e instanceof Vu){this.set(Qr.VIEW,e);return}this.set(Qr.VIEW,new Vu);const t=this;e.then(function(i){t.setView(new Vu(i))})}updateSize(){const e=this.getTargetElement();let t;if(e){const n=getComputedStyle(e),s=e.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=e.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(s)&&!isNaN(r)&&(t=[Math.max(0,s),Math.max(0,r)],!DL(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Ck("No map visible because the map container's width or height are 0."))}const i=this.getSize();t&&(!i||!vd(t,i))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function PY(a){let e=null;a.keyboardEventTarget!==void 0&&(e=typeof a.keyboardEventTarget=="string"?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);const t={},i=a.layers&&typeof a.layers.getLayers=="function"?a.layers:new rf({layers:a.layers});t[Qr.LAYERGROUP]=i,t[Qr.TARGET]=a.target,t[Qr.VIEW]=a.view instanceof Vu?a.view:new Vu;let n;a.controls!==void 0&&(Array.isArray(a.controls)?n=new $o(a.controls.slice()):(ji(typeof a.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=a.controls));let s;a.interactions!==void 0&&(Array.isArray(a.interactions)?s=new $o(a.interactions.slice()):(ji(typeof a.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=a.interactions));let r;return a.overlays!==void 0?Array.isArray(a.overlays)?r=new $o(a.overlays.slice()):(ji(typeof a.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),r=a.overlays):r=new $o,{controls:n,interactions:s,keyboardEventTarget:e,overlays:r,values:t}}const BY=OY;var Hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function FY(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var N7={exports:{}};(function(a,e){(function(t,i){a.exports=i()})(Hg,function(){var t,i,n;function s(r,l){if(!t)t=l;else if(!i)i=l;else{var c="var sharedChunk = {}; ("+t+")(sharedChunk); ("+i+")(sharedChunk);",h={};t(h),n=l(h),typeof window<"u"&&(n.workerUrl=window.URL.createObjectURL(new Blob([c],{type:"text/javascript"})))}}return s(["exports"],function(r){function l(o,u){return o(u={exports:{}},u.exports),u.exports}var c=h;function h(o,u,d,f){this.cx=3*o,this.bx=3*(d-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(f-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=f,this.p2x=d,this.p2y=f}h.prototype.sampleCurveX=function(o){return((this.ax*o+this.bx)*o+this.cx)*o},h.prototype.sampleCurveY=function(o){return((this.ay*o+this.by)*o+this.cy)*o},h.prototype.sampleCurveDerivativeX=function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},h.prototype.solveCurveX=function(o,u){var d,f,x,w,A;for(u===void 0&&(u=1e-6),x=o,A=0;A<8;A++){if(w=this.sampleCurveX(x)-o,Math.abs(w)<u)return x;var M=this.sampleCurveDerivativeX(x);if(Math.abs(M)<1e-6)break;x-=w/M}if((x=o)<(d=0))return d;if(x>(f=1))return f;for(;d<f;){if(w=this.sampleCurveX(x),Math.abs(w-o)<u)return x;o>w?d=x:f=x,x=.5*(f-d)+d}return x},h.prototype.solve=function(o,u){return this.sampleCurveY(this.solveCurveX(o,u))};var g=b;function b(o,u){this.x=o,this.y=u}b.prototype={clone:function(){return new b(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,u){return this.clone()._rotateAround(o,u)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var u=o.x-this.x,d=o.y-this.y;return u*u+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,u){return Math.atan2(this.x*u-this.y*o,this.x*o+this.y*u)},_matMult:function(o){var u=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=u,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var u=Math.cos(o),d=Math.sin(o),f=d*this.x+u*this.y;return this.x=u*this.x-d*this.y,this.y=f,this},_rotateAround:function(o,u){var d=Math.cos(o),f=Math.sin(o),x=u.y+f*(this.x-u.x)+d*(this.y-u.y);return this.x=u.x+d*(this.x-u.x)-f*(this.y-u.y),this.y=x,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},b.convert=function(o){return o instanceof b?o:Array.isArray(o)?new b(o[0],o[1]):o};var v=typeof self<"u"?self:{},C=Math.pow(2,53)-1;function S(o,u,d,f){var x=new c(o,u,d,f);return function(w){return x.solve(w)}}var L=S(.25,.1,.25,1);function R(o,u,d){return Math.min(d,Math.max(u,o))}function G(o,u,d){var f=d-u,x=((o-u)%f+f)%f+u;return x===u?d:x}function O(o){for(var u=[],d=arguments.length-1;d-- >0;)u[d]=arguments[d+1];for(var f=0,x=u;f<x.length;f+=1){var w=x[f];for(var A in w)o[A]=w[A]}return o}var V=1;function B(){return V++}function z(){return function o(u){return u?(u^16*Math.random()>>u/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function j(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function re(o,u){o.forEach(function(d){u[d]&&(u[d]=u[d].bind(u))})}function ne(o,u){return o.indexOf(u,o.length-u.length)!==-1}function te(o,u,d){var f={};for(var x in o)f[x]=u.call(d||this,o[x],x,o);return f}function le(o,u,d){var f={};for(var x in o)u.call(d||this,o[x],x,o)&&(f[x]=o[x]);return f}function ue(o){return Array.isArray(o)?o.map(ue):typeof o=="object"&&o?te(o,ue):o}var fe={};function be(o){fe[o]||(typeof console<"u"&&console.warn(o),fe[o]=!0)}function Pe(o,u,d){return(d.y-o.y)*(u.x-o.x)>(u.y-o.y)*(d.x-o.x)}function Be(o){for(var u=0,d=0,f=o.length,x=f-1,w=void 0,A=void 0;d<f;x=d++)u+=((A=o[x]).x-(w=o[d]).x)*(w.y+A.y);return u}function Me(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ke(o){var u={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(f,x,w,A){var M=w||A;return u[x]=!M||M.toLowerCase(),""}),u["max-age"]){var d=parseInt(u["max-age"],10);isNaN(d)?delete u["max-age"]:u["max-age"]=d}return u}var Je=null;function ut(o){if(Je==null){var u=o.navigator?o.navigator.userAgent:null;Je=!!o.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return Je}function ht(o){try{var u=v[o];return u.setItem("_mapbox_test_",1),u.removeItem("_mapbox_test_"),!0}catch{return!1}}var Dt,We,oa,li,da=v.performance&&v.performance.now?v.performance.now.bind(v.performance):Date.now.bind(Date),Ji=v.requestAnimationFrame||v.mozRequestAnimationFrame||v.webkitRequestAnimationFrame||v.msRequestAnimationFrame,sa=v.cancelAnimationFrame||v.mozCancelAnimationFrame||v.webkitCancelAnimationFrame||v.msCancelAnimationFrame,Ni={now:da,frame:function(o){var u=Ji(o);return{cancel:function(){return sa(u)}}},getImageData:function(o,u){u===void 0&&(u=0);var d=v.document.createElement("canvas"),f=d.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return d.width=o.width,d.height=o.height,f.drawImage(o,0,0,o.width,o.height),f.getImageData(-u,-u,o.width+2*u,o.height+2*u)},resolveURL:function(o){return Dt||(Dt=v.document.createElement("a")),Dt.href=o,Dt.href},hardwareConcurrency:v.navigator&&v.navigator.hardwareConcurrency||4,get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(We==null&&(We=v.matchMedia("(prefers-reduced-motion: reduce)")),We.matches)}},ka={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},bi={supported:!1,testSupport:function(o){!cr&&li&&(On?pe(o):oa=o)}},cr=!1,On=!1;function pe(o){var u=o.createTexture();o.bindTexture(o.TEXTURE_2D,u);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,li),o.isContextLost())return;bi.supported=!0}catch{}o.deleteTexture(u),cr=!0}v.document&&((li=v.document.createElement("img")).onload=function(){oa&&pe(oa),oa=null,On=!0},li.onerror=function(){cr=!0,oa=null},li.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Ee="01",ze=function(o,u){this._transformRequestFn=o,this._customAccessToken=u,this._createSkuToken()};function et(o){return o.indexOf("mapbox:")===0}ze.prototype._createSkuToken=function(){var o=function(){for(var u="",d=0;d<10;d++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Ee,u].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt},ze.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ze.prototype.transformRequest=function(o,u){return this._transformRequestFn&&this._transformRequestFn(o,u)||{url:o}},ze.prototype.normalizeStyleURL=function(o,u){if(!et(o))return o;var d=ft(o);return d.path="/styles/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||u)},ze.prototype.normalizeGlyphsURL=function(o,u){if(!et(o))return o;var d=ft(o);return d.path="/fonts/v1"+d.path,this._makeAPIURL(d,this._customAccessToken||u)},ze.prototype.normalizeSourceURL=function(o,u){if(!et(o))return o;var d=ft(o);return d.path="/v4/"+d.authority+".json",d.params.push("secure"),this._makeAPIURL(d,this._customAccessToken||u)},ze.prototype.normalizeSpriteURL=function(o,u,d,f){var x=ft(o);return et(o)?(x.path="/styles/v1"+x.path+"/sprite"+u+d,this._makeAPIURL(x,this._customAccessToken||f)):(x.path+=""+u+d,vt(x))},ze.prototype.normalizeTileURL=function(o,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!et(o))return o;var d=ft(o);d.path=d.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Ni.devicePixelRatio>=2||u===512?"@2x":"")+(bi.supported?".webp":"$1")),d.path=d.path.replace(/^.+\/v4\//,"/"),d.path="/v4"+d.path;var f=this._customAccessToken||function(x){for(var w=0,A=x;w<A.length;w+=1){var M=A[w].match(/^access_token=(.*)$/);if(M)return M[1]}return null}(d.params)||ka.ACCESS_TOKEN;return ka.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&d.params.push("sku="+this._skuToken),this._makeAPIURL(d,f)},ze.prototype.canonicalizeTileURL=function(o,u){var d=ft(o);if(!d.path.match(/(^\/v4\/)/)||!d.path.match(/\.[\w]+$/))return o;var f="mapbox://tiles/";f+=d.path.replace("/v4/","");var x=d.params;return u&&(x=x.filter(function(w){return!w.match(/^access_token=/)})),x.length&&(f+="?"+x.join("&")),f},ze.prototype.canonicalizeTileset=function(o,u){for(var d=!!u&&et(u),f=[],x=0,w=o.tiles||[];x<w.length;x+=1){var A=w[x];ot(A)?f.push(this.canonicalizeTileURL(A,d)):f.push(A)}return f},ze.prototype._makeAPIURL=function(o,u){var d="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",f=ft(ka.API_URL);if(o.protocol=f.protocol,o.authority=f.authority,o.protocol==="http"){var x=o.params.indexOf("secure");x>=0&&o.params.splice(x,1)}if(f.path!=="/"&&(o.path=""+f.path+o.path),!ka.REQUIRE_ACCESS_TOKEN)return vt(o);if(!(u=u||ka.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+d);if(u[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+d);return o.params=o.params.filter(function(w){return w.indexOf("access_token")===-1}),o.params.push("access_token="+u),vt(o)};var lt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ot(o){return lt.test(o)}var Tt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ft(o){var u=o.match(Tt);if(!u)throw new Error("Unable to parse URL object");return{protocol:u[1],authority:u[2],path:u[3]||"/",params:u[4]?u[4].split("&"):[]}}function vt(o){var u=o.params.length?"?"+o.params.join("&"):"";return o.protocol+"://"+o.authority+o.path+u}function mt(o){if(!o)return null;var u=o.split(".");if(!u||u.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(u[1]).split("").map(function(d){return"%"+("00"+d.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var Ot=function(o){this.type=o,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ot.prototype.getStorageKey=function(o){var u,d=mt(ka.ACCESS_TOKEN);return u=d&&d.u?v.btoa(encodeURIComponent(d.u).replace(/%([0-9A-F]{2})/g,function(f,x){return String.fromCharCode(+("0x"+x))})):ka.ACCESS_TOKEN||"",o?"mapbox.eventData."+o+":"+u:"mapbox.eventData:"+u},Ot.prototype.fetchEventData=function(){var o=ht("localStorage"),u=this.getStorageKey(),d=this.getStorageKey("uuid");if(o)try{var f=v.localStorage.getItem(u);f&&(this.eventData=JSON.parse(f));var x=v.localStorage.getItem(d);x&&(this.anonId=x)}catch{be("Unable to read from LocalStorage")}},Ot.prototype.saveEventData=function(){var o=ht("localStorage"),u=this.getStorageKey(),d=this.getStorageKey("uuid");if(o)try{v.localStorage.setItem(d,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{be("Unable to write to LocalStorage")}},Ot.prototype.processRequests=function(o){},Ot.prototype.postEvent=function(o,u,d,f){var x=this;if(ka.EVENTS_URL){var w=ft(ka.EVENTS_URL);w.params.push("access_token="+(f||ka.ACCESS_TOKEN||""));var A={event:this.type,created:new Date(o).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Ee,userId:this.anonId},M=u?O(A,u):A,W={url:vt(w),headers:{"Content-Type":"text/plain"},body:JSON.stringify([M])};this.pendingRequest=Ja(W,function(P){x.pendingRequest=null,d(P),x.saveEventData(),x.processRequests(f)})}},Ot.prototype.queueRequest=function(o,u){this.queue.push(o),this.processRequests(u)};var Lt,qt,Qt=function(o){function u(){o.call(this,"map.load"),this.success={},this.skuToken=""}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.postMapLoadEvent=function(d,f,x,w){this.skuToken=x;var A=!(!w&&!ka.ACCESS_TOKEN),M=Array.isArray(d)&&d.some(function(W){return et(W)||ot(W)});ka.EVENTS_URL&&A&&M&&this.queueRequest({id:f,timestamp:Date.now()},w)},u.prototype.processRequests=function(d){var f=this;if(!this.pendingRequest&&this.queue.length!==0){var x=this.queue.shift(),w=x.id,A=x.timestamp;w&&this.success[w]||(this.anonId||this.fetchEventData(),j(this.anonId)||(this.anonId=z()),this.postEvent(A,{skuToken:this.skuToken},function(M){M||w&&(f.success[w]=!0)},d))}},u}(Ot),Ea=new(function(o){function u(d){o.call(this,"appUserTurnstile"),this._customAccessToken=d}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.postTurnstileEvent=function(d,f){ka.EVENTS_URL&&ka.ACCESS_TOKEN&&Array.isArray(d)&&d.some(function(x){return et(x)||ot(x)})&&this.queueRequest(Date.now(),f)},u.prototype.processRequests=function(d){var f=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var x=mt(ka.ACCESS_TOKEN),w=x?x.u:ka.ACCESS_TOKEN,A=w!==this.eventData.tokenU;j(this.anonId)||(this.anonId=z(),A=!0);var M=this.queue.shift();if(this.eventData.lastSuccess){var W=new Date(this.eventData.lastSuccess),P=new Date(M),N=(M-this.eventData.lastSuccess)/864e5;A=A||N>=1||N<-1||W.getDate()!==P.getDate()}else A=!0;if(!A)return this.processRequests();this.postEvent(M,{"enabled.telemetry":!1},function(Z){Z||(f.eventData.lastSuccess=M,f.eventData.tokenU=w)},d)}},u}(Ot)),si=Ea.postTurnstileEvent.bind(Ea),ni=new Qt,pn=ni.postMapLoadEvent.bind(ni),Di=500,Pn=50;function fn(){v.caches&&!Lt&&(Lt=v.caches.open("mapbox-tiles"))}function dr(o){var u=o.indexOf("?");return u<0?o:o.slice(0,u)}var Ir,wi=1/0;function hn(){return Ir==null&&(Ir=v.OffscreenCanvas&&new v.OffscreenCanvas(1,1).getContext("2d")&&typeof v.createImageBitmap=="function"),Ir}var Vs={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Vs);var oo=function(o){function u(d,f,x){f===401&&ot(x)&&(d+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),o.call(this,d),this.status=f,this.url=x,this.name=this.constructor.name,this.message=d}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},u}(Error),ns=Me()?function(){return self.worker&&self.worker.referrer}:function(){return(v.location.protocol==="blob:"?v.parent:v).location.href},Tn,Or,Bo=function(o,u){if(!(/^file:/.test(d=o.url)||/^file:/.test(ns())&&!/^\w+:/.test(d))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(f,x){var w,A=new v.AbortController,M=new v.Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,referrer:ns(),signal:A.signal}),W=!1,P=!1,N=(w=M.url).indexOf("sku=")>0&&ot(w);f.type==="json"&&M.headers.set("Accept","application/json");var Z=function(Q,de,he){if(!P){if(Q&&Q.message!=="SecurityError"&&be(Q),de&&he)return Y(de);var Se=Date.now();v.fetch(M).then(function(ye){if(ye.ok){var Le=N?ye.clone():null;return Y(ye,Le,Se)}return x(new oo(ye.statusText,ye.status,f.url))}).catch(function(ye){ye.code!==20&&x(new Error(ye.message))})}},Y=function(Q,de,he){(f.type==="arrayBuffer"?Q.arrayBuffer():f.type==="json"?Q.json():Q.text()).then(function(Se){P||(de&&he&&function(ye,Le,Oe){if(fn(),Lt){var Ne={status:Le.status,statusText:Le.statusText,headers:new v.Headers};Le.headers.forEach(function($e,_t){return Ne.headers.set(_t,$e)});var Ze=ke(Le.headers.get("Cache-Control")||"");Ze["no-store"]||(Ze["max-age"]&&Ne.headers.set("Expires",new Date(Oe+1e3*Ze["max-age"]).toUTCString()),new Date(Ne.headers.get("Expires")).getTime()-Oe<42e4||function($e,_t){if(qt===void 0)try{new Response(new ReadableStream),qt=!0}catch{qt=!1}qt?_t($e.body):$e.blob().then(_t)}(Le,function($e){var _t=new v.Response($e,Ne);fn(),Lt&&Lt.then(function(xt){return xt.put(dr(ye.url),_t)}).catch(function(xt){return be(xt.message)})}))}}(M,de,he),W=!0,x(null,Se,Q.headers.get("Cache-Control"),Q.headers.get("Expires")))}).catch(function(Se){P||x(new Error(Se.message))})};return N?function(Q,de){if(fn(),!Lt)return de(null);var he=dr(Q.url);Lt.then(function(Se){Se.match(he).then(function(ye){var Le=function(Oe){if(!Oe)return!1;var Ne=new Date(Oe.headers.get("Expires")||0),Ze=ke(Oe.headers.get("Cache-Control")||"");return Ne>Date.now()&&!Ze["no-cache"]}(ye);Se.delete(he),Le&&Se.put(he,ye.clone()),de(null,ye,Le)}).catch(de)}).catch(de)}(M,Z):Z(null,null),{cancel:function(){P=!0,W||A.abort()}}}(o,u);if(Me()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,u,void 0,!0)}var d;return function(f,x){var w=new v.XMLHttpRequest;for(var A in w.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(w.responseType="arraybuffer"),f.headers)w.setRequestHeader(A,f.headers[A]);return f.type==="json"&&(w.responseType="text",w.setRequestHeader("Accept","application/json")),w.withCredentials=f.credentials==="include",w.onerror=function(){x(new Error(w.statusText))},w.onload=function(){if((w.status>=200&&w.status<300||w.status===0)&&w.response!==null){var M=w.response;if(f.type==="json")try{M=JSON.parse(w.response)}catch(W){return x(W)}x(null,M,w.getResponseHeader("Cache-Control"),w.getResponseHeader("Expires"))}else x(new oo(w.statusText,w.status,f.url))},w.send(f.body),{cancel:function(){return w.abort()}}}(o,u)},nn=function(o,u){return Bo(O(o,{type:"arrayBuffer"}),u)},Ja=function(o,u){return Bo(O(o,{method:"POST"}),u)},D="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Tn=[],Or=0;var H=function(o,u){if(bi.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),Or>=ka.MAX_PARALLEL_IMAGE_REQUESTS){var d={requestParameters:o,callback:u,cancelled:!1,cancel:function(){this.cancelled=!0}};return Tn.push(d),d}Or++;var f=!1,x=function(){if(!f)for(f=!0,Or--;Tn.length&&Or<ka.MAX_PARALLEL_IMAGE_REQUESTS;){var A=Tn.shift();A.cancelled||(A.cancel=H(A.requestParameters,A.callback).cancel)}},w=nn(o,function(A,M,W,P){x(),A?u(A):M&&(hn()?function(N,Z){var Y=new v.Blob([new Uint8Array(N)],{type:"image/png"});v.createImageBitmap(Y).then(function(Q){Z(null,Q)}).catch(function(Q){Z(new Error("Could not load image because of "+Q.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(M,u):function(N,Z,Y,Q){var de=new v.Image,he=v.URL;de.onload=function(){Z(null,de),he.revokeObjectURL(de.src),de.onload=null,v.requestAnimationFrame(function(){de.src=D})},de.onerror=function(){return Z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Se=new v.Blob([new Uint8Array(N)],{type:"image/png"});de.cacheControl=Y,de.expires=Q,de.src=N.byteLength?he.createObjectURL(Se):D}(M,u,W,P))});return{cancel:function(){w.cancel(),x()}}};function K(o,u,d){d[o]&&d[o].indexOf(u)!==-1||(d[o]=d[o]||[],d[o].push(u))}function ae(o,u,d){if(d&&d[o]){var f=d[o].indexOf(u);f!==-1&&d[o].splice(f,1)}}var oe=function(o,u){u===void 0&&(u={}),O(this,u),this.type=o},Ce=function(o){function u(d,f){f===void 0&&(f={}),o.call(this,"error",O({error:d},f))}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u}(oe),ve=function(){};ve.prototype.on=function(o,u){return this._listeners=this._listeners||{},K(o,u,this._listeners),this},ve.prototype.off=function(o,u){return ae(o,u,this._listeners),ae(o,u,this._oneTimeListeners),this},ve.prototype.once=function(o,u){return this._oneTimeListeners=this._oneTimeListeners||{},K(o,u,this._oneTimeListeners),this},ve.prototype.fire=function(o,u){typeof o=="string"&&(o=new oe(o,u||{}));var d=o.type;if(this.listens(d)){o.target=this;for(var f=0,x=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];f<x.length;f+=1)x[f].call(this,o);for(var w=0,A=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];w<A.length;w+=1){var M=A[w];ae(d,M,this._oneTimeListeners),M.call(this,o)}var W=this._eventedParent;W&&(O(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),W.fire(o))}else o instanceof Ce&&console.error(o.error);return this},ve.prototype.listens=function(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)},ve.prototype.setEventedParent=function(o,u){return this._eventedParent=o,this._eventedParentData=u,this};var J={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},_e=function(o,u,d,f){this.message=(o?o+": ":"")+d,f&&(this.identifier=f),u!=null&&u.__line__&&(this.line=u.__line__)};function Re(o){var u=o.value;return u?[new _e(o.key,u,"constants have been deprecated as of v8")]:[]}function tt(o){for(var u=[],d=arguments.length-1;d-- >0;)u[d]=arguments[d+1];for(var f=0,x=u;f<x.length;f+=1){var w=x[f];for(var A in w)o[A]=w[A]}return o}function ct(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Xe(o){if(Array.isArray(o))return o.map(Xe);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){var u={};for(var d in o)u[d]=Xe(o[d]);return u}return ct(o)}var nt=function(o){function u(d,f){o.call(this,f),this.message=f,this.key=d}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u}(Error),Pt=function(o,u){u===void 0&&(u=[]),this.parent=o,this.bindings={};for(var d=0,f=u;d<f.length;d+=1){var x=f[d];this.bindings[x[0]]=x[1]}};Pt.prototype.concat=function(o){return new Pt(this,o)},Pt.prototype.get=function(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(o+" not found in scope.")},Pt.prototype.has=function(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)};var Et={kind:"null"},Ye={kind:"number"},Rt={kind:"string"},It={kind:"boolean"},At={kind:"color"},Oa={kind:"object"},qe={kind:"value"},Ae={kind:"collator"},at={kind:"formatted"},rt={kind:"resolvedImage"};function $t(o,u){return{kind:"array",itemType:o,N:u}}function wa(o){if(o.kind==="array"){var u=wa(o.itemType);return typeof o.N=="number"?"array<"+u+", "+o.N+">":o.itemType.kind==="value"?"array":"array<"+u+">"}return o.kind}var Ii=[Et,Ye,Rt,It,At,at,Oa,$t(qe),rt];function Sa(o,u){if(u.kind==="error")return null;if(o.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!Sa(o.itemType,u.itemType))&&(typeof o.N!="number"||o.N===u.N))return null}else{if(o.kind===u.kind)return null;if(o.kind==="value"){for(var d=0,f=Ii;d<f.length;d+=1)if(!Sa(f[d],u))return null}}return"Expected "+wa(o)+" but found "+wa(u)+" instead."}function Gi(o,u){return u.some(function(d){return d.kind===o.kind})}function Ta(o,u){return u.some(function(d){return d==="null"?o===null:d==="array"?Array.isArray(o):d==="object"?o&&!Array.isArray(o)&&typeof o=="object":d===typeof o})}var Da=l(function(o,u){var d={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function f(M){return(M=Math.round(M))<0?0:M>255?255:M}function x(M){return f(M[M.length-1]==="%"?parseFloat(M)/100*255:parseInt(M))}function w(M){return(W=M[M.length-1]==="%"?parseFloat(M)/100:parseFloat(M))<0?0:W>1?1:W;var W}function A(M,W,P){return P<0?P+=1:P>1&&(P-=1),6*P<1?M+(W-M)*P*6:2*P<1?W:3*P<2?M+(W-M)*(2/3-P)*6:M}try{u.parseCSSColor=function(M){var W,P=M.replace(/ /g,"").toLowerCase();if(P in d)return d[P].slice();if(P[0]==="#")return P.length===4?(W=parseInt(P.substr(1),16))>=0&&W<=4095?[(3840&W)>>4|(3840&W)>>8,240&W|(240&W)>>4,15&W|(15&W)<<4,1]:null:P.length===7&&(W=parseInt(P.substr(1),16))>=0&&W<=16777215?[(16711680&W)>>16,(65280&W)>>8,255&W,1]:null;var N=P.indexOf("("),Z=P.indexOf(")");if(N!==-1&&Z+1===P.length){var Y=P.substr(0,N),Q=P.substr(N+1,Z-(N+1)).split(","),de=1;switch(Y){case"rgba":if(Q.length!==4)return null;de=w(Q.pop());case"rgb":return Q.length!==3?null:[x(Q[0]),x(Q[1]),x(Q[2]),de];case"hsla":if(Q.length!==4)return null;de=w(Q.pop());case"hsl":if(Q.length!==3)return null;var he=(parseFloat(Q[0])%360+360)%360/360,Se=w(Q[1]),ye=w(Q[2]),Le=ye<=.5?ye*(Se+1):ye+Se-ye*Se,Oe=2*ye-Le;return[f(255*A(Oe,Le,he+1/3)),f(255*A(Oe,Le,he)),f(255*A(Oe,Le,he-1/3)),de];default:return null}}return null}}catch{}}).parseCSSColor,ui=function(o,u,d,f){f===void 0&&(f=1),this.r=o,this.g=u,this.b=d,this.a=f};ui.parse=function(o){if(o){if(o instanceof ui)return o;if(typeof o=="string"){var u=Da(o);if(u)return new ui(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3])}}},ui.prototype.toString=function(){var o=this.toArray(),u=o[1],d=o[2],f=o[3];return"rgba("+Math.round(o[0])+","+Math.round(u)+","+Math.round(d)+","+f+")"},ui.prototype.toArray=function(){var o=this.a;return o===0?[0,0,0,0]:[255*this.r/o,255*this.g/o,255*this.b/o,o]},ui.black=new ui(0,0,0,1),ui.white=new ui(1,1,1,1),ui.transparent=new ui(0,0,0,0),ui.red=new ui(1,0,0,1);var zr=function(o,u,d){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};zr.prototype.compare=function(o,u){return this.collator.compare(o,u)},zr.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Hh=function(o,u,d,f,x){this.text=o,this.image=u,this.scale=d,this.fontStack=f,this.textColor=x},hr=function(o){this.sections=o};hr.fromString=function(o){return new hr([new Hh(o,null,null,null,null)])},hr.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(o){return o.text.length!==0||o.image&&o.image.name.length!==0})},hr.factory=function(o){return o instanceof hr?o:hr.fromString(o)},hr.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(o){return o.text}).join("")},hr.prototype.serialize=function(){for(var o=["format"],u=0,d=this.sections;u<d.length;u+=1){var f=d[u];if(f.image)o.push(["image",f.image.name]);else{o.push(f.text);var x={};f.fontStack&&(x["text-font"]=["literal",f.fontStack.split(",")]),f.scale&&(x["font-scale"]=f.scale),f.textColor&&(x["text-color"]=["rgba"].concat(f.textColor.toArray())),o.push(x)}}return o};var rs=function(o){this.name=o.name,this.available=o.available};function pf(o,u,d,f){return typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof d=="number"&&d>=0&&d<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:"Invalid rgba value ["+[o,u,d,f].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof f=="number"?[o,u,d,f]:[o,u,d]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Yh(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ui||o instanceof zr||o instanceof hr||o instanceof rs)return!0;if(Array.isArray(o)){for(var u=0,d=o;u<d.length;u+=1)if(!Yh(d[u]))return!1;return!0}if(typeof o=="object"){for(var f in o)if(!Yh(o[f]))return!1;return!0}return!1}function En(o){if(o===null)return Et;if(typeof o=="string")return Rt;if(typeof o=="boolean")return It;if(typeof o=="number")return Ye;if(o instanceof ui)return At;if(o instanceof zr)return Ae;if(o instanceof hr)return at;if(o instanceof rs)return rt;if(Array.isArray(o)){for(var u,d=o.length,f=0,x=o;f<x.length;f+=1){var w=En(x[f]);if(u){if(u===w)continue;u=qe;break}u=w}return $t(u||qe,d)}return Oa}function Kh(o){var u=typeof o;return o===null?"":u==="string"||u==="number"||u==="boolean"?String(o):o instanceof ui||o instanceof hr||o instanceof rs?o.toString():JSON.stringify(o)}rs.prototype.toString=function(){return this.name},rs.fromString=function(o){return o?new rs({name:o,available:!1}):null},rs.prototype.serialize=function(){return["image",this.name]};var Ur=function(o,u){this.type=o,this.value=u};Ur.parse=function(o,u){if(o.length!==2)return u.error("'literal' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(!Yh(o[1]))return u.error("invalid value");var d=o[1],f=En(d),x=u.expectedType;return f.kind!=="array"||f.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(f=x),new Ur(f,d)},Ur.prototype.evaluate=function(){return this.value},Ur.prototype.eachChild=function(){},Ur.prototype.outputDefined=function(){return!0},Ur.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ui?["rgba"].concat(this.value.toArray()):this.value instanceof hr?this.value.serialize():this.value};var _r=function(o){this.name="ExpressionEvaluationError",this.message=o};_r.prototype.toJSON=function(){return this.message};var lo={string:Rt,number:Ye,boolean:It,object:Oa},rn=function(o,u){this.type=o,this.args=u};rn.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var d,f=1,x=o[0];if(x==="array"){var w,A;if(o.length>2){var M=o[1];if(typeof M!="string"||!(M in lo)||M==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);w=lo[M],f++}else w=qe;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);A=o[2],f++}d=$t(w,A)}else d=lo[x];for(var W=[];f<o.length;f++){var P=u.parse(o[f],f,qe);if(!P)return null;W.push(P)}return new rn(d,W)},rn.prototype.evaluate=function(o){for(var u=0;u<this.args.length;u++){var d=this.args[u].evaluate(o);if(!Sa(this.type,En(d)))return d;if(u===this.args.length-1)throw new _r("Expected value to be of type "+wa(this.type)+", but found "+wa(En(d))+" instead.")}return null},rn.prototype.eachChild=function(o){this.args.forEach(o)},rn.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},rn.prototype.serialize=function(){var o=this.type,u=[o.kind];if(o.kind==="array"){var d=o.itemType;if(d.kind==="string"||d.kind==="number"||d.kind==="boolean"){u.push(d.kind);var f=o.N;(typeof f=="number"||this.args.length>1)&&u.push(f)}}return u.concat(this.args.map(function(x){return x.serialize()}))};var Fo=function(o){this.type=at,this.sections=o};Fo.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var d=o[1];if(!Array.isArray(d)&&typeof d=="object")return u.error("First argument must be an image or text section.");for(var f=[],x=!1,w=1;w<=o.length-1;++w){var A=o[w];if(x&&typeof A=="object"&&!Array.isArray(A)){x=!1;var M=null;if(A["font-scale"]&&!(M=u.parse(A["font-scale"],1,Ye)))return null;var W=null;if(A["text-font"]&&!(W=u.parse(A["text-font"],1,$t(Rt))))return null;var P=null;if(A["text-color"]&&!(P=u.parse(A["text-color"],1,At)))return null;var N=f[f.length-1];N.scale=M,N.font=W,N.textColor=P}else{var Z=u.parse(o[w],1,qe);if(!Z)return null;var Y=Z.type.kind;if(Y!=="string"&&Y!=="value"&&Y!=="null"&&Y!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,f.push({content:Z,scale:null,font:null,textColor:null})}}return new Fo(f)},Fo.prototype.evaluate=function(o){return new hr(this.sections.map(function(u){var d=u.content.evaluate(o);return En(d)===rt?new Hh("",d,null,null,null):new Hh(Kh(d),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null)}))},Fo.prototype.eachChild=function(o){for(var u=0,d=this.sections;u<d.length;u+=1){var f=d[u];o(f.content),f.scale&&o(f.scale),f.font&&o(f.font),f.textColor&&o(f.textColor)}},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){for(var o=["format"],u=0,d=this.sections;u<d.length;u+=1){var f=d[u];o.push(f.content.serialize());var x={};f.scale&&(x["font-scale"]=f.scale.serialize()),f.font&&(x["text-font"]=f.font.serialize()),f.textColor&&(x["text-color"]=f.textColor.serialize()),o.push(x)}return o};var Zs=function(o){this.type=rt,this.input=o};Zs.parse=function(o,u){if(o.length!==2)return u.error("Expected two arguments.");var d=u.parse(o[1],1,Rt);return d?new Zs(d):u.error("No image name provided.")},Zs.prototype.evaluate=function(o){var u=this.input.evaluate(o),d=rs.fromString(u);return d&&o.availableImages&&(d.available=o.availableImages.indexOf(u)>-1),d},Zs.prototype.eachChild=function(o){o(this.input)},Zs.prototype.outputDefined=function(){return!1},Zs.prototype.serialize=function(){return["image",this.input.serialize()]};var F1={"to-boolean":It,"to-color":At,"to-number":Ye,"to-string":Rt},uo=function(o,u){this.type=o,this.args=u};uo.parse=function(o,u){if(o.length<2)return u.error("Expected at least one argument.");var d=o[0];if((d==="to-boolean"||d==="to-string")&&o.length!==2)return u.error("Expected one argument.");for(var f=F1[d],x=[],w=1;w<o.length;w++){var A=u.parse(o[w],w,qe);if(!A)return null;x.push(A)}return new uo(f,x)},uo.prototype.evaluate=function(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){for(var u,d,f=0,x=this.args;f<x.length;f+=1){if(d=null,(u=x[f].evaluate(o))instanceof ui)return u;if(typeof u=="string"){var w=o.parseColor(u);if(w)return w}else if(Array.isArray(u)&&!(d=u.length<3||u.length>4?"Invalid rbga value "+JSON.stringify(u)+": expected an array containing either three or four numeric values.":pf(u[0],u[1],u[2],u[3])))return new ui(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new _r(d||"Could not parse color from value '"+(typeof u=="string"?u:String(JSON.stringify(u)))+"'")}if(this.type.kind==="number"){for(var A=null,M=0,W=this.args;M<W.length;M+=1){if((A=W[M].evaluate(o))===null)return 0;var P=Number(A);if(!isNaN(P))return P}throw new _r("Could not convert "+JSON.stringify(A)+" to number.")}return this.type.kind==="formatted"?hr.fromString(Kh(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?rs.fromString(Kh(this.args[0].evaluate(o))):Kh(this.args[0].evaluate(o))},uo.prototype.eachChild=function(o){this.args.forEach(o)},uo.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},uo.prototype.serialize=function(){if(this.type.kind==="formatted")return new Fo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Zs(this.args[0]).serialize();var o=["to-"+this.type.kind];return this.eachChild(function(u){o.push(u.serialize())}),o};var uI=["Unknown","Point","LineString","Polygon"],Ll=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ll.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ll.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?uI[this.feature.type]:this.feature.type:null},Ll.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ll.prototype.canonicalID=function(){return this.canonical},Ll.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ll.prototype.parseColor=function(o){var u=this._parseColorCache[o];return u||(u=this._parseColorCache[o]=ui.parse(o)),u};var Cr=function(o,u,d,f){this.name=o,this.type=u,this._evaluate=d,this.args=f};Cr.prototype.evaluate=function(o){return this._evaluate(o,this.args)},Cr.prototype.eachChild=function(o){this.args.forEach(o)},Cr.prototype.outputDefined=function(){return!1},Cr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(o){return o.serialize()}))},Cr.parse=function(o,u){var d,f=o[0],x=Cr.definitions[f];if(!x)return u.error('Unknown expression "'+f+'". If you wanted a literal array, use ["literal", [...]].',0);for(var w=Array.isArray(x)?x[0]:x.type,A=Array.isArray(x)?[[x[1],x[2]]]:x.overloads,M=A.filter(function(aa){var Wt=aa[0];return!Array.isArray(Wt)||Wt.length===o.length-1}),W=null,P=0,N=M;P<N.length;P+=1){var Z=N[P],Y=Z[0],Q=Z[1];W=new fu(u.registry,u.path,null,u.scope);for(var de=[],he=!1,Se=1;Se<o.length;Se++){var ye=o[Se],Le=Array.isArray(Y)?Y[Se-1]:Y.type,Oe=W.parse(ye,1+de.length,Le);if(!Oe){he=!0;break}de.push(Oe)}if(!he)if(Array.isArray(Y)&&Y.length!==de.length)W.error("Expected "+Y.length+" arguments, but found "+de.length+" instead.");else{for(var Ne=0;Ne<de.length;Ne++){var Ze=Array.isArray(Y)?Y[Ne]:Y.type,$e=de[Ne];W.concat(Ne+1).checkSubtype(Ze,$e.type)}if(W.errors.length===0)return new Cr(f,w,Q,de)}}if(M.length===1)(d=u.errors).push.apply(d,W.errors);else{for(var _t=(M.length?M:A).map(function(aa){var Wt;return Wt=aa[0],Array.isArray(Wt)?"("+Wt.map(wa).join(", ")+")":"("+wa(Wt.type)+"...)"}).join(" | "),xt=[],jt=1;jt<o.length;jt++){var kt=u.parse(o[jt],1+xt.length);if(!kt)return null;xt.push(wa(kt.type))}u.error("Expected arguments of type "+_t+", but found ("+xt.join(", ")+") instead.")}return null},Cr.register=function(o,u){for(var d in Cr.definitions=u,u)o[d]=Cr};var ol=function(o,u,d){this.type=Ae,this.locale=d,this.caseSensitive=o,this.diacriticSensitive=u};function Xr(o,u){o[0]=Math.min(o[0],u[0]),o[1]=Math.min(o[1],u[1]),o[2]=Math.max(o[2],u[0]),o[3]=Math.max(o[3],u[1])}function _c(o,u){return!(o[0]<=u[0]||o[2]>=u[2]||o[1]<=u[1]||o[3]>=u[3])}function cI(o,u){var d=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,x=Math.pow(2,u.z);return[Math.round(d*x*8192),Math.round(f*x*8192)]}function dI(o,u,d){return u[1]>o[1]!=d[1]>o[1]&&o[0]<(d[0]-u[0])*(o[1]-u[1])/(d[1]-u[1])+u[0]}function ff(o,u){for(var d,f,x,w,A,M,W,P=!1,N=0,Z=u.length;N<Z;N++)for(var Y=u[N],Q=0,de=Y.length;Q<de-1;Q++){if((w=(d=o)[0]-(f=Y[Q])[0])*(W=d[1]-(x=Y[Q+1])[1])-(M=d[0]-x[0])*(A=d[1]-f[1])==0&&w*M<=0&&A*W<=0)return!1;dI(o,Y[Q],Y[Q+1])&&(P=!P)}return P}function hI(o,u){for(var d=0;d<u.length;d++)if(ff(o,u[d]))return!0;return!1}function N1(o,u,d,f){var x=f[0]-d[0],w=f[1]-d[1],A=(o[0]-d[0])*w-x*(o[1]-d[1]),M=(u[0]-d[0])*w-x*(u[1]-d[1]);return A>0&&M<0||A<0&&M>0}function _I(o,u,d){for(var f=0,x=d;f<x.length;f+=1)for(var w=x[f],A=0;A<w.length-1;++A)if((Z=[(N=w[A+1])[0]-(P=w[A])[0],N[1]-P[1]])[0]*(Y=[(W=u)[0]-(M=o)[0],W[1]-M[1]])[1]-Z[1]*Y[0]!=0&&N1(M,W,P,N)&&N1(P,N,M,W))return!0;var M,W,P,N,Z,Y;return!1}function D1(o,u){for(var d=0;d<o.length;++d)if(!ff(o[d],u))return!1;for(var f=0;f<o.length-1;++f)if(_I(o[f],o[f+1],u))return!1;return!0}function V1(o,u){for(var d=0;d<u.length;d++)if(D1(o,u[d]))return!0;return!1}function Td(o,u,d){for(var f=[],x=0;x<o.length;x++){for(var w=[],A=0;A<o[x].length;A++){var M=cI(o[x][A],d);Xr(u,M),w.push(M)}f.push(w)}return f}function yf(o,u,d){for(var f=[],x=0;x<o.length;x++){var w=Td(o[x],u,d);f.push(w)}return f}function qh(o,u,d,f){if(o[0]<d[0]||o[0]>d[2]){var x=.5*f,w=o[0]-d[0]>x?-f:d[0]-o[0]>x?f:0;w===0&&(w=o[0]-d[2]>x?-f:d[2]-o[0]>x?f:0),o[0]+=w}Xr(u,o)}function Z1(o,u,d,f){for(var x=8192*Math.pow(2,f.z),w=[8192*f.x,8192*f.y],A=[],M=0,W=o;M<W.length;M+=1)for(var P=0,N=W[M];P<N.length;P+=1){var Z=N[P],Y=[Z.x+w[0],Z.y+w[1]];qh(Y,u,d,x),A.push(Y)}return A}function Rm(o,u,d,f){for(var x,w=8192*Math.pow(2,f.z),A=[8192*f.x,8192*f.y],M=[],W=0,P=o;W<P.length;W+=1){for(var N=[],Z=0,Y=P[W];Z<Y.length;Z+=1){var Q=Y[Z],de=[Q.x+A[0],Q.y+A[1]];Xr(u,de),N.push(de)}M.push(N)}if(u[2]-u[0]<=w/2){(x=u)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(var he=0,Se=M;he<Se.length;he+=1)for(var ye=0,Le=Se[he];ye<Le.length;ye+=1)qh(Le[ye],u,d,w)}return M}ol.parse=function(o,u){if(o.length!==2)return u.error("Expected one argument.");var d=o[1];if(typeof d!="object"||Array.isArray(d))return u.error("Collator options argument must be an object.");var f=u.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,It);if(!f)return null;var x=u.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,It);if(!x)return null;var w=null;return d.locale&&!(w=u.parse(d.locale,1,Rt))?null:new ol(f,x,w)},ol.prototype.evaluate=function(o){return new zr(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)},ol.prototype.eachChild=function(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)},ol.prototype.outputDefined=function(){return!1},ol.prototype.serialize=function(){var o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]};var co=function(o,u){this.type=It,this.geojson=o,this.geometries=u};function mu(o){if(o instanceof Cr&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof co)return!1;var u=!0;return o.eachChild(function(d){u&&!mu(d)&&(u=!1)}),u}function gu(o){if(o instanceof Cr&&o.name==="feature-state")return!1;var u=!0;return o.eachChild(function(d){u&&!gu(d)&&(u=!1)}),u}function mc(o,u){if(o instanceof Cr&&u.indexOf(o.name)>=0)return!1;var d=!0;return o.eachChild(function(f){d&&!mc(f,u)&&(d=!1)}),d}co.parse=function(o,u){if(o.length!==2)return u.error("'within' expression requires exactly one argument, but found "+(o.length-1)+" instead.");if(Yh(o[1])){var d=o[1];if(d.type==="FeatureCollection")for(var f=0;f<d.features.length;++f){var x=d.features[f].geometry.type;if(x==="Polygon"||x==="MultiPolygon")return new co(d,d.features[f].geometry)}else if(d.type==="Feature"){var w=d.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new co(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new co(d,d)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")},co.prototype.evaluate=function(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(u,d){var f=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(d.type==="Polygon"){var A=Td(d.coordinates,x,w),M=Z1(u.geometry(),f,x,w);if(!_c(f,x))return!1;for(var W=0,P=M;W<P.length;W+=1)if(!ff(P[W],A))return!1}if(d.type==="MultiPolygon"){var N=yf(d.coordinates,x,w),Z=Z1(u.geometry(),f,x,w);if(!_c(f,x))return!1;for(var Y=0,Q=Z;Y<Q.length;Y+=1)if(!hI(Q[Y],N))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(u,d){var f=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(d.type==="Polygon"){var A=Td(d.coordinates,x,w),M=Rm(u.geometry(),f,x,w);if(!_c(f,x))return!1;for(var W=0,P=M;W<P.length;W+=1)if(!D1(P[W],A))return!1}if(d.type==="MultiPolygon"){var N=yf(d.coordinates,x,w),Z=Rm(u.geometry(),f,x,w);if(!_c(f,x))return!1;for(var Y=0,Q=Z;Y<Q.length;Y+=1)if(!V1(Q[Y],N))return!1}return!0}(o,this.geometries)}return!1},co.prototype.eachChild=function(){},co.prototype.outputDefined=function(){return!0},co.prototype.serialize=function(){return["within",this.geojson]};var pu=function(o,u){this.type=u.type,this.name=o,this.boundExpression=u};pu.parse=function(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");var d=o[1];return u.scope.has(d)?new pu(d,u.scope.get(d)):u.error('Unknown variable "'+d+'". Make sure "'+d+'" has been bound in an enclosing "let" expression before using it.',1)},pu.prototype.evaluate=function(o){return this.boundExpression.evaluate(o)},pu.prototype.eachChild=function(){},pu.prototype.outputDefined=function(){return!1},pu.prototype.serialize=function(){return["var",this.name]};var fu=function(o,u,d,f,x){u===void 0&&(u=[]),f===void 0&&(f=new Pt),x===void 0&&(x=[]),this.registry=o,this.path=u,this.key=u.map(function(w){return"["+w+"]"}).join(""),this.scope=f,this.errors=x,this.expectedType=d};function km(o,u){for(var d,f=o.length-1,x=0,w=f,A=0;x<=w;)if((d=o[A=Math.floor((x+w)/2)])<=u){if(A===f||u<o[A+1])return A;x=A+1}else{if(!(d>u))throw new _r("Input is not a number.");w=A-1}return 0}fu.prototype.parse=function(o,u,d,f,x){return x===void 0&&(x={}),u?this.concat(u,d,f)._parse(o,x):this._parse(o,x)},fu.prototype._parse=function(o,u){function d(P,N,Z){return Z==="assert"?new rn(N,[P]):Z==="coerce"?new uo(N,[P]):P}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var f=o[0];if(typeof f!="string")return this.error("Expression name must be a string, but found "+typeof f+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var x=this.registry[f];if(x){var w=x.parse(o,this);if(!w)return null;if(this.expectedType){var A=this.expectedType,M=w.type;if(A.kind!=="string"&&A.kind!=="number"&&A.kind!=="boolean"&&A.kind!=="object"&&A.kind!=="array"||M.kind!=="value")if(A.kind!=="color"&&A.kind!=="formatted"&&A.kind!=="resolvedImage"||M.kind!=="value"&&M.kind!=="string"){if(this.checkSubtype(A,M))return null}else w=d(w,A,u.typeAnnotation||"coerce");else w=d(w,A,u.typeAnnotation||"assert")}if(!(w instanceof Ur)&&w.type.kind!=="resolvedImage"&&function P(N){if(N instanceof pu)return P(N.boundExpression);if(N instanceof Cr&&N.name==="error"||N instanceof ol||N instanceof co)return!1;var Z=N instanceof uo||N instanceof rn,Y=!0;return N.eachChild(function(Q){Y=Z?Y&&P(Q):Y&&Q instanceof Ur}),!!Y&&mu(N)&&mc(N,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(w)){var W=new Ll;try{w=new Ur(w.type,w.evaluate(W))}catch(P){return this.error(P.message),null}}return w}return this.error('Unknown expression "'+f+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof o+" instead.")},fu.prototype.concat=function(o,u,d){var f=typeof o=="number"?this.path.concat(o):this.path,x=d?this.scope.concat(d):this.scope;return new fu(this.registry,f,u||null,x,this.errors)},fu.prototype.error=function(o){for(var u=[],d=arguments.length-1;d-- >0;)u[d]=arguments[d+1];var f=""+this.key+u.map(function(x){return"["+x+"]"}).join("");this.errors.push(new nt(f,o))},fu.prototype.checkSubtype=function(o,u){var d=Sa(o,u);return d&&this.error(d),d};var vs=function(o,u,d){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(var f=0,x=d;f<x.length;f+=1){var w=x[f],A=w[1];this.labels.push(w[0]),this.outputs.push(A)}};function Bn(o,u,d){return o*(1-d)+u*d}vs.parse=function(o,u){if(o.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");var d=u.parse(o[1],1,Ye);if(!d)return null;var f=[],x=null;u.expectedType&&u.expectedType.kind!=="value"&&(x=u.expectedType);for(var w=1;w<o.length;w+=2){var A=w===1?-1/0:o[w],M=o[w+1],W=w,P=w+1;if(typeof A!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(f.length&&f[f.length-1][0]>=A)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',W);var N=u.parse(M,P,x);if(!N)return null;x=x||N.type,f.push([A,N])}return new vs(x,d,f)},vs.prototype.evaluate=function(o){var u=this.labels,d=this.outputs;if(u.length===1)return d[0].evaluate(o);var f=this.input.evaluate(o);if(f<=u[0])return d[0].evaluate(o);var x=u.length;return f>=u[x-1]?d[x-1].evaluate(o):d[km(u,f)].evaluate(o)},vs.prototype.eachChild=function(o){o(this.input);for(var u=0,d=this.outputs;u<d.length;u+=1)o(d[u])},vs.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},vs.prototype.serialize=function(){for(var o=["step",this.input.serialize()],u=0;u<this.labels.length;u++)u>0&&o.push(this.labels[u]),o.push(this.outputs[u].serialize());return o};var Ed=Object.freeze({__proto__:null,number:Bn,color:function(o,u,d){return new ui(Bn(o.r,u.r,d),Bn(o.g,u.g,d),Bn(o.b,u.b,d),Bn(o.a,u.a,d))},array:function(o,u,d){return o.map(function(f,x){return Bn(f,u[x],d)})}}),z1=6/29*3*(6/29),mI=Math.PI/180,gI=180/Math.PI;function bf(o){return o>.008856451679035631?Math.pow(o,1/3):o/z1+4/29}function vf(o){return o>6/29?o*o*o:z1*(o-4/29)}function xf(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function wf(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function U1(o){var u=wf(o.r),d=wf(o.g),f=wf(o.b),x=bf((.4124564*u+.3575761*d+.1804375*f)/.95047),w=bf((.2126729*u+.7151522*d+.072175*f)/1);return{l:116*w-16,a:500*(x-w),b:200*(w-bf((.0193339*u+.119192*d+.9503041*f)/1.08883)),alpha:o.a}}function X1(o){var u=(o.l+16)/116,d=isNaN(o.a)?u:u+o.a/500,f=isNaN(o.b)?u:u-o.b/200;return u=1*vf(u),d=.95047*vf(d),f=1.08883*vf(f),new ui(xf(3.2404542*d-1.5371385*u-.4985314*f),xf(-.969266*d+1.8760108*u+.041556*f),xf(.0556434*d-.2040259*u+1.0572252*f),o.alpha)}function pI(o,u,d){var f=u-o;return o+d*(f>180||f<-180?f-360*Math.round(f/360):f)}var jh={forward:U1,reverse:X1,interpolate:function(o,u,d){return{l:Bn(o.l,u.l,d),a:Bn(o.a,u.a,d),b:Bn(o.b,u.b,d),alpha:Bn(o.alpha,u.alpha,d)}}},Jh={forward:function(o){var u=U1(o),d=u.l,f=u.a,x=u.b,w=Math.atan2(x,f)*gI;return{h:w<0?w+360:w,c:Math.sqrt(f*f+x*x),l:d,alpha:o.a}},reverse:function(o){var u=o.h*mI,d=o.c;return X1({l:o.l,a:Math.cos(u)*d,b:Math.sin(u)*d,alpha:o.alpha})},interpolate:function(o,u,d){return{h:pI(o.h,u.h,d),c:Bn(o.c,u.c,d),l:Bn(o.l,u.l,d),alpha:Bn(o.alpha,u.alpha,d)}}},H1=Object.freeze({__proto__:null,lab:jh,hcl:Jh}),Ar=function(o,u,d,f,x){this.type=o,this.operator=u,this.interpolation=d,this.input=f,this.labels=[],this.outputs=[];for(var w=0,A=x;w<A.length;w+=1){var M=A[w],W=M[1];this.labels.push(M[0]),this.outputs.push(W)}};function If(o,u,d,f){var x=f-d,w=o-d;return x===0?0:u===1?w/x:(Math.pow(u,w)-1)/(Math.pow(u,x)-1)}Ar.interpolationFactor=function(o,u,d,f){var x=0;if(o.name==="exponential")x=If(u,o.base,d,f);else if(o.name==="linear")x=If(u,1,d,f);else if(o.name==="cubic-bezier"){var w=o.controlPoints;x=new c(w[0],w[1],w[2],w[3]).solve(If(u,1,d,f))}return x},Ar.parse=function(o,u){var d=o[0],f=o[1],x=o[2],w=o.slice(3);if(!Array.isArray(f)||f.length===0)return u.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){var A=f[1];if(typeof A!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:A}}else{if(f[0]!=="cubic-bezier")return u.error("Unknown interpolation type "+String(f[0]),1,0);var M=f.slice(1);if(M.length!==4||M.some(function(Se){return typeof Se!="number"||Se<0||Se>1}))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:M}}if(o.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(!(x=u.parse(x,2,Ye)))return null;var W=[],P=null;d==="interpolate-hcl"||d==="interpolate-lab"?P=At:u.expectedType&&u.expectedType.kind!=="value"&&(P=u.expectedType);for(var N=0;N<w.length;N+=2){var Z=w[N],Y=w[N+1],Q=N+3,de=N+4;if(typeof Z!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(W.length&&W[W.length-1][0]>=Z)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Q);var he=u.parse(Y,de,P);if(!he)return null;P=P||he.type,W.push([Z,he])}return P.kind==="number"||P.kind==="color"||P.kind==="array"&&P.itemType.kind==="number"&&typeof P.N=="number"?new Ar(P,d,f,x,W):u.error("Type "+wa(P)+" is not interpolatable.")},Ar.prototype.evaluate=function(o){var u=this.labels,d=this.outputs;if(u.length===1)return d[0].evaluate(o);var f=this.input.evaluate(o);if(f<=u[0])return d[0].evaluate(o);var x=u.length;if(f>=u[x-1])return d[x-1].evaluate(o);var w=km(u,f),A=Ar.interpolationFactor(this.interpolation,f,u[w],u[w+1]),M=d[w].evaluate(o),W=d[w+1].evaluate(o);return this.operator==="interpolate"?Ed[this.type.kind.toLowerCase()](M,W,A):this.operator==="interpolate-hcl"?Jh.reverse(Jh.interpolate(Jh.forward(M),Jh.forward(W),A)):jh.reverse(jh.interpolate(jh.forward(M),jh.forward(W),A))},Ar.prototype.eachChild=function(o){o(this.input);for(var u=0,d=this.outputs;u<d.length;u+=1)o(d[u])},Ar.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})},Ar.prototype.serialize=function(){var o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var u=[this.operator,o,this.input.serialize()],d=0;d<this.labels.length;d++)u.push(this.labels[d],this.outputs[d].serialize());return u};var yu=function(o,u){this.type=o,this.args=u};yu.parse=function(o,u){if(o.length<2)return u.error("Expectected at least one argument.");var d=null,f=u.expectedType;f&&f.kind!=="value"&&(d=f);for(var x=[],w=0,A=o.slice(1);w<A.length;w+=1){var M=u.parse(A[w],1+x.length,d,void 0,{typeAnnotation:"omit"});if(!M)return null;d=d||M.type,x.push(M)}var W=f&&x.some(function(P){return Sa(f,P.type)});return new yu(W?qe:d,x)},yu.prototype.evaluate=function(o){for(var u,d=null,f=0,x=0,w=this.args;x<w.length&&(f++,(d=w[x].evaluate(o))&&d instanceof rs&&!d.available&&(u||(u=d.name),d=null,f===this.args.length&&(d=u)),d===null);x+=1);return d},yu.prototype.eachChild=function(o){this.args.forEach(o)},yu.prototype.outputDefined=function(){return this.args.every(function(o){return o.outputDefined()})},yu.prototype.serialize=function(){var o=["coalesce"];return this.eachChild(function(u){o.push(u.serialize())}),o};var bu=function(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u};bu.prototype.evaluate=function(o){return this.result.evaluate(o)},bu.prototype.eachChild=function(o){for(var u=0,d=this.bindings;u<d.length;u+=1)o(d[u][1]);o(this.result)},bu.parse=function(o,u){if(o.length<4)return u.error("Expected at least 3 arguments, but found "+(o.length-1)+" instead.");for(var d=[],f=1;f<o.length-1;f+=2){var x=o[f];if(typeof x!="string")return u.error("Expected string, but found "+typeof x+" instead.",f);if(/[^a-zA-Z0-9_]/.test(x))return u.error("Variable names must contain only alphanumeric characters or '_'.",f);var w=u.parse(o[f+1],f+1);if(!w)return null;d.push([x,w])}var A=u.parse(o[o.length-1],o.length-1,u.expectedType,d);return A?new bu(d,A):null},bu.prototype.outputDefined=function(){return this.result.outputDefined()},bu.prototype.serialize=function(){for(var o=["let"],u=0,d=this.bindings;u<d.length;u+=1){var f=d[u];o.push(f[0],f[1].serialize())}return o.push(this.result.serialize()),o};var gc=function(o,u,d){this.type=o,this.index=u,this.input=d};gc.parse=function(o,u){if(o.length!==3)return u.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var d=u.parse(o[1],1,Ye),f=u.parse(o[2],2,$t(u.expectedType||qe));return d&&f?new gc(f.type.itemType,d,f):null},gc.prototype.evaluate=function(o){var u=this.index.evaluate(o),d=this.input.evaluate(o);if(u<0)throw new _r("Array index out of bounds: "+u+" < 0.");if(u>=d.length)throw new _r("Array index out of bounds: "+u+" > "+(d.length-1)+".");if(u!==Math.floor(u))throw new _r("Array index must be an integer, but found "+u+" instead.");return d[u]},gc.prototype.eachChild=function(o){o(this.index),o(this.input)},gc.prototype.outputDefined=function(){return!1},gc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var pc=function(o,u){this.type=It,this.needle=o,this.haystack=u};pc.parse=function(o,u){if(o.length!==3)return u.error("Expected 2 arguments, but found "+(o.length-1)+" instead.");var d=u.parse(o[1],1,qe),f=u.parse(o[2],2,qe);return d&&f?Gi(d.type,[It,Rt,Ye,Et,qe])?new pc(d,f):u.error("Expected first argument to be of type boolean, string, number or null, but found "+wa(d.type)+" instead"):null},pc.prototype.evaluate=function(o){var u=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!d)return!1;if(!Ta(u,["boolean","string","number","null"]))throw new _r("Expected first argument to be of type boolean, string, number or null, but found "+wa(En(u))+" instead.");if(!Ta(d,["string","array"]))throw new _r("Expected second argument to be of type array or string, but found "+wa(En(d))+" instead.");return d.indexOf(u)>=0},pc.prototype.eachChild=function(o){o(this.needle),o(this.haystack)},pc.prototype.outputDefined=function(){return!0},pc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var vu=function(o,u,d){this.type=Ye,this.needle=o,this.haystack=u,this.fromIndex=d};vu.parse=function(o,u){if(o.length<=2||o.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var d=u.parse(o[1],1,qe),f=u.parse(o[2],2,qe);if(!d||!f)return null;if(!Gi(d.type,[It,Rt,Ye,Et,qe]))return u.error("Expected first argument to be of type boolean, string, number or null, but found "+wa(d.type)+" instead");if(o.length===4){var x=u.parse(o[3],3,Ye);return x?new vu(d,f,x):null}return new vu(d,f)},vu.prototype.evaluate=function(o){var u=this.needle.evaluate(o),d=this.haystack.evaluate(o);if(!Ta(u,["boolean","string","number","null"]))throw new _r("Expected first argument to be of type boolean, string, number or null, but found "+wa(En(u))+" instead.");if(!Ta(d,["string","array"]))throw new _r("Expected second argument to be of type array or string, but found "+wa(En(d))+" instead.");if(this.fromIndex){var f=this.fromIndex.evaluate(o);return d.indexOf(u,f)}return d.indexOf(u)},vu.prototype.eachChild=function(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)},vu.prototype.outputDefined=function(){return!1},vu.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var fc=function(o,u,d,f,x,w){this.inputType=o,this.type=u,this.input=d,this.cases=f,this.outputs=x,this.otherwise=w};fc.parse=function(o,u){if(o.length<5)return u.error("Expected at least 4 arguments, but found only "+(o.length-1)+".");if(o.length%2!=1)return u.error("Expected an even number of arguments.");var d,f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);for(var x={},w=[],A=2;A<o.length-1;A+=2){var M=o[A],W=o[A+1];Array.isArray(M)||(M=[M]);var P=u.concat(A);if(M.length===0)return P.error("Expected at least one branch label.");for(var N=0,Z=M;N<Z.length;N+=1){var Y=Z[N];if(typeof Y!="number"&&typeof Y!="string")return P.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return P.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Y=="number"&&Math.floor(Y)!==Y)return P.error("Numeric branch labels must be integer values.");if(d){if(P.checkSubtype(d,En(Y)))return null}else d=En(Y);if(x[String(Y)]!==void 0)return P.error("Branch labels must be unique.");x[String(Y)]=w.length}var Q=u.parse(W,A,f);if(!Q)return null;f=f||Q.type,w.push(Q)}var de=u.parse(o[1],1,qe);if(!de)return null;var he=u.parse(o[o.length-1],o.length-1,f);return he?de.type.kind!=="value"&&u.concat(1).checkSubtype(d,de.type)?null:new fc(d,f,de,x,w,he):null},fc.prototype.evaluate=function(o){var u=this.input.evaluate(o);return(En(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)},fc.prototype.eachChild=function(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)},fc.prototype.outputDefined=function(){return this.outputs.every(function(o){return o.outputDefined()})&&this.otherwise.outputDefined()},fc.prototype.serialize=function(){for(var o=this,u=["match",this.input.serialize()],d=[],f={},x=0,w=Object.keys(this.cases).sort();x<w.length;x+=1){var A=w[x];(Z=f[this.cases[A]])===void 0?(f[this.cases[A]]=d.length,d.push([this.cases[A],[A]])):d[Z][1].push(A)}for(var M=function(Q){return o.inputType.kind==="number"?Number(Q):Q},W=0,P=d;W<P.length;W+=1){var N=P[W],Z=N[0],Y=N[1];u.push(Y.length===1?M(Y[0]):Y.map(M)),u.push(this.outputs[outputIndex$1].serialize())}return u.push(this.otherwise.serialize()),u};var yc=function(o,u,d){this.type=o,this.branches=u,this.otherwise=d};yc.parse=function(o,u){if(o.length<4)return u.error("Expected at least 3 arguments, but found only "+(o.length-1)+".");if(o.length%2!=0)return u.error("Expected an odd number of arguments.");var d;u.expectedType&&u.expectedType.kind!=="value"&&(d=u.expectedType);for(var f=[],x=1;x<o.length-1;x+=2){var w=u.parse(o[x],x,It);if(!w)return null;var A=u.parse(o[x+1],x+1,d);if(!A)return null;f.push([w,A]),d=d||A.type}var M=u.parse(o[o.length-1],o.length-1,d);return M?new yc(d,f,M):null},yc.prototype.evaluate=function(o){for(var u=0,d=this.branches;u<d.length;u+=1){var f=d[u],x=f[1];if(f[0].evaluate(o))return x.evaluate(o)}return this.otherwise.evaluate(o)},yc.prototype.eachChild=function(o){for(var u=0,d=this.branches;u<d.length;u+=1){var f=d[u],x=f[1];o(f[0]),o(x)}o(this.otherwise)},yc.prototype.outputDefined=function(){return this.branches.every(function(o){return o[1].outputDefined()})&&this.otherwise.outputDefined()},yc.prototype.serialize=function(){var o=["case"];return this.eachChild(function(u){o.push(u.serialize())}),o};var xu=function(o,u,d,f){this.type=o,this.input=u,this.beginIndex=d,this.endIndex=f};function Y1(o,u){return o==="=="||o==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function K1(o,u,d,f){return f.compare(u,d)===0}function Oi(o,u,d){var f=o!=="=="&&o!=="!=";return function(){function x(w,A,M){this.type=It,this.lhs=w,this.rhs=A,this.collator=M,this.hasUntypedArgument=w.type.kind==="value"||A.type.kind==="value"}return x.parse=function(w,A){if(w.length!==3&&w.length!==4)return A.error("Expected two or three arguments.");var M=w[0],W=A.parse(w[1],1,qe);if(!W)return null;if(!Y1(M,W.type))return A.concat(1).error('"'+M+`" comparisons are not supported for type '`+wa(W.type)+"'.");var P=A.parse(w[2],2,qe);if(!P)return null;if(!Y1(M,P.type))return A.concat(2).error('"'+M+`" comparisons are not supported for type '`+wa(P.type)+"'.");if(W.type.kind!==P.type.kind&&W.type.kind!=="value"&&P.type.kind!=="value")return A.error("Cannot compare types '"+wa(W.type)+"' and '"+wa(P.type)+"'.");f&&(W.type.kind==="value"&&P.type.kind!=="value"?W=new rn(P.type,[W]):W.type.kind!=="value"&&P.type.kind==="value"&&(P=new rn(W.type,[P])));var N=null;if(w.length===4){if(W.type.kind!=="string"&&P.type.kind!=="string"&&W.type.kind!=="value"&&P.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(!(N=A.parse(w[3],3,Ae)))return null}return new x(W,P,N)},x.prototype.evaluate=function(w){var A=this.lhs.evaluate(w),M=this.rhs.evaluate(w);if(f&&this.hasUntypedArgument){var W=En(A),P=En(M);if(W.kind!==P.kind||W.kind!=="string"&&W.kind!=="number")throw new _r('Expected arguments for "'+o+'" to be (string, string) or (number, number), but found ('+W.kind+", "+P.kind+") instead.")}if(this.collator&&!f&&this.hasUntypedArgument){var N=En(A),Z=En(M);if(N.kind!=="string"||Z.kind!=="string")return u(w,A,M)}return this.collator?d(w,A,M,this.collator.evaluate(w)):u(w,A,M)},x.prototype.eachChild=function(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)},x.prototype.outputDefined=function(){return!0},x.prototype.serialize=function(){var w=[o];return this.eachChild(function(A){w.push(A.serialize())}),w},x}()}xu.parse=function(o,u){if(o.length<=2||o.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(o.length-1)+" instead.");var d=u.parse(o[1],1,qe),f=u.parse(o[2],2,Ye);if(!d||!f)return null;if(!Gi(d.type,[$t(qe),Rt,qe]))return u.error("Expected first argument to be of type array or string, but found "+wa(d.type)+" instead");if(o.length===4){var x=u.parse(o[3],3,Ye);return x?new xu(d.type,d,f,x):null}return new xu(d.type,d,f)},xu.prototype.evaluate=function(o){var u=this.input.evaluate(o),d=this.beginIndex.evaluate(o);if(!Ta(u,["string","array"]))throw new _r("Expected first argument to be of type array or string, but found "+wa(En(u))+" instead.");if(this.endIndex){var f=this.endIndex.evaluate(o);return u.slice(d,f)}return u.slice(d)},xu.prototype.eachChild=function(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)},xu.prototype.outputDefined=function(){return!1},xu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var fI=Oi("==",function(o,u,d){return u===d},K1),Wm=Oi("!=",function(o,u,d){return u!==d},function(o,u,d,f){return!K1(0,u,d,f)}),q1=Oi("<",function(o,u,d){return u<d},function(o,u,d,f){return f.compare(u,d)<0}),j1=Oi(">",function(o,u,d){return u>d},function(o,u,d,f){return f.compare(u,d)>0}),J1=Oi("<=",function(o,u,d){return u<=d},function(o,u,d,f){return f.compare(u,d)<=0}),Q1=Oi(">=",function(o,u,d){return u>=d},function(o,u,d,f){return f.compare(u,d)>=0}),bc=function(o,u,d,f,x){this.type=Rt,this.number=o,this.locale=u,this.currency=d,this.minFractionDigits=f,this.maxFractionDigits=x};bc.parse=function(o,u){if(o.length!==3)return u.error("Expected two arguments.");var d=u.parse(o[1],1,Ye);if(!d)return null;var f=o[2];if(typeof f!="object"||Array.isArray(f))return u.error("NumberFormat options argument must be an object.");var x=null;if(f.locale&&!(x=u.parse(f.locale,1,Rt)))return null;var w=null;if(f.currency&&!(w=u.parse(f.currency,1,Rt)))return null;var A=null;if(f["min-fraction-digits"]&&!(A=u.parse(f["min-fraction-digits"],1,Ye)))return null;var M=null;return f["max-fraction-digits"]&&!(M=u.parse(f["max-fraction-digits"],1,Ye))?null:new bc(d,x,w,A,M)},bc.prototype.evaluate=function(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))},bc.prototype.eachChild=function(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)},bc.prototype.outputDefined=function(){return!1},bc.prototype.serialize=function(){var o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]};var wu=function(o){this.type=Ye,this.input=o};wu.parse=function(o,u){if(o.length!==2)return u.error("Expected 1 argument, but found "+(o.length-1)+" instead.");var d=u.parse(o[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?u.error("Expected argument of type string or array, but found "+wa(d.type)+" instead."):new wu(d):null},wu.prototype.evaluate=function(o){var u=this.input.evaluate(o);if(typeof u=="string"||Array.isArray(u))return u.length;throw new _r("Expected value to be of type string or array, but found "+wa(En(u))+" instead.")},wu.prototype.eachChild=function(o){o(this.input)},wu.prototype.outputDefined=function(){return!1},wu.prototype.serialize=function(){var o=["length"];return this.eachChild(function(u){o.push(u.serialize())}),o};var vc={"==":fI,"!=":Wm,">":j1,"<":q1,">=":Q1,"<=":J1,array:rn,at:gc,boolean:rn,case:yc,coalesce:yu,collator:ol,format:Fo,image:Zs,in:pc,"index-of":vu,interpolate:Ar,"interpolate-hcl":Ar,"interpolate-lab":Ar,length:wu,let:bu,literal:Ur,match:fc,number:rn,"number-format":bc,object:rn,slice:xu,step:vs,string:rn,"to-boolean":uo,"to-color":uo,"to-number":uo,"to-string":uo,var:pu,within:co};function $1(o,u){var d=u[0],f=u[1],x=u[2],w=u[3];d=d.evaluate(o),f=f.evaluate(o),x=x.evaluate(o);var A=w?w.evaluate(o):1,M=pf(d,f,x,A);if(M)throw new _r(M);return new ui(d/255*A,f/255*A,x/255*A,A)}function eb(o,u){return o in u}function Cf(o,u){var d=u[o];return d===void 0?null:d}function xc(o){return{type:o}}function tb(o){return{result:"success",value:o}}function wc(o){return{result:"error",value:o}}function Ic(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function ab(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Qh(o){return!!o.expression&&o.expression.interpolated}function Xi(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function Gm(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function yI(o){return o}function Md(o,u,d){return o!==void 0?o:u!==void 0?u:d!==void 0?d:void 0}function ib(o,u,d,f,x){return Md(typeof d===x?f[d]:void 0,o.default,u.default)}function bI(o,u,d){if(Xi(d)!=="number")return Md(o.default,u.default);var f=o.stops.length;if(f===1||d<=o.stops[0][0])return o.stops[0][1];if(d>=o.stops[f-1][0])return o.stops[f-1][1];var x=km(o.stops.map(function(w){return w[0]}),d);return o.stops[x][1]}function nb(o,u,d){var f=o.base!==void 0?o.base:1;if(Xi(d)!=="number")return Md(o.default,u.default);var x=o.stops.length;if(x===1||d<=o.stops[0][0])return o.stops[0][1];if(d>=o.stops[x-1][0])return o.stops[x-1][1];var w=km(o.stops.map(function(Z){return Z[0]}),d),A=function(Z,Y,Q,de){var he=de-Q,Se=Z-Q;return he===0?0:Y===1?Se/he:(Math.pow(Y,Se)-1)/(Math.pow(Y,he)-1)}(d,f,o.stops[w][0],o.stops[w+1][0]),M=o.stops[w][1],W=o.stops[w+1][1],P=Ed[u.type]||yI;if(o.colorSpace&&o.colorSpace!=="rgb"){var N=H1[o.colorSpace];P=function(Z,Y){return N.reverse(N.interpolate(N.forward(Z),N.forward(Y),A))}}return typeof M.evaluate=="function"?{evaluate:function(){for(var Z=[],Y=arguments.length;Y--;)Z[Y]=arguments[Y];var Q=M.evaluate.apply(void 0,Z),de=W.evaluate.apply(void 0,Z);if(Q!==void 0&&de!==void 0)return P(Q,de,A)}}:P(M,W,A)}function Om(o,u,d){return u.type==="color"?d=ui.parse(d):u.type==="formatted"?d=hr.fromString(d.toString()):u.type==="resolvedImage"?d=rs.fromString(d.toString()):Xi(d)===u.type||u.type==="enum"&&u.values[d]||(d=void 0),Md(d,o.default,u.default)}Cr.register(vc,{error:[{kind:"error"},[Rt],function(o,u){throw new _r(u[0].evaluate(o))}],typeof:[Rt,[qe],function(o,u){return wa(En(u[0].evaluate(o)))}],"to-rgba":[$t(Ye,4),[At],function(o,u){return u[0].evaluate(o).toArray()}],rgb:[At,[Ye,Ye,Ye],$1],rgba:[At,[Ye,Ye,Ye,Ye],$1],has:{type:It,overloads:[[[Rt],function(o,u){return eb(u[0].evaluate(o),o.properties())}],[[Rt,Oa],function(o,u){var d=u[1];return eb(u[0].evaluate(o),d.evaluate(o))}]]},get:{type:qe,overloads:[[[Rt],function(o,u){return Cf(u[0].evaluate(o),o.properties())}],[[Rt,Oa],function(o,u){var d=u[1];return Cf(u[0].evaluate(o),d.evaluate(o))}]]},"feature-state":[qe,[Rt],function(o,u){return Cf(u[0].evaluate(o),o.featureState||{})}],properties:[Oa,[],function(o){return o.properties()}],"geometry-type":[Rt,[],function(o){return o.geometryType()}],id:[qe,[],function(o){return o.id()}],zoom:[Ye,[],function(o){return o.globals.zoom}],"heatmap-density":[Ye,[],function(o){return o.globals.heatmapDensity||0}],"line-progress":[Ye,[],function(o){return o.globals.lineProgress||0}],accumulated:[qe,[],function(o){return o.globals.accumulated===void 0?null:o.globals.accumulated}],"+":[Ye,xc(Ye),function(o,u){for(var d=0,f=0,x=u;f<x.length;f+=1)d+=x[f].evaluate(o);return d}],"*":[Ye,xc(Ye),function(o,u){for(var d=1,f=0,x=u;f<x.length;f+=1)d*=x[f].evaluate(o);return d}],"-":{type:Ye,overloads:[[[Ye,Ye],function(o,u){var d=u[1];return u[0].evaluate(o)-d.evaluate(o)}],[[Ye],function(o,u){return-u[0].evaluate(o)}]]},"/":[Ye,[Ye,Ye],function(o,u){var d=u[1];return u[0].evaluate(o)/d.evaluate(o)}],"%":[Ye,[Ye,Ye],function(o,u){var d=u[1];return u[0].evaluate(o)%d.evaluate(o)}],ln2:[Ye,[],function(){return Math.LN2}],pi:[Ye,[],function(){return Math.PI}],e:[Ye,[],function(){return Math.E}],"^":[Ye,[Ye,Ye],function(o,u){var d=u[1];return Math.pow(u[0].evaluate(o),d.evaluate(o))}],sqrt:[Ye,[Ye],function(o,u){return Math.sqrt(u[0].evaluate(o))}],log10:[Ye,[Ye],function(o,u){return Math.log(u[0].evaluate(o))/Math.LN10}],ln:[Ye,[Ye],function(o,u){return Math.log(u[0].evaluate(o))}],log2:[Ye,[Ye],function(o,u){return Math.log(u[0].evaluate(o))/Math.LN2}],sin:[Ye,[Ye],function(o,u){return Math.sin(u[0].evaluate(o))}],cos:[Ye,[Ye],function(o,u){return Math.cos(u[0].evaluate(o))}],tan:[Ye,[Ye],function(o,u){return Math.tan(u[0].evaluate(o))}],asin:[Ye,[Ye],function(o,u){return Math.asin(u[0].evaluate(o))}],acos:[Ye,[Ye],function(o,u){return Math.acos(u[0].evaluate(o))}],atan:[Ye,[Ye],function(o,u){return Math.atan(u[0].evaluate(o))}],min:[Ye,xc(Ye),function(o,u){return Math.min.apply(Math,u.map(function(d){return d.evaluate(o)}))}],max:[Ye,xc(Ye),function(o,u){return Math.max.apply(Math,u.map(function(d){return d.evaluate(o)}))}],abs:[Ye,[Ye],function(o,u){return Math.abs(u[0].evaluate(o))}],round:[Ye,[Ye],function(o,u){var d=u[0].evaluate(o);return d<0?-Math.round(-d):Math.round(d)}],floor:[Ye,[Ye],function(o,u){return Math.floor(u[0].evaluate(o))}],ceil:[Ye,[Ye],function(o,u){return Math.ceil(u[0].evaluate(o))}],"filter-==":[It,[Rt,qe],function(o,u){var d=u[0],f=u[1];return o.properties()[d.value]===f.value}],"filter-id-==":[It,[qe],function(o,u){var d=u[0];return o.id()===d.value}],"filter-type-==":[It,[Rt],function(o,u){var d=u[0];return o.geometryType()===d.value}],"filter-<":[It,[Rt,qe],function(o,u){var d=u[0],f=u[1],x=o.properties()[d.value],w=f.value;return typeof x==typeof w&&x<w}],"filter-id-<":[It,[qe],function(o,u){var d=u[0],f=o.id(),x=d.value;return typeof f==typeof x&&f<x}],"filter->":[It,[Rt,qe],function(o,u){var d=u[0],f=u[1],x=o.properties()[d.value],w=f.value;return typeof x==typeof w&&x>w}],"filter-id->":[It,[qe],function(o,u){var d=u[0],f=o.id(),x=d.value;return typeof f==typeof x&&f>x}],"filter-<=":[It,[Rt,qe],function(o,u){var d=u[0],f=u[1],x=o.properties()[d.value],w=f.value;return typeof x==typeof w&&x<=w}],"filter-id-<=":[It,[qe],function(o,u){var d=u[0],f=o.id(),x=d.value;return typeof f==typeof x&&f<=x}],"filter->=":[It,[Rt,qe],function(o,u){var d=u[0],f=u[1],x=o.properties()[d.value],w=f.value;return typeof x==typeof w&&x>=w}],"filter-id->=":[It,[qe],function(o,u){var d=u[0],f=o.id(),x=d.value;return typeof f==typeof x&&f>=x}],"filter-has":[It,[qe],function(o,u){return u[0].value in o.properties()}],"filter-has-id":[It,[],function(o){return o.id()!==null&&o.id()!==void 0}],"filter-type-in":[It,[$t(Rt)],function(o,u){return u[0].value.indexOf(o.geometryType())>=0}],"filter-id-in":[It,[$t(qe)],function(o,u){return u[0].value.indexOf(o.id())>=0}],"filter-in-small":[It,[Rt,$t(qe)],function(o,u){var d=u[0];return u[1].value.indexOf(o.properties()[d.value])>=0}],"filter-in-large":[It,[Rt,$t(qe)],function(o,u){var d=u[0],f=u[1];return function(x,w,A,M){for(;A<=M;){var W=A+M>>1;if(w[W]===x)return!0;w[W]>x?M=W-1:A=W+1}return!1}(o.properties()[d.value],f.value,0,f.value.length-1)}],all:{type:It,overloads:[[[It,It],function(o,u){var d=u[1];return u[0].evaluate(o)&&d.evaluate(o)}],[xc(It),function(o,u){for(var d=0,f=u;d<f.length;d+=1)if(!f[d].evaluate(o))return!1;return!0}]]},any:{type:It,overloads:[[[It,It],function(o,u){var d=u[1];return u[0].evaluate(o)||d.evaluate(o)}],[xc(It),function(o,u){for(var d=0,f=u;d<f.length;d+=1)if(f[d].evaluate(o))return!0;return!1}]]},"!":[It,[It],function(o,u){return!u[0].evaluate(o)}],"is-supported-script":[It,[Rt],function(o,u){var d=o.globals&&o.globals.isSupportedScript;return!d||d(u[0].evaluate(o))}],upcase:[Rt,[Rt],function(o,u){return u[0].evaluate(o).toUpperCase()}],downcase:[Rt,[Rt],function(o,u){return u[0].evaluate(o).toLowerCase()}],concat:[Rt,xc(qe),function(o,u){return u.map(function(d){return Kh(d.evaluate(o))}).join("")}],"resolved-locale":[Rt,[Ae],function(o,u){return u[0].evaluate(o).resolvedLocale()}]});var Ld=function(o,u){this.expression=o,this._warningHistory={},this._evaluator=new Ll,this._defaultValue=u?function(d){return d.type==="color"&&Gm(d.default)?new ui(0,0,0,0):d.type==="color"?ui.parse(d.default)||null:d.default===void 0?null:d.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null};function $h(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in vc}function Pm(o,u){var d=new fu(vc,[],u?function(x){var w={color:At,string:Rt,number:Ye,enum:Rt,boolean:It,formatted:at,resolvedImage:rt};return x.type==="array"?$t(w[x.value]||qe,x.length):w[x.type]}(u):void 0),f=d.parse(o,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?tb(new Ld(f,u)):wc(d.errors)}Ld.prototype.evaluateWithoutErrorHandling=function(o,u,d,f,x,w){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=d,this._evaluator.canonical=f,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)},Ld.prototype.evaluate=function(o,u,d,f,x,w){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=d||null,this._evaluator.canonical=f,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{var A=this.expression.evaluate(this._evaluator);if(A==null||typeof A=="number"&&A!=A)return this._defaultValue;if(this._enumValues&&!(A in this._enumValues))throw new _r("Expected value to be one of "+Object.keys(this._enumValues).map(function(M){return JSON.stringify(M)}).join(", ")+", but found "+JSON.stringify(A)+" instead.");return A}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}};var e_=function(o,u){this.kind=o,this._styleExpression=u,this.isStateDependent=o!=="constant"&&!gu(u.expression)};e_.prototype.evaluateWithoutErrorHandling=function(o,u,d,f,x,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,d,f,x,w)},e_.prototype.evaluate=function(o,u,d,f,x,w){return this._styleExpression.evaluate(o,u,d,f,x,w)};var Rd=function(o,u,d,f){this.kind=o,this.zoomStops=d,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!gu(u.expression),this.interpolationType=f};function rb(o,u){if((o=Pm(o,u)).result==="error")return o;var d=o.value.expression,f=mu(d);if(!f&&!Ic(u))return wc([new nt("","data expressions not supported")]);var x=mc(d,["zoom"]);if(!x&&!ab(u))return wc([new nt("","zoom expressions not supported")]);var w=function A(M){var W=null;if(M instanceof bu)W=A(M.result);else if(M instanceof yu)for(var P=0,N=M.args;P<N.length&&!(W=A(N[P]));P+=1);else(M instanceof vs||M instanceof Ar)&&M.input instanceof Cr&&M.input.name==="zoom"&&(W=M);return W instanceof nt||M.eachChild(function(Z){var Y=A(Z);Y instanceof nt?W=Y:!W&&Y?W=new nt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):W&&Y&&W!==Y&&(W=new nt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),W}(d);return w||x?w instanceof nt?wc([w]):w instanceof Ar&&!Qh(u)?wc([new nt("",'"interpolate" expressions cannot be used with this property')]):tb(w?new Rd(f?"camera":"composite",o.value,w.labels,w instanceof Ar?w.interpolation:void 0):new e_(f?"constant":"source",o.value)):wc([new nt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Rd.prototype.evaluateWithoutErrorHandling=function(o,u,d,f,x,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,d,f,x,w)},Rd.prototype.evaluate=function(o,u,d,f,x,w){return this._styleExpression.evaluate(o,u,d,f,x,w)},Rd.prototype.interpolationFactor=function(o,u,d){return this.interpolationType?Ar.interpolationFactor(this.interpolationType,o,u,d):0};var kd=function(o,u){this._parameters=o,this._specification=u,tt(this,function d(f,x){var w,A,M,W=x.type==="color",P=f.stops&&typeof f.stops[0][0]=="object",N=P||!(P||f.property!==void 0),Z=f.type||(Qh(x)?"exponential":"interval");if(W&&((f=tt({},f)).stops&&(f.stops=f.stops.map(function(kt){return[kt[0],ui.parse(kt[1])]})),f.default=ui.parse(f.default?f.default:x.default)),f.colorSpace&&f.colorSpace!=="rgb"&&!H1[f.colorSpace])throw new Error("Unknown color space: "+f.colorSpace);if(Z==="exponential")w=nb;else if(Z==="interval")w=bI;else if(Z==="categorical"){w=ib,A=Object.create(null);for(var Y=0,Q=f.stops;Y<Q.length;Y+=1){var de=Q[Y];A[de[0]]=de[1]}M=typeof f.stops[0][0]}else{if(Z!=="identity")throw new Error('Unknown function type "'+Z+'"');w=Om}if(P){for(var he={},Se=[],ye=0;ye<f.stops.length;ye++){var Le=f.stops[ye],Oe=Le[0].zoom;he[Oe]===void 0&&(he[Oe]={zoom:Oe,type:f.type,property:f.property,default:f.default,stops:[]},Se.push(Oe)),he[Oe].stops.push([Le[0].value,Le[1]])}for(var Ne=[],Ze=0,$e=Se;Ze<$e.length;Ze+=1){var _t=$e[Ze];Ne.push([he[_t].zoom,d(he[_t],x)])}var xt={name:"linear"};return{kind:"composite",interpolationType:xt,interpolationFactor:Ar.interpolationFactor.bind(void 0,xt),zoomStops:Ne.map(function(kt){return kt[0]}),evaluate:function(kt,aa){var Wt=kt.zoom;return nb({stops:Ne,base:f.base},x,Wt).evaluate(Wt,aa)}}}if(N){var jt=Z==="exponential"?{name:"exponential",base:f.base!==void 0?f.base:1}:null;return{kind:"camera",interpolationType:jt,interpolationFactor:Ar.interpolationFactor.bind(void 0,jt),zoomStops:f.stops.map(function(kt){return kt[0]}),evaluate:function(kt){return w(f,x,kt.zoom,A,M)}}}return{kind:"source",evaluate:function(kt,aa){var Wt=aa&&aa.properties?aa.properties[f.property]:void 0;return Wt===void 0?Md(f.default,x.default):w(f,x,Wt,A,M)}}}(this._parameters,this._specification))};function No(o){var u=o.key,d=o.value,f=o.valueSpec||{},x=o.objectElementValidators||{},w=o.style,A=o.styleSpec,M=[],W=Xi(d);if(W!=="object")return[new _e(u,d,"object expected, "+W+" found")];for(var P in d){var N=P.split(".")[0],Z=f[N]||f["*"],Y=void 0;if(x[N])Y=x[N];else if(f[N])Y=ri;else if(x["*"])Y=x["*"];else{if(!f["*"]){M.push(new _e(u,d[P],'unknown property "'+P+'"'));continue}Y=ri}M=M.concat(Y({key:(u&&u+".")+P,value:d[P],valueSpec:Z,style:w,styleSpec:A,object:d,objectKey:P},d))}for(var Q in f)x[Q]||f[Q].required&&f[Q].default===void 0&&d[Q]===void 0&&M.push(new _e(u,d,'missing required property "'+Q+'"'));return M}function sb(o){var u=o.value,d=o.valueSpec,f=o.style,x=o.styleSpec,w=o.key,A=o.arrayElementValidator||ri;if(Xi(u)!=="array")return[new _e(w,u,"array expected, "+Xi(u)+" found")];if(d.length&&u.length!==d.length)return[new _e(w,u,"array length "+d.length+" expected, length "+u.length+" found")];if(d["min-length"]&&u.length<d["min-length"])return[new _e(w,u,"array length at least "+d["min-length"]+" expected, length "+u.length+" found")];var M={type:d.value,values:d.values};x.$version<7&&(M.function=d.function),Xi(d.value)==="object"&&(M=d.value);for(var W=[],P=0;P<u.length;P++)W=W.concat(A({array:u,arrayIndex:P,value:u[P],valueSpec:M,style:f,styleSpec:x,key:w+"["+P+"]"}));return W}function ob(o){var u=o.key,d=o.value,f=o.valueSpec,x=Xi(d);return x==="number"&&d!=d&&(x="NaN"),x!=="number"?[new _e(u,d,"number expected, "+x+" found")]:"minimum"in f&&d<f.minimum?[new _e(u,d,d+" is less than the minimum value "+f.minimum)]:"maximum"in f&&d>f.maximum?[new _e(u,d,d+" is greater than the maximum value "+f.maximum)]:[]}function lb(o){var u,d,f,x=o.valueSpec,w=ct(o.value.type),A={},M=w!=="categorical"&&o.value.property===void 0,W=!M,P=Xi(o.value.stops)==="array"&&Xi(o.value.stops[0])==="array"&&Xi(o.value.stops[0][0])==="object",N=No({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Q){if(w==="identity")return[new _e(Q.key,Q.value,'identity function may not have a "stops" property')];var de=[],he=Q.value;return de=de.concat(sb({key:Q.key,value:he,valueSpec:Q.valueSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:Z})),Xi(he)==="array"&&he.length===0&&de.push(new _e(Q.key,he,"array must have at least one stop")),de},default:function(Q){return ri({key:Q.key,value:Q.value,valueSpec:x,style:Q.style,styleSpec:Q.styleSpec})}}});return w==="identity"&&M&&N.push(new _e(o.key,o.value,'missing required property "property"')),w==="identity"||o.value.stops||N.push(new _e(o.key,o.value,'missing required property "stops"')),w==="exponential"&&o.valueSpec.expression&&!Qh(o.valueSpec)&&N.push(new _e(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(W&&!Ic(o.valueSpec)?N.push(new _e(o.key,o.value,"property functions not supported")):M&&!ab(o.valueSpec)&&N.push(new _e(o.key,o.value,"zoom functions not supported"))),w!=="categorical"&&!P||o.value.property!==void 0||N.push(new _e(o.key,o.value,'"property" property is required')),N;function Z(Q){var de=[],he=Q.value,Se=Q.key;if(Xi(he)!=="array")return[new _e(Se,he,"array expected, "+Xi(he)+" found")];if(he.length!==2)return[new _e(Se,he,"array length 2 expected, length "+he.length+" found")];if(P){if(Xi(he[0])!=="object")return[new _e(Se,he,"object expected, "+Xi(he[0])+" found")];if(he[0].zoom===void 0)return[new _e(Se,he,"object stop key must have zoom")];if(he[0].value===void 0)return[new _e(Se,he,"object stop key must have value")];if(f&&f>ct(he[0].zoom))return[new _e(Se,he[0].zoom,"stop zoom values must appear in ascending order")];ct(he[0].zoom)!==f&&(f=ct(he[0].zoom),d=void 0,A={}),de=de.concat(No({key:Se+"[0]",value:he[0],valueSpec:{zoom:{}},style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:ob,value:Y}}))}else de=de.concat(Y({key:Se+"[0]",value:he[0],valueSpec:{},style:Q.style,styleSpec:Q.styleSpec},he));return $h(Xe(he[1]))?de.concat([new _e(Se+"[1]",he[1],"expressions are not allowed in function stops.")]):de.concat(ri({key:Se+"[1]",value:he[1],valueSpec:x,style:Q.style,styleSpec:Q.styleSpec}))}function Y(Q,de){var he=Xi(Q.value),Se=ct(Q.value),ye=Q.value!==null?Q.value:de;if(u){if(he!==u)return[new _e(Q.key,ye,he+" stop domain type must match previous stop domain type "+u)]}else u=he;if(he!=="number"&&he!=="string"&&he!=="boolean")return[new _e(Q.key,ye,"stop domain value must be a number, string, or boolean")];if(he!=="number"&&w!=="categorical"){var Le="number expected, "+he+" found";return Ic(x)&&w===void 0&&(Le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new _e(Q.key,ye,Le)]}return w!=="categorical"||he!=="number"||isFinite(Se)&&Math.floor(Se)===Se?w!=="categorical"&&he==="number"&&d!==void 0&&Se<d?[new _e(Q.key,ye,"stop domain values must appear in ascending order")]:(d=Se,w==="categorical"&&Se in A?[new _e(Q.key,ye,"stop domain values must be unique")]:(A[Se]=!0,[])):[new _e(Q.key,ye,"integer expected, found "+Se)]}}function Cc(o){var u=(o.expressionContext==="property"?rb:Pm)(Xe(o.value),o.valueSpec);if(u.result==="error")return u.value.map(function(f){return new _e(""+o.key+f.key,o.value,f.message)});var d=u.value.expression||u.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!d.outputDefined())return[new _e(o.key,o.value,'Invalid data expression for "'+o.propertyKey+'". Output values must be contained as literals within the expression.')];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!gu(d))return[new _e(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!gu(d))return[new _e(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!mc(d,["zoom","feature-state"]))return[new _e(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!mu(d))return[new _e(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function t_(o){var u=o.key,d=o.value,f=o.valueSpec,x=[];return Array.isArray(f.values)?f.values.indexOf(ct(d))===-1&&x.push(new _e(u,d,"expected one of ["+f.values.join(", ")+"], "+JSON.stringify(d)+" found")):Object.keys(f.values).indexOf(ct(d))===-1&&x.push(new _e(u,d,"expected one of ["+Object.keys(f.values).join(", ")+"], "+JSON.stringify(d)+" found")),x}function Bm(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(var u=0,d=o.slice(1);u<d.length;u+=1){var f=d[u];if(!Bm(f)&&typeof f!="boolean")return!1}return!0;default:return!0}}kd.deserialize=function(o){return new kd(o._parameters,o._specification)},kd.serialize=function(o){return{_parameters:o._parameters,_specification:o._specification}};var Af={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Fm(o){if(o==null)return{filter:function(){return!0},needGeometry:!1};Bm(o)||(o=Nm(o));var u=Pm(o,Af);if(u.result==="error")throw new Error(u.value.map(function(d){return d.key+": "+d.message}).join(", "));return{filter:function(d,f,x){return u.value.evaluate(d,f,{},x)},needGeometry:function d(f){if(!Array.isArray(f))return!1;if(f[0]==="within")return!0;for(var x=1;x<f.length;x++)if(d(f[x]))return!0;return!1}(o)}}function vI(o,u){return o<u?-1:o>u?1:0}function Nm(o){if(!o)return!0;var u,d=o[0];return o.length<=1?d!=="any":d==="=="?Sf(o[1],o[2],"=="):d==="!="?Dm(Sf(o[1],o[2],"==")):d==="<"||d===">"||d==="<="||d===">="?Sf(o[1],o[2],d):d==="any"?(u=o.slice(1),["any"].concat(u.map(Nm))):d==="all"?["all"].concat(o.slice(1).map(Nm)):d==="none"?["all"].concat(o.slice(1).map(Nm).map(Dm)):d==="in"?ub(o[1],o.slice(2)):d==="!in"?Dm(ub(o[1],o.slice(2))):d==="has"?cb(o[1]):d==="!has"?Dm(cb(o[1])):d!=="within"||o}function Sf(o,u,d){switch(o){case"$type":return["filter-type-"+d,u];case"$id":return["filter-id-"+d,u];default:return["filter-"+d,o,u]}}function ub(o,u){if(u.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some(function(d){return typeof d!=typeof u[0]})?["filter-in-large",o,["literal",u.sort(vI)]]:["filter-in-small",o,["literal",u]]}}function cb(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Dm(o){return["!",o]}function Tf(o){return Bm(Xe(o.value))?Cc(tt({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function u(d){var f=d.value,x=d.key;if(Xi(f)!=="array")return[new _e(x,f,"array expected, "+Xi(f)+" found")];var w,A=d.styleSpec,M=[];if(f.length<1)return[new _e(x,f,"filter array must have at least 1 element")];switch(M=M.concat(t_({key:x+"[0]",value:f[0],valueSpec:A.filter_operator,style:d.style,styleSpec:d.styleSpec})),ct(f[0])){case"<":case"<=":case">":case">=":f.length>=2&&ct(f[1])==="$type"&&M.push(new _e(x,f,'"$type" cannot be use with operator "'+f[0]+'"'));case"==":case"!=":f.length!==3&&M.push(new _e(x,f,'filter array for operator "'+f[0]+'" must have 3 elements'));case"in":case"!in":f.length>=2&&(w=Xi(f[1]))!=="string"&&M.push(new _e(x+"[1]",f[1],"string expected, "+w+" found"));for(var W=2;W<f.length;W++)w=Xi(f[W]),ct(f[1])==="$type"?M=M.concat(t_({key:x+"["+W+"]",value:f[W],valueSpec:A.geometry_type,style:d.style,styleSpec:d.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&M.push(new _e(x+"["+W+"]",f[W],"string, number, or boolean expected, "+w+" found"));break;case"any":case"all":case"none":for(var P=1;P<f.length;P++)M=M.concat(u({key:x+"["+P+"]",value:f[P],style:d.style,styleSpec:d.styleSpec}));break;case"has":case"!has":w=Xi(f[1]),f.length!==2?M.push(new _e(x,f,'filter array for "'+f[0]+'" operator must have 2 elements')):w!=="string"&&M.push(new _e(x+"[1]",f[1],"string expected, "+w+" found"));break;case"within":w=Xi(f[1]),f.length!==2?M.push(new _e(x,f,'filter array for "'+f[0]+'" operator must have 2 elements')):w!=="object"&&M.push(new _e(x+"[1]",f[1],"object expected, "+w+" found"))}return M}(o)}function Ef(o,u){var d=o.key,f=o.style,x=o.styleSpec,w=o.value,A=o.objectKey,M=x[u+"_"+o.layerType];if(!M)return[];var W=A.match(/^(.*)-transition$/);if(u==="paint"&&W&&M[W[1]]&&M[W[1]].transition)return ri({key:d,value:w,valueSpec:x.transition,style:f,styleSpec:x});var P,N=o.valueSpec||M[A];if(!N)return[new _e(d,w,'unknown property "'+A+'"')];if(Xi(w)==="string"&&Ic(N)&&!N.tokens&&(P=/^{([^}]+)}$/.exec(w)))return[new _e(d,w,'"'+A+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(P[1])+" }`.")];var Z=[];return o.layerType==="symbol"&&(A==="text-field"&&f&&!f.glyphs&&Z.push(new _e(d,w,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&Gm(Xe(w))&&ct(w.type)==="identity"&&Z.push(new _e(d,w,'"text-font" does not support identity functions'))),Z.concat(ri({key:o.key,value:w,valueSpec:N,style:f,styleSpec:x,expressionContext:"property",propertyType:u,propertyKey:A}))}function Mf(o){return Ef(o,"paint")}function a_(o){return Ef(o,"layout")}function db(o){var u=[],d=o.value,f=o.key,x=o.style,w=o.styleSpec;d.type||d.ref||u.push(new _e(f,d,'either "type" or "ref" is required'));var A,M=ct(d.type),W=ct(d.ref);if(d.id)for(var P=ct(d.id),N=0;N<o.arrayIndex;N++){var Z=x.layers[N];ct(Z.id)===P&&u.push(new _e(f,d.id,'duplicate layer id "'+d.id+'", previously used at line '+Z.id.__line__))}if("ref"in d)["type","source","source-layer","filter","layout"].forEach(function(de){de in d&&u.push(new _e(f,d[de],'"'+de+'" is prohibited for ref layers'))}),x.layers.forEach(function(de){ct(de.id)===W&&(A=de)}),A?A.ref?u.push(new _e(f,d.ref,"ref cannot reference another ref layer")):M=ct(A.type):u.push(new _e(f,d.ref,'ref layer "'+W+'" not found'));else if(M!=="background")if(d.source){var Y=x.sources&&x.sources[d.source],Q=Y&&ct(Y.type);Y?Q==="vector"&&M==="raster"?u.push(new _e(f,d.source,'layer "'+d.id+'" requires a raster source')):Q==="raster"&&M!=="raster"?u.push(new _e(f,d.source,'layer "'+d.id+'" requires a vector source')):Q!=="vector"||d["source-layer"]?Q==="raster-dem"&&M!=="hillshade"?u.push(new _e(f,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):M!=="line"||!d.paint||!d.paint["line-gradient"]||Q==="geojson"&&Y.lineMetrics||u.push(new _e(f,d,'layer "'+d.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):u.push(new _e(f,d,'layer "'+d.id+'" must specify a "source-layer"')):u.push(new _e(f,d.source,'source "'+d.source+'" not found'))}else u.push(new _e(f,d,'missing required property "source"'));return u=u.concat(No({key:f,value:d,valueSpec:w.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return ri({key:f+".type",value:d.type,valueSpec:w.layer.type,style:o.style,styleSpec:o.styleSpec,object:d,objectKey:"type"})},filter:Tf,layout:function(de){return No({layer:d,key:de.key,value:de.value,style:de.style,styleSpec:de.styleSpec,objectElementValidators:{"*":function(he){return a_(tt({layerType:M},he))}}})},paint:function(de){return No({layer:d,key:de.key,value:de.value,style:de.style,styleSpec:de.styleSpec,objectElementValidators:{"*":function(he){return Mf(tt({layerType:M},he))}}})}}}))}function Ac(o){var u=o.value,d=o.key,f=Xi(u);return f!=="string"?[new _e(d,u,"string expected, "+f+" found")]:[]}var sn={promoteId:function(o){var u=o.key,d=o.value;if(Xi(d)==="string")return Ac({key:u,value:d});var f=[];for(var x in d)f.push.apply(f,Ac({key:u+"."+x,value:d[x]}));return f}};function Vm(o){var u=o.value,d=o.key,f=o.styleSpec,x=o.style;if(!u.type)return[new _e(d,u,'"type" is required')];var w,A=ct(u.type);switch(A){case"vector":case"raster":case"raster-dem":return No({key:d,value:u,valueSpec:f["source_"+A.replace("-","_")],style:o.style,styleSpec:f,objectElementValidators:sn});case"geojson":if(w=No({key:d,value:u,valueSpec:f.source_geojson,style:x,styleSpec:f,objectElementValidators:sn}),u.cluster)for(var M in u.clusterProperties){var W=u.clusterProperties[M],P=W[0],N=typeof P=="string"?[P,["accumulated"],["get",M]]:P;w.push.apply(w,Cc({key:d+"."+M+".map",value:W[1],expressionContext:"cluster-map"})),w.push.apply(w,Cc({key:d+"."+M+".reduce",value:N,expressionContext:"cluster-reduce"}))}return w;case"video":return No({key:d,value:u,valueSpec:f.source_video,style:x,styleSpec:f});case"image":return No({key:d,value:u,valueSpec:f.source_image,style:x,styleSpec:f});case"canvas":return[new _e(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return t_({key:d+".type",value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:x,styleSpec:f})}}function Sc(o){var u=o.value,d=o.styleSpec,f=d.light,x=o.style,w=[],A=Xi(u);if(u===void 0)return w;if(A!=="object")return w.concat([new _e("light",u,"object expected, "+A+" found")]);for(var M in u){var W=M.match(/^(.*)-transition$/);w=w.concat(W&&f[W[1]]&&f[W[1]].transition?ri({key:M,value:u[M],valueSpec:d.transition,style:x,styleSpec:d}):f[M]?ri({key:M,value:u[M],valueSpec:f[M],style:x,styleSpec:d}):[new _e(M,u[M],'unknown property "'+M+'"')])}return w}var Iu={"*":function(){return[]},array:sb,boolean:function(o){var u=o.value,d=o.key,f=Xi(u);return f!=="boolean"?[new _e(d,u,"boolean expected, "+f+" found")]:[]},number:ob,color:function(o){var u=o.key,d=o.value,f=Xi(d);return f!=="string"?[new _e(u,d,"color expected, "+f+" found")]:Da(d)===null?[new _e(u,d,'color expected, "'+d+'" found')]:[]},constants:Re,enum:t_,filter:Tf,function:lb,layer:db,object:No,source:Vm,light:Sc,string:Ac,formatted:function(o){return Ac(o).length===0?[]:Cc(o)},resolvedImage:function(o){return Ac(o).length===0?[]:Cc(o)}};function ri(o){var u=o.value,d=o.valueSpec,f=o.styleSpec;return d.expression&&Gm(ct(u))?lb(o):d.expression&&$h(Xe(u))?Cc(o):d.type&&Iu[d.type]?Iu[d.type](o):No(tt({},o,{valueSpec:d.type?f[d.type]:d}))}function Hi(o){var u=o.value,d=o.key,f=Ac(o);return f.length||(u.indexOf("{fontstack}")===-1&&f.push(new _e(d,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&f.push(new _e(d,u,'"glyphs" url must include a "{range}" token'))),f}function zs(o,u){u===void 0&&(u=J);var d=[];return d=d.concat(ri({key:"",value:o,valueSpec:u.$root,styleSpec:u,style:o,objectElementValidators:{glyphs:Hi,"*":function(){return[]}}})),o.constants&&(d=d.concat(Re({key:"constants",value:o.constants,style:o,styleSpec:u}))),i_(d)}function i_(o){return[].concat(o).sort(function(u,d){return u.line-d.line})}function Wd(o){return function(){for(var u=[],d=arguments.length;d--;)u[d]=arguments[d];return i_(o.apply(this,u))}}zs.source=Wd(Vm),zs.light=Wd(Sc),zs.layer=Wd(db),zs.filter=Wd(Tf),zs.paintProperty=Wd(Mf),zs.layoutProperty=Wd(a_);var n_=zs,xI=n_.light,wI=n_.paintProperty,r_=n_.layoutProperty;function s_(o,u){var d=!1;if(u&&u.length)for(var f=0,x=u;f<x.length;f+=1)o.fire(new Ce(new Error(x[f].message))),d=!0;return d}var Rl=Un;function Un(o,u,d){var f=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var x=new Int32Array(this.arrayBuffer);o=x[0],this.d=(u=x[1])+2*(d=x[2]);for(var w=0;w<this.d*this.d;w++){var A=x[3+w],M=x[3+w+1];f.push(A===M?null:x.subarray(A,M))}var W=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],W),this.bboxes=x.subarray(W),this.insert=this._insertReadonly}else{this.d=u+2*d;for(var P=0;P<this.d*this.d;P++)f.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=o,this.padding=d,this.scale=u/o,this.uid=0;var N=d/u*o;this.min=-N,this.max=o+N}Un.prototype.insert=function(o,u,d,f,x){this._forEachCell(u,d,f,x,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(x)},Un.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Un.prototype._insertCell=function(o,u,d,f,x,w){this.cells[x].push(w)},Un.prototype.query=function(o,u,d,f,x){var w=this.min,A=this.max;if(o<=w&&u<=w&&A<=d&&A<=f&&!x)return Array.prototype.slice.call(this.keys);var M=[];return this._forEachCell(o,u,d,f,this._queryCell,M,{},x),M},Un.prototype._queryCell=function(o,u,d,f,x,w,A,M){var W=this.cells[x];if(W!==null)for(var P=this.keys,N=this.bboxes,Z=0;Z<W.length;Z++){var Y=W[Z];if(A[Y]===void 0){var Q=4*Y;(M?M(N[Q+0],N[Q+1],N[Q+2],N[Q+3]):o<=N[Q+2]&&u<=N[Q+3]&&d>=N[Q+0]&&f>=N[Q+1])?(A[Y]=!0,w.push(P[Y])):A[Y]=!1}}},Un.prototype._forEachCell=function(o,u,d,f,x,w,A,M){for(var W=this._convertToCellCoord(o),P=this._convertToCellCoord(u),N=this._convertToCellCoord(d),Z=this._convertToCellCoord(f),Y=W;Y<=N;Y++)for(var Q=P;Q<=Z;Q++){var de=this.d*Q+Y;if((!M||M(this._convertFromCellCoord(Y),this._convertFromCellCoord(Q),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(Q+1)))&&x.call(this,o,u,d,f,de,w,A,M))return}},Un.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},Un.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},Un.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,u=3+this.cells.length+1+1,d=0,f=0;f<this.cells.length;f++)d+=this.cells[f].length;var x=new Int32Array(u+d+this.keys.length+this.bboxes.length);x[0]=this.extent,x[1]=this.n,x[2]=this.padding;for(var w=u,A=0;A<o.length;A++){var M=o[A];x[3+A]=w,x.set(M,w),w+=M.length}return x[3+o.length]=w,x.set(this.keys,w),x[3+o.length+1]=w+=this.keys.length,x.set(this.bboxes,w),w+=this.bboxes.length,x.buffer};var o_=v.ImageData,hb=v.ImageBitmap,Fn={};function Nt(o,u,d){d===void 0&&(d={}),Object.defineProperty(u,"_classRegistryKey",{value:o,writeable:!1}),Fn[o]={klass:u,omit:d.omit||[],shallow:d.shallow||[]}}for(var xs in Nt("Object",Object),Rl.serialize=function(o,u){var d=o.toArrayBuffer();return u&&u.push(d),{buffer:d}},Rl.deserialize=function(o){return new Rl(o.buffer)},Nt("Grid",Rl),Nt("Color",ui),Nt("Error",Error),Nt("ResolvedImage",rs),Nt("StylePropertyFunction",kd),Nt("StyleExpression",Ld,{omit:["_evaluator"]}),Nt("ZoomDependentExpression",Rd),Nt("ZoomConstantExpression",e_),Nt("CompoundExpression",Cr,{omit:["_evaluate"]}),vc)vc[xs]._classRegistryKey||Nt("Expression_"+xs,vc[xs]);function Zm(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Gd(o){return hb&&o instanceof hb}function Do(o,u){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(Zm(o)||Gd(o))return u&&u.push(o),o;if(ArrayBuffer.isView(o)){var d=o;return u&&u.push(d.buffer),d}if(o instanceof o_)return u&&u.push(o.data.buffer),o;if(Array.isArray(o)){for(var f=[],x=0,w=o;x<w.length;x+=1)f.push(Do(w[x],u));return f}if(typeof o=="object"){var A=o.constructor,M=A._classRegistryKey;if(!M)throw new Error("can't serialize object of unregistered class");var W=A.serialize?A.serialize(o,u):{};if(!A.serialize){for(var P in o)if(o.hasOwnProperty(P)&&!(Fn[M].omit.indexOf(P)>=0)){var N=o[P];W[P]=Fn[M].shallow.indexOf(P)>=0?N:Do(N,u)}o instanceof Error&&(W.message=o.message)}if(W.$name)throw new Error("$name property is reserved for worker serialization logic.");return M!=="Object"&&(W.$name=M),W}throw new Error("can't serialize object of type "+typeof o)}function ws(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||Zm(o)||Gd(o)||ArrayBuffer.isView(o)||o instanceof o_)return o;if(Array.isArray(o))return o.map(ws);if(typeof o=="object"){var u=o.$name||"Object",d=Fn[u].klass;if(!d)throw new Error("can't deserialize unregistered class "+u);if(d.deserialize)return d.deserialize(o);for(var f=Object.create(d.prototype),x=0,w=Object.keys(o);x<w.length;x+=1){var A=w[x];if(A!=="$name"){var M=o[A];f[A]=Fn[u].shallow.indexOf(A)>=0?M:ws(M)}}return f}throw new Error("can't deserialize object of type "+typeof o)}var Lf=function(){this.first=!0};Lf.prototype.update=function(o,u){var d=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=u),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=d,!0))};var St={"Latin-1 Supplement":function(o){return o>=128&&o<=255},Arabic:function(o){return o>=1536&&o<=1791},"Arabic Supplement":function(o){return o>=1872&&o<=1919},"Arabic Extended-A":function(o){return o>=2208&&o<=2303},"Hangul Jamo":function(o){return o>=4352&&o<=4607},"Unified Canadian Aboriginal Syllabics":function(o){return o>=5120&&o<=5759},Khmer:function(o){return o>=6016&&o<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(o){return o>=6320&&o<=6399},"General Punctuation":function(o){return o>=8192&&o<=8303},"Letterlike Symbols":function(o){return o>=8448&&o<=8527},"Number Forms":function(o){return o>=8528&&o<=8591},"Miscellaneous Technical":function(o){return o>=8960&&o<=9215},"Control Pictures":function(o){return o>=9216&&o<=9279},"Optical Character Recognition":function(o){return o>=9280&&o<=9311},"Enclosed Alphanumerics":function(o){return o>=9312&&o<=9471},"Geometric Shapes":function(o){return o>=9632&&o<=9727},"Miscellaneous Symbols":function(o){return o>=9728&&o<=9983},"Miscellaneous Symbols and Arrows":function(o){return o>=11008&&o<=11263},"CJK Radicals Supplement":function(o){return o>=11904&&o<=12031},"Kangxi Radicals":function(o){return o>=12032&&o<=12255},"Ideographic Description Characters":function(o){return o>=12272&&o<=12287},"CJK Symbols and Punctuation":function(o){return o>=12288&&o<=12351},Hiragana:function(o){return o>=12352&&o<=12447},Katakana:function(o){return o>=12448&&o<=12543},Bopomofo:function(o){return o>=12544&&o<=12591},"Hangul Compatibility Jamo":function(o){return o>=12592&&o<=12687},Kanbun:function(o){return o>=12688&&o<=12703},"Bopomofo Extended":function(o){return o>=12704&&o<=12735},"CJK Strokes":function(o){return o>=12736&&o<=12783},"Katakana Phonetic Extensions":function(o){return o>=12784&&o<=12799},"Enclosed CJK Letters and Months":function(o){return o>=12800&&o<=13055},"CJK Compatibility":function(o){return o>=13056&&o<=13311},"CJK Unified Ideographs Extension A":function(o){return o>=13312&&o<=19903},"Yijing Hexagram Symbols":function(o){return o>=19904&&o<=19967},"CJK Unified Ideographs":function(o){return o>=19968&&o<=40959},"Yi Syllables":function(o){return o>=40960&&o<=42127},"Yi Radicals":function(o){return o>=42128&&o<=42191},"Hangul Jamo Extended-A":function(o){return o>=43360&&o<=43391},"Hangul Syllables":function(o){return o>=44032&&o<=55215},"Hangul Jamo Extended-B":function(o){return o>=55216&&o<=55295},"Private Use Area":function(o){return o>=57344&&o<=63743},"CJK Compatibility Ideographs":function(o){return o>=63744&&o<=64255},"Arabic Presentation Forms-A":function(o){return o>=64336&&o<=65023},"Vertical Forms":function(o){return o>=65040&&o<=65055},"CJK Compatibility Forms":function(o){return o>=65072&&o<=65103},"Small Form Variants":function(o){return o>=65104&&o<=65135},"Arabic Presentation Forms-B":function(o){return o>=65136&&o<=65279},"Halfwidth and Fullwidth Forms":function(o){return o>=65280&&o<=65519}};function Rf(o){for(var u=0,d=o;u<d.length;u+=1)if(zm(d[u].charCodeAt(0)))return!0;return!1}function zm(o){return!(o!==746&&o!==747&&(o<4352||!(St["Bopomofo Extended"](o)||St.Bopomofo(o)||St["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||St["CJK Compatibility Ideographs"](o)||St["CJK Compatibility"](o)||St["CJK Radicals Supplement"](o)||St["CJK Strokes"](o)||!(!St["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||St["CJK Unified Ideographs Extension A"](o)||St["CJK Unified Ideographs"](o)||St["Enclosed CJK Letters and Months"](o)||St["Hangul Compatibility Jamo"](o)||St["Hangul Jamo Extended-A"](o)||St["Hangul Jamo Extended-B"](o)||St["Hangul Jamo"](o)||St["Hangul Syllables"](o)||St.Hiragana(o)||St["Ideographic Description Characters"](o)||St.Kanbun(o)||St["Kangxi Radicals"](o)||St["Katakana Phonetic Extensions"](o)||St.Katakana(o)&&o!==12540||!(!St["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!St["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||St["Unified Canadian Aboriginal Syllabics"](o)||St["Unified Canadian Aboriginal Syllabics Extended"](o)||St["Vertical Forms"](o)||St["Yijing Hexagram Symbols"](o)||St["Yi Syllables"](o)||St["Yi Radicals"](o))))}function kf(o){return!(zm(o)||function(u){return!!(St["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||St["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||St["Letterlike Symbols"](u)||St["Number Forms"](u)||St["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||St["Control Pictures"](u)&&u!==9251||St["Optical Character Recognition"](u)||St["Enclosed Alphanumerics"](u)||St["Geometric Shapes"](u)||St["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||St["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||St["CJK Symbols and Punctuation"](u)||St.Katakana(u)||St["Private Use Area"](u)||St["CJK Compatibility Forms"](u)||St["Small Form Variants"](u)||St["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)}(o))}function ho(o){return o>=1424&&o<=2303||St["Arabic Presentation Forms-A"](o)||St["Arabic Presentation Forms-B"](o)}function Is(o,u){return!(!u&&ho(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||St.Khmer(o))}function Um(o){for(var u=0,d=o;u<d.length;u+=1)if(ho(d[u].charCodeAt(0)))return!0;return!1}var Xm=null,Cs="unavailable",kl=null,_b=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Cs="error"),Xm&&Xm(o)};function l_(){Wf.fire(new oe("pluginStateChange",{pluginStatus:Cs,pluginURL:kl}))}var Wf=new ve,Gf=function(){return Cs},Vo=function(){if(Cs!=="deferred"||!kl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Cs="loading",l_(),kl&&nn({url:kl},function(o){o?_b(o):(Cs="loaded",l_())})},Us={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Cs==="loaded"||Us.applyArabicShaping!=null},isLoading:function(){return Cs==="loading"},setState:function(o){Cs=o.pluginStatus,kl=o.pluginURL},isParsed:function(){return Us.applyArabicShaping!=null&&Us.processBidirectionalText!=null&&Us.processStyledBidirectionalText!=null},getPluginURL:function(){return kl}},Ya=function(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Lf,this.transition={})};Ya.prototype.isSupportedScript=function(o){return function(u,d){for(var f=0,x=u;f<x.length;f+=1)if(!Is(x[f].charCodeAt(0),d))return!1;return!0}(o,Us.isLoaded())},Ya.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ya.prototype.getCrossfadeParameters=function(){var o=this.zoom,u=o-Math.floor(o),d=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*u}};var ll=function(o,u){this.property=o,this.value=u,this.expression=function(d,f){if(Gm(d))return new kd(d,f);if($h(d)){var x=rb(d,f);if(x.result==="error")throw new Error(x.value.map(function(A){return A.key+": "+A.message}).join(", "));return x.value}var w=d;return typeof d=="string"&&f.type==="color"&&(w=ui.parse(d)),{kind:"constant",evaluate:function(){return w}}}(u===void 0?o.specification.default:u,o.specification)};ll.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},ll.prototype.possiblyEvaluate=function(o,u,d){return this.property.possiblyEvaluate(this,o,u,d)};var _o=function(o){this.property=o,this.value=new ll(o,void 0)};_o.prototype.transitioned=function(o,u){return new Tc(this.property,this.value,u,O({},o.transition,this.transition),o.now)},_o.prototype.untransitioned=function(){return new Tc(this.property,this.value,null,{},0)};var Sr=function(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)};Sr.prototype.getValue=function(o){return ue(this._values[o].value.value)},Sr.prototype.setValue=function(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new _o(this._values[o].property)),this._values[o].value=new ll(this._values[o].property,u===null?void 0:ue(u))},Sr.prototype.getTransition=function(o){return ue(this._values[o].transition)},Sr.prototype.setTransition=function(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new _o(this._values[o].property)),this._values[o].transition=ue(u)||void 0},Sr.prototype.serialize=function(){for(var o={},u=0,d=Object.keys(this._values);u<d.length;u+=1){var f=d[u],x=this.getValue(f);x!==void 0&&(o[f]=x);var w=this.getTransition(f);w!==void 0&&(o[f+"-transition"]=w)}return o},Sr.prototype.transitioned=function(o,u){for(var d=new Cu(this._properties),f=0,x=Object.keys(this._values);f<x.length;f+=1){var w=x[f];d._values[w]=this._values[w].transitioned(o,u._values[w])}return d},Sr.prototype.untransitioned=function(){for(var o=new Cu(this._properties),u=0,d=Object.keys(this._values);u<d.length;u+=1){var f=d[u];o._values[f]=this._values[f].untransitioned()}return o};var Tc=function(o,u,d,f,x){this.property=o,this.value=u,this.begin=x+f.delay||0,this.end=this.begin+f.duration||0,o.specification.transition&&(f.delay||f.duration)&&(this.prior=d)};Tc.prototype.possiblyEvaluate=function(o,u,d){var f=o.now||0,x=this.value.possiblyEvaluate(o,u,d),w=this.prior;if(w){if(f>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(f<this.begin)return w.possiblyEvaluate(o,u,d);var A=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,u,d),x,function(M){if(M<=0)return 0;if(M>=1)return 1;var W=M*M,P=W*M;return 4*(M<.5?P:3*(M-W)+P-.75)}(A))}return x};var Cu=function(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)};Cu.prototype.possiblyEvaluate=function(o,u,d){for(var f=new u_(this._properties),x=0,w=Object.keys(this._values);x<w.length;x+=1){var A=w[x];f._values[A]=this._values[A].possiblyEvaluate(o,u,d)}return f},Cu.prototype.hasTransition=function(){for(var o=0,u=Object.keys(this._values);o<u.length;o+=1)if(this._values[u[o]].prior)return!0;return!1};var Zo=function(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)};Zo.prototype.getValue=function(o){return ue(this._values[o].value)},Zo.prototype.setValue=function(o,u){this._values[o]=new ll(this._values[o].property,u===null?void 0:ue(u))},Zo.prototype.serialize=function(){for(var o={},u=0,d=Object.keys(this._values);u<d.length;u+=1){var f=d[u],x=this.getValue(f);x!==void 0&&(o[f]=x)}return o},Zo.prototype.possiblyEvaluate=function(o,u,d){for(var f=new u_(this._properties),x=0,w=Object.keys(this._values);x<w.length;x+=1){var A=w[x];f._values[A]=this._values[A].possiblyEvaluate(o,u,d)}return f};var Hr=function(o,u,d){this.property=o,this.value=u,this.parameters=d};Hr.prototype.isConstant=function(){return this.value.kind==="constant"},Hr.prototype.constantOr=function(o){return this.value.kind==="constant"?this.value.value:o},Hr.prototype.evaluate=function(o,u,d,f){return this.property.evaluate(this.value,this.parameters,o,u,d,f)};var u_=function(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)};u_.prototype.get=function(o){return this._values[o]};var ea=function(o){this.specification=o};ea.prototype.possiblyEvaluate=function(o,u){return o.expression.evaluate(u)},ea.prototype.interpolate=function(o,u,d){var f=Ed[this.specification.type];return f?f(o,u,d):o};var zt=function(o,u){this.specification=o,this.overrides=u};zt.prototype.possiblyEvaluate=function(o,u,d,f){return new Hr(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(u,null,{},d,f)}:o.expression,u)},zt.prototype.interpolate=function(o,u,d){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new Hr(this,{kind:"constant",value:void 0},o.parameters);var f=Ed[this.specification.type];return f?new Hr(this,{kind:"constant",value:f(o.value.value,u.value.value,d)},o.parameters):o},zt.prototype.evaluate=function(o,u,d,f,x,w){return o.kind==="constant"?o.value:o.evaluate(u,d,f,x,w)};var Hm=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.possiblyEvaluate=function(d,f,x,w){if(d.value===void 0)return new Hr(this,{kind:"constant",value:void 0},f);if(d.expression.kind==="constant"){var A=d.expression.evaluate(f,null,{},x,w),M=d.property.specification.type==="resolvedImage"&&typeof A!="string"?A.name:A,W=this._calculate(M,M,M,f);return new Hr(this,{kind:"constant",value:W},f)}if(d.expression.kind==="camera"){var P=this._calculate(d.expression.evaluate({zoom:f.zoom-1}),d.expression.evaluate({zoom:f.zoom}),d.expression.evaluate({zoom:f.zoom+1}),f);return new Hr(this,{kind:"constant",value:P},f)}return new Hr(this,d.expression,f)},u.prototype.evaluate=function(d,f,x,w,A,M){if(d.kind==="source"){var W=d.evaluate(f,x,w,A,M);return this._calculate(W,W,W,f)}return d.kind==="composite"?this._calculate(d.evaluate({zoom:Math.floor(f.zoom)-1},x,w),d.evaluate({zoom:Math.floor(f.zoom)},x,w),d.evaluate({zoom:Math.floor(f.zoom)+1},x,w),f):d.value},u.prototype._calculate=function(d,f,x,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:d,to:f}:{from:x,to:f}},u.prototype.interpolate=function(d){return d},u}(zt),Yr=function(o){this.specification=o};Yr.prototype.possiblyEvaluate=function(o,u,d,f){if(o.value!==void 0){if(o.expression.kind==="constant"){var x=o.expression.evaluate(u,null,{},d,f);return this._calculate(x,x,x,u)}return this._calculate(o.expression.evaluate(new Ya(Math.floor(u.zoom-1),u)),o.expression.evaluate(new Ya(Math.floor(u.zoom),u)),o.expression.evaluate(new Ya(Math.floor(u.zoom+1),u)),u)}},Yr.prototype._calculate=function(o,u,d,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:d,to:u}},Yr.prototype.interpolate=function(o){return o};var zo=function(o){this.specification=o};zo.prototype.possiblyEvaluate=function(o,u,d,f){return!!o.expression.evaluate(u,null,{},d,f)},zo.prototype.interpolate=function(){return!1};var Tr=function(o){for(var u in this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],o){var d=o[u];d.specification.overridable&&this.overridableProperties.push(u);var f=this.defaultPropertyValues[u]=new ll(d,void 0),x=this.defaultTransitionablePropertyValues[u]=new _o(d);this.defaultTransitioningPropertyValues[u]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=f.possiblyEvaluate({})}};Nt("DataDrivenProperty",zt),Nt("DataConstantProperty",ea),Nt("CrossFadedDataDrivenProperty",Hm),Nt("CrossFadedProperty",Yr),Nt("ColorRampProperty",zo);var ul=function(o){function u(d,f){if(o.call(this),this.id=d.id,this.type=d.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},d.type!=="custom"&&(this.metadata=(d=d).metadata,this.minzoom=d.minzoom,this.maxzoom=d.maxzoom,d.type!=="background"&&(this.source=d.source,this.sourceLayer=d["source-layer"],this.filter=d.filter),f.layout&&(this._unevaluatedLayout=new Zo(f.layout)),f.paint)){for(var x in this._transitionablePaint=new Sr(f.paint),d.paint)this.setPaintProperty(x,d.paint[x],{validate:!1});for(var w in d.layout)this.setLayoutProperty(w,d.layout[w],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new u_(f.paint)}}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},u.prototype.getLayoutProperty=function(d){return d==="visibility"?this.visibility:this._unevaluatedLayout.getValue(d)},u.prototype.setLayoutProperty=function(d,f,x){x===void 0&&(x={}),f!=null&&this._validate(r_,"layers."+this.id+".layout."+d,d,f,x)||(d!=="visibility"?this._unevaluatedLayout.setValue(d,f):this.visibility=f)},u.prototype.getPaintProperty=function(d){return ne(d,"-transition")?this._transitionablePaint.getTransition(d.slice(0,-11)):this._transitionablePaint.getValue(d)},u.prototype.setPaintProperty=function(d,f,x){if(x===void 0&&(x={}),f!=null&&this._validate(wI,"layers."+this.id+".paint."+d,d,f,x))return!1;if(ne(d,"-transition"))return this._transitionablePaint.setTransition(d.slice(0,-11),f||void 0),!1;var w=this._transitionablePaint._values[d],A=w.property.specification["property-type"]==="cross-faded-data-driven",M=w.value.isDataDriven(),W=w.value;this._transitionablePaint.setValue(d,f),this._handleSpecialPaintPropertyUpdate(d);var P=this._transitionablePaint._values[d].value;return P.isDataDriven()||M||A||this._handleOverridablePaintPropertyUpdate(d,W,P)},u.prototype._handleSpecialPaintPropertyUpdate=function(d){},u.prototype._handleOverridablePaintPropertyUpdate=function(d,f,x){return!1},u.prototype.isHidden=function(d){return!!(this.minzoom&&d<this.minzoom)||!!(this.maxzoom&&d>=this.maxzoom)||this.visibility==="none"},u.prototype.updateTransitions=function(d){this._transitioningPaint=this._transitionablePaint.transitioned(d,this._transitioningPaint)},u.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},u.prototype.recalculate=function(d,f){d.getCrossfadeParameters&&(this._crossfadeParameters=d.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(d,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(d,void 0,f)},u.prototype.serialize=function(){var d={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(d.layout=d.layout||{},d.layout.visibility=this.visibility),le(d,function(f,x){return!(f===void 0||x==="layout"&&!Object.keys(f).length||x==="paint"&&!Object.keys(f).length)})},u.prototype._validate=function(d,f,x,w,A){return A===void 0&&(A={}),(!A||A.validate!==!1)&&s_(this,d.call(n_,{key:f,layerType:this.type,objectKey:x,value:w,styleSpec:J,style:{glyphs:!0,sprite:!0}}))},u.prototype.is3D=function(){return!1},u.prototype.isTileClipped=function(){return!1},u.prototype.hasOffscreenPass=function(){return!1},u.prototype.resize=function(){},u.prototype.isStateDependent=function(){for(var d in this.paint._values){var f=this.paint.get(d);if(f instanceof Hr&&Ic(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1},u}(ve),Of={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ym=function(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},vi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function mr(o,u){u===void 0&&(u=1);var d=0,f=0;return{members:o.map(function(x){var w=Of[x.type].BYTES_PER_ELEMENT,A=d=mb(d,Math.max(u,w)),M=x.components||1;return f=Math.max(f,w),d+=w*M,{name:x.name,type:x.type,components:M,offset:A}}),size:mb(d,Math.max(f,u)),alignment:u}}function mb(o,u){return Math.ceil(o/u)*u}vi.serialize=function(o,u){return o._trim(),u&&(o.isTransferred=!0,u.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}},vi.deserialize=function(o){var u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u},vi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},vi.prototype.clear=function(){this.length=0},vi.prototype.resize=function(o){this.reserve(o),this.length=o},vi.prototype.reserve=function(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}},vi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ec=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f){var x=this.length;return this.resize(x+1),this.emplace(x,d,f)},u.prototype.emplace=function(d,f,x){var w=2*d;return this.int16[w+0]=f,this.int16[w+1]=x,d},u}(vi);Ec.prototype.bytesPerElement=4,Nt("StructArrayLayout2i4",Ec);var Pf=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w){var A=this.length;return this.resize(A+1),this.emplace(A,d,f,x,w)},u.prototype.emplace=function(d,f,x,w,A){var M=4*d;return this.int16[M+0]=f,this.int16[M+1]=x,this.int16[M+2]=w,this.int16[M+3]=A,d},u}(vi);Pf.prototype.bytesPerElement=8,Nt("StructArrayLayout4i8",Pf);var Wl=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A,M){var W=this.length;return this.resize(W+1),this.emplace(W,d,f,x,w,A,M)},u.prototype.emplace=function(d,f,x,w,A,M,W){var P=6*d;return this.int16[P+0]=f,this.int16[P+1]=x,this.int16[P+2]=w,this.int16[P+3]=A,this.int16[P+4]=M,this.int16[P+5]=W,d},u}(vi);Wl.prototype.bytesPerElement=12,Nt("StructArrayLayout2i4i12",Wl);var As=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A,M){var W=this.length;return this.resize(W+1),this.emplace(W,d,f,x,w,A,M)},u.prototype.emplace=function(d,f,x,w,A,M,W){var P=4*d,N=8*d;return this.int16[P+0]=f,this.int16[P+1]=x,this.uint8[N+4]=w,this.uint8[N+5]=A,this.uint8[N+6]=M,this.uint8[N+7]=W,d},u}(vi);As.prototype.bytesPerElement=8,Nt("StructArrayLayout2i4ub8",As);var Od=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f){var x=this.length;return this.resize(x+1),this.emplace(x,d,f)},u.prototype.emplace=function(d,f,x){var w=2*d;return this.float32[w+0]=f,this.float32[w+1]=x,d},u}(vi);Od.prototype.bytesPerElement=8,Nt("StructArrayLayout2f8",Od);var cl=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A,M,W,P,N,Z){var Y=this.length;return this.resize(Y+1),this.emplace(Y,d,f,x,w,A,M,W,P,N,Z)},u.prototype.emplace=function(d,f,x,w,A,M,W,P,N,Z,Y){var Q=10*d;return this.uint16[Q+0]=f,this.uint16[Q+1]=x,this.uint16[Q+2]=w,this.uint16[Q+3]=A,this.uint16[Q+4]=M,this.uint16[Q+5]=W,this.uint16[Q+6]=P,this.uint16[Q+7]=N,this.uint16[Q+8]=Z,this.uint16[Q+9]=Y,d},u}(vi);cl.prototype.bytesPerElement=20,Nt("StructArrayLayout10ui20",cl);var Km=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A,M,W,P,N,Z,Y,Q){var de=this.length;return this.resize(de+1),this.emplace(de,d,f,x,w,A,M,W,P,N,Z,Y,Q)},u.prototype.emplace=function(d,f,x,w,A,M,W,P,N,Z,Y,Q,de){var he=12*d;return this.int16[he+0]=f,this.int16[he+1]=x,this.int16[he+2]=w,this.int16[he+3]=A,this.uint16[he+4]=M,this.uint16[he+5]=W,this.uint16[he+6]=P,this.uint16[he+7]=N,this.int16[he+8]=Z,this.int16[he+9]=Y,this.int16[he+10]=Q,this.int16[he+11]=de,d},u}(vi);Km.prototype.bytesPerElement=24,Nt("StructArrayLayout4i4ui4i24",Km);var Pd=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x){var w=this.length;return this.resize(w+1),this.emplace(w,d,f,x)},u.prototype.emplace=function(d,f,x,w){var A=3*d;return this.float32[A+0]=f,this.float32[A+1]=x,this.float32[A+2]=w,d},u}(vi);Pd.prototype.bytesPerElement=12,Nt("StructArrayLayout3f12",Pd);var c_=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d){var f=this.length;return this.resize(f+1),this.emplace(f,d)},u.prototype.emplace=function(d,f){return this.uint32[1*d+0]=f,d},u}(vi);c_.prototype.bytesPerElement=4,Nt("StructArrayLayout1ul4",c_);var Bf=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A,M,W,P,N){var Z=this.length;return this.resize(Z+1),this.emplace(Z,d,f,x,w,A,M,W,P,N)},u.prototype.emplace=function(d,f,x,w,A,M,W,P,N,Z){var Y=10*d,Q=5*d;return this.int16[Y+0]=f,this.int16[Y+1]=x,this.int16[Y+2]=w,this.int16[Y+3]=A,this.int16[Y+4]=M,this.int16[Y+5]=W,this.uint32[Q+3]=P,this.uint16[Y+8]=N,this.uint16[Y+9]=Z,d},u}(vi);Bf.prototype.bytesPerElement=20,Nt("StructArrayLayout6i1ul2ui20",Bf);var Bd=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A,M){var W=this.length;return this.resize(W+1),this.emplace(W,d,f,x,w,A,M)},u.prototype.emplace=function(d,f,x,w,A,M,W){var P=6*d;return this.int16[P+0]=f,this.int16[P+1]=x,this.int16[P+2]=w,this.int16[P+3]=A,this.int16[P+4]=M,this.int16[P+5]=W,d},u}(vi);Bd.prototype.bytesPerElement=12,Nt("StructArrayLayout2i2i2i12",Bd);var Mc=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A){var M=this.length;return this.resize(M+1),this.emplace(M,d,f,x,w,A)},u.prototype.emplace=function(d,f,x,w,A,M){var W=4*d,P=8*d;return this.float32[W+0]=f,this.float32[W+1]=x,this.float32[W+2]=w,this.int16[P+6]=A,this.int16[P+7]=M,d},u}(vi);Mc.prototype.bytesPerElement=16,Nt("StructArrayLayout2f1f2i16",Mc);var Ff=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w){var A=this.length;return this.resize(A+1),this.emplace(A,d,f,x,w)},u.prototype.emplace=function(d,f,x,w,A){var M=12*d,W=3*d;return this.uint8[M+0]=f,this.uint8[M+1]=x,this.float32[W+1]=w,this.float32[W+2]=A,d},u}(vi);Ff.prototype.bytesPerElement=12,Nt("StructArrayLayout2ub2f12",Ff);var Au=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x){var w=this.length;return this.resize(w+1),this.emplace(w,d,f,x)},u.prototype.emplace=function(d,f,x,w){var A=3*d;return this.uint16[A+0]=f,this.uint16[A+1]=x,this.uint16[A+2]=w,d},u}(vi);Au.prototype.bytesPerElement=6,Nt("StructArrayLayout3ui6",Au);var Su=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A,M,W,P,N,Z,Y,Q,de,he,Se,ye,Le){var Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,d,f,x,w,A,M,W,P,N,Z,Y,Q,de,he,Se,ye,Le)},u.prototype.emplace=function(d,f,x,w,A,M,W,P,N,Z,Y,Q,de,he,Se,ye,Le,Oe){var Ne=24*d,Ze=12*d,$e=48*d;return this.int16[Ne+0]=f,this.int16[Ne+1]=x,this.uint16[Ne+2]=w,this.uint16[Ne+3]=A,this.uint32[Ze+2]=M,this.uint32[Ze+3]=W,this.uint32[Ze+4]=P,this.uint16[Ne+10]=N,this.uint16[Ne+11]=Z,this.uint16[Ne+12]=Y,this.float32[Ze+7]=Q,this.float32[Ze+8]=de,this.uint8[$e+36]=he,this.uint8[$e+37]=Se,this.uint8[$e+38]=ye,this.uint32[Ze+10]=Le,this.int16[Ne+22]=Oe,d},u}(vi);Su.prototype.bytesPerElement=48,Nt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Su);var qm=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w,A,M,W,P,N,Z,Y,Q,de,he,Se,ye,Le,Oe,Ne,Ze,$e,_t,xt,jt,kt,aa,Wt,Fa){var ha=this.length;return this.resize(ha+1),this.emplace(ha,d,f,x,w,A,M,W,P,N,Z,Y,Q,de,he,Se,ye,Le,Oe,Ne,Ze,$e,_t,xt,jt,kt,aa,Wt,Fa)},u.prototype.emplace=function(d,f,x,w,A,M,W,P,N,Z,Y,Q,de,he,Se,ye,Le,Oe,Ne,Ze,$e,_t,xt,jt,kt,aa,Wt,Fa,ha){var Ut=34*d,za=17*d;return this.int16[Ut+0]=f,this.int16[Ut+1]=x,this.int16[Ut+2]=w,this.int16[Ut+3]=A,this.int16[Ut+4]=M,this.int16[Ut+5]=W,this.int16[Ut+6]=P,this.int16[Ut+7]=N,this.uint16[Ut+8]=Z,this.uint16[Ut+9]=Y,this.uint16[Ut+10]=Q,this.uint16[Ut+11]=de,this.uint16[Ut+12]=he,this.uint16[Ut+13]=Se,this.uint16[Ut+14]=ye,this.uint16[Ut+15]=Le,this.uint16[Ut+16]=Oe,this.uint16[Ut+17]=Ne,this.uint16[Ut+18]=Ze,this.uint16[Ut+19]=$e,this.uint16[Ut+20]=_t,this.uint16[Ut+21]=xt,this.uint16[Ut+22]=jt,this.uint32[za+12]=kt,this.float32[za+13]=aa,this.float32[za+14]=Wt,this.float32[za+15]=Fa,this.float32[za+16]=ha,d},u}(vi);qm.prototype.bytesPerElement=68,Nt("StructArrayLayout8i15ui1ul4f68",qm);var Tu=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d){var f=this.length;return this.resize(f+1),this.emplace(f,d)},u.prototype.emplace=function(d,f){return this.float32[1*d+0]=f,d},u}(vi);Tu.prototype.bytesPerElement=4,Nt("StructArrayLayout1f4",Tu);var mo=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x){var w=this.length;return this.resize(w+1),this.emplace(w,d,f,x)},u.prototype.emplace=function(d,f,x,w){var A=3*d;return this.int16[A+0]=f,this.int16[A+1]=x,this.int16[A+2]=w,d},u}(vi);mo.prototype.bytesPerElement=6,Nt("StructArrayLayout3i6",mo);var Nf=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x){var w=this.length;return this.resize(w+1),this.emplace(w,d,f,x)},u.prototype.emplace=function(d,f,x,w){var A=4*d;return this.uint32[2*d+0]=f,this.uint16[A+2]=x,this.uint16[A+3]=w,d},u}(vi);Nf.prototype.bytesPerElement=8,Nt("StructArrayLayout1ul2ui8",Nf);var d_=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f){var x=this.length;return this.resize(x+1),this.emplace(x,d,f)},u.prototype.emplace=function(d,f,x){var w=2*d;return this.uint16[w+0]=f,this.uint16[w+1]=x,d},u}(vi);d_.prototype.bytesPerElement=4,Nt("StructArrayLayout2ui4",d_);var Df=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d){var f=this.length;return this.resize(f+1),this.emplace(f,d)},u.prototype.emplace=function(d,f){return this.uint16[1*d+0]=f,d},u}(vi);Df.prototype.bytesPerElement=2,Nt("StructArrayLayout1ui2",Df);var jm=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(d,f,x,w){var A=this.length;return this.resize(A+1),this.emplace(A,d,f,x,w)},u.prototype.emplace=function(d,f,x,w,A){var M=4*d;return this.float32[M+0]=f,this.float32[M+1]=x,this.float32[M+2]=w,this.float32[M+3]=A,d},u}(vi);jm.prototype.bytesPerElement=16,Nt("StructArrayLayout4f16",jm);var _=function(o){function u(){o.apply(this,arguments)}o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u;var d={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return d.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},d.x1.get=function(){return this._structArray.int16[this._pos2+2]},d.y1.get=function(){return this._structArray.int16[this._pos2+3]},d.x2.get=function(){return this._structArray.int16[this._pos2+4]},d.y2.get=function(){return this._structArray.int16[this._pos2+5]},d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.anchorPoint.get=function(){return new g(this.anchorPointX,this.anchorPointY)},Object.defineProperties(u.prototype,d),u}(Ym);_.prototype.size=20;var p=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.get=function(d){return new _(this,d)},u}(Bf);Nt("CollisionBoxArray",p);var m=function(o){function u(){o.apply(this,arguments)}o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},d.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},d.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},d.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},d.segment.get=function(){return this._structArray.uint16[this._pos2+10]},d.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},d.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},d.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},d.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},d.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},d.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},d.placedOrientation.set=function(f){this._structArray.uint8[this._pos1+37]=f},d.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},d.hidden.set=function(f){this._structArray.uint8[this._pos1+38]=f},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},d.crossTileID.set=function(f){this._structArray.uint32[this._pos4+10]=f},d.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(u.prototype,d),u}(Ym);m.prototype.size=48;var y=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.get=function(d){return new m(this,d)},u}(Su);Nt("PlacedSymbolArray",y);var I=function(o){function u(){o.apply(this,arguments)}o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u;var d={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return d.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},d.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},d.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},d.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},d.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},d.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},d.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},d.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},d.key.get=function(){return this._structArray.uint16[this._pos2+8]},d.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},d.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},d.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},d.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},d.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},d.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},d.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},d.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},d.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},d.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},d.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},d.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},d.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},d.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},d.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},d.crossTileID.set=function(f){this._structArray.uint32[this._pos4+12]=f},d.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},d.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},d.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},d.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(u.prototype,d),u}(Ym);I.prototype.size=68;var T=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.get=function(d){return new I(this,d)},u}(qm);Nt("SymbolInstanceArray",T);var E=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getoffsetX=function(d){return this.float32[1*d+0]},u}(Tu);Nt("GlyphOffsetArray",E);var k=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.getx=function(d){return this.int16[3*d+0]},u.prototype.gety=function(d){return this.int16[3*d+1]},u.prototype.gettileUnitDistanceFromAnchor=function(d){return this.int16[3*d+2]},u}(mo);Nt("SymbolLineVertexArray",k);var F=function(o){function u(){o.apply(this,arguments)}o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u;var d={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return d.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},d.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},d.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(u.prototype,d),u}(Ym);F.prototype.size=8;var U=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.get=function(d){return new F(this,d)},u}(Nf);Nt("FeatureIndexArray",U);var $=mr([{name:"a_pos",components:2,type:"Int16"}],4).members,ee=function(o){o===void 0&&(o=[]),this.segments=o};function ie(o,u){return 256*(o=R(Math.floor(o),0,255))+R(Math.floor(u),0,255)}ee.prototype.prepareSegment=function(o,u,d,f){var x=this.segments[this.segments.length-1];return o>ee.MAX_VERTEX_ARRAY_LENGTH&&be("Max vertices per segment is "+ee.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+o),(!x||x.vertexLength+o>ee.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==f)&&(x={vertexOffset:u.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},f!==void 0&&(x.sortKey=f),this.segments.push(x)),x},ee.prototype.get=function(){return this.segments},ee.prototype.destroy=function(){for(var o=0,u=this.segments;o<u.length;o+=1){var d=u[o];for(var f in d.vaos)d.vaos[f].destroy()}},ee.simpleSegment=function(o,u,d,f){return new ee([{vertexOffset:o,primitiveOffset:u,vertexLength:d,primitiveLength:f,vaos:{},sortKey:0}])},ee.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Nt("SegmentVector",ee);var ge=mr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),me=l(function(o){o.exports=function(u,d){var f,x,w,A,M,W,P,N;for(x=u.length-(f=3&u.length),w=d,M=3432918353,W=461845907,N=0;N<x;)P=255&u.charCodeAt(N)|(255&u.charCodeAt(++N))<<8|(255&u.charCodeAt(++N))<<16|(255&u.charCodeAt(++N))<<24,++N,w=27492+(65535&(A=5*(65535&(w=(w^=P=(65535&(P=(P=(65535&P)*M+(((P>>>16)*M&65535)<<16)&4294967295)<<15|P>>>17))*W+(((P>>>16)*W&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(A>>>16)&65535)<<16);switch(P=0,f){case 3:P^=(255&u.charCodeAt(N+2))<<16;case 2:P^=(255&u.charCodeAt(N+1))<<8;case 1:w^=P=(65535&(P=(P=(65535&(P^=255&u.charCodeAt(N)))*M+(((P>>>16)*M&65535)<<16)&4294967295)<<15|P>>>17))*W+(((P>>>16)*W&65535)<<16)&4294967295}return w^=u.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}}),we=l(function(o){o.exports=function(u,d){for(var f,x=u.length,w=d^x,A=0;x>=4;)f=1540483477*(65535&(f=255&u.charCodeAt(A)|(255&u.charCodeAt(++A))<<8|(255&u.charCodeAt(++A))<<16|(255&u.charCodeAt(++A))<<24))+((1540483477*(f>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),x-=4,++A;switch(x){case 3:w^=(255&u.charCodeAt(A+2))<<16;case 2:w^=(255&u.charCodeAt(A+1))<<8;case 1:w=1540483477*(65535&(w^=255&u.charCodeAt(A)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}}),ce=me,xe=we;ce.murmur3=me,ce.murmur2=xe;var Te=function(){this.ids=[],this.positions=[],this.indexed=!1};Te.prototype.add=function(o,u,d,f){this.ids.push(Ue(o)),this.positions.push(u,d,f)},Te.prototype.getPositions=function(o){for(var u=Ue(o),d=0,f=this.ids.length-1;d<f;){var x=d+f>>1;this.ids[x]>=u?f=x:d=x+1}for(var w=[];this.ids[d]===u;)w.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return w},Te.serialize=function(o,u){var d=new Float64Array(o.ids),f=new Uint32Array(o.positions);return function x(w,A,M,W){for(;M<W;){for(var P=w[M+W>>1],N=M-1,Z=W+1;;){do N++;while(w[N]<P);do Z--;while(w[Z]>P);if(N>=Z)break;De(w,N,Z),De(A,3*N,3*Z),De(A,3*N+1,3*Z+1),De(A,3*N+2,3*Z+2)}Z-M<W-Z?(x(w,A,M,Z),M=Z+1):(x(w,A,Z+1,W),W=Z)}}(d,f,0,d.length-1),u&&u.push(d.buffer,f.buffer),{ids:d,positions:f}},Te.deserialize=function(o){var u=new Te;return u.ids=o.ids,u.positions=o.positions,u.indexed=!0,u};var Ge=Math.pow(2,53)-1;function Ue(o){var u=+o;return!isNaN(u)&&u<=Ge?u:ce(String(o))}function De(o,u,d){var f=o[u];o[u]=o[d],o[d]=f}Nt("FeaturePositionMap",Te);var He=function(o,u){this.gl=o.gl,this.location=u},it=function(o){function u(d,f){o.call(this,d,f),this.current=0}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1i(this.location,d))},u}(He),yt=function(o){function u(d,f){o.call(this,d,f),this.current=0}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.set=function(d){this.current!==d&&(this.current=d,this.gl.uniform1f(this.location,d))},u}(He),gt=function(o){function u(d,f){o.call(this,d,f),this.current=[0,0]}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]||(this.current=d,this.gl.uniform2f(this.location,d[0],d[1]))},u}(He),Gt=function(o){function u(d,f){o.call(this,d,f),this.current=[0,0,0]}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]||(this.current=d,this.gl.uniform3f(this.location,d[0],d[1],d[2]))},u}(He),ta=function(o){function u(d,f){o.call(this,d,f),this.current=[0,0,0,0]}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.set=function(d){d[0]===this.current[0]&&d[1]===this.current[1]&&d[2]===this.current[2]&&d[3]===this.current[3]||(this.current=d,this.gl.uniform4f(this.location,d[0],d[1],d[2],d[3]))},u}(He),ra=function(o){function u(d,f){o.call(this,d,f),this.current=ui.transparent}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.set=function(d){d.r===this.current.r&&d.g===this.current.g&&d.b===this.current.b&&d.a===this.current.a||(this.current=d,this.gl.uniform4f(this.location,d.r,d.g,d.b,d.a))},u}(He),na=new Float32Array(16),ci=function(o){function u(d,f){o.call(this,d,f),this.current=na}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.set=function(d){if(d[12]!==this.current[12]||d[0]!==this.current[0])return this.current=d,void this.gl.uniformMatrix4fv(this.location,!1,d);for(var f=1;f<16;f++)if(d[f]!==this.current[f]){this.current=d,this.gl.uniformMatrix4fv(this.location,!1,d);break}},u}(He);function Bt(o){return[ie(255*o.r,255*o.g),ie(255*o.b,255*o.a)]}var va=function(o,u,d){this.value=o,this.uniformNames=u.map(function(f){return"u_"+f}),this.type=d};va.prototype.setUniform=function(o,u,d){o.set(d.constantOr(this.value))},va.prototype.getBinding=function(o,u,d){return this.type==="color"?new ra(o,u):new yt(o,u)};var Pa=function(o,u){this.uniformNames=u.map(function(d){return"u_"+d}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Pa.prototype.setConstantPatternPositions=function(o,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=o.tlbr},Pa.prototype.setUniform=function(o,u,d,f){var x=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;x&&o.set(x)},Pa.prototype.getBinding=function(o,u,d){return d.substr(0,9)==="u_pattern"?new ta(o,u):new yt(o,u)};var ba=function(o,u,d,f){this.expression=o,this.type=d,this.maxValue=0,this.paintVertexAttributes=u.map(function(x){return{name:"a_"+x,type:"Float32",components:d==="color"?2:1,offset:0}}),this.paintVertexArray=new f};ba.prototype.populatePaintArray=function(o,u,d,f,x){var w=this.paintVertexArray.length,A=this.expression.evaluate(new Ya(0),u,{},f,[],x);this.paintVertexArray.resize(o),this._setPaintValue(w,o,A)},ba.prototype.updatePaintArray=function(o,u,d,f){var x=this.expression.evaluate({zoom:0},d,f);this._setPaintValue(o,u,x)},ba.prototype._setPaintValue=function(o,u,d){if(this.type==="color")for(var f=Bt(d),x=o;x<u;x++)this.paintVertexArray.emplace(x,f[0],f[1]);else{for(var w=o;w<u;w++)this.paintVertexArray.emplace(w,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}},ba.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ba.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var fa=function(o,u,d,f,x,w){this.expression=o,this.uniformNames=u.map(function(A){return"u_"+A+"_t"}),this.type=d,this.useIntegerZoom=f,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=u.map(function(A){return{name:"a_"+A,type:"Float32",components:d==="color"?4:2,offset:0}}),this.paintVertexArray=new w};fa.prototype.populatePaintArray=function(o,u,d,f,x){var w=this.expression.evaluate(new Ya(this.zoom),u,{},f,[],x),A=this.expression.evaluate(new Ya(this.zoom+1),u,{},f,[],x),M=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(M,o,w,A)},fa.prototype.updatePaintArray=function(o,u,d,f){var x=this.expression.evaluate({zoom:this.zoom},d,f),w=this.expression.evaluate({zoom:this.zoom+1},d,f);this._setPaintValue(o,u,x,w)},fa.prototype._setPaintValue=function(o,u,d,f){if(this.type==="color")for(var x=Bt(d),w=Bt(f),A=o;A<u;A++)this.paintVertexArray.emplace(A,x[0],x[1],w[0],w[1]);else{for(var M=o;M<u;M++)this.paintVertexArray.emplace(M,d,f);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(f))}},fa.prototype.upload=function(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},fa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},fa.prototype.setUniform=function(o,u){var d=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,f=R(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);o.set(f)},fa.prototype.getBinding=function(o,u,d){return new yt(o,u)};var Wa=function(o,u,d,f,x,w){this.expression=o,this.type=u,this.useIntegerZoom=d,this.zoom=f,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x};Wa.prototype.populatePaintArray=function(o,u,d){var f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(f,o,u.patterns&&u.patterns[this.layerId],d)},Wa.prototype.updatePaintArray=function(o,u,d,f,x){this._setPaintValues(o,u,d.patterns&&d.patterns[this.layerId],x)},Wa.prototype._setPaintValues=function(o,u,d,f){if(f&&d){var x=f[d.min],w=f[d.mid],A=f[d.max];if(x&&w&&A)for(var M=o;M<u;M++)this.zoomInPaintVertexArray.emplace(M,w.tl[0],w.tl[1],w.br[0],w.br[1],x.tl[0],x.tl[1],x.br[0],x.br[1],w.pixelRatio,x.pixelRatio),this.zoomOutPaintVertexArray.emplace(M,w.tl[0],w.tl[1],w.br[0],w.br[1],A.tl[0],A.tl[1],A.br[0],A.br[1],w.pixelRatio,A.pixelRatio)}},Wa.prototype.upload=function(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,ge.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,ge.members,this.expression.isStateDependent))},Wa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var ga=function(o,u,d){this.binders={},this._buffers=[];var f=[];for(var x in o.paint._values)if(d(x)){var w=o.paint.get(x);if(w instanceof Hr&&Ic(w.property.specification)){var A=ar(x,o.type),M=w.value,W=w.property.specification.type,P=w.property.useIntegerZoom,N=w.property.specification["property-type"],Z=N==="cross-faded"||N==="cross-faded-data-driven";if(M.kind==="constant")this.binders[x]=Z?new Pa(M.value,A):new va(M.value,A,W),f.push("/u_"+x);else if(M.kind==="source"||Z){var Y=wn(x,W,"source");this.binders[x]=Z?new Wa(M,W,P,u,Y,o.id):new ba(M,A,W,Y),f.push("/a_"+x)}else{var Q=wn(x,W,"composite");this.binders[x]=new fa(M,A,W,P,u,Q),f.push("/z_"+x)}}}this.cacheKey=f.sort().join("")};ga.prototype.getMaxValue=function(o){var u=this.binders[o];return u instanceof ba||u instanceof fa?u.maxValue:0},ga.prototype.populatePaintArrays=function(o,u,d,f,x){for(var w in this.binders){var A=this.binders[w];(A instanceof ba||A instanceof fa||A instanceof Wa)&&A.populatePaintArray(o,u,d,f,x)}},ga.prototype.setConstantPatternPositions=function(o,u){for(var d in this.binders){var f=this.binders[d];f instanceof Pa&&f.setConstantPatternPositions(o,u)}},ga.prototype.updatePaintArrays=function(o,u,d,f,x){var w=!1;for(var A in o)for(var M=0,W=u.getPositions(A);M<W.length;M+=1){var P=W[M],N=d.feature(P.index);for(var Z in this.binders){var Y=this.binders[Z];if((Y instanceof ba||Y instanceof fa||Y instanceof Wa)&&Y.expression.isStateDependent===!0){var Q=f.paint.get(Z);Y.expression=Q.value,Y.updatePaintArray(P.start,P.end,N,o[A],x),w=!0}}}return w},ga.prototype.defines=function(){var o=[];for(var u in this.binders){var d=this.binders[u];(d instanceof va||d instanceof Pa)&&o.push.apply(o,d.uniformNames.map(function(f){return"#define HAS_UNIFORM_"+f}))}return o},ga.prototype.getBinderAttributes=function(){var o=[];for(var u in this.binders){var d=this.binders[u];if(d instanceof ba||d instanceof fa)for(var f=0;f<d.paintVertexAttributes.length;f++)o.push(d.paintVertexAttributes[f].name);else if(d instanceof Wa)for(var x=0;x<ge.members.length;x++)o.push(ge.members[x].name)}return o},ga.prototype.getBinderUniforms=function(){var o=[];for(var u in this.binders){var d=this.binders[u];if(d instanceof va||d instanceof Pa||d instanceof fa)for(var f=0,x=d.uniformNames;f<x.length;f+=1)o.push(x[f])}return o},ga.prototype.getPaintVertexBuffers=function(){return this._buffers},ga.prototype.getUniforms=function(o,u){var d=[];for(var f in this.binders){var x=this.binders[f];if(x instanceof va||x instanceof Pa||x instanceof fa)for(var w=0,A=x.uniformNames;w<A.length;w+=1){var M=A[w];if(u[M]){var W=x.getBinding(o,u[M],M);d.push({name:M,property:f,binding:W})}}}return d},ga.prototype.setUniforms=function(o,u,d,f){for(var x=0,w=u;x<w.length;x+=1){var A=w[x],M=A.name,W=A.property;this.binders[W].setUniform(A.binding,f,d.get(W),M)}},ga.prototype.updatePaintBuffers=function(o){for(var u in this._buffers=[],this.binders){var d=this.binders[u];if(o&&d instanceof Wa){var f=o.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(d instanceof ba||d instanceof fa)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}},ga.prototype.upload=function(o){for(var u in this.binders){var d=this.binders[u];(d instanceof ba||d instanceof fa||d instanceof Wa)&&d.upload(o)}this.updatePaintBuffers()},ga.prototype.destroy=function(){for(var o in this.binders){var u=this.binders[o];(u instanceof ba||u instanceof fa||u instanceof Wa)&&u.destroy()}};var ca=function(o,u,d){d===void 0&&(d=function(){return!0}),this.programConfigurations={};for(var f=0,x=o;f<x.length;f+=1){var w=x[f];this.programConfigurations[w.id]=new ga(w,u,d)}this.needsUpload=!1,this._featureMap=new Te,this._bufferOffset=0};function ar(o,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(u+"-","").replace(/-/g,"_")]}function wn(o,u,d){var f={color:{source:Od,composite:jm},number:{source:Tu,composite:Od}},x=function(w){return{"line-pattern":{source:cl,composite:cl},"fill-pattern":{source:cl,composite:cl},"fill-extrusion-pattern":{source:cl,composite:cl}}[w]}(o);return x&&x[d]||f[u][d]}ca.prototype.populatePaintArrays=function(o,u,d,f,x,w){for(var A in this.programConfigurations)this.programConfigurations[A].populatePaintArrays(o,u,f,x,w);u.id!==void 0&&this._featureMap.add(u.id,d,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0},ca.prototype.updatePaintArrays=function(o,u,d,f){for(var x=0,w=d;x<w.length;x+=1){var A=w[x];this.needsUpload=this.programConfigurations[A.id].updatePaintArrays(o,this._featureMap,u,A,f)||this.needsUpload}},ca.prototype.get=function(o){return this.programConfigurations[o]},ca.prototype.upload=function(o){if(this.needsUpload){for(var u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}},ca.prototype.destroy=function(){for(var o in this.programConfigurations)this.programConfigurations[o].destroy()},Nt("ConstantBinder",va),Nt("CrossFadedConstantBinder",Pa),Nt("SourceExpressionBinder",ba),Nt("CrossFadedCompositeBinder",Wa),Nt("CompositeExpressionBinder",fa),Nt("ProgramConfiguration",ga,{omit:["_buffers"]}),Nt("ProgramConfigurationSet",ca);var Pr=Math.pow(2,14)-1,gr=-Pr-1;function yn(o){for(var u=8192/o.extent,d=o.loadGeometry(),f=0;f<d.length;f++)for(var x=d[f],w=0;w<x.length;w++){var A=x[w],M=Math.round(A.x*u),W=Math.round(A.y*u);A.x=R(M,gr,Pr),A.y=R(W,gr,Pr),(M<A.x||M>A.x+1||W<A.y||W>A.y+1)&&be("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return d}function Mn(o,u){return{type:o.type,id:o.id,properties:o.properties,geometry:u?yn(o):[]}}function Ss(o,u,d,f,x){o.emplaceBack(2*u+(f+1)/2,2*d+(x+1)/2)}var Kr=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Ec,this.indexArray=new Au,this.segments=new ee,this.programConfigurations=new ca(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};function Eu(o,u){for(var d=0;d<o.length;d++)if(dl(u,o[d]))return!0;for(var f=0;f<u.length;f++)if(dl(o,u[f]))return!0;return!!h_(o,u)}function ss(o,u,d){return!!dl(o,u)||!!Mu(u,o,d)}function Uo(o,u){if(o.length===1)return __(u,o[0]);for(var d=0;d<u.length;d++)for(var f=u[d],x=0;x<f.length;x++)if(dl(o,f[x]))return!0;for(var w=0;w<o.length;w++)if(__(u,o[w]))return!0;for(var A=0;A<u.length;A++)if(h_(o,u[A]))return!0;return!1}function go(o,u,d){if(o.length>1){if(h_(o,u))return!0;for(var f=0;f<u.length;f++)if(Mu(u[f],o,d))return!0}for(var x=0;x<o.length;x++)if(Mu(o[x],u,d))return!0;return!1}function h_(o,u){if(o.length===0||u.length===0)return!1;for(var d=0;d<o.length-1;d++)for(var f=o[d],x=o[d+1],w=0;w<u.length-1;w++)if(Fd(f,x,u[w],u[w+1]))return!0;return!1}function Fd(o,u,d,f){return Pe(o,d,f)!==Pe(u,d,f)&&Pe(o,u,d)!==Pe(o,u,f)}function Mu(o,u,d){var f=d*d;if(u.length===1)return o.distSqr(u[0])<f;for(var x=1;x<u.length;x++)if(Nd(o,u[x-1],u[x])<f)return!0;return!1}function Nd(o,u,d){var f=u.distSqr(d);if(f===0)return o.distSqr(u);var x=((o.x-u.x)*(d.x-u.x)+(o.y-u.y)*(d.y-u.y))/f;return o.distSqr(x<0?u:x>1?d:d.sub(u)._mult(x)._add(u))}function __(o,u){for(var d,f,x,w=!1,A=0;A<o.length;A++)for(var M=0,W=(d=o[A]).length-1;M<d.length;W=M++)(f=d[M]).y>u.y!=(x=d[W]).y>u.y&&u.x<(x.x-f.x)*(u.y-f.y)/(x.y-f.y)+f.x&&(w=!w);return w}function dl(o,u){for(var d=!1,f=0,x=o.length-1;f<o.length;x=f++){var w=o[f],A=o[x];w.y>u.y!=A.y>u.y&&u.x<(A.x-w.x)*(u.y-w.y)/(A.y-w.y)+w.x&&(d=!d)}return d}function m_(o,u,d){var f=d[0],x=d[2];if(o.x<f.x&&u.x<f.x||o.x>x.x&&u.x>x.x||o.y<f.y&&u.y<f.y||o.y>x.y&&u.y>x.y)return!1;var w=Pe(o,u,d[0]);return w!==Pe(o,u,d[1])||w!==Pe(o,u,d[2])||w!==Pe(o,u,d[3])}function hl(o,u,d){var f=u.paint.get(o).value;return f.kind==="constant"?f.value:d.programConfigurations.get(u.id).getMaxValue(o)}function ir(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function Gl(o,u,d,f,x){if(!u[0]&&!u[1])return o;var w=g.convert(u)._mult(x);d==="viewport"&&w._rotate(-f);for(var A=[],M=0;M<o.length;M++)A.push(o[M].sub(w));return A}Kr.prototype.populate=function(o,u,d){var f=this.layers[0],x=[],w=null;f.type==="circle"&&(w=f.layout.get("circle-sort-key"));for(var A=0,M=o;A<M.length;A+=1){var W=M[A],P=W.feature,N=W.id,Z=W.index,Y=W.sourceLayerIndex,Q=this.layers[0]._featureFilter.needGeometry,de=Mn(P,Q);if(this.layers[0]._featureFilter.filter(new Ya(this.zoom),de,d)){var he=w?w.evaluate(de,{},d):void 0,Se={id:N,properties:P.properties,type:P.type,sourceLayerIndex:Y,index:Z,geometry:Q?de.geometry:yn(P),patterns:{},sortKey:he};x.push(Se)}}w&&x.sort(function(xt,jt){return xt.sortKey-jt.sortKey});for(var ye=0,Le=x;ye<Le.length;ye+=1){var Oe=Le[ye],Ne=Oe.geometry,Ze=Oe.index,$e=Oe.sourceLayerIndex,_t=o[Ze].feature;this.addFeature(Oe,Ne,Ze,d),u.featureIndex.insert(_t,Ne,Ze,$e,this.index)}},Kr.prototype.update=function(o,u,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,d)},Kr.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Kr.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Kr.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,$),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},Kr.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Kr.prototype.addFeature=function(o,u,d,f){for(var x=0,w=u;x<w.length;x+=1)for(var A=0,M=w[x];A<M.length;A+=1){var W=M[A],P=W.x,N=W.y;if(!(P<0||P>=8192||N<0||N>=8192)){var Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),Y=Z.vertexLength;Ss(this.layoutVertexArray,P,N,-1,-1),Ss(this.layoutVertexArray,P,N,1,-1),Ss(this.layoutVertexArray,P,N,1,1),Ss(this.layoutVertexArray,P,N,-1,1),this.indexArray.emplaceBack(Y,Y+1,Y+2),this.indexArray.emplaceBack(Y,Y+3,Y+2),Z.vertexLength+=4,Z.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,{},f)},Nt("CircleBucket",Kr,{omit:["layers"]});var Lu=new Tr({"circle-sort-key":new zt(J.layout_circle["circle-sort-key"])}),Lc={paint:new Tr({"circle-radius":new zt(J.paint_circle["circle-radius"]),"circle-color":new zt(J.paint_circle["circle-color"]),"circle-blur":new zt(J.paint_circle["circle-blur"]),"circle-opacity":new zt(J.paint_circle["circle-opacity"]),"circle-translate":new ea(J.paint_circle["circle-translate"]),"circle-translate-anchor":new ea(J.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ea(J.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ea(J.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zt(J.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zt(J.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zt(J.paint_circle["circle-stroke-opacity"])}),layout:Lu},pi=typeof Float32Array<"u"?Float32Array:Array;function Xs(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function os(o,u,d){var f=u[0],x=u[1],w=u[2],A=u[3],M=u[4],W=u[5],P=u[6],N=u[7],Z=u[8],Y=u[9],Q=u[10],de=u[11],he=u[12],Se=u[13],ye=u[14],Le=u[15],Oe=d[0],Ne=d[1],Ze=d[2],$e=d[3];return o[0]=Oe*f+Ne*M+Ze*Z+$e*he,o[1]=Oe*x+Ne*W+Ze*Y+$e*Se,o[2]=Oe*w+Ne*P+Ze*Q+$e*ye,o[3]=Oe*A+Ne*N+Ze*de+$e*Le,o[4]=(Oe=d[4])*f+(Ne=d[5])*M+(Ze=d[6])*Z+($e=d[7])*he,o[5]=Oe*x+Ne*W+Ze*Y+$e*Se,o[6]=Oe*w+Ne*P+Ze*Q+$e*ye,o[7]=Oe*A+Ne*N+Ze*de+$e*Le,o[8]=(Oe=d[8])*f+(Ne=d[9])*M+(Ze=d[10])*Z+($e=d[11])*he,o[9]=Oe*x+Ne*W+Ze*Y+$e*Se,o[10]=Oe*w+Ne*P+Ze*Q+$e*ye,o[11]=Oe*A+Ne*N+Ze*de+$e*Le,o[12]=(Oe=d[12])*f+(Ne=d[13])*M+(Ze=d[14])*Z+($e=d[15])*he,o[13]=Oe*x+Ne*W+Ze*Y+$e*Se,o[14]=Oe*w+Ne*P+Ze*Q+$e*ye,o[15]=Oe*A+Ne*N+Ze*de+$e*Le,o}Math.hypot||(Math.hypot=function(){for(var o=arguments,u=0,d=arguments.length;d--;)u+=o[d]*o[d];return Math.sqrt(u)});var Rc,II=os;function Jm(o,u,d){var f=u[0],x=u[1],w=u[2],A=u[3];return o[0]=d[0]*f+d[4]*x+d[8]*w+d[12]*A,o[1]=d[1]*f+d[5]*x+d[9]*w+d[13]*A,o[2]=d[2]*f+d[6]*x+d[10]*w+d[14]*A,o[3]=d[3]*f+d[7]*x+d[11]*w+d[15]*A,o}Rc=new pi(3),pi!=Float32Array&&(Rc[0]=0,Rc[1]=0,Rc[2]=0),function(){var o=new pi(4);pi!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0,o[3]=0)}();var CI=(function(){var o=new pi(2);pi!=Float32Array&&(o[0]=0,o[1]=0)}(),function(o){function u(d){o.call(this,d,Lc)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.createBucket=function(d){return new Kr(d)},u.prototype.queryRadius=function(d){var f=d;return hl("circle-radius",this,f)+hl("circle-stroke-width",this,f)+ir(this.paint.get("circle-translate"))},u.prototype.queryIntersectsFeature=function(d,f,x,w,A,M,W,P){for(var N=Gl(d,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),M.angle,W),Z=this.paint.get("circle-radius").evaluate(f,x)+this.paint.get("circle-stroke-width").evaluate(f,x),Y=this.paint.get("circle-pitch-alignment")==="map",Q=Y?N:function(_t,xt){return _t.map(function(jt){return g_(jt,xt)})}(N,P),de=Y?Z*W:Z,he=0,Se=w;he<Se.length;he+=1)for(var ye=0,Le=Se[he];ye<Le.length;ye+=1){var Oe=Le[ye],Ne=Y?Oe:g_(Oe,P),Ze=de,$e=Jm([],[Oe.x,Oe.y,0,1],P);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ze*=$e[3]/M.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ze*=M.cameraToCenterDistance/$e[3]),ss(Q,Ne,Ze))return!0}return!1},u}(ul));function g_(o,u){var d=Jm([],[o.x,o.y,0,1],u);return new g(d[0]/d[3],d[1]/d[3])}var gb=function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u}(Kr);function Dd(o,u,d,f){var x=u.width,w=u.height;if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==x*w*d)throw new RangeError("mismatched image size")}else f=new Uint8Array(x*w*d);return o.width=x,o.height=w,o.data=f,o}function Qm(o,u,d){var f=u.width,x=u.height;if(f!==o.width||x!==o.height){var w=Dd({},{width:f,height:x},d);AI(o,w,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,f),height:Math.min(o.height,x)},d),o.width=f,o.height=x,o.data=w.data}}function AI(o,u,d,f,x,w){if(x.width===0||x.height===0)return u;if(x.width>o.width||x.height>o.height||d.x>o.width-x.width||d.y>o.height-x.height)throw new RangeError("out of range source coordinates for image copy");if(x.width>u.width||x.height>u.height||f.x>u.width-x.width||f.y>u.height-x.height)throw new RangeError("out of range destination coordinates for image copy");for(var A=o.data,M=u.data,W=0;W<x.height;W++)for(var P=((d.y+W)*o.width+d.x)*w,N=((f.y+W)*u.width+f.x)*w,Z=0;Z<x.width*w;Z++)M[N+Z]=A[P+Z];return u}Nt("HeatmapBucket",gb,{omit:["layers"]});var p_=function(o,u){Dd(this,o,1,u)};p_.prototype.resize=function(o){Qm(this,o,1)},p_.prototype.clone=function(){return new p_({width:this.width,height:this.height},new Uint8Array(this.data))},p_.copy=function(o,u,d,f,x){AI(o,u,d,f,x,1)};var Ts=function(o,u){Dd(this,o,4,u)};Ts.prototype.resize=function(o){Qm(this,o,4)},Ts.prototype.replace=function(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o},Ts.prototype.clone=function(){return new Ts({width:this.width,height:this.height},new Uint8Array(this.data))},Ts.copy=function(o,u,d,f,x){AI(o,u,d,f,x,4)},Nt("AlphaImage",p_),Nt("RGBAImage",Ts);var $B={paint:new Tr({"heatmap-radius":new zt(J.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zt(J.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ea(J.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zo(J.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ea(J.paint_heatmap["heatmap-opacity"])})};function G5(o){var u={},d=o.resolution||256,f=o.clips?o.clips.length:1,x=o.image||new Ts({width:d,height:f}),w=function(de,he,Se){u[o.evaluationKey]=Se;var ye=o.expression.evaluate(u);x.data[de+he+0]=Math.floor(255*ye.r/ye.a),x.data[de+he+1]=Math.floor(255*ye.g/ye.a),x.data[de+he+2]=Math.floor(255*ye.b/ye.a),x.data[de+he+3]=Math.floor(255*ye.a)};if(o.clips)for(var A=0,M=0;A<f;++A,M+=4*d)for(var W=0,P=0;W<d;W++,P+=4){var N=W/(d-1),Z=o.clips[A];w(M,P,Z.start*(1-N)+Z.end*N)}else for(var Y=0,Q=0;Y<d;Y++,Q+=4)w(0,Q,Y/(d-1));return x}var eF=function(o){function u(d){o.call(this,d,$B),this._updateColorRamp()}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.createBucket=function(d){return new gb(d)},u.prototype._handleSpecialPaintPropertyUpdate=function(d){d==="heatmap-color"&&this._updateColorRamp()},u.prototype._updateColorRamp=function(){this.colorRamp=G5({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},u.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},u.prototype.queryRadius=function(){return 0},u.prototype.queryIntersectsFeature=function(){return!1},u.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},u}(ul),tF={paint:new Tr({"hillshade-illumination-direction":new ea(J.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ea(J.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ea(J.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ea(J.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ea(J.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ea(J.paint_hillshade["hillshade-accent-color"])})},aF=function(o){function u(d){o.call(this,d,tF)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},u}(ul),iF=mr([{name:"a_pos",components:2,type:"Int16"}],4).members,SI=pb,nF=pb;function pb(o,u,d){d=d||2;var f,x,w,A,M,W,P,N=u&&u.length,Z=N?u[0]*d:o.length,Y=O5(o,0,Z,d,!0),Q=[];if(!Y||Y.next===Y.prev)return Q;if(N&&(Y=function(he,Se,ye,Le){var Oe,Ne,Ze,$e=[];for(Oe=0,Ne=Se.length;Oe<Ne;Oe++)(Ze=O5(he,Se[Oe]*Le,Oe<Ne-1?Se[Oe+1]*Le:he.length,Le,!1))===Ze.next&&(Ze.steiner=!0),$e.push(hF(Ze));for($e.sort(uF),Oe=0;Oe<$e.length;Oe++)cF($e[Oe],ye),ye=Vd(ye,ye.next);return ye}(o,u,Y,d)),o.length>80*d){f=w=o[0],x=A=o[1];for(var de=d;de<Z;de+=d)(M=o[de])<f&&(f=M),(W=o[de+1])<x&&(x=W),M>w&&(w=M),W>A&&(A=W);P=(P=Math.max(w-f,A-x))!==0?1/P:0}return Vf(Y,Q,d,f,x,P),Q}function O5(o,u,d,f,x){var w,A;if(x===MI(o,u,d,f)>0)for(w=u;w<d;w+=f)A=F5(w,o[w],o[w+1],A);else for(w=d-f;w>=u;w-=f)A=F5(w,o[w],o[w+1],A);return A&&fb(A,A.next)&&(zf(A),A=A.next),A}function Vd(o,u){if(!o)return o;u||(u=o);var d,f=o;do if(d=!1,f.steiner||!fb(f,f.next)&&Xn(f.prev,f,f.next)!==0)f=f.next;else{if(zf(f),(f=u=f.prev)===f.next)break;d=!0}while(d||f!==u);return u}function Vf(o,u,d,f,x,w,A){if(o){!A&&w&&function(N,Z,Y,Q){var de=N;do de.z===null&&(de.z=TI(de.x,de.y,Z,Y,Q)),de.prevZ=de.prev,de.nextZ=de.next,de=de.next;while(de!==N);de.prevZ.nextZ=null,de.prevZ=null,function(he){var Se,ye,Le,Oe,Ne,Ze,$e,_t,xt=1;do{for(ye=he,he=null,Ne=null,Ze=0;ye;){for(Ze++,Le=ye,$e=0,Se=0;Se<xt&&($e++,Le=Le.nextZ);Se++);for(_t=xt;$e>0||_t>0&&Le;)$e!==0&&(_t===0||!Le||ye.z<=Le.z)?(Oe=ye,ye=ye.nextZ,$e--):(Oe=Le,Le=Le.nextZ,_t--),Ne?Ne.nextZ=Oe:he=Oe,Oe.prevZ=Ne,Ne=Oe;ye=Le}Ne.nextZ=null,xt*=2}while(Ze>1)}(de)}(o,f,x,w);for(var M,W,P=o;o.prev!==o.next;)if(M=o.prev,W=o.next,w?sF(o,f,x,w):rF(o))u.push(M.i/d),u.push(o.i/d),u.push(W.i/d),zf(o),o=W.next,P=W.next;else if((o=W)===P){A?A===1?Vf(o=oF(Vd(o),u,d),u,d,f,x,w,2):A===2&&lF(o,u,d,f,x,w):Vf(Vd(o),u,d,f,x,w,1);break}}}function rF(o){var u=o.prev,d=o,f=o.next;if(Xn(u,d,f)>=0)return!1;for(var x=o.next.next;x!==o.prev;){if($m(u.x,u.y,d.x,d.y,f.x,f.y,x.x,x.y)&&Xn(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function sF(o,u,d,f){var x=o.prev,w=o,A=o.next;if(Xn(x,w,A)>=0)return!1;for(var M=x.x>w.x?x.x>A.x?x.x:A.x:w.x>A.x?w.x:A.x,W=x.y>w.y?x.y>A.y?x.y:A.y:w.y>A.y?w.y:A.y,P=TI(x.x<w.x?x.x<A.x?x.x:A.x:w.x<A.x?w.x:A.x,x.y<w.y?x.y<A.y?x.y:A.y:w.y<A.y?w.y:A.y,u,d,f),N=TI(M,W,u,d,f),Z=o.prevZ,Y=o.nextZ;Z&&Z.z>=P&&Y&&Y.z<=N;){if(Z!==o.prev&&Z!==o.next&&$m(x.x,x.y,w.x,w.y,A.x,A.y,Z.x,Z.y)&&Xn(Z.prev,Z,Z.next)>=0||(Z=Z.prevZ,Y!==o.prev&&Y!==o.next&&$m(x.x,x.y,w.x,w.y,A.x,A.y,Y.x,Y.y)&&Xn(Y.prev,Y,Y.next)>=0))return!1;Y=Y.nextZ}for(;Z&&Z.z>=P;){if(Z!==o.prev&&Z!==o.next&&$m(x.x,x.y,w.x,w.y,A.x,A.y,Z.x,Z.y)&&Xn(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;Y&&Y.z<=N;){if(Y!==o.prev&&Y!==o.next&&$m(x.x,x.y,w.x,w.y,A.x,A.y,Y.x,Y.y)&&Xn(Y.prev,Y,Y.next)>=0)return!1;Y=Y.nextZ}return!0}function oF(o,u,d){var f=o;do{var x=f.prev,w=f.next.next;!fb(x,w)&&P5(x,f,f.next,w)&&Zf(x,w)&&Zf(w,x)&&(u.push(x.i/d),u.push(f.i/d),u.push(w.i/d),zf(f),zf(f.next),f=o=w),f=f.next}while(f!==o);return Vd(f)}function lF(o,u,d,f,x,w){var A=o;do{for(var M=A.next.next;M!==A.prev;){if(A.i!==M.i&&_F(A,M)){var W=B5(A,M);return A=Vd(A,A.next),W=Vd(W,W.next),Vf(A,u,d,f,x,w),void Vf(W,u,d,f,x,w)}M=M.next}A=A.next}while(A!==o)}function uF(o,u){return o.x-u.x}function cF(o,u){if(u=function(f,x){var w,A=x,M=f.x,W=f.y,P=-1/0;do{if(W<=A.y&&W>=A.next.y&&A.next.y!==A.y){var N=A.x+(W-A.y)*(A.next.x-A.x)/(A.next.y-A.y);if(N<=M&&N>P){if(P=N,N===M){if(W===A.y)return A;if(W===A.next.y)return A.next}w=A.x<A.next.x?A:A.next}}A=A.next}while(A!==x);if(!w)return null;if(M===P)return w;var Z,Y=w,Q=w.x,de=w.y,he=1/0;A=w;do M>=A.x&&A.x>=Q&&M!==A.x&&$m(W<de?M:P,W,Q,de,W<de?P:M,W,A.x,A.y)&&(Z=Math.abs(W-A.y)/(M-A.x),Zf(A,f)&&(Z<he||Z===he&&(A.x>w.x||A.x===w.x&&dF(w,A)))&&(w=A,he=Z)),A=A.next;while(A!==Y);return w}(o,u)){var d=B5(u,o);Vd(u,u.next),Vd(d,d.next)}}function dF(o,u){return Xn(o.prev,o,u.prev)<0&&Xn(u.next,o,o.next)<0}function TI(o,u,d,f,x){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=32767*(o-d)*x)|o<<8))|o<<4))|o<<2))|o<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-f)*x)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function hF(o){var u=o,d=o;do(u.x<d.x||u.x===d.x&&u.y<d.y)&&(d=u),u=u.next;while(u!==o);return d}function $m(o,u,d,f,x,w,A,M){return(x-A)*(u-M)-(o-A)*(w-M)>=0&&(o-A)*(f-M)-(d-A)*(u-M)>=0&&(d-A)*(w-M)-(x-A)*(f-M)>=0}function _F(o,u){return o.next.i!==u.i&&o.prev.i!==u.i&&!function(d,f){var x=d;do{if(x.i!==d.i&&x.next.i!==d.i&&x.i!==f.i&&x.next.i!==f.i&&P5(x,x.next,d,f))return!0;x=x.next}while(x!==d);return!1}(o,u)&&(Zf(o,u)&&Zf(u,o)&&function(d,f){var x=d,w=!1,A=(d.x+f.x)/2,M=(d.y+f.y)/2;do x.y>M!=x.next.y>M&&x.next.y!==x.y&&A<(x.next.x-x.x)*(M-x.y)/(x.next.y-x.y)+x.x&&(w=!w),x=x.next;while(x!==d);return w}(o,u)&&(Xn(o.prev,o,u.prev)||Xn(o,u.prev,u))||fb(o,u)&&Xn(o.prev,o,o.next)>0&&Xn(u.prev,u,u.next)>0)}function Xn(o,u,d){return(u.y-o.y)*(d.x-u.x)-(u.x-o.x)*(d.y-u.y)}function fb(o,u){return o.x===u.x&&o.y===u.y}function P5(o,u,d,f){var x=bb(Xn(o,u,d)),w=bb(Xn(o,u,f)),A=bb(Xn(d,f,o)),M=bb(Xn(d,f,u));return x!==w&&A!==M||!(x!==0||!yb(o,d,u))||!(w!==0||!yb(o,f,u))||!(A!==0||!yb(d,o,f))||!(M!==0||!yb(d,u,f))}function yb(o,u,d){return u.x<=Math.max(o.x,d.x)&&u.x>=Math.min(o.x,d.x)&&u.y<=Math.max(o.y,d.y)&&u.y>=Math.min(o.y,d.y)}function bb(o){return o>0?1:o<0?-1:0}function Zf(o,u){return Xn(o.prev,o,o.next)<0?Xn(o,u,o.next)>=0&&Xn(o,o.prev,u)>=0:Xn(o,u,o.prev)<0||Xn(o,o.next,u)<0}function B5(o,u){var d=new EI(o.i,o.x,o.y),f=new EI(u.i,u.x,u.y),x=o.next,w=u.prev;return o.next=u,u.prev=o,d.next=x,x.prev=d,f.next=d,d.prev=f,w.next=f,f.prev=w,f}function F5(o,u,d,f){var x=new EI(o,u,d);return f?(x.next=f.next,x.prev=f,f.next.prev=x,f.next=x):(x.prev=x,x.next=x),x}function zf(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function EI(o,u,d){this.i=o,this.x=u,this.y=d,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function MI(o,u,d,f){for(var x=0,w=u,A=d-f;w<d;w+=f)x+=(o[A]-o[w])*(o[w+1]+o[A+1]),A=w;return x}function mF(o,u,d,f,x){(function w(A,M,W,P,N){for(;P>W;){if(P-W>600){var Z=P-W+1,Y=M-W+1,Q=Math.log(Z),de=.5*Math.exp(2*Q/3),he=.5*Math.sqrt(Q*de*(Z-de)/Z)*(Y-Z/2<0?-1:1);w(A,M,Math.max(W,Math.floor(M-Y*de/Z+he)),Math.min(P,Math.floor(M+(Z-Y)*de/Z+he)),N)}var Se=A[M],ye=W,Le=P;for(Uf(A,W,M),N(A[P],Se)>0&&Uf(A,W,P);ye<Le;){for(Uf(A,ye,Le),ye++,Le--;N(A[ye],Se)<0;)ye++;for(;N(A[Le],Se)>0;)Le--}N(A[W],Se)===0?Uf(A,W,Le):Uf(A,++Le,P),Le<=M&&(W=Le+1),M<=Le&&(P=Le-1)}})(o,u,d||0,f||o.length-1,x||gF)}function Uf(o,u,d){var f=o[u];o[u]=o[d],o[d]=f}function gF(o,u){return o<u?-1:o>u?1:0}function LI(o,u){var d=o.length;if(d<=1)return[o];for(var f,x,w=[],A=0;A<d;A++){var M=Be(o[A]);M!==0&&(o[A].area=Math.abs(M),x===void 0&&(x=M<0),x===M<0?(f&&w.push(f),f=[o[A]]):f.push(o[A]))}if(f&&w.push(f),u>1)for(var W=0;W<w.length;W++)w[W].length<=u||(mF(w[W],u,1,w[W].length-1,pF),w[W]=w[W].slice(0,u));return w}function pF(o,u){return u.area-o.area}function RI(o,u,d){for(var f=d.patternDependencies,x=!1,w=0,A=u;w<A.length;w+=1){var M=A[w].paint.get(o+"-pattern");M.isConstant()||(x=!0);var W=M.constantOr(null);W&&(x=!0,f[W.to]=!0,f[W.from]=!0)}return x}function kI(o,u,d,f,x){for(var w=x.patternDependencies,A=0,M=u;A<M.length;A+=1){var W=M[A],P=W.paint.get(o+"-pattern").value;if(P.kind!=="constant"){var N=P.evaluate({zoom:f-1},d,{},x.availableImages),Z=P.evaluate({zoom:f},d,{},x.availableImages),Y=P.evaluate({zoom:f+1},d,{},x.availableImages);Z=Z&&Z.name?Z.name:Z,Y=Y&&Y.name?Y.name:Y,w[N=N&&N.name?N.name:N]=!0,w[Z]=!0,w[Y]=!0,d.patterns[W.id]={min:N,mid:Z,max:Y}}}return d}pb.deviation=function(o,u,d,f){var x=u&&u.length,w=Math.abs(MI(o,0,x?u[0]*d:o.length,d));if(x)for(var A=0,M=u.length;A<M;A++)w-=Math.abs(MI(o,u[A]*d,A<M-1?u[A+1]*d:o.length,d));var W=0;for(A=0;A<f.length;A+=3){var P=f[A]*d,N=f[A+1]*d,Z=f[A+2]*d;W+=Math.abs((o[P]-o[Z])*(o[N+1]-o[P+1])-(o[P]-o[N])*(o[Z+1]-o[P+1]))}return w===0&&W===0?0:Math.abs((W-w)/w)},pb.flatten=function(o){for(var u=o[0][0].length,d={vertices:[],holes:[],dimensions:u},f=0,x=0;x<o.length;x++){for(var w=0;w<o[x].length;w++)for(var A=0;A<u;A++)d.vertices.push(o[x][w][A]);x>0&&d.holes.push(f+=o[x-1].length)}return d},SI.default=nF;var Ol=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ec,this.indexArray=new Au,this.indexArray2=new d_,this.programConfigurations=new ca(o.layers,o.zoom),this.segments=new ee,this.segments2=new ee,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};Ol.prototype.populate=function(o,u,d){this.hasPattern=RI("fill",this.layers,u);for(var f=this.layers[0].layout.get("fill-sort-key"),x=[],w=0,A=o;w<A.length;w+=1){var M=A[w],W=M.feature,P=M.id,N=M.index,Z=M.sourceLayerIndex,Y=this.layers[0]._featureFilter.needGeometry,Q=Mn(W,Y);if(this.layers[0]._featureFilter.filter(new Ya(this.zoom),Q,d)){var de=f?f.evaluate(Q,{},d,u.availableImages):void 0,he={id:P,properties:W.properties,type:W.type,sourceLayerIndex:Z,index:N,geometry:Y?Q.geometry:yn(W),patterns:{},sortKey:de};x.push(he)}}f&&x.sort(function(_t,xt){return _t.sortKey-xt.sortKey});for(var Se=0,ye=x;Se<ye.length;Se+=1){var Le=ye[Se],Oe=Le.geometry,Ne=Le.index,Ze=Le.sourceLayerIndex;if(this.hasPattern){var $e=kI("fill",this.layers,Le,this.zoom,u);this.patternFeatures.push($e)}else this.addFeature(Le,Oe,Ne,d,{});u.featureIndex.insert(o[Ne].feature,Oe,Ne,Ze,this.index)}},Ol.prototype.update=function(o,u,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,d)},Ol.prototype.addFeatures=function(o,u,d){for(var f=0,x=this.patternFeatures;f<x.length;f+=1){var w=x[f];this.addFeature(w,w.geometry,w.index,u,d)}},Ol.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ol.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ol.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,iF),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0},Ol.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Ol.prototype.addFeature=function(o,u,d,f,x){for(var w=0,A=LI(u,500);w<A.length;w+=1){for(var M=A[w],W=0,P=0,N=M;P<N.length;P+=1)W+=N[P].length;for(var Z=this.segments.prepareSegment(W,this.layoutVertexArray,this.indexArray),Y=Z.vertexLength,Q=[],de=[],he=0,Se=M;he<Se.length;he+=1){var ye=Se[he];if(ye.length!==0){ye!==M[0]&&de.push(Q.length/2);var Le=this.segments2.prepareSegment(ye.length,this.layoutVertexArray,this.indexArray2),Oe=Le.vertexLength;this.layoutVertexArray.emplaceBack(ye[0].x,ye[0].y),this.indexArray2.emplaceBack(Oe+ye.length-1,Oe),Q.push(ye[0].x),Q.push(ye[0].y);for(var Ne=1;Ne<ye.length;Ne++)this.layoutVertexArray.emplaceBack(ye[Ne].x,ye[Ne].y),this.indexArray2.emplaceBack(Oe+Ne-1,Oe+Ne),Q.push(ye[Ne].x),Q.push(ye[Ne].y);Le.vertexLength+=ye.length,Le.primitiveLength+=ye.length}}for(var Ze=SI(Q,de),$e=0;$e<Ze.length;$e+=3)this.indexArray.emplaceBack(Y+Ze[$e],Y+Ze[$e+1],Y+Ze[$e+2]);Z.vertexLength+=W,Z.primitiveLength+=Ze.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,x,f)},Nt("FillBucket",Ol,{omit:["layers","patternFeatures"]});var fF=new Tr({"fill-sort-key":new zt(J.layout_fill["fill-sort-key"])}),yF={paint:new Tr({"fill-antialias":new ea(J.paint_fill["fill-antialias"]),"fill-opacity":new zt(J.paint_fill["fill-opacity"]),"fill-color":new zt(J.paint_fill["fill-color"]),"fill-outline-color":new zt(J.paint_fill["fill-outline-color"]),"fill-translate":new ea(J.paint_fill["fill-translate"]),"fill-translate-anchor":new ea(J.paint_fill["fill-translate-anchor"]),"fill-pattern":new Hm(J.paint_fill["fill-pattern"])}),layout:fF},bF=function(o){function u(d){o.call(this,d,yF)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.recalculate=function(d,f){o.prototype.recalculate.call(this,d,f);var x=this.paint._values["fill-outline-color"];x.value.kind==="constant"&&x.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},u.prototype.createBucket=function(d){return new Ol(d)},u.prototype.queryRadius=function(){return ir(this.paint.get("fill-translate"))},u.prototype.queryIntersectsFeature=function(d,f,x,w,A,M,W){return Uo(Gl(d,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),M.angle,W),w)},u.prototype.isTileClipped=function(){return!0},u}(ul),vF=mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,N5=eg;function eg(o,u,d,f,x){this.properties={},this.extent=d,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=x,o.readFields(xF,this,u)}function xF(o,u,d){o==1?u.id=d.readVarint():o==2?function(f,x){for(var w=f.readVarint()+f.pos;f.pos<w;){var A=x._keys[f.readVarint()],M=x._values[f.readVarint()];x.properties[A]=M}}(d,u):o==3?u.type=d.readVarint():o==4&&(u._geometry=d.pos)}function wF(o){for(var u,d,f=0,x=0,w=o.length,A=w-1;x<w;A=x++)f+=((d=o[A]).x-(u=o[x]).x)*(u.y+d.y);return f}eg.types=["Unknown","Point","LineString","Polygon"],eg.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var u,d=o.readVarint()+o.pos,f=1,x=0,w=0,A=0,M=[];o.pos<d;){if(x<=0){var W=o.readVarint();f=7&W,x=W>>3}if(x--,f===1||f===2)w+=o.readSVarint(),A+=o.readSVarint(),f===1&&(u&&M.push(u),u=[]),u.push(new g(w,A));else{if(f!==7)throw new Error("unknown command "+f);u&&u.push(u[0].clone())}}return u&&M.push(u),M},eg.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var u=o.readVarint()+o.pos,d=1,f=0,x=0,w=0,A=1/0,M=-1/0,W=1/0,P=-1/0;o.pos<u;){if(f<=0){var N=o.readVarint();d=7&N,f=N>>3}if(f--,d===1||d===2)(x+=o.readSVarint())<A&&(A=x),x>M&&(M=x),(w+=o.readSVarint())<W&&(W=w),w>P&&(P=w);else if(d!==7)throw new Error("unknown command "+d)}return[A,W,M,P]},eg.prototype.toGeoJSON=function(o,u,d){var f,x,w=this.extent*Math.pow(2,d),A=this.extent*o,M=this.extent*u,W=this.loadGeometry(),P=eg.types[this.type];function N(Q){for(var de=0;de<Q.length;de++){var he=Q[de];Q[de]=[360*(he.x+A)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(he.y+M)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var Z=[];for(f=0;f<W.length;f++)Z[f]=W[f][0];N(W=Z);break;case 2:for(f=0;f<W.length;f++)N(W[f]);break;case 3:for(W=function(Q){var de=Q.length;if(de<=1)return[Q];for(var he,Se,ye=[],Le=0;Le<de;Le++){var Oe=wF(Q[Le]);Oe!==0&&(Se===void 0&&(Se=Oe<0),Se===Oe<0?(he&&ye.push(he),he=[Q[Le]]):he.push(Q[Le]))}return he&&ye.push(he),ye}(W),f=0;f<W.length;f++)for(x=0;x<W[f].length;x++)N(W[f][x])}W.length===1?W=W[0]:P="Multi"+P;var Y={type:"Feature",geometry:{type:P,coordinates:W},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var D5=V5;function V5(o,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(IF,this,u),this.length=this._features.length}function IF(o,u,d){o===15?u.version=d.readVarint():o===1?u.name=d.readString():o===5?u.extent=d.readVarint():o===2?u._features.push(d.pos):o===3?u._keys.push(d.readString()):o===4&&u._values.push(function(f){for(var x=null,w=f.readVarint()+f.pos;f.pos<w;){var A=f.readVarint()>>3;x=A===1?f.readString():A===2?f.readFloat():A===3?f.readDouble():A===4?f.readVarint64():A===5?f.readVarint():A===6?f.readSVarint():A===7?f.readBoolean():null}return x}(d))}function CF(o,u,d){if(o===3){var f=new D5(d,d.readVarint()+d.pos);f.length&&(u[f.name]=f)}}V5.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var u=this._pbf.readVarint()+this._pbf.pos;return new N5(this._pbf,u,this.extent,this._keys,this._values)};var tg={VectorTile:function(o,u){this.layers=o.readFields(CF,{},u)},VectorTileFeature:N5,VectorTileLayer:D5},AF=tg.VectorTileFeature.types,WI=Math.pow(2,13);function Xf(o,u,d,f,x,w,A,M){o.emplaceBack(u,d,2*Math.floor(f*WI)+A,x*WI*2,w*WI*2,Math.round(M))}var Pl=function(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(u){return u.id}),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Wl,this.indexArray=new Au,this.programConfigurations=new ca(o.layers,o.zoom),this.segments=new ee,this.stateDependentLayerIds=this.layers.filter(function(u){return u.isStateDependent()}).map(function(u){return u.id})};function SF(o,u){return o.x===u.x&&(o.x<0||o.x>8192)||o.y===u.y&&(o.y<0||o.y>8192)}Pl.prototype.populate=function(o,u,d){this.features=[],this.hasPattern=RI("fill-extrusion",this.layers,u);for(var f=0,x=o;f<x.length;f+=1){var w=x[f],A=w.feature,M=w.id,W=w.index,P=w.sourceLayerIndex,N=this.layers[0]._featureFilter.needGeometry,Z=Mn(A,N);if(this.layers[0]._featureFilter.filter(new Ya(this.zoom),Z,d)){var Y={id:M,sourceLayerIndex:P,index:W,geometry:N?Z.geometry:yn(A),properties:A.properties,type:A.type,patterns:{}};this.hasPattern?this.features.push(kI("fill-extrusion",this.layers,Y,this.zoom,u)):this.addFeature(Y,Y.geometry,W,d,{}),u.featureIndex.insert(A,Y.geometry,W,P,this.index,!0)}}},Pl.prototype.addFeatures=function(o,u,d){for(var f=0,x=this.features;f<x.length;f+=1){var w=x[f];this.addFeature(w,w.geometry,w.index,u,d)}},Pl.prototype.update=function(o,u,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,d)},Pl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Pl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Pl.prototype.upload=function(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,vF),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},Pl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Pl.prototype.addFeature=function(o,u,d,f,x){for(var w=0,A=LI(u,500);w<A.length;w+=1){for(var M=A[w],W=0,P=0,N=M;P<N.length;P+=1)W+=N[P].length;for(var Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Y=0,Q=M;Y<Q.length;Y+=1){var de=Q[Y];if(de.length!==0&&!((za=de).every(function(Ma){return Ma.x<0})||za.every(function(Ma){return Ma.x>8192})||za.every(function(Ma){return Ma.y<0})||za.every(function(Ma){return Ma.y>8192})))for(var he=0,Se=0;Se<de.length;Se++){var ye=de[Se];if(Se>=1){var Le=de[Se-1];if(!SF(ye,Le)){Z.vertexLength+4>ee.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Oe=ye.sub(Le)._perp()._unit(),Ne=Le.dist(ye);he+Ne>32768&&(he=0),Xf(this.layoutVertexArray,ye.x,ye.y,Oe.x,Oe.y,0,0,he),Xf(this.layoutVertexArray,ye.x,ye.y,Oe.x,Oe.y,0,1,he),Xf(this.layoutVertexArray,Le.x,Le.y,Oe.x,Oe.y,0,0,he+=Ne),Xf(this.layoutVertexArray,Le.x,Le.y,Oe.x,Oe.y,0,1,he);var Ze=Z.vertexLength;this.indexArray.emplaceBack(Ze,Ze+2,Ze+1),this.indexArray.emplaceBack(Ze+1,Ze+2,Ze+3),Z.vertexLength+=4,Z.primitiveLength+=2}}}}if(Z.vertexLength+W>ee.MAX_VERTEX_ARRAY_LENGTH&&(Z=this.segments.prepareSegment(W,this.layoutVertexArray,this.indexArray)),AF[o.type]==="Polygon"){for(var $e=[],_t=[],xt=Z.vertexLength,jt=0,kt=M;jt<kt.length;jt+=1){var aa=kt[jt];if(aa.length!==0){aa!==M[0]&&_t.push($e.length/2);for(var Wt=0;Wt<aa.length;Wt++){var Fa=aa[Wt];Xf(this.layoutVertexArray,Fa.x,Fa.y,0,0,1,1,0),$e.push(Fa.x),$e.push(Fa.y)}}}for(var ha=SI($e,_t),Ut=0;Ut<ha.length;Ut+=3)this.indexArray.emplaceBack(xt+ha[Ut],xt+ha[Ut+2],xt+ha[Ut+1]);Z.primitiveLength+=ha.length/3,Z.vertexLength+=W}}var za;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,x,f)},Nt("FillExtrusionBucket",Pl,{omit:["layers","features"]});var TF={paint:new Tr({"fill-extrusion-opacity":new ea(J["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zt(J["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ea(J["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ea(J["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Hm(J["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zt(J["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zt(J["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ea(J["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},EF=function(o){function u(d){o.call(this,d,TF)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.createBucket=function(d){return new Pl(d)},u.prototype.queryRadius=function(){return ir(this.paint.get("fill-extrusion-translate"))},u.prototype.is3D=function(){return!0},u.prototype.queryIntersectsFeature=function(d,f,x,w,A,M,W,P){var N=Gl(d,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),M.angle,W),Z=this.paint.get("fill-extrusion-height").evaluate(f,x),Y=this.paint.get("fill-extrusion-base").evaluate(f,x),Q=function(he,Se,ye,Le){for(var Oe=[],Ne=0,Ze=he;Ne<Ze.length;Ne+=1){var $e=Ze[Ne],_t=[$e.x,$e.y,0,1];Jm(_t,_t,Se),Oe.push(new g(_t[0]/_t[3],_t[1]/_t[3]))}return Oe}(N,P),de=function(he,Se,ye,Le){for(var Oe=[],Ne=[],Ze=Le[8]*Se,$e=Le[9]*Se,_t=Le[10]*Se,xt=Le[11]*Se,jt=Le[8]*ye,kt=Le[9]*ye,aa=Le[10]*ye,Wt=Le[11]*ye,Fa=0,ha=he;Fa<ha.length;Fa+=1){for(var Ut=[],za=[],Ma=0,oi=ha[Fa];Ma<oi.length;Ma+=1){var ia=oi[Ma],mi=ia.x,ln=ia.y,In=Le[0]*mi+Le[4]*ln+Le[12],bn=Le[1]*mi+Le[5]*ln+Le[13],un=Le[2]*mi+Le[6]*ln+Le[14],Cn=Le[3]*mi+Le[7]*ln+Le[15],nr=un+_t,rr=Cn+xt,jr=In+jt,fr=bn+kt,Jr=un+aa,Ln=Cn+Wt,yr=new g((In+Ze)/rr,(bn+$e)/rr);yr.z=nr/rr,Ut.push(yr);var Qa=new g(jr/Ln,fr/Ln);Qa.z=Jr/Ln,za.push(Qa)}Oe.push(Ut),Ne.push(za)}return[Oe,Ne]}(w,Y,Z,P);return function(he,Se,ye){var Le=1/0;Uo(ye,Se)&&(Le=Z5(ye,Se[0]));for(var Oe=0;Oe<Se.length;Oe++)for(var Ne=Se[Oe],Ze=he[Oe],$e=0;$e<Ne.length-1;$e++){var _t=Ne[$e],xt=[_t,Ne[$e+1],Ze[$e+1],Ze[$e],_t];Eu(ye,xt)&&(Le=Math.min(Le,Z5(ye,xt)))}return Le!==1/0&&Le}(de[0],de[1],Q)},u}(ul);function Hf(o,u){return o.x*u.x+o.y*u.y}function Z5(o,u){if(o.length===1){for(var d,f=0,x=u[f++];!d||x.equals(d);)if(!(d=u[f++]))return 1/0;for(;f<u.length;f++){var w=u[f],A=o[0],M=d.sub(x),W=w.sub(x),P=A.sub(x),N=Hf(M,M),Z=Hf(M,W),Y=Hf(W,W),Q=Hf(P,M),de=Hf(P,W),he=N*Y-Z*Z,Se=(Y*Q-Z*de)/he,ye=(N*de-Z*Q)/he,Le=x.z*(1-Se-ye)+d.z*Se+w.z*ye;if(isFinite(Le))return Le}return 1/0}for(var Oe=1/0,Ne=0,Ze=u;Ne<Ze.length;Ne+=1)Oe=Math.min(Oe,Ze[Ne].z);return Oe}var MF=mr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,LF=mr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,RF=tg.VectorTileFeature.types,kF=Math.cos(Math.PI/180*37.5),z5=Math.pow(2,14)/.5,ls=function(o){var u=this;this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(d){return d.id}),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(d){u.gradients[d.id]={}}),this.layoutVertexArray=new As,this.layoutVertexArray2=new Od,this.indexArray=new Au,this.programConfigurations=new ca(o.layers,o.zoom),this.segments=new ee,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(d){return d.isStateDependent()}).map(function(d){return d.id})};ls.prototype.populate=function(o,u,d){this.hasPattern=RI("line",this.layers,u);for(var f=this.layers[0].layout.get("line-sort-key"),x=[],w=0,A=o;w<A.length;w+=1){var M=A[w],W=M.feature,P=M.id,N=M.index,Z=M.sourceLayerIndex,Y=this.layers[0]._featureFilter.needGeometry,Q=Mn(W,Y);if(this.layers[0]._featureFilter.filter(new Ya(this.zoom),Q,d)){var de=f?f.evaluate(Q,{},d):void 0,he={id:P,properties:W.properties,type:W.type,sourceLayerIndex:Z,index:N,geometry:Y?Q.geometry:yn(W),patterns:{},sortKey:de};x.push(he)}}f&&x.sort(function(_t,xt){return _t.sortKey-xt.sortKey});for(var Se=0,ye=x;Se<ye.length;Se+=1){var Le=ye[Se],Oe=Le.geometry,Ne=Le.index,Ze=Le.sourceLayerIndex;if(this.hasPattern){var $e=kI("line",this.layers,Le,this.zoom,u);this.patternFeatures.push($e)}else this.addFeature(Le,Oe,Ne,d,{});u.featureIndex.insert(o[Ne].feature,Oe,Ne,Ze,this.index)}},ls.prototype.update=function(o,u,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,d)},ls.prototype.addFeatures=function(o,u,d){for(var f=0,x=this.patternFeatures;f<x.length;f+=1){var w=x[f];this.addFeature(w,w.geometry,w.index,u,d)}},ls.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ls.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ls.prototype.upload=function(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,LF)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,MF),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0},ls.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ls.prototype.lineFeatureClips=function(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}},ls.prototype.addFeature=function(o,u,d,f,x){var w=this.layers[0].layout,A=w.get("line-join").evaluate(o,{}),M=w.get("line-cap"),W=w.get("line-miter-limit"),P=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(var N=0,Z=u;N<Z.length;N+=1)this.addLine(Z[N],o,A,M,W,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,d,x,f)},ls.prototype.addLine=function(o,u,d,f,x,w){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var A=0;A<o.length-1;A++)this.totalDistance+=o[A].dist(o[A+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var M=RF[u.type]==="Polygon",W=o.length;W>=2&&o[W-1].equals(o[W-2]);)W--;for(var P=0;P<W-1&&o[P].equals(o[P+1]);)P++;if(!(W<(M?3:2))){d==="bevel"&&(x=1.05);var N,Z=this.overscaling<=16?122880/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*W,this.layoutVertexArray,this.indexArray),Q=void 0,de=void 0,he=void 0,Se=void 0;this.e1=this.e2=-1,M&&(Se=o[P].sub(N=o[W-2])._unit()._perp());for(var ye=P;ye<W;ye++)if(!(de=ye===W-1?M?o[P+1]:void 0:o[ye+1])||!o[ye].equals(de)){Se&&(he=Se),N&&(Q=N),N=o[ye],Se=de?de.sub(N)._unit()._perp():he;var Le=(he=he||Se).add(Se);Le.x===0&&Le.y===0||Le._unit();var Oe=he.x*Se.x+he.y*Se.y,Ne=Le.x*Se.x+Le.y*Se.y,Ze=Ne!==0?1/Ne:1/0,$e=2*Math.sqrt(2-2*Ne),_t=Ne<kF&&Q&&de,xt=he.x*Se.y-he.y*Se.x>0;if(_t&&ye>P){var jt=N.dist(Q);if(jt>2*Z){var kt=N.sub(N.sub(Q)._mult(Z/jt)._round());this.updateDistance(Q,kt),this.addCurrentVertex(kt,he,0,0,Y),Q=kt}}var aa=Q&&de,Wt=aa?d:M?"butt":f;if(aa&&Wt==="round"&&(Ze<w?Wt="miter":Ze<=2&&(Wt="fakeround")),Wt==="miter"&&Ze>x&&(Wt="bevel"),Wt==="bevel"&&(Ze>2&&(Wt="flipbevel"),Ze<x&&(Wt="miter")),Q&&this.updateDistance(Q,N),Wt==="miter")Le._mult(Ze),this.addCurrentVertex(N,Le,0,0,Y);else if(Wt==="flipbevel"){if(Ze>100)Le=Se.mult(-1);else{var Fa=Ze*he.add(Se).mag()/he.sub(Se).mag();Le._perp()._mult(Fa*(xt?-1:1))}this.addCurrentVertex(N,Le,0,0,Y),this.addCurrentVertex(N,Le.mult(-1),0,0,Y)}else if(Wt==="bevel"||Wt==="fakeround"){var ha=-Math.sqrt(Ze*Ze-1),Ut=xt?ha:0,za=xt?0:ha;if(Q&&this.addCurrentVertex(N,he,Ut,za,Y),Wt==="fakeround")for(var Ma=Math.round(180*$e/Math.PI/20),oi=1;oi<Ma;oi++){var ia=oi/Ma;if(ia!==.5){var mi=ia-.5;ia+=ia*mi*(ia-1)*((1.0904+Oe*(Oe*(3.55645-1.43519*Oe)-3.2452))*mi*mi+(.848013+Oe*(.215638*Oe-1.06021)))}var ln=Se.sub(he)._mult(ia)._add(he)._unit()._mult(xt?-1:1);this.addHalfVertex(N,ln.x,ln.y,!1,xt,0,Y)}de&&this.addCurrentVertex(N,Se,-Ut,-za,Y)}else if(Wt==="butt")this.addCurrentVertex(N,Le,0,0,Y);else if(Wt==="square"){var In=Q?1:-1;this.addCurrentVertex(N,Le,In,In,Y)}else Wt==="round"&&(Q&&(this.addCurrentVertex(N,he,0,0,Y),this.addCurrentVertex(N,he,1,1,Y,!0)),de&&(this.addCurrentVertex(N,Se,-1,-1,Y,!0),this.addCurrentVertex(N,Se,0,0,Y)));if(_t&&ye<W-1){var bn=N.dist(de);if(bn>2*Z){var un=N.add(de.sub(N)._mult(Z/bn)._round());this.updateDistance(N,un),this.addCurrentVertex(un,Se,0,0,Y),N=un}}}}},ls.prototype.addCurrentVertex=function(o,u,d,f,x,w){w===void 0&&(w=!1);var A=u.y*f-u.x,M=-u.y-u.x*f;this.addHalfVertex(o,u.x+u.y*d,u.y-u.x*d,w,!1,d,x),this.addHalfVertex(o,A,M,w,!0,-f,x),this.distance>z5/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(o,u,d,f,x,w))},ls.prototype.addHalfVertex=function(o,u,d,f,x,w,A){var M=.5*(this.lineClips?this.scaledDistance*(z5-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o.x<<1)+(f?1:0),(o.y<<1)+(x?1:0),Math.round(63*u)+128,Math.round(63*d)+128,1+(w===0?0:w<0?-1:1)|(63&M)<<2,M>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var W=A.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,W),A.primitiveLength++),x?this.e2=W:this.e1=W},ls.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},ls.prototype.updateDistance=function(o,u){this.distance+=o.dist(u),this.updateScaledDistance()},Nt("LineBucket",ls,{omit:["layers","patternFeatures"]});var WF=new Tr({"line-cap":new ea(J.layout_line["line-cap"]),"line-join":new zt(J.layout_line["line-join"]),"line-miter-limit":new ea(J.layout_line["line-miter-limit"]),"line-round-limit":new ea(J.layout_line["line-round-limit"]),"line-sort-key":new zt(J.layout_line["line-sort-key"])}),U5={paint:new Tr({"line-opacity":new zt(J.paint_line["line-opacity"]),"line-color":new zt(J.paint_line["line-color"]),"line-translate":new ea(J.paint_line["line-translate"]),"line-translate-anchor":new ea(J.paint_line["line-translate-anchor"]),"line-width":new zt(J.paint_line["line-width"]),"line-gap-width":new zt(J.paint_line["line-gap-width"]),"line-offset":new zt(J.paint_line["line-offset"]),"line-blur":new zt(J.paint_line["line-blur"]),"line-dasharray":new Yr(J.paint_line["line-dasharray"]),"line-pattern":new Hm(J.paint_line["line-pattern"]),"line-gradient":new zo(J.paint_line["line-gradient"])}),layout:WF},X5=new(function(o){function u(){o.apply(this,arguments)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.possiblyEvaluate=function(d,f){return f=new Ya(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),o.prototype.possiblyEvaluate.call(this,d,f)},u.prototype.evaluate=function(d,f,x,w){return f=O({},f,{zoom:Math.floor(f.zoom)}),o.prototype.evaluate.call(this,d,f,x,w)},u}(zt))(U5.paint.properties["line-width"].specification);X5.useIntegerZoom=!0;var GF=function(o){function u(d){o.call(this,d,U5),this.gradientVersion=0}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype._handleSpecialPaintPropertyUpdate=function(d){d==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof vs,this.gradientVersion=(this.gradientVersion+1)%C)},u.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},u.prototype.recalculate=function(d,f){o.prototype.recalculate.call(this,d,f),this.paint._values["line-floorwidth"]=X5.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,d)},u.prototype.createBucket=function(d){return new ls(d)},u.prototype.queryRadius=function(d){var f=d,x=H5(hl("line-width",this,f),hl("line-gap-width",this,f)),w=hl("line-offset",this,f);return x/2+Math.abs(w)+ir(this.paint.get("line-translate"))},u.prototype.queryIntersectsFeature=function(d,f,x,w,A,M,W){var P=Gl(d,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),M.angle,W),N=W/2*H5(this.paint.get("line-width").evaluate(f,x),this.paint.get("line-gap-width").evaluate(f,x)),Z=this.paint.get("line-offset").evaluate(f,x);return Z&&(w=function(Y,Q){for(var de=[],he=new g(0,0),Se=0;Se<Y.length;Se++){for(var ye=Y[Se],Le=[],Oe=0;Oe<ye.length;Oe++){var Ne=ye[Oe],Ze=ye[Oe+1],$e=Oe===0?he:Ne.sub(ye[Oe-1])._unit()._perp(),_t=Oe===ye.length-1?he:Ze.sub(Ne)._unit()._perp(),xt=$e._add(_t)._unit();xt._mult(1/(xt.x*_t.x+xt.y*_t.y)),Le.push(xt._mult(Q)._add(Ne))}de.push(Le)}return de}(w,Z*W)),function(Y,Q,de){for(var he=0;he<Q.length;he++){var Se=Q[he];if(Y.length>=3){for(var ye=0;ye<Se.length;ye++)if(dl(Y,Se[ye]))return!0}if(go(Y,Se,de))return!0}return!1}(P,w,N)},u.prototype.isTileClipped=function(){return!0},u}(ul);function H5(o,u){return u>0?u+2*o:o}var OF=mr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),PF=mr([{name:"a_projected_pos",components:3,type:"Float32"}],4),BF=(mr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),mr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Y5=(mr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),mr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),FF=mr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function NF(o,u,d){return o.sections.forEach(function(f){f.text=function(x,w,A){var M=w.layout.get("text-transform").evaluate(A,{});return M==="uppercase"?x=x.toLocaleUpperCase():M==="lowercase"&&(x=x.toLocaleLowerCase()),Us.applyArabicShaping&&(x=Us.applyArabicShaping(x)),x}(f.text,u,d)}),o}mr([{name:"triangle",components:3,type:"Uint16"}]),mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),mr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),mr([{type:"Float32",name:"offsetX"}]),mr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Yf={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"},K5=function(o,u,d,f,x){var w,A,M=8*x-f-1,W=(1<<M)-1,P=W>>1,N=-7,Z=d?x-1:0,Y=d?-1:1,Q=o[u+Z];for(Z+=Y,w=Q&(1<<-N)-1,Q>>=-N,N+=M;N>0;w=256*w+o[u+Z],Z+=Y,N-=8);for(A=w&(1<<-N)-1,w>>=-N,N+=f;N>0;A=256*A+o[u+Z],Z+=Y,N-=8);if(w===0)w=1-P;else{if(w===W)return A?NaN:1/0*(Q?-1:1);A+=Math.pow(2,f),w-=P}return(Q?-1:1)*A*Math.pow(2,w-f)},q5=function(o,u,d,f,x,w){var A,M,W,P=8*w-x-1,N=(1<<P)-1,Z=N>>1,Y=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=f?0:w-1,de=f?1:-1,he=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(M=isNaN(u)?1:0,A=N):(A=Math.floor(Math.log(u)/Math.LN2),u*(W=Math.pow(2,-A))<1&&(A--,W*=2),(u+=A+Z>=1?Y/W:Y*Math.pow(2,1-Z))*W>=2&&(A++,W/=2),A+Z>=N?(M=0,A=N):A+Z>=1?(M=(u*W-1)*Math.pow(2,x),A+=Z):(M=u*Math.pow(2,Z-1)*Math.pow(2,x),A=0));x>=8;o[d+Q]=255&M,Q+=de,M/=256,x-=8);for(A=A<<x|M,P+=x;P>0;o[d+Q]=255&A,Q+=de,A/=256,P-=8);o[d+Q-de]|=128*he},vb=Yi;function Yi(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Yi.Varint=0,Yi.Fixed64=1,Yi.Bytes=2,Yi.Fixed32=5;var j5=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function kc(o){return o.type===Yi.Bytes?o.readVarint()+o.pos:o.pos+1}function ag(o,u,d){return d?4294967296*u+(o>>>0):4294967296*(u>>>0)+(o>>>0)}function J5(o,u,d){var f=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));d.realloc(f);for(var x=d.pos-1;x>=o;x--)d.buf[x+f]=d.buf[x]}function DF(o,u){for(var d=0;d<o.length;d++)u.writeVarint(o[d])}function VF(o,u){for(var d=0;d<o.length;d++)u.writeSVarint(o[d])}function ZF(o,u){for(var d=0;d<o.length;d++)u.writeFloat(o[d])}function zF(o,u){for(var d=0;d<o.length;d++)u.writeDouble(o[d])}function UF(o,u){for(var d=0;d<o.length;d++)u.writeBoolean(o[d])}function XF(o,u){for(var d=0;d<o.length;d++)u.writeFixed32(o[d])}function HF(o,u){for(var d=0;d<o.length;d++)u.writeSFixed32(o[d])}function YF(o,u){for(var d=0;d<o.length;d++)u.writeFixed64(o[d])}function KF(o,u){for(var d=0;d<o.length;d++)u.writeSFixed64(o[d])}function xb(o,u){return(o[u]|o[u+1]<<8|o[u+2]<<16)+16777216*o[u+3]}function ig(o,u,d){o[d]=u,o[d+1]=u>>>8,o[d+2]=u>>>16,o[d+3]=u>>>24}function Q5(o,u){return(o[u]|o[u+1]<<8|o[u+2]<<16)+(o[u+3]<<24)}function qF(o,u,d){o===1&&d.readMessage(jF,u)}function jF(o,u,d){if(o===3){var f=d.readMessage(JF,{}),x=f.width,w=f.height,A=f.left,M=f.top,W=f.advance;u.push({id:f.id,bitmap:new p_({width:x+6,height:w+6},f.bitmap),metrics:{width:x,height:w,left:A,top:M,advance:W}})}}function JF(o,u,d){o===1?u.id=d.readVarint():o===2?u.bitmap=d.readBytes():o===3?u.width=d.readVarint():o===4?u.height=d.readVarint():o===5?u.left=d.readSVarint():o===6?u.top=d.readSVarint():o===7&&(u.advance=d.readVarint())}function $5(o){for(var u=0,d=0,f=0,x=o;f<x.length;f+=1){var w=x[f];u+=w.w*w.h,d=Math.max(d,w.w)}o.sort(function(he,Se){return Se.h-he.h});for(var A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),d),h:1/0}],M=0,W=0,P=0,N=o;P<N.length;P+=1)for(var Z=N[P],Y=A.length-1;Y>=0;Y--){var Q=A[Y];if(!(Z.w>Q.w||Z.h>Q.h)){if(Z.x=Q.x,Z.y=Q.y,W=Math.max(W,Z.y+Z.h),M=Math.max(M,Z.x+Z.w),Z.w===Q.w&&Z.h===Q.h){var de=A.pop();Y<A.length&&(A[Y]=de)}else Z.h===Q.h?(Q.x+=Z.w,Q.w-=Z.w):Z.w===Q.w?(Q.y+=Z.h,Q.h-=Z.h):(A.push({x:Q.x+Z.w,y:Q.y,w:Q.w-Z.w,h:Z.h}),Q.y+=Z.h,Q.h-=Z.h);break}}return{w:M,h:W,fill:u/(M*W)||0}}Yi.prototype={destroy:function(){this.buf=null},readFields:function(o,u,d){for(d=d||this.length;this.pos<d;){var f=this.readVarint(),x=f>>3,w=this.pos;this.type=7&f,o(x,u,this),this.pos===w&&this.skip(f)}return u},readMessage:function(o,u){return this.readFields(o,u,this.readVarint()+this.pos)},readFixed32:function(){var o=xb(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Q5(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=xb(this.buf,this.pos)+4294967296*xb(this.buf,this.pos+4);return this.pos+=8,o},readSFixed64:function(){var o=xb(this.buf,this.pos)+4294967296*Q5(this.buf,this.pos+4);return this.pos+=8,o},readFloat:function(){var o=K5(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=K5(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var u,d,f=this.buf;return u=127&(d=f[this.pos++]),d<128?u:(u|=(127&(d=f[this.pos++]))<<7,d<128?u:(u|=(127&(d=f[this.pos++]))<<14,d<128?u:(u|=(127&(d=f[this.pos++]))<<21,d<128?u:function(x,w,A){var M,W,P=A.buf;if(M=(112&(W=P[A.pos++]))>>4,W<128||(M|=(127&(W=P[A.pos++]))<<3,W<128)||(M|=(127&(W=P[A.pos++]))<<10,W<128)||(M|=(127&(W=P[A.pos++]))<<17,W<128)||(M|=(127&(W=P[A.pos++]))<<24,W<128)||(M|=(1&(W=P[A.pos++]))<<31,W<128))return ag(x,M,w);throw new Error("Expected varint not more than 10 bytes")}(u|=(15&(d=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,u=this.pos;return this.pos=o,o-u>=12&&j5?function(d,f,x){return j5.decode(d.subarray(f,x))}(this.buf,u,o):function(d,f,x){for(var w="",A=f;A<x;){var M,W,P,N=d[A],Z=null,Y=N>239?4:N>223?3:N>191?2:1;if(A+Y>x)break;Y===1?N<128&&(Z=N):Y===2?(192&(M=d[A+1]))==128&&(Z=(31&N)<<6|63&M)<=127&&(Z=null):Y===3?(W=d[A+2],(192&(M=d[A+1]))==128&&(192&W)==128&&((Z=(15&N)<<12|(63&M)<<6|63&W)<=2047||Z>=55296&&Z<=57343)&&(Z=null)):Y===4&&(W=d[A+2],P=d[A+3],(192&(M=d[A+1]))==128&&(192&W)==128&&(192&P)==128&&((Z=(15&N)<<18|(63&M)<<12|(63&W)<<6|63&P)<=65535||Z>=1114112)&&(Z=null)),Z===null?(Z=65533,Y=1):Z>65535&&(Z-=65536,w+=String.fromCharCode(Z>>>10&1023|55296),Z=56320|1023&Z),w+=String.fromCharCode(Z),A+=Y}return w}(this.buf,u,o)},readBytes:function(){var o=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,o);return this.pos=o,u},readPackedVarint:function(o,u){if(this.type!==Yi.Bytes)return o.push(this.readVarint(u));var d=kc(this);for(o=o||[];this.pos<d;)o.push(this.readVarint(u));return o},readPackedSVarint:function(o){if(this.type!==Yi.Bytes)return o.push(this.readSVarint());var u=kc(this);for(o=o||[];this.pos<u;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Yi.Bytes)return o.push(this.readBoolean());var u=kc(this);for(o=o||[];this.pos<u;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Yi.Bytes)return o.push(this.readFloat());var u=kc(this);for(o=o||[];this.pos<u;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Yi.Bytes)return o.push(this.readDouble());var u=kc(this);for(o=o||[];this.pos<u;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Yi.Bytes)return o.push(this.readFixed32());var u=kc(this);for(o=o||[];this.pos<u;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Yi.Bytes)return o.push(this.readSFixed32());var u=kc(this);for(o=o||[];this.pos<u;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Yi.Bytes)return o.push(this.readFixed64());var u=kc(this);for(o=o||[];this.pos<u;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Yi.Bytes)return o.push(this.readSFixed64());var u=kc(this);for(o=o||[];this.pos<u;)o.push(this.readSFixed64());return o},skip:function(o){var u=7&o;if(u===Yi.Varint)for(;this.buf[this.pos++]>127;);else if(u===Yi.Bytes)this.pos=this.readVarint()+this.pos;else if(u===Yi.Fixed32)this.pos+=4;else{if(u!==Yi.Fixed64)throw new Error("Unimplemented type: "+u);this.pos+=8}},writeTag:function(o,u){this.writeVarint(o<<3|u)},realloc:function(o){for(var u=this.length||16;u<this.pos+o;)u*=2;if(u!==this.length){var d=new Uint8Array(u);d.set(this.buf),this.buf=d,this.length=u}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),ig(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),ig(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),ig(this.buf,-1&o,this.pos),ig(this.buf,Math.floor(o*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),ig(this.buf,-1&o,this.pos),ig(this.buf,Math.floor(o*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(u,d){var f,x;if(u>=0?(f=u%4294967296|0,x=u/4294967296|0):(x=~(-u/4294967296),4294967295^(f=~(-u%4294967296))?f=f+1|0:(f=0,x=x+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");d.realloc(10),function(w,A,M){M.buf[M.pos++]=127&w|128,w>>>=7,M.buf[M.pos++]=127&w|128,w>>>=7,M.buf[M.pos++]=127&w|128,w>>>=7,M.buf[M.pos++]=127&w|128,M.buf[M.pos]=127&(w>>>=7)}(f,0,d),function(w,A){var M=(7&w)<<4;A.buf[A.pos++]|=M|((w>>>=3)?128:0),w&&(A.buf[A.pos++]=127&w|((w>>>=7)?128:0),w&&(A.buf[A.pos++]=127&w|((w>>>=7)?128:0),w&&(A.buf[A.pos++]=127&w|((w>>>=7)?128:0),w&&(A.buf[A.pos++]=127&w|((w>>>=7)?128:0),w&&(A.buf[A.pos++]=127&w)))))}(x,d)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var u=this.pos;this.pos=function(f,x,w){for(var A,M,W=0;W<x.length;W++){if((A=x.charCodeAt(W))>55295&&A<57344){if(!M){A>56319||W+1===x.length?(f[w++]=239,f[w++]=191,f[w++]=189):M=A;continue}if(A<56320){f[w++]=239,f[w++]=191,f[w++]=189,M=A;continue}A=M-55296<<10|A-56320|65536,M=null}else M&&(f[w++]=239,f[w++]=191,f[w++]=189,M=null);A<128?f[w++]=A:(A<2048?f[w++]=A>>6|192:(A<65536?f[w++]=A>>12|224:(f[w++]=A>>18|240,f[w++]=A>>12&63|128),f[w++]=A>>6&63|128),f[w++]=63&A|128)}return w}(this.buf,o,this.pos);var d=this.pos-u;d>=128&&J5(u,d,this),this.pos=u-1,this.writeVarint(d),this.pos+=d},writeFloat:function(o){this.realloc(4),q5(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),q5(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var u=o.length;this.writeVarint(u),this.realloc(u);for(var d=0;d<u;d++)this.buf[this.pos++]=o[d]},writeRawMessage:function(o,u){this.pos++;var d=this.pos;o(u,this);var f=this.pos-d;f>=128&&J5(d,f,this),this.pos=d-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,u,d){this.writeTag(o,Yi.Bytes),this.writeRawMessage(u,d)},writePackedVarint:function(o,u){u.length&&this.writeMessage(o,DF,u)},writePackedSVarint:function(o,u){u.length&&this.writeMessage(o,VF,u)},writePackedBoolean:function(o,u){u.length&&this.writeMessage(o,UF,u)},writePackedFloat:function(o,u){u.length&&this.writeMessage(o,ZF,u)},writePackedDouble:function(o,u){u.length&&this.writeMessage(o,zF,u)},writePackedFixed32:function(o,u){u.length&&this.writeMessage(o,XF,u)},writePackedSFixed32:function(o,u){u.length&&this.writeMessage(o,HF,u)},writePackedFixed64:function(o,u){u.length&&this.writeMessage(o,YF,u)},writePackedSFixed64:function(o,u){u.length&&this.writeMessage(o,KF,u)},writeBytesField:function(o,u){this.writeTag(o,Yi.Bytes),this.writeBytes(u)},writeFixed32Field:function(o,u){this.writeTag(o,Yi.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(o,u){this.writeTag(o,Yi.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(o,u){this.writeTag(o,Yi.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(o,u){this.writeTag(o,Yi.Fixed64),this.writeSFixed64(u)},writeVarintField:function(o,u){this.writeTag(o,Yi.Varint),this.writeVarint(u)},writeSVarintField:function(o,u){this.writeTag(o,Yi.Varint),this.writeSVarint(u)},writeStringField:function(o,u){this.writeTag(o,Yi.Bytes),this.writeString(u)},writeFloatField:function(o,u){this.writeTag(o,Yi.Fixed32),this.writeFloat(u)},writeDoubleField:function(o,u){this.writeTag(o,Yi.Fixed64),this.writeDouble(u)},writeBooleanField:function(o,u){this.writeVarintField(o,!!u)}};var wb=function(o,u){var d=u.pixelRatio,f=u.version,x=u.stretchX,w=u.stretchY,A=u.content;this.paddedRect=o,this.pixelRatio=d,this.stretchX=x,this.stretchY=w,this.content=A,this.version=f},Kf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Kf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Kf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Kf.tlbr.get=function(){return this.tl.concat(this.br)},Kf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(wb.prototype,Kf);var qf=function(o,u){var d={},f={};this.haveRenderCallbacks=[];var x=[];this.addImages(o,d,x),this.addImages(u,f,x);var w=$5(x),A=new Ts({width:w.w||1,height:w.h||1});for(var M in o){var W=o[M],P=d[M].paddedRect;Ts.copy(W.data,A,{x:0,y:0},{x:P.x+1,y:P.y+1},W.data)}for(var N in u){var Z=u[N],Y=f[N].paddedRect,Q=Y.x+1,de=Y.y+1,he=Z.data.width,Se=Z.data.height;Ts.copy(Z.data,A,{x:0,y:0},{x:Q,y:de},Z.data),Ts.copy(Z.data,A,{x:0,y:Se-1},{x:Q,y:de-1},{width:he,height:1}),Ts.copy(Z.data,A,{x:0,y:0},{x:Q,y:de+Se},{width:he,height:1}),Ts.copy(Z.data,A,{x:he-1,y:0},{x:Q-1,y:de},{width:1,height:Se}),Ts.copy(Z.data,A,{x:0,y:0},{x:Q+he,y:de},{width:1,height:Se})}this.image=A,this.iconPositions=d,this.patternPositions=f};qf.prototype.addImages=function(o,u,d){for(var f in o){var x=o[f],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};d.push(w),u[f]=new wb(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(f)}},qf.prototype.patchUpdatedImages=function(o,u){for(var d in o.dispatchRenderCallbacks(this.haveRenderCallbacks),o.updatedImages)this.patchUpdatedImage(this.iconPositions[d],o.getImage(d),u),this.patchUpdatedImage(this.patternPositions[d],o.getImage(d),u)},qf.prototype.patchUpdatedImage=function(o,u,d){if(o&&u&&o.version!==u.version){o.version=u.version;var f=o.tl;d.update(u.data,void 0,{x:f[0],y:f[1]})}},Nt("ImagePosition",wb),Nt("ImageAtlas",qf);var po={horizontal:1,vertical:2,horizontalOnly:3},ng=function(){this.scale=1,this.fontStack="",this.imageName=null};ng.forText=function(o,u){var d=new ng;return d.scale=o||1,d.fontStack=u,d},ng.forImage=function(o){var u=new ng;return u.imageName=o,u};var qr=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ib(o,u,d,f,x,w,A,M,W,P,N,Z,Y,Q,de,he){var Se,ye=qr.fromFeature(o,x);Z===po.vertical&&ye.verticalizePunctuation();var Le=Us.processBidirectionalText,Oe=Us.processStyledBidirectionalText;if(Le&&ye.sections.length===1){Se=[];for(var Ne=0,Ze=Le(ye.toString(),GI(ye,P,w,u,f,Q,de));Ne<Ze.length;Ne+=1){var $e=Ze[Ne],_t=new qr;_t.text=$e,_t.sections=ye.sections;for(var xt=0;xt<$e.length;xt++)_t.sectionIndex.push(0);Se.push(_t)}}else if(Oe){Se=[];for(var jt=0,kt=Oe(ye.text,ye.sectionIndex,GI(ye,P,w,u,f,Q,de));jt<kt.length;jt+=1){var aa=kt[jt],Wt=new qr;Wt.text=aa[0],Wt.sectionIndex=aa[1],Wt.sections=ye.sections,Se.push(Wt)}}else Se=function(Ut,za){for(var Ma=[],oi=Ut.text,ia=0,mi=0,ln=za;mi<ln.length;mi+=1){var In=ln[mi];Ma.push(Ut.substring(ia,In)),ia=In}return ia<oi.length&&Ma.push(Ut.substring(ia,oi.length)),Ma}(ye,GI(ye,P,w,u,f,Q,de));var Fa=[],ha={positionedLines:Fa,text:ye.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:Z,iconsInText:!1,verticalizable:!1};return function(Ut,za,Ma,oi,ia,mi,ln,In,bn,un,Cn,nr){for(var rr=0,jr=-17,fr=0,Jr=0,Ln=In==="right"?1:In==="left"?0:.5,yr=0,Qa=0,Pi=ia;Qa<Pi.length;Qa+=1){var Ci=Pi[Qa];Ci.trim();var di=Ci.getMaxScale(),us=24*(di-1),Br={positionedGlyphs:[],lineOffset:0};Ut.positionedLines[yr]=Br;var Qi=Br.positionedGlyphs,Nn=0;if(Ci.length()){for(var Fr=0;Fr<Ci.length();Fr++){var gi=Ci.getSection(Fr),Ru=Ci.getSectionIndex(Fr),fo=Ci.getCharCode(Fr),ku=0,Rn=null,Wu=null,_l=null,hg=24,v_=!(bn===po.horizontal||!Cn&&!zm(fo)||Cn&&(Cb[fo]||(Pc=fo,St.Arabic(Pc)||St["Arabic Supplement"](Pc)||St["Arabic Extended-A"](Pc)||St["Arabic Presentation Forms-A"](Pc)||St["Arabic Presentation Forms-B"](Pc))));if(gi.imageName){var _g=oi[gi.imageName];if(!_g)continue;_l=gi.imageName,Ut.iconsInText=Ut.iconsInText||!0,Wu=_g.paddedRect;var Oc=_g.displaySize;gi.scale=24*gi.scale/nr,ku=us+(24-Oc[1]*gi.scale),hg=(Rn={width:Oc[0],height:Oc[1],left:1,top:-3,advance:v_?Oc[1]:Oc[0]}).advance;var mg=v_?Oc[0]*gi.scale-24*di:Oc[1]*gi.scale-24*di;mg>0&&mg>Nn&&(Nn=mg)}else{var Wb=Ma[gi.fontStack],gg=Wb&&Wb[fo];if(gg&&gg.rect)Wu=gg.rect,Rn=gg.metrics;else{var Qf=za[gi.fontStack],Gb=Qf&&Qf[fo];if(!Gb)continue;Rn=Gb.metrics}ku=24*(di-gi.scale)}v_?(Ut.verticalizable=!0,Qi.push({glyph:fo,imageName:_l,x:rr,y:jr+ku,vertical:v_,scale:gi.scale,fontStack:gi.fontStack,sectionIndex:Ru,metrics:Rn,rect:Wu}),rr+=hg*gi.scale+un):(Qi.push({glyph:fo,imageName:_l,x:rr,y:jr+ku,vertical:v_,scale:gi.scale,fontStack:gi.fontStack,sectionIndex:Ru,metrics:Rn,rect:Wu}),rr+=Rn.advance*gi.scale+un)}Qi.length!==0&&(fr=Math.max(rr-un,fr),$F(Qi,0,Qi.length-1,Ln,Nn)),rr=0;var Ob=mi*di+Nn;Br.lineOffset=Math.max(Nn,us),jr+=Ob,Jr=Math.max(Ob,Jr),++yr}else jr+=mi,++yr}var Pc,$f=jr- -17,pg=OI(ln),zd=pg.horizontalAlign,fg=pg.verticalAlign;(function(Pb,Bb,ey,ty,Fb,ay,iy,ny,Nb){var yg,Db=(Bb-ey)*Fb;yg=ay!==iy?-ny*ty- -17:(-ty*Nb+.5)*iy;for(var bg=0,ry=Pb;bg<ry.length;bg+=1)for(var x_=0,sy=ry[bg].positionedGlyphs;x_<sy.length;x_+=1){var vg=sy[x_];vg.x+=Db,vg.y+=yg}})(Ut.positionedLines,Ln,zd,fg,fr,Jr,mi,$f,ia.length),Ut.top+=-fg*$f,Ut.bottom=Ut.top+$f,Ut.left+=-zd*fr,Ut.right=Ut.left+fr}(ha,u,d,f,Se,A,M,W,Z,P,Y,he),!function(Ut){for(var za=0,Ma=Ut;za<Ma.length;za+=1)if(Ma[za].positionedGlyphs.length!==0)return!1;return!0}(Fa)&&ha}qr.fromFeature=function(o,u){for(var d=new qr,f=0;f<o.sections.length;f++){var x=o.sections[f];x.image?d.addImageSection(x):d.addTextSection(x,u)}return d},qr.prototype.length=function(){return this.text.length},qr.prototype.getSection=function(o){return this.sections[this.sectionIndex[o]]},qr.prototype.getSectionIndex=function(o){return this.sectionIndex[o]},qr.prototype.getCharCode=function(o){return this.text.charCodeAt(o)},qr.prototype.verticalizePunctuation=function(){this.text=function(o){for(var u="",d=0;d<o.length;d++){var f=o.charCodeAt(d+1)||null,x=o.charCodeAt(d-1)||null;u+=f&&kf(f)&&!Yf[o[d+1]]||x&&kf(x)&&!Yf[o[d-1]]||!Yf[o[d]]?o[d]:Yf[o[d]]}return u}(this.text)},qr.prototype.trim=function(){for(var o=0,u=0;u<this.text.length&&Cb[this.text.charCodeAt(u)];u++)o++;for(var d=this.text.length,f=this.text.length-1;f>=0&&f>=o&&Cb[this.text.charCodeAt(f)];f--)d--;this.text=this.text.substring(o,d),this.sectionIndex=this.sectionIndex.slice(o,d)},qr.prototype.substring=function(o,u){var d=new qr;return d.text=this.text.substring(o,u),d.sectionIndex=this.sectionIndex.slice(o,u),d.sections=this.sections,d},qr.prototype.toString=function(){return this.text},qr.prototype.getMaxScale=function(){var o=this;return this.sectionIndex.reduce(function(u,d){return Math.max(u,o.sections[d].scale)},0)},qr.prototype.addTextSection=function(o,u){this.text+=o.text,this.sections.push(ng.forText(o.scale,o.fontStack||u));for(var d=this.sections.length-1,f=0;f<o.text.length;++f)this.sectionIndex.push(d)},qr.prototype.addImageSection=function(o){var u=o.image?o.image.name:"";if(u.length!==0){var d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(ng.forImage(u)),this.sectionIndex.push(this.sections.length-1)):be("Reached maximum number of images 6401")}else be("Can't add FormattedSection with an empty image.")},qr.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Cb={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hs={};function eE(o,u,d,f,x,w){if(u.imageName){var A=f[u.imageName];return A?A.displaySize[0]*u.scale*24/w+x:0}var M=d[u.fontStack],W=M&&M[o];return W?W.metrics.advance*u.scale+x:0}function tE(o,u,d,f){var x=Math.pow(o-u,2);return f?o<u?x/2:2*x:x+Math.abs(d)*d}function QF(o,u,d){var f=0;return o===10&&(f-=1e4),d&&(f+=150),o!==40&&o!==65288||(f+=50),u!==41&&u!==65289||(f+=50),f}function aE(o,u,d,f,x,w){for(var A=null,M=tE(u,d,x,w),W=0,P=f;W<P.length;W+=1){var N=P[W],Z=tE(u-N.x,d,x,w)+N.badness;Z<=M&&(A=N,M=Z)}return{index:o,x:u,priorBreak:A,badness:M}}function GI(o,u,d,f,x,w,A){if(w!=="point")return[];if(!o)return[];for(var M,W=[],P=function(Se,ye,Le,Oe,Ne,Ze){for(var $e=0,_t=0;_t<Se.length();_t++){var xt=Se.getSection(_t);$e+=eE(Se.getCharCode(_t),xt,Oe,Ne,ye,Ze)}return $e/Math.max(1,Math.ceil($e/Le))}(o,u,d,f,x,A),N=o.text.indexOf("​")>=0,Z=0,Y=0;Y<o.length();Y++){var Q=o.getSection(Y),de=o.getCharCode(Y);if(Cb[de]||(Z+=eE(de,Q,f,x,u,A)),Y<o.length()-1){var he=!((M=de)<11904||!(St["Bopomofo Extended"](M)||St.Bopomofo(M)||St["CJK Compatibility Forms"](M)||St["CJK Compatibility Ideographs"](M)||St["CJK Compatibility"](M)||St["CJK Radicals Supplement"](M)||St["CJK Strokes"](M)||St["CJK Symbols and Punctuation"](M)||St["CJK Unified Ideographs Extension A"](M)||St["CJK Unified Ideographs"](M)||St["Enclosed CJK Letters and Months"](M)||St["Halfwidth and Fullwidth Forms"](M)||St.Hiragana(M)||St["Ideographic Description Characters"](M)||St["Kangxi Radicals"](M)||St["Katakana Phonetic Extensions"](M)||St.Katakana(M)||St["Vertical Forms"](M)||St["Yi Radicals"](M)||St["Yi Syllables"](M)));(Hs[de]||he||Q.imageName)&&W.push(aE(Y+1,Z,P,W,QF(de,o.getCharCode(Y+1),he&&N),!1))}}return function Se(ye){return ye?Se(ye.priorBreak).concat(ye.index):[]}(aE(o.length(),Z,P,W,0,!0))}function OI(o){var u=.5,d=.5;switch(o){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":d=1;break;case"top":case"top-right":case"top-left":d=0}return{horizontalAlign:u,verticalAlign:d}}function $F(o,u,d,f,x){if(f||x)for(var w=o[d],A=(o[d].x+w.metrics.advance*w.scale)*f,M=u;M<=d;M++)o[M].x-=A,o[M].y+=x}function iE(o,u,d,f,x,w){var A,M=o.image;if(M.content){var W=M.content,P=M.pixelRatio||1;A=[W[0]/P,W[1]/P,M.displaySize[0]-W[2]/P,M.displaySize[1]-W[3]/P]}var N,Z,Y,Q,de=u.left*w,he=u.right*w;d==="width"||d==="both"?(Q=x[0]+de-f[3],Z=x[0]+he+f[1]):Z=(Q=x[0]+(de+he-M.displaySize[0])/2)+M.displaySize[0];var Se=u.top*w,ye=u.bottom*w;return d==="height"||d==="both"?(N=x[1]+Se-f[0],Y=x[1]+ye+f[2]):Y=(N=x[1]+(Se+ye-M.displaySize[1])/2)+M.displaySize[1],{image:M,top:N,right:Z,bottom:Y,left:Q,collisionPadding:A}}Hs[10]=!0,Hs[32]=!0,Hs[38]=!0,Hs[40]=!0,Hs[41]=!0,Hs[43]=!0,Hs[45]=!0,Hs[47]=!0,Hs[173]=!0,Hs[183]=!0,Hs[8203]=!0,Hs[8208]=!0,Hs[8211]=!0,Hs[8231]=!0;var rg=function(o){function u(d,f,x,w){o.call(this,d,f),this.angle=x,w!==void 0&&(this.segment=w)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.clone=function(){return new u(this.x,this.y,this.angle,this.segment)},u}(g);function PI(o,u){var d=u.expression;if(d.kind==="constant")return{kind:"constant",layoutSize:d.evaluate(new Ya(o+1))};if(d.kind==="source")return{kind:"source"};for(var f=d.zoomStops,x=d.interpolationType,w=0;w<f.length&&f[w]<=o;)w++;for(var A=w=Math.max(0,w-1);A<f.length&&f[A]<o+1;)A++;A=Math.min(f.length-1,A);var M=f[w],W=f[A];return d.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:W,interpolationType:x}:{kind:"camera",minZoom:M,maxZoom:W,minSize:d.evaluate(new Ya(M)),maxSize:d.evaluate(new Ya(W)),interpolationType:x}}function nE(o,u,d){var f=u.uSize,x=d.lowerSize;return o.kind==="source"?x/128:o.kind==="composite"?Bn(x/128,d.upperSize/128,u.uSizeT):f}function rE(o,u){var d=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){var x=o.interpolationType,w=x?R(Ar.interpolationFactor(x,u,o.minZoom,o.maxZoom),0,1):0;o.kind==="camera"?f=Bn(o.minSize,o.maxSize,w):d=w}return{uSizeT:d,uSize:f}}Nt("Anchor",rg);var eN=Object.freeze({__proto__:null,getSizeData:PI,evaluateSizeForFeature:nE,evaluateSizeForZoom:rE,SIZE_PACK_FACTOR:128});function sE(o,u,d,f,x){if(u.segment===void 0)return!0;for(var w=u,A=u.segment+1,M=0;M>-d/2;){if(--A<0)return!1;M-=o[A].dist(w),w=o[A]}M+=o[A].dist(o[A+1]),A++;for(var W=[],P=0;M<d/2;){var N=o[A],Z=o[A+1];if(!Z)return!1;var Y=o[A-1].angleTo(N)-N.angleTo(Z);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),W.push({distance:M,angleDelta:Y}),P+=Y;M-W[0].distance>f;)P-=W.shift().angleDelta;if(P>x)return!1;A++,M+=N.dist(Z)}return!0}function oE(o){for(var u=0,d=0;d<o.length-1;d++)u+=o[d].dist(o[d+1]);return u}function lE(o,u,d){return o?.6*u*d:0}function uE(o,u){return Math.max(o?o.right-o.left:0,u?u.right-u.left:0)}function tN(o,u,d,f,x,w){for(var A=lE(d,x,w),M=uE(d,f)*w,W=0,P=oE(o)/2,N=0;N<o.length-1;N++){var Z=o[N],Y=o[N+1],Q=Z.dist(Y);if(W+Q>P){var de=(P-W)/Q,he=Bn(Z.x,Y.x,de),Se=Bn(Z.y,Y.y,de),ye=new rg(he,Se,Y.angleTo(Z),N);return ye._round(),!A||sE(o,ye,M,A,u)?ye:void 0}W+=Q}}function aN(o,u,d,f,x,w,A,M,W){var P=lE(f,w,A),N=uE(f,x),Z=N*A,Y=o[0].x===0||o[0].x===W||o[0].y===0||o[0].y===W;return u-Z<u/4&&(u=Z+u/4),function Q(de,he,Se,ye,Le,Oe,Ne,Ze,$e){for(var _t=Oe/2,xt=oE(de),jt=0,kt=he-Se,aa=[],Wt=0;Wt<de.length-1;Wt++){for(var Fa=de[Wt],ha=de[Wt+1],Ut=Fa.dist(ha),za=ha.angleTo(Fa);kt+Se<jt+Ut;){var Ma=((kt+=Se)-jt)/Ut,oi=Bn(Fa.x,ha.x,Ma),ia=Bn(Fa.y,ha.y,Ma);if(oi>=0&&oi<$e&&ia>=0&&ia<$e&&kt-_t>=0&&kt+_t<=xt){var mi=new rg(oi,ia,za,Wt);mi._round(),ye&&!sE(de,mi,Oe,ye,Le)||aa.push(mi)}}jt+=Ut}return Ze||aa.length||Ne||(aa=Q(de,jt/2,Se,ye,Le,Oe,Ne,!0,$e)),aa}(o,Y?u/2*M%u:(N/2+2*w)*A*M%u,u,P,d,Z,Y,!1,W)}function cE(o,u,d,f,x){for(var w=[],A=0;A<o.length;A++)for(var M=o[A],W=void 0,P=0;P<M.length-1;P++){var N=M[P],Z=M[P+1];N.x<u&&Z.x<u||(N.x<u?N=new g(u,N.y+(u-N.x)/(Z.x-N.x)*(Z.y-N.y))._round():Z.x<u&&(Z=new g(u,N.y+(u-N.x)/(Z.x-N.x)*(Z.y-N.y))._round()),N.y<d&&Z.y<d||(N.y<d?N=new g(N.x+(d-N.y)/(Z.y-N.y)*(Z.x-N.x),d)._round():Z.y<d&&(Z=new g(N.x+(d-N.y)/(Z.y-N.y)*(Z.x-N.x),d)._round()),N.x>=f&&Z.x>=f||(N.x>=f?N=new g(f,N.y+(f-N.x)/(Z.x-N.x)*(Z.y-N.y))._round():Z.x>=f&&(Z=new g(f,N.y+(f-N.x)/(Z.x-N.x)*(Z.y-N.y))._round()),N.y>=x&&Z.y>=x||(N.y>=x?N=new g(N.x+(x-N.y)/(Z.y-N.y)*(Z.x-N.x),x)._round():Z.y>=x&&(Z=new g(N.x+(x-N.y)/(Z.y-N.y)*(Z.x-N.x),x)._round()),W&&N.equals(W[W.length-1])||w.push(W=[N]),W.push(Z)))))}return w}function dE(o,u,d,f){var x=[],w=o.image,A=w.pixelRatio,M=w.paddedRect.w-2,W=w.paddedRect.h-2,P=o.right-o.left,N=o.bottom-o.top,Z=w.stretchX||[[0,M]],Y=w.stretchY||[[0,W]],Q=function(oi,ia){return oi+ia[1]-ia[0]},de=Z.reduce(Q,0),he=Y.reduce(Q,0),Se=M-de,ye=W-he,Le=0,Oe=de,Ne=0,Ze=he,$e=0,_t=Se,xt=0,jt=ye;if(w.content&&f){var kt=w.content;Le=Ab(Z,0,kt[0]),Ne=Ab(Y,0,kt[1]),Oe=Ab(Z,kt[0],kt[2]),Ze=Ab(Y,kt[1],kt[3]),$e=kt[0]-Le,xt=kt[1]-Ne,_t=kt[2]-kt[0]-Oe,jt=kt[3]-kt[1]-Ze}var aa=function(oi,ia,mi,ln){var In=Sb(oi.stretch-Le,Oe,P,o.left),bn=Tb(oi.fixed-$e,_t,oi.stretch,de),un=Sb(ia.stretch-Ne,Ze,N,o.top),Cn=Tb(ia.fixed-xt,jt,ia.stretch,he),nr=Sb(mi.stretch-Le,Oe,P,o.left),rr=Tb(mi.fixed-$e,_t,mi.stretch,de),jr=Sb(ln.stretch-Ne,Ze,N,o.top),fr=Tb(ln.fixed-xt,jt,ln.stretch,he),Jr=new g(In,un),Ln=new g(nr,un),yr=new g(nr,jr),Qa=new g(In,jr),Pi=new g(bn/A,Cn/A),Ci=new g(rr/A,fr/A),di=u*Math.PI/180;if(di){var us=Math.sin(di),Br=Math.cos(di),Qi=[Br,-us,us,Br];Jr._matMult(Qi),Ln._matMult(Qi),Qa._matMult(Qi),yr._matMult(Qi)}var Nn=oi.stretch+oi.fixed,Fr=ia.stretch+ia.fixed;return{tl:Jr,tr:Ln,bl:Qa,br:yr,tex:{x:w.paddedRect.x+1+Nn,y:w.paddedRect.y+1+Fr,w:mi.stretch+mi.fixed-Nn,h:ln.stretch+ln.fixed-Fr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Pi,pixelOffsetBR:Ci,minFontScaleX:_t/A/P,minFontScaleY:jt/A/N,isSDF:d}};if(f&&(w.stretchX||w.stretchY))for(var Wt=hE(Z,Se,de),Fa=hE(Y,ye,he),ha=0;ha<Wt.length-1;ha++)for(var Ut=Wt[ha],za=Wt[ha+1],Ma=0;Ma<Fa.length-1;Ma++)x.push(aa(Ut,Fa[Ma],za,Fa[Ma+1]));else x.push(aa({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:W+1}));return x}function Ab(o,u,d){for(var f=0,x=0,w=o;x<w.length;x+=1){var A=w[x];f+=Math.max(u,Math.min(d,A[1]))-Math.max(u,Math.min(d,A[0]))}return f}function hE(o,u,d){for(var f=[{fixed:-1,stretch:0}],x=0,w=o;x<w.length;x+=1){var A=w[x],M=A[0],W=A[1],P=f[f.length-1];f.push({fixed:M-P.stretch,stretch:P.stretch}),f.push({fixed:M-P.stretch,stretch:P.stretch+(W-M)})}return f.push({fixed:u+1,stretch:d}),f}function Sb(o,u,d,f){return o/u*d+f}function Tb(o,u,d,f){return o-u*d/f}var Eb=function(o,u,d,f,x,w,A,M,W,P){if(this.boxStartIndex=o.length,W){var N=w.top,Z=w.bottom,Y=w.collisionPadding;Y&&(N-=Y[1],Z+=Y[3]);var Q=Z-N;Q>0&&(Q=Math.max(10,Q),this.circleDiameter=Q)}else{var de=w.top*A-M,he=w.bottom*A+M,Se=w.left*A-M,ye=w.right*A+M,Le=w.collisionPadding;if(Le&&(Se-=Le[0]*A,de-=Le[1]*A,ye+=Le[2]*A,he+=Le[3]*A),P){var Oe=new g(Se,de),Ne=new g(ye,de),Ze=new g(Se,he),$e=new g(ye,he),_t=P*Math.PI/180;Oe._rotate(_t),Ne._rotate(_t),Ze._rotate(_t),$e._rotate(_t),Se=Math.min(Oe.x,Ne.x,Ze.x,$e.x),ye=Math.max(Oe.x,Ne.x,Ze.x,$e.x),de=Math.min(Oe.y,Ne.y,Ze.y,$e.y),he=Math.max(Oe.y,Ne.y,Ze.y,$e.y)}o.emplaceBack(u.x,u.y,Se,de,ye,he,d,f,x)}this.boxEndIndex=o.length},sg=function(o,u){if(o===void 0&&(o=[]),u===void 0&&(u=iN),this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(var d=(this.length>>1)-1;d>=0;d--)this._down(d)};function iN(o,u){return o<u?-1:o>u?1:0}function nN(o,u,d){u===void 0&&(u=1),d===void 0&&(d=!1);for(var f=1/0,x=1/0,w=-1/0,A=-1/0,M=o[0],W=0;W<M.length;W++){var P=M[W];(!W||P.x<f)&&(f=P.x),(!W||P.y<x)&&(x=P.y),(!W||P.x>w)&&(w=P.x),(!W||P.y>A)&&(A=P.y)}var N=Math.min(w-f,A-x),Z=N/2,Y=new sg([],rN);if(N===0)return new g(f,x);for(var Q=f;Q<w;Q+=N)for(var de=x;de<A;de+=N)Y.push(new og(Q+Z,de+Z,Z,o));for(var he=function(Le){for(var Oe=0,Ne=0,Ze=0,$e=Le[0],_t=0,xt=$e.length,jt=xt-1;_t<xt;jt=_t++){var kt=$e[_t],aa=$e[jt],Wt=kt.x*aa.y-aa.x*kt.y;Ne+=(kt.x+aa.x)*Wt,Ze+=(kt.y+aa.y)*Wt,Oe+=3*Wt}return new og(Ne/Oe,Ze/Oe,0,Le)}(o),Se=Y.length;Y.length;){var ye=Y.pop();(ye.d>he.d||!he.d)&&(he=ye,d&&console.log("found best %d after %d probes",Math.round(1e4*ye.d)/1e4,Se)),ye.max-he.d<=u||(Y.push(new og(ye.p.x-(Z=ye.h/2),ye.p.y-Z,Z,o)),Y.push(new og(ye.p.x+Z,ye.p.y-Z,Z,o)),Y.push(new og(ye.p.x-Z,ye.p.y+Z,Z,o)),Y.push(new og(ye.p.x+Z,ye.p.y+Z,Z,o)),Se+=4)}return d&&(console.log("num probes: "+Se),console.log("best distance: "+he.d)),he.p}function rN(o,u){return u.max-o.max}function og(o,u,d,f){this.p=new g(o,u),this.h=d,this.d=function(x,w){for(var A=!1,M=1/0,W=0;W<w.length;W++)for(var P=w[W],N=0,Z=P.length,Y=Z-1;N<Z;Y=N++){var Q=P[N],de=P[Y];Q.y>x.y!=de.y>x.y&&x.x<(de.x-Q.x)*(x.y-Q.y)/(de.y-Q.y)+Q.x&&(A=!A),M=Math.min(M,Nd(x,Q,de))}return(A?1:-1)*Math.sqrt(M)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}sg.prototype.push=function(o){this.data.push(o),this.length++,this._up(this.length-1)},sg.prototype.pop=function(){if(this.length!==0){var o=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),o}},sg.prototype.peek=function(){return this.data[0]},sg.prototype._up=function(o){for(var u=this.data,d=this.compare,f=u[o];o>0;){var x=o-1>>1,w=u[x];if(d(f,w)>=0)break;u[o]=w,o=x}u[o]=f},sg.prototype._down=function(o){for(var u=this.data,d=this.compare,f=this.length>>1,x=u[o];o<f;){var w=1+(o<<1),A=u[w],M=w+1;if(M<this.length&&d(u[M],A)<0&&(w=M,A=u[M]),d(A,x)>=0)break;u[o]=A,o=w}u[o]=x};var BI=Number.POSITIVE_INFINITY;function _E(o,u){return u[1]!==BI?function(d,f,x){var w=0,A=0;switch(f=Math.abs(f),x=Math.abs(x),d){case"top-right":case"top-left":case"top":A=x-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-x}switch(d){case"top-right":case"bottom-right":case"right":w=-f;break;case"top-left":case"bottom-left":case"left":w=f}return[w,A]}(o,u[0],u[1]):function(d,f){var x=0,w=0;f<0&&(f=0);var A=f/Math.sqrt(2);switch(d){case"top-right":case"top-left":w=A-7;break;case"bottom-right":case"bottom-left":w=7-A;break;case"bottom":w=7-f;break;case"top":w=f-7}switch(d){case"top-right":case"bottom-right":x=-A;break;case"top-left":case"bottom-left":x=A;break;case"left":x=f;break;case"right":x=-f}return[x,w]}(o,u[0])}function FI(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function mE(o,u,d,f,x,w,A,M,W,P,N,Z,Y,Q,de){var he=function(Ne,Ze,$e,_t,xt,jt,kt,aa){for(var Wt=_t.layout.get("text-rotate").evaluate(jt,{})*Math.PI/180,Fa=[],ha=0,Ut=Ze.positionedLines;ha<Ut.length;ha+=1)for(var za=Ut[ha],Ma=0,oi=za.positionedGlyphs;Ma<oi.length;Ma+=1){var ia=oi[Ma];if(ia.rect){var mi=ia.rect||{},ln=4,In=!0,bn=1,un=0,Cn=(xt||aa)&&ia.vertical,nr=ia.metrics.advance*ia.scale/2;if(aa&&Ze.verticalizable&&(un=za.lineOffset/2-(ia.imageName?-(24-ia.metrics.width*ia.scale)/2:24*(ia.scale-1))),ia.imageName){var rr=kt[ia.imageName];In=rr.sdf,ln=1/(bn=rr.pixelRatio)}var jr=xt?[ia.x+nr,ia.y]:[0,0],fr=xt?[0,0]:[ia.x+nr+$e[0],ia.y+$e[1]-un],Jr=[0,0];Cn&&(Jr=fr,fr=[0,0]);var Ln=(ia.metrics.left-ln)*ia.scale-nr+fr[0],yr=(-ia.metrics.top-ln)*ia.scale+fr[1],Qa=Ln+mi.w*ia.scale/bn,Pi=yr+mi.h*ia.scale/bn,Ci=new g(Ln,yr),di=new g(Qa,yr),us=new g(Ln,Pi),Br=new g(Qa,Pi);if(Cn){var Qi=new g(-nr,nr- -17),Nn=-Math.PI/2,Fr=12-nr,gi=new g(22-Fr,-(ia.imageName?Fr:0)),Ru=new(Function.prototype.bind.apply(g,[null].concat(Jr)));Ci._rotateAround(Nn,Qi)._add(gi)._add(Ru),di._rotateAround(Nn,Qi)._add(gi)._add(Ru),us._rotateAround(Nn,Qi)._add(gi)._add(Ru),Br._rotateAround(Nn,Qi)._add(gi)._add(Ru)}if(Wt){var fo=Math.sin(Wt),ku=Math.cos(Wt),Rn=[ku,-fo,fo,ku];Ci._matMult(Rn),di._matMult(Rn),us._matMult(Rn),Br._matMult(Rn)}var Wu=new g(0,0),_l=new g(0,0);Fa.push({tl:Ci,tr:di,bl:us,br:Br,tex:mi,writingMode:Ze.writingMode,glyphOffset:jr,sectionIndex:ia.sectionIndex,isSDF:In,pixelOffsetTL:Wu,pixelOffsetBR:_l,minFontScaleX:0,minFontScaleY:0})}}return Fa}(0,d,M,x,w,A,f,o.allowVerticalPlacement),Se=o.textSizeData,ye=null;Se.kind==="source"?(ye=[128*x.layout.get("text-size").evaluate(A,{})])[0]>32640&&be(o.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):Se.kind==="composite"&&((ye=[128*Q.compositeTextSizes[0].evaluate(A,{},de),128*Q.compositeTextSizes[1].evaluate(A,{},de)])[0]>32640||ye[1]>32640)&&be(o.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),o.addSymbols(o.text,he,ye,M,w,A,P,u,W.lineStartIndex,W.lineLength,Y,de);for(var Le=0,Oe=N;Le<Oe.length;Le+=1)Z[Oe[Le]]=o.text.placedSymbolArray.length-1;return 4*he.length}function gE(o){for(var u in o)return o[u];return null}function sN(o,u,d,f){var x=o.compareText;if(u in x){for(var w=x[u],A=w.length-1;A>=0;A--)if(f.dist(w[A])<d)return!0}else x[u]=[];return x[u].push(f),!1}var oN=tg.VectorTileFeature.types,lN=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Mb(o,u,d,f,x,w,A,M,W,P,N,Z,Y){var Q=M?Math.min(32640,Math.round(M[0])):0,de=M?Math.min(32640,Math.round(M[1])):0;o.emplaceBack(u,d,Math.round(32*f),Math.round(32*x),w,A,(Q<<1)+(W?1:0),de,16*P,16*N,256*Z,256*Y)}function NI(o,u,d){o.emplaceBack(u.x,u.y,d),o.emplaceBack(u.x,u.y,d),o.emplaceBack(u.x,u.y,d),o.emplaceBack(u.x,u.y,d)}function uN(o){for(var u=0,d=o.sections;u<d.length;u+=1)if(Um(d[u].text))return!0;return!1}var lg=function(o){this.layoutVertexArray=new Km,this.indexArray=new Au,this.programConfigurations=o,this.segments=new ee,this.dynamicLayoutVertexArray=new Pd,this.opacityVertexArray=new c_,this.placedSymbolArray=new y};lg.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},lg.prototype.upload=function(o,u,d,f){this.isEmpty()||(d&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,OF.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,PF.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,lN,!0),this.opacityVertexBuffer.itemSize=1),(d||f)&&this.programConfigurations.upload(o))},lg.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Nt("SymbolBuffers",lg);var jf=function(o,u,d){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new d,this.segments=new ee,this.collisionVertexArray=new Ff};jf.prototype.upload=function(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,BF.members,!0)},jf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Nt("CollisionBuffers",jf);var Ri=function(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(function(w){return w.id}),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Xs([]),this.placementViewportMatrix=Xs([]);var u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=PI(this.zoom,u["text-size"]),this.iconSizeData=PI(this.zoom,u["icon-size"]);var d=this.layers[0].layout,f=d.get("symbol-sort-key"),x=d.get("symbol-z-order");this.canOverlap=d.get("text-allow-overlap")||d.get("icon-allow-overlap")||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&f.constantOr(1)!==void 0,this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(function(w){return po[w]})),this.stateDependentLayerIds=this.layers.filter(function(w){return w.isStateDependent()}).map(function(w){return w.id}),this.sourceID=o.sourceID};Ri.prototype.createArrays=function(){this.text=new lg(new ca(this.layers,this.zoom,function(o){return/^text/.test(o)})),this.icon=new lg(new ca(this.layers,this.zoom,function(o){return/^icon/.test(o)})),this.glyphOffsetArray=new E,this.lineVertexArray=new k,this.symbolInstances=new T},Ri.prototype.calculateGlyphDependencies=function(o,u,d,f,x){for(var w=0;w<o.length;w++)if(u[o.charCodeAt(w)]=!0,(d||f)&&x){var A=Yf[o.charAt(w)];A&&(u[A.charCodeAt(0)]=!0)}},Ri.prototype.populate=function(o,u,d){var f=this.layers[0],x=f.layout,w=x.get("text-font"),A=x.get("text-field"),M=x.get("icon-image"),W=(A.value.kind!=="constant"||A.value.value instanceof hr&&!A.value.value.isEmpty()||A.value.value.toString().length>0)&&(w.value.kind!=="constant"||w.value.value.length>0),P=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,N=x.get("symbol-sort-key");if(this.features=[],W||P){for(var Z=u.iconDependencies,Y=u.glyphDependencies,Q=u.availableImages,de=new Ya(this.zoom),he=0,Se=o;he<Se.length;he+=1){var ye=Se[he],Le=ye.feature,Oe=ye.id,Ne=ye.index,Ze=ye.sourceLayerIndex,$e=f._featureFilter.needGeometry,_t=Mn(Le,$e);if(f._featureFilter.filter(de,_t,d)){$e||(_t.geometry=yn(Le));var xt=void 0;if(W){var jt=f.getValueAndResolveTokens("text-field",_t,d,Q),kt=hr.factory(jt);uN(kt)&&(this.hasRTLText=!0),(!this.hasRTLText||Gf()==="unavailable"||this.hasRTLText&&Us.isParsed())&&(xt=NF(kt,f,_t))}var aa=void 0;if(P){var Wt=f.getValueAndResolveTokens("icon-image",_t,d,Q);aa=Wt instanceof rs?Wt:rs.fromString(Wt)}if(xt||aa){var Fa=this.sortFeaturesByKey?N.evaluate(_t,{},d):void 0;if(this.features.push({id:Oe,text:xt,icon:aa,index:Ne,sourceLayerIndex:Ze,geometry:_t.geometry,properties:Le.properties,type:oN[Le.type],sortKey:Fa}),aa&&(Z[aa.name]=!0),xt){var ha=w.evaluate(_t,{},d).join(","),Ut=x.get("text-rotation-alignment")==="map"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(po.vertical)>=0;for(var za=0,Ma=xt.sections;za<Ma.length;za+=1){var oi=Ma[za];if(oi.image)Z[oi.image.name]=!0;else{var ia=Rf(xt.toString()),mi=oi.fontStack||ha,ln=Y[mi]=Y[mi]||{};this.calculateGlyphDependencies(oi.text,ln,Ut,this.allowVerticalPlacement,ia)}}}}}}x.get("symbol-placement")==="line"&&(this.features=function(In){var bn={},un={},Cn=[],nr=0;function rr(Qi){Cn.push(In[Qi]),nr++}function jr(Qi,Nn,Fr){var gi=un[Qi];return delete un[Qi],un[Nn]=gi,Cn[gi].geometry[0].pop(),Cn[gi].geometry[0]=Cn[gi].geometry[0].concat(Fr[0]),gi}function fr(Qi,Nn,Fr){var gi=bn[Nn];return delete bn[Nn],bn[Qi]=gi,Cn[gi].geometry[0].shift(),Cn[gi].geometry[0]=Fr[0].concat(Cn[gi].geometry[0]),gi}function Jr(Qi,Nn,Fr){var gi=Fr?Nn[0][Nn[0].length-1]:Nn[0][0];return Qi+":"+gi.x+":"+gi.y}for(var Ln=0;Ln<In.length;Ln++){var yr=In[Ln],Qa=yr.geometry,Pi=yr.text?yr.text.toString():null;if(Pi){var Ci=Jr(Pi,Qa),di=Jr(Pi,Qa,!0);if(Ci in un&&di in bn&&un[Ci]!==bn[di]){var us=fr(Ci,di,Qa),Br=jr(Ci,di,Cn[us].geometry);delete bn[Ci],delete un[di],un[Jr(Pi,Cn[Br].geometry,!0)]=Br,Cn[us].geometry=null}else Ci in un?jr(Ci,di,Qa):di in bn?fr(Ci,di,Qa):(rr(Ln),bn[Ci]=nr-1,un[di]=nr-1)}else rr(Ln)}return Cn.filter(function(Qi){return Qi.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(In,bn){return In.sortKey-bn.sortKey})}},Ri.prototype.update=function(o,u,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,u,this.layers,d),this.icon.programConfigurations.updatePaintArrays(o,u,this.layers,d))},Ri.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ri.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ri.prototype.upload=function(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ri.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ri.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ri.prototype.addToLineVertexArray=function(o,u){var d=this.lineVertexArray.length;if(o.segment!==void 0){for(var f=o.dist(u[o.segment+1]),x=o.dist(u[o.segment]),w={},A=o.segment+1;A<u.length;A++)w[A]={x:u[A].x,y:u[A].y,tileUnitDistanceFromAnchor:f},A<u.length-1&&(f+=u[A+1].dist(u[A]));for(var M=o.segment||0;M>=0;M--)w[M]={x:u[M].x,y:u[M].y,tileUnitDistanceFromAnchor:x},M>0&&(x+=u[M-1].dist(u[M]));for(var W=0;W<u.length;W++){var P=w[W];this.lineVertexArray.emplaceBack(P.x,P.y,P.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}},Ri.prototype.addSymbols=function(o,u,d,f,x,w,A,M,W,P,N,Z){for(var Y=o.indexArray,Q=o.layoutVertexArray,de=o.segments.prepareSegment(4*u.length,Q,Y,this.canOverlap?w.sortKey:void 0),he=this.glyphOffsetArray.length,Se=de.vertexLength,ye=this.allowVerticalPlacement&&A===po.vertical?Math.PI/2:0,Le=w.text&&w.text.sections,Oe=0;Oe<u.length;Oe++){var Ne=u[Oe],Ze=Ne.tl,$e=Ne.tr,_t=Ne.bl,xt=Ne.br,jt=Ne.tex,kt=Ne.pixelOffsetTL,aa=Ne.pixelOffsetBR,Wt=Ne.minFontScaleX,Fa=Ne.minFontScaleY,ha=Ne.glyphOffset,Ut=Ne.isSDF,za=Ne.sectionIndex,Ma=de.vertexLength,oi=ha[1];Mb(Q,M.x,M.y,Ze.x,oi+Ze.y,jt.x,jt.y,d,Ut,kt.x,kt.y,Wt,Fa),Mb(Q,M.x,M.y,$e.x,oi+$e.y,jt.x+jt.w,jt.y,d,Ut,aa.x,kt.y,Wt,Fa),Mb(Q,M.x,M.y,_t.x,oi+_t.y,jt.x,jt.y+jt.h,d,Ut,kt.x,aa.y,Wt,Fa),Mb(Q,M.x,M.y,xt.x,oi+xt.y,jt.x+jt.w,jt.y+jt.h,d,Ut,aa.x,aa.y,Wt,Fa),NI(o.dynamicLayoutVertexArray,M,ye),Y.emplaceBack(Ma,Ma+1,Ma+2),Y.emplaceBack(Ma+1,Ma+2,Ma+3),de.vertexLength+=4,de.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ha[0]),Oe!==u.length-1&&za===u[Oe+1].sectionIndex||o.programConfigurations.populatePaintArrays(Q.length,w,w.index,{},Z,Le&&Le[za])}o.placedSymbolArray.emplaceBack(M.x,M.y,he,this.glyphOffsetArray.length-he,Se,W,P,M.segment,d?d[0]:0,d?d[1]:0,f[0],f[1],A,0,!1,0,N)},Ri.prototype._addCollisionDebugVertex=function(o,u,d,f,x,w){return u.emplaceBack(0,0),o.emplaceBack(d.x,d.y,f,x,Math.round(w.x),Math.round(w.y))},Ri.prototype.addCollisionDebugVertices=function(o,u,d,f,x,w,A){var M=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),W=M.vertexLength,P=x.layoutVertexArray,N=x.collisionVertexArray,Z=A.anchorX,Y=A.anchorY;this._addCollisionDebugVertex(P,N,w,Z,Y,new g(o,u)),this._addCollisionDebugVertex(P,N,w,Z,Y,new g(d,u)),this._addCollisionDebugVertex(P,N,w,Z,Y,new g(d,f)),this._addCollisionDebugVertex(P,N,w,Z,Y,new g(o,f)),M.vertexLength+=4;var Q=x.indexArray;Q.emplaceBack(W,W+1),Q.emplaceBack(W+1,W+2),Q.emplaceBack(W+2,W+3),Q.emplaceBack(W+3,W),M.primitiveLength+=4},Ri.prototype.addDebugCollisionBoxes=function(o,u,d,f){for(var x=o;x<u;x++){var w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,f?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,d)}},Ri.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new jf(Bd,Y5.members,d_),this.iconCollisionBox=new jf(Bd,Y5.members,d_);for(var o=0;o<this.symbolInstances.length;o++){var u=this.symbolInstances.get(o);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}},Ri.prototype._deserializeCollisionBoxesForSymbol=function(o,u,d,f,x,w,A,M,W){for(var P={},N=u;N<d;N++){var Z=o.get(N);P.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},P.textFeatureIndex=Z.featureIndex;break}for(var Y=f;Y<x;Y++){var Q=o.get(Y);P.verticalTextBox={x1:Q.x1,y1:Q.y1,x2:Q.x2,y2:Q.y2,anchorPointX:Q.anchorPointX,anchorPointY:Q.anchorPointY},P.verticalTextFeatureIndex=Q.featureIndex;break}for(var de=w;de<A;de++){var he=o.get(de);P.iconBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},P.iconFeatureIndex=he.featureIndex;break}for(var Se=M;Se<W;Se++){var ye=o.get(Se);P.verticalIconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},P.verticalIconFeatureIndex=ye.featureIndex;break}return P},Ri.prototype.deserializeCollisionBoxes=function(o){this.collisionArrays=[];for(var u=0;u<this.symbolInstances.length;u++){var d=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}},Ri.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ri.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ri.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ri.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ri.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ri.prototype.addIndicesForPlacedSymbol=function(o,u){for(var d=o.placedSymbolArray.get(u),f=d.vertexStartIndex+4*d.numGlyphs,x=d.vertexStartIndex;x<f;x+=4)o.indexArray.emplaceBack(x,x+1,x+2),o.indexArray.emplaceBack(x+1,x+2,x+3)},Ri.prototype.getSortedSymbolIndexes=function(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var u=Math.sin(o),d=Math.cos(o),f=[],x=[],w=[],A=0;A<this.symbolInstances.length;++A){w.push(A);var M=this.symbolInstances.get(A);f.push(0|Math.round(u*M.anchorX+d*M.anchorY)),x.push(M.featureIndex)}return w.sort(function(W,P){return f[W]-f[P]||x[P]-x[W]}),w},Ri.prototype.addToSortKeyRanges=function(o,u){var d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===u?d.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})},Ri.prototype.sortFeatures=function(o){var u=this;if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var d=0,f=this.symbolInstanceIndexes;d<f.length;d+=1){var x=this.symbolInstances.get(f[d]);this.featureSortOrder.push(x.featureIndex),[x.rightJustifiedTextSymbolIndex,x.centerJustifiedTextSymbolIndex,x.leftJustifiedTextSymbolIndex].forEach(function(w,A,M){w>=0&&M.indexOf(w)===A&&u.addIndicesForPlacedSymbol(u.text,w)}),x.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,x.verticalPlacedTextSymbolIndex),x.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.placedIconSymbolIndex),x.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,x.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Nt("SymbolBucket",Ri,{omit:["layers","collisionBoxArray","features","compareText"]}),Ri.MAX_GLYPHS=65535,Ri.addDynamicAttributes=NI;var cN=new Tr({"symbol-placement":new ea(J.layout_symbol["symbol-placement"]),"symbol-spacing":new ea(J.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ea(J.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zt(J.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ea(J.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ea(J.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ea(J.layout_symbol["icon-ignore-placement"]),"icon-optional":new ea(J.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ea(J.layout_symbol["icon-rotation-alignment"]),"icon-size":new zt(J.layout_symbol["icon-size"]),"icon-text-fit":new ea(J.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ea(J.layout_symbol["icon-text-fit-padding"]),"icon-image":new zt(J.layout_symbol["icon-image"]),"icon-rotate":new zt(J.layout_symbol["icon-rotate"]),"icon-padding":new ea(J.layout_symbol["icon-padding"]),"icon-keep-upright":new ea(J.layout_symbol["icon-keep-upright"]),"icon-offset":new zt(J.layout_symbol["icon-offset"]),"icon-anchor":new zt(J.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ea(J.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ea(J.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ea(J.layout_symbol["text-rotation-alignment"]),"text-field":new zt(J.layout_symbol["text-field"]),"text-font":new zt(J.layout_symbol["text-font"]),"text-size":new zt(J.layout_symbol["text-size"]),"text-max-width":new zt(J.layout_symbol["text-max-width"]),"text-line-height":new ea(J.layout_symbol["text-line-height"]),"text-letter-spacing":new zt(J.layout_symbol["text-letter-spacing"]),"text-justify":new zt(J.layout_symbol["text-justify"]),"text-radial-offset":new zt(J.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ea(J.layout_symbol["text-variable-anchor"]),"text-anchor":new zt(J.layout_symbol["text-anchor"]),"text-max-angle":new ea(J.layout_symbol["text-max-angle"]),"text-writing-mode":new ea(J.layout_symbol["text-writing-mode"]),"text-rotate":new zt(J.layout_symbol["text-rotate"]),"text-padding":new ea(J.layout_symbol["text-padding"]),"text-keep-upright":new ea(J.layout_symbol["text-keep-upright"]),"text-transform":new zt(J.layout_symbol["text-transform"]),"text-offset":new zt(J.layout_symbol["text-offset"]),"text-allow-overlap":new ea(J.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ea(J.layout_symbol["text-ignore-placement"]),"text-optional":new ea(J.layout_symbol["text-optional"])}),DI={paint:new Tr({"icon-opacity":new zt(J.paint_symbol["icon-opacity"]),"icon-color":new zt(J.paint_symbol["icon-color"]),"icon-halo-color":new zt(J.paint_symbol["icon-halo-color"]),"icon-halo-width":new zt(J.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zt(J.paint_symbol["icon-halo-blur"]),"icon-translate":new ea(J.paint_symbol["icon-translate"]),"icon-translate-anchor":new ea(J.paint_symbol["icon-translate-anchor"]),"text-opacity":new zt(J.paint_symbol["text-opacity"]),"text-color":new zt(J.paint_symbol["text-color"],{runtimeType:At,getOverride:function(o){return o.textColor},hasOverride:function(o){return!!o.textColor}}),"text-halo-color":new zt(J.paint_symbol["text-halo-color"]),"text-halo-width":new zt(J.paint_symbol["text-halo-width"]),"text-halo-blur":new zt(J.paint_symbol["text-halo-blur"]),"text-translate":new ea(J.paint_symbol["text-translate"]),"text-translate-anchor":new ea(J.paint_symbol["text-translate-anchor"])}),layout:cN},ug=function(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Et,this.defaultValue=o};ug.prototype.evaluate=function(o){if(o.formattedSection){var u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default},ug.prototype.eachChild=function(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)},ug.prototype.outputDefined=function(){return!1},ug.prototype.serialize=function(){return null},Nt("FormatSectionOverride",ug,{omit:["defaultValue"]});var dN=function(o){function u(d){o.call(this,d,DI)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.recalculate=function(d,f){if(o.prototype.recalculate.call(this,d,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var x=this.layout.get("text-writing-mode");if(x){for(var w=[],A=0,M=x;A<M.length;A+=1){var W=M[A];w.indexOf(W)<0&&w.push(W)}this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},u.prototype.getValueAndResolveTokens=function(d,f,x,w){var A=this.layout.get(d).evaluate(f,{},x,w),M=this._unevaluatedLayout._values[d];return M.isDataDriven()||$h(M.value)||!A?A:function(W,P){return P.replace(/{([^{}]+)}/g,function(N,Z){return Z in W?String(W[Z]):""})}(f.properties,A)},u.prototype.createBucket=function(d){return new Ri(d)},u.prototype.queryRadius=function(){return 0},u.prototype.queryIntersectsFeature=function(){return!1},u.prototype._setPaintOverrides=function(){for(var d=0,f=DI.paint.overridableProperties;d<f.length;d+=1){var x=f[d];if(u.hasPaintOverride(this.layout,x)){var w,A=this.paint.get(x),M=new ug(A),W=new Ld(M,A.property.specification);w=A.value.kind==="constant"||A.value.kind==="source"?new e_("source",W):new Rd("composite",W,A.value.zoomStops,A.value._interpolationType),this.paint._values[x]=new Hr(A.property,w,A.parameters)}}},u.prototype._handleOverridablePaintPropertyUpdate=function(d,f,x){return!(!this.layout||f.isDataDriven()||x.isDataDriven())&&u.hasPaintOverride(this.layout,d)},u.hasPaintOverride=function(d,f){var x=d.get("text-field"),w=DI.paint.properties[f],A=!1,M=function(N){for(var Z=0,Y=N;Z<Y.length;Z+=1)if(w.overrides&&w.overrides.hasOverride(Y[Z]))return void(A=!0)};if(x.value.kind==="constant"&&x.value.value instanceof hr)M(x.value.value.sections);else if(x.value.kind==="source"){var W=function(N){A||(N instanceof Ur&&En(N.value)===at?M(N.value.sections):N instanceof Fo?M(N.sections):N.eachChild(W))},P=x.value;P._styleExpression&&W(P._styleExpression.expression)}return A},u}(ul),hN={paint:new Tr({"background-color":new ea(J.paint_background["background-color"]),"background-pattern":new Yr(J.paint_background["background-pattern"]),"background-opacity":new ea(J.paint_background["background-opacity"])})},_N=function(o){function u(d){o.call(this,d,hN)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u}(ul),mN={paint:new Tr({"raster-opacity":new ea(J.paint_raster["raster-opacity"]),"raster-hue-rotate":new ea(J.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ea(J.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ea(J.paint_raster["raster-brightness-max"]),"raster-saturation":new ea(J.paint_raster["raster-saturation"]),"raster-contrast":new ea(J.paint_raster["raster-contrast"]),"raster-resampling":new ea(J.paint_raster["raster-resampling"]),"raster-fade-duration":new ea(J.paint_raster["raster-fade-duration"])})},gN=function(o){function u(d){o.call(this,d,mN)}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u}(ul),pN=function(o){function u(d){o.call(this,d,{}),this.implementation=d}return o&&(u.__proto__=o),(u.prototype=Object.create(o&&o.prototype)).constructor=u,u.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},u.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},u.prototype.recalculate=function(){},u.prototype.updateTransitions=function(){},u.prototype.hasTransition=function(){},u.prototype.serialize=function(){},u.prototype.onAdd=function(d){this.implementation.onAdd&&this.implementation.onAdd(d,d.painter.context.gl)},u.prototype.onRemove=function(d){this.implementation.onRemove&&this.implementation.onRemove(d,d.painter.context.gl)},u}(ul),fN={circle:CI,heatmap:eF,hillshade:aF,fill:bF,"fill-extrusion":EF,line:GF,symbol:dN,background:_N,raster:gN},pE=v.HTMLImageElement,fE=v.HTMLCanvasElement,yE=v.HTMLVideoElement,bE=v.ImageData,Lb=v.ImageBitmap,f_=function(o,u,d,f){this.context=o,this.format=d,this.texture=o.gl.createTexture(),this.update(u,f)};f_.prototype.update=function(o,u,d){var f=o.width,x=o.height,w=!(this.size&&this.size[0]===f&&this.size[1]===x||d),A=this.context,M=A.gl;if(this.useMipmap=!!(u&&u.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),A.pixelStoreUnpackFlipY.set(!1),A.pixelStoreUnpack.set(1),A.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!u||u.premultiply!==!1)),w)this.size=[f,x],o instanceof pE||o instanceof fE||o instanceof yE||o instanceof bE||Lb&&o instanceof Lb?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,o):M.texImage2D(M.TEXTURE_2D,0,this.format,f,x,0,this.format,M.UNSIGNED_BYTE,o.data);else{var W=d||{x:0,y:0},P=W.x,N=W.y;o instanceof pE||o instanceof fE||o instanceof yE||o instanceof bE||Lb&&o instanceof Lb?M.texSubImage2D(M.TEXTURE_2D,0,P,N,M.RGBA,M.UNSIGNED_BYTE,o):M.texSubImage2D(M.TEXTURE_2D,0,P,N,f,x,M.RGBA,M.UNSIGNED_BYTE,o.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)},f_.prototype.bind=function(o,u,d){var f=this.context.gl;f.bindTexture(f.TEXTURE_2D,this.texture),d!==f.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=f.LINEAR),o!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,o),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,d||o),this.filter=o),u!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,u),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,u),this.wrap=u)},f_.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},f_.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var VI=function(o){var u=this;this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){u._triggered=!1,u._callback()})};VI.prototype.trigger=function(){var o=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){o._triggered=!1,o._callback()},0))},VI.prototype.remove=function(){delete this._channel,this._callback=function(){}};var cg=function(o,u,d){this.target=o,this.parent=u,this.mapId=d,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},re(["receive","process"],this),this.invoker=new VI(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Me()?o:v};function vE(o,u,d){var f=2*Math.PI*6378137/256/Math.pow(2,d);return[o*f-2*Math.PI*6378137/2,u*f-2*Math.PI*6378137/2]}cg.prototype.send=function(o,u,d,f,x){var w=this;x===void 0&&(x=!1);var A=Math.round(1e18*Math.random()).toString(36).substring(0,10);d&&(this.callbacks[A]=d);var M=ut(this.globalScope)?void 0:[];return this.target.postMessage({id:A,type:o,hasCallback:!!d,targetMapId:f,mustQueue:x,sourceMapId:this.mapId,data:Do(u,M)},M),{cancel:function(){d&&delete w.callbacks[A],w.target.postMessage({id:A,type:"<cancel>",targetMapId:f,sourceMapId:w.mapId})}}},cg.prototype.receive=function(o){var u=o.data,d=u.id;if(d&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){delete this.tasks[d];var f=this.cancelCallbacks[d];delete this.cancelCallbacks[d],f&&f()}else Me()||u.mustQueue?(this.tasks[d]=u,this.taskQueue.push(d),this.invoker.trigger()):this.processTask(d,u)},cg.prototype.process=function(){if(this.taskQueue.length){var o=this.taskQueue.shift(),u=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),u&&this.processTask(o,u)}},cg.prototype.processTask=function(o,u){var d=this;if(u.type==="<response>"){var f=this.callbacks[o];delete this.callbacks[o],f&&(u.error?f(ws(u.error)):f(null,ws(u.data)))}else{var x=!1,w=ut(this.globalScope)?void 0:[],A=u.hasCallback?function(N,Z){x=!0,delete d.cancelCallbacks[o],d.target.postMessage({id:o,type:"<response>",sourceMapId:d.mapId,error:N?Do(N):null,data:Do(Z,w)},w)}:function(N){x=!0},M=null,W=ws(u.data);if(this.parent[u.type])M=this.parent[u.type](u.sourceMapId,W,A);else if(this.parent.getWorkerSource){var P=u.type.split(".");M=this.parent.getWorkerSource(u.sourceMapId,P[0],W.source)[P[1]](W,A)}else A(new Error("Could not find function "+u.type));!x&&M&&M.cancel&&(this.cancelCallbacks[o]=M.cancel)}},cg.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Hn=function(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):o.length===4?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1]))};Hn.prototype.setNorthEast=function(o){return this._ne=o instanceof on?new on(o.lng,o.lat):on.convert(o),this},Hn.prototype.setSouthWest=function(o){return this._sw=o instanceof on?new on(o.lng,o.lat):on.convert(o),this},Hn.prototype.extend=function(o){var u,d,f=this._sw,x=this._ne;if(o instanceof on)u=o,d=o;else{if(!(o instanceof Hn))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Hn.convert(o)):this.extend(on.convert(o)):this;if(d=o._ne,!(u=o._sw)||!d)return this}return f||x?(f.lng=Math.min(u.lng,f.lng),f.lat=Math.min(u.lat,f.lat),x.lng=Math.max(d.lng,x.lng),x.lat=Math.max(d.lat,x.lat)):(this._sw=new on(u.lng,u.lat),this._ne=new on(d.lng,d.lat)),this},Hn.prototype.getCenter=function(){return new on((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Hn.prototype.getSouthWest=function(){return this._sw},Hn.prototype.getNorthEast=function(){return this._ne},Hn.prototype.getNorthWest=function(){return new on(this.getWest(),this.getNorth())},Hn.prototype.getSouthEast=function(){return new on(this.getEast(),this.getSouth())},Hn.prototype.getWest=function(){return this._sw.lng},Hn.prototype.getSouth=function(){return this._sw.lat},Hn.prototype.getEast=function(){return this._ne.lng},Hn.prototype.getNorth=function(){return this._ne.lat},Hn.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Hn.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Hn.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Hn.prototype.contains=function(o){var u=on.convert(o),d=u.lng,f=u.lat,x=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&x},Hn.convert=function(o){return!o||o instanceof Hn?o:new Hn(o)};var on=function(o,u){if(isNaN(o)||isNaN(u))throw new Error("Invalid LngLat object: ("+o+", "+u+")");if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};on.prototype.wrap=function(){return new on(G(this.lng,-180,180),this.lat)},on.prototype.toArray=function(){return[this.lng,this.lat]},on.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},on.prototype.distanceTo=function(o){var u=Math.PI/180,d=this.lat*u,f=o.lat*u,x=Math.sin(d)*Math.sin(f)+Math.cos(d)*Math.cos(f)*Math.cos((o.lng-this.lng)*u);return 63710088e-1*Math.acos(Math.min(x,1))},on.prototype.toBounds=function(o){o===void 0&&(o=0);var u=360*o/40075017,d=u/Math.cos(Math.PI/180*this.lat);return new Hn(new on(this.lng-d,this.lat-u),new on(this.lng+d,this.lat+u))},on.convert=function(o){if(o instanceof on)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new on(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new on(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var xE=2*Math.PI*63710088e-1;function wE(o){return xE*Math.cos(o*Math.PI/180)}function IE(o){return(180+o)/360}function CE(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function AE(o,u){return o/wE(u)}function ZI(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}var y_=function(o,u,d){d===void 0&&(d=0),this.x=+o,this.y=+u,this.z=+d};y_.fromLngLat=function(o,u){u===void 0&&(u=0);var d=on.convert(o);return new y_(IE(d.lng),CE(d.lat),AE(u,d.lat))},y_.prototype.toLngLat=function(){return new on(360*this.x-180,ZI(this.y))},y_.prototype.toAltitude=function(){return this.z*wE(ZI(this.y))},y_.prototype.meterInMercatorCoordinateUnits=function(){return 1/xE*(o=ZI(this.y),1/Math.cos(o*Math.PI/180));var o};var b_=function(o,u,d){this.z=o,this.x=u,this.y=d,this.key=Jf(0,o,o,u,d)};b_.prototype.equals=function(o){return this.z===o.z&&this.x===o.x&&this.y===o.y},b_.prototype.url=function(o,u){var d,f,x,w,A,M=(f=this.y,x=this.z,w=vE(256*(d=this.x),256*(f=Math.pow(2,x)-f-1),x),A=vE(256*(d+1),256*(f+1),x),w[0]+","+w[1]+","+A[0]+","+A[1]),W=function(P,N,Z){for(var Y,Q="",de=P;de>0;de--)Q+=(N&(Y=1<<de-1)?1:0)+(Z&Y?2:0);return Q}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",W).replace("{bbox-epsg-3857}",M)},b_.prototype.getTilePoint=function(o){var u=Math.pow(2,this.z);return new g(8192*(o.x*u-this.x),8192*(o.y*u-this.y))},b_.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var SE=function(o,u){this.wrap=o,this.canonical=u,this.key=Jf(o,u.z,u.z,u.x,u.y)},Yn=function(o,u,d,f,x){this.overscaledZ=o,this.wrap=u,this.canonical=new b_(d,+f,+x),this.key=Jf(u,o,d,f,x)};function Jf(o,u,d,f,x){(o*=2)<0&&(o=-1*o-1);var w=1<<d;return(w*w*o+w*x+f).toString(36)+d.toString(36)+u.toString(36)}Yn.prototype.equals=function(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)},Yn.prototype.scaledTo=function(o){var u=this.canonical.z-o;return o>this.canonical.z?new Yn(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Yn(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)},Yn.prototype.calculateScaledKey=function(o,u){var d=this.canonical.z-o;return o>this.canonical.z?Jf(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y):Jf(this.wrap*+u,o,o,this.canonical.x>>d,this.canonical.y>>d)},Yn.prototype.isChildOf=function(o){if(o.wrap!==this.wrap)return!1;var u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u},Yn.prototype.children=function(o){if(this.overscaledZ>=o)return[new Yn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var u=this.canonical.z+1,d=2*this.canonical.x,f=2*this.canonical.y;return[new Yn(u,this.wrap,u,d,f),new Yn(u,this.wrap,u,d+1,f),new Yn(u,this.wrap,u,d,f+1),new Yn(u,this.wrap,u,d+1,f+1)]},Yn.prototype.isLessThan=function(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))},Yn.prototype.wrapped=function(){return new Yn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Yn.prototype.unwrapTo=function(o){return new Yn(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)},Yn.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Yn.prototype.toUnwrapped=function(){return new SE(this.wrap,this.canonical)},Yn.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Yn.prototype.getTilePoint=function(o){return this.canonical.getTilePoint(new y_(o.x-this.wrap,o.y))},Nt("CanonicalTileID",b_),Nt("OverscaledTileID",Yn,{omit:["posMatrix"]});var Wc=function(o,u,d){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return be('"'+d+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=u.height;var f=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=d||"mapbox";for(var x=0;x<f;x++)this.data[this._idx(-1,x)]=this.data[this._idx(0,x)],this.data[this._idx(f,x)]=this.data[this._idx(f-1,x)],this.data[this._idx(x,-1)]=this.data[this._idx(x,0)],this.data[this._idx(x,f)]=this.data[this._idx(x,f-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(f,-1)]=this.data[this._idx(f-1,0)],this.data[this._idx(-1,f)]=this.data[this._idx(0,f-1)],this.data[this._idx(f,f)]=this.data[this._idx(f-1,f-1)]};Wc.prototype.get=function(o,u){var d=new Uint8Array(this.data.buffer),f=4*this._idx(o,u);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[f],d[f+1],d[f+2])},Wc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Wc.prototype._idx=function(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)},Wc.prototype._unpackMapbox=function(o,u,d){return(256*o*256+256*u+d)/10-1e4},Wc.prototype._unpackTerrarium=function(o,u,d){return 256*o+u+d/256-32768},Wc.prototype.getPixels=function(){return new Ts({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Wc.prototype.backfillBorder=function(o,u,d){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");var f=u*this.dim,x=u*this.dim+this.dim,w=d*this.dim,A=d*this.dim+this.dim;switch(u){case-1:f=x-1;break;case 1:x=f+1}switch(d){case-1:w=A-1;break;case 1:A=w+1}for(var M=-u*this.dim,W=-d*this.dim,P=w;P<A;P++)for(var N=f;N<x;N++)this.data[this._idx(N,P)]=o.data[this._idx(N+M,P+W)]},Nt("DEMData",Wc);var Rb=function(o){this._stringToNumber={},this._numberToString=[];for(var u=0;u<o.length;u++){var d=o[u];this._stringToNumber[d]=u,this._numberToString[u]=d}};Rb.prototype.encode=function(o){return this._stringToNumber[o]},Rb.prototype.decode=function(o){return this._numberToString[o]};var kb=function(o,u,d,f,x){this.type="Feature",this._vectorTileFeature=o,o._z=u,o._x=d,o._y=f,this.properties=o.properties,this.id=x},zI={geometry:{configurable:!0}};zI.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},zI.geometry.set=function(o){this._geometry=o},kb.prototype.toJSON=function(){var o={geometry:this.geometry};for(var u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(o[u]=this[u]);return o},Object.defineProperties(kb.prototype,zI);var dg=function(){this.state={},this.stateChanges={},this.deletedStates={}};dg.prototype.updateState=function(o,u,d){var f=String(u);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][f]=this.stateChanges[o][f]||{},O(this.stateChanges[o][f],d),this.deletedStates[o]===null)for(var x in this.deletedStates[o]={},this.state[o])x!==f&&(this.deletedStates[o][x]=null);else if(this.deletedStates[o]&&this.deletedStates[o][f]===null)for(var w in this.deletedStates[o][f]={},this.state[o][f])d[w]||(this.deletedStates[o][f][w]=null);else for(var A in d)this.deletedStates[o]&&this.deletedStates[o][f]&&this.deletedStates[o][f][A]===null&&delete this.deletedStates[o][f][A]},dg.prototype.removeFeatureState=function(o,u,d){if(this.deletedStates[o]!==null){var f=String(u);if(this.deletedStates[o]=this.deletedStates[o]||{},d&&u!==void 0)this.deletedStates[o][f]!==null&&(this.deletedStates[o][f]=this.deletedStates[o][f]||{},this.deletedStates[o][f][d]=null);else if(u!==void 0)if(this.stateChanges[o]&&this.stateChanges[o][f])for(d in this.deletedStates[o][f]={},this.stateChanges[o][f])this.deletedStates[o][f][d]=null;else this.deletedStates[o][f]=null;else this.deletedStates[o]=null}},dg.prototype.getState=function(o,u){var d=String(u),f=O({},(this.state[o]||{})[d],(this.stateChanges[o]||{})[d]);if(this.deletedStates[o]===null)return{};if(this.deletedStates[o]){var x=this.deletedStates[o][u];if(x===null)return{};for(var w in x)delete f[w]}return f},dg.prototype.initializeTileState=function(o,u){o.setFeatureState(this.state,u)},dg.prototype.coalesceChanges=function(o,u){var d={};for(var f in this.stateChanges){this.state[f]=this.state[f]||{};var x={};for(var w in this.stateChanges[f])this.state[f][w]||(this.state[f][w]={}),O(this.state[f][w],this.stateChanges[f][w]),x[w]=this.state[f][w];d[f]=x}for(var A in this.deletedStates){this.state[A]=this.state[A]||{};var M={};if(this.deletedStates[A]===null)for(var W in this.state[A])M[W]={},this.state[A][W]={};else for(var P in this.deletedStates[A]){if(this.deletedStates[A][P]===null)this.state[A][P]={};else for(var N=0,Z=Object.keys(this.deletedStates[A][P]);N<Z.length;N+=1)delete this.state[A][P][Z[N]];M[P]=this.state[A][P]}d[A]=d[A]||{},O(d[A],M)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(var Y in o)o[Y].setFeatureState(d,u)};var Gc=function(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Rl(8192,16,0),this.grid3D=new Rl(8192,16,0),this.featureIndexArray=new U,this.promoteId=u};function TE(o,u,d,f,x){return te(o,function(w,A){var M=u instanceof u_?u.get(A):null;return M&&M.evaluate?M.evaluate(d,f,x):M})}function EE(o){for(var u=1/0,d=1/0,f=-1/0,x=-1/0,w=0,A=o;w<A.length;w+=1){var M=A[w];u=Math.min(u,M.x),d=Math.min(d,M.y),f=Math.max(f,M.x),x=Math.max(x,M.y)}return{minX:u,minY:d,maxX:f,maxY:x}}function yN(o,u){return u-o}Gc.prototype.insert=function(o,u,d,f,x,w){var A=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,f,x);for(var M=w?this.grid3D:this.grid,W=0;W<u.length;W++){for(var P=u[W],N=[1/0,1/0,-1/0,-1/0],Z=0;Z<P.length;Z++){var Y=P[Z];N[0]=Math.min(N[0],Y.x),N[1]=Math.min(N[1],Y.y),N[2]=Math.max(N[2],Y.x),N[3]=Math.max(N[3],Y.y)}N[0]<8192&&N[1]<8192&&N[2]>=0&&N[3]>=0&&M.insert(A,N[0],N[1],N[2],N[3])}},Gc.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new tg.VectorTile(new vb(this.rawTileData)).layers,this.sourceLayerCoder=new Rb(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Gc.prototype.query=function(o,u,d,f){var x=this;this.loadVTLayers();for(var w=o.params||{},A=8192/o.tileSize/o.scale,M=Fm(w.filter),W=o.queryGeometry,P=o.queryPadding*A,N=EE(W),Z=this.grid.query(N.minX-P,N.minY-P,N.maxX+P,N.maxY+P),Y=EE(o.cameraQueryGeometry),Q=this.grid3D.query(Y.minX-P,Y.minY-P,Y.maxX+P,Y.maxY+P,function(Ne,Ze,$e,_t){return function(xt,jt,kt,aa,Wt){for(var Fa=0,ha=xt;Fa<ha.length;Fa+=1){var Ut=ha[Fa];if(jt<=Ut.x&&kt<=Ut.y&&aa>=Ut.x&&Wt>=Ut.y)return!0}var za=[new g(jt,kt),new g(jt,Wt),new g(aa,Wt),new g(aa,kt)];if(xt.length>2){for(var Ma=0,oi=za;Ma<oi.length;Ma+=1)if(dl(xt,oi[Ma]))return!0}for(var ia=0;ia<xt.length-1;ia++)if(m_(xt[ia],xt[ia+1],za))return!0;return!1}(o.cameraQueryGeometry,Ne-P,Ze-P,$e+P,_t+P)}),de=0,he=Q;de<he.length;de+=1)Z.push(he[de]);Z.sort(yN);for(var Se,ye={},Le=function(Ne){var Ze=Z[Ne];if(Ze!==Se){Se=Ze;var $e=x.featureIndexArray.get(Ze),_t=null;x.loadMatchingFeature(ye,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,M,w.layers,w.availableImages,u,d,f,function(xt,jt,kt){return _t||(_t=yn(xt)),jt.queryIntersectsFeature(W,xt,kt,_t,x.z,o.transform,A,o.pixelPosMatrix)})}},Oe=0;Oe<Z.length;Oe++)Le(Oe);return ye},Gc.prototype.loadMatchingFeature=function(o,u,d,f,x,w,A,M,W,P,N){var Z=this.bucketLayerIDs[u];if(!w||function(xt,jt){for(var kt=0;kt<xt.length;kt++)if(jt.indexOf(xt[kt])>=0)return!0;return!1}(w,Z)){var Y=this.sourceLayerCoder.decode(d),Q=this.vtLayers[Y].feature(f);if(x.needGeometry){var de=Mn(Q,!0);if(!x.filter(new Ya(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!x.filter(new Ya(this.tileID.overscaledZ),Q))return;for(var he=this.getId(Q,Y),Se=0;Se<Z.length;Se++){var ye=Z[Se];if(!(w&&w.indexOf(ye)<0)){var Le=M[ye];if(Le){var Oe={};he!==void 0&&P&&(Oe=P.getState(Le.sourceLayer||"_geojsonTileLayer",he));var Ne=O({},W[ye]);Ne.paint=TE(Ne.paint,Le.paint,Q,Oe,A),Ne.layout=TE(Ne.layout,Le.layout,Q,Oe,A);var Ze=!N||N(Q,Le,Oe);if(Ze){var $e=new kb(Q,this.z,this.x,this.y,he);$e.layer=Ne;var _t=o[ye];_t===void 0&&(_t=o[ye]=[]),_t.push({featureIndex:f,feature:$e,intersectionZ:Ze})}}}}}},Gc.prototype.lookupSymbolFeatures=function(o,u,d,f,x,w,A,M){var W={};this.loadVTLayers();for(var P=Fm(x),N=0,Z=o;N<Z.length;N+=1)this.loadMatchingFeature(W,d,f,Z[N],P,w,A,M,u);return W},Gc.prototype.hasLayer=function(o){for(var u=0,d=this.bucketLayerIDs;u<d.length;u+=1)for(var f=0,x=d[u];f<x.length;f+=1)if(o===x[f])return!0;return!1},Gc.prototype.getId=function(o,u){var d=o.id;return this.promoteId&&typeof(d=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]])=="boolean"&&(d=Number(d)),d},Nt("FeatureIndex",Gc,{omit:["rawTileData","sourceLayerCoder"]});var pr=function(o,u){this.tileID=o,this.uid=B(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};pr.prototype.registerFadeDuration=function(o){var u=o+this.timeAdded;u<Ni.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)},pr.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},pr.prototype.loadVectorData=function(o,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){for(var f in o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(P,N){var Z={};if(!N)return Z;for(var Y=function(){var he=de[Q],Se=he.layerIds.map(function(Oe){return N.getLayer(Oe)}).filter(Boolean);if(Se.length!==0){he.layers=Se,he.stateDependentLayerIds&&(he.stateDependentLayers=he.stateDependentLayerIds.map(function(Oe){return Se.filter(function(Ne){return Ne.id===Oe})[0]}));for(var ye=0,Le=Se;ye<Le.length;ye+=1)Z[Le[ye].id]=he}},Q=0,de=P;Q<de.length;Q+=1)Y();return Z}(o.buckets,u.style),this.hasSymbolBuckets=!1,this.buckets){var x=this.buckets[f];if(x instanceof Ri){if(this.hasSymbolBuckets=!0,!d)break;x.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var w in this.buckets){var A=this.buckets[w];if(A instanceof Ri&&A.hasRTLText){this.hasRTLText=!0,Us.isLoading()||Us.isLoaded()||Gf()!=="deferred"||Vo();break}}for(var M in this.queryPadding=0,this.buckets){var W=this.buckets[M];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(M).queryRadius(W))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new p},pr.prototype.unloadVectorData=function(){for(var o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},pr.prototype.getBucket=function(o){return this.buckets[o.id]},pr.prototype.upload=function(o){for(var u in this.buckets){var d=this.buckets[u];d.uploadPending()&&d.upload(o)}var f=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new f_(o,this.imageAtlas.image,f.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new f_(o,this.glyphAtlasImage,f.ALPHA),this.glyphAtlasImage=null)},pr.prototype.prepare=function(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)},pr.prototype.queryRenderedFeatures=function(o,u,d,f,x,w,A,M,W,P){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:f,cameraQueryGeometry:x,scale:w,tileSize:this.tileSize,pixelPosMatrix:P,transform:M,params:A,queryPadding:this.queryPadding*W},o,u,d):{}},pr.prototype.querySourceFeatures=function(o,u){var d=this.latestFeatureIndex;if(d&&d.rawTileData){var f=d.loadVTLayers(),x=u?u.sourceLayer:"",w=f._geojsonTileLayer||f[x];if(w)for(var A=Fm(u&&u.filter),M=this.tileID.canonical,W=M.z,P=M.x,N=M.y,Z={z:W,x:P,y:N},Y=0;Y<w.length;Y++){var Q=w.feature(Y);if(A.needGeometry){var de=Mn(Q,!0);if(!A.filter(new Ya(this.tileID.overscaledZ),de,this.tileID.canonical))continue}else if(!A.filter(new Ya(this.tileID.overscaledZ),Q))continue;var he=d.getId(Q,x),Se=new kb(Q,W,P,N,he);Se.tile=Z,o.push(Se)}}},pr.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},pr.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},pr.prototype.setExpiryData=function(o){var u=this.expirationTime;if(o.cacheControl){var d=ke(o.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){var f=Date.now(),x=!1;if(this.expirationTime>f)x=!1;else if(u)if(this.expirationTime<u)x=!0;else{var w=this.expirationTime-u;w?this.expirationTime=f+Math.max(w,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},pr.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},pr.prototype.setFeatureState=function(o,u){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(o).length!==0){var d=this.latestFeatureIndex.loadVTLayers();for(var f in this.buckets)if(u.style.hasLayer(f)){var x=this.buckets[f],w=x.layers[0].sourceLayer||"_geojsonTileLayer",A=d[w],M=o[w];if(A&&M&&Object.keys(M).length!==0){x.update(M,A,this.imageAtlas&&this.imageAtlas.patternPositions||{});var W=u&&u.style&&u.style.getLayer(f);W&&(this.queryPadding=Math.max(this.queryPadding,W.queryRadius(x)))}}}},pr.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},pr.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ni.now()},pr.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},pr.prototype.setHoldDuration=function(o){this.symbolFadeHoldUntil=Ni.now()+o},pr.prototype.setDependencies=function(o,u){for(var d={},f=0,x=u;f<x.length;f+=1)d[x[f]]=!0;this.dependencies[o]=d},pr.prototype.hasDependency=function(o,u){for(var d=0,f=o;d<f.length;d+=1){var x=this.dependencies[f[d]];if(x){for(var w=0,A=u;w<A.length;w+=1)if(x[A[w]])return!0}}return!1};var Zd=v.performance,ME=function(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},Zd.mark(this._marks.start)};ME.prototype.finish=function(){Zd.mark(this._marks.end);var o=Zd.getEntriesByName(this._marks.measure);return o.length===0&&(Zd.measure(this._marks.measure,this._marks.start,this._marks.end),o=Zd.getEntriesByName(this._marks.measure),Zd.clearMarks(this._marks.start),Zd.clearMarks(this._marks.end),Zd.clearMeasures(this._marks.measure)),o},r.Actor=cg,r.AlphaImage=p_,r.CanonicalTileID=b_,r.CollisionBoxArray=p,r.Color=ui,r.DEMData=Wc,r.DataConstantProperty=ea,r.DictionaryCoder=Rb,r.EXTENT=8192,r.ErrorEvent=Ce,r.EvaluationParameters=Ya,r.Event=oe,r.Evented=ve,r.FeatureIndex=Gc,r.FillBucket=Ol,r.FillExtrusionBucket=Pl,r.ImageAtlas=qf,r.ImagePosition=wb,r.LineBucket=ls,r.LngLat=on,r.LngLatBounds=Hn,r.MercatorCoordinate=y_,r.ONE_EM=24,r.OverscaledTileID=Yn,r.Point=g,r.Point$1=g,r.Properties=Tr,r.Protobuf=vb,r.RGBAImage=Ts,r.RequestManager=ze,r.RequestPerformance=ME,r.ResourceType=Vs,r.SegmentVector=ee,r.SourceFeatureState=dg,r.StructArrayLayout1ui2=Df,r.StructArrayLayout2f1f2i16=Mc,r.StructArrayLayout2i4=Ec,r.StructArrayLayout3ui6=Au,r.StructArrayLayout4i8=Pf,r.SymbolBucket=Ri,r.Texture=f_,r.Tile=pr,r.Transitionable=Sr,r.Uniform1f=yt,r.Uniform1i=it,r.Uniform2f=gt,r.Uniform3f=Gt,r.Uniform4f=ta,r.UniformColor=ra,r.UniformMatrix4f=ci,r.UnwrappedTileID=SE,r.ValidationError=_e,r.WritingMode=po,r.ZoomHistory=Lf,r.add=function(o,u,d){return o[0]=u[0]+d[0],o[1]=u[1]+d[1],o[2]=u[2]+d[2],o},r.addDynamicAttributes=NI,r.asyncAll=function(o,u,d){if(!o.length)return d(null,[]);var f=o.length,x=new Array(o.length),w=null;o.forEach(function(A,M){u(A,function(W,P){W&&(w=W),x[M]=P,--f==0&&d(w,x)})})},r.bezier=S,r.bindAll=re,r.browser=Ni,r.cacheEntryPossiblyAdded=function(o){++wi>Pn&&(o.getActor().send("enforceCacheSizeLimit",Di),wi=0)},r.clamp=R,r.clearTileCache=function(o){var u=v.caches.delete("mapbox-tiles");o&&u.catch(o).then(function(){return o()})},r.clipLine=cE,r.clone=function(o){var u=new pi(16);return u[0]=o[0],u[1]=o[1],u[2]=o[2],u[3]=o[3],u[4]=o[4],u[5]=o[5],u[6]=o[6],u[7]=o[7],u[8]=o[8],u[9]=o[9],u[10]=o[10],u[11]=o[11],u[12]=o[12],u[13]=o[13],u[14]=o[14],u[15]=o[15],u},r.clone$1=ue,r.clone$2=function(o){var u=new pi(3);return u[0]=o[0],u[1]=o[1],u[2]=o[2],u},r.collisionCircleLayout=FF,r.config=ka,r.create=function(){var o=new pi(16);return pi!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},r.create$1=function(){var o=new pi(9);return pi!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o},r.create$2=function(){var o=new pi(4);return pi!=Float32Array&&(o[1]=0,o[2]=0),o[0]=1,o[3]=1,o},r.createCommonjsModule=l,r.createExpression=Pm,r.createLayout=mr,r.createStyleLayer=function(o){return o.type==="custom"?new pN(o):new fN[o.type](o)},r.cross=function(o,u,d){var f=u[0],x=u[1],w=u[2],A=d[0],M=d[1],W=d[2];return o[0]=x*W-w*M,o[1]=w*A-f*W,o[2]=f*M-x*A,o},r.deepEqual=function o(u,d){if(Array.isArray(u)){if(!Array.isArray(d)||u.length!==d.length)return!1;for(var f=0;f<u.length;f++)if(!o(u[f],d[f]))return!1;return!0}if(typeof u=="object"&&u!==null&&d!==null){if(typeof d!="object"||Object.keys(u).length!==Object.keys(d).length)return!1;for(var x in u)if(!o(u[x],d[x]))return!1;return!0}return u===d},r.dot=function(o,u){return o[0]*u[0]+o[1]*u[1]+o[2]*u[2]},r.dot$1=function(o,u){return o[0]*u[0]+o[1]*u[1]+o[2]*u[2]+o[3]*u[3]},r.ease=L,r.emitValidationErrors=s_,r.endsWith=ne,r.enforceCacheSizeLimit=function(o){fn(),Lt&&Lt.then(function(u){u.keys().then(function(d){for(var f=0;f<d.length-o;f++)u.delete(d[f])})})},r.evaluateSizeForFeature=nE,r.evaluateSizeForZoom=rE,r.evaluateVariableOffset=_E,r.evented=Wf,r.extend=O,r.featureFilter=Fm,r.filterObject=le,r.fromRotation=function(o,u){var d=Math.sin(u),f=Math.cos(u);return o[0]=f,o[1]=d,o[2]=0,o[3]=-d,o[4]=f,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},r.getAnchorAlignment=OI,r.getAnchorJustification=FI,r.getArrayBuffer=nn,r.getImage=H,r.getJSON=function(o,u){return Bo(O(o,{type:"json"}),u)},r.getRTLTextPluginStatus=Gf,r.getReferrer=ns,r.getVideo=function(o,u){var d,f,x=v.document.createElement("video");x.muted=!0,x.onloadstart=function(){u(null,x)};for(var w=0;w<o.length;w++){var A=v.document.createElement("source");d=o[w],f=void 0,(f=v.document.createElement("a")).href=d,(f.protocol!==v.document.location.protocol||f.host!==v.document.location.host)&&(x.crossOrigin="Anonymous"),A.src=o[w],x.appendChild(A)}return{cancel:function(){}}},r.identity=Xs,r.invert=function(o,u){var d=u[0],f=u[1],x=u[2],w=u[3],A=u[4],M=u[5],W=u[6],P=u[7],N=u[8],Z=u[9],Y=u[10],Q=u[11],de=u[12],he=u[13],Se=u[14],ye=u[15],Le=d*M-f*A,Oe=d*W-x*A,Ne=d*P-w*A,Ze=f*W-x*M,$e=f*P-w*M,_t=x*P-w*W,xt=N*he-Z*de,jt=N*Se-Y*de,kt=N*ye-Q*de,aa=Z*Se-Y*he,Wt=Z*ye-Q*he,Fa=Y*ye-Q*Se,ha=Le*Fa-Oe*Wt+Ne*aa+Ze*kt-$e*jt+_t*xt;return ha?(o[0]=(M*Fa-W*Wt+P*aa)*(ha=1/ha),o[1]=(x*Wt-f*Fa-w*aa)*ha,o[2]=(he*_t-Se*$e+ye*Ze)*ha,o[3]=(Y*$e-Z*_t-Q*Ze)*ha,o[4]=(W*kt-A*Fa-P*jt)*ha,o[5]=(d*Fa-x*kt+w*jt)*ha,o[6]=(Se*Ne-de*_t-ye*Oe)*ha,o[7]=(N*_t-Y*Ne+Q*Oe)*ha,o[8]=(A*Wt-M*kt+P*xt)*ha,o[9]=(f*kt-d*Wt-w*xt)*ha,o[10]=(de*$e-he*Ne+ye*Le)*ha,o[11]=(Z*Ne-N*$e-Q*Le)*ha,o[12]=(M*jt-A*aa-W*xt)*ha,o[13]=(d*aa-f*jt+x*xt)*ha,o[14]=(he*Oe-de*Ze-Se*Le)*ha,o[15]=(N*Ze-Z*Oe+Y*Le)*ha,o):null},r.isChar=St,r.isMapboxURL=et,r.keysDifference=function(o,u){var d=[];for(var f in o)f in u||d.push(f);return d},r.makeRequest=Bo,r.mapObject=te,r.mercatorXfromLng=IE,r.mercatorYfromLat=CE,r.mercatorZfromAltitude=AE,r.mul=II,r.multiply=os,r.mvt=tg,r.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},r.normalize=function(o,u){var d=u[0],f=u[1],x=u[2],w=d*d+f*f+x*x;return w>0&&(w=1/Math.sqrt(w)),o[0]=u[0]*w,o[1]=u[1]*w,o[2]=u[2]*w,o},r.number=Bn,r.offscreenCanvasSupported=hn,r.ortho=function(o,u,d,f,x,w,A){var M=1/(u-d),W=1/(f-x),P=1/(w-A);return o[0]=-2*M,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*W,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*P,o[11]=0,o[12]=(u+d)*M,o[13]=(x+f)*W,o[14]=(A+w)*P,o[15]=1,o},r.parseGlyphPBF=function(o){return new vb(o).readFields(qF,[])},r.pbf=vb,r.performSymbolLayout=function(o,u,d,f,x,w,A){o.createArrays(),o.tilePixelRatio=8192/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;var M=o.layers[0].layout,W=o.layers[0]._unevaluatedLayout._values,P={};if(o.textSizeData.kind==="composite"){var N=o.textSizeData,Z=N.maxZoom;P.compositeTextSizes=[W["text-size"].possiblyEvaluate(new Ya(N.minZoom),A),W["text-size"].possiblyEvaluate(new Ya(Z),A)]}if(o.iconSizeData.kind==="composite"){var Y=o.iconSizeData,Q=Y.maxZoom;P.compositeIconSizes=[W["icon-size"].possiblyEvaluate(new Ya(Y.minZoom),A),W["icon-size"].possiblyEvaluate(new Ya(Q),A)]}P.layoutTextSize=W["text-size"].possiblyEvaluate(new Ya(o.zoom+1),A),P.layoutIconSize=W["icon-size"].possiblyEvaluate(new Ya(o.zoom+1),A),P.textMaxSize=W["text-size"].possiblyEvaluate(new Ya(18));for(var de=24*M.get("text-line-height"),he=M.get("text-rotation-alignment")==="map"&&M.get("symbol-placement")!=="point",Se=M.get("text-keep-upright"),ye=M.get("text-size"),Le=function(){var Ze=Ne[Oe],$e=M.get("text-font").evaluate(Ze,{},A).join(","),_t=ye.evaluate(Ze,{},A),xt=P.layoutTextSize.evaluate(Ze,{},A),jt=P.layoutIconSize.evaluate(Ze,{},A),kt={horizontal:{},vertical:void 0},aa=Ze.text,Wt=[0,0];if(aa){var Fa=aa.toString(),ha=24*M.get("text-letter-spacing").evaluate(Ze,{},A),Ut=function(Qa){for(var Pi=0,Ci=Qa;Pi<Ci.length;Pi+=1)if(di=Ci[Pi].charCodeAt(0),St.Arabic(di)||St["Arabic Supplement"](di)||St["Arabic Extended-A"](di)||St["Arabic Presentation Forms-A"](di)||St["Arabic Presentation Forms-B"](di))return!1;var di;return!0}(Fa)?ha:0,za=M.get("text-anchor").evaluate(Ze,{},A),Ma=M.get("text-variable-anchor");if(!Ma){var oi=M.get("text-radial-offset").evaluate(Ze,{},A);Wt=oi?_E(za,[24*oi,BI]):M.get("text-offset").evaluate(Ze,{},A).map(function(Qa){return 24*Qa})}var ia=he?"center":M.get("text-justify").evaluate(Ze,{},A),mi=M.get("symbol-placement"),ln=mi==="point"?24*M.get("text-max-width").evaluate(Ze,{},A):0,In=function(){o.allowVerticalPlacement&&Rf(Fa)&&(kt.vertical=Ib(aa,u,d,x,$e,ln,de,za,"left",Ut,Wt,po.vertical,!0,mi,xt,_t))};if(!he&&Ma){for(var bn=ia==="auto"?Ma.map(function(Qa){return FI(Qa)}):[ia],un=!1,Cn=0;Cn<bn.length;Cn++){var nr=bn[Cn];if(!kt.horizontal[nr])if(un)kt.horizontal[nr]=kt.horizontal[0];else{var rr=Ib(aa,u,d,x,$e,ln,de,"center",nr,Ut,Wt,po.horizontal,!1,mi,xt,_t);rr&&(kt.horizontal[nr]=rr,un=rr.positionedLines.length===1)}}In()}else{ia==="auto"&&(ia=FI(za));var jr=Ib(aa,u,d,x,$e,ln,de,za,ia,Ut,Wt,po.horizontal,!1,mi,xt,_t);jr&&(kt.horizontal[ia]=jr),In(),Rf(Fa)&&he&&Se&&(kt.vertical=Ib(aa,u,d,x,$e,ln,de,za,ia,Ut,Wt,po.vertical,!1,mi,xt,_t))}}var fr=void 0,Jr=!1;if(Ze.icon&&Ze.icon.name){var Ln=f[Ze.icon.name];Ln&&(fr=function(Qa,Pi,Ci){var di=OI(Ci),us=Pi[0]-Qa.displaySize[0]*di.horizontalAlign,Br=Pi[1]-Qa.displaySize[1]*di.verticalAlign;return{image:Qa,top:Br,bottom:Br+Qa.displaySize[1],left:us,right:us+Qa.displaySize[0]}}(x[Ze.icon.name],M.get("icon-offset").evaluate(Ze,{},A),M.get("icon-anchor").evaluate(Ze,{},A)),Jr=Ln.sdf,o.sdfIcons===void 0?o.sdfIcons=Ln.sdf:o.sdfIcons!==Ln.sdf&&be("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ln.pixelRatio!==o.pixelRatio||M.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}var yr=gE(kt.horizontal)||kt.vertical;o.iconsInText=!!yr&&yr.iconsInText,(yr||fr)&&function(Qa,Pi,Ci,di,us,Br,Qi,Nn,Fr,gi,Ru){var fo=Br.textMaxSize.evaluate(Pi,{});fo===void 0&&(fo=Qi);var ku,Rn=Qa.layers[0].layout,Wu=Rn.get("icon-offset").evaluate(Pi,{},Ru),_l=gE(Ci.horizontal),hg=Qi/24,v_=Qa.tilePixelRatio*hg,_g=Qa.tilePixelRatio*fo/24,Oc=Qa.tilePixelRatio*Nn,mg=Qa.tilePixelRatio*Rn.get("symbol-spacing"),Wb=Rn.get("text-padding")*Qa.tilePixelRatio,gg=Rn.get("icon-padding")*Qa.tilePixelRatio,Qf=Rn.get("text-max-angle")/180*Math.PI,Gb=Rn.get("text-rotation-alignment")==="map"&&Rn.get("symbol-placement")!=="point",Ob=Rn.get("icon-rotation-alignment")==="map"&&Rn.get("symbol-placement")!=="point",Pc=Rn.get("symbol-placement"),$f=mg/2,pg=Rn.get("icon-text-fit");di&&pg!=="none"&&(Qa.allowVerticalPlacement&&Ci.vertical&&(ku=iE(di,Ci.vertical,pg,Rn.get("icon-text-fit-padding"),Wu,hg)),_l&&(di=iE(di,_l,pg,Rn.get("icon-text-fit-padding"),Wu,hg)));var zd=function(bN,oy){oy.x<0||oy.x>=8192||oy.y<0||oy.y>=8192||function(kn,Bl,vN,Ud,YI,kE,Vb,Gu,Zb,ly,zb,Ub,KI,WE,uy,GE,OE,PE,BE,FE,yo,Xb,NE,Ou,xN){var DE,w_,xg,wg,Ig,Cg=kn.addToLineVertexArray(Bl,vN),VE=0,ZE=0,zE=0,UE=0,qI=-1,jI=-1,Bc={},XE=ce(""),JI=0,QI=0;if(Gu._unevaluatedLayout.getValue("text-radial-offset")===void 0?(JI=(DE=Gu.layout.get("text-offset").evaluate(yo,{},Ou).map(function(dy){return 24*dy}))[0],QI=DE[1]):(JI=24*Gu.layout.get("text-radial-offset").evaluate(yo,{},Ou),QI=BI),kn.allowVerticalPlacement&&Ud.vertical){var HE=Gu.layout.get("text-rotate").evaluate(yo,{},Ou)+90;wg=new Eb(Zb,Bl,ly,zb,Ub,Ud.vertical,KI,WE,uy,HE),Vb&&(Ig=new Eb(Zb,Bl,ly,zb,Ub,Vb,OE,PE,uy,HE))}if(YI){var $I=Gu.layout.get("icon-rotate").evaluate(yo,{}),YE=Gu.layout.get("icon-text-fit")!=="none",KE=dE(YI,$I,NE,YE),eC=Vb?dE(Vb,$I,NE,YE):void 0;xg=new Eb(Zb,Bl,ly,zb,Ub,YI,OE,PE,!1,$I),VE=4*KE.length;var qE=kn.iconSizeData,cy=null;qE.kind==="source"?(cy=[128*Gu.layout.get("icon-size").evaluate(yo,{})])[0]>32640&&be(kn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):qE.kind==="composite"&&((cy=[128*Xb.compositeIconSizes[0].evaluate(yo,{},Ou),128*Xb.compositeIconSizes[1].evaluate(yo,{},Ou)])[0]>32640||cy[1]>32640)&&be(kn.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),kn.addSymbols(kn.icon,KE,cy,FE,BE,yo,!1,Bl,Cg.lineStartIndex,Cg.lineLength,-1,Ou),qI=kn.icon.placedSymbolArray.length-1,eC&&(ZE=4*eC.length,kn.addSymbols(kn.icon,eC,cy,FE,BE,yo,po.vertical,Bl,Cg.lineStartIndex,Cg.lineLength,-1,Ou),jI=kn.icon.placedSymbolArray.length-1)}for(var jE in Ud.horizontal){var Hb=Ud.horizontal[jE];if(!w_){XE=ce(Hb.text);var wN=Gu.layout.get("text-rotate").evaluate(yo,{},Ou);w_=new Eb(Zb,Bl,ly,zb,Ub,Hb,KI,WE,uy,wN)}var JE=Hb.positionedLines.length===1;if(zE+=mE(kn,Bl,Hb,kE,Gu,uy,yo,GE,Cg,Ud.vertical?po.horizontal:po.horizontalOnly,JE?Object.keys(Ud.horizontal):[jE],Bc,qI,Xb,Ou),JE)break}Ud.vertical&&(UE+=mE(kn,Bl,Ud.vertical,kE,Gu,uy,yo,GE,Cg,po.vertical,["vertical"],Bc,jI,Xb,Ou));var IN=w_?w_.boxStartIndex:kn.collisionBoxArray.length,CN=w_?w_.boxEndIndex:kn.collisionBoxArray.length,AN=wg?wg.boxStartIndex:kn.collisionBoxArray.length,SN=wg?wg.boxEndIndex:kn.collisionBoxArray.length,TN=xg?xg.boxStartIndex:kn.collisionBoxArray.length,EN=xg?xg.boxEndIndex:kn.collisionBoxArray.length,MN=Ig?Ig.boxStartIndex:kn.collisionBoxArray.length,LN=Ig?Ig.boxEndIndex:kn.collisionBoxArray.length,Pu=-1,Yb=function(dy,$E){return dy&&dy.circleDiameter?Math.max(dy.circleDiameter,$E):$E};Pu=Yb(w_,Pu),Pu=Yb(wg,Pu),Pu=Yb(xg,Pu);var QE=(Pu=Yb(Ig,Pu))>-1?1:0;QE&&(Pu*=xN/24),kn.glyphOffsetArray.length>=Ri.MAX_GLYPHS&&be("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),yo.sortKey!==void 0&&kn.addToSortKeyRanges(kn.symbolInstances.length,yo.sortKey),kn.symbolInstances.emplaceBack(Bl.x,Bl.y,Bc.right>=0?Bc.right:-1,Bc.center>=0?Bc.center:-1,Bc.left>=0?Bc.left:-1,Bc.vertical||-1,qI,jI,XE,IN,CN,AN,SN,TN,EN,MN,LN,ly,zE,UE,VE,ZE,QE,0,KI,JI,QI,Pu)}(Qa,oy,bN,Ci,di,us,ku,Qa.layers[0],Qa.collisionBoxArray,Pi.index,Pi.sourceLayerIndex,Qa.index,v_,Wb,Gb,Fr,Oc,gg,Ob,Wu,Pi,Br,gi,Ru,Qi)};if(Pc==="line")for(var fg=0,Pb=cE(Pi.geometry,0,0,8192,8192);fg<Pb.length;fg+=1)for(var Bb=Pb[fg],ey=0,ty=aN(Bb,mg,Qf,Ci.vertical||_l,di,24,_g,Qa.overscaling,8192);ey<ty.length;ey+=1){var Fb=ty[ey];_l&&sN(Qa,_l.text,$f,Fb)||zd(Bb,Fb)}else if(Pc==="line-center")for(var ay=0,iy=Pi.geometry;ay<iy.length;ay+=1){var ny=iy[ay];if(ny.length>1){var Nb=tN(ny,Qf,Ci.vertical||_l,di,24,_g);Nb&&zd(ny,Nb)}}else if(Pi.type==="Polygon")for(var yg=0,Db=LI(Pi.geometry,0);yg<Db.length;yg+=1){var bg=Db[yg],ry=nN(bg,16);zd(bg[0],new rg(ry.x,ry.y,0))}else if(Pi.type==="LineString")for(var x_=0,sy=Pi.geometry;x_<sy.length;x_+=1){var vg=sy[x_];zd(vg,new rg(vg[0].x,vg[0].y,0))}else if(Pi.type==="Point")for(var UI=0,LE=Pi.geometry;UI<LE.length;UI+=1)for(var XI=0,RE=LE[UI];XI<RE.length;XI+=1){var HI=RE[XI];zd([HI],new rg(HI.x,HI.y,0))}}(o,Ze,kt,fr,f,P,xt,jt,Wt,Jr,A)},Oe=0,Ne=o.features;Oe<Ne.length;Oe+=1)Le();w&&o.generateCollisionDebugBuffers()},r.perspective=function(o,u,d,f,x){var w,A=1/Math.tan(u/2);return o[0]=A/d,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=A,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,x!=null&&x!==1/0?(o[10]=(x+f)*(w=1/(f-x)),o[14]=2*x*f*w):(o[10]=-1,o[14]=-2*f),o},r.pick=function(o,u){for(var d={},f=0;f<u.length;f++){var x=u[f];x in o&&(d[x]=o[x])}return d},r.plugin=Us,r.polygonIntersectsPolygon=Eu,r.postMapLoadEvent=pn,r.postTurnstileEvent=si,r.potpack=$5,r.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],r.register=Nt,r.registerForPluginStateChange=function(o){return o({pluginStatus:Cs,pluginURL:kl}),Wf.on("pluginStateChange",o),o},r.renderColorRamp=G5,r.rotate=function(o,u,d){var f=u[0],x=u[1],w=u[2],A=u[3],M=Math.sin(d),W=Math.cos(d);return o[0]=f*W+w*M,o[1]=x*W+A*M,o[2]=f*-M+w*W,o[3]=x*-M+A*W,o},r.rotateX=function(o,u,d){var f=Math.sin(d),x=Math.cos(d),w=u[4],A=u[5],M=u[6],W=u[7],P=u[8],N=u[9],Z=u[10],Y=u[11];return u!==o&&(o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3],o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15]),o[4]=w*x+P*f,o[5]=A*x+N*f,o[6]=M*x+Z*f,o[7]=W*x+Y*f,o[8]=P*x-w*f,o[9]=N*x-A*f,o[10]=Z*x-M*f,o[11]=Y*x-W*f,o},r.rotateZ=function(o,u,d){var f=Math.sin(d),x=Math.cos(d),w=u[0],A=u[1],M=u[2],W=u[3],P=u[4],N=u[5],Z=u[6],Y=u[7];return u!==o&&(o[8]=u[8],o[9]=u[9],o[10]=u[10],o[11]=u[11],o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15]),o[0]=w*x+P*f,o[1]=A*x+N*f,o[2]=M*x+Z*f,o[3]=W*x+Y*f,o[4]=P*x-w*f,o[5]=N*x-A*f,o[6]=Z*x-M*f,o[7]=Y*x-W*f,o},r.scale=function(o,u,d){var f=d[0],x=d[1],w=d[2];return o[0]=u[0]*f,o[1]=u[1]*f,o[2]=u[2]*f,o[3]=u[3]*f,o[4]=u[4]*x,o[5]=u[5]*x,o[6]=u[6]*x,o[7]=u[7]*x,o[8]=u[8]*w,o[9]=u[9]*w,o[10]=u[10]*w,o[11]=u[11]*w,o[12]=u[12],o[13]=u[13],o[14]=u[14],o[15]=u[15],o},r.scale$1=function(o,u,d){return o[0]=u[0]*d,o[1]=u[1]*d,o[2]=u[2]*d,o[3]=u[3]*d,o},r.scale$2=function(o,u,d){return o[0]=u[0]*d,o[1]=u[1]*d,o[2]=u[2]*d,o},r.setCacheLimits=function(o,u){Di=o,Pn=u},r.setRTLTextPlugin=function(o,u,d){if(d===void 0&&(d=!1),Cs==="deferred"||Cs==="loading"||Cs==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");kl=Ni.resolveURL(o),Cs="deferred",Xm=u,l_(),d||Vo()},r.sphericalToCartesian=function(o){var u=o[0],d=o[1],f=o[2];return d+=90,d*=Math.PI/180,f*=Math.PI/180,{x:u*Math.cos(d)*Math.sin(f),y:u*Math.sin(d)*Math.sin(f),z:u*Math.cos(f)}},r.sqrLen=function(o){var u=o[0],d=o[1];return u*u+d*d},r.styleSpec=J,r.sub=function(o,u,d){return o[0]=u[0]-d[0],o[1]=u[1]-d[1],o[2]=u[2]-d[2],o},r.symbolSize=eN,r.transformMat3=function(o,u,d){var f=u[0],x=u[1],w=u[2];return o[0]=f*d[0]+x*d[3]+w*d[6],o[1]=f*d[1]+x*d[4]+w*d[7],o[2]=f*d[2]+x*d[5]+w*d[8],o},r.transformMat4=Jm,r.translate=function(o,u,d){var f,x,w,A,M,W,P,N,Z,Y,Q,de,he=d[0],Se=d[1],ye=d[2];return u===o?(o[12]=u[0]*he+u[4]*Se+u[8]*ye+u[12],o[13]=u[1]*he+u[5]*Se+u[9]*ye+u[13],o[14]=u[2]*he+u[6]*Se+u[10]*ye+u[14],o[15]=u[3]*he+u[7]*Se+u[11]*ye+u[15]):(x=u[1],w=u[2],A=u[3],M=u[4],W=u[5],P=u[6],N=u[7],Z=u[8],Y=u[9],Q=u[10],de=u[11],o[0]=f=u[0],o[1]=x,o[2]=w,o[3]=A,o[4]=M,o[5]=W,o[6]=P,o[7]=N,o[8]=Z,o[9]=Y,o[10]=Q,o[11]=de,o[12]=f*he+M*Se+Z*ye+u[12],o[13]=x*he+W*Se+Y*ye+u[13],o[14]=w*he+P*Se+Q*ye+u[14],o[15]=A*he+N*Se+de*ye+u[15]),o},r.triggerPluginCompletionEvent=_b,r.uniqueId=B,r.validateCustomStyleLayer=function(o){var u=[],d=o.id;return d===void 0&&u.push({message:"layers."+d+': missing required property "id"'}),o.render===void 0&&u.push({message:"layers."+d+': missing required method "render"'}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&u.push({message:"layers."+d+': property "renderingMode" must be either "2d" or "3d"'}),u},r.validateLight=xI,r.validateStyle=n_,r.values=function(o){var u=[];for(var d in o)u.push(o[d]);return u},r.vectorTile=tg,r.version="1.13.3",r.warnOnce=be,r.webpSupported=bi,r.window=v,r.wrap=G}),s(["./shared"],function(r){function l(D){var H=typeof D;if(H==="number"||H==="boolean"||H==="string"||D==null)return JSON.stringify(D);if(Array.isArray(D)){for(var K="[",ae=0,oe=D;ae<oe.length;ae+=1)K+=l(oe[ae])+",";return K+"]"}for(var Ce=Object.keys(D).sort(),ve="{",J=0;J<Ce.length;J++)ve+=JSON.stringify(Ce[J])+":"+l(D[Ce[J]])+",";return ve+"}"}function c(D){for(var H="",K=0,ae=r.refProperties;K<ae.length;K+=1)H+="/"+l(D[ae[K]]);return H}var h=function(D){this.keyCache={},D&&this.replace(D)};h.prototype.replace=function(D){this._layerConfigs={},this._layers={},this.update(D,[])},h.prototype.update=function(D,H){for(var K=this,ae=0,oe=D;ae<oe.length;ae+=1){var Ce=oe[ae];this._layerConfigs[Ce.id]=Ce;var ve=this._layers[Ce.id]=r.createStyleLayer(Ce);ve._featureFilter=r.featureFilter(ve.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(var J=0,_e=H;J<_e.length;J+=1){var Re=_e[J];delete this.keyCache[Re],delete this._layerConfigs[Re],delete this._layers[Re]}this.familiesBySource={};for(var tt=0,ct=function(It,At){for(var Oa={},qe=0;qe<It.length;qe++){var Ae=At&&At[It[qe].id]||c(It[qe]);At&&(At[It[qe].id]=Ae);var at=Oa[Ae];at||(at=Oa[Ae]=[]),at.push(It[qe])}var rt=[];for(var $t in Oa)rt.push(Oa[$t]);return rt}(r.values(this._layerConfigs),this.keyCache);tt<ct.length;tt+=1){var Xe=ct[tt].map(function(It){return K._layers[It.id]}),nt=Xe[0];if(nt.visibility!=="none"){var Pt=nt.source||"",Et=this.familiesBySource[Pt];Et||(Et=this.familiesBySource[Pt]={});var Ye=nt.sourceLayer||"_geojsonTileLayer",Rt=Et[Ye];Rt||(Rt=Et[Ye]=[]),Rt.push(Xe)}}};var g=function(D){var H={},K=[];for(var ae in D){var oe=D[ae],Ce=H[ae]={};for(var ve in oe){var J=oe[+ve];if(J&&J.bitmap.width!==0&&J.bitmap.height!==0){var _e={x:0,y:0,w:J.bitmap.width+2,h:J.bitmap.height+2};K.push(_e),Ce[ve]={rect:_e,metrics:J.metrics}}}}var Re=r.potpack(K),tt=new r.AlphaImage({width:Re.w||1,height:Re.h||1});for(var ct in D){var Xe=D[ct];for(var nt in Xe){var Pt=Xe[+nt];if(Pt&&Pt.bitmap.width!==0&&Pt.bitmap.height!==0){var Et=H[ct][nt].rect;r.AlphaImage.copy(Pt.bitmap,tt,{x:0,y:0},{x:Et.x+1,y:Et.y+1},Pt.bitmap)}}}this.image=tt,this.positions=H};r.register("GlyphAtlas",g);var b=function(D){this.tileID=new r.OverscaledTileID(D.tileID.overscaledZ,D.tileID.wrap,D.tileID.canonical.z,D.tileID.canonical.x,D.tileID.canonical.y),this.uid=D.uid,this.zoom=D.zoom,this.pixelRatio=D.pixelRatio,this.tileSize=D.tileSize,this.source=D.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=D.showCollisionBoxes,this.collectResourceTiming=!!D.collectResourceTiming,this.returnDependencies=!!D.returnDependencies,this.promoteId=D.promoteId};function v(D,H,K){for(var ae=new r.EvaluationParameters(H),oe=0,Ce=D;oe<Ce.length;oe+=1)Ce[oe].recalculate(ae,K)}function C(D,H){var K=r.getArrayBuffer(D.request,function(ae,oe,Ce,ve){ae?H(ae):oe&&H(null,{vectorTile:new r.vectorTile.VectorTile(new r.pbf(oe)),rawData:oe,cacheControl:Ce,expires:ve})});return function(){K.cancel(),H()}}b.prototype.parse=function(D,H,K,ae,oe){var Ce=this;this.status="parsing",this.data=D,this.collisionBoxArray=new r.CollisionBoxArray;var ve=new r.DictionaryCoder(Object.keys(D.layers).sort()),J=new r.FeatureIndex(this.tileID,this.promoteId);J.bucketLayerIDs=[];var _e,Re,tt,ct,Xe={},nt={featureIndex:J,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Pt=H.familiesBySource[this.source];for(var Et in Pt){var Ye=D.layers[Et];if(Ye){Ye.version===1&&r.warnOnce('Vector tile source "'+this.source+'" layer "'+Et+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Rt=ve.encode(Et),It=[],At=0;At<Ye.length;At++){var Oa=Ye.feature(At),qe=J.getId(Oa,Et);It.push({feature:Oa,id:qe,index:At,sourceLayerIndex:Rt})}for(var Ae=0,at=Pt[Et];Ae<at.length;Ae+=1){var rt=at[Ae],$t=rt[0];$t.minzoom&&this.zoom<Math.floor($t.minzoom)||$t.maxzoom&&this.zoom>=$t.maxzoom||$t.visibility!=="none"&&(v(rt,this.zoom,K),(Xe[$t.id]=$t.createBucket({index:J.bucketLayerIDs.length,layers:rt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Rt,sourceID:this.source})).populate(It,nt,this.tileID.canonical),J.bucketLayerIDs.push(rt.map(function(Ta){return Ta.id})))}}}var wa=r.mapObject(nt.glyphDependencies,function(Ta){return Object.keys(Ta).map(Number)});Object.keys(wa).length?ae.send("getGlyphs",{uid:this.uid,stacks:wa},function(Ta,Da){_e||(_e=Ta,Re=Da,Gi.call(Ce))}):Re={};var Ii=Object.keys(nt.iconDependencies);Ii.length?ae.send("getImages",{icons:Ii,source:this.source,tileID:this.tileID,type:"icons"},function(Ta,Da){_e||(_e=Ta,tt=Da,Gi.call(Ce))}):tt={};var Sa=Object.keys(nt.patternDependencies);function Gi(){if(_e)return oe(_e);if(Re&&tt&&ct){var Ta=new g(Re),Da=new r.ImageAtlas(tt,ct);for(var ui in Xe){var zr=Xe[ui];zr instanceof r.SymbolBucket?(v(zr.layers,this.zoom,K),r.performSymbolLayout(zr,Re,Ta.positions,tt,Da.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):zr.hasPattern&&(zr instanceof r.LineBucket||zr instanceof r.FillBucket||zr instanceof r.FillExtrusionBucket)&&(v(zr.layers,this.zoom,K),zr.addFeatures(nt,this.tileID.canonical,Da.patternPositions))}this.status="done",oe(null,{buckets:r.values(Xe).filter(function(Hh){return!Hh.isEmpty()}),featureIndex:J,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ta.image,imageAtlas:Da,glyphMap:this.returnDependencies?Re:null,iconMap:this.returnDependencies?tt:null,glyphPositions:this.returnDependencies?Ta.positions:null})}}Sa.length?ae.send("getImages",{icons:Sa,source:this.source,tileID:this.tileID,type:"patterns"},function(Ta,Da){_e||(_e=Ta,ct=Da,Gi.call(Ce))}):ct={},Gi.call(this)};var S=function(D,H,K,ae){this.actor=D,this.layerIndex=H,this.availableImages=K,this.loadVectorData=ae||C,this.loading={},this.loaded={}};S.prototype.loadTile=function(D,H){var K=this,ae=D.uid;this.loading||(this.loading={});var oe=!!(D&&D.request&&D.request.collectResourceTiming)&&new r.RequestPerformance(D.request),Ce=this.loading[ae]=new b(D);Ce.abort=this.loadVectorData(D,function(ve,J){if(delete K.loading[ae],ve||!J)return Ce.status="done",K.loaded[ae]=Ce,H(ve);var _e=J.rawData,Re={};J.expires&&(Re.expires=J.expires),J.cacheControl&&(Re.cacheControl=J.cacheControl);var tt={};if(oe){var ct=oe.finish();ct&&(tt.resourceTiming=JSON.parse(JSON.stringify(ct)))}Ce.vectorTile=J.vectorTile,Ce.parse(J.vectorTile,K.layerIndex,K.availableImages,K.actor,function(Xe,nt){if(Xe||!nt)return H(Xe);H(null,r.extend({rawTileData:_e.slice(0)},nt,Re,tt))}),K.loaded=K.loaded||{},K.loaded[ae]=Ce})},S.prototype.reloadTile=function(D,H){var K=this,ae=this.loaded,oe=D.uid,Ce=this;if(ae&&ae[oe]){var ve=ae[oe];ve.showCollisionBoxes=D.showCollisionBoxes;var J=function(_e,Re){var tt=ve.reloadCallback;tt&&(delete ve.reloadCallback,ve.parse(ve.vectorTile,Ce.layerIndex,K.availableImages,Ce.actor,tt)),H(_e,Re)};ve.status==="parsing"?ve.reloadCallback=J:ve.status==="done"&&(ve.vectorTile?ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,J):J())}},S.prototype.abortTile=function(D,H){var K=this.loading,ae=D.uid;K&&K[ae]&&K[ae].abort&&(K[ae].abort(),delete K[ae]),H()},S.prototype.removeTile=function(D,H){var K=this.loaded,ae=D.uid;K&&K[ae]&&delete K[ae],H()};var L=r.window.ImageBitmap,R=function(){this.loaded={}};function G(D,H){if(D.length!==0){O(D[0],H);for(var K=1;K<D.length;K++)O(D[K],!H)}}function O(D,H){for(var K=0,ae=0,oe=0,Ce=D.length,ve=Ce-1;oe<Ce;ve=oe++){var J=(D[oe][0]-D[ve][0])*(D[ve][1]+D[oe][1]),_e=K+J;ae+=Math.abs(K)>=Math.abs(J)?K-_e+J:J-_e+K,K=_e}K+ae>=0!=!!H&&D.reverse()}R.prototype.loadTile=function(D,H){var K=D.uid,ae=D.encoding,oe=D.rawImageData,Ce=L&&oe instanceof L?this.getImageData(oe):oe,ve=new r.DEMData(K,Ce,ae);this.loaded=this.loaded||{},this.loaded[K]=ve,H(null,ve)},R.prototype.getImageData=function(D){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(D.width,D.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=D.width,this.offscreenCanvas.height=D.height,this.offscreenCanvasContext.drawImage(D,0,0,D.width,D.height);var H=this.offscreenCanvasContext.getImageData(-1,-1,D.width+2,D.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new r.RGBAImage({width:H.width,height:H.height},H.data)},R.prototype.removeTile=function(D){var H=this.loaded,K=D.uid;H&&H[K]&&delete H[K]};var V=r.vectorTile.VectorTileFeature.prototype.toGeoJSON,B=function(D){this._feature=D,this.extent=r.EXTENT,this.type=D.type,this.properties=D.tags,"id"in D&&!isNaN(D.id)&&(this.id=parseInt(D.id,10))};B.prototype.loadGeometry=function(){if(this._feature.type===1){for(var D=[],H=0,K=this._feature.geometry;H<K.length;H+=1){var ae=K[H];D.push([new r.Point$1(ae[0],ae[1])])}return D}for(var oe=[],Ce=0,ve=this._feature.geometry;Ce<ve.length;Ce+=1){for(var J=[],_e=0,Re=ve[Ce];_e<Re.length;_e+=1){var tt=Re[_e];J.push(new r.Point$1(tt[0],tt[1]))}oe.push(J)}return oe},B.prototype.toGeoJSON=function(D,H,K){return V.call(this,D,H,K)};var z=function(D){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r.EXTENT,this.length=D.length,this._features=D};z.prototype.feature=function(D){return new B(this._features[D])};var j=r.vectorTile.VectorTileFeature,re=ne;function ne(D,H){this.options=H||{},this.features=D,this.length=D.length}function te(D,H){this.id=typeof D.id=="number"?D.id:void 0,this.type=D.type,this.rawGeometry=D.type===1?[D.geometry]:D.geometry,this.properties=D.tags,this.extent=H||4096}ne.prototype.feature=function(D){return new te(this.features[D],this.options.extent)},te.prototype.loadGeometry=function(){var D=this.rawGeometry;this.geometry=[];for(var H=0;H<D.length;H++){for(var K=D[H],ae=[],oe=0;oe<K.length;oe++)ae.push(new r.Point$1(K[oe][0],K[oe][1]));this.geometry.push(ae)}return this.geometry},te.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var D=this.geometry,H=1/0,K=-1/0,ae=1/0,oe=-1/0,Ce=0;Ce<D.length;Ce++)for(var ve=D[Ce],J=0;J<ve.length;J++){var _e=ve[J];H=Math.min(H,_e.x),K=Math.max(K,_e.x),ae=Math.min(ae,_e.y),oe=Math.max(oe,_e.y)}return[H,ae,K,oe]},te.prototype.toGeoJSON=j.prototype.toGeoJSON;var le=fe,ue=re;function fe(D){var H=new r.pbf;return function(K,ae){for(var oe in K.layers)ae.writeMessage(3,be,K.layers[oe])}(D,H),H.finish()}function be(D,H){var K;H.writeVarintField(15,D.version||1),H.writeStringField(1,D.name||""),H.writeVarintField(5,D.extent||4096);var ae={keys:[],values:[],keycache:{},valuecache:{}};for(K=0;K<D.length;K++)ae.feature=D.feature(K),H.writeMessage(2,Pe,ae);var oe=ae.keys;for(K=0;K<oe.length;K++)H.writeStringField(3,oe[K]);var Ce=ae.values;for(K=0;K<Ce.length;K++)H.writeMessage(4,ut,Ce[K])}function Pe(D,H){var K=D.feature;K.id!==void 0&&H.writeVarintField(1,K.id),H.writeMessage(2,Be,D),H.writeVarintField(3,K.type),H.writeMessage(4,Je,K)}function Be(D,H){var K=D.feature,ae=D.keys,oe=D.values,Ce=D.keycache,ve=D.valuecache;for(var J in K.properties){var _e=Ce[J];_e===void 0&&(ae.push(J),Ce[J]=_e=ae.length-1),H.writeVarint(_e);var Re=K.properties[J],tt=typeof Re;tt!=="string"&&tt!=="boolean"&&tt!=="number"&&(Re=JSON.stringify(Re));var ct=tt+":"+Re,Xe=ve[ct];Xe===void 0&&(oe.push(Re),ve[ct]=Xe=oe.length-1),H.writeVarint(Xe)}}function Me(D,H){return(H<<3)+(7&D)}function ke(D){return D<<1^D>>31}function Je(D,H){for(var K=D.loadGeometry(),ae=D.type,oe=0,Ce=0,ve=K.length,J=0;J<ve;J++){var _e=K[J],Re=1;ae===1&&(Re=_e.length),H.writeVarint(Me(1,Re));for(var tt=ae===3?_e.length-1:_e.length,ct=0;ct<tt;ct++){ct===1&&ae!==1&&H.writeVarint(Me(2,tt-1));var Xe=_e[ct].x-oe,nt=_e[ct].y-Ce;H.writeVarint(ke(Xe)),H.writeVarint(ke(nt)),oe+=Xe,Ce+=nt}ae===3&&H.writeVarint(Me(7,1))}}function ut(D,H){var K=typeof D;K==="string"?H.writeStringField(1,D):K==="boolean"?H.writeBooleanField(7,D):K==="number"&&(D%1!=0?H.writeDoubleField(3,D):D<0?H.writeSVarintField(6,D):H.writeVarintField(5,D))}function ht(D,H,K,ae){Dt(D,K,ae),Dt(H,2*K,2*ae),Dt(H,2*K+1,2*ae+1)}function Dt(D,H,K){var ae=D[H];D[H]=D[K],D[K]=ae}function We(D,H,K,ae){var oe=D-K,Ce=H-ae;return oe*oe+Ce*Ce}le.fromVectorTileJs=fe,le.fromGeojsonVt=function(D,H){H=H||{};var K={};for(var ae in D)K[ae]=new re(D[ae].features,H),K[ae].name=ae,K[ae].version=H.version,K[ae].extent=H.extent;return fe({layers:K})},le.GeoJSONWrapper=ue;var oa=function(D){return D[0]},li=function(D){return D[1]},da=function(D,H,K,ae,oe){H===void 0&&(H=oa),K===void 0&&(K=li),ae===void 0&&(ae=64),oe===void 0&&(oe=Float64Array),this.nodeSize=ae,this.points=D;for(var Ce=D.length<65536?Uint16Array:Uint32Array,ve=this.ids=new Ce(D.length),J=this.coords=new oe(2*D.length),_e=0;_e<D.length;_e++)ve[_e]=_e,J[2*_e]=H(D[_e]),J[2*_e+1]=K(D[_e]);(function Re(tt,ct,Xe,nt,Pt,Et){if(!(Pt-nt<=Xe)){var Ye=nt+Pt>>1;(function Rt(It,At,Oa,qe,Ae,at){for(;Ae>qe;){if(Ae-qe>600){var rt=Ae-qe+1,$t=Oa-qe+1,wa=Math.log(rt),Ii=.5*Math.exp(2*wa/3),Sa=.5*Math.sqrt(wa*Ii*(rt-Ii)/rt)*($t-rt/2<0?-1:1);Rt(It,At,Oa,Math.max(qe,Math.floor(Oa-$t*Ii/rt+Sa)),Math.min(Ae,Math.floor(Oa+(rt-$t)*Ii/rt+Sa)),at)}var Gi=At[2*Oa+at],Ta=qe,Da=Ae;for(ht(It,At,qe,Oa),At[2*Ae+at]>Gi&&ht(It,At,qe,Ae);Ta<Da;){for(ht(It,At,Ta,Da),Ta++,Da--;At[2*Ta+at]<Gi;)Ta++;for(;At[2*Da+at]>Gi;)Da--}At[2*qe+at]===Gi?ht(It,At,qe,Da):ht(It,At,++Da,Ae),Da<=Oa&&(qe=Da+1),Oa<=Da&&(Ae=Da-1)}})(tt,ct,Ye,nt,Pt,Et%2),Re(tt,ct,Xe,nt,Ye-1,Et+1),Re(tt,ct,Xe,Ye+1,Pt,Et+1)}})(ve,J,ae,0,ve.length-1,0)};da.prototype.range=function(D,H,K,ae){return function(oe,Ce,ve,J,_e,Re,tt){for(var ct,Xe,nt=[0,oe.length-1,0],Pt=[];nt.length;){var Et=nt.pop(),Ye=nt.pop(),Rt=nt.pop();if(Ye-Rt<=tt)for(var It=Rt;It<=Ye;It++)Xe=Ce[2*It+1],(ct=Ce[2*It])>=ve&&ct<=_e&&Xe>=J&&Xe<=Re&&Pt.push(oe[It]);else{var At=Math.floor((Rt+Ye)/2);Xe=Ce[2*At+1],(ct=Ce[2*At])>=ve&&ct<=_e&&Xe>=J&&Xe<=Re&&Pt.push(oe[At]);var Oa=(Et+1)%2;(Et===0?ve<=ct:J<=Xe)&&(nt.push(Rt),nt.push(At-1),nt.push(Oa)),(Et===0?_e>=ct:Re>=Xe)&&(nt.push(At+1),nt.push(Ye),nt.push(Oa))}}return Pt}(this.ids,this.coords,D,H,K,ae,this.nodeSize)},da.prototype.within=function(D,H,K){return function(ae,oe,Ce,ve,J,_e){for(var Re=[0,ae.length-1,0],tt=[],ct=J*J;Re.length;){var Xe=Re.pop(),nt=Re.pop(),Pt=Re.pop();if(nt-Pt<=_e)for(var Et=Pt;Et<=nt;Et++)We(oe[2*Et],oe[2*Et+1],Ce,ve)<=ct&&tt.push(ae[Et]);else{var Ye=Math.floor((Pt+nt)/2),Rt=oe[2*Ye],It=oe[2*Ye+1];We(Rt,It,Ce,ve)<=ct&&tt.push(ae[Ye]);var At=(Xe+1)%2;(Xe===0?Ce-J<=Rt:ve-J<=It)&&(Re.push(Pt),Re.push(Ye-1),Re.push(At)),(Xe===0?Ce+J>=Rt:ve+J>=It)&&(Re.push(Ye+1),Re.push(nt),Re.push(At))}}return tt}(this.ids,this.coords,D,H,K,this.nodeSize)};var Ji={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(D){return D}},sa=function(D){this.options=Ee(Object.create(Ji),D),this.trees=new Array(this.options.maxZoom+1)};function Ni(D,H,K,ae,oe){return{x:D,y:H,zoom:1/0,id:K,parentId:-1,numPoints:ae,properties:oe}}function ka(D,H){var K=D.geometry.coordinates,ae=K[1];return{x:On(K[0]),y:pe(ae),zoom:1/0,index:H,parentId:-1}}function bi(D){return{type:"Feature",id:D.id,properties:cr(D),geometry:{type:"Point",coordinates:[(ae=D.x,360*(ae-.5)),(H=D.y,K=(180-360*H)*Math.PI/180,360*Math.atan(Math.exp(K))/Math.PI-90)]}};var H,K,ae}function cr(D){var H=D.numPoints,K=H>=1e4?Math.round(H/1e3)+"k":H>=1e3?Math.round(H/100)/10+"k":H;return Ee(Ee({},D.properties),{cluster:!0,cluster_id:D.id,point_count:H,point_count_abbreviated:K})}function On(D){return D/360+.5}function pe(D){var H=Math.sin(D*Math.PI/180),K=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return K<0?0:K>1?1:K}function Ee(D,H){for(var K in H)D[K]=H[K];return D}function ze(D){return D.x}function et(D){return D.y}function lt(D,H,K,ae,oe,Ce){var ve=oe-K,J=Ce-ae;if(ve!==0||J!==0){var _e=((D-K)*ve+(H-ae)*J)/(ve*ve+J*J);_e>1?(K=oe,ae=Ce):_e>0&&(K+=ve*_e,ae+=J*_e)}return(ve=D-K)*ve+(J=H-ae)*J}function ot(D,H,K,ae){var oe={id:D===void 0?null:D,type:H,geometry:K,tags:ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ce){var ve=Ce.geometry,J=Ce.type;if(J==="Point"||J==="MultiPoint"||J==="LineString")Tt(Ce,ve);else if(J==="Polygon"||J==="MultiLineString")for(var _e=0;_e<ve.length;_e++)Tt(Ce,ve[_e]);else if(J==="MultiPolygon")for(_e=0;_e<ve.length;_e++)for(var Re=0;Re<ve[_e].length;Re++)Tt(Ce,ve[_e][Re])}(oe),oe}function Tt(D,H){for(var K=0;K<H.length;K+=3)D.minX=Math.min(D.minX,H[K]),D.minY=Math.min(D.minY,H[K+1]),D.maxX=Math.max(D.maxX,H[K]),D.maxY=Math.max(D.maxY,H[K+1])}function ft(D,H,K,ae){if(H.geometry){var oe=H.geometry.coordinates,Ce=H.geometry.type,ve=Math.pow(K.tolerance/((1<<K.maxZoom)*K.extent),2),J=[],_e=H.id;if(K.promoteId?_e=H.properties[K.promoteId]:K.generateId&&(_e=ae||0),Ce==="Point")vt(oe,J);else if(Ce==="MultiPoint")for(var Re=0;Re<oe.length;Re++)vt(oe[Re],J);else if(Ce==="LineString")mt(oe,J,ve,!1);else if(Ce==="MultiLineString"){if(K.lineMetrics){for(Re=0;Re<oe.length;Re++)mt(oe[Re],J=[],ve,!1),D.push(ot(_e,"LineString",J,H.properties));return}Ot(oe,J,ve,!1)}else if(Ce==="Polygon")Ot(oe,J,ve,!0);else{if(Ce!=="MultiPolygon"){if(Ce==="GeometryCollection"){for(Re=0;Re<H.geometry.geometries.length;Re++)ft(D,{id:_e,geometry:H.geometry.geometries[Re],properties:H.properties},K,ae);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Re=0;Re<oe.length;Re++){var tt=[];Ot(oe[Re],tt,ve,!0),J.push(tt)}}D.push(ot(_e,Ce,J,H.properties))}}function vt(D,H){H.push(Lt(D[0])),H.push(qt(D[1])),H.push(0)}function mt(D,H,K,ae){for(var oe,Ce,ve=0,J=0;J<D.length;J++){var _e=Lt(D[J][0]),Re=qt(D[J][1]);H.push(_e),H.push(Re),H.push(0),J>0&&(ve+=ae?(oe*Re-_e*Ce)/2:Math.sqrt(Math.pow(_e-oe,2)+Math.pow(Re-Ce,2))),oe=_e,Ce=Re}var tt=H.length-3;H[2]=1,function ct(Xe,nt,Pt,Et){for(var Ye,Rt=Et,It=Pt-nt>>1,At=Pt-nt,Oa=Xe[nt],qe=Xe[nt+1],Ae=Xe[Pt],at=Xe[Pt+1],rt=nt+3;rt<Pt;rt+=3){var $t=lt(Xe[rt],Xe[rt+1],Oa,qe,Ae,at);if($t>Rt)Ye=rt,Rt=$t;else if($t===Rt){var wa=Math.abs(rt-It);wa<At&&(Ye=rt,At=wa)}}Rt>Et&&(Ye-nt>3&&ct(Xe,nt,Ye,Et),Xe[Ye+2]=Rt,Pt-Ye>3&&ct(Xe,Ye,Pt,Et))}(H,0,tt,K),H[tt+2]=1,H.size=Math.abs(ve),H.start=0,H.end=H.size}function Ot(D,H,K,ae){for(var oe=0;oe<D.length;oe++){var Ce=[];mt(D[oe],Ce,K,ae),H.push(Ce)}}function Lt(D){return D/360+.5}function qt(D){var H=Math.sin(D*Math.PI/180),K=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return K<0?0:K>1?1:K}function Qt(D,H,K,ae,oe,Ce,ve,J){if(ae/=H,Ce>=(K/=H)&&ve<ae)return D;if(ve<K||Ce>=ae)return null;for(var _e=[],Re=0;Re<D.length;Re++){var tt=D[Re],ct=tt.geometry,Xe=tt.type,nt=oe===0?tt.minX:tt.minY,Pt=oe===0?tt.maxX:tt.maxY;if(nt>=K&&Pt<ae)_e.push(tt);else if(!(Pt<K||nt>=ae)){var Et=[];if(Xe==="Point"||Xe==="MultiPoint")Ea(ct,Et,K,ae,oe);else if(Xe==="LineString")si(ct,Et,K,ae,oe,!1,J.lineMetrics);else if(Xe==="MultiLineString")pn(ct,Et,K,ae,oe,!1);else if(Xe==="Polygon")pn(ct,Et,K,ae,oe,!0);else if(Xe==="MultiPolygon")for(var Ye=0;Ye<ct.length;Ye++){var Rt=[];pn(ct[Ye],Rt,K,ae,oe,!0),Rt.length&&Et.push(Rt)}if(Et.length){if(J.lineMetrics&&Xe==="LineString"){for(Ye=0;Ye<Et.length;Ye++)_e.push(ot(tt.id,Xe,Et[Ye],tt.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(Et.length===1?(Xe="LineString",Et=Et[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=Et.length===3?"Point":"MultiPoint"),_e.push(ot(tt.id,Xe,Et,tt.tags))}}}return _e.length?_e:null}function Ea(D,H,K,ae,oe){for(var Ce=0;Ce<D.length;Ce+=3){var ve=D[Ce+oe];ve>=K&&ve<=ae&&(H.push(D[Ce]),H.push(D[Ce+1]),H.push(D[Ce+2]))}}function si(D,H,K,ae,oe,Ce,ve){for(var J,_e,Re=ni(D),tt=oe===0?Pn:fn,ct=D.start,Xe=0;Xe<D.length-3;Xe+=3){var nt=D[Xe],Pt=D[Xe+1],Et=D[Xe+2],Ye=D[Xe+3],Rt=D[Xe+4],It=oe===0?nt:Pt,At=oe===0?Ye:Rt,Oa=!1;ve&&(J=Math.sqrt(Math.pow(nt-Ye,2)+Math.pow(Pt-Rt,2))),It<K?At>K&&(_e=tt(Re,nt,Pt,Ye,Rt,K),ve&&(Re.start=ct+J*_e)):It>ae?At<ae&&(_e=tt(Re,nt,Pt,Ye,Rt,ae),ve&&(Re.start=ct+J*_e)):Di(Re,nt,Pt,Et),At<K&&It>=K&&(_e=tt(Re,nt,Pt,Ye,Rt,K),Oa=!0),At>ae&&It<=ae&&(_e=tt(Re,nt,Pt,Ye,Rt,ae),Oa=!0),!Ce&&Oa&&(ve&&(Re.end=ct+J*_e),H.push(Re),Re=ni(D)),ve&&(ct+=J)}var qe=D.length-3;nt=D[qe],Pt=D[qe+1],Et=D[qe+2],(It=oe===0?nt:Pt)>=K&&It<=ae&&Di(Re,nt,Pt,Et),qe=Re.length-3,Ce&&qe>=3&&(Re[qe]!==Re[0]||Re[qe+1]!==Re[1])&&Di(Re,Re[0],Re[1],Re[2]),Re.length&&H.push(Re)}function ni(D){var H=[];return H.size=D.size,H.start=D.start,H.end=D.end,H}function pn(D,H,K,ae,oe,Ce){for(var ve=0;ve<D.length;ve++)si(D[ve],H,K,ae,oe,Ce,!1)}function Di(D,H,K,ae){D.push(H),D.push(K),D.push(ae)}function Pn(D,H,K,ae,oe,Ce){var ve=(Ce-H)/(ae-H);return D.push(Ce),D.push(K+(oe-K)*ve),D.push(1),ve}function fn(D,H,K,ae,oe,Ce){var ve=(Ce-K)/(oe-K);return D.push(H+(ae-H)*ve),D.push(Ce),D.push(1),ve}function dr(D,H){for(var K=[],ae=0;ae<D.length;ae++){var oe,Ce=D[ae],ve=Ce.type;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")oe=Ir(Ce.geometry,H);else if(ve==="MultiLineString"||ve==="Polygon"){oe=[];for(var J=0;J<Ce.geometry.length;J++)oe.push(Ir(Ce.geometry[J],H))}else if(ve==="MultiPolygon")for(oe=[],J=0;J<Ce.geometry.length;J++){for(var _e=[],Re=0;Re<Ce.geometry[J].length;Re++)_e.push(Ir(Ce.geometry[J][Re],H));oe.push(_e)}K.push(ot(Ce.id,ve,oe,Ce.tags))}return K}function Ir(D,H){var K=[];K.size=D.size,D.start!==void 0&&(K.start=D.start,K.end=D.end);for(var ae=0;ae<D.length;ae+=3)K.push(D[ae]+H,D[ae+1],D[ae+2]);return K}function wi(D,H){if(D.transformed)return D;var K,ae,oe,Ce=1<<D.z,ve=D.x,J=D.y;for(K=0;K<D.features.length;K++){var _e=D.features[K],Re=_e.geometry,tt=_e.type;if(_e.geometry=[],tt===1)for(ae=0;ae<Re.length;ae+=2)_e.geometry.push(hn(Re[ae],Re[ae+1],H,Ce,ve,J));else for(ae=0;ae<Re.length;ae++){var ct=[];for(oe=0;oe<Re[ae].length;oe+=2)ct.push(hn(Re[ae][oe],Re[ae][oe+1],H,Ce,ve,J));_e.geometry.push(ct)}}return D.transformed=!0,D}function hn(D,H,K,ae,oe,Ce){return[Math.round(K*(D*ae-oe)),Math.round(K*(H*ae-Ce))]}function Vs(D,H,K,ae,oe){for(var Ce=H===oe.maxZoom?0:oe.tolerance/((1<<H)*oe.extent),ve={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:K,y:ae,z:H,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},J=0;J<D.length;J++){ve.numFeatures++,oo(ve,D[J],Ce,oe);var _e=D[J].minX,Re=D[J].minY,tt=D[J].maxX,ct=D[J].maxY;_e<ve.minX&&(ve.minX=_e),Re<ve.minY&&(ve.minY=Re),tt>ve.maxX&&(ve.maxX=tt),ct>ve.maxY&&(ve.maxY=ct)}return ve}function oo(D,H,K,ae){var oe=H.geometry,Ce=H.type,ve=[];if(Ce==="Point"||Ce==="MultiPoint")for(var J=0;J<oe.length;J+=3)ve.push(oe[J]),ve.push(oe[J+1]),D.numPoints++,D.numSimplified++;else if(Ce==="LineString")ns(ve,oe,D,K,!1,!1);else if(Ce==="MultiLineString"||Ce==="Polygon")for(J=0;J<oe.length;J++)ns(ve,oe[J],D,K,Ce==="Polygon",J===0);else if(Ce==="MultiPolygon")for(var _e=0;_e<oe.length;_e++){var Re=oe[_e];for(J=0;J<Re.length;J++)ns(ve,Re[J],D,K,!0,J===0)}if(ve.length){var tt=H.tags||null;if(Ce==="LineString"&&ae.lineMetrics){for(var ct in tt={},H.tags)tt[ct]=H.tags[ct];tt.mapbox_clip_start=oe.start/oe.size,tt.mapbox_clip_end=oe.end/oe.size}var Xe={geometry:ve,type:Ce==="Polygon"||Ce==="MultiPolygon"?3:Ce==="LineString"||Ce==="MultiLineString"?2:1,tags:tt};H.id!==null&&(Xe.id=H.id),D.features.push(Xe)}}function ns(D,H,K,ae,oe,Ce){var ve=ae*ae;if(ae>0&&H.size<(oe?ve:ae))K.numPoints+=H.length/3;else{for(var J=[],_e=0;_e<H.length;_e+=3)(ae===0||H[_e+2]>ve)&&(K.numSimplified++,J.push(H[_e]),J.push(H[_e+1])),K.numPoints++;oe&&function(Re,tt){for(var ct=0,Xe=0,nt=Re.length,Pt=nt-2;Xe<nt;Pt=Xe,Xe+=2)ct+=(Re[Xe]-Re[Pt])*(Re[Xe+1]+Re[Pt+1]);if(ct>0===tt)for(Xe=0,nt=Re.length;Xe<nt/2;Xe+=2){var Et=Re[Xe],Ye=Re[Xe+1];Re[Xe]=Re[nt-2-Xe],Re[Xe+1]=Re[nt-1-Xe],Re[nt-2-Xe]=Et,Re[nt-1-Xe]=Ye}}(J,Ce),D.push(J)}}function Tn(D,H){var K=(H=this.options=function(oe,Ce){for(var ve in Ce)oe[ve]=Ce[ve];return oe}(Object.create(this.options),H)).debug;if(K&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");var ae=function(oe,Ce){var ve=[];if(oe.type==="FeatureCollection")for(var J=0;J<oe.features.length;J++)ft(ve,oe.features[J],Ce,J);else ft(ve,oe.type==="Feature"?oe:{geometry:oe},Ce);return ve}(D,H);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(ae=function(oe,Ce){var ve=Ce.buffer/Ce.extent,J=oe,_e=Qt(oe,1,-1-ve,ve,0,-1,2,Ce),Re=Qt(oe,1,1-ve,2+ve,0,-1,2,Ce);return(_e||Re)&&(J=Qt(oe,1,-ve,1+ve,0,-1,2,Ce)||[],_e&&(J=dr(_e,1).concat(J)),Re&&(J=J.concat(dr(Re,-1)))),J}(ae,H)).length&&this.splitTile(ae,0,0,0),K&&(ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Or(D,H,K){return 32*((1<<D)*K+H)+D}function Bo(D,H){var K=D.tileID.canonical;if(!this._geoJSONIndex)return H(null,null);var ae=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!ae)return H(null,null);var oe=new z(ae.features),Ce=le(oe);Ce.byteOffset===0&&Ce.byteLength===Ce.buffer.byteLength||(Ce=new Uint8Array(Ce)),H(null,{vectorTile:oe,rawData:Ce.buffer})}sa.prototype.load=function(D){var H=this.options,K=H.log,ae=H.minZoom,oe=H.maxZoom,Ce=H.nodeSize;K&&console.time("total time");var ve="prepare "+D.length+" points";K&&console.time(ve),this.points=D;for(var J=[],_e=0;_e<D.length;_e++)D[_e].geometry&&J.push(ka(D[_e],_e));this.trees[oe+1]=new da(J,ze,et,Ce,Float32Array),K&&console.timeEnd(ve);for(var Re=oe;Re>=ae;Re--){var tt=+Date.now();J=this._cluster(J,Re),this.trees[Re]=new da(J,ze,et,Ce,Float32Array),K&&console.log("z%d: %d clusters in %dms",Re,J.length,+Date.now()-tt)}return K&&console.timeEnd("total time"),this},sa.prototype.getClusters=function(D,H){var K=((D[0]+180)%360+360)%360-180,ae=Math.max(-90,Math.min(90,D[1])),oe=D[2]===180?180:((D[2]+180)%360+360)%360-180,Ce=Math.max(-90,Math.min(90,D[3]));if(D[2]-D[0]>=360)K=-180,oe=180;else if(K>oe){var ve=this.getClusters([K,ae,180,Ce],H),J=this.getClusters([-180,ae,oe,Ce],H);return ve.concat(J)}for(var _e=this.trees[this._limitZoom(H)],Re=[],tt=0,ct=_e.range(On(K),pe(Ce),On(oe),pe(ae));tt<ct.length;tt+=1){var Xe=_e.points[ct[tt]];Re.push(Xe.numPoints?bi(Xe):this.points[Xe.index])}return Re},sa.prototype.getChildren=function(D){var H=this._getOriginId(D),K=this._getOriginZoom(D),ae="No cluster with the specified id.",oe=this.trees[K];if(!oe)throw new Error(ae);var Ce=oe.points[H];if(!Ce)throw new Error(ae);for(var ve=this.options.radius/(this.options.extent*Math.pow(2,K-1)),J=[],_e=0,Re=oe.within(Ce.x,Ce.y,ve);_e<Re.length;_e+=1){var tt=oe.points[Re[_e]];tt.parentId===D&&J.push(tt.numPoints?bi(tt):this.points[tt.index])}if(J.length===0)throw new Error(ae);return J},sa.prototype.getLeaves=function(D,H,K){var ae=[];return this._appendLeaves(ae,D,H=H||10,K=K||0,0),ae},sa.prototype.getTile=function(D,H,K){var ae=this.trees[this._limitZoom(D)],oe=Math.pow(2,D),Ce=this.options,ve=Ce.radius/Ce.extent,J=(K-ve)/oe,_e=(K+1+ve)/oe,Re={features:[]};return this._addTileFeatures(ae.range((H-ve)/oe,J,(H+1+ve)/oe,_e),ae.points,H,K,oe,Re),H===0&&this._addTileFeatures(ae.range(1-ve/oe,J,1,_e),ae.points,oe,K,oe,Re),H===oe-1&&this._addTileFeatures(ae.range(0,J,ve/oe,_e),ae.points,-1,K,oe,Re),Re.features.length?Re:null},sa.prototype.getClusterExpansionZoom=function(D){for(var H=this._getOriginZoom(D)-1;H<=this.options.maxZoom;){var K=this.getChildren(D);if(H++,K.length!==1)break;D=K[0].properties.cluster_id}return H},sa.prototype._appendLeaves=function(D,H,K,ae,oe){for(var Ce=0,ve=this.getChildren(H);Ce<ve.length;Ce+=1){var J=ve[Ce],_e=J.properties;if(_e&&_e.cluster?oe+_e.point_count<=ae?oe+=_e.point_count:oe=this._appendLeaves(D,_e.cluster_id,K,ae,oe):oe<ae?oe++:D.push(J),D.length===K)break}return oe},sa.prototype._addTileFeatures=function(D,H,K,ae,oe,Ce){for(var ve=0,J=D;ve<J.length;ve+=1){var _e=H[J[ve]],Re=_e.numPoints,tt={type:1,geometry:[[Math.round(this.options.extent*(_e.x*oe-K)),Math.round(this.options.extent*(_e.y*oe-ae))]],tags:Re?cr(_e):this.points[_e.index].properties},ct=void 0;Re?ct=_e.id:this.options.generateId?ct=_e.index:this.points[_e.index].id&&(ct=this.points[_e.index].id),ct!==void 0&&(tt.id=ct),Ce.features.push(tt)}},sa.prototype._limitZoom=function(D){return Math.max(this.options.minZoom,Math.min(+D,this.options.maxZoom+1))},sa.prototype._cluster=function(D,H){for(var K=[],ae=this.options,oe=ae.reduce,Ce=ae.minPoints,ve=ae.radius/(ae.extent*Math.pow(2,H)),J=0;J<D.length;J++){var _e=D[J];if(!(_e.zoom<=H)){_e.zoom=H;for(var Re=this.trees[H+1],tt=Re.within(_e.x,_e.y,ve),ct=_e.numPoints||1,Xe=ct,nt=0,Pt=tt;nt<Pt.length;nt+=1){var Et=Re.points[Pt[nt]];Et.zoom>H&&(Xe+=Et.numPoints||1)}if(Xe>=Ce){for(var Ye=_e.x*ct,Rt=_e.y*ct,It=oe&&ct>1?this._map(_e,!0):null,At=(J<<5)+(H+1)+this.points.length,Oa=0,qe=tt;Oa<qe.length;Oa+=1){var Ae=Re.points[qe[Oa]];if(!(Ae.zoom<=H)){Ae.zoom=H;var at=Ae.numPoints||1;Ye+=Ae.x*at,Rt+=Ae.y*at,Ae.parentId=At,oe&&(It||(It=this._map(_e,!0)),oe(It,this._map(Ae)))}}_e.parentId=At,K.push(Ni(Ye/Xe,Rt/Xe,At,Xe,It))}else if(K.push(_e),Xe>1)for(var rt=0,$t=tt;rt<$t.length;rt+=1){var wa=Re.points[$t[rt]];wa.zoom<=H||(wa.zoom=H,K.push(wa))}}}return K},sa.prototype._getOriginId=function(D){return D-this.points.length>>5},sa.prototype._getOriginZoom=function(D){return(D-this.points.length)%32},sa.prototype._map=function(D,H){if(D.numPoints)return H?Ee({},D.properties):D.properties;var K=this.points[D.index].properties,ae=this.options.map(K);return H&&ae===K?Ee({},ae):ae},Tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Tn.prototype.splitTile=function(D,H,K,ae,oe,Ce,ve){for(var J=[D,H,K,ae],_e=this.options,Re=_e.debug;J.length;){ae=J.pop(),K=J.pop(),H=J.pop(),D=J.pop();var tt=1<<H,ct=Or(H,K,ae),Xe=this.tiles[ct];if(!Xe&&(Re>1&&console.time("creation"),Xe=this.tiles[ct]=Vs(D,H,K,ae,_e),this.tileCoords.push({z:H,x:K,y:ae}),Re)){Re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,K,ae,Xe.numFeatures,Xe.numPoints,Xe.numSimplified),console.timeEnd("creation"));var nt="z"+H;this.stats[nt]=(this.stats[nt]||0)+1,this.total++}if(Xe.source=D,oe){if(H===_e.maxZoom||H===oe)continue;var Pt=1<<oe-H;if(K!==Math.floor(Ce/Pt)||ae!==Math.floor(ve/Pt))continue}else if(H===_e.indexMaxZoom||Xe.numPoints<=_e.indexMaxPoints)continue;if(Xe.source=null,D.length!==0){Re>1&&console.time("clipping");var Et,Ye,Rt,It,At,Oa,qe=.5*_e.buffer/_e.extent,Ae=.5-qe,at=.5+qe,rt=1+qe;Et=Ye=Rt=It=null,At=Qt(D,tt,K-qe,K+at,0,Xe.minX,Xe.maxX,_e),Oa=Qt(D,tt,K+Ae,K+rt,0,Xe.minX,Xe.maxX,_e),D=null,At&&(Et=Qt(At,tt,ae-qe,ae+at,1,Xe.minY,Xe.maxY,_e),Ye=Qt(At,tt,ae+Ae,ae+rt,1,Xe.minY,Xe.maxY,_e),At=null),Oa&&(Rt=Qt(Oa,tt,ae-qe,ae+at,1,Xe.minY,Xe.maxY,_e),It=Qt(Oa,tt,ae+Ae,ae+rt,1,Xe.minY,Xe.maxY,_e),Oa=null),Re>1&&console.timeEnd("clipping"),J.push(Et||[],H+1,2*K,2*ae),J.push(Ye||[],H+1,2*K,2*ae+1),J.push(Rt||[],H+1,2*K+1,2*ae),J.push(It||[],H+1,2*K+1,2*ae+1)}}},Tn.prototype.getTile=function(D,H,K){var ae=this.options,oe=ae.extent,Ce=ae.debug;if(D<0||D>24)return null;var ve=1<<D,J=Or(D,H=(H%ve+ve)%ve,K);if(this.tiles[J])return wi(this.tiles[J],oe);Ce>1&&console.log("drilling down to z%d-%d-%d",D,H,K);for(var _e,Re=D,tt=H,ct=K;!_e&&Re>0;)Re--,tt=Math.floor(tt/2),ct=Math.floor(ct/2),_e=this.tiles[Or(Re,tt,ct)];return _e&&_e.source?(Ce>1&&console.log("found parent tile z%d-%d-%d",Re,tt,ct),Ce>1&&console.time("drilling down"),this.splitTile(_e.source,Re,tt,ct,D,H,K),Ce>1&&console.timeEnd("drilling down"),this.tiles[J]?wi(this.tiles[J],oe):null):null};var nn=function(D){function H(K,ae,oe,Ce){D.call(this,K,ae,oe,Bo),Ce&&(this.loadGeoJSON=Ce)}return D&&(H.__proto__=D),(H.prototype=Object.create(D&&D.prototype)).constructor=H,H.prototype.loadData=function(K,ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=ae,this._pendingLoadDataParams=K,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},H.prototype._loadData=function(){var K=this;if(this._pendingCallback&&this._pendingLoadDataParams){var ae=this._pendingCallback,oe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ce=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new r.RequestPerformance(oe.request);this.loadGeoJSON(oe,function(ve,J){if(ve||!J)return ae(ve);if(typeof J!="object")return ae(new Error("Input data given to '"+oe.source+"' is not a valid GeoJSON object."));(function Xe(nt,Pt){var Et,Ye=nt&&nt.type;if(Ye==="FeatureCollection")for(Et=0;Et<nt.features.length;Et++)Xe(nt.features[Et],Pt);else if(Ye==="GeometryCollection")for(Et=0;Et<nt.geometries.length;Et++)Xe(nt.geometries[Et],Pt);else if(Ye==="Feature")Xe(nt.geometry,Pt);else if(Ye==="Polygon")G(nt.coordinates,Pt);else if(Ye==="MultiPolygon")for(Et=0;Et<nt.coordinates.length;Et++)G(nt.coordinates[Et],Pt);return nt})(J,!0);try{if(oe.filter){var _e=r.createExpression(oe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(function(Xe){return Xe.key+": "+Xe.message}).join(", "));var Re=J.features.filter(function(Xe){return _e.value.evaluate({zoom:0},Xe)});J={type:"FeatureCollection",features:Re}}K._geoJSONIndex=oe.cluster?new sa(function(Xe){var nt=Xe.superclusterOptions,Pt=Xe.clusterProperties;if(!Pt||!nt)return nt;for(var Et={},Ye={},Rt={accumulated:null,zoom:0},It={properties:null},At=Object.keys(Pt),Oa=0,qe=At;Oa<qe.length;Oa+=1){var Ae=qe[Oa],at=Pt[Ae],rt=at[0],$t=r.createExpression(at[1]),wa=r.createExpression(typeof rt=="string"?[rt,["accumulated"],["get",Ae]]:rt);Et[Ae]=$t.value,Ye[Ae]=wa.value}return nt.map=function(Ii){It.properties=Ii;for(var Sa={},Gi=0,Ta=At;Gi<Ta.length;Gi+=1){var Da=Ta[Gi];Sa[Da]=Et[Da].evaluate(Rt,It)}return Sa},nt.reduce=function(Ii,Sa){It.properties=Sa;for(var Gi=0,Ta=At;Gi<Ta.length;Gi+=1){var Da=Ta[Gi];Rt.accumulated=Ii[Da],Ii[Da]=Ye[Da].evaluate(Rt,It)}},nt}(oe)).load(J.features):function(Xe,nt){return new Tn(Xe,nt)}(J,oe.geojsonVtOptions)}catch(Xe){return ae(Xe)}K.loaded={};var tt={};if(Ce){var ct=Ce.finish();ct&&(tt.resourceTiming={},tt.resourceTiming[oe.source]=JSON.parse(JSON.stringify(ct)))}ae(null,tt)})}},H.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},H.prototype.reloadTile=function(K,ae){var oe=this.loaded;return oe&&oe[K.uid]?D.prototype.reloadTile.call(this,K,ae):this.loadTile(K,ae)},H.prototype.loadGeoJSON=function(K,ae){if(K.request)r.getJSON(K.request,ae);else{if(typeof K.data!="string")return ae(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."));try{return ae(null,JSON.parse(K.data))}catch{return ae(new Error("Input data given to '"+K.source+"' is not a valid GeoJSON object."))}}},H.prototype.removeSource=function(K,ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),ae()},H.prototype.getClusterExpansionZoom=function(K,ae){try{ae(null,this._geoJSONIndex.getClusterExpansionZoom(K.clusterId))}catch(oe){ae(oe)}},H.prototype.getClusterChildren=function(K,ae){try{ae(null,this._geoJSONIndex.getChildren(K.clusterId))}catch(oe){ae(oe)}},H.prototype.getClusterLeaves=function(K,ae){try{ae(null,this._geoJSONIndex.getLeaves(K.clusterId,K.limit,K.offset))}catch(oe){ae(oe)}},H}(S),Ja=function(D){var H=this;this.self=D,this.actor=new r.Actor(D,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:S,geojson:nn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(K,ae){if(H.workerSourceTypes[K])throw new Error('Worker source with name "'+K+'" already registered.');H.workerSourceTypes[K]=ae},this.self.registerRTLTextPlugin=function(K){if(r.plugin.isParsed())throw new Error("RTL text plugin already registered.");r.plugin.applyArabicShaping=K.applyArabicShaping,r.plugin.processBidirectionalText=K.processBidirectionalText,r.plugin.processStyledBidirectionalText=K.processStyledBidirectionalText}};return Ja.prototype.setReferrer=function(D,H){this.referrer=H},Ja.prototype.setImages=function(D,H,K){for(var ae in this.availableImages[D]=H,this.workerSources[D]){var oe=this.workerSources[D][ae];for(var Ce in oe)oe[Ce].availableImages=H}K()},Ja.prototype.setLayers=function(D,H,K){this.getLayerIndex(D).replace(H),K()},Ja.prototype.updateLayers=function(D,H,K){this.getLayerIndex(D).update(H.layers,H.removedIds),K()},Ja.prototype.loadTile=function(D,H,K){this.getWorkerSource(D,H.type,H.source).loadTile(H,K)},Ja.prototype.loadDEMTile=function(D,H,K){this.getDEMWorkerSource(D,H.source).loadTile(H,K)},Ja.prototype.reloadTile=function(D,H,K){this.getWorkerSource(D,H.type,H.source).reloadTile(H,K)},Ja.prototype.abortTile=function(D,H,K){this.getWorkerSource(D,H.type,H.source).abortTile(H,K)},Ja.prototype.removeTile=function(D,H,K){this.getWorkerSource(D,H.type,H.source).removeTile(H,K)},Ja.prototype.removeDEMTile=function(D,H){this.getDEMWorkerSource(D,H.source).removeTile(H)},Ja.prototype.removeSource=function(D,H,K){if(this.workerSources[D]&&this.workerSources[D][H.type]&&this.workerSources[D][H.type][H.source]){var ae=this.workerSources[D][H.type][H.source];delete this.workerSources[D][H.type][H.source],ae.removeSource!==void 0?ae.removeSource(H,K):K()}},Ja.prototype.loadWorkerSource=function(D,H,K){try{this.self.importScripts(H.url),K()}catch(ae){K(ae.toString())}},Ja.prototype.syncRTLPluginState=function(D,H,K){try{r.plugin.setState(H);var ae=r.plugin.getPluginURL();if(r.plugin.isLoaded()&&!r.plugin.isParsed()&&ae!=null){this.self.importScripts(ae);var oe=r.plugin.isParsed();K(oe?void 0:new Error("RTL Text Plugin failed to import scripts from "+ae),oe)}}catch(Ce){K(Ce.toString())}},Ja.prototype.getAvailableImages=function(D){var H=this.availableImages[D];return H||(H=[]),H},Ja.prototype.getLayerIndex=function(D){var H=this.layerIndexes[D];return H||(H=this.layerIndexes[D]=new h),H},Ja.prototype.getWorkerSource=function(D,H,K){var ae=this;return this.workerSources[D]||(this.workerSources[D]={}),this.workerSources[D][H]||(this.workerSources[D][H]={}),this.workerSources[D][H][K]||(this.workerSources[D][H][K]=new this.workerSourceTypes[H]({send:function(oe,Ce,ve){ae.actor.send(oe,Ce,ve,D)}},this.getLayerIndex(D),this.getAvailableImages(D))),this.workerSources[D][H][K]},Ja.prototype.getDEMWorkerSource=function(D,H){return this.demWorkerSources[D]||(this.demWorkerSources[D]={}),this.demWorkerSources[D][H]||(this.demWorkerSources[D][H]=new R),this.demWorkerSources[D][H]},Ja.prototype.enforceCacheSizeLimit=function(D,H){r.enforceCacheSizeLimit(H)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Ja(self)),Ja}),s(["./shared"],function(r){var l=r.createCommonjsModule(function(_){function p(I){return!m(I)}function m(I){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var E,k,F=new Blob([""],{type:"text/javascript"}),U=URL.createObjectURL(F);try{k=new Worker(U),E=!0}catch{E=!1}return k&&k.terminate(),URL.revokeObjectURL(U),E}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var E=document.createElement("canvas");E.width=E.height=1;var k=E.getContext("2d");if(!k)return!1;var F=k.getImageData(0,0,1,1);return F&&F.width===E.width}()?(y[T=I&&I.failIfMajorPerformanceCaveat]===void 0&&(y[T]=function(E){var k=function(U){var $=document.createElement("canvas"),ee=Object.create(p.webGLContextAttributes);return ee.failIfMajorPerformanceCaveat=U,$.probablySupportsContext?$.probablySupportsContext("webgl",ee)||$.probablySupportsContext("experimental-webgl",ee):$.supportsContext?$.supportsContext("webgl",ee)||$.supportsContext("experimental-webgl",ee):$.getContext("webgl",ee)||$.getContext("experimental-webgl",ee)}(E);if(!k)return!1;var F=k.createShader(k.VERTEX_SHADER);return!(!F||k.isContextLost())&&(k.shaderSource(F,"void main() {}"),k.compileShader(F),k.getShaderParameter(F,k.COMPILE_STATUS)===!0)}(T)),y[T]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var T}_.exports?_.exports=p:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=p,window.mapboxgl.notSupportedReason=m);var y={};p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),c={create:function(_,p,m){var y=r.window.document.createElement(_);return p!==void 0&&(y.className=p),m&&m.appendChild(y),y},createNS:function(_,p){return r.window.document.createElementNS(_,p)}},h=r.window.document&&r.window.document.documentElement.style;function g(_){if(!h)return _[0];for(var p=0;p<_.length;p++)if(_[p]in h)return _[p];return _[0]}var b,v=g(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);c.disableDrag=function(){h&&v&&(b=h[v],h[v]="none")},c.enableDrag=function(){h&&v&&(h[v]=b)};var C=g(["transform","WebkitTransform"]);c.setTransform=function(_,p){_.style[C]=p};var S=!1;try{var L=Object.defineProperty({},"passive",{get:function(){S=!0}});r.window.addEventListener("test",L,L),r.window.removeEventListener("test",L,L)}catch{S=!1}c.addEventListener=function(_,p,m,y){y===void 0&&(y={}),_.addEventListener(p,m,"passive"in y&&S?y:y.capture)},c.removeEventListener=function(_,p,m,y){y===void 0&&(y={}),_.removeEventListener(p,m,"passive"in y&&S?y:y.capture)};var R=function(_){_.preventDefault(),_.stopPropagation(),r.window.removeEventListener("click",R,!0)};function G(_){var p=_.userImage;return!!(p&&p.render&&p.render())&&(_.data.replace(new Uint8Array(p.data.buffer)),!0)}c.suppressClick=function(){r.window.addEventListener("click",R,!0),r.window.setTimeout(function(){r.window.removeEventListener("click",R,!0)},0)},c.mousePos=function(_,p){var m=_.getBoundingClientRect();return new r.Point(p.clientX-m.left-_.clientLeft,p.clientY-m.top-_.clientTop)},c.touchPos=function(_,p){for(var m=_.getBoundingClientRect(),y=[],I=0;I<p.length;I++)y.push(new r.Point(p[I].clientX-m.left-_.clientLeft,p[I].clientY-m.top-_.clientTop));return y},c.mouseButton=function(_){return r.window.InstallTrigger!==void 0&&_.button===2&&_.ctrlKey&&r.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:_.button},c.remove=function(_){_.parentNode&&_.parentNode.removeChild(_)};var O=function(_){function p(){_.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new r.RGBAImage({width:1,height:1}),this.dirty=!0}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.isLoaded=function(){return this.loaded},p.prototype.setLoaded=function(m){if(this.loaded!==m&&(this.loaded=m,m)){for(var y=0,I=this.requestors;y<I.length;y+=1){var T=I[y];this._notify(T.ids,T.callback)}this.requestors=[]}},p.prototype.getImage=function(m){return this.images[m]},p.prototype.addImage=function(m,y){this._validate(m,y)&&(this.images[m]=y)},p.prototype._validate=function(m,y){var I=!0;return this._validateStretch(y.stretchX,y.data&&y.data.width)||(this.fire(new r.ErrorEvent(new Error('Image "'+m+'" has invalid "stretchX" value'))),I=!1),this._validateStretch(y.stretchY,y.data&&y.data.height)||(this.fire(new r.ErrorEvent(new Error('Image "'+m+'" has invalid "stretchY" value'))),I=!1),this._validateContent(y.content,y)||(this.fire(new r.ErrorEvent(new Error('Image "'+m+'" has invalid "content" value'))),I=!1),I},p.prototype._validateStretch=function(m,y){if(!m)return!0;for(var I=0,T=0,E=m;T<E.length;T+=1){var k=E[T];if(k[0]<I||k[1]<k[0]||y<k[1])return!1;I=k[1]}return!0},p.prototype._validateContent=function(m,y){return!(m&&(m.length!==4||m[0]<0||y.data.width<m[0]||m[1]<0||y.data.height<m[1]||m[2]<0||y.data.width<m[2]||m[3]<0||y.data.height<m[3]||m[2]<m[0]||m[3]<m[1]))},p.prototype.updateImage=function(m,y){y.version=this.images[m].version+1,this.images[m]=y,this.updatedImages[m]=!0},p.prototype.removeImage=function(m){var y=this.images[m];delete this.images[m],delete this.patterns[m],y.userImage&&y.userImage.onRemove&&y.userImage.onRemove()},p.prototype.listImages=function(){return Object.keys(this.images)},p.prototype.getImages=function(m,y){var I=!0;if(!this.isLoaded())for(var T=0,E=m;T<E.length;T+=1)this.images[E[T]]||(I=!1);this.isLoaded()||I?this._notify(m,y):this.requestors.push({ids:m,callback:y})},p.prototype._notify=function(m,y){for(var I={},T=0,E=m;T<E.length;T+=1){var k=E[T];this.images[k]||this.fire(new r.Event("styleimagemissing",{id:k}));var F=this.images[k];F?I[k]={data:F.data.clone(),pixelRatio:F.pixelRatio,sdf:F.sdf,version:F.version,stretchX:F.stretchX,stretchY:F.stretchY,content:F.content,hasRenderCallback:!!(F.userImage&&F.userImage.render)}:r.warnOnce('Image "'+k+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}y(null,I)},p.prototype.getPixelSize=function(){var m=this.atlasImage;return{width:m.width,height:m.height}},p.prototype.getPattern=function(m){var y=this.patterns[m],I=this.getImage(m);if(!I)return null;if(y&&y.position.version===I.version)return y.position;if(y)y.position.version=I.version;else{var T={w:I.data.width+2,h:I.data.height+2,x:0,y:0},E=new r.ImagePosition(T,I);this.patterns[m]={bin:T,position:E}}return this._updatePatternAtlas(),this.patterns[m].position},p.prototype.bind=function(m){var y=m.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new r.Texture(m,this.atlasImage,y.RGBA),this.atlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE)},p.prototype._updatePatternAtlas=function(){var m=[];for(var y in this.patterns)m.push(this.patterns[y].bin);var I=r.potpack(m),T=I.w,E=I.h,k=this.atlasImage;for(var F in k.resize({width:T||1,height:E||1}),this.patterns){var U=this.patterns[F].bin,$=U.x+1,ee=U.y+1,ie=this.images[F].data,ge=ie.width,me=ie.height;r.RGBAImage.copy(ie,k,{x:0,y:0},{x:$,y:ee},{width:ge,height:me}),r.RGBAImage.copy(ie,k,{x:0,y:me-1},{x:$,y:ee-1},{width:ge,height:1}),r.RGBAImage.copy(ie,k,{x:0,y:0},{x:$,y:ee+me},{width:ge,height:1}),r.RGBAImage.copy(ie,k,{x:ge-1,y:0},{x:$-1,y:ee},{width:1,height:me}),r.RGBAImage.copy(ie,k,{x:0,y:0},{x:$+ge,y:ee},{width:1,height:me})}this.dirty=!0},p.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},p.prototype.dispatchRenderCallbacks=function(m){for(var y=0,I=m;y<I.length;y+=1){var T=I[y];if(!this.callbackDispatchedThisFrame[T]){this.callbackDispatchedThisFrame[T]=!0;var E=this.images[T];G(E)&&this.updateImage(T,E)}}},p}(r.Evented),V=j,B=j,z=1e20;function j(_,p,m,y,I,T){this.fontSize=_||24,this.buffer=p===void 0?3:p,this.cutoff=y||.25,this.fontFamily=I||"sans-serif",this.fontWeight=T||"normal",this.radius=m||8;var E=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=E,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(E*E),this.gridInner=new Float64Array(E*E),this.f=new Float64Array(E),this.d=new Float64Array(E),this.z=new Float64Array(E+1),this.v=new Int16Array(E),this.middle=Math.round(E/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function re(_,p,m,y,I,T,E){for(var k=0;k<p;k++){for(var F=0;F<m;F++)y[F]=_[F*p+k];for(ne(y,I,T,E,m),F=0;F<m;F++)_[F*p+k]=I[F]}for(F=0;F<m;F++){for(k=0;k<p;k++)y[k]=_[F*p+k];for(ne(y,I,T,E,p),k=0;k<p;k++)_[F*p+k]=Math.sqrt(I[k])}}function ne(_,p,m,y,I){m[0]=0,y[0]=-z,y[1]=+z;for(var T=1,E=0;T<I;T++){for(var k=(_[T]+T*T-(_[m[E]]+m[E]*m[E]))/(2*T-2*m[E]);k<=y[E];)E--,k=(_[T]+T*T-(_[m[E]]+m[E]*m[E]))/(2*T-2*m[E]);m[++E]=T,y[E]=k,y[E+1]=+z}for(T=0,E=0;T<I;T++){for(;y[E+1]<T;)E++;p[T]=(T-m[E])*(T-m[E])+_[m[E]]}}j.prototype.draw=function(_){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(_,this.buffer,this.middle);for(var p=this.ctx.getImageData(0,0,this.size,this.size),m=new Uint8ClampedArray(this.size*this.size),y=0;y<this.size*this.size;y++){var I=p.data[4*y+3]/255;this.gridOuter[y]=I===1?0:I===0?z:Math.pow(Math.max(0,.5-I),2),this.gridInner[y]=I===1?z:I===0?0:Math.pow(Math.max(0,I-.5),2)}for(re(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),re(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),y=0;y<this.size*this.size;y++)m[y]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[y]-this.gridInner[y])/this.radius+this.cutoff))));return m},V.default=B;var te=function(_,p){this.requestManager=_,this.localIdeographFontFamily=p,this.entries={}};te.prototype.setURL=function(_){this.url=_},te.prototype.getGlyphs=function(_,p){var m=this,y=[];for(var I in _)for(var T=0,E=_[I];T<E.length;T+=1)y.push({stack:I,id:E[T]});r.asyncAll(y,function(k,F){var U=k.stack,$=k.id,ee=m.entries[U];ee||(ee=m.entries[U]={glyphs:{},requests:{},ranges:{}});var ie=ee.glyphs[$];if(ie===void 0){if(ie=m._tinySDF(ee,U,$))return ee.glyphs[$]=ie,void F(null,{stack:U,id:$,glyph:ie});var ge=Math.floor($/256);if(256*ge>65535)F(new Error("glyphs > 65535 not supported"));else if(ee.ranges[ge])F(null,{stack:U,id:$,glyph:ie});else{var me=ee.requests[ge];me||(me=ee.requests[ge]=[],te.loadGlyphRange(U,ge,m.url,m.requestManager,function(we,ce){if(ce){for(var xe in ce)m._doesCharSupportLocalGlyph(+xe)||(ee.glyphs[+xe]=ce[+xe]);ee.ranges[ge]=!0}for(var Te=0,Ge=me;Te<Ge.length;Te+=1)(0,Ge[Te])(we,ce);delete ee.requests[ge]})),me.push(function(we,ce){we?F(we):ce&&F(null,{stack:U,id:$,glyph:ce[$]||null})})}}else F(null,{stack:U,id:$,glyph:ie})},function(k,F){if(k)p(k);else if(F){for(var U={},$=0,ee=F;$<ee.length;$+=1){var ie=ee[$],ge=ie.stack,me=ie.id,we=ie.glyph;(U[ge]||(U[ge]={}))[me]=we&&{id:we.id,bitmap:we.bitmap.clone(),metrics:we.metrics}}p(null,U)}})},te.prototype._doesCharSupportLocalGlyph=function(_){return!!this.localIdeographFontFamily&&(r.isChar["CJK Unified Ideographs"](_)||r.isChar["Hangul Syllables"](_)||r.isChar.Hiragana(_)||r.isChar.Katakana(_))},te.prototype._tinySDF=function(_,p,m){var y=this.localIdeographFontFamily;if(y&&this._doesCharSupportLocalGlyph(m)){var I=_.tinySDF;if(!I){var T="400";/bold/i.test(p)?T="900":/medium/i.test(p)?T="500":/light/i.test(p)&&(T="200"),I=_.tinySDF=new te.TinySDF(24,3,8,.25,y,T)}return{id:m,bitmap:new r.AlphaImage({width:30,height:30},I.draw(String.fromCharCode(m))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},te.loadGlyphRange=function(_,p,m,y,I){var T=256*p,E=T+255,k=y.transformRequest(y.normalizeGlyphsURL(m).replace("{fontstack}",_).replace("{range}",T+"-"+E),r.ResourceType.Glyphs);r.getArrayBuffer(k,function(F,U){if(F)I(F);else if(U){for(var $={},ee=0,ie=r.parseGlyphPBF(U);ee<ie.length;ee+=1){var ge=ie[ee];$[ge.id]=ge}I(null,$)}})},te.TinySDF=V;var le=function(){this.specification=r.styleSpec.light.position};le.prototype.possiblyEvaluate=function(_,p){return r.sphericalToCartesian(_.expression.evaluate(p))},le.prototype.interpolate=function(_,p,m){return{x:r.number(_.x,p.x,m),y:r.number(_.y,p.y,m),z:r.number(_.z,p.z,m)}};var ue=new r.Properties({anchor:new r.DataConstantProperty(r.styleSpec.light.anchor),position:new le,color:new r.DataConstantProperty(r.styleSpec.light.color),intensity:new r.DataConstantProperty(r.styleSpec.light.intensity)}),fe=function(_){function p(m){_.call(this),this._transitionable=new r.Transitionable(ue),this.setLight(m),this._transitioning=this._transitionable.untransitioned()}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getLight=function(){return this._transitionable.serialize()},p.prototype.setLight=function(m,y){if(y===void 0&&(y={}),!this._validate(r.validateLight,m,y))for(var I in m){var T=m[I];r.endsWith(I,"-transition")?this._transitionable.setTransition(I.slice(0,-11),T):this._transitionable.setValue(I,T)}},p.prototype.updateTransitions=function(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)},p.prototype.hasTransition=function(){return this._transitioning.hasTransition()},p.prototype.recalculate=function(m){this.properties=this._transitioning.possiblyEvaluate(m)},p.prototype._validate=function(m,y,I){return(!I||I.validate!==!1)&&r.emitValidationErrors(this,m.call(r.validateStyle,r.extend({value:y,style:{glyphs:!0,sprite:!0},styleSpec:r.styleSpec})))},p}(r.Evented),be=function(_,p){this.width=_,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};be.prototype.getDash=function(_,p){var m=_.join(",")+String(p);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(_,p)),this.dashEntry[m]},be.prototype.getDashRanges=function(_,p,m){var y=[],I=_.length%2==1?-_[_.length-1]*m:0,T=_[0]*m,E=!0;y.push({left:I,right:T,isDash:E,zeroLength:_[0]===0});for(var k=_[0],F=1;F<_.length;F++){var U=_[F];y.push({left:I=k*m,right:T=(k+=U)*m,isDash:E=!E,zeroLength:U===0})}return y},be.prototype.addRoundDash=function(_,p,m){for(var y=p/2,I=-m;I<=m;I++)for(var T=this.width*(this.nextRow+m+I),E=0,k=_[E],F=0;F<this.width;F++){F/k.right>1&&(k=_[++E]);var U=Math.abs(F-k.left),$=Math.abs(F-k.right),ee=Math.min(U,$),ie=void 0,ge=I/m*(y+1);if(k.isDash){var me=y-Math.abs(ge);ie=Math.sqrt(ee*ee+me*me)}else ie=y-Math.sqrt(ee*ee+ge*ge);this.data[T+F]=Math.max(0,Math.min(255,ie+128))}},be.prototype.addRegularDash=function(_){for(var p=_.length-1;p>=0;--p){var m=_[p],y=_[p+1];m.zeroLength?_.splice(p,1):y&&y.isDash===m.isDash&&(y.left=m.left,_.splice(p,1))}var I=_[0],T=_[_.length-1];I.isDash===T.isDash&&(I.left=T.left-this.width,T.right=I.right+this.width);for(var E=this.width*this.nextRow,k=0,F=_[k],U=0;U<this.width;U++){U/F.right>1&&(F=_[++k]);var $=Math.abs(U-F.left),ee=Math.abs(U-F.right),ie=Math.min($,ee);this.data[E+U]=Math.max(0,Math.min(255,(F.isDash?ie:-ie)+128))}},be.prototype.addDash=function(_,p){var m=p?7:0,y=2*m+1;if(this.nextRow+y>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var I=0,T=0;T<_.length;T++)I+=_[T];if(I!==0){var E=this.width/I,k=this.getDashRanges(_,this.width,E);p?this.addRoundDash(k,E,m):this.addRegularDash(k)}var F={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:I};return this.nextRow+=y,this.dirty=!0,F},be.prototype.bind=function(_){var p=_.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))};var Pe=function _(p,m){this.workerPool=p,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var y=this.workerPool.acquire(this.id),I=0;I<y.length;I++){var T=new _.Actor(y[I],m,this.id);T.name="Worker "+I,this.actors.push(T)}};function Be(_,p,m){var y=function(I,T){if(I)return m(I);if(T){var E=r.pick(r.extend(T,_),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);T.vector_layers&&(E.vectorLayers=T.vector_layers,E.vectorLayerIds=E.vectorLayers.map(function(k){return k.id})),E.tiles=p.canonicalizeTileset(E,_.url),m(null,E)}};return _.url?r.getJSON(p.transformRequest(p.normalizeSourceURL(_.url),r.ResourceType.Source),y):r.browser.frame(function(){return y(null,_)})}Pe.prototype.broadcast=function(_,p,m){r.asyncAll(this.actors,function(y,I){y.send(_,p,I)},m=m||function(){})},Pe.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Pe.prototype.remove=function(){this.actors.forEach(function(_){_.remove()}),this.actors=[],this.workerPool.release(this.id)},Pe.Actor=r.Actor;var Me=function(_,p,m){this.bounds=r.LngLatBounds.convert(this.validateBounds(_)),this.minzoom=p||0,this.maxzoom=m||24};Me.prototype.validateBounds=function(_){return Array.isArray(_)&&_.length===4?[Math.max(-180,_[0]),Math.max(-90,_[1]),Math.min(180,_[2]),Math.min(90,_[3])]:[-180,-90,180,90]},Me.prototype.contains=function(_){var p=Math.pow(2,_.z),m=Math.floor(r.mercatorXfromLng(this.bounds.getWest())*p),y=Math.floor(r.mercatorYfromLat(this.bounds.getNorth())*p),I=Math.ceil(r.mercatorXfromLng(this.bounds.getEast())*p),T=Math.ceil(r.mercatorYfromLat(this.bounds.getSouth())*p);return _.x>=m&&_.x<I&&_.y>=y&&_.y<T};var ke=function(_){function p(m,y,I,T){if(_.call(this),this.id=m,this.dispatcher=I,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,r.extend(this,r.pick(y,["url","scheme","tileSize","promoteId"])),this._options=r.extend({type:"vector"},y),this._collectResourceTiming=y.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(T)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.load=function(){var m=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,function(y,I){m._tileJSONRequest=null,m._loaded=!0,y?m.fire(new r.ErrorEvent(y)):I&&(r.extend(m,I),I.bounds&&(m.tileBounds=new Me(I.bounds,m.minzoom,m.maxzoom)),r.postTurnstileEvent(I.tiles,m.map._requestManager._customAccessToken),r.postMapLoadEvent(I.tiles,m.map._getMapId(),m.map._requestManager._skuToken,m.map._requestManager._customAccessToken),m.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),m.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.hasTile=function(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)},p.prototype.onAdd=function(m){this.map=m,this.load()},p.prototype.setSourceProperty=function(m){this._tileJSONRequest&&this._tileJSONRequest.cancel(),m(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},p.prototype.setTiles=function(m){var y=this;return this.setSourceProperty(function(){y._options.tiles=m}),this},p.prototype.setUrl=function(m){var y=this;return this.setSourceProperty(function(){y.url=m,y._options.url=m}),this},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return r.extend({},this._options)},p.prototype.loadTile=function(m,y){var I=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),T={request:this.map._requestManager.transformRequest(I,r.ResourceType.Tile),uid:m.uid,tileID:m.tileID,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(k,F){return delete m.request,m.aborted?y(null):k&&k.status!==404?y(k):(F&&F.resourceTiming&&(m.resourceTiming=F.resourceTiming),this.map._refreshExpiredTiles&&F&&m.setExpiryData(F),m.loadVectorData(F,this.map.painter),r.cacheEntryPossiblyAdded(this.dispatcher),y(null),void(m.reloadCallback&&(this.loadTile(m,m.reloadCallback),m.reloadCallback=null)))}T.request.collectResourceTiming=this._collectResourceTiming,m.actor&&m.state!=="expired"?m.state==="loading"?m.reloadCallback=y:m.request=m.actor.send("reloadTile",T,E.bind(this)):(m.actor=this.dispatcher.getActor(),m.request=m.actor.send("loadTile",T,E.bind(this)))},p.prototype.abortTile=function(m){m.request&&(m.request.cancel(),delete m.request),m.actor&&m.actor.send("abortTile",{uid:m.uid,type:this.type,source:this.id},void 0)},p.prototype.unloadTile=function(m){m.unloadVectorData(),m.actor&&m.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id},void 0)},p.prototype.hasTransition=function(){return!1},p}(r.Evented),Je=function(_){function p(m,y,I,T){_.call(this),this.id=m,this.dispatcher=I,this.setEventedParent(T),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({type:"raster"},y),r.extend(this,r.pick(y,["url","scheme","tileSize"]))}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.load=function(){var m=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Be(this._options,this.map._requestManager,function(y,I){m._tileJSONRequest=null,m._loaded=!0,y?m.fire(new r.ErrorEvent(y)):I&&(r.extend(m,I),I.bounds&&(m.tileBounds=new Me(I.bounds,m.minzoom,m.maxzoom)),r.postTurnstileEvent(I.tiles),r.postMapLoadEvent(I.tiles,m.map._getMapId(),m.map._requestManager._skuToken),m.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})),m.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})))})},p.prototype.loaded=function(){return this._loaded},p.prototype.onAdd=function(m){this.map=m,this.load()},p.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},p.prototype.serialize=function(){return r.extend({},this._options)},p.prototype.hasTile=function(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)},p.prototype.loadTile=function(m,y){var I=this,T=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);m.request=r.getImage(this.map._requestManager.transformRequest(T,r.ResourceType.Tile),function(E,k){if(delete m.request,m.aborted)m.state="unloaded",y(null);else if(E)m.state="errored",y(E);else if(k){I.map._refreshExpiredTiles&&m.setExpiryData(k),delete k.cacheControl,delete k.expires;var F=I.map.painter.context,U=F.gl;m.texture=I.map.painter.getTileTexture(k.width),m.texture?m.texture.update(k,{useMipmap:!0}):(m.texture=new r.Texture(F,k,U.RGBA,{useMipmap:!0}),m.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST),F.extTextureFilterAnisotropic&&U.texParameterf(U.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax)),m.state="loaded",r.cacheEntryPossiblyAdded(I.dispatcher),y(null)}})},p.prototype.abortTile=function(m,y){m.request&&(m.request.cancel(),delete m.request),y()},p.prototype.unloadTile=function(m,y){m.texture&&this.map.painter.saveTileTexture(m.texture),y()},p.prototype.hasTransition=function(){return!1},p}(r.Evented),ut=function(_){function p(m,y,I,T){_.call(this,m,y,I,T),this.type="raster-dem",this.maxzoom=22,this._options=r.extend({type:"raster-dem"},y),this.encoding=y.encoding||"mapbox"}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},p.prototype.loadTile=function(m,y){var I=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function T(E,k){E&&(m.state="errored",y(E)),k&&(m.dem=k,m.needsHillshadePrepare=!0,m.state="loaded",y(null))}m.request=r.getImage(this.map._requestManager.transformRequest(I,r.ResourceType.Tile),(function(E,k){if(delete m.request,m.aborted)m.state="unloaded",y(null);else if(E)m.state="errored",y(E);else if(k){this.map._refreshExpiredTiles&&m.setExpiryData(k),delete k.cacheControl,delete k.expires;var F=r.window.ImageBitmap&&k instanceof r.window.ImageBitmap&&r.offscreenCanvasSupported()?k:r.browser.getImageData(k,1),U={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:F,encoding:this.encoding};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",U,T.bind(this)))}}).bind(this)),m.neighboringTiles=this._getNeighboringTiles(m.tileID)},p.prototype._getNeighboringTiles=function(m){var y=m.canonical,I=Math.pow(2,y.z),T=(y.x-1+I)%I,E=y.x===0?m.wrap-1:m.wrap,k=(y.x+1+I)%I,F=y.x+1===I?m.wrap+1:m.wrap,U={};return U[new r.OverscaledTileID(m.overscaledZ,E,y.z,T,y.y).key]={backfilled:!1},U[new r.OverscaledTileID(m.overscaledZ,F,y.z,k,y.y).key]={backfilled:!1},y.y>0&&(U[new r.OverscaledTileID(m.overscaledZ,E,y.z,T,y.y-1).key]={backfilled:!1},U[new r.OverscaledTileID(m.overscaledZ,m.wrap,y.z,y.x,y.y-1).key]={backfilled:!1},U[new r.OverscaledTileID(m.overscaledZ,F,y.z,k,y.y-1).key]={backfilled:!1}),y.y+1<I&&(U[new r.OverscaledTileID(m.overscaledZ,E,y.z,T,y.y+1).key]={backfilled:!1},U[new r.OverscaledTileID(m.overscaledZ,m.wrap,y.z,y.x,y.y+1).key]={backfilled:!1},U[new r.OverscaledTileID(m.overscaledZ,F,y.z,k,y.y+1).key]={backfilled:!1}),U},p.prototype.unloadTile=function(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded",m.actor&&m.actor.send("removeDEMTile",{uid:m.uid,source:this.id})},p}(Je),ht=function(_){function p(m,y,I,T){_.call(this),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=I.getActor(),this.setEventedParent(T),this._data=y.data,this._options=r.extend({},y),this._collectResourceTiming=y.collectResourceTiming,this._resourceTiming=[],y.maxzoom!==void 0&&(this.maxzoom=y.maxzoom),y.type&&(this.type=y.type),y.attribution&&(this.attribution=y.attribution),this.promoteId=y.promoteId;var E=r.EXTENT/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:y.cluster||!1,geojsonVtOptions:{buffer:(y.buffer!==void 0?y.buffer:128)*E,tolerance:(y.tolerance!==void 0?y.tolerance:.375)*E,extent:r.EXTENT,maxZoom:this.maxzoom,lineMetrics:y.lineMetrics||!1,generateId:y.generateId||!1},superclusterOptions:{maxZoom:y.clusterMaxZoom!==void 0?Math.min(y.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,y.clusterMinPoints||2),extent:r.EXTENT,radius:(y.clusterRadius||50)*E,log:!1,generateId:y.generateId||!1},clusterProperties:y.clusterProperties,filter:y.filter},y.workerOptions)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.load=function(){var m=this;this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(y){if(y)m.fire(new r.ErrorEvent(y));else{var I={dataType:"source",sourceDataType:"metadata"};m._collectResourceTiming&&m._resourceTiming&&m._resourceTiming.length>0&&(I.resourceTiming=m._resourceTiming,m._resourceTiming=[]),m.fire(new r.Event("data",I))}})},p.prototype.onAdd=function(m){this.map=m,this.load()},p.prototype.setData=function(m){var y=this;return this._data=m,this.fire(new r.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(I){if(I)y.fire(new r.ErrorEvent(I));else{var T={dataType:"source",sourceDataType:"content"};y._collectResourceTiming&&y._resourceTiming&&y._resourceTiming.length>0&&(T.resourceTiming=y._resourceTiming,y._resourceTiming=[]),y.fire(new r.Event("data",T))}}),this},p.prototype.getClusterExpansionZoom=function(m,y){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},y),this},p.prototype.getClusterChildren=function(m,y){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},y),this},p.prototype.getClusterLeaves=function(m,y,I,T){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:y,offset:I},T),this},p.prototype._updateWorkerData=function(m){var y=this;this._loaded=!1;var I=r.extend({},this.workerOptions),T=this._data;typeof T=="string"?(I.request=this.map._requestManager.transformRequest(r.browser.resolveURL(T),r.ResourceType.Source),I.request.collectResourceTiming=this._collectResourceTiming):I.data=JSON.stringify(T),this.actor.send(this.type+".loadData",I,function(E,k){y._removed||k&&k.abandoned||(y._loaded=!0,k&&k.resourceTiming&&k.resourceTiming[y.id]&&(y._resourceTiming=k.resourceTiming[y.id].slice(0)),y.actor.send(y.type+".coalesce",{source:I.source},null),m(E))})},p.prototype.loaded=function(){return this._loaded},p.prototype.loadTile=function(m,y){var I=this,T=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(T,{type:this.type,uid:m.uid,tileID:m.tileID,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:r.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(E,k){return delete m.request,m.unloadVectorData(),m.aborted?y(null):E?y(E):(m.loadVectorData(k,I.map.painter,T==="reloadTile"),y(null))})},p.prototype.abortTile=function(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0},p.prototype.unloadTile=function(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})},p.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},p.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},p.prototype.hasTransition=function(){return!1},p}(r.Evented),Dt=r.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),We=function(_){function p(m,y,I,T){_.call(this),this.id=m,this.dispatcher=I,this.coordinates=y.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(T),this.options=y}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.load=function(m,y){var I=this;this._loaded=!1,this.fire(new r.Event("dataloading",{dataType:"source"})),this.url=this.options.url,r.getImage(this.map._requestManager.transformRequest(this.url,r.ResourceType.Image),function(T,E){I._loaded=!0,T?I.fire(new r.ErrorEvent(T)):E&&(I.image=E,m&&(I.coordinates=m),y&&y(),I._finishLoading())})},p.prototype.loaded=function(){return this._loaded},p.prototype.updateImage=function(m){var y=this;return this.image&&m.url?(this.options.url=m.url,this.load(m.coordinates,function(){y.texture=null}),this):this},p.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"metadata"})))},p.prototype.onAdd=function(m){this.map=m,this.load()},p.prototype.setCoordinates=function(m){var y=this;this.coordinates=m;var I=m.map(r.MercatorCoordinate.fromLngLat);this.tileID=function(E){for(var k=1/0,F=1/0,U=-1/0,$=-1/0,ee=0,ie=E;ee<ie.length;ee+=1){var ge=ie[ee];k=Math.min(k,ge.x),F=Math.min(F,ge.y),U=Math.max(U,ge.x),$=Math.max($,ge.y)}var me=Math.max(U-k,$-F),we=Math.max(0,Math.floor(-Math.log(me)/Math.LN2)),ce=Math.pow(2,we);return new r.CanonicalTileID(we,Math.floor((k+U)/2*ce),Math.floor((F+$)/2*ce))}(I),this.minzoom=this.maxzoom=this.tileID.z;var T=I.map(function(E){return y.tileID.getTilePoint(E)._round()});return this._boundsArray=new r.StructArrayLayout4i8,this._boundsArray.emplaceBack(T[0].x,T[0].y,0,0),this._boundsArray.emplaceBack(T[1].x,T[1].y,r.EXTENT,0),this._boundsArray.emplaceBack(T[3].x,T[3].y,0,r.EXTENT),this._boundsArray.emplaceBack(T[2].x,T[2].y,r.EXTENT,r.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new r.Event("data",{dataType:"source",sourceDataType:"content"})),this},p.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var m=this.map.painter.context,y=m.gl;for(var I in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Dt.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new r.Texture(m,this.image,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE)),this.tiles){var T=this.tiles[I];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture)}}},p.prototype.loadTile=function(m,y){this.tileID&&this.tileID.equals(m.tileID.canonical)?(this.tiles[String(m.tileID.wrap)]=m,m.buckets={},y(null)):(m.state="errored",y(null))},p.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return!1},p}(r.Evented),oa=function(_){function p(m,y,I,T){_.call(this,m,y,I,T),this.roundZoom=!0,this.type="video",this.options=y}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.load=function(){var m=this;this._loaded=!1;var y=this.options;this.urls=[];for(var I=0,T=y.urls;I<T.length;I+=1)this.urls.push(this.map._requestManager.transformRequest(T[I],r.ResourceType.Source).url);r.getVideo(this.urls,function(E,k){m._loaded=!0,E?m.fire(new r.ErrorEvent(E)):k&&(m.video=k,m.video.loop=!0,m.video.setAttribute("playsinline",""),m.video.addEventListener("playing",function(){m.map.triggerRepaint()}),m.map&&m.video.play(),m._finishLoading())})},p.prototype.pause=function(){this.video&&this.video.pause()},p.prototype.play=function(){this.video&&this.video.play()},p.prototype.seek=function(m){if(this.video){var y=this.video.seekable;m<y.start(0)||m>y.end(0)?this.fire(new r.ErrorEvent(new r.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+y.start(0)+" and "+y.end(0)+"-second mark."))):this.video.currentTime=m}},p.prototype.getVideo=function(){return this.video},p.prototype.onAdd=function(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},p.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var m=this.map.painter.context,y=m.gl;for(var I in this.boundsBuffer||(this.boundsBuffer=m.createVertexBuffer(this._boundsArray,Dt.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.texSubImage2D(y.TEXTURE_2D,0,0,0,y.RGBA,y.UNSIGNED_BYTE,this.video)):(this.texture=new r.Texture(m,this.video,y.RGBA),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE)),this.tiles){var T=this.tiles[I];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this.video&&!this.video.paused},p}(We),li=function(_){function p(m,y,I,T){_.call(this,m,y,I,T),y.coordinates?Array.isArray(y.coordinates)&&y.coordinates.length===4&&!y.coordinates.some(function(E){return!Array.isArray(E)||E.length!==2||E.some(function(k){return typeof k!="number"})})||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+m,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+m,null,'missing required property "coordinates"'))),y.animate&&typeof y.animate!="boolean"&&this.fire(new r.ErrorEvent(new r.ValidationError("sources."+m,null,'optional "animate" property must be a boolean value'))),y.canvas?typeof y.canvas=="string"||y.canvas instanceof r.window.HTMLCanvasElement||this.fire(new r.ErrorEvent(new r.ValidationError("sources."+m,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new r.ErrorEvent(new r.ValidationError("sources."+m,null,'missing required property "canvas"'))),this.options=y,this.animate=y.animate===void 0||y.animate}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof r.window.HTMLCanvasElement?this.options.canvas:r.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new r.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},p.prototype.getCanvas=function(){return this.canvas},p.prototype.onAdd=function(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()},p.prototype.onRemove=function(){this.pause()},p.prototype.prepare=function(){var m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var y=this.map.painter.context,I=y.gl;for(var T in this.boundsBuffer||(this.boundsBuffer=y.createVertexBuffer(this._boundsArray,Dt.members)),this.boundsSegments||(this.boundsSegments=r.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new r.Texture(y,this.canvas,I.RGBA,{premultiply:!0}),this.tiles){var E=this.tiles[T];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}},p.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},p.prototype.hasTransition=function(){return this._playing},p.prototype._hasInvalidDimensions=function(){for(var m=0,y=[this.canvas.width,this.canvas.height];m<y.length;m+=1){var I=y[m];if(isNaN(I)||I<=0)return!0}return!1},p}(We),da={vector:ke,raster:Je,"raster-dem":ut,geojson:ht,video:oa,image:We,canvas:li};function Ji(_,p){var m=r.identity([]);return r.translate(m,m,[1,1,0]),r.scale(m,m,[.5*_.width,.5*_.height,1]),r.multiply(m,m,_.calculatePosMatrix(p.toUnwrapped()))}function sa(_,p,m,y,I,T){var E=function(we,ce,xe){if(we)for(var Te=0,Ge=we;Te<Ge.length;Te+=1){var Ue=ce[Ge[Te]];if(Ue&&Ue.source===xe&&Ue.type==="fill-extrusion")return!0}else for(var De in ce){var He=ce[De];if(He.source===xe&&He.type==="fill-extrusion")return!0}return!1}(I&&I.layers,p,_.id),k=T.maxPitchScaleFactor(),F=_.tilesIn(y,k,E);F.sort(Ni);for(var U=[],$=0,ee=F;$<ee.length;$+=1){var ie=ee[$];U.push({wrappedTileID:ie.tileID.wrapped().key,queryResults:ie.tile.queryRenderedFeatures(p,m,_._state,ie.queryGeometry,ie.cameraQueryGeometry,ie.scale,I,T,k,Ji(_.transform,ie.tileID))})}var ge=function(we){for(var ce={},xe={},Te=0,Ge=we;Te<Ge.length;Te+=1){var Ue=Ge[Te],De=Ue.queryResults,He=Ue.wrappedTileID,it=xe[He]=xe[He]||{};for(var yt in De)for(var gt=De[yt],Gt=it[yt]=it[yt]||{},ta=ce[yt]=ce[yt]||[],ra=0,na=gt;ra<na.length;ra+=1){var ci=na[ra];Gt[ci.featureIndex]||(Gt[ci.featureIndex]=!0,ta.push(ci))}}return ce}(U);for(var me in ge)ge[me].forEach(function(we){var ce=we.feature,xe=_.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=xe});return ge}function Ni(_,p){var m=_.tileID,y=p.tileID;return m.overscaledZ-y.overscaledZ||m.canonical.y-y.canonical.y||m.wrap-y.wrap||m.canonical.x-y.canonical.x}var ka=function(_,p){this.max=_,this.onRemove=p,this.reset()};ka.prototype.reset=function(){for(var _ in this.data)for(var p=0,m=this.data[_];p<m.length;p+=1){var y=m[p];y.timeout&&clearTimeout(y.timeout),this.onRemove(y.value)}return this.data={},this.order=[],this},ka.prototype.add=function(_,p,m){var y=this,I=_.wrapped().key;this.data[I]===void 0&&(this.data[I]=[]);var T={value:p,timeout:void 0};if(m!==void 0&&(T.timeout=setTimeout(function(){y.remove(_,T)},m)),this.data[I].push(T),this.order.push(I),this.order.length>this.max){var E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this},ka.prototype.has=function(_){return _.wrapped().key in this.data},ka.prototype.getAndRemove=function(_){return this.has(_)?this._getAndRemoveByKey(_.wrapped().key):null},ka.prototype._getAndRemoveByKey=function(_){var p=this.data[_].shift();return p.timeout&&clearTimeout(p.timeout),this.data[_].length===0&&delete this.data[_],this.order.splice(this.order.indexOf(_),1),p.value},ka.prototype.getByKey=function(_){var p=this.data[_];return p?p[0].value:null},ka.prototype.get=function(_){return this.has(_)?this.data[_.wrapped().key][0].value:null},ka.prototype.remove=function(_,p){if(!this.has(_))return this;var m=_.wrapped().key,y=p===void 0?0:this.data[m].indexOf(p),I=this.data[m][y];return this.data[m].splice(y,1),I.timeout&&clearTimeout(I.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(I.value),this.order.splice(this.order.indexOf(m),1),this},ka.prototype.setMaxSize=function(_){for(this.max=_;this.order.length>this.max;){var p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this},ka.prototype.filter=function(_){var p=[];for(var m in this.data)for(var y=0,I=this.data[m];y<I.length;y+=1){var T=I[y];_(T.value)||p.push(T)}for(var E=0,k=p;E<k.length;E+=1){var F=k[E];this.remove(F.value.tileID,F)}};var bi=function(_,p,m){this.context=_;var y=_.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!m,this.context.unbindVAO(),_.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};bi.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},bi.prototype.updateData=function(_){var p=this.context.gl;this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,_.arrayBuffer)},bi.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var cr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},On=function(_,p,m,y){this.length=p.length,this.attributes=m,this.itemSize=p.bytesPerElement,this.dynamicDraw=y,this.context=_;var I=_.gl;this.buffer=I.createBuffer(),_.bindVertexBuffer.set(this.buffer),I.bufferData(I.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?I.DYNAMIC_DRAW:I.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer};On.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},On.prototype.updateData=function(_){var p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,_.arrayBuffer)},On.prototype.enableAttributes=function(_,p){for(var m=0;m<this.attributes.length;m++){var y=p.attributes[this.attributes[m].name];y!==void 0&&_.enableVertexAttribArray(y)}},On.prototype.setVertexAttribPointers=function(_,p,m){for(var y=0;y<this.attributes.length;y++){var I=this.attributes[y],T=p.attributes[I.name];T!==void 0&&_.vertexAttribPointer(T,I.components,_[cr[I.type]],!1,this.itemSize,I.offset+this.itemSize*(m||0))}},On.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var pe=function(_){this.gl=_.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};pe.prototype.get=function(){return this.current},pe.prototype.set=function(_){},pe.prototype.getDefault=function(){return this.default},pe.prototype.setDefault=function(){this.set(this.default)};var Ee=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return r.Color.transparent},p.prototype.set=function(m){var y=this.current;(m.r!==y.r||m.g!==y.g||m.b!==y.b||m.a!==y.a||this.dirty)&&(this.gl.clearColor(m.r,m.g,m.b,m.a),this.current=m,this.dirty=!1)},p}(pe),ze=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return 1},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.clearDepth(m),this.current=m,this.dirty=!1)},p}(pe),et=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return 0},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.clearStencil(m),this.current=m,this.dirty=!1)},p}(pe),lt=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return[!0,!0,!0,!0]},p.prototype.set=function(m){var y=this.current;(m[0]!==y[0]||m[1]!==y[1]||m[2]!==y[2]||m[3]!==y[3]||this.dirty)&&(this.gl.colorMask(m[0],m[1],m[2],m[3]),this.current=m,this.dirty=!1)},p}(pe),ot=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return!0},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.depthMask(m),this.current=m,this.dirty=!1)},p}(pe),Tt=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return 255},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.stencilMask(m),this.current=m,this.dirty=!1)},p}(pe),ft=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},p.prototype.set=function(m){var y=this.current;(m.func!==y.func||m.ref!==y.ref||m.mask!==y.mask||this.dirty)&&(this.gl.stencilFunc(m.func,m.ref,m.mask),this.current=m,this.dirty=!1)},p}(pe),vt=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){var m=this.gl;return[m.KEEP,m.KEEP,m.KEEP]},p.prototype.set=function(m){var y=this.current;(m[0]!==y[0]||m[1]!==y[1]||m[2]!==y[2]||this.dirty)&&(this.gl.stencilOp(m[0],m[1],m[2]),this.current=m,this.dirty=!1)},p}(pe),mt=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;m?y.enable(y.STENCIL_TEST):y.disable(y.STENCIL_TEST),this.current=m,this.dirty=!1}},p}(pe),Ot=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return[0,1]},p.prototype.set=function(m){var y=this.current;(m[0]!==y[0]||m[1]!==y[1]||this.dirty)&&(this.gl.depthRange(m[0],m[1]),this.current=m,this.dirty=!1)},p}(pe),Lt=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;m?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST),this.current=m,this.dirty=!1}},p}(pe),qt=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.LESS},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.depthFunc(m),this.current=m,this.dirty=!1)},p}(pe),Qt=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;m?y.enable(y.BLEND):y.disable(y.BLEND),this.current=m,this.dirty=!1}},p}(pe),Ea=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){var m=this.gl;return[m.ONE,m.ZERO]},p.prototype.set=function(m){var y=this.current;(m[0]!==y[0]||m[1]!==y[1]||this.dirty)&&(this.gl.blendFunc(m[0],m[1]),this.current=m,this.dirty=!1)},p}(pe),si=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return r.Color.transparent},p.prototype.set=function(m){var y=this.current;(m.r!==y.r||m.g!==y.g||m.b!==y.b||m.a!==y.a||this.dirty)&&(this.gl.blendColor(m.r,m.g,m.b,m.a),this.current=m,this.dirty=!1)},p}(pe),ni=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.FUNC_ADD},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.blendEquation(m),this.current=m,this.dirty=!1)},p}(pe),pn=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;m?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE),this.current=m,this.dirty=!1}},p}(pe),Di=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.BACK},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.cullFace(m),this.current=m,this.dirty=!1)},p}(pe),Pn=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.CCW},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.frontFace(m),this.current=m,this.dirty=!1)},p}(pe),fn=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)},p}(pe),dr=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return this.gl.TEXTURE0},p.prototype.set=function(m){(m!==this.current||this.dirty)&&(this.gl.activeTexture(m),this.current=m,this.dirty=!1)},p}(pe),Ir=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){var m=this.gl;return[0,0,m.drawingBufferWidth,m.drawingBufferHeight]},p.prototype.set=function(m){var y=this.current;(m[0]!==y[0]||m[1]!==y[1]||m[2]!==y[2]||m[3]!==y[3]||this.dirty)&&(this.gl.viewport(m[0],m[1],m[2],m[3]),this.current=m,this.dirty=!1)},p}(pe),wi=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;y.bindFramebuffer(y.FRAMEBUFFER,m),this.current=m,this.dirty=!1}},p}(pe),hn=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;y.bindRenderbuffer(y.RENDERBUFFER,m),this.current=m,this.dirty=!1}},p}(pe),Vs=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;y.bindTexture(y.TEXTURE_2D,m),this.current=m,this.dirty=!1}},p}(pe),oo=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;y.bindBuffer(y.ARRAY_BUFFER,m),this.current=m,this.dirty=!1}},p}(pe),ns=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(m){var y=this.gl;y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,m),this.current=m,this.dirty=!1},p}(pe),Tn=function(_){function p(m){_.call(this,m),this.vao=m.extVertexArrayObject}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p.prototype.set=function(m){this.vao&&(m!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(m),this.current=m,this.dirty=!1)},p}(pe),Or=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return 4},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;y.pixelStorei(y.UNPACK_ALIGNMENT,m),this.current=m,this.dirty=!1}},p}(pe),Bo=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;y.pixelStorei(y.UNPACK_PREMULTIPLY_ALPHA_WEBGL,m),this.current=m,this.dirty=!1}},p}(pe),nn=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return!1},p.prototype.set=function(m){if(m!==this.current||this.dirty){var y=this.gl;y.pixelStorei(y.UNPACK_FLIP_Y_WEBGL,m),this.current=m,this.dirty=!1}},p}(pe),Ja=function(_){function p(m,y){_.call(this,m),this.context=m,this.parent=y}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getDefault=function(){return null},p}(pe),D=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.setDirty=function(){this.dirty=!0},p.prototype.set=function(m){if(m!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var y=this.gl;y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,m,0),this.current=m,this.dirty=!1}},p}(Ja),H=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.set=function(m){if(m!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var y=this.gl;y.framebufferRenderbuffer(y.FRAMEBUFFER,y.DEPTH_ATTACHMENT,y.RENDERBUFFER,m),this.current=m,this.dirty=!1}},p}(Ja),K=function(_,p,m,y){this.context=_,this.width=p,this.height=m;var I=this.framebuffer=_.gl.createFramebuffer();this.colorAttachment=new D(_,I),y&&(this.depthAttachment=new H(_,I))};K.prototype.destroy=function(){var _=this.context.gl,p=this.colorAttachment.get();if(p&&_.deleteTexture(p),this.depthAttachment){var m=this.depthAttachment.get();m&&_.deleteRenderbuffer(m)}_.deleteFramebuffer(this.framebuffer)};var ae=function(_,p,m){this.func=_,this.mask=p,this.range=m};ae.ReadOnly=!1,ae.ReadWrite=!0,ae.disabled=new ae(519,ae.ReadOnly,[0,1]);var oe=function(_,p,m,y,I,T){this.test=_,this.ref=p,this.mask=m,this.fail=y,this.depthFail=I,this.pass=T};oe.disabled=new oe({func:519,mask:0},0,0,7680,7680,7680);var Ce=function(_,p,m){this.blendFunction=_,this.blendColor=p,this.mask=m};Ce.disabled=new Ce(Ce.Replace=[1,0],r.Color.transparent,[!1,!1,!1,!1]),Ce.unblended=new Ce(Ce.Replace,r.Color.transparent,[!0,!0,!0,!0]),Ce.alphaBlended=new Ce([1,771],r.Color.transparent,[!0,!0,!0,!0]);var ve=function(_,p,m){this.enable=_,this.mode=p,this.frontFace=m};ve.disabled=new ve(!1,1029,2305),ve.backCCW=new ve(!0,1029,2305);var J=function(_){this.gl=_,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ee(this),this.clearDepth=new ze(this),this.clearStencil=new et(this),this.colorMask=new lt(this),this.depthMask=new ot(this),this.stencilMask=new Tt(this),this.stencilFunc=new ft(this),this.stencilOp=new vt(this),this.stencilTest=new mt(this),this.depthRange=new Ot(this),this.depthTest=new Lt(this),this.depthFunc=new qt(this),this.blend=new Qt(this),this.blendFunc=new Ea(this),this.blendColor=new si(this),this.blendEquation=new ni(this),this.cullFace=new pn(this),this.cullFaceSide=new Di(this),this.frontFace=new Pn(this),this.program=new fn(this),this.activeTexture=new dr(this),this.viewport=new Ir(this),this.bindFramebuffer=new wi(this),this.bindRenderbuffer=new hn(this),this.bindTexture=new Vs(this),this.bindVertexBuffer=new oo(this),this.bindElementBuffer=new ns(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Tn(this),this.pixelStoreUnpack=new Or(this),this.pixelStoreUnpackPremultiplyAlpha=new Bo(this),this.pixelStoreUnpackFlipY=new nn(this),this.extTextureFilterAnisotropic=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=_.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=_.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(_.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=_.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=_.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=_.getParameter(_.MAX_TEXTURE_SIZE)};J.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},J.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},J.prototype.createIndexBuffer=function(_,p){return new bi(this,_,p)},J.prototype.createVertexBuffer=function(_,p,m){return new On(this,_,p,m)},J.prototype.createRenderbuffer=function(_,p,m){var y=this.gl,I=y.createRenderbuffer();return this.bindRenderbuffer.set(I),y.renderbufferStorage(y.RENDERBUFFER,_,p,m),this.bindRenderbuffer.set(null),I},J.prototype.createFramebuffer=function(_,p,m){return new K(this,_,p,m)},J.prototype.clear=function(_){var p=_.color,m=_.depth,y=this.gl,I=0;p&&(I|=y.COLOR_BUFFER_BIT,this.clearColor.set(p),this.colorMask.set([!0,!0,!0,!0])),m!==void 0&&(I|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(m),this.depthMask.set(!0)),y.clear(I)},J.prototype.setCullFace=function(_){_.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(_.mode),this.frontFace.set(_.frontFace))},J.prototype.setDepthMode=function(_){_.func!==this.gl.ALWAYS||_.mask?(this.depthTest.set(!0),this.depthFunc.set(_.func),this.depthMask.set(_.mask),this.depthRange.set(_.range)):this.depthTest.set(!1)},J.prototype.setStencilMode=function(_){_.test.func!==this.gl.ALWAYS||_.mask?(this.stencilTest.set(!0),this.stencilMask.set(_.mask),this.stencilOp.set([_.fail,_.depthFail,_.pass]),this.stencilFunc.set({func:_.test.func,ref:_.ref,mask:_.test.mask})):this.stencilTest.set(!1)},J.prototype.setColorMode=function(_){r.deepEqual(_.blendFunction,Ce.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(_.blendFunction),this.blendColor.set(_.blendColor)),this.colorMask.set(_.mask)},J.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var _e=function(_){function p(m,y,I){var T=this;_.call(this),this.id=m,this.dispatcher=I,this.on("data",function(E){E.dataType==="source"&&E.sourceDataType==="metadata"&&(T._sourceLoaded=!0),T._sourceLoaded&&!T._paused&&E.dataType==="source"&&E.sourceDataType==="content"&&(T.reload(),T.transform&&T.update(T.transform))}),this.on("error",function(){T._sourceErrored=!0}),this._source=function(E,k,F,U){var $=new da[k.type](E,k,F,U);if($.id!==E)throw new Error("Expected Source id to be "+E+" instead of "+$.id);return r.bindAll(["load","abort","unload","serialize","prepare"],$),$}(m,y,I,this),this._tiles={},this._cache=new ka(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new r.SourceFeatureState}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.onAdd=function(m){this.map=m,this._maxTileCacheSize=m?m._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(m)},p.prototype.onRemove=function(m){this._source&&this._source.onRemove&&this._source.onRemove(m)},p.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var m in this._tiles){var y=this._tiles[m];if(y.state!=="loaded"&&y.state!=="errored")return!1}return!0},p.prototype.getSource=function(){return this._source},p.prototype.pause=function(){this._paused=!0},p.prototype.resume=function(){if(this._paused){var m=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,m&&this.reload(),this.transform&&this.update(this.transform)}},p.prototype._loadTile=function(m,y){return this._source.loadTile(m,y)},p.prototype._unloadTile=function(m){if(this._source.unloadTile)return this._source.unloadTile(m,function(){})},p.prototype._abortTile=function(m){if(this._source.abortTile)return this._source.abortTile(m,function(){})},p.prototype.serialize=function(){return this._source.serialize()},p.prototype.prepare=function(m){for(var y in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var I=this._tiles[y];I.upload(m),I.prepare(this.map.style.imageManager)}},p.prototype.getIds=function(){return r.values(this._tiles).map(function(m){return m.tileID}).sort(Re).map(function(m){return m.key})},p.prototype.getRenderableIds=function(m){var y=this,I=[];for(var T in this._tiles)this._isIdRenderable(T,m)&&I.push(this._tiles[T]);return m?I.sort(function(E,k){var F=E.tileID,U=k.tileID,$=new r.Point(F.canonical.x,F.canonical.y)._rotate(y.transform.angle),ee=new r.Point(U.canonical.x,U.canonical.y)._rotate(y.transform.angle);return F.overscaledZ-U.overscaledZ||ee.y-$.y||ee.x-$.x}).map(function(E){return E.tileID.key}):I.map(function(E){return E.tileID}).sort(Re).map(function(E){return E.key})},p.prototype.hasRenderableParent=function(m){var y=this.findLoadedParent(m,0);return!!y&&this._isIdRenderable(y.tileID.key)},p.prototype._isIdRenderable=function(m,y){return this._tiles[m]&&this._tiles[m].hasData()&&!this._coveredTiles[m]&&(y||!this._tiles[m].holdingForFade())},p.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var m in this._cache.reset(),this._tiles)this._tiles[m].state!=="errored"&&this._reloadTile(m,"reloading")},p.prototype._reloadTile=function(m,y){var I=this._tiles[m];I&&(I.state!=="loading"&&(I.state=y),this._loadTile(I,this._tileLoaded.bind(this,I,m,y)))},p.prototype._tileLoaded=function(m,y,I,T){if(T)return m.state="errored",void(T.status!==404?this._source.fire(new r.ErrorEvent(T,{tile:m})):this.update(this.transform));m.timeAdded=r.browser.now(),I==="expired"&&(m.refreshedUponExpiration=!0),this._setTileReloadTimer(y,m),this.getSource().type==="raster-dem"&&m.dem&&this._backfillDEM(m),this._state.initializeTileState(m,this.map?this.map.painter:null),this._source.fire(new r.Event("data",{dataType:"source",tile:m,coord:m.tileID}))},p.prototype._backfillDEM=function(m){for(var y=this.getRenderableIds(),I=0;I<y.length;I++){var T=y[I];if(m.neighboringTiles&&m.neighboringTiles[T]){var E=this.getTileByID(T);k(m,E),k(E,m)}}function k(F,U){F.needsHillshadePrepare=!0;var $=U.tileID.canonical.x-F.tileID.canonical.x,ee=U.tileID.canonical.y-F.tileID.canonical.y,ie=Math.pow(2,F.tileID.canonical.z),ge=U.tileID.key;$===0&&ee===0||Math.abs(ee)>1||(Math.abs($)>1&&(Math.abs($+ie)===1?$+=ie:Math.abs($-ie)===1&&($-=ie)),U.dem&&F.dem&&(F.dem.backfillBorder(U.dem,$,ee),F.neighboringTiles&&F.neighboringTiles[ge]&&(F.neighboringTiles[ge].backfilled=!0)))}},p.prototype.getTile=function(m){return this.getTileByID(m.key)},p.prototype.getTileByID=function(m){return this._tiles[m]},p.prototype._retainLoadedChildren=function(m,y,I,T){for(var E in this._tiles){var k=this._tiles[E];if(!(T[E]||!k.hasData()||k.tileID.overscaledZ<=y||k.tileID.overscaledZ>I)){for(var F=k.tileID;k&&k.tileID.overscaledZ>y+1;){var U=k.tileID.scaledTo(k.tileID.overscaledZ-1);(k=this._tiles[U.key])&&k.hasData()&&(F=U)}for(var $=F;$.overscaledZ>y;)if(m[($=$.scaledTo($.overscaledZ-1)).key]){T[F.key]=F;break}}}},p.prototype.findLoadedParent=function(m,y){if(m.key in this._loadedParentTiles){var I=this._loadedParentTiles[m.key];return I&&I.tileID.overscaledZ>=y?I:null}for(var T=m.overscaledZ-1;T>=y;T--){var E=m.scaledTo(T),k=this._getLoadedTile(E);if(k)return k}},p.prototype._getLoadedTile=function(m){var y=this._tiles[m.key];return y&&y.hasData()?y:this._cache.getByKey(m.wrapped().key)},p.prototype.updateCacheSize=function(m){var y=Math.ceil(m.width/this._source.tileSize)+1,I=Math.ceil(m.height/this._source.tileSize)+1,T=Math.floor(y*I*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,T):T;this._cache.setMaxSize(E)},p.prototype.handleWrapJump=function(m){var y=Math.round((m-(this._prevLng===void 0?m:this._prevLng))/360);if(this._prevLng=m,y){var I={};for(var T in this._tiles){var E=this._tiles[T];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+y),I[E.tileID.key]=E}for(var k in this._tiles=I,this._timers)clearTimeout(this._timers[k]),delete this._timers[k];for(var F in this._tiles)this._setTileReloadTimer(F,this._tiles[F])}},p.prototype.update=function(m){var y=this;if(this.transform=m,this._sourceLoaded&&!this._paused){var I;this.updateCacheSize(m),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?I=m.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(it){return new r.OverscaledTileID(it.canonical.z,it.wrap,it.canonical.z,it.canonical.x,it.canonical.y)}):(I=m.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(I=I.filter(function(it){return y._source.hasTile(it)}))):I=[];var T=m.coveringZoomLevel(this._source),E=Math.max(T-p.maxOverzooming,this._source.minzoom),k=Math.max(T+p.maxUnderzooming,this._source.minzoom),F=this._updateRetainedTiles(I,T);if(tt(this._source.type)){for(var U={},$={},ee=0,ie=Object.keys(F);ee<ie.length;ee+=1){var ge=ie[ee],me=F[ge],we=this._tiles[ge];if(we&&!(we.fadeEndTime&&we.fadeEndTime<=r.browser.now())){var ce=this.findLoadedParent(me,E);ce&&(this._addTile(ce.tileID),U[ce.tileID.key]=ce.tileID),$[ge]=me}}for(var xe in this._retainLoadedChildren($,T,k,F),U)F[xe]||(this._coveredTiles[xe]=!0,F[xe]=U[xe])}for(var Te in F)this._tiles[Te].clearFadeHold();for(var Ge=0,Ue=r.keysDifference(this._tiles,F);Ge<Ue.length;Ge+=1){var De=Ue[Ge],He=this._tiles[De];He.hasSymbolBuckets&&!He.holdingForFade()?He.setHoldDuration(this.map._fadeDuration):He.hasSymbolBuckets&&!He.symbolFadeFinished()||this._removeTile(De)}this._updateLoadedParentTileCache()}},p.prototype.releaseSymbolFadeTiles=function(){for(var m in this._tiles)this._tiles[m].holdingForFade()&&this._removeTile(m)},p.prototype._updateRetainedTiles=function(m,y){for(var I={},T={},E=Math.max(y-p.maxOverzooming,this._source.minzoom),k=Math.max(y+p.maxUnderzooming,this._source.minzoom),F={},U=0,$=m;U<$.length;U+=1){var ee=$[U],ie=this._addTile(ee);I[ee.key]=ee,ie.hasData()||y<this._source.maxzoom&&(F[ee.key]=ee)}this._retainLoadedChildren(F,y,k,I);for(var ge=0,me=m;ge<me.length;ge+=1){var we=me[ge],ce=this._tiles[we.key];if(!ce.hasData()){if(y+1>this._source.maxzoom){var xe=we.children(this._source.maxzoom)[0],Te=this.getTile(xe);if(Te&&Te.hasData()){I[xe.key]=xe;continue}}else{var Ge=we.children(this._source.maxzoom);if(I[Ge[0].key]&&I[Ge[1].key]&&I[Ge[2].key]&&I[Ge[3].key])continue}for(var Ue=ce.wasRequested(),De=we.overscaledZ-1;De>=E;--De){var He=we.scaledTo(De);if(T[He.key]||(T[He.key]=!0,!(ce=this.getTile(He))&&Ue&&(ce=this._addTile(He)),ce&&(I[He.key]=He,Ue=ce.wasRequested(),ce.hasData())))break}}}return I},p.prototype._updateLoadedParentTileCache=function(){for(var m in this._loadedParentTiles={},this._tiles){for(var y=[],I=void 0,T=this._tiles[m].tileID;T.overscaledZ>0;){if(T.key in this._loadedParentTiles){I=this._loadedParentTiles[T.key];break}y.push(T.key);var E=T.scaledTo(T.overscaledZ-1);if(I=this._getLoadedTile(E))break;T=E}for(var k=0,F=y;k<F.length;k+=1)this._loadedParentTiles[F[k]]=I}},p.prototype._addTile=function(m){var y=this._tiles[m.key];if(y)return y;(y=this._cache.getAndRemove(m))&&(this._setTileReloadTimer(m.key,y),y.tileID=m,this._state.initializeTileState(y,this.map?this.map.painter:null),this._cacheTimers[m.key]&&(clearTimeout(this._cacheTimers[m.key]),delete this._cacheTimers[m.key],this._setTileReloadTimer(m.key,y)));var I=!!y;return I||(y=new r.Tile(m,this._source.tileSize*m.overscaleFactor()),this._loadTile(y,this._tileLoaded.bind(this,y,m.key,y.state))),y?(y.uses++,this._tiles[m.key]=y,I||this._source.fire(new r.Event("dataloading",{tile:y,coord:y.tileID,dataType:"source"})),y):null},p.prototype._setTileReloadTimer=function(m,y){var I=this;m in this._timers&&(clearTimeout(this._timers[m]),delete this._timers[m]);var T=y.getExpiryTimeout();T&&(this._timers[m]=setTimeout(function(){I._reloadTile(m,"expired"),delete I._timers[m]},T))},p.prototype._removeTile=function(m){var y=this._tiles[m];y&&(y.uses--,delete this._tiles[m],this._timers[m]&&(clearTimeout(this._timers[m]),delete this._timers[m]),y.uses>0||(y.hasData()&&y.state!=="reloading"?this._cache.add(y.tileID,y,y.getExpiryTimeout()):(y.aborted=!0,this._abortTile(y),this._unloadTile(y))))},p.prototype.clearTiles=function(){for(var m in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(m);this._cache.reset()},p.prototype.tilesIn=function(m,y,I){var T=this,E=[],k=this.transform;if(!k)return E;for(var F=I?k.getCameraQueryGeometry(m):m,U=m.map(function(De){return k.pointCoordinate(De)}),$=F.map(function(De){return k.pointCoordinate(De)}),ee=this.getIds(),ie=1/0,ge=1/0,me=-1/0,we=-1/0,ce=0,xe=$;ce<xe.length;ce+=1){var Te=xe[ce];ie=Math.min(ie,Te.x),ge=Math.min(ge,Te.y),me=Math.max(me,Te.x),we=Math.max(we,Te.y)}for(var Ge=function(De){var He=T._tiles[ee[De]];if(!He.holdingForFade()){var it=He.tileID,yt=Math.pow(2,k.zoom-He.tileID.overscaledZ),gt=y*He.queryPadding*r.EXTENT/He.tileSize/yt,Gt=[it.getTilePoint(new r.MercatorCoordinate(ie,ge)),it.getTilePoint(new r.MercatorCoordinate(me,we))];if(Gt[0].x-gt<r.EXTENT&&Gt[0].y-gt<r.EXTENT&&Gt[1].x+gt>=0&&Gt[1].y+gt>=0){var ta=U.map(function(na){return it.getTilePoint(na)}),ra=$.map(function(na){return it.getTilePoint(na)});E.push({tile:He,tileID:it,queryGeometry:ta,cameraQueryGeometry:ra,scale:yt})}}},Ue=0;Ue<ee.length;Ue++)Ge(Ue);return E},p.prototype.getVisibleCoordinates=function(m){for(var y=this,I=this.getRenderableIds(m).map(function(F){return y._tiles[F].tileID}),T=0,E=I;T<E.length;T+=1){var k=E[T];k.posMatrix=this.transform.calculatePosMatrix(k.toUnwrapped())}return I},p.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(tt(this._source.type))for(var m in this._tiles){var y=this._tiles[m];if(y.fadeEndTime!==void 0&&y.fadeEndTime>=r.browser.now())return!0}return!1},p.prototype.setFeatureState=function(m,y,I){this._state.updateState(m=m||"_geojsonTileLayer",y,I)},p.prototype.removeFeatureState=function(m,y,I){this._state.removeFeatureState(m=m||"_geojsonTileLayer",y,I)},p.prototype.getFeatureState=function(m,y){return this._state.getState(m=m||"_geojsonTileLayer",y)},p.prototype.setDependencies=function(m,y,I){var T=this._tiles[m];T&&T.setDependencies(y,I)},p.prototype.reloadTilesForDependencies=function(m,y){for(var I in this._tiles)this._tiles[I].hasDependency(m,y)&&this._reloadTile(I,"reloading");this._cache.filter(function(T){return!T.hasDependency(m,y)})},p}(r.Evented);function Re(_,p){var m=Math.abs(2*_.wrap)-+(_.wrap<0),y=Math.abs(2*p.wrap)-+(p.wrap<0);return _.overscaledZ-p.overscaledZ||y-m||p.canonical.y-_.canonical.y||p.canonical.x-_.canonical.x}function tt(_){return _==="raster"||_==="image"||_==="video"}function ct(){return new r.window.Worker(jm.workerUrl)}_e.maxOverzooming=10,_e.maxUnderzooming=3;var Xe="mapboxgl_preloaded_worker_pool",nt=function(){this.active={}};nt.prototype.acquire=function(_){if(!this.workers)for(this.workers=[];this.workers.length<nt.workerCount;)this.workers.push(new ct);return this.active[_]=!0,this.workers.slice()},nt.prototype.release=function(_){delete this.active[_],this.numActive()===0&&(this.workers.forEach(function(p){p.terminate()}),this.workers=null)},nt.prototype.isPreloaded=function(){return!!this.active[Xe]},nt.prototype.numActive=function(){return Object.keys(this.active).length};var Pt,Et=Math.floor(r.browser.hardwareConcurrency/2);function Ye(){return Pt||(Pt=new nt),Pt}function Rt(_,p){var m={};for(var y in _)y!=="ref"&&(m[y]=_[y]);return r.refProperties.forEach(function(I){I in p&&(m[I]=p[I])}),m}function It(_){_=_.slice();for(var p=Object.create(null),m=0;m<_.length;m++)p[_[m].id]=_[m];for(var y=0;y<_.length;y++)"ref"in _[y]&&(_[y]=Rt(_[y],p[_[y].ref]));return _}nt.workerCount=Math.max(Math.min(Et,6),1);var At={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Oa(_,p,m){m.push({command:At.addSource,args:[_,p[_]]})}function qe(_,p,m){p.push({command:At.removeSource,args:[_]}),m[_]=!0}function Ae(_,p,m,y){qe(_,m,y),Oa(_,p,m)}function at(_,p,m){var y;for(y in _[m])if(_[m].hasOwnProperty(y)&&y!=="data"&&!r.deepEqual(_[m][y],p[m][y]))return!1;for(y in p[m])if(p[m].hasOwnProperty(y)&&y!=="data"&&!r.deepEqual(_[m][y],p[m][y]))return!1;return!0}function rt(_,p,m,y,I,T){var E;for(E in p=p||{},_=_||{})_.hasOwnProperty(E)&&(r.deepEqual(_[E],p[E])||m.push({command:T,args:[y,E,p[E],I]}));for(E in p)p.hasOwnProperty(E)&&!_.hasOwnProperty(E)&&(r.deepEqual(_[E],p[E])||m.push({command:T,args:[y,E,p[E],I]}))}function $t(_){return _.id}function wa(_,p){return _[p.id]=p,_}var Ii=function(_,p){this.reset(_,p)};Ii.prototype.reset=function(_,p){this.points=_||[],this._distances=[0];for(var m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ii.prototype.lerp=function(_){if(this.points.length===1)return this.points[0];_=r.clamp(_,0,1);for(var p=1,m=this._distances[p],y=_*this.paddedLength+this.padding;m<y&&p<this._distances.length;)m=this._distances[++p];var I=p-1,T=this._distances[I],E=m-T,k=E>0?(y-T)/E:0;return this.points[I].mult(1-k).add(this.points[p].mult(k))};var Sa=function(_,p,m){var y=this.boxCells=[],I=this.circleCells=[];this.xCellCount=Math.ceil(_/m),this.yCellCount=Math.ceil(p/m);for(var T=0;T<this.xCellCount*this.yCellCount;T++)y.push([]),I.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=_,this.height=p,this.xScale=this.xCellCount/_,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0};function Gi(_,p,m,y,I){var T=r.create();return p?(r.scale(T,T,[1/I,1/I,1]),m||r.rotateZ(T,T,y.angle)):r.multiply(T,y.labelPlaneMatrix,_),T}function Ta(_,p,m,y,I){if(p){var T=r.clone(_);return r.scale(T,T,[I,I,1]),m||r.rotateZ(T,T,-y.angle),T}return y.glCoordMatrix}function Da(_,p){var m=[_.x,_.y,0,1];_r(m,m,p);var y=m[3];return{point:new r.Point(m[0]/y,m[1]/y),signedDistanceFromCamera:y}}function ui(_,p){return .5+_/p*.5}function zr(_,p){var m=_[0]/_[3],y=_[1]/_[3];return m>=-p[0]&&m<=p[0]&&y>=-p[1]&&y<=p[1]}function Hh(_,p,m,y,I,T,E,k){var F=y?_.textSizeData:_.iconSizeData,U=r.evaluateSizeForZoom(F,m.transform.zoom),$=[256/m.width*2+1,256/m.height*2+1],ee=y?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;ee.clear();for(var ie=_.lineVertexArray,ge=y?_.text.placedSymbolArray:_.icon.placedSymbolArray,me=m.transform.width/m.transform.height,we=!1,ce=0;ce<ge.length;ce++){var xe=ge.get(ce);if(xe.hidden||xe.writingMode===r.WritingMode.vertical&&!we)Ur(xe.numGlyphs,ee);else{we=!1;var Te=[xe.anchorX,xe.anchorY,0,1];if(r.transformMat4(Te,Te,p),zr(Te,$)){var Ge=ui(m.transform.cameraToCenterDistance,Te[3]),Ue=r.evaluateSizeForFeature(F,U,xe),De=E?Ue/Ge:Ue*Ge,He=new r.Point(xe.anchorX,xe.anchorY),it=Da(He,I).point,yt={},gt=pf(xe,De,!1,k,p,I,T,_.glyphOffsetArray,ie,ee,it,He,yt,me);we=gt.useVertical,(gt.notEnoughRoom||we||gt.needsFlipping&&pf(xe,De,!0,k,p,I,T,_.glyphOffsetArray,ie,ee,it,He,yt,me).notEnoughRoom)&&Ur(xe.numGlyphs,ee)}else Ur(xe.numGlyphs,ee)}}y?_.text.dynamicLayoutVertexBuffer.updateData(ee):_.icon.dynamicLayoutVertexBuffer.updateData(ee)}function hr(_,p,m,y,I,T,E,k,F,U,$){var ee=k.glyphStartIndex+k.numGlyphs,ie=k.lineStartIndex,ge=k.lineStartIndex+k.lineLength,me=p.getoffsetX(k.glyphStartIndex),we=p.getoffsetX(ee-1),ce=En(_*me,m,y,I,T,E,k.segment,ie,ge,F,U,$);if(!ce)return null;var xe=En(_*we,m,y,I,T,E,k.segment,ie,ge,F,U,$);return xe?{first:ce,last:xe}:null}function rs(_,p,m,y){return _===r.WritingMode.horizontal&&Math.abs(m.y-p.y)>Math.abs(m.x-p.x)*y?{useVertical:!0}:(_===r.WritingMode.vertical?p.y<m.y:p.x>m.x)?{needsFlipping:!0}:null}function pf(_,p,m,y,I,T,E,k,F,U,$,ee,ie,ge){var me,we=p/24,ce=_.lineOffsetX*we,xe=_.lineOffsetY*we;if(_.numGlyphs>1){var Te=_.glyphStartIndex+_.numGlyphs,Ge=_.lineStartIndex,Ue=_.lineStartIndex+_.lineLength,De=hr(we,k,ce,xe,m,$,ee,_,F,T,ie);if(!De)return{notEnoughRoom:!0};var He=Da(De.first.point,E).point,it=Da(De.last.point,E).point;if(y&&!m){var yt=rs(_.writingMode,He,it,ge);if(yt)return yt}me=[De.first];for(var gt=_.glyphStartIndex+1;gt<Te-1;gt++)me.push(En(we*k.getoffsetX(gt),ce,xe,m,$,ee,_.segment,Ge,Ue,F,T,ie));me.push(De.last)}else{if(y&&!m){var Gt=Da(ee,I).point,ta=_.lineStartIndex+_.segment+1,ra=new r.Point(F.getx(ta),F.gety(ta)),na=Da(ra,I),ci=na.signedDistanceFromCamera>0?na.point:Yh(ee,ra,Gt,1,I),Bt=rs(_.writingMode,Gt,ci,ge);if(Bt)return Bt}var va=En(we*k.getoffsetX(_.glyphStartIndex),ce,xe,m,$,ee,_.segment,_.lineStartIndex,_.lineStartIndex+_.lineLength,F,T,ie);if(!va)return{notEnoughRoom:!0};me=[va]}for(var Pa=0,ba=me;Pa<ba.length;Pa+=1){var fa=ba[Pa];r.addDynamicAttributes(U,fa.point,fa.angle)}return{}}function Yh(_,p,m,y,I){var T=Da(_.add(_.sub(p)._unit()),I).point,E=m.sub(T);return m.add(E._mult(y/E.mag()))}function En(_,p,m,y,I,T,E,k,F,U,$,ee){var ie=y?_-p:_+p,ge=ie>0?1:-1,me=0;y&&(ge*=-1,me=Math.PI),ge<0&&(me+=Math.PI);for(var we=ge>0?k+E:k+E+1,ce=I,xe=I,Te=0,Ge=0,Ue=Math.abs(ie),De=[];Te+Ge<=Ue;){if((we+=ge)<k||we>=F)return null;if(xe=ce,De.push(ce),(ce=ee[we])===void 0){var He=new r.Point(U.getx(we),U.gety(we)),it=Da(He,$);if(it.signedDistanceFromCamera>0)ce=ee[we]=it.point;else{var yt=we-ge;ce=Yh(Te===0?T:new r.Point(U.getx(yt),U.gety(yt)),He,xe,Ue-Te+1,$)}}Te+=Ge,Ge=xe.dist(ce)}var gt=(Ue-Te)/Ge,Gt=ce.sub(xe),ta=Gt.mult(gt)._add(xe);ta._add(Gt._unit()._perp()._mult(m*ge));var ra=me+Math.atan2(ce.y-xe.y,ce.x-xe.x);return De.push(ta),{point:ta,angle:ra,path:De}}Sa.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Sa.prototype.insert=function(_,p,m,y,I){this._forEachCell(p,m,y,I,this._insertBoxCell,this.boxUid++),this.boxKeys.push(_),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(y),this.bboxes.push(I)},Sa.prototype.insertCircle=function(_,p,m,y){this._forEachCell(p-y,m-y,p+y,m+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(_),this.circles.push(p),this.circles.push(m),this.circles.push(y)},Sa.prototype._insertBoxCell=function(_,p,m,y,I,T){this.boxCells[I].push(T)},Sa.prototype._insertCircleCell=function(_,p,m,y,I,T){this.circleCells[I].push(T)},Sa.prototype._query=function(_,p,m,y,I,T){if(m<0||_>this.width||y<0||p>this.height)return!I&&[];var E=[];if(_<=0&&p<=0&&this.width<=m&&this.height<=y){if(I)return!0;for(var k=0;k<this.boxKeys.length;k++)E.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(var F=0;F<this.circleKeys.length;F++){var U=this.circles[3*F],$=this.circles[3*F+1],ee=this.circles[3*F+2];E.push({key:this.circleKeys[F],x1:U-ee,y1:$-ee,x2:U+ee,y2:$+ee})}return T?E.filter(T):E}return this._forEachCell(_,p,m,y,this._queryCell,E,{hitTest:I,seenUids:{box:{},circle:{}}},T),I?E.length>0:E},Sa.prototype._queryCircle=function(_,p,m,y,I){var T=_-m,E=_+m,k=p-m,F=p+m;if(E<0||T>this.width||F<0||k>this.height)return!y&&[];var U=[];return this._forEachCell(T,k,E,F,this._queryCellCircle,U,{hitTest:y,circle:{x:_,y:p,radius:m},seenUids:{box:{},circle:{}}},I),y?U.length>0:U},Sa.prototype.query=function(_,p,m,y,I){return this._query(_,p,m,y,!1,I)},Sa.prototype.hitTest=function(_,p,m,y,I){return this._query(_,p,m,y,!0,I)},Sa.prototype.hitTestCircle=function(_,p,m,y){return this._queryCircle(_,p,m,!0,y)},Sa.prototype._queryCell=function(_,p,m,y,I,T,E,k){var F=E.seenUids,U=this.boxCells[I];if(U!==null)for(var $=this.bboxes,ee=0,ie=U;ee<ie.length;ee+=1){var ge=ie[ee];if(!F.box[ge]){F.box[ge]=!0;var me=4*ge;if(_<=$[me+2]&&p<=$[me+3]&&m>=$[me+0]&&y>=$[me+1]&&(!k||k(this.boxKeys[ge]))){if(E.hitTest)return T.push(!0),!0;T.push({key:this.boxKeys[ge],x1:$[me],y1:$[me+1],x2:$[me+2],y2:$[me+3]})}}}var we=this.circleCells[I];if(we!==null)for(var ce=this.circles,xe=0,Te=we;xe<Te.length;xe+=1){var Ge=Te[xe];if(!F.circle[Ge]){F.circle[Ge]=!0;var Ue=3*Ge;if(this._circleAndRectCollide(ce[Ue],ce[Ue+1],ce[Ue+2],_,p,m,y)&&(!k||k(this.circleKeys[Ge]))){if(E.hitTest)return T.push(!0),!0;var De=ce[Ue],He=ce[Ue+1],it=ce[Ue+2];T.push({key:this.circleKeys[Ge],x1:De-it,y1:He-it,x2:De+it,y2:He+it})}}}},Sa.prototype._queryCellCircle=function(_,p,m,y,I,T,E,k){var F=E.circle,U=E.seenUids,$=this.boxCells[I];if($!==null)for(var ee=this.bboxes,ie=0,ge=$;ie<ge.length;ie+=1){var me=ge[ie];if(!U.box[me]){U.box[me]=!0;var we=4*me;if(this._circleAndRectCollide(F.x,F.y,F.radius,ee[we+0],ee[we+1],ee[we+2],ee[we+3])&&(!k||k(this.boxKeys[me])))return T.push(!0),!0}}var ce=this.circleCells[I];if(ce!==null)for(var xe=this.circles,Te=0,Ge=ce;Te<Ge.length;Te+=1){var Ue=Ge[Te];if(!U.circle[Ue]){U.circle[Ue]=!0;var De=3*Ue;if(this._circlesCollide(xe[De],xe[De+1],xe[De+2],F.x,F.y,F.radius)&&(!k||k(this.circleKeys[Ue])))return T.push(!0),!0}}},Sa.prototype._forEachCell=function(_,p,m,y,I,T,E,k){for(var F=this._convertToXCellCoord(_),U=this._convertToYCellCoord(p),$=this._convertToXCellCoord(m),ee=this._convertToYCellCoord(y),ie=F;ie<=$;ie++)for(var ge=U;ge<=ee;ge++)if(I.call(this,_,p,m,y,this.xCellCount*ge+ie,T,E,k))return},Sa.prototype._convertToXCellCoord=function(_){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(_*this.xScale)))},Sa.prototype._convertToYCellCoord=function(_){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(_*this.yScale)))},Sa.prototype._circlesCollide=function(_,p,m,y,I,T){var E=y-_,k=I-p,F=m+T;return F*F>E*E+k*k},Sa.prototype._circleAndRectCollide=function(_,p,m,y,I,T,E){var k=(T-y)/2,F=Math.abs(_-(y+k));if(F>k+m)return!1;var U=(E-I)/2,$=Math.abs(p-(I+U));if($>U+m)return!1;if(F<=k||$<=U)return!0;var ee=F-k,ie=$-U;return ee*ee+ie*ie<=m*m};var Kh=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ur(_,p){for(var m=0;m<_;m++){var y=p.length;p.resize(y+4),p.float32.set(Kh,3*y)}}function _r(_,p,m){var y=p[0],I=p[1];return _[0]=m[0]*y+m[4]*I+m[12],_[1]=m[1]*y+m[5]*I+m[13],_[3]=m[3]*y+m[7]*I+m[15],_}var lo=function(_,p,m){p===void 0&&(p=new Sa(_.width+200,_.height+200,25)),m===void 0&&(m=new Sa(_.width+200,_.height+200,25)),this.transform=_,this.grid=p,this.ignoredGrid=m,this.pitchfactor=Math.cos(_._pitch)*_.cameraToCenterDistance,this.screenRightBoundary=_.width+100,this.screenBottomBoundary=_.height+100,this.gridRightBoundary=_.width+200,this.gridBottomBoundary=_.height+200};function rn(_,p,m){return p*(r.EXTENT/(_.tileSize*Math.pow(2,m-_.tileID.overscaledZ)))}lo.prototype.placeCollisionBox=function(_,p,m,y,I){var T=this.projectAndGetPerspectiveRatio(y,_.anchorPointX,_.anchorPointY),E=m*T.perspectiveRatio,k=_.x1*E+T.point.x,F=_.y1*E+T.point.y,U=_.x2*E+T.point.x,$=_.y2*E+T.point.y;return!this.isInsideGrid(k,F,U,$)||!p&&this.grid.hitTest(k,F,U,$,I)?{box:[],offscreen:!1}:{box:[k,F,U,$],offscreen:this.isOffscreen(k,F,U,$)}},lo.prototype.placeCollisionCircles=function(_,p,m,y,I,T,E,k,F,U,$,ee,ie){var ge=[],me=new r.Point(p.anchorX,p.anchorY),we=Da(me,T),ce=ui(this.transform.cameraToCenterDistance,we.signedDistanceFromCamera),xe=(U?I/ce:I*ce)/r.ONE_EM,Te=Da(me,E).point,Ge=hr(xe,y,p.lineOffsetX*xe,p.lineOffsetY*xe,!1,Te,me,p,m,E,{}),Ue=!1,De=!1,He=!0;if(Ge){for(var it=.5*ee*ce+ie,yt=new r.Point(-100,-100),gt=new r.Point(this.screenRightBoundary,this.screenBottomBoundary),Gt=new Ii,ta=Ge.first,ra=Ge.last,na=[],ci=ta.path.length-1;ci>=1;ci--)na.push(ta.path[ci]);for(var Bt=1;Bt<ra.path.length;Bt++)na.push(ra.path[Bt]);var va=2.5*it;if(k){var Pa=na.map(function(go){return Da(go,k)});na=Pa.some(function(go){return go.signedDistanceFromCamera<=0})?[]:Pa.map(function(go){return go.point})}var ba=[];if(na.length>0){for(var fa=na[0].clone(),Wa=na[0].clone(),ga=1;ga<na.length;ga++)fa.x=Math.min(fa.x,na[ga].x),fa.y=Math.min(fa.y,na[ga].y),Wa.x=Math.max(Wa.x,na[ga].x),Wa.y=Math.max(Wa.y,na[ga].y);ba=fa.x>=yt.x&&Wa.x<=gt.x&&fa.y>=yt.y&&Wa.y<=gt.y?[na]:Wa.x<yt.x||fa.x>gt.x||Wa.y<yt.y||fa.y>gt.y?[]:r.clipLine([na],yt.x,yt.y,gt.x,gt.y)}for(var ca=0,ar=ba;ca<ar.length;ca+=1){var wn;Gt.reset(ar[ca],.25*it),wn=Gt.length<=.5*it?1:Math.ceil(Gt.paddedLength/va)+1;for(var Pr=0;Pr<wn;Pr++){var gr=Pr/Math.max(wn-1,1),yn=Gt.lerp(gr),Mn=yn.x+100,Ss=yn.y+100;ge.push(Mn,Ss,it,0);var Kr=Mn-it,Eu=Ss-it,ss=Mn+it,Uo=Ss+it;if(He=He&&this.isOffscreen(Kr,Eu,ss,Uo),De=De||this.isInsideGrid(Kr,Eu,ss,Uo),!_&&this.grid.hitTestCircle(Mn,Ss,it,$)&&(Ue=!0,!F))return{circles:[],offscreen:!1,collisionDetected:Ue}}}}return{circles:!F&&Ue||!De?[]:ge,offscreen:He,collisionDetected:Ue}},lo.prototype.queryRenderedSymbols=function(_){if(_.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var p=[],m=1/0,y=1/0,I=-1/0,T=-1/0,E=0,k=_;E<k.length;E+=1){var F=k[E],U=new r.Point(F.x+100,F.y+100);m=Math.min(m,U.x),y=Math.min(y,U.y),I=Math.max(I,U.x),T=Math.max(T,U.y),p.push(U)}for(var $={},ee={},ie=0,ge=this.grid.query(m,y,I,T).concat(this.ignoredGrid.query(m,y,I,T));ie<ge.length;ie+=1){var me=ge[ie],we=me.key;if($[we.bucketInstanceId]===void 0&&($[we.bucketInstanceId]={}),!$[we.bucketInstanceId][we.featureIndex]){var ce=[new r.Point(me.x1,me.y1),new r.Point(me.x2,me.y1),new r.Point(me.x2,me.y2),new r.Point(me.x1,me.y2)];r.polygonIntersectsPolygon(p,ce)&&($[we.bucketInstanceId][we.featureIndex]=!0,ee[we.bucketInstanceId]===void 0&&(ee[we.bucketInstanceId]=[]),ee[we.bucketInstanceId].push(we.featureIndex))}}return ee},lo.prototype.insertCollisionBox=function(_,p,m,y,I){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:I},_[0],_[1],_[2],_[3])},lo.prototype.insertCollisionCircles=function(_,p,m,y,I){for(var T=p?this.ignoredGrid:this.grid,E={bucketInstanceId:m,featureIndex:y,collisionGroupID:I},k=0;k<_.length;k+=4)T.insertCircle(E,_[k],_[k+1],_[k+2])},lo.prototype.projectAndGetPerspectiveRatio=function(_,p,m){var y=[p,m,0,1];return _r(y,y,_),{point:new r.Point((y[0]/y[3]+1)/2*this.transform.width+100,(-y[1]/y[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/y[3]*.5}},lo.prototype.isOffscreen=function(_,p,m,y){return m<100||_>=this.screenRightBoundary||y<100||p>this.screenBottomBoundary},lo.prototype.isInsideGrid=function(_,p,m,y){return m>=0&&_<this.gridRightBoundary&&y>=0&&p<this.gridBottomBoundary},lo.prototype.getViewportMatrix=function(){var _=r.identity([]);return r.translate(_,_,[-100,-100,0]),_};var Fo=function(_,p,m,y){this.opacity=_?Math.max(0,Math.min(1,_.opacity+(_.placed?p:-p))):y&&m?1:0,this.placed=m};Fo.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Zs=function(_,p,m,y,I){this.text=new Fo(_?_.text:null,p,m,I),this.icon=new Fo(_?_.icon:null,p,y,I)};Zs.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var F1=function(_,p,m){this.text=_,this.icon=p,this.skipFade=m},uo=function(){this.invProjMatrix=r.create(),this.viewportMatrix=r.create(),this.circles=[]},uI=function(_,p,m,y,I){this.bucketInstanceId=_,this.featureIndex=p,this.sourceLayerIndex=m,this.bucketIndex=y,this.tileID=I},Ll=function(_){this.crossSourceCollisions=_,this.maxGroupID=0,this.collisionGroups={}};function Cr(_,p,m,y,I){var T=r.getAnchorAlignment(_),E=-(T.horizontalAlign-.5)*p,k=-(T.verticalAlign-.5)*m,F=r.evaluateVariableOffset(_,y);return new r.Point(E+F[0]*I,k+F[1]*I)}function ol(_,p,m,y,I,T){var E=_.x1,k=_.x2,F=_.y1,U=_.y2,$=_.anchorPointX,ee=_.anchorPointY,ie=new r.Point(p,m);return y&&ie._rotate(I?T:-T),{x1:E+ie.x,y1:F+ie.y,x2:k+ie.x,y2:U+ie.y,anchorPointX:$,anchorPointY:ee}}Ll.prototype.get=function(_){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[_]){var p=++this.maxGroupID;this.collisionGroups[_]={ID:p,predicate:function(m){return m.collisionGroupID===p}}}return this.collisionGroups[_]};var Xr=function(_,p,m,y){this.transform=_.clone(),this.collisionIndex=new lo(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Ll(m),this.collisionCircleArrays={},this.prevPlacement=y,y&&(y.prevPlacement=void 0),this.placedOrientations={}};function _c(_,p,m,y,I){_.emplaceBack(p?1:0,m?1:0,y||0,I||0),_.emplaceBack(p?1:0,m?1:0,y||0,I||0),_.emplaceBack(p?1:0,m?1:0,y||0,I||0),_.emplaceBack(p?1:0,m?1:0,y||0,I||0)}Xr.prototype.getBucketParts=function(_,p,m,y){var I=m.getBucket(p),T=m.latestFeatureIndex;if(I&&T&&p.id===I.layerIds[0]){var E=m.collisionBoxArray,k=I.layers[0].layout,F=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),U=m.tileSize/r.EXTENT,$=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),ee=k.get("text-pitch-alignment")==="map",ie=k.get("text-rotation-alignment")==="map",ge=rn(m,1,this.transform.zoom),me=Gi($,ee,ie,this.transform,ge),we=null;if(ee){var ce=Ta($,ee,ie,this.transform,ge);we=r.multiply([],this.transform.labelPlaneMatrix,ce)}this.retainedQueryData[I.bucketInstanceId]=new uI(I.bucketInstanceId,T,I.sourceLayerIndex,I.index,m.tileID);var xe={bucket:I,layout:k,posMatrix:$,textLabelPlaneMatrix:me,labelToScreenMatrix:we,scale:F,textPixelRatio:U,holdingForFade:m.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:r.evaluateSizeForZoom(I.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(I.sourceID)};if(y)for(var Te=0,Ge=I.sortKeyRanges;Te<Ge.length;Te+=1){var Ue=Ge[Te];_.push({sortKey:Ue.sortKey,symbolInstanceStart:Ue.symbolInstanceStart,symbolInstanceEnd:Ue.symbolInstanceEnd,parameters:xe})}else _.push({symbolInstanceStart:0,symbolInstanceEnd:I.symbolInstances.length,parameters:xe})}},Xr.prototype.attemptAnchorPlacement=function(_,p,m,y,I,T,E,k,F,U,$,ee,ie,ge,me){var we,ce=[ee.textOffset0,ee.textOffset1],xe=Cr(_,m,y,ce,I),Te=this.collisionIndex.placeCollisionBox(ol(p,xe.x,xe.y,T,E,this.transform.angle),$,k,F,U.predicate);if(!me||this.collisionIndex.placeCollisionBox(ol(me,xe.x,xe.y,T,E,this.transform.angle),$,k,F,U.predicate).box.length!==0)return Te.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(we=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),this.variableOffsets[ee.crossTileID]={textOffset:ce,width:m,height:y,anchor:_,textBoxScale:I,prevAnchor:we},this.markUsedJustification(ie,_,ee,ge),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,ge,ee),this.placedOrientations[ee.crossTileID]=ge),{shift:xe,placedGlyphBoxes:Te}):void 0},Xr.prototype.placeLayerBucketPart=function(_,p,m){var y=this,I=_.parameters,T=I.bucket,E=I.layout,k=I.posMatrix,F=I.textLabelPlaneMatrix,U=I.labelToScreenMatrix,$=I.textPixelRatio,ee=I.holdingForFade,ie=I.collisionBoxArray,ge=I.partiallyEvaluatedTextSize,me=I.collisionGroup,we=E.get("text-optional"),ce=E.get("icon-optional"),xe=E.get("text-allow-overlap"),Te=E.get("icon-allow-overlap"),Ge=E.get("text-rotation-alignment")==="map",Ue=E.get("text-pitch-alignment")==="map",De=E.get("icon-text-fit")!=="none",He=E.get("symbol-z-order")==="viewport-y",it=xe&&(Te||!T.hasIconData()||ce),yt=Te&&(xe||!T.hasTextData()||we);!T.collisionArrays&&ie&&T.deserializeCollisionBoxes(ie);var gt=function(Bt,va){if(!p[Bt.crossTileID])if(ee)y.placements[Bt.crossTileID]=new F1(!1,!1,!1);else{var Pa,ba=!1,fa=!1,Wa=!0,ga=null,ca={box:null,offscreen:null},ar={box:null,offscreen:null},wn=null,Pr=null,gr=0,yn=0,Mn=0;va.textFeatureIndex?gr=va.textFeatureIndex:Bt.useRuntimeCollisionCircles&&(gr=Bt.featureIndex),va.verticalTextFeatureIndex&&(yn=va.verticalTextFeatureIndex);var Ss=va.textBox;if(Ss){var Kr=function(pi){var Xs=r.WritingMode.horizontal;if(T.allowVerticalPlacement&&!pi&&y.prevPlacement){var os=y.prevPlacement.placedOrientations[Bt.crossTileID];os&&(y.placedOrientations[Bt.crossTileID]=os,y.markUsedOrientation(T,Xs=os,Bt))}return Xs},Eu=function(pi,Xs){if(T.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&va.verticalTextBox)for(var os=0,Rc=T.writingModes;os<Rc.length&&(Rc[os]===r.WritingMode.vertical?(ca=Xs(),ar=ca):ca=pi(),!(ca&&ca.box&&ca.box.length));os+=1);else ca=pi()};if(E.get("text-variable-anchor")){var ss=E.get("text-variable-anchor");if(y.prevPlacement&&y.prevPlacement.variableOffsets[Bt.crossTileID]){var Uo=y.prevPlacement.variableOffsets[Bt.crossTileID];ss.indexOf(Uo.anchor)>0&&(ss=ss.filter(function(pi){return pi!==Uo.anchor})).unshift(Uo.anchor)}var go=function(pi,Xs,os){for(var Rc=pi.x2-pi.x1,II=pi.y2-pi.y1,Jm=Bt.textBoxScale,CI=De&&!Te?Xs:null,g_={box:[],offscreen:!1},gb=xe?2*ss.length:ss.length,Dd=0;Dd<gb;++Dd){var Qm=y.attemptAnchorPlacement(ss[Dd%ss.length],pi,Rc,II,Jm,Ge,Ue,$,k,me,Dd>=ss.length,Bt,T,os,CI);if(Qm&&(g_=Qm.placedGlyphBoxes)&&g_.box&&g_.box.length){ba=!0,ga=Qm.shift;break}}return g_};Eu(function(){return go(Ss,va.iconBox,r.WritingMode.horizontal)},function(){var pi=va.verticalTextBox;return T.allowVerticalPlacement&&!(ca&&ca.box&&ca.box.length)&&Bt.numVerticalGlyphVertices>0&&pi?go(pi,va.verticalIconBox,r.WritingMode.vertical):{box:null,offscreen:null}}),ca&&(ba=ca.box,Wa=ca.offscreen);var h_=Kr(ca&&ca.box);if(!ba&&y.prevPlacement){var Fd=y.prevPlacement.variableOffsets[Bt.crossTileID];Fd&&(y.variableOffsets[Bt.crossTileID]=Fd,y.markUsedJustification(T,Fd.anchor,Bt,h_))}}else{var Mu=function(pi,Xs){var os=y.collisionIndex.placeCollisionBox(pi,xe,$,k,me.predicate);return os&&os.box&&os.box.length&&(y.markUsedOrientation(T,Xs,Bt),y.placedOrientations[Bt.crossTileID]=Xs),os};Eu(function(){return Mu(Ss,r.WritingMode.horizontal)},function(){var pi=va.verticalTextBox;return T.allowVerticalPlacement&&Bt.numVerticalGlyphVertices>0&&pi?Mu(pi,r.WritingMode.vertical):{box:null,offscreen:null}}),Kr(ca&&ca.box&&ca.box.length)}}if(ba=(Pa=ca)&&Pa.box&&Pa.box.length>0,Wa=Pa&&Pa.offscreen,Bt.useRuntimeCollisionCircles){var Nd=T.text.placedSymbolArray.get(Bt.centerJustifiedTextSymbolIndex),__=r.evaluateSizeForFeature(T.textSizeData,ge,Nd),dl=E.get("text-padding");wn=y.collisionIndex.placeCollisionCircles(xe,Nd,T.lineVertexArray,T.glyphOffsetArray,__,k,F,U,m,Ue,me.predicate,Bt.collisionCircleDiameter,dl),ba=xe||wn.circles.length>0&&!wn.collisionDetected,Wa=Wa&&wn.offscreen}if(va.iconFeatureIndex&&(Mn=va.iconFeatureIndex),va.iconBox){var m_=function(pi){var Xs=De&&ga?ol(pi,ga.x,ga.y,Ge,Ue,y.transform.angle):pi;return y.collisionIndex.placeCollisionBox(Xs,Te,$,k,me.predicate)};fa=ar&&ar.box&&ar.box.length&&va.verticalIconBox?(Pr=m_(va.verticalIconBox)).box.length>0:(Pr=m_(va.iconBox)).box.length>0,Wa=Wa&&Pr.offscreen}var hl=we||Bt.numHorizontalGlyphVertices===0&&Bt.numVerticalGlyphVertices===0,ir=ce||Bt.numIconVertices===0;if(hl||ir?ir?hl||(fa=fa&&ba):ba=fa&&ba:fa=ba=fa&&ba,ba&&Pa&&Pa.box&&y.collisionIndex.insertCollisionBox(Pa.box,E.get("text-ignore-placement"),T.bucketInstanceId,ar&&ar.box&&yn?yn:gr,me.ID),fa&&Pr&&y.collisionIndex.insertCollisionBox(Pr.box,E.get("icon-ignore-placement"),T.bucketInstanceId,Mn,me.ID),wn&&(ba&&y.collisionIndex.insertCollisionCircles(wn.circles,E.get("text-ignore-placement"),T.bucketInstanceId,gr,me.ID),m)){var Gl=T.bucketInstanceId,Lu=y.collisionCircleArrays[Gl];Lu===void 0&&(Lu=y.collisionCircleArrays[Gl]=new uo);for(var Lc=0;Lc<wn.circles.length;Lc+=4)Lu.circles.push(wn.circles[Lc+0]),Lu.circles.push(wn.circles[Lc+1]),Lu.circles.push(wn.circles[Lc+2]),Lu.circles.push(wn.collisionDetected?1:0)}y.placements[Bt.crossTileID]=new F1(ba||it,fa||yt,Wa||T.justReloaded),p[Bt.crossTileID]=!0}};if(He)for(var Gt=T.getSortedSymbolIndexes(this.transform.angle),ta=Gt.length-1;ta>=0;--ta){var ra=Gt[ta];gt(T.symbolInstances.get(ra),T.collisionArrays[ra])}else for(var na=_.symbolInstanceStart;na<_.symbolInstanceEnd;na++)gt(T.symbolInstances.get(na),T.collisionArrays[na]);if(m&&T.bucketInstanceId in this.collisionCircleArrays){var ci=this.collisionCircleArrays[T.bucketInstanceId];r.invert(ci.invProjMatrix,k),ci.viewportMatrix=this.collisionIndex.getViewportMatrix()}T.justReloaded=!1},Xr.prototype.markUsedJustification=function(_,p,m,y){var I;I=y===r.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[r.getAnchorJustification(p)];for(var T=0,E=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];T<E.length;T+=1){var k=E[T];k>=0&&(_.text.placedSymbolArray.get(k).crossTileID=I>=0&&k!==I?0:m.crossTileID)}},Xr.prototype.markUsedOrientation=function(_,p,m){for(var y=p===r.WritingMode.horizontal||p===r.WritingMode.horizontalOnly?p:0,I=p===r.WritingMode.vertical?p:0,T=0,E=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];T<E.length;T+=1)_.text.placedSymbolArray.get(E[T]).placedOrientation=y;m.verticalPlacedTextSymbolIndex&&(_.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=I)},Xr.prototype.commit=function(_){this.commitTime=_,this.zoomAtLastRecencyCheck=this.transform.zoom;var p=this.prevPlacement,m=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;var y=p?p.symbolFadeChange(_):1,I=p?p.opacities:{},T=p?p.variableOffsets:{},E=p?p.placedOrientations:{};for(var k in this.placements){var F=this.placements[k],U=I[k];U?(this.opacities[k]=new Zs(U,y,F.text,F.icon),m=m||F.text!==U.text.placed||F.icon!==U.icon.placed):(this.opacities[k]=new Zs(null,y,F.text,F.icon,F.skipFade),m=m||F.text||F.icon)}for(var $ in I){var ee=I[$];if(!this.opacities[$]){var ie=new Zs(ee,y,!1,!1);ie.isHidden()||(this.opacities[$]=ie,m=m||ee.text.placed||ee.icon.placed)}}for(var ge in T)this.variableOffsets[ge]||!this.opacities[ge]||this.opacities[ge].isHidden()||(this.variableOffsets[ge]=T[ge]);for(var me in E)this.placedOrientations[me]||!this.opacities[me]||this.opacities[me].isHidden()||(this.placedOrientations[me]=E[me]);m?this.lastPlacementChangeTime=_:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:_)},Xr.prototype.updateLayerOpacities=function(_,p){for(var m={},y=0,I=p;y<I.length;y+=1){var T=I[y],E=T.getBucket(_);E&&T.latestFeatureIndex&&_.id===E.layerIds[0]&&this.updateBucketOpacities(E,m,T.collisionBoxArray)}},Xr.prototype.updateBucketOpacities=function(_,p,m){var y=this;_.hasTextData()&&_.text.opacityVertexArray.clear(),_.hasIconData()&&_.icon.opacityVertexArray.clear(),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexArray.clear(),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexArray.clear();var I=_.layers[0].layout,T=new Zs(null,0,!1,!1,!0),E=I.get("text-allow-overlap"),k=I.get("icon-allow-overlap"),F=I.get("text-variable-anchor"),U=I.get("text-rotation-alignment")==="map",$=I.get("text-pitch-alignment")==="map",ee=I.get("icon-text-fit")!=="none",ie=new Zs(null,0,E&&(k||!_.hasIconData()||I.get("icon-optional")),k&&(E||!_.hasTextData()||I.get("text-optional")),!0);!_.collisionArrays&&m&&(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData())&&_.deserializeCollisionBoxes(m);for(var ge=function(xe,Te,Ge){for(var Ue=0;Ue<Te/4;Ue++)xe.opacityVertexArray.emplaceBack(Ge)},me=function(xe){var Te=_.symbolInstances.get(xe),Ge=Te.numHorizontalGlyphVertices,Ue=Te.numVerticalGlyphVertices,De=Te.crossTileID,He=y.opacities[De];p[De]?He=T:He||(y.opacities[De]=He=ie),p[De]=!0;var it=Te.numIconVertices>0,yt=y.placedOrientations[Te.crossTileID],gt=yt===r.WritingMode.vertical,Gt=yt===r.WritingMode.horizontal||yt===r.WritingMode.horizontalOnly;if(Ge>0||Ue>0){var ta=V1(He.text);ge(_.text,Ge,gt?Td:ta),ge(_.text,Ue,Gt?Td:ta);var ra=He.text.isHidden();[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(function(ca){ca>=0&&(_.text.placedSymbolArray.get(ca).hidden=ra||gt?1:0)}),Te.verticalPlacedTextSymbolIndex>=0&&(_.text.placedSymbolArray.get(Te.verticalPlacedTextSymbolIndex).hidden=ra||Gt?1:0);var na=y.variableOffsets[Te.crossTileID];na&&y.markUsedJustification(_,na.anchor,Te,yt);var ci=y.placedOrientations[Te.crossTileID];ci&&(y.markUsedJustification(_,"left",Te,ci),y.markUsedOrientation(_,ci,Te))}if(it){var Bt=V1(He.icon),va=!(ee&&Te.verticalPlacedIconSymbolIndex&&gt);Te.placedIconSymbolIndex>=0&&(ge(_.icon,Te.numIconVertices,va?Bt:Td),_.icon.placedSymbolArray.get(Te.placedIconSymbolIndex).hidden=He.icon.isHidden()),Te.verticalPlacedIconSymbolIndex>=0&&(ge(_.icon,Te.numVerticalIconVertices,va?Td:Bt),_.icon.placedSymbolArray.get(Te.verticalPlacedIconSymbolIndex).hidden=He.icon.isHidden())}if(_.hasIconCollisionBoxData()||_.hasTextCollisionBoxData()){var Pa=_.collisionArrays[xe];if(Pa){var ba=new r.Point(0,0);if(Pa.textBox||Pa.verticalTextBox){var fa=!0;if(F){var Wa=y.variableOffsets[De];Wa?(ba=Cr(Wa.anchor,Wa.width,Wa.height,Wa.textOffset,Wa.textBoxScale),U&&ba._rotate($?y.transform.angle:-y.transform.angle)):fa=!1}Pa.textBox&&_c(_.textCollisionBox.collisionVertexArray,He.text.placed,!fa||gt,ba.x,ba.y),Pa.verticalTextBox&&_c(_.textCollisionBox.collisionVertexArray,He.text.placed,!fa||Gt,ba.x,ba.y)}var ga=!!(!Gt&&Pa.verticalIconBox);Pa.iconBox&&_c(_.iconCollisionBox.collisionVertexArray,He.icon.placed,ga,ee?ba.x:0,ee?ba.y:0),Pa.verticalIconBox&&_c(_.iconCollisionBox.collisionVertexArray,He.icon.placed,!ga,ee?ba.x:0,ee?ba.y:0)}}},we=0;we<_.symbolInstances.length;we++)me(we);if(_.sortFeatures(this.transform.angle),this.retainedQueryData[_.bucketInstanceId]&&(this.retainedQueryData[_.bucketInstanceId].featureSortOrder=_.featureSortOrder),_.hasTextData()&&_.text.opacityVertexBuffer&&_.text.opacityVertexBuffer.updateData(_.text.opacityVertexArray),_.hasIconData()&&_.icon.opacityVertexBuffer&&_.icon.opacityVertexBuffer.updateData(_.icon.opacityVertexArray),_.hasIconCollisionBoxData()&&_.iconCollisionBox.collisionVertexBuffer&&_.iconCollisionBox.collisionVertexBuffer.updateData(_.iconCollisionBox.collisionVertexArray),_.hasTextCollisionBoxData()&&_.textCollisionBox.collisionVertexBuffer&&_.textCollisionBox.collisionVertexBuffer.updateData(_.textCollisionBox.collisionVertexArray),_.bucketInstanceId in this.collisionCircleArrays){var ce=this.collisionCircleArrays[_.bucketInstanceId];_.placementInvProjMatrix=ce.invProjMatrix,_.placementViewportMatrix=ce.viewportMatrix,_.collisionCircleArray=ce.circles,delete this.collisionCircleArrays[_.bucketInstanceId]}},Xr.prototype.symbolFadeChange=function(_){return this.fadeDuration===0?1:(_-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Xr.prototype.zoomAdjustment=function(_){return Math.max(0,(this.transform.zoom-_)/1.5)},Xr.prototype.hasTransitions=function(_){return this.stale||_-this.lastPlacementChangeTime<this.fadeDuration},Xr.prototype.stillRecent=function(_,p){var m=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*m>_},Xr.prototype.setStale=function(){this.stale=!0};var cI=Math.pow(2,25),dI=Math.pow(2,24),ff=Math.pow(2,17),hI=Math.pow(2,16),N1=Math.pow(2,9),_I=Math.pow(2,8),D1=Math.pow(2,1);function V1(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;var p=_.placed?1:0,m=Math.floor(127*_.opacity);return m*cI+p*dI+m*ff+p*hI+m*N1+p*_I+m*D1+p}var Td=0,yf=function(_){this._sortAcrossTiles=_.layout.get("symbol-z-order")!=="viewport-y"&&_.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};yf.prototype.continuePlacement=function(_,p,m,y,I){for(var T=this._bucketParts;this._currentTileIndex<_.length;)if(p.getBucketParts(T,y,_[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,I())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort(function(E,k){return E.sortKey-k.sortKey}));this._currentPartIndex<T.length;)if(p.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,I())return!0;return!1};var qh=function(_,p,m,y,I,T,E){this.placement=new Xr(_,I,T,E),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1};qh.prototype.isDone=function(){return this._done},qh.prototype.continuePlacement=function(_,p,m){for(var y=this,I=r.browser.now(),T=function(){var F=r.browser.now()-I;return!y._forceFullPlacement&&F>2};this._currentPlacementIndex>=0;){var E=p[_[this._currentPlacementIndex]],k=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=k)&&(!E.maxzoom||E.maxzoom>k)){if(this._inProgressLayer||(this._inProgressLayer=new yf(E)),this._inProgressLayer.continuePlacement(m[E.source],this.placement,this._showCollisionBoxes,E,T))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},qh.prototype.commit=function(_){return this.placement.commit(_),this.placement};var Z1=512/r.EXTENT/2,Rm=function(_,p,m){this.tileID=_,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(var y=0;y<p.length;y++){var I=p.get(y),T=I.key;this.indexedSymbolInstances[T]||(this.indexedSymbolInstances[T]=[]),this.indexedSymbolInstances[T].push({crossTileID:I.crossTileID,coord:this.getScaledCoordinates(I,_)})}};Rm.prototype.getScaledCoordinates=function(_,p){var m=Z1/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*r.EXTENT+_.anchorX)*m),y:Math.floor((p.canonical.y*r.EXTENT+_.anchorY)*m)}},Rm.prototype.findMatches=function(_,p,m){for(var y=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z),I=0;I<_.length;I++){var T=_.get(I);if(!T.crossTileID){var E=this.indexedSymbolInstances[T.key];if(E)for(var k=this.getScaledCoordinates(T,p),F=0,U=E;F<U.length;F+=1){var $=U[F];if(Math.abs($.coord.x-k.x)<=y&&Math.abs($.coord.y-k.y)<=y&&!m[$.crossTileID]){m[$.crossTileID]=!0,T.crossTileID=$.crossTileID;break}}}}};var co=function(){this.maxCrossTileID=0};co.prototype.generate=function(){return++this.maxCrossTileID};var mu=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};mu.prototype.handleWrapJump=function(_){var p=Math.round((_-this.lng)/360);if(p!==0)for(var m in this.indexes){var y=this.indexes[m],I={};for(var T in y){var E=y[T];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+p),I[E.tileID.key]=E}this.indexes[m]=I}this.lng=_},mu.prototype.addBucket=function(_,p,m){if(this.indexes[_.overscaledZ]&&this.indexes[_.overscaledZ][_.key]){if(this.indexes[_.overscaledZ][_.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(_.overscaledZ,this.indexes[_.overscaledZ][_.key])}for(var y=0;y<p.symbolInstances.length;y++)p.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[_.overscaledZ]||(this.usedCrossTileIDs[_.overscaledZ]={});var I=this.usedCrossTileIDs[_.overscaledZ];for(var T in this.indexes){var E=this.indexes[T];if(Number(T)>_.overscaledZ)for(var k in E){var F=E[k];F.tileID.isChildOf(_)&&F.findMatches(p.symbolInstances,_,I)}else{var U=E[_.scaledTo(Number(T)).key];U&&U.findMatches(p.symbolInstances,_,I)}}for(var $=0;$<p.symbolInstances.length;$++){var ee=p.symbolInstances.get($);ee.crossTileID||(ee.crossTileID=m.generate(),I[ee.crossTileID]=!0)}return this.indexes[_.overscaledZ]===void 0&&(this.indexes[_.overscaledZ]={}),this.indexes[_.overscaledZ][_.key]=new Rm(_,p.symbolInstances,p.bucketInstanceId),!0},mu.prototype.removeBucketCrossTileIDs=function(_,p){for(var m in p.indexedSymbolInstances)for(var y=0,I=p.indexedSymbolInstances[m];y<I.length;y+=1)delete this.usedCrossTileIDs[_][I[y].crossTileID]},mu.prototype.removeStaleBuckets=function(_){var p=!1;for(var m in this.indexes){var y=this.indexes[m];for(var I in y)_[y[I].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,y[I]),delete y[I],p=!0)}return p};var gu=function(){this.layerIndexes={},this.crossTileIDs=new co,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};gu.prototype.addLayer=function(_,p,m){var y=this.layerIndexes[_.id];y===void 0&&(y=this.layerIndexes[_.id]=new mu);var I=!1,T={};y.handleWrapJump(m);for(var E=0,k=p;E<k.length;E+=1){var F=k[E],U=F.getBucket(_);U&&_.id===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(F.tileID,U,this.crossTileIDs)&&(I=!0),T[U.bucketInstanceId]=!0)}return y.removeStaleBuckets(T)&&(I=!0),I},gu.prototype.pruneUnusedLayers=function(_){var p={};for(var m in _.forEach(function(y){p[y]=!0}),this.layerIndexes)p[m]||delete this.layerIndexes[m]};var mc=function(_,p){return r.emitValidationErrors(_,p&&p.filter(function(m){return m.identifier!=="source.canvas"}))},pu=r.pick(At,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),fu=r.pick(At,["setCenter","setZoom","setBearing","setPitch"]),km=function(){var _={},p=r.styleSpec.$version;for(var m in r.styleSpec.$root){var y,I=r.styleSpec.$root[m];I.required&&(y=m==="version"?p:I.type==="array"?[]:{})!=null&&(_[m]=y)}return _}(),vs=function(_){function p(m,y){var I=this;y===void 0&&(y={}),_.call(this),this.map=m,this.dispatcher=new Pe(Ye(),this),this.imageManager=new O,this.imageManager.setEventedParent(this),this.glyphManager=new te(m._requestManager,y.localIdeographFontFamily),this.lineAtlas=new be(256,512),this.crossTileSymbolIndex=new gu,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new r.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",r.getReferrer());var T=this;this._rtlTextPluginCallback=p.registerForPluginStateChange(function(E){T.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:E.pluginStatus,pluginURL:E.pluginURL},function(k,F){if(r.triggerPluginCompletionEvent(k),F&&F.every(function($){return $}))for(var U in T.sourceCaches)T.sourceCaches[U].reload()})}),this.on("data",function(E){if(E.dataType==="source"&&E.sourceDataType==="metadata"){var k=I.sourceCaches[E.sourceId];if(k){var F=k.getSource();if(F&&F.vectorLayerIds)for(var U in I._layers){var $=I._layers[U];$.source===F.id&&I._validateLayer($)}}}})}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.loadURL=function(m,y){var I=this;y===void 0&&(y={}),this.fire(new r.Event("dataloading",{dataType:"style"}));var T=typeof y.validate=="boolean"?y.validate:!r.isMapboxURL(m);m=this.map._requestManager.normalizeStyleURL(m,y.accessToken);var E=this.map._requestManager.transformRequest(m,r.ResourceType.Style);this._request=r.getJSON(E,function(k,F){I._request=null,k?I.fire(new r.ErrorEvent(k)):F&&I._load(F,T)})},p.prototype.loadJSON=function(m,y){var I=this;y===void 0&&(y={}),this.fire(new r.Event("dataloading",{dataType:"style"})),this._request=r.browser.frame(function(){I._request=null,I._load(m,y.validate!==!1)})},p.prototype.loadEmpty=function(){this.fire(new r.Event("dataloading",{dataType:"style"})),this._load(km,!1)},p.prototype._load=function(m,y){if(!y||!mc(this,r.validateStyle(m))){for(var I in this._loaded=!0,this.stylesheet=m,m.sources)this.addSource(I,m.sources[I],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs);var T=It(this.stylesheet.layers);this._order=T.map(function(U){return U.id}),this._layers={},this._serializedLayers={};for(var E=0,k=T;E<k.length;E+=1){var F=k[E];(F=r.createStyleLayer(F)).setEventedParent(this,{layer:{id:F.id}}),this._layers[F.id]=F,this._serializedLayers[F.id]=F.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new fe(this.stylesheet.light),this.fire(new r.Event("data",{dataType:"style"})),this.fire(new r.Event("style.load"))}},p.prototype._loadSprite=function(m){var y=this;this._spriteRequest=function(I,T,E){var k,F,U,$=r.browser.devicePixelRatio>1?"@2x":"",ee=r.getJSON(T.transformRequest(T.normalizeSpriteURL(I,$,".json"),r.ResourceType.SpriteJSON),function(me,we){ee=null,U||(U=me,k=we,ge())}),ie=r.getImage(T.transformRequest(T.normalizeSpriteURL(I,$,".png"),r.ResourceType.SpriteImage),function(me,we){ie=null,U||(U=me,F=we,ge())});function ge(){if(U)E(U);else if(k&&F){var me=r.browser.getImageData(F),we={};for(var ce in k){var xe=k[ce],Te=xe.width,Ge=xe.height,Ue=xe.x,De=xe.y,He=xe.sdf,it=xe.pixelRatio,yt=xe.stretchX,gt=xe.stretchY,Gt=xe.content,ta=new r.RGBAImage({width:Te,height:Ge});r.RGBAImage.copy(me,ta,{x:Ue,y:De},{x:0,y:0},{width:Te,height:Ge}),we[ce]={data:ta,pixelRatio:it,sdf:He,stretchX:yt,stretchY:gt,content:Gt}}E(null,we)}}return{cancel:function(){ee&&(ee.cancel(),ee=null),ie&&(ie.cancel(),ie=null)}}}(m,this.map._requestManager,function(I,T){if(y._spriteRequest=null,I)y.fire(new r.ErrorEvent(I));else if(T)for(var E in T)y.imageManager.addImage(E,T[E]);y.imageManager.setLoaded(!0),y._availableImages=y.imageManager.listImages(),y.dispatcher.broadcast("setImages",y._availableImages),y.fire(new r.Event("data",{dataType:"style"}))})},p.prototype._validateLayer=function(m){var y=this.sourceCaches[m.source];if(y){var I=m.sourceLayer;if(I){var T=y.getSource();(T.type==="geojson"||T.vectorLayerIds&&T.vectorLayerIds.indexOf(I)===-1)&&this.fire(new r.ErrorEvent(new Error('Source layer "'+I+'" does not exist on source "'+T.id+'" as specified by style layer "'+m.id+'"')))}}},p.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var m in this.sourceCaches)if(!this.sourceCaches[m].loaded())return!1;return!!this.imageManager.isLoaded()},p.prototype._serializeLayers=function(m){for(var y=[],I=0,T=m;I<T.length;I+=1){var E=this._layers[T[I]];E.type!=="custom"&&y.push(E.serialize())}return y},p.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(var y in this._layers)if(this._layers[y].hasTransition())return!0;return!1},p.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},p.prototype.update=function(m){if(this._loaded){var y=this._changed;if(this._changed){var I=Object.keys(this._updatedLayers),T=Object.keys(this._removedLayers);for(var E in(I.length||T.length)&&this._updateWorkerLayers(I,T),this._updatedSources){var k=this._updatedSources[E];k==="reload"?this._reloadSource(E):k==="clear"&&this._clearSource(E)}for(var F in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[F].updateTransitions(m);this.light.updateTransitions(m),this._resetUpdates()}var U={};for(var $ in this.sourceCaches){var ee=this.sourceCaches[$];U[$]=ee.used,ee.used=!1}for(var ie=0,ge=this._order;ie<ge.length;ie+=1){var me=this._layers[ge[ie]];me.recalculate(m,this._availableImages),!me.isHidden(m.zoom)&&me.source&&(this.sourceCaches[me.source].used=!0)}for(var we in U){var ce=this.sourceCaches[we];U[we]!==ce.used&&ce.fire(new r.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:we}))}this.light.recalculate(m),this.z=m.zoom,y&&this.fire(new r.Event("data",{dataType:"style"}))}},p.prototype._updateTilesForChangedImages=function(){var m=Object.keys(this._changedImages);if(m.length){for(var y in this.sourceCaches)this.sourceCaches[y].reloadTilesForDependencies(["icons","patterns"],m);this._changedImages={}}},p.prototype._updateWorkerLayers=function(m,y){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(m),removedIds:y})},p.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},p.prototype.setState=function(m){var y=this;if(this._checkLoaded(),mc(this,r.validateStyle(m)))return!1;(m=r.clone$1(m)).layers=It(m.layers);var I=function(E,k){if(!E)return[{command:At.setStyle,args:[k]}];var F=[];try{if(!r.deepEqual(E.version,k.version))return[{command:At.setStyle,args:[k]}];r.deepEqual(E.center,k.center)||F.push({command:At.setCenter,args:[k.center]}),r.deepEqual(E.zoom,k.zoom)||F.push({command:At.setZoom,args:[k.zoom]}),r.deepEqual(E.bearing,k.bearing)||F.push({command:At.setBearing,args:[k.bearing]}),r.deepEqual(E.pitch,k.pitch)||F.push({command:At.setPitch,args:[k.pitch]}),r.deepEqual(E.sprite,k.sprite)||F.push({command:At.setSprite,args:[k.sprite]}),r.deepEqual(E.glyphs,k.glyphs)||F.push({command:At.setGlyphs,args:[k.glyphs]}),r.deepEqual(E.transition,k.transition)||F.push({command:At.setTransition,args:[k.transition]}),r.deepEqual(E.light,k.light)||F.push({command:At.setLight,args:[k.light]});var U={},$=[];(function(ie,ge,me,we){var ce;for(ce in ge=ge||{},ie=ie||{})ie.hasOwnProperty(ce)&&(ge.hasOwnProperty(ce)||qe(ce,me,we));for(ce in ge)ge.hasOwnProperty(ce)&&(ie.hasOwnProperty(ce)?r.deepEqual(ie[ce],ge[ce])||(ie[ce].type==="geojson"&&ge[ce].type==="geojson"&&at(ie,ge,ce)?me.push({command:At.setGeoJSONSourceData,args:[ce,ge[ce].data]}):Ae(ce,ge,me,we)):Oa(ce,ge,me))})(E.sources,k.sources,$,U);var ee=[];E.layers&&E.layers.forEach(function(ie){U[ie.source]?F.push({command:At.removeLayer,args:[ie.id]}):ee.push(ie)}),F=F.concat($),function(ie,ge,me){ge=ge||[];var we,ce,xe,Te,Ge,Ue,De,He=(ie=ie||[]).map($t),it=ge.map($t),yt=ie.reduce(wa,{}),gt=ge.reduce(wa,{}),Gt=He.slice(),ta=Object.create(null);for(we=0,ce=0;we<He.length;we++)gt.hasOwnProperty(xe=He[we])?ce++:(me.push({command:At.removeLayer,args:[xe]}),Gt.splice(Gt.indexOf(xe,ce),1));for(we=0,ce=0;we<it.length;we++)Gt[Gt.length-1-we]!==(xe=it[it.length-1-we])&&(yt.hasOwnProperty(xe)?(me.push({command:At.removeLayer,args:[xe]}),Gt.splice(Gt.lastIndexOf(xe,Gt.length-ce),1)):ce++,me.push({command:At.addLayer,args:[gt[xe],Ue=Gt[Gt.length-we]]}),Gt.splice(Gt.length-we,0,xe),ta[xe]=!0);for(we=0;we<it.length;we++)if(Te=yt[xe=it[we]],Ge=gt[xe],!ta[xe]&&!r.deepEqual(Te,Ge))if(r.deepEqual(Te.source,Ge.source)&&r.deepEqual(Te["source-layer"],Ge["source-layer"])&&r.deepEqual(Te.type,Ge.type)){for(De in rt(Te.layout,Ge.layout,me,xe,null,At.setLayoutProperty),rt(Te.paint,Ge.paint,me,xe,null,At.setPaintProperty),r.deepEqual(Te.filter,Ge.filter)||me.push({command:At.setFilter,args:[xe,Ge.filter]}),r.deepEqual(Te.minzoom,Ge.minzoom)&&r.deepEqual(Te.maxzoom,Ge.maxzoom)||me.push({command:At.setLayerZoomRange,args:[xe,Ge.minzoom,Ge.maxzoom]}),Te)Te.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?rt(Te[De],Ge[De],me,xe,De.slice(6),At.setPaintProperty):r.deepEqual(Te[De],Ge[De])||me.push({command:At.setLayerProperty,args:[xe,De,Ge[De]]}));for(De in Ge)Ge.hasOwnProperty(De)&&!Te.hasOwnProperty(De)&&De!=="layout"&&De!=="paint"&&De!=="filter"&&De!=="metadata"&&De!=="minzoom"&&De!=="maxzoom"&&(De.indexOf("paint.")===0?rt(Te[De],Ge[De],me,xe,De.slice(6),At.setPaintProperty):r.deepEqual(Te[De],Ge[De])||me.push({command:At.setLayerProperty,args:[xe,De,Ge[De]]}))}else me.push({command:At.removeLayer,args:[xe]}),Ue=Gt[Gt.lastIndexOf(xe)+1],me.push({command:At.addLayer,args:[Ge,Ue]})}(ee,k.layers,F)}catch(ie){console.warn("Unable to compute style diff:",ie),F=[{command:At.setStyle,args:[k]}]}return F}(this.serialize(),m).filter(function(E){return!(E.command in fu)});if(I.length===0)return!1;var T=I.filter(function(E){return!(E.command in pu)});if(T.length>0)throw new Error("Unimplemented: "+T.map(function(E){return E.command}).join(", ")+".");return I.forEach(function(E){E.command!=="setTransition"&&y[E.command].apply(y,E.args)}),this.stylesheet=m,!0},p.prototype.addImage=function(m,y){if(this.getImage(m))return this.fire(new r.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(m,y),this._afterImageUpdated(m)},p.prototype.updateImage=function(m,y){this.imageManager.updateImage(m,y)},p.prototype.getImage=function(m){return this.imageManager.getImage(m)},p.prototype.removeImage=function(m){if(!this.getImage(m))return this.fire(new r.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(m),this._afterImageUpdated(m)},p.prototype._afterImageUpdated=function(m){this._availableImages=this.imageManager.listImages(),this._changedImages[m]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new r.Event("data",{dataType:"style"}))},p.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},p.prototype.addSource=function(m,y,I){var T=this;if(I===void 0&&(I={}),this._checkLoaded(),this.sourceCaches[m]!==void 0)throw new Error("There is already a source with this ID");if(!y.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(y).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(y.type)>=0&&this._validate(r.validateStyle.source,"sources."+m,y,null,I))){this.map&&this.map._collectResourceTiming&&(y.collectResourceTiming=!0);var E=this.sourceCaches[m]=new _e(m,y,this.dispatcher);E.style=this,E.setEventedParent(this,function(){return{isSourceLoaded:T.loaded(),source:E.serialize(),sourceId:m}}),E.onAdd(this.map),this._changed=!0}},p.prototype.removeSource=function(m){if(this._checkLoaded(),this.sourceCaches[m]===void 0)throw new Error("There is no source with this ID");for(var y in this._layers)if(this._layers[y].source===m)return this.fire(new r.ErrorEvent(new Error('Source "'+m+'" cannot be removed while layer "'+y+'" is using it.')));var I=this.sourceCaches[m];delete this.sourceCaches[m],delete this._updatedSources[m],I.fire(new r.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:m})),I.setEventedParent(null),I.clearTiles(),I.onRemove&&I.onRemove(this.map),this._changed=!0},p.prototype.setGeoJSONSourceData=function(m,y){this._checkLoaded(),this.sourceCaches[m].getSource().setData(y),this._changed=!0},p.prototype.getSource=function(m){return this.sourceCaches[m]&&this.sourceCaches[m].getSource()},p.prototype.addLayer=function(m,y,I){I===void 0&&(I={}),this._checkLoaded();var T=m.id;if(this.getLayer(T))this.fire(new r.ErrorEvent(new Error('Layer with id "'+T+'" already exists on this map')));else{var E;if(m.type==="custom"){if(mc(this,r.validateCustomStyleLayer(m)))return;E=r.createStyleLayer(m)}else{if(typeof m.source=="object"&&(this.addSource(T,m.source),m=r.clone$1(m),m=r.extend(m,{source:T})),this._validate(r.validateStyle.layer,"layers."+T,m,{arrayIndex:-1},I))return;E=r.createStyleLayer(m),this._validateLayer(E),E.setEventedParent(this,{layer:{id:T}}),this._serializedLayers[E.id]=E.serialize()}var k=y?this._order.indexOf(y):this._order.length;if(y&&k===-1)this.fire(new r.ErrorEvent(new Error('Layer with id "'+y+'" does not exist on this map.')));else{if(this._order.splice(k,0,T),this._layerOrderChanged=!0,this._layers[T]=E,this._removedLayers[T]&&E.source&&E.type!=="custom"){var F=this._removedLayers[T];delete this._removedLayers[T],F.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}},p.prototype.moveLayer=function(m,y){if(this._checkLoaded(),this._changed=!0,this._layers[m]){if(m!==y){var I=this._order.indexOf(m);this._order.splice(I,1);var T=y?this._order.indexOf(y):this._order.length;y&&T===-1?this.fire(new r.ErrorEvent(new Error('Layer with id "'+y+'" does not exist on this map.'))):(this._order.splice(T,0,m),this._layerOrderChanged=!0)}}else this.fire(new r.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be moved.")))},p.prototype.removeLayer=function(m){this._checkLoaded();var y=this._layers[m];if(y){y.setEventedParent(null);var I=this._order.indexOf(m);this._order.splice(I,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[m]=y,delete this._layers[m],delete this._serializedLayers[m],delete this._updatedLayers[m],delete this._updatedPaintProps[m],y.onRemove&&y.onRemove(this.map)}else this.fire(new r.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be removed.")))},p.prototype.getLayer=function(m){return this._layers[m]},p.prototype.hasLayer=function(m){return m in this._layers},p.prototype.setLayerZoomRange=function(m,y,I){this._checkLoaded();var T=this.getLayer(m);T?T.minzoom===y&&T.maxzoom===I||(y!=null&&(T.minzoom=y),I!=null&&(T.maxzoom=I),this._updateLayer(T)):this.fire(new r.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot have zoom extent.")))},p.prototype.setFilter=function(m,y,I){I===void 0&&(I={}),this._checkLoaded();var T=this.getLayer(m);if(T){if(!r.deepEqual(T.filter,y))return y==null?(T.filter=void 0,void this._updateLayer(T)):void(this._validate(r.validateStyle.filter,"layers."+T.id+".filter",y,null,I)||(T.filter=r.clone$1(y),this._updateLayer(T)))}else this.fire(new r.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be filtered.")))},p.prototype.getFilter=function(m){return r.clone$1(this.getLayer(m).filter)},p.prototype.setLayoutProperty=function(m,y,I,T){T===void 0&&(T={}),this._checkLoaded();var E=this.getLayer(m);E?r.deepEqual(E.getLayoutProperty(y),I)||(E.setLayoutProperty(y,I,T),this._updateLayer(E)):this.fire(new r.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getLayoutProperty=function(m,y){var I=this.getLayer(m);if(I)return I.getLayoutProperty(y);this.fire(new r.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style.")))},p.prototype.setPaintProperty=function(m,y,I,T){T===void 0&&(T={}),this._checkLoaded();var E=this.getLayer(m);E?r.deepEqual(E.getPaintProperty(y),I)||(E.setPaintProperty(y,I,T)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[m]=!0):this.fire(new r.ErrorEvent(new Error("The layer '"+m+"' does not exist in the map's style and cannot be styled.")))},p.prototype.getPaintProperty=function(m,y){return this.getLayer(m).getPaintProperty(y)},p.prototype.setFeatureState=function(m,y){this._checkLoaded();var I=m.source,T=m.sourceLayer,E=this.sourceCaches[I];if(E!==void 0){var k=E.getSource().type;k==="geojson"&&T?this.fire(new r.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||T?(m.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(T,m.id,y)):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},p.prototype.removeFeatureState=function(m,y){this._checkLoaded();var I=m.source,T=this.sourceCaches[I];if(T!==void 0){var E=T.getSource().type,k=E==="vector"?m.sourceLayer:void 0;E!=="vector"||k?y&&typeof m.id!="string"&&typeof m.id!="number"?this.fire(new r.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):T.removeFeatureState(k,m.id,y):this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+I+"' does not exist in the map's style.")))},p.prototype.getFeatureState=function(m){this._checkLoaded();var y=m.source,I=m.sourceLayer,T=this.sourceCaches[y];if(T!==void 0){if(T.getSource().type!=="vector"||I)return m.id===void 0&&this.fire(new r.ErrorEvent(new Error("The feature id parameter must be provided."))),T.getFeatureState(I,m.id);this.fire(new r.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new r.ErrorEvent(new Error("The source '"+y+"' does not exist in the map's style.")))},p.prototype.getTransition=function(){return r.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},p.prototype.serialize=function(){return r.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:r.mapObject(this.sourceCaches,function(m){return m.serialize()}),layers:this._serializeLayers(this._order)},function(m){return m!==void 0})},p.prototype._updateLayer=function(m){this._updatedLayers[m.id]=!0,m.source&&!this._updatedSources[m.source]&&this.sourceCaches[m.source].getSource().type!=="raster"&&(this._updatedSources[m.source]="reload",this.sourceCaches[m.source].pause()),this._changed=!0},p.prototype._flattenAndSortRenderedFeatures=function(m){for(var y=this,I=function(yt){return y._layers[yt].type==="fill-extrusion"},T={},E=[],k=this._order.length-1;k>=0;k--){var F=this._order[k];if(I(F)){T[F]=k;for(var U=0,$=m;U<$.length;U+=1){var ee=$[U][F];if(ee)for(var ie=0,ge=ee;ie<ge.length;ie+=1)E.push(ge[ie])}}}E.sort(function(yt,gt){return gt.intersectionZ-yt.intersectionZ});for(var me=[],we=this._order.length-1;we>=0;we--){var ce=this._order[we];if(I(ce))for(var xe=E.length-1;xe>=0;xe--){var Te=E[xe].feature;if(T[Te.layer.id]<we)break;me.push(Te),E.pop()}else for(var Ge=0,Ue=m;Ge<Ue.length;Ge+=1){var De=Ue[Ge][ce];if(De)for(var He=0,it=De;He<it.length;He+=1)me.push(it[He].feature)}}return me},p.prototype.queryRenderedFeatures=function(m,y,I){y&&y.filter&&this._validate(r.validateStyle.filter,"queryRenderedFeatures.filter",y.filter,null,y);var T={};if(y&&y.layers){if(!Array.isArray(y.layers))return this.fire(new r.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var E=0,k=y.layers;E<k.length;E+=1){var F=k[E],U=this._layers[F];if(!U)return this.fire(new r.ErrorEvent(new Error("The layer '"+F+"' does not exist in the map's style and cannot be queried for features."))),[];T[U.source]=!0}}var $=[];for(var ee in y.availableImages=this._availableImages,this.sourceCaches)y.layers&&!T[ee]||$.push(sa(this.sourceCaches[ee],this._layers,this._serializedLayers,m,y,I));return this.placement&&$.push(function(ie,ge,me,we,ce,xe,Te){for(var Ge={},Ue=xe.queryRenderedSymbols(we),De=[],He=0,it=Object.keys(Ue).map(Number);He<it.length;He+=1)De.push(Te[it[He]]);De.sort(Ni);for(var yt=function(){var na=Gt[gt],ci=na.featureIndex.lookupSymbolFeatures(Ue[na.bucketInstanceId],ge,na.bucketIndex,na.sourceLayerIndex,ce.filter,ce.layers,ce.availableImages,ie);for(var Bt in ci){var va=Ge[Bt]=Ge[Bt]||[],Pa=ci[Bt];Pa.sort(function(Wa,ga){var ca=na.featureSortOrder;if(ca){var ar=ca.indexOf(Wa.featureIndex);return ca.indexOf(ga.featureIndex)-ar}return ga.featureIndex-Wa.featureIndex});for(var ba=0,fa=Pa;ba<fa.length;ba+=1)va.push(fa[ba])}},gt=0,Gt=De;gt<Gt.length;gt+=1)yt();var ta=function(na){Ge[na].forEach(function(ci){var Bt=ci.feature,va=me[ie[na].source].getFeatureState(Bt.layer["source-layer"],Bt.id);Bt.source=Bt.layer.source,Bt.layer["source-layer"]&&(Bt.sourceLayer=Bt.layer["source-layer"]),Bt.state=va})};for(var ra in Ge)ta(ra);return Ge}(this._layers,this._serializedLayers,this.sourceCaches,m,y,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($)},p.prototype.querySourceFeatures=function(m,y){y&&y.filter&&this._validate(r.validateStyle.filter,"querySourceFeatures.filter",y.filter,null,y);var I=this.sourceCaches[m];return I?function(T,E){for(var k=T.getRenderableIds().map(function(ge){return T.getTileByID(ge)}),F=[],U={},$=0;$<k.length;$++){var ee=k[$],ie=ee.tileID.canonical.key;U[ie]||(U[ie]=!0,ee.querySourceFeatures(F,E))}return F}(I,y):[]},p.prototype.addSourceType=function(m,y,I){return p.getSourceType(m)?I(new Error('A source type called "'+m+'" already exists.')):(p.setSourceType(m,y),y.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:m,url:y.workerSourceURL},I):I(null,null))},p.prototype.getLight=function(){return this.light.getLight()},p.prototype.setLight=function(m,y){y===void 0&&(y={}),this._checkLoaded();var I=this.light.getLight(),T=!1;for(var E in m)if(!r.deepEqual(m[E],I[E])){T=!0;break}if(T){var k={now:r.browser.now(),transition:r.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(m,y),this.light.updateTransitions(k)}},p.prototype._validate=function(m,y,I,T,E){return E===void 0&&(E={}),(!E||E.validate!==!1)&&mc(this,m.call(r.validateStyle,r.extend({key:y,style:this.serialize(),value:I,styleSpec:r.styleSpec},T)))},p.prototype._remove=function(){for(var m in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),r.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[m].setEventedParent(null);for(var y in this.sourceCaches)this.sourceCaches[y].clearTiles(),this.sourceCaches[y].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},p.prototype._clearSource=function(m){this.sourceCaches[m].clearTiles()},p.prototype._reloadSource=function(m){this.sourceCaches[m].resume(),this.sourceCaches[m].reload()},p.prototype._updateSources=function(m){for(var y in this.sourceCaches)this.sourceCaches[y].update(m)},p.prototype._generateCollisionBoxes=function(){for(var m in this.sourceCaches)this._reloadSource(m)},p.prototype._updatePlacement=function(m,y,I,T,E){E===void 0&&(E=!1);for(var k=!1,F=!1,U={},$=0,ee=this._order;$<ee.length;$+=1){var ie=this._layers[ee[$]];if(ie.type==="symbol"){if(!U[ie.source]){var ge=this.sourceCaches[ie.source];U[ie.source]=ge.getRenderableIds(!0).map(function(Te){return ge.getTileByID(Te)}).sort(function(Te,Ge){return Ge.tileID.overscaledZ-Te.tileID.overscaledZ||(Te.tileID.isLessThan(Ge.tileID)?-1:1)})}var me=this.crossTileSymbolIndex.addLayer(ie,U[ie.source],m.center.lng);k=k||me}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||I===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(r.browser.now(),m.zoom))&&(this.pauseablePlacement=new qh(m,this._order,E,y,I,T,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(r.browser.now()),F=!0),k&&this.pauseablePlacement.placement.setStale()),F||k)for(var we=0,ce=this._order;we<ce.length;we+=1){var xe=this._layers[ce[we]];xe.type==="symbol"&&this.placement.updateLayerOpacities(xe,U[xe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(r.browser.now())},p.prototype._releaseSymbolFadeTiles=function(){for(var m in this.sourceCaches)this.sourceCaches[m].releaseSymbolFadeTiles()},p.prototype.getImages=function(m,y,I){this.imageManager.getImages(y.icons,I),this._updateTilesForChangedImages();var T=this.sourceCaches[y.source];T&&T.setDependencies(y.tileID.key,y.type,y.icons)},p.prototype.getGlyphs=function(m,y,I){this.glyphManager.getGlyphs(y.stacks,I)},p.prototype.getResource=function(m,y,I){return r.makeRequest(y,I)},p}(r.Evented);vs.getSourceType=function(_){return da[_]},vs.setSourceType=function(_,p){da[_]=p},vs.registerForPluginStateChange=r.registerForPluginStateChange;var Bn=r.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ed=Oi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),z1=Oi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),mI=Oi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),gI=Oi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),bf=Oi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),vf=Oi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),xf=Oi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),wf=Oi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),U1=Oi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),X1=Oi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),pI=Oi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),jh=Oi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Jh=Oi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),H1=Oi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ar=Oi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),If=Oi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),yu=Oi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),bu=Oi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),gc=Oi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),pc=Oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),vu=Oi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),fc=Oi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),yc=Oi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),xu=Oi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),Y1=Oi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),K1=Oi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function Oi(_,p){var m=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=p.match(/attribute ([\w]+) ([\w]+)/g),I=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=p.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=T?T.concat(I):I,k={};return{fragmentSource:_=_.replace(m,function(F,U,$,ee,ie){return k[ie]=!0,U==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
varying `+$+" "+ee+" "+ie+`;
#else
uniform `+$+" "+ee+" u_"+ie+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ie+`
    `+$+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`}),vertexSource:p=p.replace(m,function(F,U,$,ee,ie){var ge=ee==="float"?"vec2":"vec4",me=ie.match(/color/)?"color":ge;return k[ie]?U==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
uniform lowp float u_`+ie+`_t;
attribute `+$+" "+ge+" a_"+ie+`;
varying `+$+" "+ee+" "+ie+`;
#else
uniform `+$+" "+ee+" u_"+ie+`;
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+ie+" = a_"+ie+`;
#else
    `+$+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+ie+" = unpack_mix_"+me+"(a_"+ie+", u_"+ie+`_t);
#else
    `+$+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`:U==="define"?`
#ifndef HAS_UNIFORM_u_`+ie+`
uniform lowp float u_`+ie+`_t;
attribute `+$+" "+ge+" a_"+ie+`;
#else
uniform `+$+" "+ee+" u_"+ie+`;
#endif
`:me==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+$+" "+ee+" "+ie+" = a_"+ie+`;
#else
    `+$+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ie+`
    `+$+" "+ee+" "+ie+" = unpack_mix_"+me+"(a_"+ie+", u_"+ie+`_t);
#else
    `+$+" "+ee+" "+ie+" = u_"+ie+`;
#endif
`}),staticAttributes:y,staticUniforms:E}}var fI=Object.freeze({__proto__:null,prelude:Ed,background:z1,backgroundPattern:mI,circle:gI,clippingMask:bf,heatmap:vf,heatmapTexture:xf,collisionBox:wf,collisionCircle:U1,debug:X1,fill:pI,fillOutline:jh,fillOutlinePattern:Jh,fillPattern:H1,fillExtrusion:Ar,fillExtrusionPattern:If,hillshadePrepare:yu,hillshade:bu,line:gc,lineGradient:pc,linePattern:vu,lineSDF:fc,raster:yc,symbolIcon:xu,symbolSDF:Y1,symbolTextAndIcon:K1}),Wm=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function q1(_){for(var p=[],m=0;m<_.length;m++)if(_[m]!==null){var y=_[m].split(" ");p.push(y.pop())}return p}Wm.prototype.bind=function(_,p,m,y,I,T,E,k){this.context=_;for(var F=this.boundPaintVertexBuffers.length!==y.length,U=0;!F&&U<y.length;U++)this.boundPaintVertexBuffers[U]!==y[U]&&(F=!0);_.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===m&&!F&&this.boundIndexBuffer===I&&this.boundVertexOffset===T&&this.boundDynamicVertexBuffer===E&&this.boundDynamicVertexBuffer2===k?(_.bindVertexArrayOES.set(this.vao),E&&E.bind(),I&&I.dynamicDraw&&I.bind(),k&&k.bind()):this.freshBind(p,m,y,I,T,E,k)},Wm.prototype.freshBind=function(_,p,m,y,I,T,E){var k,F=_.numAttributes,U=this.context,$=U.gl;if(U.extVertexArrayObject)this.vao&&this.destroy(),this.vao=U.extVertexArrayObject.createVertexArrayOES(),U.bindVertexArrayOES.set(this.vao),k=0,this.boundProgram=_,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=y,this.boundVertexOffset=I,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=E;else{k=U.currentNumAttributes||0;for(var ee=F;ee<k;ee++)$.disableVertexAttribArray(ee)}p.enableAttributes($,_);for(var ie=0,ge=m;ie<ge.length;ie+=1)ge[ie].enableAttributes($,_);T&&T.enableAttributes($,_),E&&E.enableAttributes($,_),p.bind(),p.setVertexAttribPointers($,_,I);for(var me=0,we=m;me<we.length;me+=1){var ce=we[me];ce.bind(),ce.setVertexAttribPointers($,_,I)}T&&(T.bind(),T.setVertexAttribPointers($,_,I)),y&&y.bind(),E&&(E.bind(),E.setVertexAttribPointers($,_,I)),U.currentNumAttributes=F},Wm.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var j1=function(_,p,m,y,I,T){var E=_.gl;this.program=E.createProgram();for(var k=q1(m.staticAttributes),F=y?y.getBinderAttributes():[],U=k.concat(F),$=m.staticUniforms?q1(m.staticUniforms):[],ee=y?y.getBinderUniforms():[],ie=[],ge=0,me=$.concat(ee);ge<me.length;ge+=1){var we=me[ge];ie.indexOf(we)<0&&ie.push(we)}var ce=y?y.defines():[];T&&ce.push("#define OVERDRAW_INSPECTOR;");var xe=ce.concat(Ed.fragmentSource,m.fragmentSource).join(`
`),Te=ce.concat(Ed.vertexSource,m.vertexSource).join(`
`),Ge=E.createShader(E.FRAGMENT_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ge,xe),E.compileShader(Ge),E.attachShader(this.program,Ge);var Ue=E.createShader(E.VERTEX_SHADER);if(E.isContextLost())this.failedToCreate=!0;else{E.shaderSource(Ue,Te),E.compileShader(Ue),E.attachShader(this.program,Ue),this.attributes={};var De={};this.numAttributes=U.length;for(var He=0;He<this.numAttributes;He++)U[He]&&(E.bindAttribLocation(this.program,He,U[He]),this.attributes[U[He]]=He);E.linkProgram(this.program),E.deleteShader(Ue),E.deleteShader(Ge);for(var it=0;it<ie.length;it++){var yt=ie[it];if(yt&&!De[yt]){var gt=E.getUniformLocation(this.program,yt);gt&&(De[yt]=gt)}}this.fixedUniforms=I(_,De),this.binderUniforms=y?y.getUniforms(_,De):[]}}};function J1(_,p,m){var y=1/rn(m,1,p.transform.tileZoom),I=Math.pow(2,m.tileID.overscaledZ),T=m.tileSize*Math.pow(2,p.transform.tileZoom)/I,E=T*(m.tileID.canonical.x+m.tileID.wrap*I),k=T*m.tileID.canonical.y;return{u_image:0,u_texsize:m.imageAtlasTexture.size,u_scale:[y,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[E>>16,k>>16],u_pixel_coord_lower:[65535&E,65535&k]}}j1.prototype.draw=function(_,p,m,y,I,T,E,k,F,U,$,ee,ie,ge,me,we){var ce,xe=_.gl;if(!this.failedToCreate){for(var Te in _.program.set(this.program),_.setDepthMode(m),_.setStencilMode(y),_.setColorMode(I),_.setCullFace(T),this.fixedUniforms)this.fixedUniforms[Te].set(E[Te]);ge&&ge.setUniforms(_,this.binderUniforms,ee,{zoom:ie});for(var Ge=(ce={},ce[xe.LINES]=2,ce[xe.TRIANGLES]=3,ce[xe.LINE_STRIP]=1,ce)[p],Ue=0,De=$.get();Ue<De.length;Ue+=1){var He=De[Ue],it=He.vaos||(He.vaos={});(it[k]||(it[k]=new Wm)).bind(_,this,F,ge?ge.getPaintVertexBuffers():[],U,He.vertexOffset,me,we),xe.drawElements(p,He.primitiveLength*Ge,xe.UNSIGNED_SHORT,He.primitiveOffset*Ge*2)}}};var Q1=function(_,p,m,y){var I=p.style.light,T=I.properties.get("position"),E=[T.x,T.y,T.z],k=r.create$1();I.properties.get("anchor")==="viewport"&&r.fromRotation(k,-p.transform.angle),r.transformMat3(E,E,k);var F=I.properties.get("color");return{u_matrix:_,u_lightpos:E,u_lightintensity:I.properties.get("intensity"),u_lightcolor:[F.r,F.g,F.b],u_vertical_gradient:+m,u_opacity:y}},bc=function(_,p,m,y,I,T,E){return r.extend(Q1(_,p,m,y),J1(T,p,E),{u_height_factor:-Math.pow(2,I.overscaledZ)/E.tileSize/8})},wu=function(_){return{u_matrix:_}},vc=function(_,p,m,y){return r.extend(wu(_),J1(m,p,y))},$1=function(_,p){return{u_matrix:_,u_world:p}},eb=function(_,p,m,y,I){return r.extend(vc(_,p,m,y),{u_world:I})},Cf=function(_,p,m,y){var I,T,E=_.transform;if(y.paint.get("circle-pitch-alignment")==="map"){var k=rn(m,1,E.zoom);I=!0,T=[k,k]}else I=!1,T=E.pixelsToGLUnits;return{u_camera_to_center_distance:E.cameraToCenterDistance,u_scale_with_map:+(y.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(p.posMatrix,m,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_pitch_with_map:+I,u_device_pixel_ratio:r.browser.devicePixelRatio,u_extrude_scale:T}},xc=function(_,p,m){var y=rn(m,1,p.zoom),I=Math.pow(2,p.zoom-m.tileID.overscaledZ),T=m.tileID.overscaleFactor();return{u_matrix:_,u_camera_to_center_distance:p.cameraToCenterDistance,u_pixels_to_tile_units:y,u_extrude_scale:[p.pixelsToGLUnits[0]/(y*I),p.pixelsToGLUnits[1]/(y*I)],u_overscale_factor:T}},tb=function(_,p,m){return{u_matrix:_,u_inv_matrix:p,u_camera_to_center_distance:m.cameraToCenterDistance,u_viewport_size:[m.width,m.height]}},wc=function(_,p,m){return m===void 0&&(m=1),{u_matrix:_,u_color:p,u_overlay:0,u_overlay_scale:m}},Ic=function(_){return{u_matrix:_}},ab=function(_,p,m,y){return{u_matrix:_,u_extrude_scale:rn(p,1,m),u_intensity:y}},Qh=function(_,p,m){var y=_.transform;return{u_matrix:ib(_,p,m),u_ratio:1/rn(p,1,y.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Xi=function(_,p,m,y){return r.extend(Qh(_,p,m),{u_image:0,u_image_height:y})},Gm=function(_,p,m,y){var I=_.transform,T=Md(p,I);return{u_matrix:ib(_,p,m),u_texsize:p.imageAtlasTexture.size,u_ratio:1/rn(p,1,I.zoom),u_device_pixel_ratio:r.browser.devicePixelRatio,u_image:0,u_scale:[T,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]]}},yI=function(_,p,m,y,I){var T=_.lineAtlas,E=Md(p,_.transform),k=m.layout.get("line-cap")==="round",F=T.getDash(y.from,k),U=T.getDash(y.to,k),$=F.width*I.fromScale,ee=U.width*I.toScale;return r.extend(Qh(_,p,m),{u_patternscale_a:[E/$,-F.height/2],u_patternscale_b:[E/ee,-U.height/2],u_sdfgamma:T.width/(256*Math.min($,ee)*r.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:U.y,u_mix:I.t})};function Md(_,p){return 1/rn(_,1,p.tileZoom)}function ib(_,p,m){return _.translatePosMatrix(p.tileID.posMatrix,p,m.paint.get("line-translate"),m.paint.get("line-translate-anchor"))}var bI=function(_,p,m,y,I){return{u_matrix:_,u_tl_parent:p,u_scale_parent:m,u_buffer_scale:1,u_fade_t:y.mix,u_opacity:y.opacity*I.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:I.paint.get("raster-brightness-min"),u_brightness_high:I.paint.get("raster-brightness-max"),u_saturation_factor:(E=I.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(T=I.paint.get("raster-contrast"),T>0?1/(1-T):1+T),u_spin_weights:nb(I.paint.get("raster-hue-rotate"))};var T,E};function nb(_){_*=Math.PI/180;var p=Math.sin(_),m=Math.cos(_);return[(2*m+1)/3,(-Math.sqrt(3)*p-m+1)/3,(Math.sqrt(3)*p-m+1)/3]}var Om,Ld=function(_,p,m,y,I,T,E,k,F,U){var $=I.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:p?p.uSizeT:0,u_size:p?p.uSize:0,u_camera_to_center_distance:$.cameraToCenterDistance,u_pitch:$.pitch/360*2*Math.PI,u_rotate_symbol:+m,u_aspect_ratio:$.width/$.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:E,u_coord_matrix:k,u_is_text:+F,u_pitch_with_map:+y,u_texsize:U,u_texture:0}},$h=function(_,p,m,y,I,T,E,k,F,U,$){var ee=I.transform;return r.extend(Ld(_,p,m,y,I,T,E,k,F,U),{u_gamma_scale:y?Math.cos(ee._pitch)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:r.browser.devicePixelRatio,u_is_halo:+$})},Pm=function(_,p,m,y,I,T,E,k,F,U){return r.extend($h(_,p,m,y,I,T,E,k,!0,F,!0),{u_texsize_icon:U,u_texture_icon:1})},e_=function(_,p,m){return{u_matrix:_,u_opacity:p,u_color:m}},Rd=function(_,p,m,y,I,T){return r.extend(function(E,k,F,U){var $=F.imageManager.getPattern(E.from.toString()),ee=F.imageManager.getPattern(E.to.toString()),ie=F.imageManager.getPixelSize(),ge=ie.width,me=ie.height,we=Math.pow(2,U.tileID.overscaledZ),ce=U.tileSize*Math.pow(2,F.transform.tileZoom)/we,xe=ce*(U.tileID.canonical.x+U.tileID.wrap*we),Te=ce*U.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:ee.tl,u_pattern_br_b:ee.br,u_texsize:[ge,me],u_mix:k.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:ee.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/rn(U,1,F.transform.tileZoom),u_pixel_coord_upper:[xe>>16,Te>>16],u_pixel_coord_lower:[65535&xe,65535&Te]}}(y,T,m,I),{u_matrix:_,u_opacity:p})},rb={fillExtrusion:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_lightpos:new r.Uniform3f(_,p.u_lightpos),u_lightintensity:new r.Uniform1f(_,p.u_lightintensity),u_lightcolor:new r.Uniform3f(_,p.u_lightcolor),u_vertical_gradient:new r.Uniform1f(_,p.u_vertical_gradient),u_opacity:new r.Uniform1f(_,p.u_opacity)}},fillExtrusionPattern:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_lightpos:new r.Uniform3f(_,p.u_lightpos),u_lightintensity:new r.Uniform1f(_,p.u_lightintensity),u_lightcolor:new r.Uniform3f(_,p.u_lightcolor),u_vertical_gradient:new r.Uniform1f(_,p.u_vertical_gradient),u_height_factor:new r.Uniform1f(_,p.u_height_factor),u_image:new r.Uniform1i(_,p.u_image),u_texsize:new r.Uniform2f(_,p.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,p.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,p.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,p.u_scale),u_fade:new r.Uniform1f(_,p.u_fade),u_opacity:new r.Uniform1f(_,p.u_opacity)}},fill:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix)}},fillPattern:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_image:new r.Uniform1i(_,p.u_image),u_texsize:new r.Uniform2f(_,p.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,p.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,p.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,p.u_scale),u_fade:new r.Uniform1f(_,p.u_fade)}},fillOutline:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_world:new r.Uniform2f(_,p.u_world)}},fillOutlinePattern:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_world:new r.Uniform2f(_,p.u_world),u_image:new r.Uniform1i(_,p.u_image),u_texsize:new r.Uniform2f(_,p.u_texsize),u_pixel_coord_upper:new r.Uniform2f(_,p.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,p.u_pixel_coord_lower),u_scale:new r.Uniform3f(_,p.u_scale),u_fade:new r.Uniform1f(_,p.u_fade)}},circle:function(_,p){return{u_camera_to_center_distance:new r.Uniform1f(_,p.u_camera_to_center_distance),u_scale_with_map:new r.Uniform1i(_,p.u_scale_with_map),u_pitch_with_map:new r.Uniform1i(_,p.u_pitch_with_map),u_extrude_scale:new r.Uniform2f(_,p.u_extrude_scale),u_device_pixel_ratio:new r.Uniform1f(_,p.u_device_pixel_ratio),u_matrix:new r.UniformMatrix4f(_,p.u_matrix)}},collisionBox:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_camera_to_center_distance:new r.Uniform1f(_,p.u_camera_to_center_distance),u_pixels_to_tile_units:new r.Uniform1f(_,p.u_pixels_to_tile_units),u_extrude_scale:new r.Uniform2f(_,p.u_extrude_scale),u_overscale_factor:new r.Uniform1f(_,p.u_overscale_factor)}},collisionCircle:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_inv_matrix:new r.UniformMatrix4f(_,p.u_inv_matrix),u_camera_to_center_distance:new r.Uniform1f(_,p.u_camera_to_center_distance),u_viewport_size:new r.Uniform2f(_,p.u_viewport_size)}},debug:function(_,p){return{u_color:new r.UniformColor(_,p.u_color),u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_overlay:new r.Uniform1i(_,p.u_overlay),u_overlay_scale:new r.Uniform1f(_,p.u_overlay_scale)}},clippingMask:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix)}},heatmap:function(_,p){return{u_extrude_scale:new r.Uniform1f(_,p.u_extrude_scale),u_intensity:new r.Uniform1f(_,p.u_intensity),u_matrix:new r.UniformMatrix4f(_,p.u_matrix)}},heatmapTexture:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_world:new r.Uniform2f(_,p.u_world),u_image:new r.Uniform1i(_,p.u_image),u_color_ramp:new r.Uniform1i(_,p.u_color_ramp),u_opacity:new r.Uniform1f(_,p.u_opacity)}},hillshade:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_image:new r.Uniform1i(_,p.u_image),u_latrange:new r.Uniform2f(_,p.u_latrange),u_light:new r.Uniform2f(_,p.u_light),u_shadow:new r.UniformColor(_,p.u_shadow),u_highlight:new r.UniformColor(_,p.u_highlight),u_accent:new r.UniformColor(_,p.u_accent)}},hillshadePrepare:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_image:new r.Uniform1i(_,p.u_image),u_dimension:new r.Uniform2f(_,p.u_dimension),u_zoom:new r.Uniform1f(_,p.u_zoom),u_unpack:new r.Uniform4f(_,p.u_unpack)}},line:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_ratio:new r.Uniform1f(_,p.u_ratio),u_device_pixel_ratio:new r.Uniform1f(_,p.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(_,p.u_units_to_pixels)}},lineGradient:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_ratio:new r.Uniform1f(_,p.u_ratio),u_device_pixel_ratio:new r.Uniform1f(_,p.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(_,p.u_units_to_pixels),u_image:new r.Uniform1i(_,p.u_image),u_image_height:new r.Uniform1f(_,p.u_image_height)}},linePattern:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_texsize:new r.Uniform2f(_,p.u_texsize),u_ratio:new r.Uniform1f(_,p.u_ratio),u_device_pixel_ratio:new r.Uniform1f(_,p.u_device_pixel_ratio),u_image:new r.Uniform1i(_,p.u_image),u_units_to_pixels:new r.Uniform2f(_,p.u_units_to_pixels),u_scale:new r.Uniform3f(_,p.u_scale),u_fade:new r.Uniform1f(_,p.u_fade)}},lineSDF:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_ratio:new r.Uniform1f(_,p.u_ratio),u_device_pixel_ratio:new r.Uniform1f(_,p.u_device_pixel_ratio),u_units_to_pixels:new r.Uniform2f(_,p.u_units_to_pixels),u_patternscale_a:new r.Uniform2f(_,p.u_patternscale_a),u_patternscale_b:new r.Uniform2f(_,p.u_patternscale_b),u_sdfgamma:new r.Uniform1f(_,p.u_sdfgamma),u_image:new r.Uniform1i(_,p.u_image),u_tex_y_a:new r.Uniform1f(_,p.u_tex_y_a),u_tex_y_b:new r.Uniform1f(_,p.u_tex_y_b),u_mix:new r.Uniform1f(_,p.u_mix)}},raster:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_tl_parent:new r.Uniform2f(_,p.u_tl_parent),u_scale_parent:new r.Uniform1f(_,p.u_scale_parent),u_buffer_scale:new r.Uniform1f(_,p.u_buffer_scale),u_fade_t:new r.Uniform1f(_,p.u_fade_t),u_opacity:new r.Uniform1f(_,p.u_opacity),u_image0:new r.Uniform1i(_,p.u_image0),u_image1:new r.Uniform1i(_,p.u_image1),u_brightness_low:new r.Uniform1f(_,p.u_brightness_low),u_brightness_high:new r.Uniform1f(_,p.u_brightness_high),u_saturation_factor:new r.Uniform1f(_,p.u_saturation_factor),u_contrast_factor:new r.Uniform1f(_,p.u_contrast_factor),u_spin_weights:new r.Uniform3f(_,p.u_spin_weights)}},symbolIcon:function(_,p){return{u_is_size_zoom_constant:new r.Uniform1i(_,p.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,p.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,p.u_size_t),u_size:new r.Uniform1f(_,p.u_size),u_camera_to_center_distance:new r.Uniform1f(_,p.u_camera_to_center_distance),u_pitch:new r.Uniform1f(_,p.u_pitch),u_rotate_symbol:new r.Uniform1i(_,p.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,p.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,p.u_fade_change),u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,p.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,p.u_coord_matrix),u_is_text:new r.Uniform1i(_,p.u_is_text),u_pitch_with_map:new r.Uniform1i(_,p.u_pitch_with_map),u_texsize:new r.Uniform2f(_,p.u_texsize),u_texture:new r.Uniform1i(_,p.u_texture)}},symbolSDF:function(_,p){return{u_is_size_zoom_constant:new r.Uniform1i(_,p.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,p.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,p.u_size_t),u_size:new r.Uniform1f(_,p.u_size),u_camera_to_center_distance:new r.Uniform1f(_,p.u_camera_to_center_distance),u_pitch:new r.Uniform1f(_,p.u_pitch),u_rotate_symbol:new r.Uniform1i(_,p.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,p.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,p.u_fade_change),u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,p.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,p.u_coord_matrix),u_is_text:new r.Uniform1i(_,p.u_is_text),u_pitch_with_map:new r.Uniform1i(_,p.u_pitch_with_map),u_texsize:new r.Uniform2f(_,p.u_texsize),u_texture:new r.Uniform1i(_,p.u_texture),u_gamma_scale:new r.Uniform1f(_,p.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(_,p.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(_,p.u_is_halo)}},symbolTextAndIcon:function(_,p){return{u_is_size_zoom_constant:new r.Uniform1i(_,p.u_is_size_zoom_constant),u_is_size_feature_constant:new r.Uniform1i(_,p.u_is_size_feature_constant),u_size_t:new r.Uniform1f(_,p.u_size_t),u_size:new r.Uniform1f(_,p.u_size),u_camera_to_center_distance:new r.Uniform1f(_,p.u_camera_to_center_distance),u_pitch:new r.Uniform1f(_,p.u_pitch),u_rotate_symbol:new r.Uniform1i(_,p.u_rotate_symbol),u_aspect_ratio:new r.Uniform1f(_,p.u_aspect_ratio),u_fade_change:new r.Uniform1f(_,p.u_fade_change),u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_label_plane_matrix:new r.UniformMatrix4f(_,p.u_label_plane_matrix),u_coord_matrix:new r.UniformMatrix4f(_,p.u_coord_matrix),u_is_text:new r.Uniform1i(_,p.u_is_text),u_pitch_with_map:new r.Uniform1i(_,p.u_pitch_with_map),u_texsize:new r.Uniform2f(_,p.u_texsize),u_texsize_icon:new r.Uniform2f(_,p.u_texsize_icon),u_texture:new r.Uniform1i(_,p.u_texture),u_texture_icon:new r.Uniform1i(_,p.u_texture_icon),u_gamma_scale:new r.Uniform1f(_,p.u_gamma_scale),u_device_pixel_ratio:new r.Uniform1f(_,p.u_device_pixel_ratio),u_is_halo:new r.Uniform1i(_,p.u_is_halo)}},background:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_opacity:new r.Uniform1f(_,p.u_opacity),u_color:new r.UniformColor(_,p.u_color)}},backgroundPattern:function(_,p){return{u_matrix:new r.UniformMatrix4f(_,p.u_matrix),u_opacity:new r.Uniform1f(_,p.u_opacity),u_image:new r.Uniform1i(_,p.u_image),u_pattern_tl_a:new r.Uniform2f(_,p.u_pattern_tl_a),u_pattern_br_a:new r.Uniform2f(_,p.u_pattern_br_a),u_pattern_tl_b:new r.Uniform2f(_,p.u_pattern_tl_b),u_pattern_br_b:new r.Uniform2f(_,p.u_pattern_br_b),u_texsize:new r.Uniform2f(_,p.u_texsize),u_mix:new r.Uniform1f(_,p.u_mix),u_pattern_size_a:new r.Uniform2f(_,p.u_pattern_size_a),u_pattern_size_b:new r.Uniform2f(_,p.u_pattern_size_b),u_scale_a:new r.Uniform1f(_,p.u_scale_a),u_scale_b:new r.Uniform1f(_,p.u_scale_b),u_pixel_coord_upper:new r.Uniform2f(_,p.u_pixel_coord_upper),u_pixel_coord_lower:new r.Uniform2f(_,p.u_pixel_coord_lower),u_tile_units_to_pixels:new r.Uniform1f(_,p.u_tile_units_to_pixels)}}};function kd(_,p,m,y,I,T,E){for(var k=_.context,F=k.gl,U=_.useProgram("collisionBox"),$=[],ee=0,ie=0,ge=0;ge<y.length;ge++){var me=y[ge],we=p.getTile(me),ce=we.getBucket(m);if(ce){var xe=me.posMatrix;I[0]===0&&I[1]===0||(xe=_.translatePosMatrix(me.posMatrix,we,I,T));var Te=E?ce.textCollisionBox:ce.iconCollisionBox,Ge=ce.collisionCircleArray;if(Ge.length>0){var Ue=r.create(),De=xe;r.mul(Ue,ce.placementInvProjMatrix,_.transform.glCoordMatrix),r.mul(Ue,Ue,ce.placementViewportMatrix),$.push({circleArray:Ge,circleOffset:ie,transform:De,invTransform:Ue}),ie=ee+=Ge.length/4}Te&&U.draw(k,F.LINES,ae.disabled,oe.disabled,_.colorModeForRenderPass(),ve.disabled,xc(xe,_.transform,we),m.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,null,_.transform.zoom,null,null,Te.collisionVertexBuffer)}}if(E&&$.length){var He=_.useProgram("collisionCircle"),it=new r.StructArrayLayout2f1f2i16;it.resize(4*ee),it._trim();for(var yt=0,gt=0,Gt=$;gt<Gt.length;gt+=1)for(var ta=Gt[gt],ra=0;ra<ta.circleArray.length/4;ra++){var na=4*ra,ci=ta.circleArray[na+0],Bt=ta.circleArray[na+1],va=ta.circleArray[na+2],Pa=ta.circleArray[na+3];it.emplace(yt++,ci,Bt,va,Pa,0),it.emplace(yt++,ci,Bt,va,Pa,1),it.emplace(yt++,ci,Bt,va,Pa,2),it.emplace(yt++,ci,Bt,va,Pa,3)}(!Om||Om.length<2*ee)&&(Om=function(wn){var Pr=2*wn,gr=new r.StructArrayLayout3ui6;gr.resize(Pr),gr._trim();for(var yn=0;yn<Pr;yn++){var Mn=6*yn;gr.uint16[Mn+0]=4*yn+0,gr.uint16[Mn+1]=4*yn+1,gr.uint16[Mn+2]=4*yn+2,gr.uint16[Mn+3]=4*yn+2,gr.uint16[Mn+4]=4*yn+3,gr.uint16[Mn+5]=4*yn+0}return gr}(ee));for(var ba=k.createIndexBuffer(Om,!0),fa=k.createVertexBuffer(it,r.collisionCircleLayout.members,!0),Wa=0,ga=$;Wa<ga.length;Wa+=1){var ca=ga[Wa],ar=tb(ca.transform,ca.invTransform,_.transform);He.draw(k,F.TRIANGLES,ae.disabled,oe.disabled,_.colorModeForRenderPass(),ve.disabled,ar,m.id,fa,ba,r.SegmentVector.simpleSegment(0,2*ca.circleOffset,ca.circleArray.length,ca.circleArray.length/2),null,_.transform.zoom,null,null,null)}fa.destroy(),ba.destroy()}}var No=r.identity(new Float32Array(16));function sb(_,p,m,y,I,T){var E=r.getAnchorAlignment(_),k=-(E.horizontalAlign-.5)*p,F=-(E.verticalAlign-.5)*m,U=r.evaluateVariableOffset(_,y);return new r.Point((k/I+U[0])*T,(F/I+U[1])*T)}function ob(_,p,m,y,I,T,E,k,F,U,$){var ee=_.text.placedSymbolArray,ie=_.text.dynamicLayoutVertexArray,ge=_.icon.dynamicLayoutVertexArray,me={};ie.clear();for(var we=0;we<ee.length;we++){var ce=ee.get(we),xe=ce.hidden||!ce.crossTileID||_.allowVerticalPlacement&&!ce.placedOrientation?null:y[ce.crossTileID];if(xe){var Te=new r.Point(ce.anchorX,ce.anchorY),Ge=Da(Te,m?k:E),Ue=ui(T.cameraToCenterDistance,Ge.signedDistanceFromCamera),De=I.evaluateSizeForFeature(_.textSizeData,U,ce)*Ue/r.ONE_EM;m&&(De*=_.tilePixelRatio/F);for(var He=sb(xe.anchor,xe.width,xe.height,xe.textOffset,xe.textBoxScale,De),it=m?Da(Te.add(He),E).point:Ge.point.add(p?He.rotate(-T.angle):He),yt=_.allowVerticalPlacement&&ce.placedOrientation===r.WritingMode.vertical?Math.PI/2:0,gt=0;gt<ce.numGlyphs;gt++)r.addDynamicAttributes(ie,it,yt);$&&ce.associatedIconIndex>=0&&(me[ce.associatedIconIndex]={shiftedAnchor:it,angle:yt})}else Ur(ce.numGlyphs,ie)}if($){ge.clear();for(var Gt=_.icon.placedSymbolArray,ta=0;ta<Gt.length;ta++){var ra=Gt.get(ta);if(ra.hidden)Ur(ra.numGlyphs,ge);else{var na=me[ta];if(na)for(var ci=0;ci<ra.numGlyphs;ci++)r.addDynamicAttributes(ge,na.shiftedAnchor,na.angle);else Ur(ra.numGlyphs,ge)}}_.icon.dynamicLayoutVertexBuffer.updateData(ge)}_.text.dynamicLayoutVertexBuffer.updateData(ie)}function lb(_,p,m){return m.iconsInText&&p?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function Cc(_,p,m,y,I,T,E,k,F,U,$,ee){for(var ie=_.context,ge=ie.gl,me=_.transform,we=k==="map",ce=F==="map",xe=we&&m.layout.get("symbol-placement")!=="point",Te=we&&!ce&&!xe,Ge=m.layout.get("symbol-sort-key").constantOr(1)!==void 0,Ue=!1,De=_.depthModeForSublayer(0,ae.ReadOnly),He=m.layout.get("text-variable-anchor"),it=[],yt=0,gt=y;yt<gt.length;yt+=1){var Gt=gt[yt],ta=p.getTile(Gt),ra=ta.getBucket(m);if(ra){var na=I?ra.text:ra.icon;if(na&&na.segments.get().length){var ci=na.programConfigurations.get(m.id),Bt=I||ra.sdfIcons,va=I?ra.textSizeData:ra.iconSizeData,Pa=ce||me.pitch!==0,ba=_.useProgram(lb(Bt,I,ra),ci),fa=r.evaluateSizeForZoom(va,me.zoom),Wa=void 0,ga=[0,0],ca=void 0,ar=void 0,wn=null,Pr=void 0;if(I)ca=ta.glyphAtlasTexture,ar=ge.LINEAR,Wa=ta.glyphAtlasTexture.size,ra.iconsInText&&(ga=ta.imageAtlasTexture.size,wn=ta.imageAtlasTexture,Pr=Pa||_.options.rotating||_.options.zooming||va.kind==="composite"||va.kind==="camera"?ge.LINEAR:ge.NEAREST);else{var gr=m.layout.get("icon-size").constantOr(0)!==1||ra.iconsNeedLinear;ca=ta.imageAtlasTexture,ar=Bt||_.options.rotating||_.options.zooming||gr||Pa?ge.LINEAR:ge.NEAREST,Wa=ta.imageAtlasTexture.size}var yn=rn(ta,1,_.transform.zoom),Mn=Gi(Gt.posMatrix,ce,we,_.transform,yn),Ss=Ta(Gt.posMatrix,ce,we,_.transform,yn),Kr=He&&ra.hasTextData(),Eu=m.layout.get("icon-text-fit")!=="none"&&Kr&&ra.hasIconData();xe&&Hh(ra,Gt.posMatrix,_,I,Mn,Ss,ce,U);var ss=_.translatePosMatrix(Gt.posMatrix,ta,T,E),Uo=xe||I&&He||Eu?No:Mn,go=_.translatePosMatrix(Ss,ta,T,E,!0),h_=Bt&&m.paint.get(I?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Fd={program:ba,buffers:na,uniformValues:Bt?ra.iconsInText?Pm(va.kind,fa,Te,ce,_,ss,Uo,go,Wa,ga):$h(va.kind,fa,Te,ce,_,ss,Uo,go,I,Wa,!0):Ld(va.kind,fa,Te,ce,_,ss,Uo,go,I,Wa),atlasTexture:ca,atlasTextureIcon:wn,atlasInterpolation:ar,atlasInterpolationIcon:Pr,isSDF:Bt,hasHalo:h_};if(Ge&&ra.canOverlap){Ue=!0;for(var Mu=0,Nd=na.segments.get();Mu<Nd.length;Mu+=1){var __=Nd[Mu];it.push({segments:new r.SegmentVector([__]),sortKey:__.sortKey,state:Fd})}}else it.push({segments:na.segments,sortKey:0,state:Fd})}}}Ue&&it.sort(function(Lu,Lc){return Lu.sortKey-Lc.sortKey});for(var dl=0,m_=it;dl<m_.length;dl+=1){var hl=m_[dl],ir=hl.state;if(ie.activeTexture.set(ge.TEXTURE0),ir.atlasTexture.bind(ir.atlasInterpolation,ge.CLAMP_TO_EDGE),ir.atlasTextureIcon&&(ie.activeTexture.set(ge.TEXTURE1),ir.atlasTextureIcon&&ir.atlasTextureIcon.bind(ir.atlasInterpolationIcon,ge.CLAMP_TO_EDGE)),ir.isSDF){var Gl=ir.uniformValues;ir.hasHalo&&(Gl.u_is_halo=1,t_(ir.buffers,hl.segments,m,_,ir.program,De,$,ee,Gl)),Gl.u_is_halo=0}t_(ir.buffers,hl.segments,m,_,ir.program,De,$,ee,ir.uniformValues)}}function t_(_,p,m,y,I,T,E,k,F){var U=y.context;I.draw(U,U.gl.TRIANGLES,T,E,k,ve.disabled,F,m.id,_.layoutVertexBuffer,_.indexBuffer,p,m.paint,y.transform.zoom,_.programConfigurations.get(m.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function Bm(_,p,m,y,I,T,E){var k,F,U,$,ee,ie=_.context.gl,ge=m.paint.get("fill-pattern"),me=ge&&ge.constantOr(1),we=m.getCrossfadeParameters();E?(F=me&&!m.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",k=ie.LINES):(F=me?"fillPattern":"fill",k=ie.TRIANGLES);for(var ce=0,xe=y;ce<xe.length;ce+=1){var Te=xe[ce],Ge=p.getTile(Te);if(!me||Ge.patternsLoaded()){var Ue=Ge.getBucket(m);if(Ue){var De=Ue.programConfigurations.get(m.id),He=_.useProgram(F,De);me&&(_.context.activeTexture.set(ie.TEXTURE0),Ge.imageAtlasTexture.bind(ie.LINEAR,ie.CLAMP_TO_EDGE),De.updatePaintBuffers(we));var it=ge.constantOr(null);if(it&&Ge.imageAtlas){var yt=Ge.imageAtlas,gt=yt.patternPositions[it.to.toString()],Gt=yt.patternPositions[it.from.toString()];gt&&Gt&&De.setConstantPatternPositions(gt,Gt)}var ta=_.translatePosMatrix(Te.posMatrix,Ge,m.paint.get("fill-translate"),m.paint.get("fill-translate-anchor"));if(E){$=Ue.indexBuffer2,ee=Ue.segments2;var ra=[ie.drawingBufferWidth,ie.drawingBufferHeight];U=F==="fillOutlinePattern"&&me?eb(ta,_,we,Ge,ra):$1(ta,ra)}else $=Ue.indexBuffer,ee=Ue.segments,U=me?vc(ta,_,we,Ge):wu(ta);He.draw(_.context,k,I,_.stencilModeForClipping(Te),T,ve.disabled,U,m.id,Ue.layoutVertexBuffer,$,ee,m.paint,_.transform.zoom,De)}}}}function Af(_,p,m,y,I,T,E){for(var k=_.context,F=k.gl,U=m.paint.get("fill-extrusion-pattern"),$=U.constantOr(1),ee=m.getCrossfadeParameters(),ie=m.paint.get("fill-extrusion-opacity"),ge=0,me=y;ge<me.length;ge+=1){var we=me[ge],ce=p.getTile(we),xe=ce.getBucket(m);if(xe){var Te=xe.programConfigurations.get(m.id),Ge=_.useProgram($?"fillExtrusionPattern":"fillExtrusion",Te);$&&(_.context.activeTexture.set(F.TEXTURE0),ce.imageAtlasTexture.bind(F.LINEAR,F.CLAMP_TO_EDGE),Te.updatePaintBuffers(ee));var Ue=U.constantOr(null);if(Ue&&ce.imageAtlas){var De=ce.imageAtlas,He=De.patternPositions[Ue.to.toString()],it=De.patternPositions[Ue.from.toString()];He&&it&&Te.setConstantPatternPositions(He,it)}var yt=_.translatePosMatrix(we.posMatrix,ce,m.paint.get("fill-extrusion-translate"),m.paint.get("fill-extrusion-translate-anchor")),gt=m.paint.get("fill-extrusion-vertical-gradient"),Gt=$?bc(yt,_,gt,ie,we,ee,ce):Q1(yt,_,gt,ie);Ge.draw(k,k.gl.TRIANGLES,I,T,E,ve.backCCW,Gt,m.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,m.paint,_.transform.zoom,Te)}}}function Fm(_,p,m,y,I,T){var E=_.context,k=E.gl,F=p.fbo;if(F){var U=_.useProgram("hillshade");E.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,F.colorAttachment.get());var $=function(ee,ie,ge){var me=ge.paint.get("hillshade-shadow-color"),we=ge.paint.get("hillshade-highlight-color"),ce=ge.paint.get("hillshade-accent-color"),xe=ge.paint.get("hillshade-illumination-direction")*(Math.PI/180);ge.paint.get("hillshade-illumination-anchor")==="viewport"&&(xe-=ee.transform.angle);var Te,Ge,Ue,De=!ee.options.moving;return{u_matrix:ee.transform.calculatePosMatrix(ie.tileID.toUnwrapped(),De),u_image:0,u_latrange:(Te=ie.tileID,Ge=Math.pow(2,Te.canonical.z),Ue=Te.canonical.y,[new r.MercatorCoordinate(0,Ue/Ge).toLngLat().lat,new r.MercatorCoordinate(0,(Ue+1)/Ge).toLngLat().lat]),u_light:[ge.paint.get("hillshade-exaggeration"),xe],u_shadow:me,u_highlight:we,u_accent:ce}}(_,p,m);U.draw(E,k.TRIANGLES,y,I,T,ve.disabled,$,m.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}}function vI(_,p,m,y,I,T){var E=_.context,k=E.gl,F=p.dem;if(F&&F.data){var U=F.dim,$=F.stride,ee=F.getPixels();if(E.activeTexture.set(k.TEXTURE1),E.pixelStoreUnpackPremultiplyAlpha.set(!1),p.demTexture=p.demTexture||_.getTileTexture($),p.demTexture){var ie=p.demTexture;ie.update(ee,{premultiply:!1}),ie.bind(k.NEAREST,k.CLAMP_TO_EDGE)}else p.demTexture=new r.Texture(E,ee,k.RGBA,{premultiply:!1}),p.demTexture.bind(k.NEAREST,k.CLAMP_TO_EDGE);E.activeTexture.set(k.TEXTURE0);var ge=p.fbo;if(!ge){var me=new r.Texture(E,{width:U,height:U,data:null},k.RGBA);me.bind(k.LINEAR,k.CLAMP_TO_EDGE),(ge=p.fbo=E.createFramebuffer(U,U,!0)).colorAttachment.set(me.texture)}E.bindFramebuffer.set(ge.framebuffer),E.viewport.set([0,0,U,U]),_.useProgram("hillshadePrepare").draw(E,k.TRIANGLES,y,I,T,ve.disabled,function(we,ce){var xe=ce.stride,Te=r.create();return r.ortho(Te,0,r.EXTENT,-r.EXTENT,0,0,1),r.translate(Te,Te,[0,-r.EXTENT,0]),{u_matrix:Te,u_image:1,u_dimension:[xe,xe],u_zoom:we.overscaledZ,u_unpack:ce.getUnpackVector()}}(p.tileID,F),m.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),p.needsHillshadePrepare=!1}}function Nm(_,p,m,y,I){var T=y.paint.get("raster-fade-duration");if(T>0){var E=r.browser.now(),k=(E-_.timeAdded)/T,F=p?(E-p.timeAdded)/T:-1,U=m.getSource(),$=I.coveringZoomLevel({tileSize:U.tileSize,roundZoom:U.roundZoom}),ee=!p||Math.abs(p.tileID.overscaledZ-$)>Math.abs(_.tileID.overscaledZ-$),ie=ee&&_.refreshedUponExpiration?1:r.clamp(ee?k:1-F,0,1);return _.refreshedUponExpiration&&k>=1&&(_.refreshedUponExpiration=!1),p?{opacity:1,mix:1-ie}:{opacity:ie,mix:0}}return{opacity:1,mix:0}}var Sf=new r.Color(1,0,0,1),ub=new r.Color(0,1,0,1),cb=new r.Color(0,0,1,1),Dm=new r.Color(1,0,1,1),Tf=new r.Color(0,1,1,1);function Ef(_,p,m,y){a_(_,0,p+m/2,_.transform.width,m,y)}function Mf(_,p,m,y){a_(_,p-m/2,0,m,_.transform.height,y)}function a_(_,p,m,y,I,T){var E=_.context,k=E.gl;k.enable(k.SCISSOR_TEST),k.scissor(p*r.browser.devicePixelRatio,m*r.browser.devicePixelRatio,y*r.browser.devicePixelRatio,I*r.browser.devicePixelRatio),E.clear({color:T}),k.disable(k.SCISSOR_TEST)}function db(_,p,m){var y=_.context,I=y.gl,T=m.posMatrix,E=_.useProgram("debug"),k=ae.disabled,F=oe.disabled,U=_.colorModeForRenderPass();y.activeTexture.set(I.TEXTURE0),_.emptyTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),E.draw(y,I.LINE_STRIP,k,F,U,ve.disabled,wc(T,r.Color.red),"$debug",_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments);var $=p.getTileByID(m.key).latestRawTileData,ee=Math.floor(($&&$.byteLength||0)/1024),ie=p.getTile(m).tileSize,ge=512/Math.min(ie,512)*(m.overscaledZ/_.transform.zoom)*.5,me=m.canonical.toString();m.overscaledZ!==m.canonical.z&&(me+=" => "+m.overscaledZ),function(we,ce){we.initDebugOverlayCanvas();var xe=we.debugOverlayCanvas,Te=we.context.gl,Ge=we.debugOverlayCanvas.getContext("2d");Ge.clearRect(0,0,xe.width,xe.height),Ge.shadowColor="white",Ge.shadowBlur=2,Ge.lineWidth=1.5,Ge.strokeStyle="white",Ge.textBaseline="top",Ge.font="bold 36px Open Sans, sans-serif",Ge.fillText(ce,5,5),Ge.strokeText(ce,5,5),we.debugOverlayTexture.update(xe),we.debugOverlayTexture.bind(Te.LINEAR,Te.CLAMP_TO_EDGE)}(_,me+" "+ee+"kb"),E.draw(y,I.TRIANGLES,k,F,Ce.alphaBlended,ve.disabled,wc(T,r.Color.transparent,ge),"$debug",_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments)}var Ac={symbol:function(_,p,m,y,I){if(_.renderPass==="translucent"){var T=oe.disabled,E=_.colorModeForRenderPass();m.layout.get("text-variable-anchor")&&function(k,F,U,$,ee,ie,ge){for(var me=F.transform,we=ee==="map",ce=ie==="map",xe=0,Te=k;xe<Te.length;xe+=1){var Ge=Te[xe],Ue=$.getTile(Ge),De=Ue.getBucket(U);if(De&&De.text&&De.text.segments.get().length){var He=r.evaluateSizeForZoom(De.textSizeData,me.zoom),it=rn(Ue,1,F.transform.zoom),yt=Gi(Ge.posMatrix,ce,we,F.transform,it),gt=U.layout.get("icon-text-fit")!=="none"&&De.hasIconData();if(He){var Gt=Math.pow(2,me.zoom-Ue.tileID.overscaledZ);ob(De,we,ce,ge,r.symbolSize,me,yt,Ge.posMatrix,Gt,He,gt)}}}}(y,_,m,p,m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),I),m.paint.get("icon-opacity").constantOr(1)!==0&&Cc(_,p,m,y,!1,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),m.layout.get("icon-rotation-alignment"),m.layout.get("icon-pitch-alignment"),m.layout.get("icon-keep-upright"),T,E),m.paint.get("text-opacity").constantOr(1)!==0&&Cc(_,p,m,y,!0,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),m.layout.get("text-rotation-alignment"),m.layout.get("text-pitch-alignment"),m.layout.get("text-keep-upright"),T,E),p.map.showCollisionBoxes&&(kd(_,p,m,y,m.paint.get("text-translate"),m.paint.get("text-translate-anchor"),!0),kd(_,p,m,y,m.paint.get("icon-translate"),m.paint.get("icon-translate-anchor"),!1))}},circle:function(_,p,m,y){if(_.renderPass==="translucent"){var I=m.paint.get("circle-opacity"),T=m.paint.get("circle-stroke-width"),E=m.paint.get("circle-stroke-opacity"),k=m.layout.get("circle-sort-key").constantOr(1)!==void 0;if(I.constantOr(1)!==0||T.constantOr(1)!==0&&E.constantOr(1)!==0){for(var F=_.context,U=F.gl,$=_.depthModeForSublayer(0,ae.ReadOnly),ee=oe.disabled,ie=_.colorModeForRenderPass(),ge=[],me=0;me<y.length;me++){var we=y[me],ce=p.getTile(we),xe=ce.getBucket(m);if(xe){var Te=xe.programConfigurations.get(m.id),Ge={programConfiguration:Te,program:_.useProgram("circle",Te),layoutVertexBuffer:xe.layoutVertexBuffer,indexBuffer:xe.indexBuffer,uniformValues:Cf(_,we,ce,m)};if(k)for(var Ue=0,De=xe.segments.get();Ue<De.length;Ue+=1){var He=De[Ue];ge.push({segments:new r.SegmentVector([He]),sortKey:He.sortKey,state:Ge})}else ge.push({segments:xe.segments,sortKey:0,state:Ge})}}k&&ge.sort(function(ta,ra){return ta.sortKey-ra.sortKey});for(var it=0,yt=ge;it<yt.length;it+=1){var gt=yt[it],Gt=gt.state;Gt.program.draw(F,U.TRIANGLES,$,ee,ie,ve.disabled,Gt.uniformValues,m.id,Gt.layoutVertexBuffer,Gt.indexBuffer,gt.segments,m.paint,_.transform.zoom,Gt.programConfiguration)}}}},heatmap:function(_,p,m,y){if(m.paint.get("heatmap-opacity")!==0)if(_.renderPass==="offscreen"){var I=_.context,T=I.gl,E=oe.disabled,k=new Ce([T.ONE,T.ONE],r.Color.transparent,[!0,!0,!0,!0]);(function(ge,me,we){var ce=ge.gl;ge.activeTexture.set(ce.TEXTURE1),ge.viewport.set([0,0,me.width/4,me.height/4]);var xe=we.heatmapFbo;if(xe)ce.bindTexture(ce.TEXTURE_2D,xe.colorAttachment.get()),ge.bindFramebuffer.set(xe.framebuffer);else{var Te=ce.createTexture();ce.bindTexture(ce.TEXTURE_2D,Te),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,ce.CLAMP_TO_EDGE),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,ce.LINEAR),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,ce.LINEAR),xe=we.heatmapFbo=ge.createFramebuffer(me.width/4,me.height/4,!1),function(Ge,Ue,De,He){var it=Ge.gl;it.texImage2D(it.TEXTURE_2D,0,it.RGBA,Ue.width/4,Ue.height/4,0,it.RGBA,Ge.extRenderToTextureHalfFloat?Ge.extTextureHalfFloat.HALF_FLOAT_OES:it.UNSIGNED_BYTE,null),He.colorAttachment.set(De)}(ge,me,Te,xe)}})(I,_,m),I.clear({color:r.Color.transparent});for(var F=0;F<y.length;F++){var U=y[F];if(!p.hasRenderableParent(U)){var $=p.getTile(U),ee=$.getBucket(m);if(ee){var ie=ee.programConfigurations.get(m.id);_.useProgram("heatmap",ie).draw(I,T.TRIANGLES,ae.disabled,E,k,ve.disabled,ab(U.posMatrix,$,_.transform.zoom,m.paint.get("heatmap-intensity")),m.id,ee.layoutVertexBuffer,ee.indexBuffer,ee.segments,m.paint,_.transform.zoom,ie)}}}I.viewport.set([0,0,_.width,_.height])}else _.renderPass==="translucent"&&(_.context.setColorMode(_.colorModeForRenderPass()),function(ge,me){var we=ge.context,ce=we.gl,xe=me.heatmapFbo;if(xe){we.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,xe.colorAttachment.get()),we.activeTexture.set(ce.TEXTURE1);var Te=me.colorRampTexture;Te||(Te=me.colorRampTexture=new r.Texture(we,me.colorRamp,ce.RGBA)),Te.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),ge.useProgram("heatmapTexture").draw(we,ce.TRIANGLES,ae.disabled,oe.disabled,ge.colorModeForRenderPass(),ve.disabled,function(Ge,Ue,De,He){var it=r.create();r.ortho(it,0,Ge.width,Ge.height,0,0,1);var yt=Ge.context.gl;return{u_matrix:it,u_world:[yt.drawingBufferWidth,yt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Ue.paint.get("heatmap-opacity")}}(ge,me),me.id,ge.viewportBuffer,ge.quadTriangleIndexBuffer,ge.viewportSegments,me.paint,ge.transform.zoom)}}(_,m))},line:function(_,p,m,y){if(_.renderPass==="translucent"){var I=m.paint.get("line-opacity"),T=m.paint.get("line-width");if(I.constantOr(1)!==0&&T.constantOr(1)!==0)for(var E=_.depthModeForSublayer(0,ae.ReadOnly),k=_.colorModeForRenderPass(),F=m.paint.get("line-dasharray"),U=m.paint.get("line-pattern"),$=U.constantOr(1),ee=m.paint.get("line-gradient"),ie=m.getCrossfadeParameters(),ge=$?"linePattern":F?"lineSDF":ee?"lineGradient":"line",me=_.context,we=me.gl,ce=!0,xe=0,Te=y;xe<Te.length;xe+=1){var Ge=Te[xe],Ue=p.getTile(Ge);if(!$||Ue.patternsLoaded()){var De=Ue.getBucket(m);if(De){var He=De.programConfigurations.get(m.id),it=_.context.program.get(),yt=_.useProgram(ge,He),gt=ce||yt.program!==it,Gt=U.constantOr(null);if(Gt&&Ue.imageAtlas){var ta=Ue.imageAtlas,ra=ta.patternPositions[Gt.to.toString()],na=ta.patternPositions[Gt.from.toString()];ra&&na&&He.setConstantPatternPositions(ra,na)}var ci=$?Gm(_,Ue,m,ie):F?yI(_,Ue,m,F,ie):ee?Xi(_,Ue,m,De.lineClipsArray.length):Qh(_,Ue,m);if($)me.activeTexture.set(we.TEXTURE0),Ue.imageAtlasTexture.bind(we.LINEAR,we.CLAMP_TO_EDGE),He.updatePaintBuffers(ie);else if(F&&(gt||_.lineAtlas.dirty))me.activeTexture.set(we.TEXTURE0),_.lineAtlas.bind(me);else if(ee){var Bt=De.gradients[m.id],va=Bt.texture;if(m.gradientVersion!==Bt.version){var Pa=256;if(m.stepInterpolant){var ba=p.getSource().maxzoom,fa=Ge.canonical.z===ba?Math.ceil(1<<_.transform.maxZoom-Ge.canonical.z):1;Pa=r.clamp(r.nextPowerOfTwo(De.maxLineLength/r.EXTENT*1024*fa),256,me.maxTextureSize)}Bt.gradient=r.renderColorRamp({expression:m.gradientExpression(),evaluationKey:"lineProgress",resolution:Pa,image:Bt.gradient||void 0,clips:De.lineClipsArray}),Bt.texture?Bt.texture.update(Bt.gradient):Bt.texture=new r.Texture(me,Bt.gradient,we.RGBA),Bt.version=m.gradientVersion,va=Bt.texture}me.activeTexture.set(we.TEXTURE0),va.bind(m.stepInterpolant?we.NEAREST:we.LINEAR,we.CLAMP_TO_EDGE)}yt.draw(me,we.TRIANGLES,E,_.stencilModeForClipping(Ge),k,ve.disabled,ci,m.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,m.paint,_.transform.zoom,He,De.layoutVertexBuffer2),ce=!1}}}}},fill:function(_,p,m,y){var I=m.paint.get("fill-color"),T=m.paint.get("fill-opacity");if(T.constantOr(1)!==0){var E=_.colorModeForRenderPass(),k=m.paint.get("fill-pattern"),F=_.opaquePassEnabledForLayer()&&!k.constantOr(1)&&I.constantOr(r.Color.transparent).a===1&&T.constantOr(0)===1?"opaque":"translucent";if(_.renderPass===F){var U=_.depthModeForSublayer(1,_.renderPass==="opaque"?ae.ReadWrite:ae.ReadOnly);Bm(_,p,m,y,U,E,!1)}if(_.renderPass==="translucent"&&m.paint.get("fill-antialias")){var $=_.depthModeForSublayer(m.getPaintProperty("fill-outline-color")?2:0,ae.ReadOnly);Bm(_,p,m,y,$,E,!0)}}},"fill-extrusion":function(_,p,m,y){var I=m.paint.get("fill-extrusion-opacity");if(I!==0&&_.renderPass==="translucent"){var T=new ae(_.context.gl.LEQUAL,ae.ReadWrite,_.depthRangeFor3D);if(I!==1||m.paint.get("fill-extrusion-pattern").constantOr(1))Af(_,p,m,y,T,oe.disabled,Ce.disabled),Af(_,p,m,y,T,_.stencilModeFor3D(),_.colorModeForRenderPass());else{var E=_.colorModeForRenderPass();Af(_,p,m,y,T,oe.disabled,E)}}},hillshade:function(_,p,m,y){if(_.renderPass==="offscreen"||_.renderPass==="translucent"){for(var I=_.context,T=_.depthModeForSublayer(0,ae.ReadOnly),E=_.colorModeForRenderPass(),k=_.renderPass==="translucent"?_.stencilConfigForOverlap(y):[{},y],F=k[0],U=0,$=k[1];U<$.length;U+=1){var ee=$[U],ie=p.getTile(ee);ie.needsHillshadePrepare&&_.renderPass==="offscreen"?vI(_,ie,m,T,oe.disabled,E):_.renderPass==="translucent"&&Fm(_,ie,m,T,F[ee.overscaledZ],E)}I.viewport.set([0,0,_.width,_.height])}},raster:function(_,p,m,y){if(_.renderPass==="translucent"&&m.paint.get("raster-opacity")!==0&&y.length)for(var I=_.context,T=I.gl,E=p.getSource(),k=_.useProgram("raster"),F=_.colorModeForRenderPass(),U=E instanceof We?[{},y]:_.stencilConfigForOverlap(y),$=U[0],ee=U[1],ie=ee[ee.length-1].overscaledZ,ge=!_.options.moving,me=0,we=ee;me<we.length;me+=1){var ce=we[me],xe=_.depthModeForSublayer(ce.overscaledZ-ie,m.paint.get("raster-opacity")===1?ae.ReadWrite:ae.ReadOnly,T.LESS),Te=p.getTile(ce),Ge=_.transform.calculatePosMatrix(ce.toUnwrapped(),ge);Te.registerFadeDuration(m.paint.get("raster-fade-duration"));var Ue=p.findLoadedParent(ce,0),De=Nm(Te,Ue,p,m,_.transform),He=void 0,it=void 0,yt=m.paint.get("raster-resampling")==="nearest"?T.NEAREST:T.LINEAR;I.activeTexture.set(T.TEXTURE0),Te.texture.bind(yt,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),I.activeTexture.set(T.TEXTURE1),Ue?(Ue.texture.bind(yt,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST),He=Math.pow(2,Ue.tileID.overscaledZ-Te.tileID.overscaledZ),it=[Te.tileID.canonical.x*He%1,Te.tileID.canonical.y*He%1]):Te.texture.bind(yt,T.CLAMP_TO_EDGE,T.LINEAR_MIPMAP_NEAREST);var gt=bI(Ge,it||[0,0],He||1,De,m);E instanceof We?k.draw(I,T.TRIANGLES,xe,oe.disabled,F,ve.disabled,gt,m.id,E.boundsBuffer,_.quadTriangleIndexBuffer,E.boundsSegments):k.draw(I,T.TRIANGLES,xe,$[ce.overscaledZ],F,ve.disabled,gt,m.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}},background:function(_,p,m){var y=m.paint.get("background-color"),I=m.paint.get("background-opacity");if(I!==0){var T=_.context,E=T.gl,k=_.transform,F=k.tileSize,U=m.paint.get("background-pattern");if(!_.isPatternMissing(U)){var $=!U&&y.a===1&&I===1&&_.opaquePassEnabledForLayer()?"opaque":"translucent";if(_.renderPass===$){var ee=oe.disabled,ie=_.depthModeForSublayer(0,$==="opaque"?ae.ReadWrite:ae.ReadOnly),ge=_.colorModeForRenderPass(),me=_.useProgram(U?"backgroundPattern":"background"),we=k.coveringTiles({tileSize:F});U&&(T.activeTexture.set(E.TEXTURE0),_.imageManager.bind(_.context));for(var ce=m.getCrossfadeParameters(),xe=0,Te=we;xe<Te.length;xe+=1){var Ge=Te[xe],Ue=_.transform.calculatePosMatrix(Ge.toUnwrapped()),De=U?Rd(Ue,I,_,U,{tileID:Ge,tileSize:F},ce):e_(Ue,I,y);me.draw(T,E.TRIANGLES,ie,ee,ge,ve.disabled,De,m.id,_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}}}},debug:function(_,p,m){for(var y=0;y<m.length;y++)db(_,p,m[y])},custom:function(_,p,m){var y=_.context,I=m.implementation;if(_.renderPass==="offscreen"){var T=I.prerender;T&&(_.setCustomLayerDefaults(),y.setColorMode(_.colorModeForRenderPass()),T.call(I,y.gl,_.transform.customLayerMatrix()),y.setDirty(),_.setBaseState())}else if(_.renderPass==="translucent"){_.setCustomLayerDefaults(),y.setColorMode(_.colorModeForRenderPass()),y.setStencilMode(oe.disabled);var E=I.renderingMode==="3d"?new ae(_.context.gl.LEQUAL,ae.ReadWrite,_.depthRangeFor3D):_.depthModeForSublayer(0,ae.ReadOnly);y.setDepthMode(E),I.render(y.gl,_.transform.customLayerMatrix()),y.setDirty(),_.setBaseState(),y.bindFramebuffer.set(null)}}},sn=function(_,p){this.context=new J(_),this.transform=p,this._tileTextures={},this.setup(),this.numSublayers=_e.maxUnderzooming+_e.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new gu,this.gpuTimers={}};sn.prototype.resize=function(_,p){if(this.width=_*r.browser.devicePixelRatio,this.height=p*r.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var m=0,y=this.style._order;m<y.length;m+=1)this.style._layers[y[m]].resize()},sn.prototype.setup=function(){var _=this.context,p=new r.StructArrayLayout2i4;p.emplaceBack(0,0),p.emplaceBack(r.EXTENT,0),p.emplaceBack(0,r.EXTENT),p.emplaceBack(r.EXTENT,r.EXTENT),this.tileExtentBuffer=_.createVertexBuffer(p,Bn.members),this.tileExtentSegments=r.SegmentVector.simpleSegment(0,0,4,2);var m=new r.StructArrayLayout2i4;m.emplaceBack(0,0),m.emplaceBack(r.EXTENT,0),m.emplaceBack(0,r.EXTENT),m.emplaceBack(r.EXTENT,r.EXTENT),this.debugBuffer=_.createVertexBuffer(m,Bn.members),this.debugSegments=r.SegmentVector.simpleSegment(0,0,4,5);var y=new r.StructArrayLayout4i8;y.emplaceBack(0,0,0,0),y.emplaceBack(r.EXTENT,0,r.EXTENT,0),y.emplaceBack(0,r.EXTENT,0,r.EXTENT),y.emplaceBack(r.EXTENT,r.EXTENT,r.EXTENT,r.EXTENT),this.rasterBoundsBuffer=_.createVertexBuffer(y,Dt.members),this.rasterBoundsSegments=r.SegmentVector.simpleSegment(0,0,4,2);var I=new r.StructArrayLayout2i4;I.emplaceBack(0,0),I.emplaceBack(1,0),I.emplaceBack(0,1),I.emplaceBack(1,1),this.viewportBuffer=_.createVertexBuffer(I,Bn.members),this.viewportSegments=r.SegmentVector.simpleSegment(0,0,4,2);var T=new r.StructArrayLayout1ui2;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=_.createIndexBuffer(T);var E=new r.StructArrayLayout3ui6;E.emplaceBack(0,1,2),E.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=_.createIndexBuffer(E),this.emptyTexture=new r.Texture(_,{width:1,height:1,data:new Uint8Array([0,0,0,0])},_.gl.RGBA);var k=this.context.gl;this.stencilClearMode=new oe({func:k.ALWAYS,mask:0},0,255,k.ZERO,k.ZERO,k.ZERO)},sn.prototype.clearStencil=function(){var _=this.context,p=_.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var m=r.create();r.ortho(m,0,this.width,this.height,0,0,1),r.scale(m,m,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(_,p.TRIANGLES,ae.disabled,this.stencilClearMode,Ce.disabled,ve.disabled,Ic(m),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},sn.prototype._renderTileClippingMasks=function(_,p){if(this.currentStencilSource!==_.source&&_.isTileClipped()&&p&&p.length){this.currentStencilSource=_.source;var m=this.context,y=m.gl;this.nextStencilID+p.length>256&&this.clearStencil(),m.setColorMode(Ce.disabled),m.setDepthMode(ae.disabled);var I=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var T=0,E=p;T<E.length;T+=1){var k=E[T],F=this._tileClippingMaskIDs[k.key]=this.nextStencilID++;I.draw(m,y.TRIANGLES,ae.disabled,new oe({func:y.ALWAYS,mask:0},F,255,y.KEEP,y.KEEP,y.REPLACE),Ce.disabled,ve.disabled,Ic(k.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},sn.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var _=this.nextStencilID++,p=this.context.gl;return new oe({func:p.NOTEQUAL,mask:255},_,255,p.KEEP,p.KEEP,p.REPLACE)},sn.prototype.stencilModeForClipping=function(_){var p=this.context.gl;return new oe({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[_.key],0,p.KEEP,p.KEEP,p.REPLACE)},sn.prototype.stencilConfigForOverlap=function(_){var p,m=this.context.gl,y=_.sort(function(F,U){return U.overscaledZ-F.overscaledZ}),I=y[y.length-1].overscaledZ,T=y[0].overscaledZ-I+1;if(T>1){this.currentStencilSource=void 0,this.nextStencilID+T>256&&this.clearStencil();for(var E={},k=0;k<T;k++)E[k+I]=new oe({func:m.GEQUAL,mask:255},k+this.nextStencilID,255,m.KEEP,m.KEEP,m.REPLACE);return this.nextStencilID+=T,[E,y]}return[(p={},p[I]=oe.disabled,p),y]},sn.prototype.colorModeForRenderPass=function(){var _=this.context.gl;return this._showOverdrawInspector?new Ce([_.CONSTANT_COLOR,_.ONE],new r.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ce.unblended:Ce.alphaBlended},sn.prototype.depthModeForSublayer=function(_,p,m){if(!this.opaquePassEnabledForLayer())return ae.disabled;var y=1-((1+this.currentLayer)*this.numSublayers+_)*this.depthEpsilon;return new ae(m||this.context.gl.LEQUAL,p,[y,y])},sn.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},sn.prototype.render=function(_,p){var m=this;this.style=_,this.options=p,this.lineAtlas=_.lineAtlas,this.imageManager=_.imageManager,this.glyphManager=_.glyphManager,this.symbolFadeChange=_.placement.symbolFadeChange(r.browser.now()),this.imageManager.beginFrame();var y=this.style._order,I=this.style.sourceCaches;for(var T in I){var E=I[T];E.used&&E.prepare(this.context)}var k,F,U={},$={},ee={};for(var ie in I){var ge=I[ie];U[ie]=ge.getVisibleCoordinates(),$[ie]=U[ie].slice().reverse(),ee[ie]=ge.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var me=0;me<y.length;me++)if(this.style._layers[y[me]].is3D()){this.opaquePassCutoff=me;break}this.renderPass="offscreen";for(var we=0,ce=y;we<ce.length;we+=1){var xe=this.style._layers[ce[we]];if(xe.hasOffscreenPass()&&!xe.isHidden(this.transform.zoom)){var Te=$[xe.source];(xe.type==="custom"||Te.length)&&this.renderLayer(this,I[xe.source],xe,Te)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?r.Color.black:r.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(_._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){var Ge=this.style._layers[y[this.currentLayer]],Ue=I[Ge.source],De=U[Ge.source];this._renderTileClippingMasks(Ge,De),this.renderLayer(this,Ue,Ge,De)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){var He=this.style._layers[y[this.currentLayer]],it=I[He.source],yt=(He.type==="symbol"?ee:$)[He.source];this._renderTileClippingMasks(He,U[He.source]),this.renderLayer(this,it,He,yt)}this.options.showTileBoundaries&&(r.values(this.style._layers).forEach(function(gt){gt.source&&!gt.isHidden(m.transform.zoom)&&(gt.source!==(F&&F.id)&&(F=m.style.sourceCaches[gt.source]),(!k||k.getSource().maxzoom<F.getSource().maxzoom)&&(k=F))}),k&&Ac.debug(this,k,k.getVisibleCoordinates())),this.options.showPadding&&function(gt){var Gt=gt.transform.padding;Ef(gt,gt.transform.height-(Gt.top||0),3,Sf),Ef(gt,Gt.bottom||0,3,ub),Mf(gt,Gt.left||0,3,cb),Mf(gt,gt.transform.width-(Gt.right||0),3,Dm);var ta=gt.transform.centerPoint;(function(ra,na,ci,Bt){a_(ra,na-1,ci-10,2,20,Bt),a_(ra,na-10,ci-1,20,2,Bt)})(gt,ta.x,gt.transform.height-ta.y,Tf)}(this),this.context.setDefault()},sn.prototype.renderLayer=function(_,p,m,y){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||y.length)&&(this.id=m.id,this.gpuTimingStart(m),Ac[m.type](_,p,m,y,this.style.placement.variableOffsets),this.gpuTimingEnd())},sn.prototype.gpuTimingStart=function(_){if(this.options.gpuTiming){var p=this.context.extTimerQuery,m=this.gpuTimers[_.id];m||(m=this.gpuTimers[_.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),m.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,m.query)}},sn.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var _=this.context.extTimerQuery;_.endQueryEXT(_.TIME_ELAPSED_EXT)}},sn.prototype.collectGpuTimers=function(){var _=this.gpuTimers;return this.gpuTimers={},_},sn.prototype.queryGpuTimers=function(_){var p={};for(var m in _){var y=_[m],I=this.context.extTimerQuery,T=I.getQueryObjectEXT(y.query,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(y.query),p[m]=T}return p},sn.prototype.translatePosMatrix=function(_,p,m,y,I){if(!m[0]&&!m[1])return _;var T=I?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(T){var E=Math.sin(T),k=Math.cos(T);m=[m[0]*k-m[1]*E,m[0]*E+m[1]*k]}var F=[I?m[0]:rn(p,m[0],this.transform.zoom),I?m[1]:rn(p,m[1],this.transform.zoom),0],U=new Float32Array(16);return r.translate(U,_,F),U},sn.prototype.saveTileTexture=function(_){var p=this._tileTextures[_.size[0]];p?p.push(_):this._tileTextures[_.size[0]]=[_]},sn.prototype.getTileTexture=function(_){var p=this._tileTextures[_];return p&&p.length>0?p.pop():null},sn.prototype.isPatternMissing=function(_){if(!_)return!1;if(!_.from||!_.to)return!0;var p=this.imageManager.getPattern(_.from.toString()),m=this.imageManager.getPattern(_.to.toString());return!p||!m},sn.prototype.useProgram=function(_,p){this.cache=this.cache||{};var m=""+_+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[m]||(this.cache[m]=new j1(this.context,_,fI[_],p,rb[_],this._showOverdrawInspector)),this.cache[m]},sn.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},sn.prototype.setBaseState=function(){var _=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(_.FUNC_ADD)},sn.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=r.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new r.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},sn.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Vm=function(_,p){this.points=_,this.planes=p};Vm.fromInvProjectionMatrix=function(_,p,m){var y=Math.pow(2,m),I=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(E){return r.transformMat4([],E,_)}).map(function(E){return r.scale$1([],E,1/E[3]/p*y)}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(E){var k=r.sub([],I[E[0]],I[E[1]]),F=r.sub([],I[E[2]],I[E[1]]),U=r.normalize([],r.cross([],k,F)),$=-r.dot(U,I[E[1]]);return U.concat($)});return new Vm(I,T)};var Sc=function(_,p){this.min=_,this.max=p,this.center=r.scale$2([],r.add([],this.min,this.max),.5)};Sc.prototype.quadrant=function(_){for(var p=[_%2==0,_<2],m=r.clone$2(this.min),y=r.clone$2(this.max),I=0;I<p.length;I++)m[I]=p[I]?this.min[I]:this.center[I],y[I]=p[I]?this.center[I]:this.max[I];return y[2]=this.max[2],new Sc(m,y)},Sc.prototype.distanceX=function(_){return Math.max(Math.min(this.max[0],_[0]),this.min[0])-_[0]},Sc.prototype.distanceY=function(_){return Math.max(Math.min(this.max[1],_[1]),this.min[1])-_[1]},Sc.prototype.intersects=function(_){for(var p=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],m=!0,y=0;y<_.planes.length;y++){for(var I=_.planes[y],T=0,E=0;E<p.length;E++)T+=r.dot$1(I,p[E])>=0;if(T===0)return 0;T!==p.length&&(m=!1)}if(m)return 2;for(var k=0;k<3;k++){for(var F=Number.MAX_VALUE,U=-Number.MAX_VALUE,$=0;$<_.points.length;$++){var ee=_.points[$][k]-this.min[k];F=Math.min(F,ee),U=Math.max(U,ee)}if(U<0||F>this.max[k]-this.min[k])return 0}return 1};var Iu=function(_,p,m,y){if(_===void 0&&(_=0),p===void 0&&(p=0),m===void 0&&(m=0),y===void 0&&(y=0),isNaN(_)||_<0||isNaN(p)||p<0||isNaN(m)||m<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=_,this.bottom=p,this.left=m,this.right=y};Iu.prototype.interpolate=function(_,p,m){return p.top!=null&&_.top!=null&&(this.top=r.number(_.top,p.top,m)),p.bottom!=null&&_.bottom!=null&&(this.bottom=r.number(_.bottom,p.bottom,m)),p.left!=null&&_.left!=null&&(this.left=r.number(_.left,p.left,m)),p.right!=null&&_.right!=null&&(this.right=r.number(_.right,p.right,m)),this},Iu.prototype.getCenter=function(_,p){var m=r.clamp((this.left+_-this.right)/2,0,_),y=r.clamp((this.top+p-this.bottom)/2,0,p);return new r.Point(m,y)},Iu.prototype.equals=function(_){return this.top===_.top&&this.bottom===_.bottom&&this.left===_.left&&this.right===_.right},Iu.prototype.clone=function(){return new Iu(this.top,this.bottom,this.left,this.right)},Iu.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var ri=function(_,p,m,y,I){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=I===void 0||I,this._minZoom=_||0,this._maxZoom=p||22,this._minPitch=m??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new r.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Iu,this._posMatrixCache={},this._alignedPosMatrixCache={}},Hi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};ri.prototype.clone=function(){var _=new ri(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return _.tileSize=this.tileSize,_.latRange=this.latRange,_.width=this.width,_.height=this.height,_._center=this._center,_.zoom=this.zoom,_.angle=this.angle,_._fov=this._fov,_._pitch=this._pitch,_._unmodified=this._unmodified,_._edgeInsets=this._edgeInsets.clone(),_._calcMatrices(),_},Hi.minZoom.get=function(){return this._minZoom},Hi.minZoom.set=function(_){this._minZoom!==_&&(this._minZoom=_,this.zoom=Math.max(this.zoom,_))},Hi.maxZoom.get=function(){return this._maxZoom},Hi.maxZoom.set=function(_){this._maxZoom!==_&&(this._maxZoom=_,this.zoom=Math.min(this.zoom,_))},Hi.minPitch.get=function(){return this._minPitch},Hi.minPitch.set=function(_){this._minPitch!==_&&(this._minPitch=_,this.pitch=Math.max(this.pitch,_))},Hi.maxPitch.get=function(){return this._maxPitch},Hi.maxPitch.set=function(_){this._maxPitch!==_&&(this._maxPitch=_,this.pitch=Math.min(this.pitch,_))},Hi.renderWorldCopies.get=function(){return this._renderWorldCopies},Hi.renderWorldCopies.set=function(_){_===void 0?_=!0:_===null&&(_=!1),this._renderWorldCopies=_},Hi.worldSize.get=function(){return this.tileSize*this.scale},Hi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Hi.size.get=function(){return new r.Point(this.width,this.height)},Hi.bearing.get=function(){return-this.angle/Math.PI*180},Hi.bearing.set=function(_){var p=-r.wrap(_,-180,180)*Math.PI/180;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=r.create$2(),r.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Hi.pitch.get=function(){return this._pitch/Math.PI*180},Hi.pitch.set=function(_){var p=r.clamp(_,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())},Hi.fov.get=function(){return this._fov/Math.PI*180},Hi.fov.set=function(_){_=Math.max(.01,Math.min(60,_)),this._fov!==_&&(this._unmodified=!1,this._fov=_/180*Math.PI,this._calcMatrices())},Hi.zoom.get=function(){return this._zoom},Hi.zoom.set=function(_){var p=Math.min(Math.max(_,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())},Hi.center.get=function(){return this._center},Hi.center.set=function(_){_.lat===this._center.lat&&_.lng===this._center.lng||(this._unmodified=!1,this._center=_,this._constrain(),this._calcMatrices())},Hi.padding.get=function(){return this._edgeInsets.toJSON()},Hi.padding.set=function(_){this._edgeInsets.equals(_)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,_,1),this._calcMatrices())},Hi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},ri.prototype.isPaddingEqual=function(_){return this._edgeInsets.equals(_)},ri.prototype.interpolatePadding=function(_,p,m){this._unmodified=!1,this._edgeInsets.interpolate(_,p,m),this._constrain(),this._calcMatrices()},ri.prototype.coveringZoomLevel=function(_){var p=(_.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/_.tileSize));return Math.max(0,p)},ri.prototype.getVisibleUnwrappedCoordinates=function(_){var p=[new r.UnwrappedTileID(0,_)];if(this._renderWorldCopies)for(var m=this.pointCoordinate(new r.Point(0,0)),y=this.pointCoordinate(new r.Point(this.width,0)),I=this.pointCoordinate(new r.Point(this.width,this.height)),T=this.pointCoordinate(new r.Point(0,this.height)),E=Math.floor(Math.min(m.x,y.x,I.x,T.x)),k=Math.floor(Math.max(m.x,y.x,I.x,T.x)),F=E-1;F<=k+1;F++)F!==0&&p.push(new r.UnwrappedTileID(F,_));return p},ri.prototype.coveringTiles=function(_){var p=this.coveringZoomLevel(_),m=p;if(_.minzoom!==void 0&&p<_.minzoom)return[];_.maxzoom!==void 0&&p>_.maxzoom&&(p=_.maxzoom);var y=r.MercatorCoordinate.fromLngLat(this.center),I=Math.pow(2,p),T=[I*y.x,I*y.y,0],E=Vm.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,p),k=_.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(k=p);var F=function(gt){return{aabb:new Sc([gt*I,0,0],[(gt+1)*I,I,0]),zoom:0,x:0,y:0,wrap:gt,fullyVisible:!1}},U=[],$=[],ee=p,ie=_.reparseOverscaled?m:p;if(this._renderWorldCopies)for(var ge=1;ge<=3;ge++)U.push(F(-ge)),U.push(F(ge));for(U.push(F(0));U.length>0;){var me=U.pop(),we=me.x,ce=me.y,xe=me.fullyVisible;if(!xe){var Te=me.aabb.intersects(E);if(Te===0)continue;xe=Te===2}var Ge=me.aabb.distanceX(T),Ue=me.aabb.distanceY(T),De=Math.max(Math.abs(Ge),Math.abs(Ue));if(me.zoom===ee||De>3+(1<<ee-me.zoom)-2&&me.zoom>=k)$.push({tileID:new r.OverscaledTileID(me.zoom===ee?ie:me.zoom,me.wrap,me.zoom,we,ce),distanceSq:r.sqrLen([T[0]-.5-we,T[1]-.5-ce])});else for(var He=0;He<4;He++){var it=(we<<1)+He%2,yt=(ce<<1)+(He>>1);U.push({aabb:me.aabb.quadrant(He),zoom:me.zoom+1,x:it,y:yt,wrap:me.wrap,fullyVisible:xe})}}return $.sort(function(gt,Gt){return gt.distanceSq-Gt.distanceSq}).map(function(gt){return gt.tileID})},ri.prototype.resize=function(_,p){this.width=_,this.height=p,this.pixelsToGLUnits=[2/_,-2/p],this._constrain(),this._calcMatrices()},Hi.unmodified.get=function(){return this._unmodified},ri.prototype.zoomScale=function(_){return Math.pow(2,_)},ri.prototype.scaleZoom=function(_){return Math.log(_)/Math.LN2},ri.prototype.project=function(_){var p=r.clamp(_.lat,-this.maxValidLatitude,this.maxValidLatitude);return new r.Point(r.mercatorXfromLng(_.lng)*this.worldSize,r.mercatorYfromLat(p)*this.worldSize)},ri.prototype.unproject=function(_){return new r.MercatorCoordinate(_.x/this.worldSize,_.y/this.worldSize).toLngLat()},Hi.point.get=function(){return this.project(this.center)},ri.prototype.setLocationAtPoint=function(_,p){var m=this.pointCoordinate(p),y=this.pointCoordinate(this.centerPoint),I=this.locationCoordinate(_),T=new r.MercatorCoordinate(I.x-(m.x-y.x),I.y-(m.y-y.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())},ri.prototype.locationPoint=function(_){return this.coordinatePoint(this.locationCoordinate(_))},ri.prototype.pointLocation=function(_){return this.coordinateLocation(this.pointCoordinate(_))},ri.prototype.locationCoordinate=function(_){return r.MercatorCoordinate.fromLngLat(_)},ri.prototype.coordinateLocation=function(_){return _.toLngLat()},ri.prototype.pointCoordinate=function(_){var p=[_.x,_.y,0,1],m=[_.x,_.y,1,1];r.transformMat4(p,p,this.pixelMatrixInverse),r.transformMat4(m,m,this.pixelMatrixInverse);var y=p[3],I=m[3],T=p[1]/y,E=m[1]/I,k=p[2]/y,F=m[2]/I,U=k===F?0:(0-k)/(F-k);return new r.MercatorCoordinate(r.number(p[0]/y,m[0]/I,U)/this.worldSize,r.number(T,E,U)/this.worldSize)},ri.prototype.coordinatePoint=function(_){var p=[_.x*this.worldSize,_.y*this.worldSize,0,1];return r.transformMat4(p,p,this.pixelMatrix),new r.Point(p[0]/p[3],p[1]/p[3])},ri.prototype.getBounds=function(){return new r.LngLatBounds().extend(this.pointLocation(new r.Point(0,0))).extend(this.pointLocation(new r.Point(this.width,0))).extend(this.pointLocation(new r.Point(this.width,this.height))).extend(this.pointLocation(new r.Point(0,this.height)))},ri.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new r.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},ri.prototype.setMaxBounds=function(_){_?(this.lngRange=[_.getWest(),_.getEast()],this.latRange=[_.getSouth(),_.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},ri.prototype.calculatePosMatrix=function(_,p){p===void 0&&(p=!1);var m=_.key,y=p?this._alignedPosMatrixCache:this._posMatrixCache;if(y[m])return y[m];var I=_.canonical,T=this.worldSize/this.zoomScale(I.z),E=I.x+Math.pow(2,I.z)*_.wrap,k=r.identity(new Float64Array(16));return r.translate(k,k,[E*T,I.y*T,0]),r.scale(k,k,[T/r.EXTENT,T/r.EXTENT,1]),r.multiply(k,p?this.alignedProjMatrix:this.projMatrix,k),y[m]=new Float32Array(k),y[m]},ri.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},ri.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var _,p,m,y,I=-90,T=90,E=-180,k=180,F=this.size,U=this._unmodified;if(this.latRange){var $=this.latRange;I=r.mercatorYfromLat($[1])*this.worldSize,_=(T=r.mercatorYfromLat($[0])*this.worldSize)-I<F.y?F.y/(T-I):0}if(this.lngRange){var ee=this.lngRange;E=r.mercatorXfromLng(ee[0])*this.worldSize,p=(k=r.mercatorXfromLng(ee[1])*this.worldSize)-E<F.x?F.x/(k-E):0}var ie=this.point,ge=Math.max(p||0,_||0);if(ge)return this.center=this.unproject(new r.Point(p?(k+E)/2:ie.x,_?(T+I)/2:ie.y)),this.zoom+=this.scaleZoom(ge),this._unmodified=U,void(this._constraining=!1);if(this.latRange){var me=ie.y,we=F.y/2;me-we<I&&(y=I+we),me+we>T&&(y=T-we)}if(this.lngRange){var ce=ie.x,xe=F.x/2;ce-xe<E&&(m=E+xe),ce+xe>k&&(m=k-xe)}m===void 0&&y===void 0||(this.center=this.unproject(new r.Point(m!==void 0?m:ie.x,y!==void 0?y:ie.y))),this._unmodified=U,this._constraining=!1}},ri.prototype._calcMatrices=function(){if(this.height){var _=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var p=Math.PI/2+this._pitch,m=this._fov*(.5+_.y/this.height),y=Math.sin(m)*this.cameraToCenterDistance/Math.sin(r.clamp(Math.PI-p-m,.01,Math.PI-.01)),I=this.point,T=I.x,E=I.y,k=1.01*(Math.cos(Math.PI/2-this._pitch)*y+this.cameraToCenterDistance),F=this.height/50,U=new Float64Array(16);r.perspective(U,this._fov,this.width/this.height,F,k),U[8]=2*-_.x/this.width,U[9]=2*_.y/this.height,r.scale(U,U,[1,-1,1]),r.translate(U,U,[0,0,-this.cameraToCenterDistance]),r.rotateX(U,U,this._pitch),r.rotateZ(U,U,this.angle),r.translate(U,U,[-T,-E,0]),this.mercatorMatrix=r.scale([],U,[this.worldSize,this.worldSize,this.worldSize]),r.scale(U,U,[1,1,r.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=U,this.invProjMatrix=r.invert([],this.projMatrix);var $=this.width%2/2,ee=this.height%2/2,ie=Math.cos(this.angle),ge=Math.sin(this.angle),me=T-Math.round(T)+ie*$+ge*ee,we=E-Math.round(E)+ie*ee+ge*$,ce=new Float64Array(U);if(r.translate(ce,ce,[me>.5?me-1:me,we>.5?we-1:we,0]),this.alignedProjMatrix=ce,U=r.create(),r.scale(U,U,[this.width/2,-this.height/2,1]),r.translate(U,U,[1,-1,0]),this.labelPlaneMatrix=U,U=r.create(),r.scale(U,U,[1,-1,1]),r.translate(U,U,[-1,-1,0]),r.scale(U,U,[2/this.width,2/this.height,1]),this.glCoordMatrix=U,this.pixelMatrix=r.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(U=r.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=U,this._posMatrixCache={},this._alignedPosMatrixCache={}}},ri.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var _=this.pointCoordinate(new r.Point(0,0)),p=[_.x*this.worldSize,_.y*this.worldSize,0,1];return r.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance},ri.prototype.getCameraPoint=function(){var _=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new r.Point(0,_))},ri.prototype.getCameraQueryGeometry=function(_){var p=this.getCameraPoint();if(_.length===1)return[_[0],p];for(var m=p.x,y=p.y,I=p.x,T=p.y,E=0,k=_;E<k.length;E+=1){var F=k[E];m=Math.min(m,F.x),y=Math.min(y,F.y),I=Math.max(I,F.x),T=Math.max(T,F.y)}return[new r.Point(m,y),new r.Point(I,y),new r.Point(I,T),new r.Point(m,T),new r.Point(m,y)]},Object.defineProperties(ri.prototype,Hi);var zs=function(_){var p,m,y,I;this._hashName=_&&encodeURIComponent(_),r.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(p=this._updateHashUnthrottled.bind(this),m=!1,y=null,I=function(){y=null,m&&(p(),y=setTimeout(I,300),m=!1)},function(){return m=!0,y||I(),y})};zs.prototype.addTo=function(_){return this._map=_,r.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},zs.prototype.remove=function(){return r.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},zs.prototype.getHashString=function(_){var p=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,y=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),I=Math.pow(10,y),T=Math.round(p.lng*I)/I,E=Math.round(p.lat*I)/I,k=this._map.getBearing(),F=this._map.getPitch(),U="";if(U+=_?"/"+T+"/"+E+"/"+m:m+"/"+E+"/"+T,(k||F)&&(U+="/"+Math.round(10*k)/10),F&&(U+="/"+Math.round(F)),this._hashName){var $=this._hashName,ee=!1,ie=r.window.location.hash.slice(1).split("&").map(function(ge){var me=ge.split("=")[0];return me===$?(ee=!0,me+"="+U):ge}).filter(function(ge){return ge});return ee||ie.push($+"="+U),"#"+ie.join("&")}return"#"+U},zs.prototype._getCurrentHash=function(){var _,p=this,m=r.window.location.hash.replace("#","");return this._hashName?(m.split("&").map(function(y){return y.split("=")}).forEach(function(y){y[0]===p._hashName&&(_=y)}),(_&&_[1]||"").split("/")):m.split("/")},zs.prototype._onHashChange=function(){var _=this._getCurrentHash();if(_.length>=3&&!_.some(function(m){return isNaN(m)})){var p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(_[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+_[2],+_[1]],zoom:+_[0],bearing:p,pitch:+(_[4]||0)}),!0}return!1},zs.prototype._updateHashUnthrottled=function(){var _=r.window.location.href.replace(/(#.+)?$/,this.getHashString());try{r.window.history.replaceState(r.window.history.state,null,_)}catch{}};var i_={linearity:.3,easing:r.bezier(0,0,.3,1)},Wd=r.extend({deceleration:2500,maxSpeed:1400},i_),n_=r.extend({deceleration:20,maxSpeed:1400},i_),xI=r.extend({deceleration:1e3,maxSpeed:360},i_),wI=r.extend({deceleration:1e3,maxSpeed:90},i_),r_=function(_){this._map=_,this.clear()};function s_(_,p){(!_.duration||_.duration<p.duration)&&(_.duration=p.duration,_.easing=p.easing)}function Rl(_,p,m){var y=m.maxSpeed,I=m.linearity,T=m.deceleration,E=r.clamp(_*I/(p/1e3),-y,y),k=Math.abs(E)/(T*I);return{easing:m.easing,duration:1e3*k,amount:E*(k/2)}}r_.prototype.clear=function(){this._inertiaBuffer=[]},r_.prototype.record=function(_){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:r.browser.now(),settings:_})},r_.prototype._drainInertiaBuffer=function(){for(var _=this._inertiaBuffer,p=r.browser.now();_.length>0&&p-_[0].time>160;)_.shift()},r_.prototype._onMoveEnd=function(_){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var p={zoom:0,bearing:0,pitch:0,pan:new r.Point(0,0),pinchAround:void 0,around:void 0},m=0,y=this._inertiaBuffer;m<y.length;m+=1){var I=y[m].settings;p.zoom+=I.zoomDelta||0,p.bearing+=I.bearingDelta||0,p.pitch+=I.pitchDelta||0,I.panDelta&&p.pan._add(I.panDelta),I.around&&(p.around=I.around),I.pinchAround&&(p.pinchAround=I.pinchAround)}var T=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,E={};if(p.pan.mag()){var k=Rl(p.pan.mag(),T,r.extend({},Wd,_||{}));E.offset=p.pan.mult(k.amount/p.pan.mag()),E.center=this._map.transform.center,s_(E,k)}if(p.zoom){var F=Rl(p.zoom,T,n_);E.zoom=this._map.transform.zoom+F.amount,s_(E,F)}if(p.bearing){var U=Rl(p.bearing,T,xI);E.bearing=this._map.transform.bearing+r.clamp(U.amount,-179,179),s_(E,U)}if(p.pitch){var $=Rl(p.pitch,T,wI);E.pitch=this._map.transform.pitch+$.amount,s_(E,$)}if(E.zoom||E.bearing){var ee=p.pinchAround===void 0?p.around:p.pinchAround;E.around=ee?this._map.unproject(ee):this._map.getCenter()}return this.clear(),r.extend(E,{noMoveStart:!0})}};var Un=function(_){function p(y,I,T,E){E===void 0&&(E={});var k=c.mousePos(I.getCanvasContainer(),T),F=I.unproject(k);_.call(this,y,r.extend({point:k,lngLat:F,originalEvent:T},E)),this._defaultPrevented=!1,this.target=I}_&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p;var m={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,m),p}(r.Event),o_=function(_){function p(y,I,T){var E=y==="touchend"?T.changedTouches:T.touches,k=c.touchPos(I.getCanvasContainer(),E),F=k.map(function(ee){return I.unproject(ee)}),U=k.reduce(function(ee,ie,ge,me){return ee.add(ie.div(me.length))},new r.Point(0,0)),$=I.unproject(U);_.call(this,y,{points:k,point:U,lngLats:F,lngLat:$,originalEvent:T}),this._defaultPrevented=!1}_&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p;var m={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,m),p}(r.Event),hb=function(_){function p(y,I,T){_.call(this,y,{originalEvent:T}),this._defaultPrevented=!1}_&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p;var m={defaultPrevented:{configurable:!0}};return p.prototype.preventDefault=function(){this._defaultPrevented=!0},m.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(p.prototype,m),p}(r.Event),Fn=function(_,p){this._map=_,this._clickTolerance=p.clickTolerance};Fn.prototype.reset=function(){delete this._mousedownPos},Fn.prototype.wheel=function(_){return this._firePreventable(new hb(_.type,this._map,_))},Fn.prototype.mousedown=function(_,p){return this._mousedownPos=p,this._firePreventable(new Un(_.type,this._map,_))},Fn.prototype.mouseup=function(_){this._map.fire(new Un(_.type,this._map,_))},Fn.prototype.click=function(_,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Un(_.type,this._map,_))},Fn.prototype.dblclick=function(_){return this._firePreventable(new Un(_.type,this._map,_))},Fn.prototype.mouseover=function(_){this._map.fire(new Un(_.type,this._map,_))},Fn.prototype.mouseout=function(_){this._map.fire(new Un(_.type,this._map,_))},Fn.prototype.touchstart=function(_){return this._firePreventable(new o_(_.type,this._map,_))},Fn.prototype.touchmove=function(_){this._map.fire(new o_(_.type,this._map,_))},Fn.prototype.touchend=function(_){this._map.fire(new o_(_.type,this._map,_))},Fn.prototype.touchcancel=function(_){this._map.fire(new o_(_.type,this._map,_))},Fn.prototype._firePreventable=function(_){if(this._map.fire(_),_.defaultPrevented)return{}},Fn.prototype.isEnabled=function(){return!0},Fn.prototype.isActive=function(){return!1},Fn.prototype.enable=function(){},Fn.prototype.disable=function(){};var Nt=function(_){this._map=_};Nt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Nt.prototype.mousemove=function(_){this._map.fire(new Un(_.type,this._map,_))},Nt.prototype.mousedown=function(){this._delayContextMenu=!0},Nt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Un("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Nt.prototype.contextmenu=function(_){this._delayContextMenu?this._contextMenuEvent=_:this._map.fire(new Un(_.type,this._map,_)),this._map.listens("contextmenu")&&_.preventDefault()},Nt.prototype.isEnabled=function(){return!0},Nt.prototype.isActive=function(){return!1},Nt.prototype.enable=function(){},Nt.prototype.disable=function(){};var xs=function(_,p){this._map=_,this._el=_.getCanvasContainer(),this._container=_.getContainer(),this._clickTolerance=p.clickTolerance||1};function Zm(_,p){for(var m={},y=0;y<_.length;y++)m[_[y].identifier]=p[y];return m}xs.prototype.isEnabled=function(){return!!this._enabled},xs.prototype.isActive=function(){return!!this._active},xs.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},xs.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},xs.prototype.mousedown=function(_,p){this.isEnabled()&&_.shiftKey&&_.button===0&&(c.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)},xs.prototype.mousemoveWindow=function(_,p){if(this._active){var m=p;if(!(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)){var y=this._startPos;this._lastPos=m,this._box||(this._box=c.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",_));var I=Math.min(y.x,m.x),T=Math.max(y.x,m.x),E=Math.min(y.y,m.y),k=Math.max(y.y,m.y);c.setTransform(this._box,"translate("+I+"px,"+E+"px)"),this._box.style.width=T-I+"px",this._box.style.height=k-E+"px"}}},xs.prototype.mouseupWindow=function(_,p){var m=this;if(this._active&&_.button===0){var y=this._startPos,I=p;if(this.reset(),c.suppressClick(),y.x!==I.x||y.y!==I.y)return this._map.fire(new r.Event("boxzoomend",{originalEvent:_})),{cameraAnimation:function(T){return T.fitScreenCoordinates(y,I,m._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",_)}},xs.prototype.keydown=function(_){this._active&&_.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",_))},xs.prototype.blur=function(){this.reset()},xs.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(c.remove(this._box),this._box=null),c.enableDrag(),delete this._startPos,delete this._lastPos},xs.prototype._fireEvent=function(_,p){return this._map.fire(new r.Event(_,{originalEvent:p}))};var Gd=function(_){this.reset(),this.numTouches=_.numTouches};Gd.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Gd.prototype.touchstart=function(_,p,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=_.timeStamp),m.length===this.numTouches&&(this.centroid=function(y){for(var I=new r.Point(0,0),T=0,E=y;T<E.length;T+=1)I._add(E[T]);return I.div(y.length)}(p),this.touches=Zm(m,p)))},Gd.prototype.touchmove=function(_,p,m){if(!this.aborted&&this.centroid){var y=Zm(m,p);for(var I in this.touches){var T=y[I];(!T||T.dist(this.touches[I])>30)&&(this.aborted=!0)}}},Gd.prototype.touchend=function(_,p,m){if((!this.centroid||_.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){var y=!this.aborted&&this.centroid;if(this.reset(),y)return y}};var Do=function(_){this.singleTap=new Gd(_),this.numTaps=_.numTaps,this.reset()};Do.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Do.prototype.touchstart=function(_,p,m){this.singleTap.touchstart(_,p,m)},Do.prototype.touchmove=function(_,p,m){this.singleTap.touchmove(_,p,m)},Do.prototype.touchend=function(_,p,m){var y=this.singleTap.touchend(_,p,m);if(y){var I=_.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(y)<30;if(I&&T||this.reset(),this.count++,this.lastTime=_.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}};var ws=function(){this._zoomIn=new Do({numTouches:1,numTaps:2}),this._zoomOut=new Do({numTouches:2,numTaps:1}),this.reset()};ws.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ws.prototype.touchstart=function(_,p,m){this._zoomIn.touchstart(_,p,m),this._zoomOut.touchstart(_,p,m)},ws.prototype.touchmove=function(_,p,m){this._zoomIn.touchmove(_,p,m),this._zoomOut.touchmove(_,p,m)},ws.prototype.touchend=function(_,p,m){var y=this,I=this._zoomIn.touchend(_,p,m),T=this._zoomOut.touchend(_,p,m);return I?(this._active=!0,_.preventDefault(),setTimeout(function(){return y.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()+1,around:E.unproject(I)},{originalEvent:_})}}):T?(this._active=!0,_.preventDefault(),setTimeout(function(){return y.reset()},0),{cameraAnimation:function(E){return E.easeTo({duration:300,zoom:E.getZoom()-1,around:E.unproject(T)},{originalEvent:_})}}):void 0},ws.prototype.touchcancel=function(){this.reset()},ws.prototype.enable=function(){this._enabled=!0},ws.prototype.disable=function(){this._enabled=!1,this.reset()},ws.prototype.isEnabled=function(){return this._enabled},ws.prototype.isActive=function(){return this._active};var Lf={0:1,2:2},St=function(_){this.reset(),this._clickTolerance=_.clickTolerance||1};St.prototype.blur=function(){this.reset()},St.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},St.prototype._correctButton=function(_,p){return!1},St.prototype._move=function(_,p){return{}},St.prototype.mousedown=function(_,p){if(!this._lastPoint){var m=c.mouseButton(_);this._correctButton(_,m)&&(this._lastPoint=p,this._eventButton=m)}},St.prototype.mousemoveWindow=function(_,p){var m=this._lastPoint;if(m){if(_.preventDefault(),function(y,I){var T=Lf[I];return y.buttons===void 0||(y.buttons&T)!==T}(_,this._eventButton))this.reset();else if(this._moved||!(p.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(m,p)}},St.prototype.mouseupWindow=function(_){this._lastPoint&&c.mouseButton(_)===this._eventButton&&(this._moved&&c.suppressClick(),this.reset())},St.prototype.enable=function(){this._enabled=!0},St.prototype.disable=function(){this._enabled=!1,this.reset()},St.prototype.isEnabled=function(){return this._enabled},St.prototype.isActive=function(){return this._active};var Rf=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.mousedown=function(m,y){_.prototype.mousedown.call(this,m,y),this._lastPoint&&(this._active=!0)},p.prototype._correctButton=function(m,y){return y===0&&!m.ctrlKey},p.prototype._move=function(m,y){return{around:y,panDelta:y.sub(m)}},p}(St),zm=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype._correctButton=function(m,y){return y===0&&m.ctrlKey||y===2},p.prototype._move=function(m,y){var I=.8*(y.x-m.x);if(I)return this._active=!0,{bearingDelta:I}},p.prototype.contextmenu=function(m){m.preventDefault()},p}(St),kf=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype._correctButton=function(m,y){return y===0&&m.ctrlKey||y===2},p.prototype._move=function(m,y){var I=-.5*(y.y-m.y);if(I)return this._active=!0,{pitchDelta:I}},p.prototype.contextmenu=function(m){m.preventDefault()},p}(St),ho=function(_){this._minTouches=1,this._clickTolerance=_.clickTolerance||1,this.reset()};ho.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new r.Point(0,0)},ho.prototype.touchstart=function(_,p,m){return this._calculateTransform(_,p,m)},ho.prototype.touchmove=function(_,p,m){if(this._active&&!(m.length<this._minTouches))return _.preventDefault(),this._calculateTransform(_,p,m)},ho.prototype.touchend=function(_,p,m){this._calculateTransform(_,p,m),this._active&&m.length<this._minTouches&&this.reset()},ho.prototype.touchcancel=function(){this.reset()},ho.prototype._calculateTransform=function(_,p,m){m.length>0&&(this._active=!0);var y=Zm(m,p),I=new r.Point(0,0),T=new r.Point(0,0),E=0;for(var k in y){var F=y[k],U=this._touches[k];U&&(I._add(F),T._add(F.sub(U)),E++,y[k]=F)}if(this._touches=y,!(E<this._minTouches)&&T.mag()){var $=T.div(E);if(this._sum._add($),!(this._sum.mag()<this._clickTolerance))return{around:I.div(E),panDelta:$}}},ho.prototype.enable=function(){this._enabled=!0},ho.prototype.disable=function(){this._enabled=!1,this.reset()},ho.prototype.isEnabled=function(){return this._enabled},ho.prototype.isActive=function(){return this._active};var Is=function(){this.reset()};function Um(_,p,m){for(var y=0;y<_.length;y++)if(_[y].identifier===m)return p[y]}function Xm(_,p){return Math.log(_/p)/Math.LN2}Is.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Is.prototype._start=function(_){},Is.prototype._move=function(_,p,m){return{}},Is.prototype.touchstart=function(_,p,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([p[0],p[1]]))},Is.prototype.touchmove=function(_,p,m){if(this._firstTwoTouches){_.preventDefault();var y=this._firstTwoTouches,I=y[1],T=Um(m,p,y[0]),E=Um(m,p,I);if(T&&E){var k=this._aroundCenter?null:T.add(E).div(2);return this._move([T,E],k,_)}}},Is.prototype.touchend=function(_,p,m){if(this._firstTwoTouches){var y=this._firstTwoTouches,I=y[1],T=Um(m,p,y[0]),E=Um(m,p,I);T&&E||(this._active&&c.suppressClick(),this.reset())}},Is.prototype.touchcancel=function(){this.reset()},Is.prototype.enable=function(_){this._enabled=!0,this._aroundCenter=!!_&&_.around==="center"},Is.prototype.disable=function(){this._enabled=!1,this.reset()},Is.prototype.isEnabled=function(){return this._enabled},Is.prototype.isActive=function(){return this._active};var Cs=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.reset=function(){_.prototype.reset.call(this),delete this._distance,delete this._startDistance},p.prototype._start=function(m){this._startDistance=this._distance=m[0].dist(m[1])},p.prototype._move=function(m,y){var I=this._distance;if(this._distance=m[0].dist(m[1]),this._active||!(Math.abs(Xm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Xm(this._distance,I),pinchAround:y}},p}(Is);function kl(_,p){return 180*_.angleWith(p)/Math.PI}var _b=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.reset=function(){_.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},p.prototype._start=function(m){this._startVector=this._vector=m[0].sub(m[1]),this._minDiameter=m[0].dist(m[1])},p.prototype._move=function(m,y){var I=this._vector;if(this._vector=m[0].sub(m[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:kl(this._vector,I),pinchAround:y}},p.prototype._isBelowThreshold=function(m){this._minDiameter=Math.min(this._minDiameter,m.mag());var y=25/(Math.PI*this._minDiameter)*360,I=kl(m,this._startVector);return Math.abs(I)<y},p}(Is);function l_(_){return Math.abs(_.y)>Math.abs(_.x)}var Wf=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.reset=function(){_.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},p.prototype._start=function(m){this._lastPoints=m,l_(m[0].sub(m[1]))&&(this._valid=!1)},p.prototype._move=function(m,y,I){var T=m[0].sub(this._lastPoints[0]),E=m[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(T,E,I.timeStamp),this._valid)return this._lastPoints=m,this._active=!0,{pitchDelta:(T.y+E.y)/2*-.5}},p.prototype.gestureBeginsVertically=function(m,y,I){if(this._valid!==void 0)return this._valid;var T=m.mag()>=2,E=y.mag()>=2;if(T||E){if(!T||!E)return this._firstMove===void 0&&(this._firstMove=I),I-this._firstMove<100&&void 0;var k=m.y>0==y.y>0;return l_(m)&&l_(y)&&k}},p}(Is),Gf={panStep:100,bearingStep:15,pitchStep:10},Vo=function(){var _=Gf;this._panStep=_.panStep,this._bearingStep=_.bearingStep,this._pitchStep=_.pitchStep,this._rotationDisabled=!1};function Us(_){return _*(2-_)}Vo.prototype.blur=function(){this.reset()},Vo.prototype.reset=function(){this._active=!1},Vo.prototype.keydown=function(_){var p=this;if(!(_.altKey||_.ctrlKey||_.metaKey)){var m=0,y=0,I=0,T=0,E=0;switch(_.keyCode){case 61:case 107:case 171:case 187:m=1;break;case 189:case 109:case 173:m=-1;break;case 37:_.shiftKey?y=-1:(_.preventDefault(),T=-1);break;case 39:_.shiftKey?y=1:(_.preventDefault(),T=1);break;case 38:_.shiftKey?I=1:(_.preventDefault(),E=-1);break;case 40:_.shiftKey?I=-1:(_.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(y=0,I=0),{cameraAnimation:function(k){var F=k.getZoom();k.easeTo({duration:300,easeId:"keyboardHandler",easing:Us,zoom:m?Math.round(F)+m*(_.shiftKey?2:1):F,bearing:k.getBearing()+y*p._bearingStep,pitch:k.getPitch()+I*p._pitchStep,offset:[-T*p._panStep,-E*p._panStep],center:k.getCenter()},{originalEvent:_})}}}},Vo.prototype.enable=function(){this._enabled=!0},Vo.prototype.disable=function(){this._enabled=!1,this.reset()},Vo.prototype.isEnabled=function(){return this._enabled},Vo.prototype.isActive=function(){return this._active},Vo.prototype.disableRotation=function(){this._rotationDisabled=!0},Vo.prototype.enableRotation=function(){this._rotationDisabled=!1};var Ya=function(_,p){this._map=_,this._el=_.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,r.bindAll(["_onTimeout"],this)};Ya.prototype.setZoomRate=function(_){this._defaultZoomRate=_},Ya.prototype.setWheelZoomRate=function(_){this._wheelZoomRate=_},Ya.prototype.isEnabled=function(){return!!this._enabled},Ya.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Ya.prototype.isZooming=function(){return!!this._zooming},Ya.prototype.enable=function(_){this.isEnabled()||(this._enabled=!0,this._aroundCenter=_&&_.around==="center")},Ya.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ya.prototype.wheel=function(_){if(this.isEnabled()){var p=_.deltaMode===r.window.WheelEvent.DOM_DELTA_LINE?40*_.deltaY:_.deltaY,m=r.browser.now(),y=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,p!==0&&p%4.000244140625==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,_)):this._type||(this._type=Math.abs(y*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),_.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=_,this._delta-=p,this._active||this._start(_)),_.preventDefault()}},Ya.prototype._onTimeout=function(_){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(_)},Ya.prototype._start=function(_){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var p=c.mousePos(this._el,_);this._around=r.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ya.prototype.renderFrame=function(){var _=this;if(this._frameId&&(this._frameId=null,this.isActive())){var p=this._map.transform;if(this._delta!==0){var m=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,y=2/(1+Math.exp(-Math.abs(this._delta*m)));this._delta<0&&y!==0&&(y=1/y);var I=typeof this._targetZoom=="number"?p.zoomScale(this._targetZoom):p.scale;this._targetZoom=Math.min(p.maxZoom,Math.max(p.minZoom,p.scaleZoom(I*y))),this._type==="wheel"&&(this._startZoom=p.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var T,E=typeof this._targetZoom=="number"?this._targetZoom:p.zoom,k=this._startZoom,F=this._easing,U=!1;if(this._type==="wheel"&&k&&F){var $=Math.min((r.browser.now()-this._lastWheelEventTime)/200,1),ee=F($);T=r.number(k,E,ee),$<1?this._frameId||(this._frameId=!0):U=!0}else T=E,U=!0;return this._active=!0,U&&(this._active=!1,this._finishTimeout=setTimeout(function(){_._zooming=!1,_._handler._triggerRenderFrame(),delete _._targetZoom,delete _._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!U,zoomDelta:T-p.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ya.prototype._smoothOutEasing=function(_){var p=r.ease;if(this._prevEase){var m=this._prevEase,y=(r.browser.now()-m.start)/m.duration,I=m.easing(y+.01)-m.easing(y),T=.27/Math.sqrt(I*I+1e-4)*.01,E=Math.sqrt(.0729-T*T);p=r.bezier(T,E,.25,1)}return this._prevEase={start:r.browser.now(),duration:_,easing:p},p},Ya.prototype.blur=function(){this.reset()},Ya.prototype.reset=function(){this._active=!1};var ll=function(_,p){this._clickZoom=_,this._tapZoom=p};ll.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},ll.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},ll.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},ll.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var _o=function(){this.reset()};_o.prototype.reset=function(){this._active=!1},_o.prototype.blur=function(){this.reset()},_o.prototype.dblclick=function(_,p){return _.preventDefault(),{cameraAnimation:function(m){m.easeTo({duration:300,zoom:m.getZoom()+(_.shiftKey?-1:1),around:m.unproject(p)},{originalEvent:_})}}},_o.prototype.enable=function(){this._enabled=!0},_o.prototype.disable=function(){this._enabled=!1,this.reset()},_o.prototype.isEnabled=function(){return this._enabled},_o.prototype.isActive=function(){return this._active};var Sr=function(){this._tap=new Do({numTouches:1,numTaps:1}),this.reset()};Sr.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Sr.prototype.touchstart=function(_,p,m){this._swipePoint||(this._tapTime&&_.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=p[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(_,p,m))},Sr.prototype.touchmove=function(_,p,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;var y=p[0],I=y.y-this._swipePoint.y;return this._swipePoint=y,_.preventDefault(),this._active=!0,{zoomDelta:I/128}}}else this._tap.touchmove(_,p,m)},Sr.prototype.touchend=function(_,p,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(_,p,m)&&(this._tapTime=_.timeStamp)},Sr.prototype.touchcancel=function(){this.reset()},Sr.prototype.enable=function(){this._enabled=!0},Sr.prototype.disable=function(){this._enabled=!1,this.reset()},Sr.prototype.isEnabled=function(){return this._enabled},Sr.prototype.isActive=function(){return this._active};var Tc=function(_,p,m){this._el=_,this._mousePan=p,this._touchPan=m};Tc.prototype.enable=function(_){this._inertiaOptions=_||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Tc.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Tc.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Tc.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Cu=function(_,p,m){this._pitchWithRotate=_.pitchWithRotate,this._mouseRotate=p,this._mousePitch=m};Cu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Cu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Cu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Cu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Zo=function(_,p,m,y){this._el=_,this._touchZoom=p,this._touchRotate=m,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0};Zo.prototype.enable=function(_){this._touchZoom.enable(_),this._rotationDisabled||this._touchRotate.enable(_),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Zo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Zo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Zo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Zo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Zo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Hr=function(_){return _.zoom||_.drag||_.pitch||_.rotate},u_=function(_){function p(){_.apply(this,arguments)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p}(r.Event);function ea(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}var zt=function(_,p){this._map=_,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new r_(_),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),r.bindAll(["handleEvent","handleWindowEvent"],this);var m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[r.window.document,"mousemove",{capture:!0}],[r.window.document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[r.window,"blur",void 0]];for(var y=0,I=this._listeners;y<I.length;y+=1){var T=I[y],E=T[0];c.addEventListener(E,T[1],E===r.window.document?this.handleWindowEvent:this.handleEvent,T[2])}};zt.prototype.destroy=function(){for(var _=0,p=this._listeners;_<p.length;_+=1){var m=p[_],y=m[0];c.removeEventListener(y,m[1],y===r.window.document?this.handleWindowEvent:this.handleEvent,m[2])}},zt.prototype._addDefaultHandlers=function(_){var p=this._map,m=p.getCanvasContainer();this._add("mapEvent",new Fn(p,_));var y=p.boxZoom=new xs(p,_);this._add("boxZoom",y);var I=new ws,T=new _o;p.doubleClickZoom=new ll(T,I),this._add("tapZoom",I),this._add("clickZoom",T);var E=new Sr;this._add("tapDragZoom",E);var k=p.touchPitch=new Wf;this._add("touchPitch",k);var F=new zm(_),U=new kf(_);p.dragRotate=new Cu(_,F,U),this._add("mouseRotate",F,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);var $=new Rf(_),ee=new ho(_);p.dragPan=new Tc(m,$,ee),this._add("mousePan",$),this._add("touchPan",ee,["touchZoom","touchRotate"]);var ie=new _b,ge=new Cs;p.touchZoomRotate=new Zo(m,ge,ie,E),this._add("touchRotate",ie,["touchPan","touchZoom"]),this._add("touchZoom",ge,["touchPan","touchRotate"]);var me=p.scrollZoom=new Ya(p,this);this._add("scrollZoom",me,["mousePan"]);var we=p.keyboard=new Vo;this._add("keyboard",we),this._add("blockableMapEvent",new Nt(p));for(var ce=0,xe=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];ce<xe.length;ce+=1){var Te=xe[ce];_.interactive&&_[Te]&&p[Te].enable(_[Te])}},zt.prototype._add=function(_,p,m){this._handlers.push({handlerName:_,handler:p,allowed:m}),this._handlersById[_]=p},zt.prototype.stop=function(_){if(!this._updatingCamera){for(var p=0,m=this._handlers;p<m.length;p+=1)m[p].handler.reset();this._inertia.clear(),this._fireEvents({},{},_),this._changes=[]}},zt.prototype.isActive=function(){for(var _=0,p=this._handlers;_<p.length;_+=1)if(p[_].handler.isActive())return!0;return!1},zt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},zt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},zt.prototype.isMoving=function(){return!!Hr(this._eventsInProgress)||this.isZooming()},zt.prototype._blockedByActive=function(_,p,m){for(var y in _)if(y!==m&&(!p||p.indexOf(y)<0))return!0;return!1},zt.prototype.handleWindowEvent=function(_){this.handleEvent(_,_.type+"Window")},zt.prototype._getMapTouches=function(_){for(var p=[],m=0,y=_;m<y.length;m+=1){var I=y[m];this._el.contains(I.target)&&p.push(I)}return p},zt.prototype.handleEvent=function(_,p){this._updatingCamera=!0;for(var m=_.type==="renderFrame"?void 0:_,y={needsRenderFrame:!1},I={},T={},E=_.touches?this._getMapTouches(_.touches):void 0,k=E?c.touchPos(this._el,E):c.mousePos(this._el,_),F=0,U=this._handlers;F<U.length;F+=1){var $=U[F],ee=$.handlerName,ie=$.handler,ge=$.allowed;if(ie.isEnabled()){var me=void 0;this._blockedByActive(T,ge,ee)?ie.reset():ie[p||_.type]&&(me=ie[p||_.type](_,k,E),this.mergeHandlerResult(y,I,me,ee,m),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||ie.isActive())&&(T[ee]=ie)}}var we={};for(var ce in this._previousActiveHandlers)T[ce]||(we[ce]=m);this._previousActiveHandlers=T,(Object.keys(we).length||ea(y))&&(this._changes.push([y,I,we]),this._triggerRenderFrame()),(Object.keys(T).length||ea(y))&&this._map._stop(!0),this._updatingCamera=!1;var xe=y.cameraAnimation;xe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],xe(this._map))},zt.prototype.mergeHandlerResult=function(_,p,m,y,I){if(m){r.extend(_,m);var T={handlerName:y,originalEvent:m.originalEvent||I};m.zoomDelta!==void 0&&(p.zoom=T),m.panDelta!==void 0&&(p.drag=T),m.pitchDelta!==void 0&&(p.pitch=T),m.bearingDelta!==void 0&&(p.rotate=T)}},zt.prototype._applyChanges=function(){for(var _={},p={},m={},y=0,I=this._changes;y<I.length;y+=1){var T=I[y],E=T[0],k=T[1],F=T[2];E.panDelta&&(_.panDelta=(_.panDelta||new r.Point(0,0))._add(E.panDelta)),E.zoomDelta&&(_.zoomDelta=(_.zoomDelta||0)+E.zoomDelta),E.bearingDelta&&(_.bearingDelta=(_.bearingDelta||0)+E.bearingDelta),E.pitchDelta&&(_.pitchDelta=(_.pitchDelta||0)+E.pitchDelta),E.around!==void 0&&(_.around=E.around),E.pinchAround!==void 0&&(_.pinchAround=E.pinchAround),E.noInertia&&(_.noInertia=E.noInertia),r.extend(p,k),r.extend(m,F)}this._updateMapTransform(_,p,m),this._changes=[]},zt.prototype._updateMapTransform=function(_,p,m){var y=this._map,I=y.transform;if(!ea(_))return this._fireEvents(p,m,!0);var T=_.panDelta,E=_.zoomDelta,k=_.bearingDelta,F=_.pitchDelta,U=_.around,$=_.pinchAround;$!==void 0&&(U=$),y._stop(!0),U=U||y.transform.centerPoint;var ee=I.pointLocation(T?U.sub(T):U);k&&(I.bearing+=k),F&&(I.pitch+=F),E&&(I.zoom+=E),I.setLocationAtPoint(ee,U),this._map._update(),_.noInertia||this._inertia.record(_),this._fireEvents(p,m,!0)},zt.prototype._fireEvents=function(_,p,m){var y=this,I=Hr(this._eventsInProgress),T=Hr(_),E={};for(var k in _)this._eventsInProgress[k]||(E[k+"start"]=_[k].originalEvent),this._eventsInProgress[k]=_[k];for(var F in!I&&T&&this._fireEvent("movestart",T.originalEvent),E)this._fireEvent(F,E[F]);for(var U in T&&this._fireEvent("move",T.originalEvent),_)this._fireEvent(U,_[U].originalEvent);var $,ee={};for(var ie in this._eventsInProgress){var ge=this._eventsInProgress[ie],me=ge.handlerName,we=ge.originalEvent;this._handlersById[me].isActive()||(delete this._eventsInProgress[ie],ee[ie+"end"]=$=p[me]||we)}for(var ce in ee)this._fireEvent(ce,ee[ce]);var xe=Hr(this._eventsInProgress);if(m&&(I||T)&&!xe){this._updatingCamera=!0;var Te=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ge=function(Ue){return Ue!==0&&-y._bearingSnap<Ue&&Ue<y._bearingSnap};Te?(Ge(Te.bearing||this._map.getBearing())&&(Te.bearing=0),this._map.easeTo(Te,{originalEvent:$})):(this._map.fire(new r.Event("moveend",{originalEvent:$})),Ge(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},zt.prototype._fireEvent=function(_,p){this._map.fire(new r.Event(_,p?{originalEvent:p}:{}))},zt.prototype._requestFrame=function(){var _=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(p){delete _._frameId,_.handleEvent(new u_("renderFrame",{timeStamp:p})),_._applyChanges()})},zt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Hm=function(_){function p(m,y){_.call(this),this._moving=!1,this._zooming=!1,this.transform=m,this._bearingSnap=y.bearingSnap,r.bindAll(["_renderFrameCallback"],this)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.getCenter=function(){return new r.LngLat(this.transform.center.lng,this.transform.center.lat)},p.prototype.setCenter=function(m,y){return this.jumpTo({center:m},y)},p.prototype.panBy=function(m,y,I){return m=r.Point.convert(m).mult(-1),this.panTo(this.transform.center,r.extend({offset:m},y),I)},p.prototype.panTo=function(m,y,I){return this.easeTo(r.extend({center:m},y),I)},p.prototype.getZoom=function(){return this.transform.zoom},p.prototype.setZoom=function(m,y){return this.jumpTo({zoom:m},y),this},p.prototype.zoomTo=function(m,y,I){return this.easeTo(r.extend({zoom:m},y),I)},p.prototype.zoomIn=function(m,y){return this.zoomTo(this.getZoom()+1,m,y),this},p.prototype.zoomOut=function(m,y){return this.zoomTo(this.getZoom()-1,m,y),this},p.prototype.getBearing=function(){return this.transform.bearing},p.prototype.setBearing=function(m,y){return this.jumpTo({bearing:m},y),this},p.prototype.getPadding=function(){return this.transform.padding},p.prototype.setPadding=function(m,y){return this.jumpTo({padding:m},y),this},p.prototype.rotateTo=function(m,y,I){return this.easeTo(r.extend({bearing:m},y),I)},p.prototype.resetNorth=function(m,y){return this.rotateTo(0,r.extend({duration:1e3},m),y),this},p.prototype.resetNorthPitch=function(m,y){return this.easeTo(r.extend({bearing:0,pitch:0,duration:1e3},m),y),this},p.prototype.snapToNorth=function(m,y){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(m,y):this},p.prototype.getPitch=function(){return this.transform.pitch},p.prototype.setPitch=function(m,y){return this.jumpTo({pitch:m},y),this},p.prototype.cameraForBounds=function(m,y){m=r.LngLatBounds.convert(m);var I=y&&y.bearing||0;return this._cameraForBoxAndBearing(m.getNorthWest(),m.getSouthEast(),I,y)},p.prototype._cameraForBoxAndBearing=function(m,y,I,T){var E={top:0,bottom:0,right:0,left:0};if(typeof(T=r.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},T)).padding=="number"){var k=T.padding;T.padding={top:k,bottom:k,right:k,left:k}}T.padding=r.extend(E,T.padding);var F=this.transform,U=F.padding,$=F.project(r.LngLat.convert(m)),ee=F.project(r.LngLat.convert(y)),ie=$.rotate(-I*Math.PI/180),ge=ee.rotate(-I*Math.PI/180),me=new r.Point(Math.max(ie.x,ge.x),Math.max(ie.y,ge.y)),we=new r.Point(Math.min(ie.x,ge.x),Math.min(ie.y,ge.y)),ce=me.sub(we),xe=(F.width-(U.left+U.right+T.padding.left+T.padding.right))/ce.x,Te=(F.height-(U.top+U.bottom+T.padding.top+T.padding.bottom))/ce.y;if(!(Te<0||xe<0)){var Ge=Math.min(F.scaleZoom(F.scale*Math.min(xe,Te)),T.maxZoom),Ue=typeof T.offset.x=="number"?new r.Point(T.offset.x,T.offset.y):r.Point.convert(T.offset),De=new r.Point((T.padding.left-T.padding.right)/2,(T.padding.top-T.padding.bottom)/2).rotate(I*Math.PI/180),He=Ue.add(De).mult(F.scale/F.zoomScale(Ge));return{center:F.unproject($.add(ee).div(2).sub(He)),zoom:Ge,bearing:I}}r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},p.prototype.fitBounds=function(m,y,I){return this._fitInternal(this.cameraForBounds(m,y),y,I)},p.prototype.fitScreenCoordinates=function(m,y,I,T,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(r.Point.convert(m)),this.transform.pointLocation(r.Point.convert(y)),I,T),T,E)},p.prototype._fitInternal=function(m,y,I){return m?(delete(y=r.extend(m,y)).padding,y.linear?this.easeTo(y,I):this.flyTo(y,I)):this},p.prototype.jumpTo=function(m,y){this.stop();var I=this.transform,T=!1,E=!1,k=!1;return"zoom"in m&&I.zoom!==+m.zoom&&(T=!0,I.zoom=+m.zoom),m.center!==void 0&&(I.center=r.LngLat.convert(m.center)),"bearing"in m&&I.bearing!==+m.bearing&&(E=!0,I.bearing=+m.bearing),"pitch"in m&&I.pitch!==+m.pitch&&(k=!0,I.pitch=+m.pitch),m.padding==null||I.isPaddingEqual(m.padding)||(I.padding=m.padding),this.fire(new r.Event("movestart",y)).fire(new r.Event("move",y)),T&&this.fire(new r.Event("zoomstart",y)).fire(new r.Event("zoom",y)).fire(new r.Event("zoomend",y)),E&&this.fire(new r.Event("rotatestart",y)).fire(new r.Event("rotate",y)).fire(new r.Event("rotateend",y)),k&&this.fire(new r.Event("pitchstart",y)).fire(new r.Event("pitch",y)).fire(new r.Event("pitchend",y)),this.fire(new r.Event("moveend",y))},p.prototype.easeTo=function(m,y){var I=this;this._stop(!1,m.easeId),((m=r.extend({offset:[0,0],duration:500,easing:r.ease},m)).animate===!1||!m.essential&&r.browser.prefersReducedMotion)&&(m.duration=0);var T=this.transform,E=this.getZoom(),k=this.getBearing(),F=this.getPitch(),U=this.getPadding(),$="zoom"in m?+m.zoom:E,ee="bearing"in m?this._normalizeBearing(m.bearing,k):k,ie="pitch"in m?+m.pitch:F,ge="padding"in m?m.padding:T.padding,me=r.Point.convert(m.offset),we=T.centerPoint.add(me),ce=T.pointLocation(we),xe=r.LngLat.convert(m.center||ce);this._normalizeCenter(xe);var Te,Ge,Ue=T.project(ce),De=T.project(xe).sub(Ue),He=T.zoomScale($-E);m.around&&(Te=r.LngLat.convert(m.around),Ge=T.locationPoint(Te));var it={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$!==E,this._rotating=this._rotating||k!==ee,this._pitching=this._pitching||ie!==F,this._padding=!T.isPaddingEqual(ge),this._easeId=m.easeId,this._prepareEase(y,m.noMoveStart,it),this._ease(function(yt){if(I._zooming&&(T.zoom=r.number(E,$,yt)),I._rotating&&(T.bearing=r.number(k,ee,yt)),I._pitching&&(T.pitch=r.number(F,ie,yt)),I._padding&&(T.interpolatePadding(U,ge,yt),we=T.centerPoint.add(me)),Te)T.setLocationAtPoint(Te,Ge);else{var gt=T.zoomScale(T.zoom-E),Gt=$>E?Math.min(2,He):Math.max(.5,He),ta=Math.pow(Gt,1-yt),ra=T.unproject(Ue.add(De.mult(yt*ta)).mult(gt));T.setLocationAtPoint(T.renderWorldCopies?ra.wrap():ra,we)}I._fireMoveEvents(y)},function(yt){I._afterEase(y,yt)},m),this},p.prototype._prepareEase=function(m,y,I){I===void 0&&(I={}),this._moving=!0,y||I.moving||this.fire(new r.Event("movestart",m)),this._zooming&&!I.zooming&&this.fire(new r.Event("zoomstart",m)),this._rotating&&!I.rotating&&this.fire(new r.Event("rotatestart",m)),this._pitching&&!I.pitching&&this.fire(new r.Event("pitchstart",m))},p.prototype._fireMoveEvents=function(m){this.fire(new r.Event("move",m)),this._zooming&&this.fire(new r.Event("zoom",m)),this._rotating&&this.fire(new r.Event("rotate",m)),this._pitching&&this.fire(new r.Event("pitch",m))},p.prototype._afterEase=function(m,y){if(!this._easeId||!y||this._easeId!==y){delete this._easeId;var I=this._zooming,T=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,I&&this.fire(new r.Event("zoomend",m)),T&&this.fire(new r.Event("rotateend",m)),E&&this.fire(new r.Event("pitchend",m)),this.fire(new r.Event("moveend",m))}},p.prototype.flyTo=function(m,y){var I=this;if(!m.essential&&r.browser.prefersReducedMotion){var T=r.pick(m,["center","zoom","bearing","pitch","around"]);return this.jumpTo(T,y)}this.stop(),m=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},m);var E=this.transform,k=this.getZoom(),F=this.getBearing(),U=this.getPitch(),$=this.getPadding(),ee="zoom"in m?r.clamp(+m.zoom,E.minZoom,E.maxZoom):k,ie="bearing"in m?this._normalizeBearing(m.bearing,F):F,ge="pitch"in m?+m.pitch:U,me="padding"in m?m.padding:E.padding,we=E.zoomScale(ee-k),ce=r.Point.convert(m.offset),xe=E.centerPoint.add(ce),Te=E.pointLocation(xe),Ge=r.LngLat.convert(m.center||Te);this._normalizeCenter(Ge);var Ue=E.project(Te),De=E.project(Ge).sub(Ue),He=m.curve,it=Math.max(E.width,E.height),yt=it/we,gt=De.mag();if("minZoom"in m){var Gt=r.clamp(Math.min(m.minZoom,k,ee),E.minZoom,E.maxZoom),ta=it/E.zoomScale(Gt-k);He=Math.sqrt(ta/gt*2)}var ra=He*He;function na(ga){var ca=(yt*yt-it*it+(ga?-1:1)*ra*ra*gt*gt)/(2*(ga?yt:it)*ra*gt);return Math.log(Math.sqrt(ca*ca+1)-ca)}function ci(ga){return(Math.exp(ga)-Math.exp(-ga))/2}function Bt(ga){return(Math.exp(ga)+Math.exp(-ga))/2}var va=na(0),Pa=function(ga){return Bt(va)/Bt(va+He*ga)},ba=function(ga){return it*((Bt(va)*(ci(ca=va+He*ga)/Bt(ca))-ci(va))/ra)/gt;var ca},fa=(na(1)-va)/He;if(Math.abs(gt)<1e-6||!isFinite(fa)){if(Math.abs(it-yt)<1e-6)return this.easeTo(m,y);var Wa=yt<it?-1:1;fa=Math.abs(Math.log(yt/it))/He,ba=function(){return 0},Pa=function(ga){return Math.exp(Wa*He*ga)}}return m.duration="duration"in m?+m.duration:1e3*fa/("screenSpeed"in m?+m.screenSpeed/He:+m.speed),m.maxDuration&&m.duration>m.maxDuration&&(m.duration=0),this._zooming=!0,this._rotating=F!==ie,this._pitching=ge!==U,this._padding=!E.isPaddingEqual(me),this._prepareEase(y,!1),this._ease(function(ga){var ca=ga*fa,ar=1/Pa(ca);E.zoom=ga===1?ee:k+E.scaleZoom(ar),I._rotating&&(E.bearing=r.number(F,ie,ga)),I._pitching&&(E.pitch=r.number(U,ge,ga)),I._padding&&(E.interpolatePadding($,me,ga),xe=E.centerPoint.add(ce));var wn=ga===1?Ge:E.unproject(Ue.add(De.mult(ba(ca))).mult(ar));E.setLocationAtPoint(E.renderWorldCopies?wn.wrap():wn,xe),I._fireMoveEvents(y)},function(){return I._afterEase(y)},m),this},p.prototype.isEasing=function(){return!!this._easeFrameId},p.prototype.stop=function(){return this._stop()},p.prototype._stop=function(m,y){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var I=this._onEaseEnd;delete this._onEaseEnd,I.call(this,y)}if(!m){var T=this.handlers;T&&T.stop(!1)}return this},p.prototype._ease=function(m,y,I){I.animate===!1||I.duration===0?(m(1),y()):(this._easeStart=r.browser.now(),this._easeOptions=I,this._onEaseFrame=m,this._onEaseEnd=y,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},p.prototype._renderFrameCallback=function(){var m=Math.min((r.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},p.prototype._normalizeBearing=function(m,y){m=r.wrap(m,-180,180);var I=Math.abs(m-y);return Math.abs(m-360-y)<I&&(m-=360),Math.abs(m+360-y)<I&&(m+=360),m},p.prototype._normalizeCenter=function(m){var y=this.transform;if(y.renderWorldCopies&&!y.lngRange){var I=m.lng-y.center.lng;m.lng+=I>180?-360:I<-180?360:0}},p}(r.Evented),Yr=function(_){_===void 0&&(_={}),this.options=_,r.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Yr.prototype.getDefaultPosition=function(){return"bottom-right"},Yr.prototype.onAdd=function(_){var p=this.options&&this.options.compact;return this._map=_,this._container=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=c.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=c.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),p&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),p===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Yr.prototype.onRemove=function(){c.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Yr.prototype._setElementTitle=function(_,p){var m=this._map._getUIString("AttributionControl."+p);_.title=m,_.setAttribute("aria-label",m)},Yr.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Yr.prototype._updateEditLink=function(){var _=this._editLink;_||(_=this._editLink=this._container.querySelector(".mapbox-improve-map"));var p=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||r.config.ACCESS_TOKEN}];if(_){var m=p.reduce(function(y,I,T){return I.value&&(y+=I.key+"="+I.value+(T<p.length-1?"&":"")),y},"?");_.href=r.config.FEEDBACK_URL+"/"+m+(this._map._hash?this._map._hash.getHashString(!0):""),_.rel="noopener nofollow",this._setElementTitle(_,"MapFeedback")}},Yr.prototype._updateData=function(_){!_||_.sourceDataType!=="metadata"&&_.sourceDataType!=="visibility"&&_.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Yr.prototype._updateAttributions=function(){if(this._map.style){var _=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?_=_.concat(this.options.customAttribution.map(function(k){return typeof k!="string"?"":k})):typeof this.options.customAttribution=="string"&&_.push(this.options.customAttribution)),this._map.style.stylesheet){var p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}var m=this._map.style.sourceCaches;for(var y in m){var I=m[y];if(I.used){var T=I.getSource();T.attribution&&_.indexOf(T.attribution)<0&&_.push(T.attribution)}}_.sort(function(k,F){return k.length-F.length});var E=(_=_.filter(function(k,F){for(var U=F+1;U<_.length;U++)if(_[U].indexOf(k)>=0)return!1;return!0})).join(" | ");E!==this._attribHTML&&(this._attribHTML=E,_.length?(this._innerContainer.innerHTML=E,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Yr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var zo=function(){r.bindAll(["_updateLogo"],this),r.bindAll(["_updateCompact"],this)};zo.prototype.onAdd=function(_){this._map=_,this._container=c.create("div","mapboxgl-ctrl");var p=c.create("a","mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://www.mapbox.com/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},zo.prototype.onRemove=function(){c.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},zo.prototype.getDefaultPosition=function(){return"bottom-left"},zo.prototype._updateLogo=function(_){_&&_.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},zo.prototype._logoRequired=function(){if(this._map.style){var _=this._map.style.sourceCaches;for(var p in _)if(_[p].getSource().mapbox_logo)return!0;return!1}},zo.prototype._updateCompact=function(){var _=this._container.children;if(_.length){var p=_[0];this._map.getCanvasContainer().offsetWidth<250?p.classList.add("mapboxgl-compact"):p.classList.remove("mapboxgl-compact")}};var Tr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Tr.prototype.add=function(_){var p=++this._id;return this._queue.push({callback:_,id:p,cancelled:!1}),p},Tr.prototype.remove=function(_){for(var p=this._currentlyRunning,m=0,y=p?this._queue.concat(p):this._queue;m<y.length;m+=1){var I=y[m];if(I.id===_)return void(I.cancelled=!0)}},Tr.prototype.run=function(_){_===void 0&&(_=0);var p=this._currentlyRunning=this._queue;this._queue=[];for(var m=0,y=p;m<y.length;m+=1){var I=y[m];if(!I.cancelled&&(I.callback(_),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Tr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ul={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Of=r.window.HTMLImageElement,Ym=r.window.HTMLElement,vi=r.window.ImageBitmap,mr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},mb=function(_){function p(y){var I=this;if((y=r.extend({},mr,y)).minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var T=new ri(y.minZoom,y.maxZoom,y.minPitch,y.maxPitch,y.renderWorldCopies);if(_.call(this,T,y),this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._failIfMajorPerformanceCaveat=y.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=y.preserveDrawingBuffer,this._antialias=y.antialias,this._trackResize=y.trackResize,this._bearingSnap=y.bearingSnap,this._refreshExpiredTiles=y.refreshExpiredTiles,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=y.collectResourceTiming,this._renderTaskQueue=new Tr,this._controls=[],this._mapId=r.uniqueId(),this._locale=r.extend({},ul,y.locale),this._clickTolerance=y.clickTolerance,this._requestManager=new r.RequestManager(y.transformRequest,y.accessToken),typeof y.container=="string"){if(this._container=r.window.document.getElementById(y.container),!this._container)throw new Error("Container '"+y.container+"' not found.")}else{if(!(y.container instanceof Ym))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=y.container}if(y.maxBounds&&this.setMaxBounds(y.maxBounds),r.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return I._update(!1)}),this.on("moveend",function(){return I._update(!1)}),this.on("zoom",function(){return I._update(!0)}),r.window!==void 0&&(r.window.addEventListener("online",this._onWindowOnline,!1),r.window.addEventListener("resize",this._onWindowResize,!1),r.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new zt(this,y),this._hash=y.hash&&new zs(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,r.extend({},y.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=y.localIdeographFontFamily,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Yr({customAttribution:y.customAttribution})),this.addControl(new zo,y.logoPosition),this.on("style.load",function(){I.transform.unmodified&&I.jumpTo(I.style.stylesheet)}),this.on("data",function(E){I._update(E.dataType==="style"),I.fire(new r.Event(E.dataType+"data",E))}),this.on("dataloading",function(E){I.fire(new r.Event(E.dataType+"dataloading",E))})}_&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p;var m={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return p.prototype._getMapId=function(){return this._mapId},p.prototype.addControl=function(y,I){if(I===void 0&&(I=y.getDefaultPosition?y.getDefaultPosition():"top-right"),!y||!y.onAdd)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var T=y.onAdd(this);this._controls.push(y);var E=this._controlPositions[I];return I.indexOf("bottom")!==-1?E.insertBefore(T,E.firstChild):E.appendChild(T),this},p.prototype.removeControl=function(y){if(!y||!y.onRemove)return this.fire(new r.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var I=this._controls.indexOf(y);return I>-1&&this._controls.splice(I,1),y.onRemove(this),this},p.prototype.hasControl=function(y){return this._controls.indexOf(y)>-1},p.prototype.resize=function(y){var I=this._containerDimensions(),T=I[0],E=I[1];if(T===this.transform.width&&E===this.transform.height)return this;this._resizeCanvas(T,E),this.transform.resize(T,E),this.painter.resize(T,E);var k=!this._moving;return k&&this.fire(new r.Event("movestart",y)).fire(new r.Event("move",y)),this.fire(new r.Event("resize",y)),k&&this.fire(new r.Event("moveend",y)),this},p.prototype.getBounds=function(){return this.transform.getBounds()},p.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},p.prototype.setMaxBounds=function(y){return this.transform.setMaxBounds(r.LngLatBounds.convert(y)),this._update()},p.prototype.setMinZoom=function(y){if((y=y??-2)>=-2&&y<=this.transform.maxZoom)return this.transform.minZoom=y,this._update(),this.getZoom()<y&&this.setZoom(y),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},p.prototype.getMinZoom=function(){return this.transform.minZoom},p.prototype.setMaxZoom=function(y){if((y=y??22)>=this.transform.minZoom)return this.transform.maxZoom=y,this._update(),this.getZoom()>y&&this.setZoom(y),this;throw new Error("maxZoom must be greater than the current minZoom")},p.prototype.getMaxZoom=function(){return this.transform.maxZoom},p.prototype.setMinPitch=function(y){if((y=y??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(y>=0&&y<=this.transform.maxPitch)return this.transform.minPitch=y,this._update(),this.getPitch()<y&&this.setPitch(y),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},p.prototype.getMinPitch=function(){return this.transform.minPitch},p.prototype.setMaxPitch=function(y){if((y=y??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(y>=this.transform.minPitch)return this.transform.maxPitch=y,this._update(),this.getPitch()>y&&this.setPitch(y),this;throw new Error("maxPitch must be greater than the current minPitch")},p.prototype.getMaxPitch=function(){return this.transform.maxPitch},p.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},p.prototype.setRenderWorldCopies=function(y){return this.transform.renderWorldCopies=y,this._update()},p.prototype.project=function(y){return this.transform.locationPoint(r.LngLat.convert(y))},p.prototype.unproject=function(y){return this.transform.pointLocation(r.Point.convert(y))},p.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},p.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},p.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},p.prototype._createDelegatedListener=function(y,I,T){var E,k=this;if(y==="mouseenter"||y==="mouseover"){var F=!1;return{layer:I,listener:T,delegates:{mousemove:function($){var ee=k.getLayer(I)?k.queryRenderedFeatures($.point,{layers:[I]}):[];ee.length?F||(F=!0,T.call(k,new Un(y,k,$.originalEvent,{features:ee}))):F=!1},mouseout:function(){F=!1}}}}if(y==="mouseleave"||y==="mouseout"){var U=!1;return{layer:I,listener:T,delegates:{mousemove:function($){(k.getLayer(I)?k.queryRenderedFeatures($.point,{layers:[I]}):[]).length?U=!0:U&&(U=!1,T.call(k,new Un(y,k,$.originalEvent)))},mouseout:function($){U&&(U=!1,T.call(k,new Un(y,k,$.originalEvent)))}}}}return{layer:I,listener:T,delegates:(E={},E[y]=function($){var ee=k.getLayer(I)?k.queryRenderedFeatures($.point,{layers:[I]}):[];ee.length&&($.features=ee,T.call(k,$),delete $.features)},E)}},p.prototype.on=function(y,I,T){if(T===void 0)return _.prototype.on.call(this,y,I);var E=this._createDelegatedListener(y,I,T);for(var k in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[y]=this._delegatedListeners[y]||[],this._delegatedListeners[y].push(E),E.delegates)this.on(k,E.delegates[k]);return this},p.prototype.once=function(y,I,T){if(T===void 0)return _.prototype.once.call(this,y,I);var E=this._createDelegatedListener(y,I,T);for(var k in E.delegates)this.once(k,E.delegates[k]);return this},p.prototype.off=function(y,I,T){var E=this;return T===void 0?_.prototype.off.call(this,y,I):(this._delegatedListeners&&this._delegatedListeners[y]&&function(k){for(var F=k[y],U=0;U<F.length;U++){var $=F[U];if($.layer===I&&$.listener===T){for(var ee in $.delegates)E.off(ee,$.delegates[ee]);return F.splice(U,1),E}}}(this._delegatedListeners),this)},p.prototype.queryRenderedFeatures=function(y,I){if(!this.style)return[];var T;if(I!==void 0||y===void 0||y instanceof r.Point||Array.isArray(y)||(I=y,y=void 0),I=I||{},(y=y||[[0,0],[this.transform.width,this.transform.height]])instanceof r.Point||typeof y[0]=="number")T=[r.Point.convert(y)];else{var E=r.Point.convert(y[0]),k=r.Point.convert(y[1]);T=[E,new r.Point(k.x,E.y),k,new r.Point(E.x,k.y),E]}return this.style.queryRenderedFeatures(T,I,this.transform)},p.prototype.querySourceFeatures=function(y,I){return this.style.querySourceFeatures(y,I)},p.prototype.setStyle=function(y,I){return(I=r.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},I)).diff!==!1&&I.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&y?(this._diffStyle(y,I),this):(this._localIdeographFontFamily=I.localIdeographFontFamily,this._updateStyle(y,I))},p.prototype._getUIString=function(y){var I=this._locale[y];if(I==null)throw new Error("Missing UI string '"+y+"'");return I},p.prototype._updateStyle=function(y,I){return this.style&&(this.style.setEventedParent(null),this.style._remove()),y?(this.style=new vs(this,I||{}),this.style.setEventedParent(this,{style:this.style}),typeof y=="string"?this.style.loadURL(y):this.style.loadJSON(y),this):(delete this.style,this)},p.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new vs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},p.prototype._diffStyle=function(y,I){var T=this;if(typeof y=="string"){var E=this._requestManager.normalizeStyleURL(y),k=this._requestManager.transformRequest(E,r.ResourceType.Style);r.getJSON(k,function(F,U){F?T.fire(new r.ErrorEvent(F)):U&&T._updateDiff(U,I)})}else typeof y=="object"&&this._updateDiff(y,I)},p.prototype._updateDiff=function(y,I){try{this.style.setState(y)&&this._update(!0)}catch(T){r.warnOnce("Unable to perform style diff: "+(T.message||T.error||T)+".  Rebuilding the style from scratch."),this._updateStyle(y,I)}},p.prototype.getStyle=function(){if(this.style)return this.style.serialize()},p.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():r.warnOnce("There is no style added to the map.")},p.prototype.addSource=function(y,I){return this._lazyInitEmptyStyle(),this.style.addSource(y,I),this._update(!0)},p.prototype.isSourceLoaded=function(y){var I=this.style&&this.style.sourceCaches[y];if(I!==void 0)return I.loaded();this.fire(new r.ErrorEvent(new Error("There is no source with ID '"+y+"'")))},p.prototype.areTilesLoaded=function(){var y=this.style&&this.style.sourceCaches;for(var I in y){var T=y[I]._tiles;for(var E in T){var k=T[E];if(k.state!=="loaded"&&k.state!=="errored")return!1}}return!0},p.prototype.addSourceType=function(y,I,T){return this._lazyInitEmptyStyle(),this.style.addSourceType(y,I,T)},p.prototype.removeSource=function(y){return this.style.removeSource(y),this._update(!0)},p.prototype.getSource=function(y){return this.style.getSource(y)},p.prototype.addImage=function(y,I,T){T===void 0&&(T={});var E=T.pixelRatio;E===void 0&&(E=1);var k=T.sdf;k===void 0&&(k=!1);var F=T.stretchX,U=T.stretchY,$=T.content;if(this._lazyInitEmptyStyle(),I instanceof Of||vi&&I instanceof vi){var ee=r.browser.getImageData(I);this.style.addImage(y,{data:new r.RGBAImage({width:ee.width,height:ee.height},ee.data),pixelRatio:E,stretchX:F,stretchY:U,content:$,sdf:k,version:0})}else{if(I.width===void 0||I.height===void 0)return this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var ie=I;this.style.addImage(y,{data:new r.RGBAImage({width:I.width,height:I.height},new Uint8Array(I.data)),pixelRatio:E,stretchX:F,stretchY:U,content:$,sdf:k,version:0,userImage:ie}),ie.onAdd&&ie.onAdd(this,y)}},p.prototype.updateImage=function(y,I){var T=this.style.getImage(y);if(!T)return this.fire(new r.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var E=I instanceof Of||vi&&I instanceof vi?r.browser.getImageData(I):I,k=E.width,F=E.height,U=E.data;return k===void 0||F===void 0?this.fire(new r.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):k!==T.data.width||F!==T.data.height?this.fire(new r.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(T.data.replace(U,!(I instanceof Of||vi&&I instanceof vi)),void this.style.updateImage(y,T))},p.prototype.hasImage=function(y){return y?!!this.style.getImage(y):(this.fire(new r.ErrorEvent(new Error("Missing required image id"))),!1)},p.prototype.removeImage=function(y){this.style.removeImage(y)},p.prototype.loadImage=function(y,I){r.getImage(this._requestManager.transformRequest(y,r.ResourceType.Image),I)},p.prototype.listImages=function(){return this.style.listImages()},p.prototype.addLayer=function(y,I){return this._lazyInitEmptyStyle(),this.style.addLayer(y,I),this._update(!0)},p.prototype.moveLayer=function(y,I){return this.style.moveLayer(y,I),this._update(!0)},p.prototype.removeLayer=function(y){return this.style.removeLayer(y),this._update(!0)},p.prototype.getLayer=function(y){return this.style.getLayer(y)},p.prototype.setLayerZoomRange=function(y,I,T){return this.style.setLayerZoomRange(y,I,T),this._update(!0)},p.prototype.setFilter=function(y,I,T){return T===void 0&&(T={}),this.style.setFilter(y,I,T),this._update(!0)},p.prototype.getFilter=function(y){return this.style.getFilter(y)},p.prototype.setPaintProperty=function(y,I,T,E){return E===void 0&&(E={}),this.style.setPaintProperty(y,I,T,E),this._update(!0)},p.prototype.getPaintProperty=function(y,I){return this.style.getPaintProperty(y,I)},p.prototype.setLayoutProperty=function(y,I,T,E){return E===void 0&&(E={}),this.style.setLayoutProperty(y,I,T,E),this._update(!0)},p.prototype.getLayoutProperty=function(y,I){return this.style.getLayoutProperty(y,I)},p.prototype.setLight=function(y,I){return I===void 0&&(I={}),this._lazyInitEmptyStyle(),this.style.setLight(y,I),this._update(!0)},p.prototype.getLight=function(){return this.style.getLight()},p.prototype.setFeatureState=function(y,I){return this.style.setFeatureState(y,I),this._update()},p.prototype.removeFeatureState=function(y,I){return this.style.removeFeatureState(y,I),this._update()},p.prototype.getFeatureState=function(y){return this.style.getFeatureState(y)},p.prototype.getContainer=function(){return this._container},p.prototype.getCanvasContainer=function(){return this._canvasContainer},p.prototype.getCanvas=function(){return this._canvas},p.prototype._containerDimensions=function(){var y=0,I=0;return this._container&&(y=this._container.clientWidth||400,I=this._container.clientHeight||300),[y,I]},p.prototype._detectMissingCSS=function(){r.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&r.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},p.prototype._setupContainer=function(){var y=this._container;y.classList.add("mapboxgl-map"),(this._missingCSSCanary=c.create("div","mapboxgl-canary",y)).style.visibility="hidden",this._detectMissingCSS();var I=this._canvasContainer=c.create("div","mapboxgl-canvas-container",y);this._interactive&&I.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",I),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var T=this._containerDimensions();this._resizeCanvas(T[0],T[1]);var E=this._controlContainer=c.create("div","mapboxgl-control-container",y),k=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(F){k[F]=c.create("div","mapboxgl-ctrl-"+F,E)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},p.prototype._resizeCanvas=function(y,I){var T=r.browser.devicePixelRatio||1;this._canvas.width=T*y,this._canvas.height=T*I,this._canvas.style.width=y+"px",this._canvas.style.height=I+"px"},p.prototype._setupPainter=function(){var y=r.extend({},l.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),I=this._canvas.getContext("webgl",y)||this._canvas.getContext("experimental-webgl",y);I?(this.painter=new sn(I,this.transform),r.webpSupported.testSupport(I)):this.fire(new r.ErrorEvent(new Error("Failed to initialize WebGL")))},p.prototype._contextLost=function(y){y.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new r.Event("webglcontextlost",{originalEvent:y}))},p.prototype._contextRestored=function(y){this._setupPainter(),this.resize(),this._update(),this.fire(new r.Event("webglcontextrestored",{originalEvent:y}))},p.prototype._onMapScroll=function(y){if(y.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},p.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},p.prototype._update=function(y){return this.style?(this._styleDirty=this._styleDirty||y,this._sourcesDirty=!0,this.triggerRepaint(),this):this},p.prototype._requestRenderFrame=function(y){return this._update(),this._renderTaskQueue.add(y)},p.prototype._cancelRenderFrame=function(y){this._renderTaskQueue.remove(y)},p.prototype._render=function(y){var I,T=this,E=0,k=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(I=k.createQueryEXT(),k.beginQueryEXT(k.TIME_ELAPSED_EXT,I),E=r.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(y),!this._removed){var F=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var U=this.transform.zoom,$=r.browser.now();this.style.zoomHistory.update(U,$);var ee=new r.EvaluationParameters(U,{now:$,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ie=ee.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(F=!0,this._crossFadingFactor=ie),this.style.update(ee)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new r.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new r.Event("load"))),this.style&&(this.style.hasTransitions()||F)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var ge=r.browser.now()-E;k.endQueryEXT(k.TIME_ELAPSED_EXT,I),setTimeout(function(){var ce=k.getQueryObjectEXT(I,k.QUERY_RESULT_EXT)/1e6;k.deleteQueryEXT(I),T.fire(new r.Event("gpu-timing-frame",{cpuTime:ge,gpuTime:ce}))},50)}if(this.listens("gpu-timing-layer")){var me=this.painter.collectGpuTimers();setTimeout(function(){var ce=T.painter.queryGpuTimers(me);T.fire(new r.Event("gpu-timing-layer",{layerTimes:ce}))},50)}var we=this._sourcesDirty||this._styleDirty||this._placementDirty;return we||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new r.Event("idle")),!this._loaded||this._fullyLoaded||we||(this._fullyLoaded=!0),this}},p.prototype.remove=function(){this._hash&&this._hash.remove();for(var y=0,I=this._controls;y<I.length;y+=1)I[y].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),r.window!==void 0&&(r.window.removeEventListener("resize",this._onWindowResize,!1),r.window.removeEventListener("orientationchange",this._onWindowResize,!1),r.window.removeEventListener("online",this._onWindowOnline,!1));var T=this.painter.context.gl.getExtension("WEBGL_lose_context");T&&T.loseContext(),Ec(this._canvasContainer),Ec(this._controlContainer),Ec(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new r.Event("remove"))},p.prototype.triggerRepaint=function(){var y=this;this.style&&!this._frame&&(this._frame=r.browser.frame(function(I){y._frame=null,y._render(I)}))},p.prototype._onWindowOnline=function(){this._update()},p.prototype._onWindowResize=function(y){this._trackResize&&this.resize({originalEvent:y})._update()},m.showTileBoundaries.get=function(){return!!this._showTileBoundaries},m.showTileBoundaries.set=function(y){this._showTileBoundaries!==y&&(this._showTileBoundaries=y,this._update())},m.showPadding.get=function(){return!!this._showPadding},m.showPadding.set=function(y){this._showPadding!==y&&(this._showPadding=y,this._update())},m.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},m.showCollisionBoxes.set=function(y){this._showCollisionBoxes!==y&&(this._showCollisionBoxes=y,y?this.style._generateCollisionBoxes():this._update())},m.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},m.showOverdrawInspector.set=function(y){this._showOverdrawInspector!==y&&(this._showOverdrawInspector=y,this._update())},m.repaint.get=function(){return!!this._repaint},m.repaint.set=function(y){this._repaint!==y&&(this._repaint=y,this.triggerRepaint())},m.vertices.get=function(){return!!this._vertices},m.vertices.set=function(y){this._vertices=y,this._update()},p.prototype._setCacheLimits=function(y,I){r.setCacheLimits(y,I)},m.version.get=function(){return r.version},Object.defineProperties(p.prototype,m),p}(Hm);function Ec(_){_.parentNode&&_.parentNode.removeChild(_)}var Pf={showCompass:!0,showZoom:!0,visualizePitch:!1},Wl=function(_){var p=this;this.options=r.extend({},Pf,_),this._container=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(m){return m.preventDefault()}),this.options.showZoom&&(r.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(m){return p._map.zoomIn({},{originalEvent:m})}),c.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(m){return p._map.zoomOut({},{originalEvent:m})}),c.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(r.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(m){p.options.visualizePitch?p._map.resetNorthPitch({},{originalEvent:m}):p._map.resetNorth({},{originalEvent:m})}),this._compassIcon=c.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Wl.prototype._updateZoomButtons=function(){var _=this._map.getZoom(),p=_===this._map.getMaxZoom(),m=_===this._map.getMinZoom();this._zoomInButton.disabled=p,this._zoomOutButton.disabled=m,this._zoomInButton.setAttribute("aria-disabled",p.toString()),this._zoomOutButton.setAttribute("aria-disabled",m.toString())},Wl.prototype._rotateCompassArrow=function(){var _=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=_},Wl.prototype.onAdd=function(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new As(this._map,this._compass,this.options.visualizePitch)),this._container},Wl.prototype.onRemove=function(){c.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Wl.prototype._createButton=function(_,p){var m=c.create("button",_,this._container);return m.type="button",m.addEventListener("click",p),m},Wl.prototype._setButtonTitle=function(_,p){var m=this._map._getUIString("NavigationControl."+p);_.title=m,_.setAttribute("aria-label",m)};var As=function(_,p,m){m===void 0&&(m=!1),this._clickTolerance=10,this.element=p,this.mouseRotate=new zm({clickTolerance:_.dragRotate._mouseRotate._clickTolerance}),this.map=_,m&&(this.mousePitch=new kf({clickTolerance:_.dragRotate._mousePitch._clickTolerance})),r.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),c.addEventListener(p,"mousedown",this.mousedown),c.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),c.addEventListener(p,"touchmove",this.touchmove),c.addEventListener(p,"touchend",this.touchend),c.addEventListener(p,"touchcancel",this.reset)};function Od(_,p,m){if(_=new r.LngLat(_.lng,_.lat),p){var y=new r.LngLat(_.lng-360,_.lat),I=new r.LngLat(_.lng+360,_.lat),T=m.locationPoint(_).distSqr(p);m.locationPoint(y).distSqr(p)<T?_=y:m.locationPoint(I).distSqr(p)<T&&(_=I)}for(;Math.abs(_.lng-m.center.lng)>180;){var E=m.locationPoint(_);if(E.x>=0&&E.y>=0&&E.x<=m.width&&E.y<=m.height)break;_.lng>m.center.lng?_.lng-=360:_.lng+=360}return _}As.prototype.down=function(_,p){this.mouseRotate.mousedown(_,p),this.mousePitch&&this.mousePitch.mousedown(_,p),c.disableDrag()},As.prototype.move=function(_,p){var m=this.map,y=this.mouseRotate.mousemoveWindow(_,p);if(y&&y.bearingDelta&&m.setBearing(m.getBearing()+y.bearingDelta),this.mousePitch){var I=this.mousePitch.mousemoveWindow(_,p);I&&I.pitchDelta&&m.setPitch(m.getPitch()+I.pitchDelta)}},As.prototype.off=function(){var _=this.element;c.removeEventListener(_,"mousedown",this.mousedown),c.removeEventListener(_,"touchstart",this.touchstart,{passive:!1}),c.removeEventListener(_,"touchmove",this.touchmove),c.removeEventListener(_,"touchend",this.touchend),c.removeEventListener(_,"touchcancel",this.reset),this.offTemp()},As.prototype.offTemp=function(){c.enableDrag(),c.removeEventListener(r.window,"mousemove",this.mousemove),c.removeEventListener(r.window,"mouseup",this.mouseup)},As.prototype.mousedown=function(_){this.down(r.extend({},_,{ctrlKey:!0,preventDefault:function(){return _.preventDefault()}}),c.mousePos(this.element,_)),c.addEventListener(r.window,"mousemove",this.mousemove),c.addEventListener(r.window,"mouseup",this.mouseup)},As.prototype.mousemove=function(_){this.move(_,c.mousePos(this.element,_))},As.prototype.mouseup=function(_){this.mouseRotate.mouseupWindow(_),this.mousePitch&&this.mousePitch.mouseupWindow(_),this.offTemp()},As.prototype.touchstart=function(_){_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=c.touchPos(this.element,_.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return _.preventDefault()}},this._startPos))},As.prototype.touchmove=function(_){_.targetTouches.length!==1?this.reset():(this._lastPos=c.touchPos(this.element,_.targetTouches)[0],this.move({preventDefault:function(){return _.preventDefault()}},this._lastPos))},As.prototype.touchend=function(_){_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},As.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var cl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Km(_,p,m){var y=_.classList;for(var I in cl)y.remove("mapboxgl-"+m+"-anchor-"+I);y.add("mapboxgl-"+m+"-anchor-"+p)}var Pd,c_=function(_){function p(m,y){if(_.call(this),(m instanceof r.window.HTMLElement||y)&&(m=r.extend({element:m},y)),r.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=m&&m.anchor||"center",this._color=m&&m.color||"#3FB1CE",this._scale=m&&m.scale||1,this._draggable=m&&m.draggable||!1,this._clickTolerance=m&&m.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=m&&m.rotation||0,this._rotationAlignment=m&&m.rotationAlignment||"auto",this._pitchAlignment=m&&m.pitchAlignment&&m.pitchAlignment!=="auto"?m.pitchAlignment:this._rotationAlignment,m&&m.element)this._element=m.element,this._offset=r.Point.convert(m&&m.offset||[0,0]);else{this._defaultMarker=!0,this._element=c.create("div"),this._element.setAttribute("aria-label","Map marker");var I=c.createNS("http://www.w3.org/2000/svg","svg");I.setAttributeNS(null,"display","block"),I.setAttributeNS(null,"height","41px"),I.setAttributeNS(null,"width","27px"),I.setAttributeNS(null,"viewBox","0 0 27 41");var T=c.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"stroke","none"),T.setAttributeNS(null,"stroke-width","1"),T.setAttributeNS(null,"fill","none"),T.setAttributeNS(null,"fill-rule","evenodd");var E=c.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");var k=c.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"transform","translate(3.0, 29.0)"),k.setAttributeNS(null,"fill","#000000");for(var F=0,U=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];F<U.length;F+=1){var $=U[F],ee=c.createNS("http://www.w3.org/2000/svg","ellipse");ee.setAttributeNS(null,"opacity","0.04"),ee.setAttributeNS(null,"cx","10.5"),ee.setAttributeNS(null,"cy","5.80029008"),ee.setAttributeNS(null,"rx",$.rx),ee.setAttributeNS(null,"ry",$.ry),k.appendChild(ee)}var ie=c.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"fill",this._color);var ge=c.createNS("http://www.w3.org/2000/svg","path");ge.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ie.appendChild(ge);var me=c.createNS("http://www.w3.org/2000/svg","g");me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"fill","#000000");var we=c.createNS("http://www.w3.org/2000/svg","path");we.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),me.appendChild(we);var ce=c.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ce.setAttributeNS(null,"fill","#FFFFFF");var xe=c.createNS("http://www.w3.org/2000/svg","g");xe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Te=c.createNS("http://www.w3.org/2000/svg","circle");Te.setAttributeNS(null,"fill","#000000"),Te.setAttributeNS(null,"opacity","0.25"),Te.setAttributeNS(null,"cx","5.5"),Te.setAttributeNS(null,"cy","5.5"),Te.setAttributeNS(null,"r","5.4999962");var Ge=c.createNS("http://www.w3.org/2000/svg","circle");Ge.setAttributeNS(null,"fill","#FFFFFF"),Ge.setAttributeNS(null,"cx","5.5"),Ge.setAttributeNS(null,"cy","5.5"),Ge.setAttributeNS(null,"r","5.4999962"),xe.appendChild(Te),xe.appendChild(Ge),E.appendChild(k),E.appendChild(ie),E.appendChild(me),E.appendChild(ce),E.appendChild(xe),I.appendChild(E),I.setAttributeNS(null,"height",41*this._scale+"px"),I.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(I),this._offset=r.Point.convert(m&&m.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Ue){Ue.preventDefault()}),this._element.addEventListener("mousedown",function(Ue){Ue.preventDefault()}),Km(this._element,this._anchor,"marker"),this._popup=null}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.addTo=function(m){return this.remove(),this._map=m,m.getCanvasContainer().appendChild(this._element),m.on("move",this._update),m.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},p.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),c.remove(this._element),this._popup&&this._popup.remove(),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(m){return this._lngLat=r.LngLat.convert(m),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},p.prototype.getElement=function(){return this._element},p.prototype.setPopup=function(m){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),m){if(!("offset"in m.options)){var y=Math.sqrt(Math.pow(13.5,2)/2);m.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(24.6+y)],"bottom-right":[-y,-1*(24.6+y)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=m,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},p.prototype._onKeyPress=function(m){var y=m.code,I=m.charCode||m.keyCode;y!=="Space"&&y!=="Enter"&&I!==32&&I!==13||this.togglePopup()},p.prototype._onMapClick=function(m){var y=m.originalEvent.target,I=this._element;this._popup&&(y===I||I.contains(y))&&this.togglePopup()},p.prototype.getPopup=function(){return this._popup},p.prototype.togglePopup=function(){var m=this._popup;return m?(m.isOpen()?m.remove():m.addTo(this._map),this):this},p.prototype._update=function(m){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Od(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(y="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var I="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?I="rotateX(0deg)":this._pitchAlignment==="map"&&(I="rotateX("+this._map.getPitch()+"deg)"),m&&m.type!=="moveend"||(this._pos=this._pos.round()),c.setTransform(this._element,cl[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+I+" "+y)}},p.prototype.getOffset=function(){return this._offset},p.prototype.setOffset=function(m){return this._offset=r.Point.convert(m),this._update(),this},p.prototype._onMove=function(m){if(!this._isDragging){var y=this._clickTolerance||this._map._clickTolerance;this._isDragging=m.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=m.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new r.Event("dragstart"))),this.fire(new r.Event("drag")))},p.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new r.Event("dragend")),this._state="inactive"},p.prototype._addDragHandler=function(m){this._element.contains(m.originalEvent.target)&&(m.preventDefault(),this._positionDelta=m.point.sub(this._pos).add(this._offset),this._pointerdownPos=m.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},p.prototype.setDraggable=function(m){return this._draggable=!!m,this._map&&(m?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},p.prototype.isDraggable=function(){return this._draggable},p.prototype.setRotation=function(m){return this._rotation=m||0,this._update(),this},p.prototype.getRotation=function(){return this._rotation},p.prototype.setRotationAlignment=function(m){return this._rotationAlignment=m||"auto",this._update(),this},p.prototype.getRotationAlignment=function(){return this._rotationAlignment},p.prototype.setPitchAlignment=function(m){return this._pitchAlignment=m&&m!=="auto"?m:this._rotationAlignment,this._update(),this},p.prototype.getPitchAlignment=function(){return this._pitchAlignment},p}(r.Evented),Bf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Bd=0,Mc=!1,Ff=function(_){function p(m){_.call(this),this.options=r.extend({},Bf,m),r.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.onAdd=function(m){var y;return this._map=m,this._container=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),y=this._setupUI,Pd!==void 0?y(Pd):r.window.navigator.permissions!==void 0?r.window.navigator.permissions.query({name:"geolocation"}).then(function(I){y(Pd=I.state!=="denied")}):y(Pd=!!r.window.navigator.geolocation),this._container},p.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),c.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Bd=0,Mc=!1},p.prototype._isOutOfMapMaxBounds=function(m){var y=this._map.getMaxBounds(),I=m.coords;return y&&(I.longitude<y.getWest()||I.longitude>y.getEast()||I.latitude<y.getSouth()||I.latitude>y.getNorth())},p.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},p.prototype._onSuccess=function(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new r.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("geolocate",m)),this._finish()}},p.prototype._updateCamera=function(m){var y=new r.LngLat(m.coords.longitude,m.coords.latitude),I=m.coords.accuracy,T=this._map.getBearing(),E=r.extend({bearing:T},this.options.fitBoundsOptions);this._map.fitBounds(y.toBounds(I),E,{geolocateSource:!0})},p.prototype._updateMarker=function(m){if(m){var y=new r.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(y).addTo(this._map),this._userLocationDotMarker.setLngLat(y).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},p.prototype._updateCircleRadius=function(){var m=this._map._container.clientHeight/2,y=this._map.unproject([0,m]),I=this._map.unproject([1,m]),T=y.distanceTo(I),E=Math.ceil(2*this._accuracy/T);this._circleElement.style.width=E+"px",this._circleElement.style.height=E+"px"},p.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},p.prototype._onError=function(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&Mc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new r.Event("error",m)),this._finish()}},p.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},p.prototype._setupUI=function(m){var y=this;if(this._container.addEventListener("contextmenu",function(E){return E.preventDefault()}),this._geolocateButton=c.create("button","mapboxgl-ctrl-geolocate",this._container),c.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",m===!1){r.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var I=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=I,this._geolocateButton.setAttribute("aria-label",I)}else{var T=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=T,this._geolocateButton.setAttribute("aria-label",T)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=c.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new c_(this._dotElement),this._circleElement=c.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new c_({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(E){E.geolocateSource||y._watchState!=="ACTIVE_LOCK"||E.originalEvent&&E.originalEvent.type==="resize"||(y._watchState="BACKGROUND",y._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),y._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),y.fire(new r.Event("trackuserlocationend")))})},p.prototype.trigger=function(){if(!this._setup)return r.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new r.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bd--,Mc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new r.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new r.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Bd>1?(m={maximumAge:6e5,timeout:0},Mc=!0):(m=this.options.positionOptions,Mc=!1),this._geolocationWatchID=r.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else r.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},p.prototype._clearWatch=function(){r.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},p}(r.Evented),Au={maxWidth:100,unit:"metric"},Su=function(_){this.options=r.extend({},Au,_),r.bindAll(["_onMove","setUnit"],this)};function qm(_,p,m){var y=m&&m.maxWidth||100,I=_._container.clientHeight/2,T=_.unproject([0,I]),E=_.unproject([y,I]),k=T.distanceTo(E);if(m&&m.unit==="imperial"){var F=3.2808*k;F>5280?Tu(p,y,F/5280,_._getUIString("ScaleControl.Miles")):Tu(p,y,F,_._getUIString("ScaleControl.Feet"))}else m&&m.unit==="nautical"?Tu(p,y,k/1852,_._getUIString("ScaleControl.NauticalMiles")):k>=1e3?Tu(p,y,k/1e3,_._getUIString("ScaleControl.Kilometers")):Tu(p,y,k,_._getUIString("ScaleControl.Meters"))}function Tu(_,p,m,y){var I,T,E,k=(I=m,(T=Math.pow(10,(""+Math.floor(I)).length-1))*(E=(E=I/T)>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(F){var U=Math.pow(10,Math.ceil(-Math.log(F)/Math.LN10));return Math.round(F*U)/U}(E)));_.style.width=p*(k/m)+"px",_.innerHTML=k+"&nbsp;"+y}Su.prototype.getDefaultPosition=function(){return"bottom-left"},Su.prototype._onMove=function(){qm(this._map,this._container,this.options)},Su.prototype.onAdd=function(_){return this._map=_,this._container=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Su.prototype.onRemove=function(){c.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Su.prototype.setUnit=function(_){this.options.unit=_,qm(this._map,this._container,this.options)};var mo=function(_){this._fullscreen=!1,_&&_.container&&(_.container instanceof r.window.HTMLElement?this._container=_.container:r.warnOnce("Full screen control 'container' must be a DOM element.")),r.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.window.document&&(this._fullscreenchange="MSFullscreenChange")};mo.prototype.onAdd=function(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=c.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",r.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},mo.prototype.onRemove=function(){c.remove(this._controlContainer),this._map=null,r.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},mo.prototype._checkFullscreenSupport=function(){return!!(r.window.document.fullscreenEnabled||r.window.document.mozFullScreenEnabled||r.window.document.msFullscreenEnabled||r.window.document.webkitFullscreenEnabled)},mo.prototype._setupUI=function(){var _=this._fullscreenButton=c.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);c.create("span","mapboxgl-ctrl-icon",_).setAttribute("aria-hidden",!0),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},mo.prototype._updateTitle=function(){var _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_},mo.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},mo.prototype._isFullscreen=function(){return this._fullscreen},mo.prototype._changeIcon=function(){(r.window.document.fullscreenElement||r.window.document.mozFullScreenElement||r.window.document.webkitFullscreenElement||r.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},mo.prototype._onClickFullscreen=function(){this._isFullscreen()?r.window.document.exitFullscreen?r.window.document.exitFullscreen():r.window.document.mozCancelFullScreen?r.window.document.mozCancelFullScreen():r.window.document.msExitFullscreen?r.window.document.msExitFullscreen():r.window.document.webkitCancelFullScreen&&r.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Nf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},d_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Df=function(_){function p(m){_.call(this),this.options=r.extend(Object.create(Nf),m),r.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return _&&(p.__proto__=_),(p.prototype=Object.create(_&&_.prototype)).constructor=p,p.prototype.addTo=function(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new r.Event("open")),this},p.prototype.isOpen=function(){return!!this._map},p.prototype.remove=function(){return this._content&&c.remove(this._content),this._container&&(c.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new r.Event("close")),this},p.prototype.getLngLat=function(){return this._lngLat},p.prototype.setLngLat=function(m){return this._lngLat=r.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},p.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},p.prototype.getElement=function(){return this._container},p.prototype.setText=function(m){return this.setDOMContent(r.window.document.createTextNode(m))},p.prototype.setHTML=function(m){var y,I=r.window.document.createDocumentFragment(),T=r.window.document.createElement("body");for(T.innerHTML=m;y=T.firstChild;)I.appendChild(y);return this.setDOMContent(I)},p.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},p.prototype.setMaxWidth=function(m){return this.options.maxWidth=m,this._update(),this},p.prototype.setDOMContent=function(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=c.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this},p.prototype.addClassName=function(m){this._container&&this._container.classList.add(m)},p.prototype.removeClassName=function(m){this._container&&this._container.classList.remove(m)},p.prototype.setOffset=function(m){return this.options.offset=m,this._update(),this},p.prototype.toggleClassName=function(m){if(this._container)return this._container.classList.toggle(m)},p.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=c.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},p.prototype._onMouseUp=function(m){this._update(m.point)},p.prototype._onMouseMove=function(m){this._update(m.point)},p.prototype._onDrag=function(m){this._update(m.point)},p.prototype._update=function(m){var y=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=c.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=c.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(ee){return y._container.classList.add(ee)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Od(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||m)){var I=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat),T=this.options.anchor,E=function ee(ie){if(ie){if(typeof ie=="number"){var ge=Math.round(Math.sqrt(.5*Math.pow(ie,2)));return{center:new r.Point(0,0),top:new r.Point(0,ie),"top-left":new r.Point(ge,ge),"top-right":new r.Point(-ge,ge),bottom:new r.Point(0,-ie),"bottom-left":new r.Point(ge,-ge),"bottom-right":new r.Point(-ge,-ge),left:new r.Point(ie,0),right:new r.Point(-ie,0)}}if(ie instanceof r.Point||Array.isArray(ie)){var me=r.Point.convert(ie);return{center:me,top:me,"top-left":me,"top-right":me,bottom:me,"bottom-left":me,"bottom-right":me,left:me,right:me}}return{center:r.Point.convert(ie.center||[0,0]),top:r.Point.convert(ie.top||[0,0]),"top-left":r.Point.convert(ie["top-left"]||[0,0]),"top-right":r.Point.convert(ie["top-right"]||[0,0]),bottom:r.Point.convert(ie.bottom||[0,0]),"bottom-left":r.Point.convert(ie["bottom-left"]||[0,0]),"bottom-right":r.Point.convert(ie["bottom-right"]||[0,0]),left:r.Point.convert(ie.left||[0,0]),right:r.Point.convert(ie.right||[0,0])}}return ee(new r.Point(0,0))}(this.options.offset);if(!T){var k,F=this._container.offsetWidth,U=this._container.offsetHeight;k=I.y+E.bottom.y<U?["top"]:I.y>this._map.transform.height-U?["bottom"]:[],I.x<F/2?k.push("left"):I.x>this._map.transform.width-F/2&&k.push("right"),T=k.length===0?"bottom":k.join("-")}var $=I.add(E[T]).round();c.setTransform(this._container,cl[T]+" translate("+$.x+"px,"+$.y+"px)"),Km(this._container,T,"popup")}},p.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var m=this._container.querySelector(d_);m&&m.focus()}},p.prototype._onClose=function(){this.remove()},p}(r.Evented),jm={version:r.version,supported:l,setRTLTextPlugin:r.setRTLTextPlugin,getRTLTextPluginStatus:r.getRTLTextPluginStatus,Map:mb,NavigationControl:Wl,GeolocateControl:Ff,AttributionControl:Yr,ScaleControl:Su,FullscreenControl:mo,Popup:Df,Marker:c_,Style:vs,LngLat:r.LngLat,LngLatBounds:r.LngLatBounds,Point:r.Point,MercatorCoordinate:r.MercatorCoordinate,Evented:r.Evented,config:r.config,prewarm:function(){Ye().acquire(Xe)},clearPrewarmedResources:function(){var _=Pt;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(Xe),Pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return r.config.ACCESS_TOKEN},set accessToken(_){r.config.ACCESS_TOKEN=_},get baseApiUrl(){return r.config.API_URL},set baseApiUrl(_){r.config.API_URL=_},get workerCount(){return nt.workerCount},set workerCount(_){nt.workerCount=_},get maxParallelImageRequests(){return r.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(_){r.config.MAX_PARALLEL_IMAGE_REQUESTS=_},clearStorage:function(_){r.clearTileCache(_)},workerUrl:""};return jm}),n})})(N7);var NY=N7.exports;const QL=FY(NY);class d3 extends Sm{constructor(e){const t=Object.assign({},e);delete t.accessToken,delete t.style,delete t.container,delete t.xyz,super(t),this.set("xyz",e.maplibreOptions.xyz),this.set("xyz_custom",e.maplibreOptions.xyz_custom),this.xyz_=e.xyz,e.accessToken&&(QL.accessToken=e.accessToken),this.map_=new QL.Map({container:e.maplibreOptions.container,style:e.maplibreOptions.style,attributionControl:!1,interactive:!1}),this.maplibreMap=this.map_}getMapBoxMap(){return this.map_}getMapLibreMap(){return this.map_}render(e){const t=this.map_.getCanvas(),i=e.viewState;t.style.position="absolute";const n=this.getVisible();t.style.display=n?"block":"none";const s=this.getOpacity().toString();s!==t.style.opacity&&(t.style.opacity=s);const r=i.rotation;return r&&this.map_.rotateTo(sm(-r),{animate:!1}),this.map_.jumpTo({center:Pp(i.center),zoom:i.zoom-1,animate:!1}),this.map_._frame&&(this.map_._frame.cancel(),this.map_._frame=null),this.map_._render(),t}setLayerVisibility(e,t){this.map_.setLayoutProperty(e,"visibility",t?"visible":"none")}getStyle(){return this.map_.getStyle()}getXYZ(){return this.get("xyz")}}function D7(a,e,t){t(a,e)&&a instanceof rf&&a.getLayers().forEach(n=>{D7(n,[...e,a],t)})}const V7=parseInt("19",10),DY=parseInt("8",10);var h3=(a=>(a.ON_LAYER_TYPE="ON_LAYER_TYPE",a))(h3||{});const tm="EPSG:3857",Dp="EPSG:4326",cu="EPSG:2169",VY=JSON.parse("[2.6, 47.7, 8.6, 51]"),ZY=parseInt("8",10);let DC;const $L=Wi();function zi(){function a(){return DC}function e(){return $L.value=DC=new BY({view:new Vu({center:[682439,6379152],constrainResolution:!0,enableRotation:!0,extent:Dk(VY,"EPSG:4326","EPSG:3857"),multiWorld:!1,zoom:ZY}),controls:[],keyboardEventTarget:document}),DC}function t(v,C){return v.id===C.id}function i(v,C){return v===C}function n(v,C){var S;return(S=v.layers)==null?void 0:S.some(L=>t(L,C))}function s(v,C){var L;const S=(L=v==null?void 0:v.layers)==null?void 0:L.find(R=>t(R,C));return!i(S,C)}function r(v,C){return!(C===null||!("layers"in v)||!("layers"in C)||typeof C.layers>"u"||typeof v.layers>"u"||v.layers===C.layers)}function l(v,C){return!("layers"in v)||typeof v.layers>"u"?[]:C===null||!("layers"in C)?v.layers.map((S,L)=>({layer:S,position:L})):v.layers===C.layers?[]:v.layers.reduce((S,L,R)=>n(C,L)?S:[...S,{layer:L,position:R}],[])}function c(v,C){return r(v,C)?C.layers.reduce((S,L)=>n(v,L)?S:[...S,L],[]):[]}function h(v,C){return r(v,C)?v.layers.reduce((S,L)=>s(C,L)?[...S,L]:S,[]):[]}function g(v,C,S){var G,O;const L=(G=C.layers)==null?void 0:G.find(V=>V.id===v),R=(O=S==null?void 0:S.layers)==null?void 0:O.find(V=>V.id===v);return(L==null?void 0:L.type)!==(R==null?void 0:R.type)?h3.ON_LAYER_TYPE:null}function b(){const v=zi().getOlMap();v.updateSize(),D7(v.getLayerGroup(),[],C=>(C instanceof d3&&C.getMapLibreMap().resize(),!0))}return{olMap:$L,getOlMap:a,createMap:e,equalsLayer:t,hasLayer:n,layerHasChanged:s,contextHasChanged:r,getAddedLayers:l,getRemovedLayers:c,getMutatedLayers:h,getMutationType:g,resize:b}}function zY(a,e="fr-FR"){const t=new Date(a);return new Intl.DateTimeFormat(e).format(t)}function UY(a,e,t){if(a==null||isNaN(a))return _n.t("N/A",{ns:"client"});switch(t){case"elevation":return _3(a,e);case"area":return Z7(a,e);case"length":default:return U0(a,e)}}function _3(a,e=0){return isNaN(+a)?a:`${(+a).toFixed(e)} m`}function U0(a,e=2){return a===null?_n.t("N/A",{ns:"client"}):a<1e3?`${a.toFixed(e)} m`:a>=1e3?`${(a/1e3).toFixed(e)} km`:""}function Z7(a,e=2){return a===null?_n.t("N/A",{ns:"client"}):a<1e6?`${a.toFixed(e)} m²`:a>=1e6?`${(a/1e6).toFixed(e)} km²`:""}function eR(a){return a===void 0?_n.t("N/A",{ns:"client"}):`${a.number}, ${a.street}, ${a.postal_code} ${a.locality}`}function XY(a,e,t){const i=t.split(":")[2];let n=t,s;i!==void 0?n=t.slice(0,t.lastIndexOf(":")):t.endsWith("*")&&(s=Pp(a,e)[0]<=6?"UTM31N":"UTM32N",n=t.replace("3*",s.slice(3,5)));const r=Ns(a,e,n),l=n===Dp,c=r.map((g,b)=>(l?HY(g):g)<0?"WS"[b]:"EN"[b]),h=r.map(g=>l?YY(g,i):Math.abs(Math.round(g)).toString());return s!==void 0?`${h.join(" | ")}  (${s})`:h.map((g,b)=>`${g} ${c[b]}`).join(" | ")}function HY(a){return(a+180)%360-180}function YY(a,e){const t=(a+180)%360-180,i=Math.abs(t);if(e===void 0)return Math.round(i*1e6)/1e6;const n=Math.floor(i),s=i%1*60;if(e==="DMm"){const r=Math.round(s*1e6)/1e6;return`${n}° ${r}′`}if(e==="DMS"){const r=Math.floor(s),l=Math.round(s%1*600)/10;return`${n}° ${r}′ ${l}″`}return"N/A"}const KY={install(a){a.directive("format-measure",qY)}};function qY(a,e){let t,i=e.value;const n=(e==null?void 0:e.arg)!==void 0?+(e==null?void 0:e.arg):void 0;try{t=Object.keys(e.modifiers)[0]}catch{}i=UY(i,n,t),a.textContent=i}let jY=null;function JY(a){jY=a;const e=Object.keys(a.defs),t=e.length;let i,n;for(i=0;i<t;++i){const s=e[i];if(!a2(s)){const r=a.defs(s);let l=r.units;!l&&r.projName==="longlat"&&(l="degrees"),H2(new Aw({code:s,axisOrientation:r.axis,metersPerUnit:r.to_meter,units:l}))}}for(i=0;i<t;++i){const s=e[i],r=a2(s);for(n=0;n<t;++n){const l=e[n],c=a2(l);if(!i2(s,l))if(a.defs[s]===a.defs[l])bS([r,c]);else{const h=a(s,l);gU(r,c,CL(r,c,h.forward),CL(c,r,h.inverse))}}}}function QY(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)a("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),a("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}var mm=1,gm=2,vp=3,$Y=4,WS=5,tR=6378137,eK=6356752314e-3,aR=.0066943799901413165,s0=484813681109536e-20,Ct=Math.PI/2,tK=.16666666666666666,aK=.04722222222222222,iK=.022156084656084655,Ht=1e-10,ms=.017453292519943295,Xu=57.29577951308232,en=Math.PI/4,X0=Math.PI*2,vr=3.14159265359,Oo={};Oo.greenwich=0;Oo.lisbon=-9.131906111111;Oo.paris=2.337229166667;Oo.bogota=-74.080916666667;Oo.madrid=-3.687938888889;Oo.rome=12.452333333333;Oo.bern=7.439583333333;Oo.jakarta=106.807719444444;Oo.ferro=-17.666666666667;Oo.brussels=4.367975;Oo.stockholm=18.058277777778;Oo.athens=23.7163375;Oo.oslo=10.722916666667;const nK={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var iR=/[\s_\-\/\(\)]/g;function Lh(a,e){if(a[e])return a[e];for(var t=Object.keys(a),i=e.toLowerCase().replace(iR,""),n=-1,s,r;++n<t.length;)if(s=t[n],r=s.toLowerCase().replace(iR,""),r===i)return a[s]}function GS(a){var e={},t=a.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,c){var h=c.split("=");return h.push(!0),l[h[0].toLowerCase()]=h[1],l},{}),i,n,s,r={proj:"projName",datum:"datumCode",rf:function(l){e.rf=parseFloat(l)},lat_0:function(l){e.lat0=l*ms},lat_1:function(l){e.lat1=l*ms},lat_2:function(l){e.lat2=l*ms},lat_ts:function(l){e.lat_ts=l*ms},lon_0:function(l){e.long0=l*ms},lon_1:function(l){e.long1=l*ms},lon_2:function(l){e.long2=l*ms},alpha:function(l){e.alpha=parseFloat(l)*ms},gamma:function(l){e.rectified_grid_angle=parseFloat(l)},lonc:function(l){e.longc=l*ms},x_0:function(l){e.x0=parseFloat(l)},y_0:function(l){e.y0=parseFloat(l)},k_0:function(l){e.k0=parseFloat(l)},k:function(l){e.k0=parseFloat(l)},a:function(l){e.a=parseFloat(l)},b:function(l){e.b=parseFloat(l)},r:function(l){e.a=e.b=parseFloat(l)},r_a:function(){e.R_A=!0},zone:function(l){e.zone=parseInt(l,10)},south:function(){e.utmSouth=!0},towgs84:function(l){e.datum_params=l.split(",").map(function(c){return parseFloat(c)})},to_meter:function(l){e.to_meter=parseFloat(l)},units:function(l){e.units=l;var c=Lh(nK,l);c&&(e.to_meter=c.to_meter)},from_greenwich:function(l){e.from_greenwich=l*ms},pm:function(l){var c=Lh(Oo,l);e.from_greenwich=(c||parseFloat(l))*ms},nadgrids:function(l){l==="@null"?e.datumCode="none":e.nadgrids=l},axis:function(l){var c="ewnsud";l.length===3&&c.indexOf(l.substr(0,1))!==-1&&c.indexOf(l.substr(1,1))!==-1&&c.indexOf(l.substr(2,1))!==-1&&(e.axis=l)},approx:function(){e.approx=!0}};for(i in t)n=t[i],i in r?(s=r[i],typeof s=="function"?s(n):e[s]=n):e[i]=n;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var H0=1,z7=2,U7=3,rx=4,X7=5,m3=-1,rK=/\s/,sK=/[A-Za-z]/,oK=/[A-Za-z84_]/,Dw=/[,\]]/,H7=/[\d\.E\-\+]/;function wd(a){if(typeof a!="string")throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=H0}wd.prototype.readCharicter=function(){var a=this.text[this.place++];if(this.state!==rx)for(;rK.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case H0:return this.neutral(a);case z7:return this.keyword(a);case rx:return this.quoted(a);case X7:return this.afterquote(a);case U7:return this.number(a);case m3:return}};wd.prototype.afterquote=function(a){if(a==='"'){this.word+='"',this.state=rx;return}if(Dw.test(a)){this.word=this.word.trim(),this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in afterquote yet, index '+this.place)};wd.prototype.afterItem=function(a){if(a===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=H0;return}if(a==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=H0,this.currentObject=this.stack.pop(),this.currentObject||(this.state=m3);return}};wd.prototype.number=function(a){if(H7.test(a)){this.word+=a;return}if(Dw.test(a)){this.word=parseFloat(this.word),this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in number yet, index '+this.place)};wd.prototype.quoted=function(a){if(a==='"'){this.state=X7;return}this.word+=a};wd.prototype.keyword=function(a){if(oK.test(a)){this.word+=a;return}if(a==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=H0;return}if(Dw.test(a)){this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in keyword yet, index '+this.place)};wd.prototype.neutral=function(a){if(sK.test(a)){this.word=a,this.state=z7;return}if(a==='"'){this.word="",this.state=rx;return}if(H7.test(a)){this.word=a,this.state=U7;return}if(Dw.test(a)){this.afterItem(a);return}throw new Error(`havn't handled "`+a+'" in neutral yet, index '+this.place)};wd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===m3)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function lK(a){var e=new wd(a);return e.output()}function VC(a,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var i=e?{}:a,n=t.reduce(function(s,r){return ep(r,s),s},i);e&&(a[e]=n)}function ep(a,e){if(!Array.isArray(a)){e[a]=!0;return}var t=a.shift();if(t==="PARAMETER"&&(t=a.shift()),a.length===1){if(Array.isArray(a[0])){e[t]={},ep(a[0],e[t]);return}e[t]=a[0];return}if(!a.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=a;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(a);return}Array.isArray(t)||(e[t]={});var i;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:a[0].toLowerCase(),convert:a[1]},a.length===3&&ep(a[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:a[0],a:a[1],rf:a[2]},a.length===4&&ep(a[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":a[0]=["name",a[0]],VC(e,t,a);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":a[0]=["name",a[0]],VC(e,t,a),e[t].type=t;return;default:for(i=-1;++i<a.length;)if(!Array.isArray(a[i]))return ep(a,e[t]);return VC(e,t,a)}}var uK=.017453292519943295,cK=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function dK(a,e){var t=e[0],i=e[1];!(t in a)&&i in a&&(a[t]=a[i],e.length===3&&(a[t]=e[2](a[t])))}function Fu(a){return a*uK}function Y7(a){for(var e=Object.keys(a),t=0,i=e.length;t<i;++t){var n=e[t];cK.indexOf(n)!==-1&&hK(a[n]),typeof a[n]=="object"&&Y7(a[n])}}function hK(a){if(a.AUTHORITY){var e=Object.keys(a.AUTHORITY)[0];e&&e in a.AUTHORITY&&(a.title=e+":"+a.AUTHORITY[e])}if(a.type==="GEOGCS"?a.projName="longlat":a.type==="LOCAL_CS"?(a.projName="identity",a.local=!0):typeof a.PROJECTION=="object"?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.AXIS){for(var t="",i=0,n=a.AXIS.length;i<n;++i){var s=[a.AXIS[i][0].toLowerCase(),a.AXIS[i][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(a.axis=t)}a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),a.units==="metre"&&(a.units="meter"),a.UNIT.convert&&(a.type==="GEOGCS"?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):a.to_meter=a.UNIT.convert));var r=a.GEOGCS;a.type==="GEOGCS"&&(r=a),r&&(r.DATUM?a.datumCode=r.DATUM.name.toLowerCase():a.datumCode=r.name.toLowerCase(),a.datumCode.slice(0,2)==="d_"&&(a.datumCode=a.datumCode.slice(2)),a.datumCode==="new_zealand_1949"&&(a.datumCode="nzgd49"),(a.datumCode==="wgs_1984"||a.datumCode==="world_geodetic_system_1984")&&(a.PROJECTION==="Mercator_Auxiliary_Sphere"&&(a.sphere=!0),a.datumCode="wgs84"),a.datumCode==="belge_1972"&&(a.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(a.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),a.ellps.toLowerCase().slice(0,13)==="international"&&(a.ellps="intl"),a.a=r.DATUM.SPHEROID.a,a.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(a.datum_params=r.DATUM.TOWGS84),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36"),~a.datumCode.indexOf("osni_1952")&&(a.datumCode="osni52"),(~a.datumCode.indexOf("tm65")||~a.datumCode.indexOf("geodetic_datum_of_1965"))&&(a.datumCode="ire65"),a.datumCode==="ch1903+"&&(a.datumCode="ch1903"),~a.datumCode.indexOf("israel")&&(a.datumCode="isr93")),a.b&&!isFinite(a.b)&&(a.b=a.a);function l(g){var b=a.to_meter||1;return g*b}var c=function(g){return dK(a,g)},h=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Fu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Fu],["x0","false_easting",l],["y0","false_northing",l],["long0","central_meridian",Fu],["lat0","latitude_of_origin",Fu],["lat0","standard_parallel_1",Fu],["lat1","standard_parallel_1",Fu],["lat2","standard_parallel_2",Fu],["azimuth","Azimuth"],["alpha","azimuth",Fu],["srsCode","name"]];h.forEach(c),!a.long0&&a.longc&&(a.projName==="Albers_Conic_Equal_Area"||a.projName==="Lambert_Azimuthal_Equal_Area")&&(a.long0=a.longc),!a.lat_ts&&a.lat1&&(a.projName==="Stereographic_South_Pole"||a.projName==="Polar Stereographic (variant B)")?(a.lat0=Fu(a.lat1>0?90:-90),a.lat_ts=a.lat1):!a.lat_ts&&a.lat0&&a.projName==="Polar_Stereographic"&&(a.lat_ts=a.lat0,a.lat0=Fu(a.lat0>0?90:-90))}function K7(a){var e=lK(a),t=e[0],i={};return ep(e,i),Y7(i),i[t]}function Js(a){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?Js[a]=GS(arguments[1]):Js[a]=K7(arguments[1]):Js[a]=t}else if(arguments.length===1){if(Array.isArray(a))return a.map(function(i){Array.isArray(i)?Js.apply(e,i):Js(i)});if(typeof a=="string"){if(a in Js)return Js[a]}else"EPSG"in a?Js["EPSG:"+a.EPSG]=a:"ESRI"in a?Js["ESRI:"+a.ESRI]=a:"IAU2000"in a?Js["IAU2000:"+a.IAU2000]=a:console.log(a);return}}QY(Js);function _K(a){return typeof a=="string"}function mK(a){return a in Js}var gK=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function pK(a){return gK.some(function(e){return a.indexOf(e)>-1})}var fK=["3857","900913","3785","102113"];function yK(a){var e=Lh(a,"authority");if(e){var t=Lh(e,"epsg");return t&&fK.indexOf(t)>-1}}function bK(a){var e=Lh(a,"extension");if(e)return Lh(e,"proj4")}function vK(a){return a[0]==="+"}function xK(a){if(_K(a)){if(mK(a))return Js[a];if(pK(a)){var e=K7(a);if(yK(e))return Js["EPSG:3857"];var t=bK(e);return t?GS(t):e}if(vK(a))return GS(a)}else return a}function nR(a,e){a=a||{};var t,i;if(!e)return a;for(i in e)t=e[i],t!==void 0&&(a[i]=t);return a}function sc(a,e,t){var i=a*e;return t/Math.sqrt(1-i*i)}function f1(a){return a<0?-1:1}function Jt(a){return Math.abs(a)<=vr?a:a-f1(a)*X0}function $l(a,e,t){var i=a*t,n=.5*a;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(Ct-e))/i}function Y0(a,e){for(var t=.5*a,i,n,s=Ct-2*Math.atan(e),r=0;r<=15;r++)if(i=a*Math.sin(s),n=Ct-2*Math.atan(e*Math.pow((1-i)/(1+i),t))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function wK(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=sc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function IK(a){var e=a.x,t=a.y;if(t*Xu>90&&t*Xu<-90&&e*Xu>180&&e*Xu<-180)return null;var i,n;if(Math.abs(Math.abs(t)-Ct)<=Ht)return null;if(this.sphere)i=this.x0+this.a*this.k0*Jt(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(en+.5*t));else{var s=Math.sin(t),r=$l(this.e,t,s);i=this.x0+this.a*this.k0*Jt(e-this.long0),n=this.y0-this.a*this.k0*Math.log(r)}return a.x=i,a.y=n,a}function CK(a){var e=a.x-this.x0,t=a.y-this.y0,i,n;if(this.sphere)n=Ct-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(n=Y0(this.e,s),n===-9999)return null}return i=Jt(this.long0+e/(this.a*this.k0)),a.x=i,a.y=n,a}var AK=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const SK={init:wK,forward:IK,inverse:CK,names:AK};function TK(){}function rR(a){return a}var EK=["longlat","identity"];const MK={init:TK,forward:rR,inverse:rR,names:EK};var LK=[SK,MK],r2={},sx=[];function q7(a,e){var t=sx.length;return a.names?(sx[t]=a,a.names.forEach(function(i){r2[i.toLowerCase()]=t}),this):(console.log(e),!0)}function RK(a){if(!a)return!1;var e=a.toLowerCase();if(typeof r2[e]<"u"&&sx[r2[e]])return sx[r2[e]]}function kK(){LK.forEach(q7)}const WK={start:kK,add:q7,get:RK};var ai={};ai.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};ai.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};ai.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};ai.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};ai.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};ai.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};ai.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};ai.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};ai.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};ai.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};ai.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};ai.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};ai.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};ai.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};ai.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};ai.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};ai.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};ai.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};ai.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};ai.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};ai.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};ai.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};ai.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};ai.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};ai.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};ai.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};ai.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};ai.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};ai.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};ai.hough={a:6378270,rf:297,ellipseName:"Hough"};ai.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};ai.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};ai.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};ai.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};ai.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};ai.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};ai.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};ai.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};ai.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};ai.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};ai.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};ai.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var GK=ai.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};ai.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function OK(a,e,t,i){var n=a*a,s=e*e,r=(n-s)/n,l=0;i?(a*=1-r*(tK+r*(aK+r*iK)),n=a*a,r=0):l=Math.sqrt(r);var c=(n-s)/s;return{es:r,e:l,ep2:c}}function PK(a,e,t,i,n){if(!a){var s=Lh(ai,i);s||(s=GK),a=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*a),(t===0||Math.abs(a-e)<Ht)&&(n=!0,e=a),{a,b:e,rf:t,sphere:n}}var s2={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var BK in s2){var sR=s2[BK];s2[sR.datumName]=sR}function FK(a,e,t,i,n,s,r){var l={};return a===void 0||a==="none"?l.datum_type=WS:l.datum_type=$Y,e&&(l.datum_params=e.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=mm),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=gm,l.datum_params[3]*=s0,l.datum_params[4]*=s0,l.datum_params[5]*=s0,l.datum_params[6]=l.datum_params[6]/1e6+1)),r&&(l.datum_type=vp,l.grids=r),l.a=t,l.b=i,l.es=n,l.ep2=s,l}var j7={};function NK(a,e){var t=new DataView(e),i=ZK(t),n=zK(t,i),s=UK(t,n,i),r={header:n,subgrids:s};return j7[a]=r,r}function DK(a){if(a===void 0)return null;var e=a.split(",");return e.map(VK)}function VK(a){if(a.length===0)return null;var e=a[0]==="@";return e&&(a=a.slice(1)),a==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:a,mandatory:!e,grid:j7[a]||null,isNull:!1}}function tp(a){return a/3600*Math.PI/180}function ZK(a){var e=a.getInt32(8,!1);return e===11?!1:(e=a.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function zK(a,e){return{nFields:a.getInt32(8,e),nSubgridFields:a.getInt32(24,e),nSubgrids:a.getInt32(40,e),shiftType:OS(a,56,56+8).trim(),fromSemiMajorAxis:a.getFloat64(120,e),fromSemiMinorAxis:a.getFloat64(136,e),toSemiMajorAxis:a.getFloat64(152,e),toSemiMinorAxis:a.getFloat64(168,e)}}function OS(a,e,t){return String.fromCharCode.apply(null,new Uint8Array(a.buffer.slice(e,t)))}function UK(a,e,t){for(var i=176,n=[],s=0;s<e.nSubgrids;s++){var r=HK(a,i,t),l=YK(a,i,r,t),c=Math.round(1+(r.upperLongitude-r.lowerLongitude)/r.longitudeInterval),h=Math.round(1+(r.upperLatitude-r.lowerLatitude)/r.latitudeInterval);n.push({ll:[tp(r.lowerLongitude),tp(r.lowerLatitude)],del:[tp(r.longitudeInterval),tp(r.latitudeInterval)],lim:[c,h],count:r.gridNodeCount,cvs:XK(l)}),i+=176+r.gridNodeCount*16}return n}function XK(a){return a.map(function(e){return[tp(e.longitudeShift),tp(e.latitudeShift)]})}function HK(a,e,t){return{name:OS(a,e+8,e+16).trim(),parent:OS(a,e+24,e+24+8).trim(),lowerLatitude:a.getFloat64(e+72,t),upperLatitude:a.getFloat64(e+88,t),lowerLongitude:a.getFloat64(e+104,t),upperLongitude:a.getFloat64(e+120,t),latitudeInterval:a.getFloat64(e+136,t),longitudeInterval:a.getFloat64(e+152,t),gridNodeCount:a.getInt32(e+168,t)}}function YK(a,e,t,i){for(var n=e+176,s=16,r=[],l=0;l<t.gridNodeCount;l++){var c={latitudeShift:a.getFloat32(n+l*s,i),longitudeShift:a.getFloat32(n+l*s+4,i),latitudeAccuracy:a.getFloat32(n+l*s+8,i),longitudeAccuracy:a.getFloat32(n+l*s+12,i)};r.push(c)}return r}function Ju(a,e){if(!(this instanceof Ju))return new Ju(a);e=e||function(h){if(h)throw h};var t=xK(a);if(typeof t!="object"){e("Could not parse to valid json: "+a);return}var i=Ju.projections.get(t.projName);if(!i){e("Could not get projection name from: "+a);return}if(t.datumCode&&t.datumCode!=="none"){var n=Lh(s2,t.datumCode);n&&(t.datum_params=t.datum_params||(n.towgs84?n.towgs84.split(","):null),t.ellps=n.ellipse,t.datumName=n.datumName?n.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=PK(t.a,t.b,t.rf,t.ellps,t.sphere),r=OK(s.a,s.b,s.rf,t.R_A),l=DK(t.nadgrids),c=t.datum||FK(t.datumCode,t.datum_params,s.a,s.b,r.es,r.ep2,l);nR(this,t),nR(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=r.es,this.e=r.e,this.ep2=r.ep2,this.datum=c,this.init(),e(null,this)}Ju.projections=WK;Ju.projections.start();function KK(a,e){return a.datum_type!==e.datum_type||a.a!==e.a||Math.abs(a.es-e.es)>5e-11?!1:a.datum_type===mm?a.datum_params[0]===e.datum_params[0]&&a.datum_params[1]===e.datum_params[1]&&a.datum_params[2]===e.datum_params[2]:a.datum_type===gm?a.datum_params[0]===e.datum_params[0]&&a.datum_params[1]===e.datum_params[1]&&a.datum_params[2]===e.datum_params[2]&&a.datum_params[3]===e.datum_params[3]&&a.datum_params[4]===e.datum_params[4]&&a.datum_params[5]===e.datum_params[5]&&a.datum_params[6]===e.datum_params[6]:!0}function J7(a,e,t){var i=a.x,n=a.y,s=a.z?a.z:0,r,l,c,h;if(n<-Ct&&n>-1.001*Ct)n=-Ct;else if(n>Ct&&n<1.001*Ct)n=Ct;else{if(n<-Ct)return{x:-1/0,y:-1/0,z:a.z};if(n>Ct)return{x:1/0,y:1/0,z:a.z}}return i>Math.PI&&(i-=2*Math.PI),l=Math.sin(n),h=Math.cos(n),c=l*l,r=t/Math.sqrt(1-e*c),{x:(r+s)*h*Math.cos(i),y:(r+s)*h*Math.sin(i),z:(r*(1-e)+s)*l}}function Q7(a,e,t,i){var n=1e-12,s=n*n,r=30,l,c,h,g,b,v,C,S,L,R,G,O,V,B=a.x,z=a.y,j=a.z?a.z:0,re,ne,te;if(l=Math.sqrt(B*B+z*z),c=Math.sqrt(B*B+z*z+j*j),l/t<n){if(re=0,c/t<n)return ne=Ct,te=-i,{x:a.x,y:a.y,z:a.z}}else re=Math.atan2(z,B);h=j/c,g=l/c,b=1/Math.sqrt(1-e*(2-e)*g*g),S=g*(1-e)*b,L=h*b,V=0;do V++,C=t/Math.sqrt(1-e*L*L),te=l*S+j*L-C*(1-e*L*L),v=e*C/(C+te),b=1/Math.sqrt(1-v*(2-v)*g*g),R=g*(1-v)*b,G=h*b,O=G*S-R*L,S=R,L=G;while(O*O>s&&V<r);return ne=Math.atan(G/Math.abs(R)),{x:re,y:ne,z:te}}function qK(a,e,t){if(e===mm)return{x:a.x+t[0],y:a.y+t[1],z:a.z+t[2]};if(e===gm){var i=t[0],n=t[1],s=t[2],r=t[3],l=t[4],c=t[5],h=t[6];return{x:h*(a.x-c*a.y+l*a.z)+i,y:h*(c*a.x+a.y-r*a.z)+n,z:h*(-l*a.x+r*a.y+a.z)+s}}}function jK(a,e,t){if(e===mm)return{x:a.x-t[0],y:a.y-t[1],z:a.z-t[2]};if(e===gm){var i=t[0],n=t[1],s=t[2],r=t[3],l=t[4],c=t[5],h=t[6],g=(a.x-i)/h,b=(a.y-n)/h,v=(a.z-s)/h;return{x:g+c*b-l*v,y:-c*g+b+r*v,z:l*g-r*b+v}}}function dv(a){return a===mm||a===gm}function JK(a,e,t){if(KK(a,e)||a.datum_type===WS||e.datum_type===WS)return t;var i=a.a,n=a.es;if(a.datum_type===vp){var s=oR(a,!1,t);if(s!==0)return;i=tR,n=aR}var r=e.a,l=e.b,c=e.es;if(e.datum_type===vp&&(r=tR,l=eK,c=aR),n===c&&i===r&&!dv(a.datum_type)&&!dv(e.datum_type))return t;if(t=J7(t,n,i),dv(a.datum_type)&&(t=qK(t,a.datum_type,a.datum_params)),dv(e.datum_type)&&(t=jK(t,e.datum_type,e.datum_params)),t=Q7(t,c,r,l),e.datum_type===vp){var h=oR(e,!0,t);if(h!==0)return}return t}function oR(a,e,t){if(a.grids===null||a.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-t.x,y:t.y},n={x:Number.NaN,y:Number.NaN},s=[];e:for(var r=0;r<a.grids.length;r++){var l=a.grids[r];if(s.push(l.name),l.isNull){n=i;break}if(l.mandatory,l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}for(var c=l.grid.subgrids,h=0,g=c.length;h<g;h++){var b=c[h],v=(Math.abs(b.del[1])+Math.abs(b.del[0]))/1e4,C=b.ll[0]-v,S=b.ll[1]-v,L=b.ll[0]+(b.lim[0]-1)*b.del[0]+v,R=b.ll[1]+(b.lim[1]-1)*b.del[1]+v;if(!(S>i.y||C>i.x||R<i.y||L<i.x)&&(n=QK(i,e,b),!isNaN(n.x)))break e}}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Xu+" "+i.y*Xu+" tried: '"+s+"'"),-1):(t.x=-n.x,t.y=n.y,0)}function QK(a,e,t){var i={x:Number.NaN,y:Number.NaN};if(isNaN(a.x))return i;var n={x:a.x,y:a.y};n.x-=t.ll[0],n.y-=t.ll[1],n.x=Jt(n.x-Math.PI)+Math.PI;var s=lR(n,t);if(e){if(isNaN(s.x))return i;s.x=n.x-s.x,s.y=n.y-s.y;var r=9,l=1e-12,c,h;do{if(h=lR(s,t),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}c={x:n.x-(h.x+s.x),y:n.y-(h.y+s.y)},s.x+=c.x,s.y+=c.y}while(r--&&Math.abs(c.x)>l&&Math.abs(c.y)>l);if(r<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Jt(s.x+t.ll[0]),i.y=s.y+t.ll[1]}else isNaN(s.x)||(i.x=a.x+s.x,i.y=a.y+s.y);return i}function lR(a,e){var t={x:a.x/e.del[0],y:a.y/e.del[1]},i={x:Math.floor(t.x),y:Math.floor(t.y)},n={x:t.x-1*i.x,y:t.y-1*i.y},s={x:Number.NaN,y:Number.NaN},r;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return s;r=i.y*e.lim[0]+i.x;var l={x:e.cvs[r][0],y:e.cvs[r][1]};r++;var c={x:e.cvs[r][0],y:e.cvs[r][1]};r+=e.lim[0];var h={x:e.cvs[r][0],y:e.cvs[r][1]};r--;var g={x:e.cvs[r][0],y:e.cvs[r][1]},b=n.x*n.y,v=n.x*(1-n.y),C=(1-n.x)*(1-n.y),S=(1-n.x)*n.y;return s.x=C*l.x+v*c.x+S*g.x+b*h.x,s.y=C*l.y+v*c.y+S*g.y+b*h.y,s}function uR(a,e,t){var i=t.x,n=t.y,s=t.z||0,r,l,c,h={};for(c=0;c<3;c++)if(!(e&&c===2&&t.z===void 0))switch(c===0?(r=i,"ew".indexOf(a.axis[c])!==-1?l="x":l="y"):c===1?(r=n,"ns".indexOf(a.axis[c])!==-1?l="y":l="x"):(r=s,l="z"),a.axis[c]){case"e":h[l]=r;break;case"w":h[l]=-r;break;case"n":h[l]=r;break;case"s":h[l]=-r;break;case"u":t[l]!==void 0&&(h.z=r);break;case"d":t[l]!==void 0&&(h.z=-r);break;default:return null}return h}function $7(a){var e={x:a[0],y:a[1]};return a.length>2&&(e.z=a[2]),a.length>3&&(e.m=a[3]),e}function $K(a){cR(a.x),cR(a.y)}function cR(a){if(typeof Number.isFinite=="function"){if(Number.isFinite(a))return;throw new TypeError("coordinates must be finite numbers")}if(typeof a!="number"||a!==a||!isFinite(a))throw new TypeError("coordinates must be finite numbers")}function eq(a,e){return(a.datum.datum_type===mm||a.datum.datum_type===gm||a.datum.datum_type===vp)&&e.datumCode!=="WGS84"||(e.datum.datum_type===mm||e.datum.datum_type===gm||e.datum.datum_type===vp)&&a.datumCode!=="WGS84"}function ox(a,e,t,i){var n;Array.isArray(t)?t=$7(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if($K(t),a.datum&&e.datum&&eq(a,e)&&(n=new Ju("WGS84"),t=ox(a,n,t,i),a=n),i&&a.axis!=="enu"&&(t=uR(a,!1,t)),a.projName==="longlat")t={x:t.x*ms,y:t.y*ms,z:t.z||0};else if(a.to_meter&&(t={x:t.x*a.to_meter,y:t.y*a.to_meter,z:t.z||0}),t=a.inverse(t),!t)return;if(a.from_greenwich&&(t.x+=a.from_greenwich),t=JK(a.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*Xu,y:t.y*Xu,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),i&&e.axis!=="enu"?uR(e,!0,t):(t&&!s&&delete t.z,t)}var dR=Ju("WGS84");function ZC(a,e,t,i){var n,s,r;return Array.isArray(t)?(n=ox(a,e,t,i)||{x:NaN,y:NaN},t.length>2?typeof a.name<"u"&&a.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof n.z=="number"?[n.x,n.y,n.z].concat(t.slice(3)):[n.x,n.y,t[2]].concat(t.slice(3)):[n.x,n.y].concat(t.slice(2)):[n.x,n.y]):(s=ox(a,e,t,i),r=Object.keys(t),r.length===2||r.forEach(function(l){if(typeof a.name<"u"&&a.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;s[l]=t[l]}),s)}function hR(a){return a instanceof Ju?a:a.oProj?a.oProj:Ju(a)}function Bs(a,e,t){a=hR(a);var i=!1,n;return typeof e>"u"?(e=a,a=dR,i=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=a,a=dR,i=!0),e=hR(e),t?ZC(a,e,t):(n={forward:function(s,r){return ZC(a,e,s,r)},inverse:function(s,r){return ZC(e,a,s,r)}},i&&(n.oProj=e),n)}var _R=6,eW="AJSAJS",tW="AFAFAF",ap=65,xo=73,pl=79,Oy=86,Py=90;const tq={forward:aW,inverse:aq,toPoint:iW};function aW(a,e){return e=e||5,rq(iq({lat:a[1],lon:a[0]}),e)}function aq(a){var e=g3(rW(a.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function iW(a){var e=g3(rW(a.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function zC(a){return a*(Math.PI/180)}function mR(a){return 180*(a/Math.PI)}function iq(a){var e=a.lat,t=a.lon,i=6378137,n=.00669438,s=.9996,r,l,c,h,g,b,v,C=zC(e),S=zC(t),L,R;R=Math.floor((t+180)/6)+1,t===180&&(R=60),e>=56&&e<64&&t>=3&&t<12&&(R=32),e>=72&&e<84&&(t>=0&&t<9?R=31:t>=9&&t<21?R=33:t>=21&&t<33?R=35:t>=33&&t<42&&(R=37)),r=(R-1)*6-180+3,L=zC(r),l=n/(1-n),c=i/Math.sqrt(1-n*Math.sin(C)*Math.sin(C)),h=Math.tan(C)*Math.tan(C),g=l*Math.cos(C)*Math.cos(C),b=Math.cos(C)*(S-L),v=i*((1-n/4-3*n*n/64-5*n*n*n/256)*C-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*C)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*C)-35*n*n*n/3072*Math.sin(6*C));var G=s*c*(b+(1-h+g)*b*b*b/6+(5-18*h+h*h+72*g-58*l)*b*b*b*b*b/120)+5e5,O=s*(v+c*Math.tan(C)*(b*b/2+(5-h+9*g+4*g*g)*b*b*b*b/24+(61-58*h+h*h+600*g-330*l)*b*b*b*b*b*b/720));return e<0&&(O+=1e7),{northing:Math.round(O),easting:Math.round(G),zoneNumber:R,zoneLetter:nq(e)}}function g3(a){var e=a.northing,t=a.easting,i=a.zoneLetter,n=a.zoneNumber;if(n<0||n>60)return null;var s=.9996,r=6378137,l=.00669438,c,h=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),g,b,v,C,S,L,R,G,O,V=t-5e5,B=e;i<"N"&&(B-=1e7),R=(n-1)*6-180+3,c=l/(1-l),L=B/s,G=L/(r*(1-l/4-3*l*l/64-5*l*l*l/256)),O=G+(3*h/2-27*h*h*h/32)*Math.sin(2*G)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*G)+151*h*h*h/96*Math.sin(6*G),g=r/Math.sqrt(1-l*Math.sin(O)*Math.sin(O)),b=Math.tan(O)*Math.tan(O),v=c*Math.cos(O)*Math.cos(O),C=r*(1-l)/Math.pow(1-l*Math.sin(O)*Math.sin(O),1.5),S=V/(g*s);var z=O-g*Math.tan(O)/C*(S*S/2-(5+3*b+10*v-4*v*v-9*c)*S*S*S*S/24+(61+90*b+298*v+45*b*b-252*c-3*v*v)*S*S*S*S*S*S/720);z=mR(z);var j=(S-(1+2*b+v)*S*S*S/6+(5-2*v+28*b-3*v*v+8*c+24*b*b)*S*S*S*S*S/120)/Math.cos(O);j=R+mR(j);var re;if(a.accuracy){var ne=g3({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});re={top:ne.lat,right:ne.lon,bottom:z,left:j}}else re={lat:z,lon:j};return re}function nq(a){var e="Z";return 84>=a&&a>=72?e="X":72>a&&a>=64?e="W":64>a&&a>=56?e="V":56>a&&a>=48?e="U":48>a&&a>=40?e="T":40>a&&a>=32?e="S":32>a&&a>=24?e="R":24>a&&a>=16?e="Q":16>a&&a>=8?e="P":8>a&&a>=0?e="N":0>a&&a>=-8?e="M":-8>a&&a>=-16?e="L":-16>a&&a>=-24?e="K":-24>a&&a>=-32?e="J":-32>a&&a>=-40?e="H":-40>a&&a>=-48?e="G":-48>a&&a>=-56?e="F":-56>a&&a>=-64?e="E":-64>a&&a>=-72?e="D":-72>a&&a>=-80&&(e="C"),e}function rq(a,e){var t="00000"+a.easting,i="00000"+a.northing;return a.zoneNumber+a.zoneLetter+sq(a.easting,a.northing,a.zoneNumber)+t.substr(t.length-5,e)+i.substr(i.length-5,e)}function sq(a,e,t){var i=nW(t),n=Math.floor(a/1e5),s=Math.floor(e/1e5)%20;return oq(n,s,i)}function nW(a){var e=a%_R;return e===0&&(e=_R),e}function oq(a,e,t){var i=t-1,n=eW.charCodeAt(i),s=tW.charCodeAt(i),r=n+a-1,l=s+e,c=!1;r>Py&&(r=r-Py+ap-1,c=!0),(r===xo||n<xo&&r>xo||(r>xo||n<xo)&&c)&&r++,(r===pl||n<pl&&r>pl||(r>pl||n<pl)&&c)&&(r++,r===xo&&r++),r>Py&&(r=r-Py+ap-1),l>Oy?(l=l-Oy+ap-1,c=!0):c=!1,(l===xo||s<xo&&l>xo||(l>xo||s<xo)&&c)&&l++,(l===pl||s<pl&&l>pl||(l>pl||s<pl)&&c)&&(l++,l===xo&&l++),l>Oy&&(l=l-Oy+ap-1);var h=String.fromCharCode(r)+String.fromCharCode(l);return h}function rW(a){if(a&&a.length===0)throw"MGRSPoint coverting from nothing";for(var e=a.length,t=null,i="",n,s=0;!/[A-Z]/.test(n=a.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+a;i+=n,s++}var r=parseInt(i,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+a;var l=a.charAt(s++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+a;t=a.substring(s,s+=2);for(var c=nW(r),h=lq(t.charAt(0),c),g=uq(t.charAt(1),c);g<cq(l);)g+=2e6;var b=e-s;if(b%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+a;var v=b/2,C=0,S=0,L,R,G,O,V;return v>0&&(L=1e5/Math.pow(10,v),R=a.substring(s,s+v),C=parseFloat(R)*L,G=a.substring(s+v),S=parseFloat(G)*L),O=C+h,V=S+g,{easting:O,northing:V,zoneLetter:l,zoneNumber:r,accuracy:L}}function lq(a,e){for(var t=eW.charCodeAt(e-1),i=1e5,n=!1;t!==a.charCodeAt(0);){if(t++,t===xo&&t++,t===pl&&t++,t>Py){if(n)throw"Bad character: "+a;t=ap,n=!0}i+=1e5}return i}function uq(a,e){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var t=tW.charCodeAt(e-1),i=0,n=!1;t!==a.charCodeAt(0);){if(t++,t===xo&&t++,t===pl&&t++,t>Oy){if(n)throw"Bad character: "+a;t=ap,n=!0}i+=1e5}return i}function cq(a){var e;switch(a){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+a}function Vp(a,e,t){if(!(this instanceof Vp))return new Vp(a,e,t);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if(typeof a=="object")this.x=a.x,this.y=a.y,this.z=a.z||0;else if(typeof a=="string"&&typeof e>"u"){var i=a.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=a,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Vp.fromMGRS=function(a){return new Vp(iW(a))};Vp.prototype.toMGRS=function(a){return aW([this.x,this.y],a)};var dq=1,hq=.25,gR=.046875,pR=.01953125,fR=.01068115234375,_q=.75,mq=.46875,gq=.013020833333333334,pq=.007120768229166667,fq=.3645833333333333,yq=.005696614583333333,bq=.3076171875;function p3(a){var e=[];e[0]=dq-a*(hq+a*(gR+a*(pR+a*fR))),e[1]=a*(_q-a*(gR+a*(pR+a*fR)));var t=a*a;return e[2]=t*(mq-a*(gq+a*pq)),t*=a,e[3]=t*(fq-a*yq),e[4]=t*a*bq,e}function sf(a,e,t,i){return t*=e,e*=e,i[0]*a-t*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var vq=20;function f3(a,e,t){for(var i=1/(1-e),n=a,s=vq;s;--s){var r=Math.sin(n),l=1-e*r*r;if(l=(sf(n,r,Math.cos(n),t)-a)*(l*Math.sqrt(l))*i,n-=l,Math.abs(l)<Ht)return n}return n}function xq(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=p3(this.es),this.ml0=sf(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function wq(a){var e=a.x,t=a.y,i=Jt(e-this.long0),n,s,r,l=Math.sin(t),c=Math.cos(t);if(this.es){var g=c*i,b=Math.pow(g,2),v=this.ep2*Math.pow(c,2),C=Math.pow(v,2),S=Math.abs(c)>Ht?Math.tan(t):0,L=Math.pow(S,2),R=Math.pow(L,2);n=1-this.es*Math.pow(l,2),g=g/Math.sqrt(n);var G=sf(t,l,c,this.en);s=this.a*(this.k0*g*(1+b/6*(1-L+v+b/20*(5-18*L+R+14*v-58*L*v+b/42*(61+179*R-R*L-479*L)))))+this.x0,r=this.a*(this.k0*(G-this.ml0+l*i*g/2*(1+b/12*(5-L+9*v+4*C+b/30*(61+R-58*L+270*v-330*L*v+b/56*(1385+543*R-R*L-3111*L))))))+this.y0}else{var h=c*Math.sin(i);if(Math.abs(Math.abs(h)-1)<Ht)return 93;if(s=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,r=c*Math.cos(i)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(r),h>=1){if(h-1>Ht)return 93;r=0}else r=Math.acos(r);t<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return a.x=s,a.y=r,a}function Iq(a){var e,t,i,n,s=(a.x-this.x0)*(1/this.a),r=(a.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+r/this.k0,t=f3(e,this.es,this.en),Math.abs(t)<Ct){var b=Math.sin(t),v=Math.cos(t),C=Math.abs(v)>Ht?Math.tan(t):0,S=this.ep2*Math.pow(v,2),L=Math.pow(S,2),R=Math.pow(C,2),G=Math.pow(R,2);e=1-this.es*Math.pow(b,2);var O=s*Math.sqrt(e)/this.k0,V=Math.pow(O,2);e=e*C,i=t-e*V/(1-this.es)*.5*(1-V/12*(5+3*R-9*S*R+S-4*L-V/30*(61+90*R-252*S*R+45*G+46*S-V/56*(1385+3633*R+4095*G+1574*G*R)))),n=Jt(this.long0+O*(1-V/6*(1+2*R+S-V/20*(5+28*R+24*G+8*S*R+6*S-V/42*(61+662*R+1320*G+720*G*R))))/v)}else i=Ct*f1(r),n=0;else{var l=Math.exp(s/this.k0),c=.5*(l-1/l),h=this.lat0+r/this.k0,g=Math.cos(h);e=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(c,2))),i=Math.asin(e),r<0&&(i=-i),c===0&&g===0?n=0:n=Jt(Math.atan2(c,g)+this.long0)}return a.x=n,a.y=i,a}var Cq=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const o2={init:xq,forward:wq,inverse:Iq,names:Cq};function sW(a){var e=Math.exp(a);return e=(e-1/e)/2,e}function Eo(a,e){a=Math.abs(a),e=Math.abs(e);var t=Math.max(a,e),i=Math.min(a,e)/(t||1);return t*Math.sqrt(1+Math.pow(i,2))}function Aq(a){var e=1+a,t=e-1;return t===0?a:a*Math.log(e)/t}function Sq(a){var e=Math.abs(a);return e=Aq(e*(1+e/(Eo(1,e)+1))),a<0?-e:e}function y3(a,e){for(var t=2*Math.cos(2*e),i=a.length-1,n=a[i],s=0,r;--i>=0;)r=-s+t*n+a[i],s=n,n=r;return e+r*Math.sin(2*e)}function Tq(a,e){for(var t=2*Math.cos(e),i=a.length-1,n=a[i],s=0,r;--i>=0;)r=-s+t*n+a[i],s=n,n=r;return Math.sin(e)*r}function Eq(a){var e=Math.exp(a);return e=(e+1/e)/2,e}function oW(a,e,t){for(var i=Math.sin(e),n=Math.cos(e),s=sW(t),r=Eq(t),l=2*n*r,c=-2*i*s,h=a.length-1,g=a[h],b=0,v=0,C=0,S,L;--h>=0;)S=v,L=b,v=g,b=C,g=-S+l*v-c*b+a[h],C=-L+c*v+l*b;return l=i*r,c=n*s,[l*g-c*C,l*C+c*g]}function Mq(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(o2.init.apply(this),this.forward=o2.forward,this.inverse=o2.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),e=a/(2-a),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var i=y3(this.cbg,this.lat0);this.Zb=-this.Qn*(i+Tq(this.gtu,2*i))}function Lq(a){var e=Jt(a.x-this.long0),t=a.y;t=y3(this.cbg,t);var i=Math.sin(t),n=Math.cos(t),s=Math.sin(e),r=Math.cos(e);t=Math.atan2(i,r*n),e=Math.atan2(s*n,Eo(i,n*r)),e=Sq(Math.tan(e));var l=oW(this.gtu,2*t,2*e);t=t+l[0],e=e+l[1];var c,h;return Math.abs(e)<=2.623395162778?(c=this.a*(this.Qn*e)+this.x0,h=this.a*(this.Qn*t+this.Zb)+this.y0):(c=1/0,h=1/0),a.x=c,a.y=h,a}function Rq(a){var e=(a.x-this.x0)*(1/this.a),t=(a.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var i,n;if(Math.abs(e)<=2.623395162778){var s=oW(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(sW(e));var r=Math.sin(t),l=Math.cos(t),c=Math.sin(e),h=Math.cos(e);t=Math.atan2(r*h,Eo(c,h*l)),e=Math.atan2(c,h*l),i=Jt(e+this.long0),n=y3(this.cgb,t)}else i=1/0,n=1/0;return a.x=i,a.y=n,a}var kq=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const l2={init:Mq,forward:Lq,inverse:Rq,names:kq};function Wq(a,e){if(a===void 0){if(a=Math.floor((Jt(e)+Math.PI)*30/Math.PI)+1,a<0)return 0;if(a>60)return 60}return a}var Gq="etmerc";function Oq(){var a=Wq(this.zone,this.long0);if(a===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*ms,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,l2.init.apply(this),this.forward=l2.forward,this.inverse=l2.inverse}var Pq=["Universal Transverse Mercator System","utm"];const Bq={init:Oq,names:Pq,dependsOn:Gq};function b3(a,e){return Math.pow((1-a)/(1+a),e)}var Fq=20;function Nq(){var a=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+en)/(Math.pow(Math.tan(.5*this.lat0+en),this.C)*b3(this.e*a,this.ratexp))}function Dq(a){var e=a.x,t=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+en),this.C)*b3(this.e*Math.sin(t),this.ratexp))-Ct,a.x=this.C*e,a}function Vq(a){for(var e=1e-14,t=a.x/this.C,i=a.y,n=Math.pow(Math.tan(.5*i+en)/this.K,1/this.C),s=Fq;s>0&&(i=2*Math.atan(n*b3(this.e*Math.sin(a.y),-.5*this.e))-Ct,!(Math.abs(i-a.y)<e));--s)a.y=i;return s?(a.x=t,a.y=i,a):null}var Zq=["gauss"];const v3={init:Nq,forward:Dq,inverse:Vq,names:Zq};function zq(){v3.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Uq(a){var e,t,i,n;return a.x=Jt(a.x-this.long0),v3.forward.apply(this,[a]),e=Math.sin(a.y),t=Math.cos(a.y),i=Math.cos(a.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*i),a.x=n*t*Math.sin(a.x),a.y=n*(this.cosc0*e-this.sinc0*t*i),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function Xq(a){var e,t,i,n,s;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,s=Eo(a.x,a.y)){var r=2*Math.atan2(s,this.R2);e=Math.sin(r),t=Math.cos(r),n=Math.asin(t*this.sinc0+a.y*e*this.cosc0/s),i=Math.atan2(a.x*e,s*this.cosc0*t-a.y*this.sinc0*e)}else n=this.phic0,i=0;return a.x=i,a.y=n,v3.inverse.apply(this,[a]),a.x=Jt(a.x+this.long0),a}var Hq=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const Yq={init:zq,forward:Uq,inverse:Xq,names:Hq};function Kq(a,e,t){return e*=t,Math.tan(.5*(Ct+a))*Math.pow((1-e)/(1+e),.5*t)}function qq(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ht&&(this.k0=.5*(1+f1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ht&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ht&&Math.abs(Math.cos(this.lat_ts))>Ht&&(this.k0=.5*this.cons*sc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/$l(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=sc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ct,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function jq(a){var e=a.x,t=a.y,i=Math.sin(t),n=Math.cos(t),s,r,l,c,h,g,b=Jt(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Ht&&Math.abs(t+this.lat0)<=Ht?(a.x=NaN,a.y=NaN,a):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*n*Math.cos(b)),a.x=this.a*s*n*Math.sin(b)+this.x0,a.y=this.a*s*(this.coslat0*i-this.sinlat0*n*Math.cos(b))+this.y0,a):(r=2*Math.atan(this.ssfn_(t,i,this.e))-Ct,c=Math.cos(r),l=Math.sin(r),Math.abs(this.coslat0)<=Ht?(h=$l(this.e,t*this.con,this.con*i),g=2*this.a*this.k0*h/this.cons,a.x=this.x0+g*Math.sin(e-this.long0),a.y=this.y0-this.con*g*Math.cos(e-this.long0),a):(Math.abs(this.sinlat0)<Ht?(s=2*this.a*this.k0/(1+c*Math.cos(b)),a.y=s*l):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*c*Math.cos(b))),a.y=s*(this.cosX0*l-this.sinX0*c*Math.cos(b))+this.y0),a.x=s*c*Math.sin(b)+this.x0,a))}function Jq(a){a.x-=this.x0,a.y-=this.y0;var e,t,i,n,s,r=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var l=2*Math.atan(r/(2*this.a*this.k0));return e=this.long0,t=this.lat0,r<=Ht?(a.x=e,a.y=t,a):(t=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/r),Math.abs(this.coslat0)<Ht?this.lat0>0?e=Jt(this.long0+Math.atan2(a.x,-1*a.y)):e=Jt(this.long0+Math.atan2(a.x,a.y)):e=Jt(this.long0+Math.atan2(a.x*Math.sin(l),r*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l))),a.x=e,a.y=t,a)}else if(Math.abs(this.coslat0)<=Ht){if(r<=Ht)return t=this.lat0,e=this.long0,a.x=e,a.y=t,a;a.x*=this.con,a.y*=this.con,i=r*this.cons/(2*this.a*this.k0),t=this.con*Y0(this.e,i),e=this.con*Jt(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else n=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,r<=Ht?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+a.y*Math.sin(n)*this.cosX0/r),e=Jt(this.long0+Math.atan2(a.x*Math.sin(n),r*this.cosX0*Math.cos(n)-a.y*this.sinX0*Math.sin(n)))),t=-1*Y0(this.e,Math.tan(.5*(Ct+s)));return a.x=e,a.y=t,a}var Qq=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const $q={init:qq,forward:jq,inverse:Jq,names:Qq,ssfn_:Kq};function ej(){var a=this.lat0;this.lambda0=this.long0;var e=Math.sin(a),t=this.a,i=this.rf,n=1/i,s=2*n-Math.pow(n,2),r=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(e/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+a/2)),h=Math.log((1+r*e)/(1-r*e));this.K=l-this.alpha*c+this.alpha*r/2*h}function tj(a){var e=Math.log(Math.tan(Math.PI/4-a.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),i=-this.alpha*(e+t)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(a.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),l=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return a.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,a.x=this.R*r+this.x0,a}function aj(a){for(var e=a.x-this.x0,t=a.y-this.y0,i=e/this.R,n=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),r=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),l=this.lambda0+r/this.alpha,c=0,h=s,g=-1e3,b=0;Math.abs(h-g)>1e-7;){if(++b>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),g=h,h=2*Math.atan(Math.exp(c))-Math.PI/2}return a.x=l,a.y=h,a}var ij=["somerc"];const nj={init:ej,forward:tj,inverse:aj,names:ij};var Yg=1e-7;function rj(a){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof a.PROJECTION=="object"?Object.keys(a.PROJECTION)[0]:a.PROJECTION;return"no_uoff"in a||"no_off"in a||e.indexOf(t)!==-1}function sj(){var a,e,t,i,n,s,r,l,c,h,g=0,b,v=0,C=0,S=0,L=0,R=0,G=0;this.no_off=rj(this),this.no_rot="no_rot"in this;var O=!1;"alpha"in this&&(O=!0);var V=!1;if("rectified_grid_angle"in this&&(V=!0),O&&(G=this.alpha),V&&(g=this.rectified_grid_angle*ms),O||V)v=this.longc;else if(C=this.long1,L=this.lat1,S=this.long2,R=this.lat2,Math.abs(L-R)<=Yg||(a=Math.abs(L))<=Yg||Math.abs(a-Ct)<=Yg||Math.abs(Math.abs(this.lat0)-Ct)<=Yg||Math.abs(Math.abs(R)-Ct)<=Yg)throw new Error;var B=1-this.es;e=Math.sqrt(B),Math.abs(this.lat0)>Ht?(l=Math.sin(this.lat0),t=Math.cos(this.lat0),a=1-this.es*l*l,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/B),this.A=this.B*this.k0*e/a,i=this.B*e/(t*Math.sqrt(a)),n=i*i-1,n<=0?n=0:(n=Math.sqrt(n),this.lat0<0&&(n=-n)),this.E=n+=i,this.E*=Math.pow($l(this.e,this.lat0,l),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=n=1),O||V?(O?(b=Math.asin(Math.sin(G)/i),V||(g=G)):(b=g,G=Math.asin(i*Math.sin(b))),this.lam0=v-Math.asin(.5*(n-1/n)*Math.tan(b))/this.B):(s=Math.pow($l(this.e,L,Math.sin(L)),this.B),r=Math.pow($l(this.e,R,Math.sin(R)),this.B),n=this.E/s,c=(r-s)/(r+s),h=this.E*this.E,h=(h-r*s)/(h+r*s),a=C-S,a<-Math.pi?S-=X0:a>Math.pi&&(S+=X0),this.lam0=Jt(.5*(C+S)-Math.atan(h*Math.tan(.5*this.B*(C-S))/c)/this.B),b=Math.atan(2*Math.sin(this.B*Jt(C-this.lam0))/(n-1/n)),g=G=Math.asin(i*Math.sin(b))),this.singam=Math.sin(b),this.cosgam=Math.cos(b),this.sinrot=Math.sin(g),this.cosrot=Math.cos(g),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(G))),this.lat0<0&&(this.u_0=-this.u_0)),n=.5*b,this.v_pole_n=this.ArB*Math.log(Math.tan(en-n)),this.v_pole_s=this.ArB*Math.log(Math.tan(en+n))}function oj(a){var e={},t,i,n,s,r,l,c,h;if(a.x=a.x-this.lam0,Math.abs(Math.abs(a.y)-Ct)>Ht){if(r=this.E/Math.pow($l(this.e,a.y,Math.sin(a.y)),this.B),l=1/r,t=.5*(r-l),i=.5*(r+l),s=Math.sin(this.B*a.x),n=(t*this.singam-s*this.cosgam)/i,Math.abs(Math.abs(n)-1)<Ht)throw new Error;h=.5*this.ArB*Math.log((1-n)/(1+n)),l=Math.cos(this.B*a.x),Math.abs(l)<Yg?c=this.A*a.x:c=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,l)}else h=a.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*a.y;return this.no_rot?(e.x=c,e.y=h):(c-=this.u_0,e.x=h*this.cosrot+c*this.sinrot,e.y=c*this.cosrot-h*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function lj(a){var e,t,i,n,s,r,l,c={};if(a.x=(a.x-this.x0)*(1/this.a),a.y=(a.y-this.y0)*(1/this.a),this.no_rot?(t=a.y,e=a.x):(t=a.x*this.cosrot-a.y*this.sinrot,e=a.y*this.cosrot+a.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*t),n=.5*(i-1/i),s=.5*(i+1/i),r=Math.sin(this.BrA*e),l=(r*this.cosgam+n*this.singam)/s,Math.abs(Math.abs(l)-1)<Ht)c.x=0,c.y=l<0?-Ct:Ct;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=Y0(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(n*this.cosgam-r*this.singam,Math.cos(this.BrA*e))}return c.x+=this.lam0,c}var uj=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const cj={init:sj,forward:oj,inverse:lj,names:uj};function dj(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ht)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),i=sc(this.e,e,t),n=$l(this.e,this.lat1,e),s=Math.sin(this.lat2),r=Math.cos(this.lat2),l=sc(this.e,s,r),c=$l(this.e,this.lat2,s),h=$l(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ht?this.ns=Math.log(i/l)/Math.log(n/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function hj(a){var e=a.x,t=a.y;Math.abs(2*Math.abs(t)-Math.PI)<=Ht&&(t=f1(t)*(Ct-2*Ht));var i=Math.abs(Math.abs(t)-Ct),n,s;if(i>Ht)n=$l(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(i=t*this.ns,i<=0)return null;s=0}var r=this.ns*Jt(e-this.long0);return a.x=this.k0*(s*Math.sin(r))+this.x0,a.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,a}function _j(a){var e,t,i,n,s,r=(a.x-this.x0)/this.k0,l=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(r*r+l*l),t=1):(e=-Math.sqrt(r*r+l*l),t=-1);var c=0;if(e!==0&&(c=Math.atan2(t*r,t*l)),e!==0||this.ns>0){if(t=1/this.ns,i=Math.pow(e/(this.a*this.f0),t),n=Y0(this.e,i),n===-9999)return null}else n=-Ct;return s=Jt(c/this.ns+this.long0),a.x=s,a.y=n,a}var mj=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const gj={init:dj,forward:hj,inverse:_j,names:mj};function pj(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function fj(a){var e,t,i,n,s,r,l,c=a.x,h=a.y,g=Jt(c-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),i=-g*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(i)),s=Math.asin(Math.cos(t)*Math.sin(i)/Math.cos(n)),r=this.n*s,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),a.y=l*Math.cos(r)/1,a.x=l*Math.sin(r)/1,this.czech||(a.y*=-1,a.x*=-1),a}function yj(a){var e,t,i,n,s,r,l,c,h=a.x;a.x=a.y,a.y=h,this.czech||(a.y*=-1,a.x*=-1),r=Math.sqrt(a.x*a.x+a.y*a.y),s=Math.atan2(a.y,a.x),n=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/r,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),t=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(e)),a.x=this.long0-t/this.alfa,l=e,c=0;var g=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-a.y)<1e-10&&(c=1),l=a.y,g+=1;while(c===0&&g<15);return g>=15?null:a}var bj=["Krovak","krovak"];const vj={init:pj,forward:fj,inverse:yj,names:bj};function ao(a,e,t,i,n){return a*n-e*Math.sin(2*n)+t*Math.sin(4*n)-i*Math.sin(6*n)}function y1(a){return 1-.25*a*(1+a/16*(3+1.25*a))}function b1(a){return .375*a*(1+.25*a*(1+.46875*a))}function v1(a){return .05859375*a*a*(1+.75*a)}function x1(a){return a*a*a*(35/3072)}function Zp(a,e,t){var i=e*t;return a/Math.sqrt(1-i*i)}function Vh(a){return Math.abs(a)<Ct?a:a-f1(a)*Math.PI}function lx(a,e,t,i,n){var s,r;s=a/e;for(var l=0;l<15;l++)if(r=(a-(e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*i*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=r,Math.abs(r)<=1e-10)return s;return NaN}function xj(){this.sphere||(this.e0=y1(this.es),this.e1=b1(this.es),this.e2=v1(this.es),this.e3=x1(this.es),this.ml0=this.a*ao(this.e0,this.e1,this.e2,this.e3,this.lat0))}function wj(a){var e,t,i=a.x,n=a.y;if(i=Jt(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(i)),t=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var s=Math.sin(n),r=Math.cos(n),l=Zp(this.a,this.e,s),c=Math.tan(n)*Math.tan(n),h=i*Math.cos(n),g=h*h,b=this.es*r*r/(1-this.es),v=this.a*ao(this.e0,this.e1,this.e2,this.e3,n);e=l*h*(1-g*c*(1/6-(8-c+8*b)*g/120)),t=v-this.ml0+l*s/r*g*(.5+(5-c+6*b)*g/24)}return a.x=e+this.x0,a.y=t+this.y0,a}function Ij(a){a.x-=this.x0,a.y-=this.y0;var e=a.x/this.a,t=a.y/this.a,i,n;if(this.sphere){var s=t+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(e)),n=Math.atan2(Math.tan(e),Math.cos(s))}else{var r=this.ml0/this.a+t,l=lx(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-Ct)<=Ht)return a.x=this.long0,a.y=Ct,t<0&&(a.y*=-1),a;var c=Zp(this.a,this.e,Math.sin(l)),h=c*c*c/this.a/this.a*(1-this.es),g=Math.pow(Math.tan(l),2),b=e*this.a/c,v=b*b;i=l-c*Math.tan(l)/h*b*b*(.5-(1+3*g)*b*b/24),n=b*(1-v*(g/3+(1+3*g)*g*v/15))/Math.cos(l)}return a.x=Jt(n+this.long0),a.y=Vh(i),a}var Cj=["Cassini","Cassini_Soldner","cass"];const Aj={init:xj,forward:wj,inverse:Ij,names:Cj};function wh(a,e){var t;return a>1e-7?(t=a*e,(1-a*a)*(e/(1-t*t)-.5/a*Math.log((1-t)/(1+t)))):2*e}var Sj=1,Tj=2,Ej=3,Mj=4;function Lj(){var a=Math.abs(this.lat0);if(Math.abs(a-Ct)<Ht?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<Ht?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=wh(this.e,1),this.mmf=.5/(1-this.es),this.apa=Nj(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=wh(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Rj(a){var e,t,i,n,s,r,l,c,h,g,b=a.x,v=a.y;if(b=Jt(b-this.long0),this.sphere){if(s=Math.sin(v),g=Math.cos(v),i=Math.cos(b),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+g*i:1+this.sinph0*s+this.cosph0*g*i,t<=Ht)return null;t=Math.sqrt(2/t),e=t*g*Math.sin(b),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*g*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(v+this.lat0)<Ht)return null;t=en-v*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(b),t*=i}}else{switch(l=0,c=0,h=0,i=Math.cos(b),n=Math.sin(b),s=Math.sin(v),r=wh(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=r/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*c*i;break;case this.EQUIT:h=1+c*i;break;case this.N_POLE:h=Ct+v,r=this.qp-r;break;case this.S_POLE:h=v-Ct,r=this.qp+r;break}if(Math.abs(h)<Ht)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?t=this.ymf*h*(this.cosb1*l-this.sinb1*c*i):t=(h=Math.sqrt(2/(1+c*i)))*l*this.ymf,e=this.xmf*h*c*n;break;case this.N_POLE:case this.S_POLE:r>=0?(e=(h=Math.sqrt(r))*n,t=i*(this.mode===this.S_POLE?h:-h)):e=t=0;break}}return a.x=this.a*e+this.x0,a.y=this.a*t+this.y0,a}function kj(a){a.x-=this.x0,a.y-=this.y0;var e=a.x/this.a,t=a.y/this.a,i,n,s,r,l,c,h;if(this.sphere){var g=0,b,v=0;if(b=Math.sqrt(e*e+t*t),n=b*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=Math.sin(n),g=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(b)<=Ht?0:Math.asin(t*v/b),e*=v,t=g*b;break;case this.OBLIQ:n=Math.abs(b)<=Ht?this.lat0:Math.asin(g*this.sinph0+t*v*this.cosph0/b),e*=v*this.cosph0,t=(g-Math.sin(n)*this.sinph0)*b;break;case this.N_POLE:t=-t,n=Ct-n;break;case this.S_POLE:n-=Ct;break}i=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,c=Math.sqrt(e*e+t*t),c<Ht)return a.x=this.long0,a.y=this.lat0,a;r=2*Math.asin(.5*c/this.rq),s=Math.cos(r),e*=r=Math.sin(r),this.mode===this.OBLIQ?(h=s*this.sinb1+t*r*this.cosb1/c,l=this.qp*h,t=c*this.cosb1*s-t*this.sinb1*r):(h=t*r/c,l=this.qp*h,t=c*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),l=e*e+t*t,!l)return a.x=this.long0,a.y=this.lat0,a;h=1-l/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(e,t),n=Dj(Math.asin(h),this.apa)}return a.x=Jt(this.long0+i),a.y=n,a}var Wj=.3333333333333333,Gj=.17222222222222222,Oj=.10257936507936508,Pj=.06388888888888888,Bj=.0664021164021164,Fj=.016415012942191543;function Nj(a){var e,t=[];return t[0]=a*Wj,e=a*a,t[0]+=e*Gj,t[1]=e*Pj,e*=a,t[0]+=e*Oj,t[1]+=e*Bj,t[2]=e*Fj,t}function Dj(a,e){var t=a+a;return a+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var Vj=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Zj={init:Lj,forward:Rj,inverse:kj,names:Vj,S_POLE:Sj,N_POLE:Tj,EQUIT:Ej,OBLIQ:Mj};function Rh(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)}function zj(){Math.abs(this.lat1+this.lat2)<Ht||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=sc(this.e3,this.sin_po,this.cos_po),this.qs1=wh(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=sc(this.e3,this.sin_po,this.cos_po),this.qs2=wh(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=wh(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ht?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Uj(a){var e=a.x,t=a.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var i=wh(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*Jt(e-this.long0),r=n*Math.sin(s)+this.x0,l=this.rh-n*Math.cos(s)+this.y0;return a.x=r,a.y=l,a}function Xj(a){var e,t,i,n,s,r;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(e=Math.sqrt(a.x*a.x+a.y*a.y),i=1):(e=-Math.sqrt(a.x*a.x+a.y*a.y),i=-1),n=0,e!==0&&(n=Math.atan2(i*a.x,i*a.y)),i=e*this.ns0/this.a,this.sphere?r=Math.asin((this.c-i*i)/(2*this.ns0)):(t=(this.c-i*i)/this.ns0,r=this.phi1z(this.e3,t)),s=Jt(n/this.ns0+this.long0),a.x=s,a.y=r,a}function Hj(a,e){var t,i,n,s,r,l=Rh(.5*e);if(a<Ht)return l;for(var c=a*a,h=1;h<=25;h++)if(t=Math.sin(l),i=Math.cos(l),n=a*t,s=1-n*n,r=.5*s*s/i*(e/(1-c)-t/s+.5/a*Math.log((1-n)/(1+n))),l=l+r,Math.abs(r)<=1e-7)return l;return null}var Yj=["Albers_Conic_Equal_Area","Albers","aea"];const Kj={init:zj,forward:Uj,inverse:Xj,names:Yj,phi1z:Hj};function qj(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function jj(a){var e,t,i,n,s,r,l,c,h=a.x,g=a.y;return i=Jt(h-this.long0),e=Math.sin(g),t=Math.cos(g),n=Math.cos(i),r=this.sin_p14*e+this.cos_p14*t*n,s=1,r>0||Math.abs(r)<=Ht?(l=this.x0+this.a*s*t*Math.sin(i)/r,c=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)/r):(l=this.x0+this.infinity_dist*t*Math.sin(i),c=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*n)),a.x=l,a.y=c,a}function Jj(a){var e,t,i,n,s,r;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(e=Math.sqrt(a.x*a.x+a.y*a.y))?(n=Math.atan2(e,this.rc),t=Math.sin(n),i=Math.cos(n),r=Rh(i*this.sin_p14+a.y*t*this.cos_p14/e),s=Math.atan2(a.x*t,e*this.cos_p14*i-a.y*this.sin_p14*t),s=Jt(this.long0+s)):(r=this.phic0,s=0),a.x=s,a.y=r,a}var Qj=["gnom"];const $j={init:qj,forward:jj,inverse:Jj,names:Qj};function eJ(a,e){var t=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*Ct:Ct;for(var i=Math.asin(.5*e),n,s,r,l,c=0;c<30;c++)if(s=Math.sin(i),r=Math.cos(i),l=a*s,n=Math.pow(1-l*l,2)/(2*r)*(e/(1-a*a)-s/(1-l*l)+.5/a*Math.log((1-l)/(1+l))),i+=n,Math.abs(n)<=1e-10)return i;return NaN}function tJ(){this.sphere||(this.k0=sc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function aJ(a){var e=a.x,t=a.y,i,n,s=Jt(e-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var r=wh(this.e,Math.sin(t));i=this.x0+this.a*this.k0*s,n=this.y0+this.a*r*.5/this.k0}return a.x=i,a.y=n,a}function iJ(a){a.x-=this.x0,a.y-=this.y0;var e,t;return this.sphere?(e=Jt(this.long0+a.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(t=eJ(this.e,2*a.y*this.k0/this.a),e=Jt(this.long0+a.x/(this.a*this.k0))),a.x=e,a.y=t,a}var nJ=["cea"];const rJ={init:tJ,forward:aJ,inverse:iJ,names:nJ};function sJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function oJ(a){var e=a.x,t=a.y,i=Jt(e-this.long0),n=Vh(t-this.lat0);return a.x=this.x0+this.a*i*this.rc,a.y=this.y0+this.a*n,a}function lJ(a){var e=a.x,t=a.y;return a.x=Jt(this.long0+(e-this.x0)/(this.a*this.rc)),a.y=Vh(this.lat0+(t-this.y0)/this.a),a}var uJ=["Equirectangular","Equidistant_Cylindrical","eqc"];const cJ={init:sJ,forward:oJ,inverse:lJ,names:uJ};var yR=20;function dJ(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=y1(this.es),this.e1=b1(this.es),this.e2=v1(this.es),this.e3=x1(this.es),this.ml0=this.a*ao(this.e0,this.e1,this.e2,this.e3,this.lat0)}function hJ(a){var e=a.x,t=a.y,i,n,s,r=Jt(e-this.long0);if(s=r*Math.sin(t),this.sphere)Math.abs(t)<=Ht?(i=this.a*r,n=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(t),n=this.a*(Vh(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=Ht)i=this.a*r,n=-1*this.ml0;else{var l=Zp(this.a,this.e,Math.sin(t))/Math.tan(t);i=l*Math.sin(s),n=this.a*ao(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+l*(1-Math.cos(s))}return a.x=i+this.x0,a.y=n+this.y0,a}function _J(a){var e,t,i,n,s,r,l,c,h;if(i=a.x-this.x0,n=a.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Ht)e=Jt(i/this.a+this.long0),t=0;else{r=this.lat0+n/this.a,l=i*i/this.a/this.a+r*r,c=r;var g;for(s=yR;s;--s)if(g=Math.tan(c),h=-1*(r*(c*g+1)-c-.5*(c*c+l)*g)/((c-r)/g-1),c+=h,Math.abs(h)<=Ht){t=c;break}e=Jt(this.long0+Math.asin(i*Math.tan(c)/this.a)/Math.sin(t))}else if(Math.abs(n+this.ml0)<=Ht)t=0,e=Jt(this.long0+i/this.a);else{r=(this.ml0+n)/this.a,l=i*i/this.a/this.a+r*r,c=r;var b,v,C,S,L;for(s=yR;s;--s)if(L=this.e*Math.sin(c),b=Math.sqrt(1-L*L)*Math.tan(c),v=this.a*ao(this.e0,this.e1,this.e2,this.e3,c),C=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),S=v/this.a,h=(r*(b*S+1)-S-.5*b*(S*S+l))/(this.es*Math.sin(2*c)*(S*S+l-2*r*S)/(4*b)+(r-S)*(b*C-2/Math.sin(2*c))-C),c-=h,Math.abs(h)<=Ht){t=c;break}b=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=Jt(this.long0+Math.asin(i*b/this.a)/Math.sin(t))}return a.x=e,a.y=t,a}var mJ=["Polyconic","poly"];const gJ={init:dJ,forward:hJ,inverse:_J,names:mJ};function pJ(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function fJ(a){var e,t=a.x,i=a.y,n=i-this.lat0,s=t-this.long0,r=n/s0*1e-5,l=s,c=1,h=0;for(e=1;e<=10;e++)c=c*r,h=h+this.A[e]*c;var g=h,b=l,v=1,C=0,S,L,R=0,G=0;for(e=1;e<=6;e++)S=v*g-C*b,L=C*g+v*b,v=S,C=L,R=R+this.B_re[e]*v-this.B_im[e]*C,G=G+this.B_im[e]*v+this.B_re[e]*C;return a.x=G*this.a+this.x0,a.y=R*this.a+this.y0,a}function yJ(a){var e,t=a.x,i=a.y,n=t-this.x0,s=i-this.y0,r=s/this.a,l=n/this.a,c=1,h=0,g,b,v=0,C=0;for(e=1;e<=6;e++)g=c*r-h*l,b=h*r+c*l,c=g,h=b,v=v+this.C_re[e]*c-this.C_im[e]*h,C=C+this.C_im[e]*c+this.C_re[e]*h;for(var S=0;S<this.iterations;S++){var L=v,R=C,G,O,V=r,B=l;for(e=2;e<=6;e++)G=L*v-R*C,O=R*v+L*C,L=G,R=O,V=V+(e-1)*(this.B_re[e]*L-this.B_im[e]*R),B=B+(e-1)*(this.B_im[e]*L+this.B_re[e]*R);L=1,R=0;var z=this.B_re[1],j=this.B_im[1];for(e=2;e<=6;e++)G=L*v-R*C,O=R*v+L*C,L=G,R=O,z=z+e*(this.B_re[e]*L-this.B_im[e]*R),j=j+e*(this.B_im[e]*L+this.B_re[e]*R);var re=z*z+j*j;v=(V*z+B*j)/re,C=(B*z-V*j)/re}var ne=v,te=C,le=1,ue=0;for(e=1;e<=9;e++)le=le*ne,ue=ue+this.D[e]*le;var fe=this.lat0+ue*s0*1e5,be=this.long0+te;return a.x=be,a.y=fe,a}var bJ=["New_Zealand_Map_Grid","nzmg"];const vJ={init:pJ,forward:fJ,inverse:yJ,names:bJ};function xJ(){}function wJ(a){var e=a.x,t=a.y,i=Jt(e-this.long0),n=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return a.x=n,a.y=s,a}function IJ(a){a.x-=this.x0,a.y-=this.y0;var e=Jt(this.long0+a.x/this.a),t=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=e,a.y=t,a}var CJ=["Miller_Cylindrical","mill"];const AJ={init:xJ,forward:wJ,inverse:IJ,names:CJ};var SJ=20;function TJ(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=p3(this.es)}function EJ(a){var e,t,i=a.x,n=a.y;if(i=Jt(i-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),r=SJ;r;--r){var l=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=l,Math.abs(l)<Ht)break}e=this.a*this.C_x*i*(this.m+Math.cos(n)),t=this.a*this.C_y*n}else{var c=Math.sin(n),h=Math.cos(n);t=this.a*sf(n,c,h,this.en),e=this.a*i*h/Math.sqrt(1-this.es*c*c)}return a.x=e,a.y=t,a}function MJ(a){var e,t,i,n;return a.x-=this.x0,i=a.x/this.a,a.y-=this.y0,e=a.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=Rh((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Rh(Math.sin(e)/this.n)),i=Jt(i+this.long0),e=Vh(e)):(e=f3(a.y/this.a,this.es,this.en),n=Math.abs(e),n<Ct?(n=Math.sin(e),t=this.long0+a.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),i=Jt(t)):n-Ht<Ct&&(i=this.long0)),a.x=i,a.y=e,a}var LJ=["Sinusoidal","sinu"];const RJ={init:TJ,forward:EJ,inverse:MJ,names:LJ};function kJ(){}function WJ(a){for(var e=a.x,t=a.y,i=Jt(e-this.long0),n=t,s=Math.PI*Math.sin(t);;){var r=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=r,Math.abs(r)<Ht)break}n/=2,Math.PI/2-Math.abs(t)<Ht&&(i=0);var l=.900316316158*this.a*i*Math.cos(n)+this.x0,c=1.4142135623731*this.a*Math.sin(n)+this.y0;return a.x=l,a.y=c,a}function GJ(a){var e,t;a.x-=this.x0,a.y-=this.y0,t=a.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var i=Jt(this.long0+a.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var n=Math.asin(t);return a.x=i,a.y=n,a}var OJ=["Mollweide","moll"];const PJ={init:kJ,forward:WJ,inverse:GJ,names:OJ};function BJ(){Math.abs(this.lat1+this.lat2)<Ht||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=y1(this.es),this.e1=b1(this.es),this.e2=v1(this.es),this.e3=x1(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=sc(this.e,this.sinphi,this.cosphi),this.ml1=ao(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ht?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=sc(this.e,this.sinphi,this.cosphi),this.ml2=ao(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ao(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function FJ(a){var e=a.x,t=a.y,i;if(this.sphere)i=this.a*(this.g-t);else{var n=ao(this.e0,this.e1,this.e2,this.e3,t);i=this.a*(this.g-n)}var s=this.ns*Jt(e-this.long0),r=this.x0+i*Math.sin(s),l=this.y0+this.rh-i*Math.cos(s);return a.x=r,a.y=l,a}function NJ(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var e,t,i,n;this.ns>=0?(t=Math.sqrt(a.x*a.x+a.y*a.y),e=1):(t=-Math.sqrt(a.x*a.x+a.y*a.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*a.x,e*a.y)),this.sphere)return n=Jt(this.long0+s/this.ns),i=Vh(this.g-t/this.a),a.x=n,a.y=i,a;var r=this.g-t/this.a;return i=lx(r,this.e0,this.e1,this.e2,this.e3),n=Jt(this.long0+s/this.ns),a.x=n,a.y=i,a}var DJ=["Equidistant_Conic","eqdc"];const VJ={init:BJ,forward:FJ,inverse:NJ,names:DJ};function ZJ(){this.R=this.a}function zJ(a){var e=a.x,t=a.y,i=Jt(e-this.long0),n,s;Math.abs(t)<=Ht&&(n=this.x0+this.R*i,s=this.y0);var r=Rh(2*Math.abs(t/Math.PI));(Math.abs(i)<=Ht||Math.abs(Math.abs(t)-Ct)<=Ht)&&(n=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*r):s=this.y0+Math.PI*this.R*-Math.tan(.5*r));var l=.5*Math.abs(Math.PI/i-i/Math.PI),c=l*l,h=Math.sin(r),g=Math.cos(r),b=g/(h+g-1),v=b*b,C=b*(2/h-1),S=C*C,L=Math.PI*this.R*(l*(b-S)+Math.sqrt(c*(b-S)*(b-S)-(S+c)*(v-S)))/(S+c);i<0&&(L=-L),n=this.x0+L;var R=c+b;return L=Math.PI*this.R*(C*R-l*Math.sqrt((S+c)*(c+1)-R*R))/(S+c),t>=0?s=this.y0+L:s=this.y0-L,a.x=n,a.y=s,a}function UJ(a){var e,t,i,n,s,r,l,c,h,g,b,v,C;return a.x-=this.x0,a.y-=this.y0,b=Math.PI*this.R,i=a.x/b,n=a.y/b,s=i*i+n*n,r=-Math.abs(n)*(1+s),l=r-2*n*n+i*i,c=-2*r+1+2*n*n+s*s,C=n*n/c+(2*l*l*l/c/c/c-9*r*l/c/c)/27,h=(r-l*l/3/c)/c,g=2*Math.sqrt(-h/3),b=3*C/h/g,Math.abs(b)>1&&(b>=0?b=1:b=-1),v=Math.acos(b)/3,a.y>=0?t=(-g*Math.cos(v+Math.PI/3)-l/3/c)*Math.PI:t=-(-g*Math.cos(v+Math.PI/3)-l/3/c)*Math.PI,Math.abs(i)<Ht?e=this.long0:e=Jt(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-n*n)+s*s))/2/i),a.x=e,a.y=t,a}var XJ=["Van_der_Grinten_I","VanDerGrinten","vandg"];const HJ={init:ZJ,forward:zJ,inverse:UJ,names:XJ};function YJ(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function KJ(a){var e=a.x,t=a.y,i=Math.sin(a.y),n=Math.cos(a.y),s=Jt(e-this.long0),r,l,c,h,g,b,v,C,S,L,R,G,O,V,B,z,j,re,ne,te,le,ue,fe;return this.sphere?Math.abs(this.sin_p12-1)<=Ht?(a.x=this.x0+this.a*(Ct-t)*Math.sin(s),a.y=this.y0-this.a*(Ct-t)*Math.cos(s),a):Math.abs(this.sin_p12+1)<=Ht?(a.x=this.x0+this.a*(Ct+t)*Math.sin(s),a.y=this.y0+this.a*(Ct+t)*Math.cos(s),a):(re=this.sin_p12*i+this.cos_p12*n*Math.cos(s),z=Math.acos(re),j=z?z/Math.sin(z):1,a.x=this.x0+this.a*j*n*Math.sin(s),a.y=this.y0+this.a*j*(this.cos_p12*i-this.sin_p12*n*Math.cos(s)),a):(r=y1(this.es),l=b1(this.es),c=v1(this.es),h=x1(this.es),Math.abs(this.sin_p12-1)<=Ht?(g=this.a*ao(r,l,c,h,Ct),b=this.a*ao(r,l,c,h,t),a.x=this.x0+(g-b)*Math.sin(s),a.y=this.y0-(g-b)*Math.cos(s),a):Math.abs(this.sin_p12+1)<=Ht?(g=this.a*ao(r,l,c,h,Ct),b=this.a*ao(r,l,c,h,t),a.x=this.x0+(g+b)*Math.sin(s),a.y=this.y0+(g+b)*Math.cos(s),a):(v=i/n,C=Zp(this.a,this.e,this.sin_p12),S=Zp(this.a,this.e,i),L=Math.atan((1-this.es)*v+this.es*C*this.sin_p12/(S*n)),R=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(L)-this.sin_p12*Math.cos(s)),R===0?ne=Math.asin(this.cos_p12*Math.sin(L)-this.sin_p12*Math.cos(L)):Math.abs(Math.abs(R)-Math.PI)<=Ht?ne=-Math.asin(this.cos_p12*Math.sin(L)-this.sin_p12*Math.cos(L)):ne=Math.asin(Math.sin(s)*Math.cos(L)/Math.sin(R)),G=this.e*this.sin_p12/Math.sqrt(1-this.es),O=this.e*this.cos_p12*Math.cos(R)/Math.sqrt(1-this.es),V=G*O,B=O*O,te=ne*ne,le=te*ne,ue=le*ne,fe=ue*ne,z=C*ne*(1-te*B*(1-B)/6+le/8*V*(1-2*B)+ue/120*(B*(4-7*B)-3*G*G*(1-7*B))-fe/48*V),a.x=this.x0+z*Math.sin(R),a.y=this.y0+z*Math.cos(R),a))}function qJ(a){a.x-=this.x0,a.y-=this.y0;var e,t,i,n,s,r,l,c,h,g,b,v,C,S,L,R,G,O,V,B,z,j,re,ne;return this.sphere?(e=Math.sqrt(a.x*a.x+a.y*a.y),e>2*Ct*this.a?void 0:(t=e/this.a,i=Math.sin(t),n=Math.cos(t),s=this.long0,Math.abs(e)<=Ht?r=this.lat0:(r=Rh(n*this.sin_p12+a.y*i*this.cos_p12/e),l=Math.abs(this.lat0)-Ct,Math.abs(l)<=Ht?this.lat0>=0?s=Jt(this.long0+Math.atan2(a.x,-a.y)):s=Jt(this.long0-Math.atan2(-a.x,a.y)):s=Jt(this.long0+Math.atan2(a.x*i,e*this.cos_p12*n-a.y*this.sin_p12*i))),a.x=s,a.y=r,a)):(c=y1(this.es),h=b1(this.es),g=v1(this.es),b=x1(this.es),Math.abs(this.sin_p12-1)<=Ht?(v=this.a*ao(c,h,g,b,Ct),e=Math.sqrt(a.x*a.x+a.y*a.y),C=v-e,r=lx(C/this.a,c,h,g,b),s=Jt(this.long0+Math.atan2(a.x,-1*a.y)),a.x=s,a.y=r,a):Math.abs(this.sin_p12+1)<=Ht?(v=this.a*ao(c,h,g,b,Ct),e=Math.sqrt(a.x*a.x+a.y*a.y),C=e-v,r=lx(C/this.a,c,h,g,b),s=Jt(this.long0+Math.atan2(a.x,a.y)),a.x=s,a.y=r,a):(e=Math.sqrt(a.x*a.x+a.y*a.y),R=Math.atan2(a.x,a.y),S=Zp(this.a,this.e,this.sin_p12),G=Math.cos(R),O=this.e*this.cos_p12*G,V=-O*O/(1-this.es),B=3*this.es*(1-V)*this.sin_p12*this.cos_p12*G/(1-this.es),z=e/S,j=z-V*(1+V)*Math.pow(z,3)/6-B*(1+3*V)*Math.pow(z,4)/24,re=1-V*j*j/2-z*j*j*j/6,L=Math.asin(this.sin_p12*Math.cos(j)+this.cos_p12*Math.sin(j)*G),s=Jt(this.long0+Math.asin(Math.sin(R)*Math.sin(j)/Math.cos(L))),ne=Math.sin(L),r=Math.atan2((ne-this.es*re*this.sin_p12)*Math.tan(L),ne*(1-this.es)),a.x=s,a.y=r,a))}var jJ=["Azimuthal_Equidistant","aeqd"];const JJ={init:YJ,forward:KJ,inverse:qJ,names:jJ};function QJ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function $J(a){var e,t,i,n,s,r,l,c,h=a.x,g=a.y;return i=Jt(h-this.long0),e=Math.sin(g),t=Math.cos(g),n=Math.cos(i),r=this.sin_p14*e+this.cos_p14*t*n,s=1,(r>0||Math.abs(r)<=Ht)&&(l=this.a*s*t*Math.sin(i),c=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*n)),a.x=l,a.y=c,a}function eQ(a){var e,t,i,n,s,r,l;return a.x-=this.x0,a.y-=this.y0,e=Math.sqrt(a.x*a.x+a.y*a.y),t=Rh(e/this.a),i=Math.sin(t),n=Math.cos(t),r=this.long0,Math.abs(e)<=Ht?(l=this.lat0,a.x=r,a.y=l,a):(l=Rh(n*this.sin_p14+a.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-Ct,Math.abs(s)<=Ht?(this.lat0>=0?r=Jt(this.long0+Math.atan2(a.x,-a.y)):r=Jt(this.long0-Math.atan2(-a.x,a.y)),a.x=r,a.y=l,a):(r=Jt(this.long0+Math.atan2(a.x*i,e*this.cos_p14*n-a.y*this.sin_p14*i)),a.x=r,a.y=l,a))}var tQ=["ortho"];const aQ={init:QJ,forward:$J,inverse:eQ,names:tQ};var qn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},tn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function iQ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ct-en/2?this.face=qn.TOP:this.lat0<=-(Ct-en/2)?this.face=qn.BOTTOM:Math.abs(this.long0)<=en?this.face=qn.FRONT:Math.abs(this.long0)<=Ct+en?this.face=this.long0>0?qn.RIGHT:qn.LEFT:this.face=qn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function nQ(a){var e={x:0,y:0},t,i,n,s,r,l,c={value:0};if(a.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(a.y)):t=a.y,i=a.x,this.face===qn.TOP)s=Ct-t,i>=en&&i<=Ct+en?(c.value=tn.AREA_0,n=i-Ct):i>Ct+en||i<=-(Ct+en)?(c.value=tn.AREA_1,n=i>0?i-vr:i+vr):i>-(Ct+en)&&i<=-en?(c.value=tn.AREA_2,n=i+Ct):(c.value=tn.AREA_3,n=i);else if(this.face===qn.BOTTOM)s=Ct+t,i>=en&&i<=Ct+en?(c.value=tn.AREA_0,n=-i+Ct):i<en&&i>=-en?(c.value=tn.AREA_1,n=-i):i<-en&&i>=-(Ct+en)?(c.value=tn.AREA_2,n=-i-Ct):(c.value=tn.AREA_3,n=i>0?-i+vr:-i-vr);else{var h,g,b,v,C,S,L;this.face===qn.RIGHT?i=xp(i,+Ct):this.face===qn.BACK?i=xp(i,+vr):this.face===qn.LEFT&&(i=xp(i,-Ct)),v=Math.sin(t),C=Math.cos(t),S=Math.sin(i),L=Math.cos(i),h=C*L,g=C*S,b=v,this.face===qn.FRONT?(s=Math.acos(h),n=hv(s,b,g,c)):this.face===qn.RIGHT?(s=Math.acos(g),n=hv(s,b,-h,c)):this.face===qn.BACK?(s=Math.acos(-h),n=hv(s,b,-g,c)):this.face===qn.LEFT?(s=Math.acos(-g),n=hv(s,b,h,c)):(s=n=0,c.value=tn.AREA_0)}return l=Math.atan(12/vr*(n+Math.acos(Math.sin(n)*Math.cos(en))-Ct)),r=Math.sqrt((1-Math.cos(s))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(n))))),c.value===tn.AREA_1?l+=Ct:c.value===tn.AREA_2?l+=vr:c.value===tn.AREA_3&&(l+=1.5*vr),e.x=r*Math.cos(l),e.y=r*Math.sin(l),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,a.x=e.x,a.y=e.y,a}function rQ(a){var e={lam:0,phi:0},t,i,n,s,r,l,c,h,g,b={value:0};if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,i=Math.atan(Math.sqrt(a.x*a.x+a.y*a.y)),t=Math.atan2(a.y,a.x),a.x>=0&&a.x>=Math.abs(a.y)?b.value=tn.AREA_0:a.y>=0&&a.y>=Math.abs(a.x)?(b.value=tn.AREA_1,t-=Ct):a.x<0&&-a.x>=Math.abs(a.y)?(b.value=tn.AREA_2,t=t<0?t+vr:t-vr):(b.value=tn.AREA_3,t+=Ct),g=vr/12*Math.tan(t),r=Math.sin(g)/(Math.cos(g)-1/Math.sqrt(2)),l=Math.atan(r),n=Math.cos(t),s=Math.tan(i),c=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(l)))),c<-1?c=-1:c>1&&(c=1),this.face===qn.TOP)h=Math.acos(c),e.phi=Ct-h,b.value===tn.AREA_0?e.lam=l+Ct:b.value===tn.AREA_1?e.lam=l<0?l+vr:l-vr:b.value===tn.AREA_2?e.lam=l-Ct:e.lam=l;else if(this.face===qn.BOTTOM)h=Math.acos(c),e.phi=h-Ct,b.value===tn.AREA_0?e.lam=-l+Ct:b.value===tn.AREA_1?e.lam=-l:b.value===tn.AREA_2?e.lam=-l-Ct:e.lam=l<0?-l-vr:-l+vr;else{var v,C,S;v=c,g=v*v,g>=1?S=0:S=Math.sqrt(1-g)*Math.sin(l),g+=S*S,g>=1?C=0:C=Math.sqrt(1-g),b.value===tn.AREA_1?(g=C,C=-S,S=g):b.value===tn.AREA_2?(C=-C,S=-S):b.value===tn.AREA_3&&(g=C,C=S,S=-g),this.face===qn.RIGHT?(g=v,v=-C,C=g):this.face===qn.BACK?(v=-v,C=-C):this.face===qn.LEFT&&(g=v,v=C,C=-g),e.phi=Math.acos(-S)-Ct,e.lam=Math.atan2(C,v),this.face===qn.RIGHT?e.lam=xp(e.lam,-Ct):this.face===qn.BACK?e.lam=xp(e.lam,-vr):this.face===qn.LEFT&&(e.lam=xp(e.lam,+Ct))}if(this.es!==0){var L,R,G;L=e.phi<0?1:0,R=Math.tan(e.phi),G=this.b/Math.sqrt(R*R+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-G*G)/(this.one_minus_f*G)),L&&(e.phi=-e.phi)}return e.lam+=this.long0,a.x=e.lam,a.y=e.phi,a}function hv(a,e,t,i){var n;return a<Ht?(i.value=tn.AREA_0,n=0):(n=Math.atan2(e,t),Math.abs(n)<=en?i.value=tn.AREA_0:n>en&&n<=Ct+en?(i.value=tn.AREA_1,n-=Ct):n>Ct+en||n<=-(Ct+en)?(i.value=tn.AREA_2,n=n>=0?n-vr:n+vr):(i.value=tn.AREA_3,n+=Ct)),n}function xp(a,e){var t=a+e;return t<-vr?t+=X0:t>+vr&&(t-=X0),t}var sQ=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const oQ={init:iQ,forward:nQ,inverse:rQ,names:sQ};var PS=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],By=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],lW=.8487,uW=1.3523,cW=Xu/5,lQ=1/cW,ip=18,ux=function(a,e){return a[0]+e*(a[1]+e*(a[2]+e*a[3]))},uQ=function(a,e){return a[1]+e*(2*a[2]+e*3*a[3])};function cQ(a,e,t,i){for(var n=e;i;--i){var s=a(n);if(n-=s,Math.abs(s)<t)break}return n}function dQ(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function hQ(a){var e=Jt(a.x-this.long0),t=Math.abs(a.y),i=Math.floor(t*cW);i<0?i=0:i>=ip&&(i=ip-1),t=Xu*(t-lQ*i);var n={x:ux(PS[i],t)*e,y:ux(By[i],t)};return a.y<0&&(n.y=-n.y),n.x=n.x*this.a*lW+this.x0,n.y=n.y*this.a*uW+this.y0,n}function _Q(a){var e={x:(a.x-this.x0)/(this.a*lW),y:Math.abs(a.y-this.y0)/(this.a*uW)};if(e.y>=1)e.x/=PS[ip][0],e.y=a.y<0?-Ct:Ct;else{var t=Math.floor(e.y*ip);for(t<0?t=0:t>=ip&&(t=ip-1);;)if(By[t][0]>e.y)--t;else if(By[t+1][0]<=e.y)++t;else break;var i=By[t],n=5*(e.y-i[0])/(By[t+1][0]-i[0]);n=cQ(function(s){return(ux(i,s)-e.y)/uQ(i,s)},n,Ht,100),e.x/=ux(PS[t],n),e.y=(5*t+n)*ms,a.y<0&&(e.y=-e.y)}return e.x=Jt(e.x+this.long0),e}var mQ=["Robinson","robin"];const gQ={init:dQ,forward:hQ,inverse:_Q,names:mQ};function pQ(){this.name="geocent"}function fQ(a){var e=J7(a,this.es,this.a);return e}function yQ(a){var e=Q7(a,this.es,this.a,this.b);return e}var bQ=["Geocentric","geocentric","geocent","Geocent"];const vQ={init:pQ,forward:fQ,inverse:yQ,names:bQ};var Rs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},wy={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function xQ(){if(Object.keys(wy).forEach((function(t){if(typeof this[t]>"u")this[t]=wy[t].def;else{if(wy[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);wy[t].num&&(this[t]=parseFloat(this[t]))}wy[t].degrees&&(this[t]=this[t]*ms)}).bind(this)),Math.abs(Math.abs(this.lat0)-Ct)<Ht?this.mode=this.lat0<0?Rs.S_POLE:Rs.N_POLE:Math.abs(this.lat0)<Ht?this.mode=Rs.EQUIT:(this.mode=Rs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var a=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(a),this.sw=Math.sin(a)}function wQ(a){a.x-=this.long0;var e=Math.sin(a.y),t=Math.cos(a.y),i=Math.cos(a.x),n,s;switch(this.mode){case Rs.OBLIQ:s=this.sinph0*e+this.cosph0*t*i;break;case Rs.EQUIT:s=t*i;break;case Rs.S_POLE:s=-e;break;case Rs.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),n=s*t*Math.sin(a.x),this.mode){case Rs.OBLIQ:s*=this.cosph0*e-this.sinph0*t*i;break;case Rs.EQUIT:s*=e;break;case Rs.N_POLE:s*=-(t*i);break;case Rs.S_POLE:s*=t*i;break}var r,l;return r=s*this.cg+n*this.sg,l=1/(r*this.sw*this.h1+this.cw),n=(n*this.cg-s*this.sg)*this.cw*l,s=r*l,a.x=n*this.a,a.y=s*this.a,a}function IQ(a){a.x/=this.a,a.y/=this.a;var e={x:a.x,y:a.y},t,i,n;n=1/(this.pn1-a.y*this.sw),t=this.pn1*a.x*n,i=this.pn1*a.y*this.cw*n,a.x=t*this.cg+i*this.sg,a.y=i*this.cg-t*this.sg;var s=Eo(a.x,a.y);if(Math.abs(s)<Ht)e.x=0,e.y=a.y;else{var r,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),r=Math.sqrt(1-l*l),this.mode){case Rs.OBLIQ:e.y=Math.asin(r*this.sinph0+a.y*l*this.cosph0/s),a.y=(r-this.sinph0*Math.sin(e.y))*s,a.x*=l*this.cosph0;break;case Rs.EQUIT:e.y=Math.asin(a.y*l/s),a.y=r*s,a.x*=l;break;case Rs.N_POLE:e.y=Math.asin(r),a.y=-a.y;break;case Rs.S_POLE:e.y=-Math.asin(r);break}e.x=Math.atan2(a.x,a.y)}return a.x=e.x+this.long0,a.y=e.y,a}var CQ=["Tilted_Perspective","tpers"];const AQ={init:xQ,forward:wQ,inverse:IQ,names:CQ};function SQ(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var a=1-this.es,e=1/a;this.radius_p=Math.sqrt(a),this.radius_p2=a,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function TQ(a){var e=a.x,t=a.y,i,n,s,r;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var l=this.radius_p/Eo(this.radius_p*Math.cos(t),Math.sin(t));if(n=l*Math.cos(e)*Math.cos(t),s=l*Math.sin(e)*Math.cos(t),r=l*Math.sin(t),(this.radius_g-n)*n-s*s-r*r*this.radius_p_inv2<0)return a.x=Number.NaN,a.y=Number.NaN,a;i=this.radius_g-n,this.flip_axis?(a.x=this.radius_g_1*Math.atan(s/Eo(r,i)),a.y=this.radius_g_1*Math.atan(r/i)):(a.x=this.radius_g_1*Math.atan(s/i),a.y=this.radius_g_1*Math.atan(r/Eo(s,i)))}else this.shape==="sphere"&&(i=Math.cos(t),n=Math.cos(e)*i,s=Math.sin(e)*i,r=Math.sin(t),i=this.radius_g-n,this.flip_axis?(a.x=this.radius_g_1*Math.atan(s/Eo(r,i)),a.y=this.radius_g_1*Math.atan(r/i)):(a.x=this.radius_g_1*Math.atan(s/i),a.y=this.radius_g_1*Math.atan(r/Eo(s,i))));return a.x=a.x*this.a,a.y=a.y*this.a,a}function EQ(a){var e=-1,t=0,i=0,n,s,r,l;if(a.x=a.x/this.a,a.y=a.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(a.y/this.radius_g_1),t=Math.tan(a.x/this.radius_g_1)*Eo(1,i)):(t=Math.tan(a.x/this.radius_g_1),i=Math.tan(a.y/this.radius_g_1)*Eo(1,t));var c=i/this.radius_p;if(n=t*t+c*c+e*e,s=2*this.radius_g*e,r=s*s-4*n*this.C,r<0)return a.x=Number.NaN,a.y=Number.NaN,a;l=(-s-Math.sqrt(r))/(2*n),e=this.radius_g+l*e,t*=l,i*=l,a.x=Math.atan2(t,e),a.y=Math.atan(i*Math.cos(a.x)/e),a.y=Math.atan(this.radius_p_inv2*Math.tan(a.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(a.y/this.radius_g_1),t=Math.tan(a.x/this.radius_g_1)*Math.sqrt(1+i*i)):(t=Math.tan(a.x/this.radius_g_1),i=Math.tan(a.y/this.radius_g_1)*Math.sqrt(1+t*t)),n=t*t+i*i+e*e,s=2*this.radius_g*e,r=s*s-4*n*this.C,r<0)return a.x=Number.NaN,a.y=Number.NaN,a;l=(-s-Math.sqrt(r))/(2*n),e=this.radius_g+l*e,t*=l,i*=l,a.x=Math.atan2(t,e),a.y=Math.atan(i*Math.cos(a.x)/e)}return a.x=a.x+this.long0,a}var MQ=["Geostationary Satellite View","Geostationary_Satellite","geos"];const LQ={init:SQ,forward:TQ,inverse:EQ,names:MQ};var o0=1.340264,l0=-.081106,u0=893e-6,c0=.003796,cx=Math.sqrt(3)/2;function RQ(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function kQ(a){var e=Jt(a.x-this.long0),t=a.y,i=Math.asin(cx*Math.sin(t)),n=i*i,s=n*n*n;return a.x=e*Math.cos(i)/(cx*(o0+3*l0*n+s*(7*u0+9*c0*n))),a.y=i*(o0+l0*n+s*(u0+c0*n)),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function WQ(a){a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a;var e=1e-9,t=12,i=a.y,n,s,r,l,c,h;for(h=0;h<t&&(n=i*i,s=n*n*n,r=i*(o0+l0*n+s*(u0+c0*n))-a.y,l=o0+3*l0*n+s*(7*u0+9*c0*n),i-=c=r/l,!(Math.abs(c)<e));++h);return n=i*i,s=n*n*n,a.x=cx*a.x*(o0+3*l0*n+s*(7*u0+9*c0*n))/Math.cos(i),a.y=Math.asin(Math.sin(i)/cx),a.x=Jt(a.x+this.long0),a}var GQ=["eqearth","Equal Earth","Equal_Earth"];const OQ={init:RQ,forward:kQ,inverse:WQ,names:GQ};var K0=1e-10;function PQ(){var a;if(this.phi1=this.lat1,Math.abs(this.phi1)<K0)throw new Error;this.es?(this.en=p3(this.es),this.m1=sf(this.phi1,this.am1=Math.sin(this.phi1),a=Math.cos(this.phi1),this.en),this.am1=a/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=FQ,this.forward=BQ):(Math.abs(this.phi1)+K0>=Ct?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=DQ,this.forward=NQ)}function BQ(a){var e=Jt(a.x-(this.long0||0)),t=a.y,i,n,s;return i=this.am1+this.m1-sf(t,n=Math.sin(t),s=Math.cos(t),this.en),n=s*e/(i*Math.sqrt(1-this.es*n*n)),a.x=i*Math.sin(n),a.y=this.am1-i*Math.cos(n),a.x=this.a*a.x+(this.x0||0),a.y=this.a*a.y+(this.y0||0),a}function FQ(a){a.x=(a.x-(this.x0||0))/this.a,a.y=(a.y-(this.y0||0))/this.a;var e,t,i,n;if(t=Eo(a.x,a.y=this.am1-a.y),n=f3(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(n))<Ct)e=Math.sin(n),i=t*Math.atan2(a.x,a.y)*Math.sqrt(1-this.es*e*e)/Math.cos(n);else if(Math.abs(e-Ct)<=K0)i=0;else throw new Error;return a.x=Jt(i+(this.long0||0)),a.y=Vh(n),a}function NQ(a){var e=Jt(a.x-(this.long0||0)),t=a.y,i,n;return n=this.cphi1+this.phi1-t,Math.abs(n)>K0?(a.x=n*Math.sin(i=e*Math.cos(t)/n),a.y=this.cphi1-n*Math.cos(i)):a.x=a.y=0,a.x=this.a*a.x+(this.x0||0),a.y=this.a*a.y+(this.y0||0),a}function DQ(a){a.x=(a.x-(this.x0||0))/this.a,a.y=(a.y-(this.y0||0))/this.a;var e,t,i=Eo(a.x,a.y=this.cphi1-a.y);if(t=this.cphi1+this.phi1-i,Math.abs(t)>Ct)throw new Error;return Math.abs(Math.abs(t)-Ct)<=K0?e=0:e=i*Math.atan2(a.x,a.y)/Math.cos(t),a.x=Jt(e+(this.long0||0)),a.y=Vh(t),a}var VQ=["bonne","Bonne (Werner lat_1=90)"];const ZQ={init:PQ,names:VQ};function zQ(a){a.Proj.projections.add(o2),a.Proj.projections.add(l2),a.Proj.projections.add(Bq),a.Proj.projections.add(Yq),a.Proj.projections.add($q),a.Proj.projections.add(nj),a.Proj.projections.add(cj),a.Proj.projections.add(gj),a.Proj.projections.add(vj),a.Proj.projections.add(Aj),a.Proj.projections.add(Zj),a.Proj.projections.add(Kj),a.Proj.projections.add($j),a.Proj.projections.add(rJ),a.Proj.projections.add(cJ),a.Proj.projections.add(gJ),a.Proj.projections.add(vJ),a.Proj.projections.add(AJ),a.Proj.projections.add(RJ),a.Proj.projections.add(PJ),a.Proj.projections.add(VJ),a.Proj.projections.add(HJ),a.Proj.projections.add(JJ),a.Proj.projections.add(aQ),a.Proj.projections.add(oQ),a.Proj.projections.add(gQ),a.Proj.projections.add(vQ),a.Proj.projections.add(AQ),a.Proj.projections.add(LQ),a.Proj.projections.add(OQ),a.Proj.projections.add(ZQ)}Bs.defaultDatum="WGS84";Bs.Proj=Ju;Bs.WGS84=new Bs.Proj("WGS84");Bs.Point=Vp;Bs.toPoint=$7;Bs.defs=Js;Bs.nadgrid=NK;Bs.transform=ox;Bs.mgrs=tq;Bs.version="__VERSION__";zQ(Bs);function dW(){var a,e,t;Bs.defs("EPSG:32632","+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs"),Bs.defs("EPSG:32631","+proj=utm +zone=31 +datum=WGS84 +units=m +no_defs"),Bs.defs("EPSG:2169","+proj=tmerc +lat_0=49.83333333333334 +lon_0=6.166666666666667 +k=1 +x_0=80000 +y_0=100000 +ellps=intl +towgs84=-189.681,18.3463,-42.7695,-0.33746,-3.09264,2.53861,0.4598 +units=m +no_defs"),JY(Bs),(a=Li("EPSG:32632"))==null||a.setExtent([166021.44,0,833978.55,932900518e-2]),(e=Li("EPSG:32631"))==null||e.setExtent([166021.44,0,833978.55,932900518e-2]),(t=Li("EPSG:2169"))==null||t.setExtent([48225.17,56225.6,105842.04,139616.4])}const UQ="main",XQ="root_3d",HQ=-222,ps=rl("config",()=>{const a=Wi(),e=Qe(UQ),t=Ft(()=>{var c;return(c=a.value)==null?void 0:c.themes}),i=Ft(()=>{var c;return(c=t.value)==null?void 0:c.find(h=>h.name===e.value)}),n=Ft(()=>{var c;return((c=a.value)==null?void 0:c.background_layers)||[]}),s=Ft(()=>{var h;const c=(h=t.value)==null?void 0:h.filter(g=>{var b;return((b=g.metadata)==null?void 0:b.ol3d_type)!==void 0});if(c)return{name:XQ,id:HQ,children:c.flatMap(g=>g!=null&&g.children?g.children:g),metadata:{}}});function r(c){a.value=c}function l(c){e.value=decodeURIComponent(c)}return{config:a,themes:t,themeName:e,theme:i,bgLayers:n,layerTrees_3d:s,setTheme:l,setThemes:r}},{}),YQ=()=>({ogcServers:{"source for config://my_maps?category_id=117":{url:"https://ws.geoportail.lu/mymaps?category_id=117",urlWfs:"https://ws.geoportail.lu/mymaps?category_id=117",type:"mapserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!0,namespace:null,attributes:null},"source for image/jpeg":{url:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fjpeg&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",urlWfs:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fjpeg&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",type:"mapserver",credential:!0,imageType:"image/jpeg",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"Internal WMS Geoserver":{url:"https://migration.geoportail.lu/ogcproxywms",urlWfs:"https://migration.geoportail.lu/ogcproxywms",type:"geoserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"Internal WMS":{url:"https://migration.geoportail.lu/ogcproxywms",urlWfs:"https://migration.geoportail.lu/ogcproxywms",type:"mapserver",credential:!1,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null},"source for image/png":{url:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fpng&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",urlWfs:"https://migration.geoportail.lu/mapserv_proxy?ogcserver=source+for+image%2Fpng&cache_version=ddc9f661fc1b496c919d096d89f6f3fb",type:"mapserver",credential:!0,imageType:"image/png",wfsSupport:!1,isSingleTile:!1,namespace:null,attributes:null}},themes:[{id:116,name:"main",icon:"main",children:[{id:2841,name:"Couches populaires",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2846,name:"Couches récentes",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{is_expanded:!1},mixed:!0},{id:242,name:"basisden",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:248,name:"flurstucke_grundstucke",children:[{id:359,name:"parcels",metadata:{exclusion:'[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,"exclusion_ortho2022","exclusion_ortho2022IR","exclusion_ortho2023","exclusion_ortho2023_bati","exclusion_ortho2023IR"]',is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels",imageType:"image/png"},{id:353,name:"parcels_labels",metadata:{metadata_id:"a65629c7-ddd6-43de-b0c3-c49647d8fd2b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels_labels",imageType:"image/png"},{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"},{id:320,name:"toponymes",metadata:{metadata_id:"ffa537f7-a438-47da-9e0c-8e32260646a9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"toponymes",imageType:"image/png"},{id:350,name:"communes_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"5ae8fdfb-bb8f-4f72-b7ee-36c7664fe4b5"},dimensions:{},type:"WMS",layers:"communes_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales_labels__COMMUNES_CADASTRALES_LABELS"}]},{id:153,name:"communes_cadastrales",metadata:{is_queryable:!0,metadata_id:"8a95f8b2-2cfb-42e7-a51c-02084228b364"},dimensions:{},type:"WMS",layers:"communes_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales__COMMUNES_CADASTRALES"}]},{id:266,name:"sections_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"69d1b609-11f7-4587-872a-508ee98ea76c"},dimensions:{},type:"WMS",layers:"sections_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales_labels__SECTIONS_CADASTRALES_LABELS"}]},{id:355,name:"sections_cadastrales",metadata:{is_queryable:!0,metadata_id:"c9122320-8f06-4499-ac86-eb469e911369"},dimensions:{},type:"WMS",layers:"sections_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales__SECTIONS_CADASTRALES"}]},{id:256,name:"feuilles_cadastrales",metadata:{is_queryable:!0,metadata_id:"51333029-c8cf-490f-b4a6-80ba239f0cb4"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales__FEUILLES_CADASTRALES"}]},{id:417,name:"remembrements",metadata:{exclusion:"[301,302,303,304,305,306,307,308,309,310]",is_queryable:!0,max_dpi:128,metadata_id:"03d079f3-61fb-48bc-ab39-f3427b208702",start_opacity:.7},dimensions:{},type:"WMS",layers:"remembrements",imageType:"image/png",style:"default",childLayers:[{name:"remembrements__0"},{name:"remembrements__1"}]},{id:1643,name:"act_grid_land_tenure",children:[{id:1644,name:"act_privately_owned_land",metadata:{is_queryable:!0,legend_name:"act:privately",metadata_id:"75cb5ae7-7c48-478f-b2a6-1e5bfbdd5958"},dimensions:{},type:"WMS",layers:"act_privately_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_privately_owned_land__6"}]},{id:1645,name:"act_state_owned_land",metadata:{is_queryable:!0,legend_name:"act:stateowned",metadata_id:"e8813b4e-43c4-4a72-853e-bd7c06fd1111"},dimensions:{},type:"WMS",layers:"act_state_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_state_owned_land__5"}]},{id:1646,name:"act_municipality_owned_land",metadata:{is_queryable:!0,legend_name:"act:municipality",metadata_id:"89d42e03-93ae-444f-a49e-eb869b30071e"},dimensions:{},type:"WMS",layers:"act_municipality_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_municipality_owned_land__4"}]},{id:1647,name:"act_domainepublic_owned_land",metadata:{is_queryable:!0,legend_name:"act:domainepublic",metadata_id:"ac32c380-37df-4594-bbf2-0fd394482fd9"},dimensions:{},type:"WMS",layers:"act_domainepublic_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_domainepublic_owned_land__1"}]},{id:1648,name:"act_publicly_owned_land",metadata:{is_queryable:!0,legend_name:"act:publicly",metadata_id:"0a1852f5-1f32-4bdc-8bbc-d6103921d862"},dimensions:{},type:"WMS",layers:"act_publicly_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_publicly_owned_land__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:291,name:"topographische_karten",children:[{id:295,name:"topo",metadata:{exclusion:"[33,43]",metadata_id:"fe530846-9991-455e-a036-edcde4c3c566"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo",imageType:"image/png"},{id:223,name:"topo_250k",metadata:{metadata_id:"e1f601a5-ed8f-4043-8719-0cad50cbb483"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_250k",imageType:"image/png"},{id:1730,name:"topo_100k_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"ce051f08-bca6-43c0-af7b-5fcf3e02376e"},dimensions:{},type:"WMS",layers:"topo_100k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_2019__topo_100k"}]},{id:1729,name:"topo_100k_BW_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"8d02ddc3-8482-4e47-8ee0-520af99d4966"},dimensions:{},type:"WMS",layers:"topo_100k_BW_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_BW_2019__topo_100k_bw"}]},{id:1727,name:"topo_50k_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"abc505e1-224c-455e-9e7f-4f094eb4e7b0"},dimensions:{},type:"WMS",layers:"topo_50k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_2019__50K-2019-LUX_avec_ETRANGER"}]},{id:1728,name:"topo_50k_BW_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"b8ccc3e8-fcf0-479c-b322-c0aee5a480e5"},dimensions:{},type:"WMS",layers:"topo_50k_BW_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_BW_2019__50K-2019-LUX_avec_ETRANGER-BW"}]},{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"},{id:149,name:"topo_tour_20k",metadata:{legend_name:"topo_tour_20k",metadata_id:"1173_"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_tour_20k",imageType:"image/png"},{id:265,name:"topo_decoupage_r",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_r",imageType:"image/png"},{id:195,name:"topo_5k",metadata:{exclusion:"[32,42]",legend_name:"topo_5k",metadata_id:"270_2012"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_5k",imageType:"image/png"},{id:313,name:"topo_carteshisto",children:[{id:2615,name:"FERRARIS",metadata:{metadata_id:"783cb2a8-a143-4263-aaf0-b4f032835e0c"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"FERRARIS",imageType:"image/png"},{id:328,name:"1907_CAHANSEN",metadata:{metadata_id:"b88e6524-67d3-4e34-b998-6f30120e3718"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"1907_CAHANSEN",imageType:"image/png"},{id:252,name:"1927_CAHANSEN",metadata:{metadata_id:"90750f9f-856d-41ac-a90f-a8befbd75434"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"1927_CAHANSEN",imageType:"image/png"},{id:220,name:"TOPO_CARTES_1944",metadata:{metadata_id:"e78c1d0a-ef3d-4552-9bba-f72a1d1d3173"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTES_1944",imageType:"image/png"},{id:2616,name:"TOPO_CARTEHISTO_1950",metadata:{metadata_id:"f29901f2-c4b0-4250-a332-640e25a84d2e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"TOPO_CARTEHISTO_1950",imageType:"image/png"},{id:274,name:"TOPO25K1954C24",metadata:{metadata_id:"7a8bc9a4-e7c7-4584-bc4f-03deaf7b69b2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO25K1954C24",imageType:"image/png"},{id:201,name:"TOPO_CARTESHISTO_1964",metadata:{metadata_id:"58bec8c3-c9f1-44ba-ab3a-860122694952"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1964",imageType:"image/png"},{id:173,name:"TOPO_CARTESHISTO_1964_RGB",metadata:{metadata_id:"27818c9d-19f1-4c3c-bcf6-0856d766d27d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1964_RGB",imageType:"image/png"},{id:217,name:"TOPO_CARTESHISTO_1966-74_50k",metadata:{metadata_id:"0cda7940-0268-4595-97ed-ae5854da628b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1966-74_50k",imageType:"image/png"},{id:156,name:"TOPO_CARTESHISTO_1979",metadata:{metadata_id:"6c2b8b34-0eb8-4b2c-8586-e8a515ad1860"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1979",imageType:"image/png"},{id:191,name:"TOPO_CARTESHISTO_1979_RGB",metadata:{metadata_id:"44675358-e65a-4e3b-ac6f-e4f19fd7bfb5"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1979_RGB",imageType:"image/png"},{id:285,name:"TOPO_CARTESHISTO_1989",metadata:{metadata_id:"d3e2a6d0-52b6-4f06-b833-021647f6de4c"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1989",imageType:"image/png"},{id:185,name:"TOPO_CARTESHISTO_1990_50k",metadata:{metadata_id:"b68a8131-2e42-40de-99ce-5a1433d80cbf"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1990_50k",imageType:"image/png"},{id:299,name:"TOPO_CARTESHISTO_1993_50k",metadata:{metadata_id:"f15bf68d-593f-422a-b855-2e05dfb34fcc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_1993_50k",imageType:"image/png"},{id:278,name:"TOPO_CARTESHISTO_2000_50k",metadata:{metadata_id:"ccdd1b07-401d-48cb-821d-1ae51d489f36"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_2000_50k",imageType:"image/png"},{id:237,name:"TOPO_CARTESHISTO_2000",metadata:{metadata_id:"21a56aff-4a9e-4be5-9ed8-cd60dd56d5a1"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"TOPO_CARTESHISTO_2000",imageType:"image/png"},{id:155,name:"topo_50k",metadata:{legend_name:"topo_50k",metadata_id:"262"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_50k",imageType:"image/png"}],metadata:{},mixed:!0},{id:734,name:"utm_grid",metadata:{max_dpi:128,metadata_id:"84f59e51-2772-4b6d-8c5b-3ec19aa7d8f2"},dimensions:{},type:"WMS",layers:"utm_grid",imageType:"image/png",style:"default",childLayers:[{name:"utm_grid__2"},{name:"utm_grid__3"}]},{id:738,name:"luref_graticules",metadata:{max_dpi:128,metadata_id:"0d1a431c-36b0-406f-8cfd-d264d4949bf0"},dimensions:{},type:"WMS",layers:"luref_graticules",imageType:"image/png",style:"default",childLayers:[{name:"luref_graticules__0"},{name:"luref_graticules__1"}]}],metadata:{},mixed:!0},{id:330,name:"geodesy",children:[{id:1831,name:"ng_new",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng_new",imageType:"image/png",style:"default",childLayers:[{name:"ng_new__0"}]},{id:411,name:"ng",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng",imageType:"image/png",style:"default",childLayers:[{name:"ng__POINT_NG"}]},{id:1724,name:"points_reference_gps",metadata:{is_queryable:!0,metadata_id:"fd406ca9-2542-4de9-8cee-7ee0a16c7f42"},dimensions:{},type:"WMS",layers:"points_reference_gps",imageType:"image/png",style:"default",childLayers:[{name:"points_reference_gps__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:555,name:"editus_pois",children:[{id:542,name:"editus_poi_299",metadata:{is_queryable:!0,legend_name:"editus_1",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"542",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_299__POI"}]},{id:543,name:"editus_poi_286",metadata:{is_queryable:!0,legend_name:"editus_2",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"543",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_286__POI"}]},{id:544,name:"editus_poi_285",metadata:{is_queryable:!0,legend_name:"editus_3",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"544",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_285__POI"}]},{id:545,name:"editus_poi_287",metadata:{is_queryable:!0,legend_name:"editus_4",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"545",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_287__POI"}]},{id:546,name:"editus_poi_289",metadata:{is_queryable:!0,legend_name:"editus_5",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"546",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_289__POI"}]},{id:547,name:"editus_poi_290",metadata:{is_queryable:!0,legend_name:"editus_6",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"547",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_290__POI"}]},{id:549,name:"editus_poi_291",metadata:{is_queryable:!0,legend_name:"editus_7",metadata_id:"4a04ebff-4954-4c4d-9387-46d3587eccef",start_opacity:.9},dimensions:{},type:"WMS",layers:"549",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_291__POI"}]},{id:550,name:"editus_poi_292",metadata:{is_queryable:!0,legend_name:"editus_8",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"550",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_292__POI"}]},{id:551,name:"editus_poi_293",metadata:{is_queryable:!0,legend_name:"editus_9",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"551",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_293__POI"}]},{id:548,name:"editus_poi_294",metadata:{is_queryable:!0,legend_name:"editus_10",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"548",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_294__POI"}]},{id:552,name:"editus_poi_295",metadata:{is_queryable:!0,legend_name:"editus_11",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"552",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_295__POI"}]},{id:553,name:"editus_poi_296",metadata:{is_queryable:!0,legend_name:"editus_12",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"553",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_296__POI"}]},{id:554,name:"editus_poi_298",metadata:{is_queryable:!0,legend_name:"editus_13",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"554",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_298__POI"}]}],metadata:{},mixed:!0},{id:194,name:"infrastrucktur_une_kommunikation",children:[{id:339,name:"gebaude",children:[{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"}],metadata:{},mixed:!0},{id:196,name:"verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:812,name:"cdt_lignes_bus_par_operateur",children:[{id:814,name:"cdt_lignes_avl",metadata:{is_queryable:!0,metadata_id:"1e6f614b-e347-4115-82d7-74a72f51389f"},dimensions:{},type:"WMS",layers:"cdt_lignes_avl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_avl__category"}]},{id:815,name:"cdt_lignes_rgtr",metadata:{is_queryable:!0,metadata_id:"eae3ed54-d2ae-45ae-a62c-0dec4d44acdf"},dimensions:{},type:"WMS",layers:"cdt_lignes_rgtr",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_rgtr__category"}]},{id:816,name:"cdt_lignes_tice",metadata:{is_queryable:!0,metadata_id:"a3cb973c-12b0-4e41-bfc0-b2fb67637513"},dimensions:{},type:"WMS",layers:"cdt_lignes_tice",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tice__category"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:352,name:"cfl_hecto",metadata:{is_queryable:!0,metadata_id:"938f9e8e-071c-4e6b-940f-64b2a60eca74"},dimensions:{},type:"WMS",layers:"cfl_hecto",imageType:"image/png",style:"default",childLayers:[{name:"cfl_hecto__points_hecto"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:686,name:"cita_chantiers_futur",metadata:{is_queryable:!0,metadata_id:"063cb796-640f-4ab0-8430-955983a00e3b",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_futur",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_futur__CHANTIERS_FUTUR"}]},{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:2729,name:"pch_points_repere",metadata:{geocatalog_open_data_last_update_date:"2024-07-26T08:50:03.7336833",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a3633bcf73e6f52fd83901",is_queryable:!0,metadata_id:"1dbe9ca0-638e-4034-94ef-c8a12fdaa57a"},dimensions:{},type:"WMS",layers:"pch_points_repere",imageType:"image/png",style:"default",childLayers:[{name:"pch_points_repere__6"}]}],metadata:{},mixed:!0},{id:1495,name:"fourniture_energie",children:[{id:1494,name:"gaz_naturel",metadata:{is_queryable:!0,legend_name:"gaz",metadata_id:"9e04e366-fcb7-4836-8d09-41b20f280cb0",start_opacity:.75},dimensions:{},type:"WMS",layers:"gaz_naturel",imageType:"image/png",style:"default",childLayers:[{name:"gaz_naturel__1"},{name:"gaz_naturel__3"}]}],metadata:{},mixed:!0},{id:2354,name:"ilr_couverture",children:[{id:2355,name:"ilr_couverture_selon_technologie",children:[{id:2351,name:"ilr_vhcn",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"30ced97b-5b19-4ef0-bf25-cad75bcf3f74",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_vhcn_adresses",imageType:"image/png",childLayers:[{name:"ilr_vhcn__1"},{name:"ilr_vhcn__2"},{name:"ilr_vhcn__3"}]},{id:2352,name:"ilr_fibre_optique",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"8ae6a358-f7ee-4d5e-81e2-5407dd34cc4e",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_fibre_optique",imageType:"image/png",childLayers:[{name:"ilr_fibre_optique__5"},{name:"ilr_fibre_optique__6"},{name:"ilr_fibre_optique__7"}]},{id:2353,name:"ilr_docsis",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"2dd35dd3-381b-405e-b870-1489698ddd23",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_docsis",imageType:"image/png",childLayers:[{name:"ilr_docsis__9"},{name:"ilr_docsis__10"},{name:"ilr_docsis__11"}]}],metadata:{},mixed:!0},{id:2367,name:"ilr_reseau_mobile_group",children:[{id:2356,name:"ilr_technologie_5G",children:[{id:2363,name:"ilr_technologie_5G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,legend_name:"ilr_vitesse_realisable_5g",metadata_id:"72954d5b-29dd-47ea-a5d8-bf6f3b3ec832",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_vitesse_max__99"}]},{id:2361,name:"ilr_technologie_5G_Post",children:[{id:2369,name:"ilr_technologie_5G_post_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_satisfaisant__37"}]},{id:2370,name:"ilr_technologie_5G_post_tres_bien",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_tres_bien__40"}]},{id:2371,name:"ilr_technologie_5G_post_excellent",metadata:{exclusion:"[360]",metadata_id:"d4b2509f-9bc1-41b5-bcd4-c7086da93f14",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_post_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_post_excellent__43"}]}],metadata:{},mixed:!0},{id:2360,name:"ilr_technologie_5G_Proximus",children:[{id:2364,name:"ilr_technologie_5G_proximus_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_satisfaisant__61"}]},{id:2365,name:"ilr_technologie_5G_proximus_tres_bien",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_tres_bien__64"}]},{id:2366,name:"ilr_technologie_5G_proximus_excellent",metadata:{exclusion:"[360]",metadata_id:"e0e72895-45a1-46b9-87ce-0ed7d02ddce5",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_proximus_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_proximus_excellent__67"}]}],metadata:{},mixed:!0},{id:2362,name:"ilr_technologie_5G_Orange",children:[{id:2373,name:"ilr_technologie_5G_orange_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_satisfaisant__16"}]},{id:2572,name:"ilr_technologie_5G_orange_tresbien",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_tresbien",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_tresbien__1"}]},{id:2372,name:"ilr_technologie_5G_orange_excellent",metadata:{exclusion:"[360]",metadata_id:"aba4901e-7a64-4ac8-898f-24b8554177d6",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_5G_orange_excellent",imageType:"image/png",childLayers:[{name:"ilr_technologie_5G_orange_excellent__19"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2357,name:"ilr_technologie_4G",children:[{id:2374,name:"ilr_technologie_4G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,legend_name:"ilr_vitesse_realisable",metadata_id:"9eb3d402-080b-4443-9fc3-1cffa4c334bb",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_vitesse_max__88"}]},{id:2394,name:"ilr_technologie_4G_Post",children:[{id:2378,name:"ilr_technologie_4G_post_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_satisfaisant__28"}]},{id:2380,name:"ilr_technologie_4G_post_bien",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_bien__31"}]},{id:2379,name:"ilr_technologie_4G_post_tres_bien",metadata:{exclusion:"[360]",metadata_id:"d14aee71-6ad4-418c-bbf8-136317632163",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_post_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_post_tres_bien__34"}]}],metadata:{},mixed:!0},{id:2393,name:"ilr_technologie_4G_Proximus",children:[{id:2375,name:"ilr_technologie_4G_proximus_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_satisfaisant__52"}]},{id:2377,name:"ilr_technologie_4G_proximus_bien",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_bien__55"}]},{id:2376,name:"ilr_technologie_4G_proximus_tres_bien",metadata:{exclusion:"[360]",metadata_id:"71e3d058-b034-4cf4-bc6c-6c0bda6dde19",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_proximus_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_proximus_tres_bien__58"}]}],metadata:{},mixed:!0},{id:2395,name:"ilr_technologie_4G_Orange",children:[{id:2383,name:"ilr_technologie_4G_orange_satisfaisant",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_satisfaisant",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_satisfaisant__7"}]},{id:2381,name:"ilr_technologie_4G_orange_bien",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_bien__10"}]},{id:2382,name:"ilr_technologie_4G_orange_tres_bien",metadata:{exclusion:"[360]",metadata_id:"f5b0958f-7f6d-408f-9670-241a27697c3a",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_4G_orange_tres_bien",imageType:"image/png",childLayers:[{name:"ilr_technologie_4G_orange_tres_bien__13"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2358,name:"ilr_technologie_3G",children:[{id:2391,name:"ilr_technologie_3G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"9cef87ab-e423-4ea8-9f31-3b1473f05bfe",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_3G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_3G_vitesse_max__110"}]},{id:2387,name:"ilr_technologie_3G_orange",metadata:{exclusion:"[360]",metadata_id:"b7d64c10-a1be-4afc-9a70-686fd2cc4c02",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_3G_orange",imageType:"image/png",childLayers:[{name:"ilr_technologie_3G_orange__4"}]}],metadata:{},mixed:!0},{id:2368,name:"ilr_technologie_2G",children:[{id:2392,name:"ilr_technologie_2G_vitesse_max",metadata:{exclusion:"[360]",is_queryable:!0,metadata_id:"f5c6ed13-5ab1-4980-8b57-e247b0f57d88",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_vitesse_max",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_vitesse_max__77"}]},{id:2390,name:"ilr_technologie_2G_post",metadata:{exclusion:"[360]",metadata_id:"cc98e250-ab5a-4a1b-9dc8-2ffc689477ad",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_post",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_post__76"}]},{id:2389,name:"ilr_technologie_2G_proximus",metadata:{exclusion:"[360]",metadata_id:"c93f8596-313f-4068-ad4f-0f0b11a92853",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_proximus",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_proximus__46"}]},{id:2388,name:"ilr_technologie_2G_orange",metadata:{exclusion:"[360]",metadata_id:"4829085e-21b1-4c5c-945e-f731e812e29e",start_opacity:.8},dimensions:{},type:"WMS",layers:"ilr_technologie_2G_orange",imageType:"image/png",childLayers:[{name:"ilr_technologie_2G_orange__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2438,name:"seveso_group",children:[{id:798,name:"seveso",metadata:{is_queryable:!0,legend_name:"seveso",metadata_id:"b9ab14d8-4e51-4146-b019-3937715a8fe8"},dimensions:{},type:"WMS",layers:"seveso",imageType:"image/png",style:"default",childLayers:[{name:"seveso__POI"}]}],metadata:{},mixed:!0},{id:2276,name:"radio_group",children:[{id:2275,name:"smc_radio_haute_puissance",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2275",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_haute_puissance__POI"}]},{id:2278,name:"smc_radio_reseau_emission",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2278",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_reseau_emission__POI"}]},{id:2277,name:"smc_radio_locale",metadata:{is_queryable:!0,legend_name:"smc_radio",metadata_id:"ebfdb83f-dbc6-44fb-973d-5a782eed32e2"},dimensions:{},type:"WMS",layers:"2277",imageType:"image/png",style:"default",childLayers:[{name:"smc_radio_locale__POI"}]}],metadata:{},mixed:!0},{id:1832,name:"sante_group",children:[{id:1810,name:"sante_covid_altersheemer",metadata:{is_queryable:!0,legend_name:"structures_acceuil",metadata_id:"0019f21d-e492-42ce-83a9-f4212c43e2c6",start_opacity:.9},dimensions:{},type:"WMS",layers:"1810",imageType:"image/png",style:"default",childLayers:[{name:"sante_covid_altersheemer__POI"}]},{id:2004,name:"pharmacies",metadata:{is_queryable:!0,legend_name:"pharmacies",metadata_id:"4fed0407-cb2b-4c75-982a-e96f926d6b0d"},dimensions:{},type:"WMS",layers:"2004",imageType:"image/png",style:"default",childLayers:[{name:"pharmacies__POI"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:324,name:"oberflachendarstellung",children:[{id:178,name:"luft_und_satellitenbilder",children:[{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:2792,name:"ortho_2023",metadata:{exclusion:'["exclusion_ortho2023","exclusion_ortho2023_bati"]',metadata_id:"742d2a2e-eb7a-4a0b-a6d8-00d70831ef04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2023",imageType:"image/jpeg"},{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:345,name:"topo_decoupage_ortho",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_ortho",imageType:"image/png"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"},{id:341,name:"aero_1951_10k",metadata:{is_queryable:!0,metadata_id:"16586649-8e46-4b04-b75c-5537a4bf214e"},dimensions:{},type:"WMS",layers:"aero_1951_10k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_10k__1951_10k"}]},{id:229,name:"aero_1951_25k",metadata:{is_queryable:!0,metadata_id:"b3b5fc05-323c-4f0b-804c-a4c186d62a96"},dimensions:{},type:"WMS",layers:"aero_1951_25k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_25k__1951_25k"}]},{id:140,name:"aero_1963_20k",metadata:{is_queryable:!0,metadata_id:"56b65f04-d3ab-45b6-9e93-95c8c9524c3e"},dimensions:{},type:"WMS",layers:"aero_1963_20k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1963_20k__1963_20k"}]},{id:665,name:"aero_1977_30k",metadata:{is_queryable:!0,metadata_id:"d9dd951e-7345-4ba2-9a76-ce54305edf2f"},dimensions:{},type:"WMS",layers:"aero_1977_30k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1977_30k__1977_30k"}]},{id:743,name:"aero_1987_30k",metadata:{is_queryable:!0,metadata_id:"98b63794-8cb1-42ff-9872-214f990ec8cd"},dimensions:{},type:"WMS",layers:"aero_1987_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1987_30k__1987_30k"}]},{id:748,name:"aero_1994_30k",metadata:{is_queryable:!0,metadata_id:"abf7f6f5-8647-4317-98f6-8d4f5cd38585"},dimensions:{},type:"WMS",layers:"aero_1994_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1994_30k__1994_30k"}]},{id:790,name:"Orthophotos Infrarouge",children:[{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2595,name:"ortho2022_IR",metadata:{exclusion:'["exclusion_ortho2022IR","exclusion_ortho2022IR_bati"]',metadata_id:"c58ceaa0-d36d-4edf-ab68-ed1040bea10c"},dimensions:{},type:"WMS",layers:"ortho2022_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2022_IR__0"}]},{id:2283,name:"ortho2021_IR",metadata:{exclusion:"[122,222]",metadata_id:"067dc519-f507-45db-8e7a-f3ccc9125bc5"},dimensions:{},type:"WMS",layers:"ortho2021_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2021_IR__3"},{name:"ortho2021_IR__2"},{name:"ortho2021_IR__1"},{name:"ortho2021_IR__0"}]},{id:2089,name:"ortho2020_IR",metadata:{exclusion:"[120,220]",metadata_id:"134fb490-c022-476d-b484-dc652ae8c626"},dimensions:{},type:"WMS",layers:"ortho2020_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2020_IR__4"},{name:"ortho2020_IR__3"},{name:"ortho2020_IR__2"},{name:"ortho2020_IR__1"}]},{id:1785,name:"ortho2019_IR",metadata:{exclusion:"[117,217]",metadata_id:"3dfd031a-1721-4f35-b358-25062d5d4c26"},dimensions:{},type:"WMS",layers:"ortho2019_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2019_IR__9"},{name:"ortho2019_IR__8"},{name:"ortho2019_IR__7"},{name:"ortho2019_IR__6"}]},{id:1529,name:"ortho2018_IR",metadata:{exclusion:"[114,214]",metadata_id:"2edf6bcb-2a1c-4b8c-8488-56000133abb4"},dimensions:{},type:"WMS",layers:"ortho2018_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2018_IR__14"},{name:"ortho2018_IR__13"},{name:"ortho2018_IR__12"},{name:"ortho2018_IR__11"}]},{id:1372,name:"ortho_2017_irc",metadata:{exclusion:"[112,212]",metadata_id:"659a3236-a22e-44ae-9fa3-025cdf5d0043"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017_irc",imageType:"image/jpeg"},{id:793,name:"ortho_2016_irc",metadata:{exclusion:"[110,210]",is_queryable:!0,metadata_id:"c313da75-7d8b-4570-9db5-bb6add56309e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016_irc",imageType:"image/jpeg"},{id:792,name:"ortho_2013_irc",metadata:{exclusion:"[109,209]",is_queryable:!0,metadata_id:"649b34a1-a195-40b4-81c9-0100343b9661"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013_irc",imageType:"image/jpeg"},{id:791,name:"ortho_2010_irc",metadata:{exclusion:"[108,208]",is_queryable:!0,metadata_id:"728ffc2a-9062-4822-8596-01f0e93f6b40"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010_irc",imageType:"image/jpeg"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:161,name:"env_obs",children:[{id:1963,name:"env_couverture_sol",children:[{id:1951,name:"LISL_Landcover_2018",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"6142a6a6-9356-47ac-babe-eaa2ae3628b6"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2018__0"},{name:"LISL_Landcover_2018__1"}]},{id:1950,name:"LISL_Landcover_2015_v2",metadata:{is_queryable:!0,legend_name:"lisl:lc2015_2",metadata_id:"67f4ecb8-5d4b-4a9e-a60b-239fc92b25a7"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2015_v2",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2015_v2__0"},{name:"LISL_Landcover_2015_v2__1"}]},{id:2714,name:"LISL_Landcover_2021",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"e7afeac8-c649-4c91-ab15-ea40b8986ebc"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2021",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2021__0"},{name:"LISL_Landcover_2021__4"}]}],metadata:{},mixed:!0},{id:1964,name:"env_utilisation_sol",children:[{id:1970,name:"LISL_Landuse_2018",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2018",metadata_id:"e4572e0b-1b40-4834-b6c3-ccab83f75f57"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2018__0"}]},{id:2054,name:"LISL_Landuse_2015_v3",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2015_v3",metadata_id:"65e04718-1890-4c5e-8be7-08a73f69c0cc"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2015_v3",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2015_v3__0"}]},{id:1969,name:"LISL_Landuse_2007",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2007",metadata_id:"257556b9-560b-4193-b773-e16a9137a690"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2007",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2007__0"}]}],metadata:{},mixed:!0},{id:1965,name:"env_impermeabilisation",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0},{id:1966,name:"env_occupation_biophysique",children:[{id:215,name:"env_obs2007",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"bd672300-0851-4901-82c4-6099aff1fcf7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs2007",imageType:"image/png"},{id:163,name:"env_obs1999",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"b4836d86-2803-4dcf-a991-7e78ab9c41b6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs1999",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:416,name:"map_morphometrie",children:[{id:415,name:"wg_hohenlinien_10m_map",metadata:{is_queryable:!0,legend_name:"wg:hohenlinien_10m",metadata_id:"012801f3-5d2b-4ab7-ae58-1da1b3256390"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_hohenlinien_10m_map",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]},{id:1461,name:"wg_hangneigung_map",metadata:{legend_name:"wg:hangneigung",metadata_id:"6ffa94a4-af02-43ec-82e0-6796cd01a948"},dimensions:{},type:"WMS",layers:"wg_hangneigung_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_hangneigung_map__0"}]},{id:1462,name:"wg_exposition_map",metadata:{legend_name:"wg:exposition",metadata_id:"7a42e4c5-6f3c-45ea-a909-3f8f28874fde"},dimensions:{},type:"WMS",layers:"wg_exposition_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_exposition_map__0"}]},{id:1460,name:"wg_relief_map",metadata:{metadata_id:"7d195815-23c2-4963-863c-60e3a39ab8af"},dimensions:{},type:"WMS",layers:"wg_relief_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_relief_map__0"}]}],metadata:{},mixed:!0},{id:1380,name:"lidar_group",children:[{id:1792,name:"act_lidar_2019_group",children:[{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:2188,name:"act_mnt_2019_coloration_alternative_Lux",metadata:{is_queryable:!0,metadata_id:"faf3a8e8-6f3a-424a-9bee-945e99d544dd"},dimensions:{},type:"WMS",layers:"act_mnt_2019_coloration_alternative_Lux",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt_2019_coloration_alternative_Lux__0"}]},{id:2187,name:"act_mnt2017_GR",metadata:{is_queryable:!0,metadata_id:"b5bad4e6-b6cf-45f4-a543-da619b07f567"},dimensions:{},type:"WMS",layers:"act_mnt2017_GR",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt2017_GR__1"}]},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1788,name:"lidar_tiles_2019",metadata:{is_queryable:!0,metadata_id:"b19a500a-b8d5-4a87-a8f3-00f58c3dffcd",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2019",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2019__3"},{name:"lidar_tiles_2019__2"}]}],metadata:{},mixed:!0},{id:1791,name:"act_lidar_2017_group",children:[{id:1377,name:"lidar_mns",metadata:{legend_name:"lidar:mns2017",metadata_id:"e7184a37-7a6a-4e07-ae8d-ff06d9969da0"},dimensions:{},type:"WMS",layers:"lidar_mns",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mns__0"}]},{id:1378,name:"lidar_mnt",metadata:{legend_name:"lidar:mnt2017",metadata_id:"1adab94e-d80a-4e19-a808-28f52f633186"},dimensions:{},type:"WMS",layers:"lidar_mnt",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnt__0"}]},{id:1463,name:"lidar_mnh",metadata:{legend_name:"lidar:mnh",metadata_id:"5f189f5b-08f9-4abc-b3f0-78c37ddf0db1"},dimensions:{},type:"WMS",layers:"lidar_mnh",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnh__0"}]},{id:1787,name:"lidar_tiles_2017",metadata:{is_queryable:!0,metadata_id:"3c565aff-7394-4d51-915c-0e06dde7765a",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2017",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2017__1"},{name:"lidar_tiles_2017__0"}]}],metadata:{},mixed:!0},{id:2470,name:"act_lidar_derivates",children:[{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:484,name:"eau_new_Hydrografie",children:[{id:450,name:"eau_new_Gewaessernetz",children:[{id:749,name:"eau_new_Gewässer",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewässer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewässer__23"},{name:"eau_new_Gewässer__24"},{name:"eau_new_Gewässer__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewässer",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewässer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewässer__27"},{name:"eau_new_Kilometrierung der Gewässer__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]},{id:569,name:"eau_new_Stausee_Sauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.6659471",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece210cc765e1a2422811f",is_queryable:!0,legend_name:"eau:stausee_sauer",max_dpi:128,metadata_id:"119ad2e3-b44f-4777-883d-d2d522bafeca"},dimensions:{},type:"WMS",layers:"eau_new_Stausee_Sauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Stausee_Sauer__30"}]}],metadata:{},mixed:!0},{id:451,name:"eau_new_Fischerei",children:[{id:626,name:"eau_new_Fischereiabschnitte",metadata:{geocatalog_open_data_last_update_date:"2024-09-11T01:02:43.2828183",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb079111e9b02db9a6ece",is_queryable:!0,legend_name:"eau:fischereiabschnitte",max_dpi:128,metadata_id:"bd6be85a-cec4-4e4d-9657-cffa242db28f"},dimensions:{},type:"WMS",layers:"eau_new_Fischereiabschnitte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fischereiabschnitte__37"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:187,name:"unwelt_biologie_geologie",children:[{id:338,name:"lebensraume_une_biotope",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:335,name:"weinbau",children:[{id:297,name:"ivv_flik_parcels",metadata:{is_queryable:!0,metadata_id:"884ed54c-3b36-417e-b44b-ed7f3283302c"},dimensions:{},type:"WMS",layers:"ivv_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"ivv_flik_parcels__0"}]},{id:510,name:"ivv_parcels",metadata:{is_queryable:!0,metadata_id:"7d372c69-4144-43bf-9622-70dcdc7bbf0b"},dimensions:{},type:"WMS",layers:"ivv_parcels",imageType:"image/png",style:"default",childLayers:[{name:"ivv_parcels__0"}]},{id:175,name:"ivv_grosslagen",metadata:{is_queryable:!0,metadata_id:"89274b7e-4742-4673-b254-9105a4a066b7",start_opacity:.5},dimensions:{},type:"WMS",layers:"ivv_grosslagen",imageType:"image/png",style:"default",childLayers:[{name:"ivv_grosslagen__lagen"},{name:"ivv_grosslagen__lagen_labels"}]},{id:240,name:"ivv_kleinlagen",metadata:{is_queryable:!0,metadata_id:"a040071a-3a72-4d69-93e0-c06d4d4c3bd1"},dimensions:{},type:"WMS",layers:"ivv_kleinlagen",imageType:"image/png",style:"default",childLayers:[{name:"ivv_kleinlagen__0"}]},{id:221,name:"ivv_klimakarte",metadata:{is_queryable:!0,legend_name:"ivv_klimakarte",metadata_id:"6d989c64-998c-499f-a196-1032e9470666",start_opacity:.5},dimensions:{},type:"WMS",layers:"ivv_klimakarte",imageType:"image/png",style:"default",childLayers:[{name:"ivv_klimakarte__klimakarte"}]},{id:2799,name:"IVV_MonESCA",children:[{id:2800,name:"IVV_MonESCA_Bonitur",children:[{id:2798,name:"ivv_bonitur_remich_2019",metadata:{metadata_id:"ece93d8a-df79-434f-a8af-6ba2e6e2b90e"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2019",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2019__18"}]},{id:2801,name:"ivv_bonitur_remich_2020",metadata:{metadata_id:"99601a0c-3820-4f1c-93d8-4c2fac3634cd"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2020",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2020__19"}]},{id:2802,name:"ivv_bonitur_remich_2021",metadata:{metadata_id:"4cdd8990-d1e3-462f-9f86-fa2bb58c791c"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2021",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2021__20"}]},{id:2803,name:"ivv_bonitur_remich_2022",metadata:{metadata_id:"331fb74f-2bb9-4510-8a1d-c69271987b81"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2022",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2022__21"}]},{id:2804,name:"ivv_bonitur_remich_2023",metadata:{metadata_id:"6a29aa9f-753b-40c0-9af8-db3b319c5e26"},dimensions:{},type:"WMS",layers:"ivv_bonitur_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_bonitur_remich_2023__22"}]}],metadata:{},mixed:!0},{id:2807,name:"IVV_MonESCA_Stress_Index",children:[{id:2805,name:"ivv_cwsi_remich_2023",metadata:{metadata_id:"bb0ac384-71f8-4aca-ab1f-3c99beeec690"},dimensions:{},type:"WMS",layers:"ivv_cwsi_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_cwsi_remich_2023__7"}]},{id:2806,name:"ivv_tir_remich_2023",metadata:{metadata_id:"95663e4b-2802-4862-b611-9b338df9bc41"},dimensions:{},type:"WMS",layers:"ivv_tir_remich_2023",imageType:"image/png",style:"default",childLayers:[{name:"ivv_tir_remich_2023__8"}]}],metadata:{},mixed:!0},{id:2808,name:"IVV_MonESCA_NDVI",children:[{id:2814,name:"ivv_ndvi_2019_09_03",metadata:{metadata_id:"7b33e77b-3d60-41cd-98af-92c1e28973fa"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2019_09_03",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2019_09_03__10"}]},{id:2815,name:"ivv_ndvi_2020_07_30",metadata:{metadata_id:"0f5b69ec-5d97-470a-8992-4e5654939208"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2020_07_30",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2020_07_30__11"}]},{id:2816,name:"ivv_ndvi_2020_09_08",metadata:{metadata_id:"cde967b0-724d-46b9-a13a-05fe890d394a"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2020_09_08",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2020_09_08__12"}]},{id:2817,name:"ivv_ndvi_2021_09_13",metadata:{metadata_id:"e58a2ef8-0c13-4203-b4d8-835f04a07401"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2021_09_13",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2021_09_13__13"}]},{id:2818,name:"ivv_ndvi_2022_08_29",metadata:{metadata_id:"80c0415d-f233-4111-846f-b11b6c3f31ed"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2022_08_29",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2022_08_29__14"}]},{id:2819,name:"ivv_ndvi_2023_08_22",metadata:{metadata_id:"7e1866c7-def5-4874-a5ad-71cd69c8e970"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2023_08_22",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2023_08_22__15"}]},{id:2820,name:"ivv_ndvi_2023_08_23",metadata:{metadata_id:"7925907a-08ce-48ed-bb84-5b3cb6bfe5b5"},dimensions:{},type:"WMS",layers:"ivv_ndvi_2023_08_23",imageType:"image/png",style:"default",childLayers:[{name:"ivv_ndvi_2023_08_23__16"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:233,name:"geologie_",children:[{id:2167,name:"geo_carte_geol_harmonisee",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",metadata_id:"542a0caa-4b33-4019-8ce7-b8541b436106"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee__6"},{name:"geo_carte_geol_harmonisee__1"},{name:"geo_carte_geol_harmonisee__2"},{name:"geo_carte_geol_harmonisee__3"}]},{id:2168,name:"geo_carte_geol_harmonisee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee_decouverte",metadata_id:"d03be720-e33c-4bd4-8829-559dc951dc2d"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_decouverte__5"},{name:"geo_carte_geol_harmonisee_decouverte__1"},{name:"geo_carte_geol_harmonisee_decouverte__2"},{name:"geo_carte_geol_harmonisee_decouverte__3"}]},{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2170,name:"geo_carte_geol_simplifiee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee_decouverte",metadata_id:"d8d627ee-ec11-4054-8a05-f4cd98adbd72"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee_decouverte__0"},{name:"geo_carte_geol_simplifiee_decouverte__2"}]},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2175,name:"geo_epaisseurs_unites",metadata:{is_queryable:!0,legend_name:"geol:epaisseurs_unites",metadata_id:"3fab8010-2f8b-43e2-96a7-155a24233db4"},dimensions:{},type:"WMS",layers:"geo_epaisseurs_unites",imageType:"image/png",style:"default",childLayers:[{name:"geo_epaisseurs_unites__0"}]},{id:2266,name:"forages_grand_public_group",children:[{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:2265,name:"eau_new_Bohrungen_grand_public",metadata:{is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen_grand_public",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen_grand_public__39"}]}],metadata:{},mixed:!0},{id:2267,name:"eaux_souterraines_grand_public_group",children:[{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]}],metadata:{},mixed:!0},{id:2191,name:"geo_geomorphologie_carte100K",metadata:{is_queryable:!0,legend_name:"geol:geomorphologie100k",metadata_id:"3fd5088b-021d-4207-9d4b-4040e1ccfe22"},dimensions:{},type:"WMS",layers:"geo_geomorphologie_carte100K",imageType:"image/png",style:"default",childLayers:[{name:"geo_geomorphologie_carte100K__0"}]}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:373,name:"eau_new_Trinkwasser_Schutzzonen_(ZPS)",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:469,name:"eau_new_Schutzgebiete",children:[{id:656,name:"eau_new_Badegewaesser",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecaff2cc765e18ae5ed87f",is_queryable:!0,legend_name:"eau:badegewaesser",max_dpi:128,metadata_id:"72f770ee-7290-4ecb-9358-580b7cfcadf7"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser__135"}]},{id:581,name:"eau_new_Badegewaesser_-_Qualitaet",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece261cc765e1a24228120",is_queryable:!0,legend_name:"eau:badegewaesser_-_qualitaet",max_dpi:128,metadata_id:"c0c9c705-8b26-4a0b-b9bb-e2243cd5386a"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser_-_Qualitaet",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser_-_Qualitaet__136"}]},{id:612,name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_uuid:"57ece27bcc765e1a270cf61d",is_queryable:!0,legend_name:"eau:empfindliche_gebiete_kommunalabwasserrichtlinie",max_dpi:128,metadata_id:"39952e6c-8e73-4a23-a19c-78c4f06c84d9"},dimensions:{},type:"WMS",layers:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)__139"}]},{id:492,name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:02:59.0520396",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c287ac9208bf4692e9",is_queryable:!0,legend_name:"eau:gefaehrdete_gebiete_nitratrichtlinie",max_dpi:128,metadata_id:"9426a9a6-7cb1-4c1a-a504-40dabc4429c0"},dimensions:{},type:"WMS",layers:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)__140"}]}],metadata:{},mixed:!0},{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:470,name:"eau_new_Gewaesserschutz",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0},{id:474,name:"eau_new_Wasserrahmenrichtlinie",children:[{id:1469,name:"eau_strahlwirkungskonzept",metadata:{is_queryable:!0,legend_name:"eau:strahlwirkungskonzept",metadata_id:"e1744b8e-101e-406d-b742-776d488a00b5"},dimensions:{},type:"WMS",layers:"eau_strahlwirkungskonzept",imageType:"image/png",style:"default",childLayers:[{name:"eau_strahlwirkungskonzept__351"},{name:"eau_strahlwirkungskonzept__352"}]},{id:475,name:"eau_new_Bewirtschaftungsplan_2009",children:[{id:644,name:"eau_new_Betrachtungsraeume_2009",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2009",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2009__146"}]},{id:607,name:"eau_new_Typologie_Oberflaechengewasser_2009",metadata:{is_queryable:!0,legend_name:"eau:typologie_oberflaechengewasser_2009",max_dpi:128,metadata_id:"0d1d73f0-7644-4217-a0df-b6c497508592"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Oberflaechengewasser_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Oberflaechengewasser_2009__147"}]},{id:601,name:"eau_new_Oberflaechenwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2009",max_dpi:128,metadata_id:"404cf7b4-f70b-4c2c-a44b-89e297fab0f8"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2009__148"}]},{id:634,name:"eau_new_Erheblich veränderte Wasserkörper 2009",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_owk_2009",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich veränderte Wasserkörper 2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich veränderte Wasserkörper 2009__149"}]},{id:603,name:"eau_new_Grundwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2009",max_dpi:128,metadata_id:"f23ca424-ec87-4c53-929c-7e627a8e06af"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2009__151"}]},{id:468,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2009",children:[{id:464,name:"eau_new_Oberflaechengewaesser_2009",children:[{id:585,name:"eau_new_Gesamtzustand_2009",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2009",max_dpi:128,metadata_id:"44862c13-7006-44a4-99e6-2877ea512714"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2009__154"}]},{id:586,name:"eau_new_Chemischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2009",max_dpi:128,metadata_id:"d934fbcc-02c6-47fa-a23d-cfbe49214709"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2009__155"}]},{id:614,name:"eau_new_Oekologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2009",max_dpi:128,metadata_id:"92d28c19-ed51-4e9e-8a80-831144fe3553"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2009__156"}]},{id:593,name:"eau_new_Hydromorphologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2009",max_dpi:128,metadata_id:"0227e64f-11ef-4f0a-8853-48fd7385f2b1"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologischer_Zustand_2009__157"}]}],metadata:{},mixed:!0},{id:435,name:"eau_new_Grundwasser_2009",children:[{id:657,name:"eau_new_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2009",max_dpi:128,metadata_id:"2df25c38-15d5-447f-a269-4184ce781050"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2009__159"}]},{id:605,name:"eau_new_Quantitativer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2009",max_dpi:128,metadata_id:"a9ebce38-6c8b-447e-9d22-46ba333fa63c"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2009__160"}]},{id:441,name:"eau_new_Chemischer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2009",max_dpi:128,metadata_id:"e9a72fec-29a0-4183-9e3a-6d4f49c9fea7"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2009__161"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:480,name:"eau_new_Bewirtschaftungsplan_2015",children:[{id:536,name:"eau_new_Oberflaechenwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2015",max_dpi:128,metadata_id:"ead261ed-7be1-4435-9cf5-d1527a18bd19"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2015__165"}]},{id:658,name:"eau_new_Erheblich veränderte Wasserkörper 2015",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2015",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich veränderte Wasserkörper 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich veränderte Wasserkörper 2015__166"}]},{id:619,name:"eau_new_Betrachtungsraeume_2015",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2015",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2015__163"}]},{id:588,name:"eau_new_Typologie_Gewaesser_2015",metadata:{is_queryable:!0,legend_name:"eau:typologie_gewaesser_2015",max_dpi:128,metadata_id:"c7eea236-ad59-47fc-8c02-630fee3292dc"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Gewaesser_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Gewaesser_2015__164"}]},{id:1470,name:"eau_fliessgewaessertypen_2015",metadata:{is_queryable:!0,legend_name:"eau:fliessgewaessertypen_2015_lawa",metadata_id:"79f4588f-a264-4921-a382-d1f83cf48da3"},dimensions:{},type:"WMS",layers:"eau_fliessgewaessertypen_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_fliessgewaessertypen_2015__354"}]},{id:759,name:"eau_new_Strukturgütekartierung 2015 [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_7-stufige_bewertung",metadata_id:"dd28de7b-6182-4054-89a6-dd92b80b565f"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgütekartierung 2015 [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgütekartierung 2015 [7-stufige Bewertung]__315"}]},{id:760,name:"eau_new_Strukturgütekartierung 2015 [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_5-stufige_bewertung",metadata_id:"ff70c904-a6b9-4989-88c0-8359ff52e57e"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgütekartierung 2015 [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgütekartierung 2015 [5-stufige Bewertung]__316"}]},{id:761,name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_7-stufige_bewertung_5-band_ufer_links_7-stufige_bewertung_5-band_ufer_rechts_7-stufige_bewertung_5-band_umfeld_links_7-stufige_bewertung_5-band_umfeld_rechts_7-stufige_bewertung",metadata_id:"429d3552-5f72-4be6-9c03-95c76f0a6c07"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__336"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__337"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__338"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__339"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__340"}]},{id:763,name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_5-stufige_bewertung_5-band_ufer_links_5-stufige_bewertung_5-band_ufer_rechts_5-stufige_bewertung_5-band_umfeld_links_5-stufige_bewertung_5-band_umfeld_rechts_5-stufige_bewertung",metadata_id:"4c64f3a4-627f-4aa7-9e0c-d3ad003d9afe"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__342"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__343"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__344"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__345"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__346"}]},{id:785,name:"eau_new_WRRL und HWRM-RL Massnahmen",metadata:{is_queryable:!0,legend_name:"eau:wrrl_und_hwrm-rl_-_massnahmen",metadata_id:"9a339e4e-eb04-42a0-ac0d-5a5f354c9548"},dimensions:{},type:"WMS",layers:"eau_new_WRRL und HWRM-RL Massnahmen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL und HWRM-RL Massnahmen__347"}]},{id:1471,name:"eau_detailliertes_massnahmenprogramm_sww",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww",metadata_id:"5b9d1544-da64-4a58-b519-9a03e5491e07"},dimensions:{},type:"WMS",layers:"eau_detailliertes_massnahmenprogramm_sww",imageType:"image/png",style:"default",childLayers:[{name:"eau_detailliertes_massnahmenprogramm_sww__355"}]},{id:659,name:"eau_new_Grundwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2015",max_dpi:128,metadata_id:"bb5f17b7-ddac-46cc-a59d-25f82d422b5b"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2015__168"}]},{id:476,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2015",children:[{id:479,name:"eau_new_Oberflaechengewaesser_2015",children:[{id:622,name:"eau_new_Oekologischer_Zustand_2015",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2015",max_dpi:128,metadata_id:"5b78d0a5-1984-4efc-9e7d-0cb9d7ca829d"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2015__173"}]},{id:663,name:"eau_new_Gesamtzustand_2015",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2015",max_dpi:128,metadata_id:"bea7140f-b938-4494-ac14-a2252a1d0fcb"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2015__171"}]},{id:621,name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015",max_dpi:128,metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"621",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG__172"}]},{id:764,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2008_105_eg",metadata_id:"68f761b4-e1d1-4cda-b4aa-1e61fc812588"},dimensions:{},type:"WMS",layers:"764",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG__318"}]},{id:765,name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015_richtlinie_2013_39_eu",metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"765",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU__319"}]},{id:766,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2013_39_eu",metadata_id:"d78ac813-7ab3-4162-945a-f87512e66654"},dimensions:{},type:"WMS",layers:"766",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU__320"}]},{id:466,name:"eau_new_Qualitaetskomponenten_des_oekologischen_Zustands_2015",children:[{id:767,name:"eau_new_Hydromorphologische Gesamtbewertung 2015",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2015",metadata_id:"767e0a8a-31e0-4a53-913f-6ab1c76ca27c"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische Gesamtbewertung 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische Gesamtbewertung 2015__174"}]},{id:769,name:"eau_new_Morphologie 2015",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2015",metadata_id:"b7812f62-a8b5-4ef4-bbb8-c2e3a9688c93"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie 2015__330"}]},{id:770,name:"eau_new_Durchgängigkeit 2015",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2015",metadata_id:"4983c058-3d33-4b6f-b801-de1113a11f27"},dimensions:{},type:"WMS",layers:"eau_new_Durchgängigkeit 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgängigkeit 2015__331"}]},{id:583,name:"eau_new_Physiko-Chemie_2015",metadata:{is_queryable:!0,legend_name:"eau:physiko-chemie_2015",max_dpi:128,metadata_id:"45702d13-2608-4300-ba54-0e078c96386c"},dimensions:{},type:"WMS",layers:"eau_new_Physiko-Chemie_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Physiko-Chemie_2015__176"}]},{id:771,name:"eau_new_Phytoplankton 2015",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2015",metadata_id:"e5d8434c-c367-4a56-a7d1-aa60f70a301f"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton 2015__321"}]},{id:662,name:"eau_new_Makrophyten_2015",metadata:{is_queryable:!0,legend_name:"eau:aquatische_flora_2015",max_dpi:128,metadata_id:"fe673001-2447-4e3c-bce6-4606b6bf222d"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_2015__177"}]},{id:600,name:"eau_new_Makro-Invertebraten_2015",metadata:{is_queryable:!0,legend_name:"eau:makro-invertebraten_2015",max_dpi:128,metadata_id:"b8a59482-2696-4b9a-a527-3201597a4caf"},dimensions:{},type:"WMS",layers:"eau_new_Makro-Invertebraten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makro-Invertebraten_2015__180"}]},{id:646,name:"eau_new_Fische_2015",metadata:{is_queryable:!0,legend_name:"eau:fische_2015",max_dpi:128,metadata_id:"f44a6aa7-6dcc-4d99-9033-c13ef23ebef4"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2015__179"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:471,name:"eau_new_Grundwasser_2015",children:[{id:591,name:"eau_new_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2015",max_dpi:128,metadata_id:"489c9b85-6c3c-4019-b3ee-096936b2683c"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2015__182"}]},{id:592,name:"eau_new_Quantitativer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2015",max_dpi:128,metadata_id:"333c7e4f-cdc3-439a-aa13-ca0f9138c764"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2015__183"}]},{id:632,name:"eau_new_Chemischer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2015",max_dpi:128,metadata_id:"ddd64c4a-f5af-4bbb-a7d3-3db1016ee541"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2015__184"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2085,name:"eau_Bewirtschaftungsplan_2021",children:[{id:2090,name:"eau_Oberflaechenwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2021",max_dpi:128,metadata_id:"c50b2bc7-aeb7-4d3e-9349-09eb3ec0f927"},dimensions:{},type:"WMS",layers:"eau_Oberflaechenwasserkoerper_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Oberflaechenwasserkoerper_2021__386"}]},{id:2091,name:"eau_Erheblich veränderte Wasserkörper 2021",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2021",max_dpi:128,metadata_id:"311cc30b-8092-4816-9f86-87d5f2995706"},dimensions:{},type:"WMS",layers:"eau_Erheblich veränderte Wasserkörper 2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Erheblich veränderte Wasserkörper 2021__387"}]},{id:2491,name:"eau_new_Betrachtungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2021",metadata_id:"af21fbbf-3f63-4742-8c44-f8a377930197"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2021__455"}]},{id:2223,name:"eau_typologie_Gewässer_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lu",metadata_id:"492d6faa-5c91-45d4-83d7-733398cc48d1"},dimensions:{},type:"WMS",layers:"eau_typologie_Gewässer_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_typologie_Gewässer_2021__419"}]},{id:2224,name:"eau_Fließgewässertypen_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lawa",metadata_id:"8608d8c5-def8-4050-9f44-7746edd7a32e"},dimensions:{},type:"WMS",layers:"eau_Fließgewässertypen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Fließgewässertypen_2021__420"}]},{id:2269,name:"eau_grundwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2021",metadata_id:"3bd42cf4-93ce-451f-8749-e3f6d1750eeb"},dimensions:{},type:"WMS",layers:"eau_grundwasserkoerper_2021",imageType:"image/png",childLayers:[{name:"eau_grundwasserkoerper_2021__444"}]},{id:2222,name:"eau_Strukturgütekartierung_2021",children:[{id:2225,name:"eau_Strukturgütekartierung_2021_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_7-stufige_bewertung",metadata_id:"87e3688f-b831-44e9-aa4f-38d89a41139a"},dimensions:{},type:"WMS",layers:"eau_Strukturgütekartierung_2021_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgütekartierung_2021_7stufige_bewertung__405"}]},{id:2226,name:"eau_Strukturgütekartierung_2021_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_5-stufige_bewertung",metadata_id:"0e36b3e4-8811-43b6-9f2d-a2ea26c817cb"},dimensions:{},type:"WMS",layers:"eau_Strukturgütekartierung_2021_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgütekartierung_2021_5stufige_bewertung__406"}]},{id:2227,name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_7-stufige_bewertung",metadata_id:"27c60680-00ac-4e28-857f-41a1021ae4d9"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__408"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__409"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__410"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__411"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__412"}]},{id:2228,name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_5-stufige_bewertung",metadata_id:"dedcc2a3-b587-4dfe-a967-5f4bfd8f575a"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__414"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__415"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__416"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__417"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__418"}]},{id:2492,name:"eau_new_Querbauwerke_2021",metadata:{geocatalog_open_data_last_update_date:"2024-08-01T01:02:32.8749807",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f595f96f574ccd9e7e7c",is_queryable:!0,legend_name:"eau:Querbauwerke%202021",metadata_id:"88b06474-f029-4544-a60d-7c46c5f32191"},dimensions:{},type:"WMS",layers:"eau_new_Querbauwerke_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querbauwerke_2021__422"}]},{id:2493,name:"eau_new_Durchlaesse_Verrohrungen_2021",metadata:{geocatalog_open_data_last_update_date:"2024-07-31T01:02:20.8968264",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f58e7af13982e1abe7e7",is_queryable:!0,legend_name:"eau:durchlaesseverrohrungen_2021",metadata_id:"6eb34108-4bad-4cb7-881e-7db3174c7531"},dimensions:{},type:"WMS",layers:"eau_new_Durchlaesse_Verrohrungen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchlaesse_Verrohrungen_2021__423"}]},{id:2494,name:"eau_new_Querprofile_2021",metadata:{is_queryable:!0,legend_name:"eau:querprofile_2021",metadata_id:"a40281d4-1ee2-42d0-9378-012f1f415afa"},dimensions:{},type:"WMS",layers:"eau_new_Querprofile_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querprofile_2021__424"}]},{id:2495,name:"eau_new_Substratkartierung_2021",metadata:{is_queryable:!0,legend_name:"eau:substratkartierung_2021",metadata_id:"c4eb10fd-305d-43f7-ae01-b9caa32ed484"},dimensions:{},type:"WMS",layers:"eau_new_Substratkartierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Substratkartierung_2021__425"}]}],metadata:{},mixed:!0},{id:2497,name:"eau_new_Massnahmenprogramm_2021",children:[{id:2106,name:"eau_Masssnahmenprogramm_SWW_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww_2021",metadata_id:"10f4a12e-1a67-42d5-b575-8993e2f3aa68"},dimensions:{},type:"WMS",layers:"eau_Masssnahmenprogramm_SWW_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Masssnahmenprogramm_SWW_2021__403"}]},{id:2496,name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_hy_2021_alle",metadata_id:"4b00cf8c-d4e6-486d-8bda-d385302792f6"},dimensions:{},type:"WMS",layers:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__389"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__390"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__391"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__392"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__393"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__394"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__395"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__396"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__397"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__398"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__399"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__400"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__401"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__402"}]},{id:2086,name:"eau_Entwurf_Massnahmenprogramm_HY_2021",children:[{id:2092,name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit",metadata_id:"c150f6a5-41c7-477a-9d44-c0a26a502d85"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021__389"}]},{id:2093,name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit_durchlass",metadata_id:"569bf0ea-c428-4171-aba6-8f2ace180a10"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021__390"}]},{id:2094,name:"eau_Strukturelemente_Sohle_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_strukturelementen_in_sohle",metadata_id:"2d233ca6-553e-43bf-ba25-f46b88f63710"},dimensions:{},type:"WMS",layers:"eau_Strukturelemente_Sohle_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturelemente_Sohle_2021__391"}]},{id:2095,name:"eau_Umgestalten_Sohlverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_sohlverbau",metadata_id:"0d30a3ee-e860-4816-b5c8-9f43e93020e3"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Sohlverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Sohlverbau_2021__392"}]},{id:2096,name:"eau_Stroemungslenkern_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_stroemungslenkern_fuer_eigendynamik",metadata_id:"b86c62a9-0ec8-4d35-878f-b275e74ff02e"},dimensions:{},type:"WMS",layers:"eau_Stroemungslenkern_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Stroemungslenkern_2021__393"}]},{id:2097,name:"eau_Umgestalten_Uferverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_uferverbau",metadata_id:"bec0ccbc-09b5-4351-8b72-f0e458fc7d19"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Uferverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Uferverbau_2021__394"}]},{id:2098,name:"eau_naturnah_Gewaesserbett_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_von_naturnaher_laufentwicklung_und_gewaesserbett",metadata_id:"3ddf627c-90ae-4b58-a05e-20925493dcf9"},dimensions:{},type:"WMS",layers:"eau_naturnah_Gewaesserbett_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnah_Gewaesserbett_2021__395"}]},{id:2099,name:"eau_Gewaesserrandstreifen_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesserrandstreifens",metadata_id:"3bc0e52d-954b-47d3-8905-1ecfe7108ce0"},dimensions:{},type:"WMS",layers:"eau_Gewaesserrandstreifen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserrandstreifen_2021__396"}]},{id:2100,name:"eau_Gewaesserentwicklungskorridor_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesser_entwicklungskorridors",metadata_id:"13299bf5-57ca-4538-993e-7c00f6247722"},dimensions:{},type:"WMS",layers:"eau_Gewaesserentwicklungskorridor_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserentwicklungskorridor_2021__397"}]},{id:2101,name:"eau_natuerlich_Ueberflutungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:sicherung_und_erweiterung_natuerlicher_ueberflutungsraeume_und_augewaesser",metadata_id:"7fb0080e-d178-401d-83de-7595ef1885b5"},dimensions:{},type:"WMS",layers:"eau_natuerlich_Ueberflutungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_natuerlich_Ueberflutungsraeume_2021__398"}]},{id:2102,name:"eau_eigendynamische_Entwicklung_2021",metadata:{is_queryable:!0,legend_name:"eau:zulassen_von_eigendynamischer_entwicklung",metadata_id:"d13e22e9-d22a-48a0-838d-3d7c914ccfe3"},dimensions:{},type:"WMS",layers:"eau_eigendynamische_Entwicklung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_eigendynamische_Entwicklung_2021__399"}]},{id:2103,name:"eau_naturnahe_Abflussverhaeltnisse_2021",metadata:{is_queryable:!0,legend_name:"eau:widerherstellung_und_sicherung_naturnaher_abflussverhaeltnisse",metadata_id:"b3f8a9e0-17f7-4b64-a34b-6ee6de972b52"},dimensions:{},type:"WMS",layers:"eau_naturnahe_Abflussverhaeltnisse_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnahe_Abflussverhaeltnisse_2021__400"}]},{id:2104,name:"eau_naturnaher_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_und_sicherung_naturnahem_wasserhaushalt",metadata_id:"91008390-557e-4db3-8d7c-e608a5478edb"},dimensions:{},type:"WMS",layers:"eau_naturnaher_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnaher_Wasserhaushalt_2021__401"}]},{id:2105,name:"eau_Abflussregulierung_2021",metadata:{is_queryable:!0,legend_name:"eau:abflussregulierung",metadata_id:"393be87d-44ce-42e1-9b81-9585aa2d7678"},dimensions:{},type:"WMS",layers:"eau_Abflussregulierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Abflussregulierung_2021__402"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2498,name:"eau_new_Zustand_Wasserkoerper_2021",children:[{id:2501,name:"eau_new_OWK_2021",children:[{id:2516,name:"eau_new_oekologischer_Zustand_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9819519",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologischer_zustand_2021",metadata_id:"d6e11b40-6e70-4f68-86c2-1c69c1e41c04"},dimensions:{},type:"WMS",layers:"eau_new_oekologischer_Zustand_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologischer_Zustand_2021__428"}]},{id:2517,name:"eau_new_oekologisches_Potenzial_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9441803",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologisches_potenzial_2021",metadata_id:"ed63b4ab-aee0-4402-8f30-98f2a08b98a4"},dimensions:{},type:"WMS",layers:"eau_new_oekologisches_Potenzial_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologisches_Potenzial_2021__429"}]},{id:2518,name:"eau_new_chemischer_Zustand_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.8760847",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"2973678d-b858-4c7b-abfa-b99c206c32be"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_2021_2013_39_EU__430"}]},{id:2519,name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.4632089",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"e32c56b5-a839-4cd1-a724-85153d87c5d5"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU__431"}]},{id:2499,name:"eau_new_Qualitaetskomponenten_oekologischer_Zustand_2021",children:[{id:2520,name:"eau_new_biologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:biologische_qk_-_gesamtbewertung_2021",metadata_id:"61ac19af-e01b-48e3-8730-d955709d92ce"},dimensions:{},type:"WMS",layers:"eau_new_biologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_biologische_QK_Gesamtbewertung_2021__435"}]},{id:2521,name:"eau_new_Phytoplankton_2021",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2021",metadata_id:"f1bb6a6e-cc76-420a-8426-cf78bebea0aa"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton_2021__436"}]},{id:2522,name:"eau_new_Makrophyten_und_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrophyten_und_phytobenthos_2021",metadata_id:"53087821-654a-4fad-b891-b6f86f347482"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_und_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_und_Phytobenthos_2021__437"}]},{id:2536,name:"eau_new_Macrophytes_2021",metadata:{is_queryable:!0,legend_name:"eau:macrophytes_2021",metadata_id:"060dc4f4-8486-4b5a-ae46-2b608bd87386"},dimensions:{},type:"WMS",layers:"eau_new_Macrophytes_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Macrophytes_2021__438"}]},{id:2523,name:"eau_new_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:phytobenthos_2021",metadata_id:"83f6b866-467a-4b00-9641-0252426c0808"},dimensions:{},type:"WMS",layers:"eau_new_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytobenthos_2021__439"}]},{id:2524,name:"eau_new_Makrozoobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrozoobenthos_2021",metadata_id:"d4028c85-831b-4950-905a-6df780d6b57d"},dimensions:{},type:"WMS",layers:"eau_new_Makrozoobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrozoobenthos_2021__440"}]},{id:2525,name:"eau_new_Fische_2021",metadata:{is_queryable:!0,legend_name:"eau:fische_2021",metadata_id:"961e396d-f123-4842-9a58-7968806e084d"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2021__441"}]},{id:2526,name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:physikalisch-chemische_qk_-_gesamtbewertung_2021",metadata_id:"a254a96a-8179-4a85-bd3d-c371d84e3884"},dimensions:{},type:"WMS",layers:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021__442"}]},{id:2527,name:"eau_new_allg_physikalisch_chemische_Parameter_2021",metadata:{is_queryable:!0,legend_name:"eau:allgemein_physikalisch-chemische_parameter_2021",metadata_id:"405ff58f-aca0-4781-9b28-c3481a7a0b0d"},dimensions:{},type:"WMS",layers:"eau_new_allg_physikalisch_chemische_Parameter_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_allg_physikalisch_chemische_Parameter_2021__443"}]},{id:2528,name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",metadata:{is_queryable:!0,legend_name:"eau:flussgebietsspezifische_schadstoffe_2021",metadata_id:"f321c03f-196d-4d12-992a-f6914088fd11"},dimensions:{},type:"WMS",layers:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021__457"}]},{id:2529,name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologische_qk_-_gesamtbewertung_2021",metadata_id:"673ef74f-1257-4de4-9c63-be9a82e7fbf7"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021__458"}]},{id:2530,name:"eau_new_Morphologie_2021",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2021",metadata_id:"877aecd9-f5b3-4266-a520-e8cfd9d861c9"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie_2021__459"}]},{id:2531,name:"eau_new_Durchgaengigkeit_2021",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2021",metadata_id:"afa4a183-b069-4b65-9d9e-ca692f91f140"},dimensions:{},type:"WMS",layers:"eau_new_Durchgaengigkeit_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgaengigkeit_2021__460"}]},{id:2532,name:"eau_new_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wasserhaushalt_2021",metadata_id:"299eb814-3703-4119-b8d3-e9581c234c3b"},dimensions:{},type:"WMS",layers:"eau_new_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserhaushalt_2021__461"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2500,name:"eau_new_GWK_2021",children:[{id:2533,name:"eau_new_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_gwk_2021",metadata_id:"ef79616f-fd66-45dd-a73a-e5677948dd56"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_GWK_2021__463"}]},{id:2534,name:"eau_new_quantitativer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_gwk_2021",metadata_id:"5b9fbb7b-26b1-4b74-a709-80df547a755d"},dimensions:{},type:"WMS",layers:"eau_new_quantitativer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_quantitativer_Zustand_der_GWK_2021__464"}]},{id:2535,name:"eau_new_chemischer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_gwk_2021",metadata_id:"efa9de18-5db0-498f-aebb-fd659f689da7"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_der_GWK_2021__465"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:312,name:"umweltuberwachung",children:[{id:283,name:"asta_meteo",metadata:{is_queryable:!0,metadata_id:"23e4b02d-a93d-47a4-8597-060319ae2af5"},dimensions:{},type:"WMS",layers:"asta_meteo",imageType:"image/png",style:"default",childLayers:[{name:"asta_meteo__meteo"}]}],metadata:{},mixed:!0},{id:273,name:"anf_data_map",children:[{id:427,name:"anf_arrondissements",metadata:{is_queryable:!0,metadata_id:"0ed72c13-1975-4cef-90de-1e4b737f5fbd"},dimensions:{},type:"WMS",layers:"anf_arrondissements",imageType:"image/png",style:"default",childLayers:[{name:"anf_arrondissements__ARRONDISSEMENTS"}]},{id:428,name:"anf_triages",metadata:{is_queryable:!0,metadata_id:"d4bb012a-73ab-4d3c-ac0c-f31e9df07d34"},dimensions:{},type:"WMS",layers:"anf_triages",imageType:"image/png",style:"default",childLayers:[{name:"anf_triages__TRIAGES"}]},{id:1783,name:"anf_lots_chasse_2021",metadata:{exclusion:"[340]",is_queryable:!0,metadata_id:"a8d8f46d-f6b1-4bb0-9935-be825cffab3f"},dimensions:{},type:"WMS",layers:"anf_lots_chasse_2021",imageType:"image/png",style:"default",childLayers:[{name:"anf_lots_chasse_2021__LOTS_CHASSE_2021"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]},{id:677,name:"anf_proprietes_forestieres",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"fa6d38c7-263c-4349-b208-45652f9b98ca"},dimensions:{},type:"WMS",layers:"anf_proprietes_forestieres",imageType:"image/png",style:"default",childLayers:[{name:"anf_proprietes_forestieres__PROPRIETES_FORESTIERES"}]}],metadata:{},mixed:!0},{id:381,name:"Archeo",children:[{id:2560,name:"arch_zoa",metadata:{legend_name:"arch:zoa",metadata_id:"3bbec7de-44af-4515-a2d2-04ac569ac657",start_opacity:.5},dimensions:{},type:"WMS",layers:"arch_zoa",imageType:"image/png",childLayers:[{name:"arch_zoa__1"},{name:"arch_zoa__2"},{name:"arch_zoa__3"},{name:"arch_zoa__4"},{name:"arch_zoa__5"},{name:"arch_zoa__6"},{name:"arch_zoa__7"},{name:"arch_zoa__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1657,name:"main_culture",children:[{id:1656,name:"unesco_patrimoine",children:[{id:1651,name:"unesco_city_boundary",metadata:{is_queryable:!0,metadata_id:"50b22938-4d06-48de-9ff0-d1b7f5f6f39d"},dimensions:{},type:"WMS",layers:"unesco_city_boundary",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_boundary__category"}]},{id:1655,name:"unesco_city_bufferzone",metadata:{is_queryable:!0,metadata_id:"39935dc9-9529-4adb-8cd4-97f9c9600c63"},dimensions:{},type:"WMS",layers:"unesco_city_bufferzone",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_bufferzone__category"}]},{id:1652,name:"unesco_city_old_quarters",metadata:{is_queryable:!0,metadata_id:"168b93e8-7bc4-451c-a642-e2c788e1cc59"},dimensions:{},type:"WMS",layers:"unesco_city_old_quarters",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_old_quarters__category"}]},{id:1653,name:"unesco_city_other_quarters",metadata:{is_queryable:!0,metadata_id:"1d4e8d00-541a-4600-931d-b768b7a42fdb"},dimensions:{},type:"WMS",layers:"unesco_city_other_quarters",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_other_quarters__category"}]},{id:1654,name:"unesco_city_fortress",metadata:{is_queryable:!0,metadata_id:"bc00d9de-4a11-4375-ae74-2f46fb6f7359"},dimensions:{},type:"WMS",layers:"unesco_city_fortress",imageType:"image/png",style:"default",childLayers:[{name:"unesco_city_fortress__category"}]}],metadata:{},mixed:!0},{id:1811,name:"culture_institutions",children:[{id:1800,name:"sip_theatres",metadata:{is_queryable:!0,metadata_id:"6745d7eb-93e3-4f55-be5f-2286903e46f0",start_opacity:.9},dimensions:{},type:"WMS",layers:"1800",imageType:"image/png",style:"default",childLayers:[{name:"sip_theatres__POI"}]}],metadata:{},mixed:!0},{id:2561,name:"arch_group",children:[{id:2560,name:"arch_zoa",metadata:{legend_name:"arch:zoa",metadata_id:"3bbec7de-44af-4515-a2d2-04ac569ac657",start_opacity:.5},dimensions:{},type:"WMS",layers:"arch_zoa",imageType:"image/png",childLayers:[{name:"arch_zoa__1"},{name:"arch_zoa__2"},{name:"arch_zoa__3"},{name:"arch_zoa__4"},{name:"arch_zoa__5"},{name:"arch_zoa__6"},{name:"arch_zoa__7"},{name:"arch_zoa__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1380,name:"lidar_group",children:[{id:1792,name:"act_lidar_2019_group",children:[{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:2188,name:"act_mnt_2019_coloration_alternative_Lux",metadata:{is_queryable:!0,metadata_id:"faf3a8e8-6f3a-424a-9bee-945e99d544dd"},dimensions:{},type:"WMS",layers:"act_mnt_2019_coloration_alternative_Lux",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt_2019_coloration_alternative_Lux__0"}]},{id:2187,name:"act_mnt2017_GR",metadata:{is_queryable:!0,metadata_id:"b5bad4e6-b6cf-45f4-a543-da619b07f567"},dimensions:{},type:"WMS",layers:"act_mnt2017_GR",imageType:"image/png",style:"default",childLayers:[{name:"act_mnt2017_GR__1"}]},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1788,name:"lidar_tiles_2019",metadata:{is_queryable:!0,metadata_id:"b19a500a-b8d5-4a87-a8f3-00f58c3dffcd",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2019",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2019__3"},{name:"lidar_tiles_2019__2"}]}],metadata:{},mixed:!0},{id:1791,name:"act_lidar_2017_group",children:[{id:1377,name:"lidar_mns",metadata:{legend_name:"lidar:mns2017",metadata_id:"e7184a37-7a6a-4e07-ae8d-ff06d9969da0"},dimensions:{},type:"WMS",layers:"lidar_mns",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mns__0"}]},{id:1378,name:"lidar_mnt",metadata:{legend_name:"lidar:mnt2017",metadata_id:"1adab94e-d80a-4e19-a808-28f52f633186"},dimensions:{},type:"WMS",layers:"lidar_mnt",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnt__0"}]},{id:1463,name:"lidar_mnh",metadata:{legend_name:"lidar:mnh",metadata_id:"5f189f5b-08f9-4abc-b3f0-78c37ddf0db1"},dimensions:{},type:"WMS",layers:"lidar_mnh",imageType:"image/png",style:"default",childLayers:[{name:"lidar_mnh__0"}]},{id:1787,name:"lidar_tiles_2017",metadata:{is_queryable:!0,metadata_id:"3c565aff-7394-4d51-915c-0e06dde7765a",start_opacity:.7},dimensions:{},type:"WMS",layers:"lidar_tiles_2017",imageType:"image/png",style:"default",childLayers:[{name:"lidar_tiles_2017__1"},{name:"lidar_tiles_2017__0"}]}],metadata:{},mixed:!0},{id:2470,name:"act_lidar_derivates",children:[{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"},{id:1753,name:"lidar_2019_mns",metadata:{legend_name:"lidar:mns2019",metadata_id:"d7bd80d7-23de-462f-bd3e-6bd863e1fc1d"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mns",imageType:"image/png"},{id:2311,name:"act_hillshade_2019",metadata:{is_queryable:!0,metadata_id:"8171b99e-df8b-4cf0-af36-f77c222e1690"},dimensions:{},type:"WMS",layers:"act_hillshade_2019",imageType:"image/png",style:"default",childLayers:[{name:"act_hillshade_2019__3"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1929,name:"zones_UAS",children:[{id:1927,name:"zones_UAS_0_50m",metadata:{is_queryable:!0,legend_name:"drones",metadata_id:"5589a912-bfa0-4b57-a560-b67e5ff342b9",start_opacity:.6},dimensions:{},type:"WMS",layers:"zones_UAS_0_50m",imageType:"image/png",childLayers:[{name:"zones_UAS_0_50m__0"}]},{id:1928,name:"zones_UAS_50_120m",metadata:{is_queryable:!0,legend_name:"drones",metadata_id:"9e5b263b-4a81-4841-824c-8c44e6261470",start_opacity:.6},dimensions:{},type:"WMS",layers:"zones_UAS_50_120m",imageType:"image/png",childLayers:[{name:"zones_UAS_50_120m__1"}]}],metadata:{},mixed:!0},{id:2132,name:"meteo_live",children:[{id:2133,name:"meteo_live_temp",metadata:{metadata_id:"60fd8ad2-e4aa-45c7-80a7-62b7551e0c6b"},dimensions:{},type:"WMS",layers:"meteo_live_temp",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_temp__MF.PointTimeSeriesObservation_Live_ASTA_avg_ta200"}]},{id:2139,name:"meteo_live_precipitation_sum",metadata:{metadata_id:"cd98c205-6413-49f0-88dd-8c68b02bb68c"},dimensions:{},type:"WMS",layers:"meteo_live_precipitation_sum",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_precipitation_sum__MF.PointTimeSeriesObservation_Live_ASTA_sum_nn050"}]},{id:2135,name:"meteo_live_humidity",metadata:{metadata_id:"7b09bc66-20a9-4d8b-9ae9-0c89f4fddcdf"},dimensions:{},type:"WMS",layers:"meteo_live_humidity",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_humidity__MF.PointTimeSeriesObservation_Live_ASTA_avg_rh200"}]},{id:2136,name:"meteo_live_windspeed",metadata:{metadata_id:"8f12d598-539c-4f58-a401-4422a392f995"},dimensions:{},type:"WMS",layers:"meteo_live_windspeed",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_windspeed__MF.PointTimeSeriesObservation_Live_ASTA_avg_wv1000"}]},{id:2138,name:"meteo_live_sunshine",metadata:{metadata_id:"b05144c8-f416-4bd7-96fe-2d992650db9f"},dimensions:{},type:"WMS",layers:"meteo_live_sunshine",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_sunshine__MF.PointTimeSeriesObservation_Live_ASTA_sum_ssd"}]},{id:2137,name:"meteo_live_irradiation",metadata:{metadata_id:"f1fb363e-1d4e-4fba-9c05-82ddcc8f1e72"},dimensions:{},type:"WMS",layers:"meteo_live_irradiation",imageType:"image/png",style:"default",childLayers:[{name:"meteo_live_irradiation__MF.PointTimeSeriesObservation_Live_ASTA_sum_gs200"}]}],metadata:{},mixed:!0},{id:2316,name:"cadastre_commerce_group",children:[{id:2315,name:"cadastre_commerce_wirtschaftszweig",metadata:{is_queryable:!0,metadata_id:"2b6047e0-5092-4f66-926a-e9c79d6b6b88"},dimensions:{},type:"WMS",layers:"cadastre_commerce_wirtschaftszweig",imageType:"image/png",childLayers:[{name:"cadastre_commerce_wirtschaftszweig__5"}]},{id:2439,name:"cadastre_commerce_branchen",metadata:{is_queryable:!0,metadata_id:"5229ca5c-12b8-489b-b5c6-6abd373ac998"},dimensions:{},type:"WMS",layers:"cadastre_commerce_branchen",imageType:"image/png",childLayers:[{name:"cadastre_commerce_branchen__4"}]},{id:2444,name:"cadastre_commerce_betriebsform",metadata:{is_queryable:!0,metadata_id:"70f15780-a4d7-4170-8b2d-4868389c4eef"},dimensions:{},type:"WMS",layers:"cadastre_commerce_betriebsform",imageType:"image/png",childLayers:[{name:"cadastre_commerce_betriebsform__6"}]}],metadata:{},mixed:!0},{id:9999992316,name:"time_layers_e2e",children:[{id:9999991858,name:"starkregen",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"starkregen",imageType:"image/png",childLayers:[{name:"starkregen__0"}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:null,maxDefValue:null,mode:"range",widget:"slider"}},{id:9999991859,name:"parz",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"parzelle",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"value",widget:"datepicker"}},{id:9999991860,name:"parz_slider",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"parzelle_slider",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:9999991861,name:"act_ortho_time",metadata:{time_config:'{"default_time":"2022-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2022-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z"],resolution:"month",minDefValue:"2022-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:999999,name:"layer_datepicker_range",metadata:{time_config:'{"time_override": {"timepositions": ["2014-08-31T12:43:47.000Z/2020-12-31T23:59:59.000Z/P1M"]}}'},dimensions:{},type:"WMS",layers:"layer_datepicker_range",imageType:"image/png",childLayers:[{}],time:{minValue:"2014-08-31T12:43:47Z",maxValue:"2020-12-31T23:59:59Z",interval:[0,1,0,0],resolution:"second",minDefValue:"2014-08-31T12:43:47Z",maxDefValue:null,mode:"range",widget:"datepicker"}}]}],functionalities:{},metadata:{css:"main.css",display_in_switcher:!0,fake_scales:["750","1500","3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],page_title:"map.geoportail.lu",print_img:"bandeau.jpg",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"map.geoportal.lu",print_short_txt_en:"map.geoportal.lu",print_short_txt_fr:"map.geoportal.lu",print_short_txt_lu:"map.geoportal.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0","0.5","0.25"],show_in_mobile:!0}},{id:122,name:"tourisme",icon:"tourisme",children:[{id:2005,name:"tour_rando_new",children:[{id:2006,name:"tour_rando_highlights_new",children:[{id:189,name:"tour_mullerthal_trail",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"be71ab82-8930-4da7-840d-a99374312093"},dimensions:{},type:"WMS",layers:"tour_mullerthal_trail",imageType:"image/png",style:"default",childLayers:[{name:"tour_mullerthal_trail__category"}]},{id:205,name:"tour_escape_ardenne",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f01f9d77-cb2e-4189-89a9-df7eed16525b"},dimensions:{},type:"WMS",layers:"tour_escape_ardenne",imageType:"image/png",style:"default",childLayers:[{name:"tour_escape_ardenne__category"}]},{id:1518,name:"tour_rando_eislekpied_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"43514e15-d64c-4c53-b540-e9995a06c52e"},dimensions:{},type:"WMS",layers:"tour_rando_eislekpied_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_eislekpied_new__category"}]},{id:2019,name:"tour_rando_guttlandtrails_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"905f1710-7cb4-4f5b-9da9-3d09f82597a3"},dimensions:{},type:"WMS",layers:"tour_rando_guttlandtrails_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_guttlandtrails_new__category"}]},{id:168,name:"tour_rando_traumschleifen_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"109f2940-b476-4bdd-96a8-7301fa3c7e39"},dimensions:{},type:"WMS",layers:"tour_rando_traumschleifen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_traumschleifen_new__category"}]},{id:250,name:"tour_DeLux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"df101633-54fb-46bb-9d33-91d241c69ae2"},dimensions:{},type:"WMS",layers:"tour_DeLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_DeLux__category"}]},{id:2020,name:"tour_rando_minetttrail_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"84002ce6-1e76-4c38-9c25-3883aa0071ba"},dimensions:{},type:"WMS",layers:"tour_rando_minetttrail_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_minetttrail_new__category"}]},{id:2141,name:"tour_circuit_du_lac",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"61ae77c3-9a90-429c-9590-60b0f616d447"},dimensions:{},type:"WMS",layers:"tour_circuit_du_lac",imageType:"image/png",style:"default",childLayers:[{name:"tour_circuit_du_lac__category"}]},{id:2142,name:"tour_sentier_adrien_ries",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"91563b6c-a5d1-4583-9633-9554e5bbda49"},dimensions:{},type:"WMS",layers:"tour_sentier_adrien_ries",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentier_adrien_ries__category"}]}],metadata:{},mixed:!0},{id:2007,name:"tour_rando_rundwege_new",children:[{id:176,name:"tour_autopedestre",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"1514749f-19e9-4873-9c70-68b34ebc2e30"},dimensions:{},type:"WMS",layers:"tour_autopedestre",imageType:"image/png",style:"default",childLayers:[{name:"tour_autopedestre__category"}]},{id:2048,name:"tour_rando_lokale_wanderwege_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"5c82ad5e-8568-4f95-820d-5689a7eff3ee"},dimensions:{},type:"WMS",layers:"tour_rando_lokale_wanderwege_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_lokale_wanderwege_new__category"}]},{id:2658,name:"tour_komfort_wanderwege_public",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"5f5b3935-1645-4080-a916-24e55acc2395"},dimensions:{},type:"WMS",layers:"tour_komfort_wanderwege_public",imageType:"image/png",style:"default",childLayers:[{name:"tour_komfort_wanderwege_public__category"}]}],metadata:{},mixed:!0},{id:2008,name:"tour_rando_streckenwanderwege_new",children:[{id:235,name:"tour_sentiers_gr",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"004e728b-6e63-4ab7-9b65-f327eb2f7618"},dimensions:{},type:"WMS",layers:"tour_sentiers_gr",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_gr__category"}]},{id:227,name:"tour_sentiers_nationaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"05311fc8-28fa-470c-984e-879a410ce753"},dimensions:{},type:"WMS",layers:"tour_sentiers_nationaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_nationaux__category"}]},{id:158,name:"tour_cfl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfa696a6-1c25-4ba5-bde1-beb140776881"},dimensions:{},type:"WMS",layers:"tour_cfl",imageType:"image/png",style:"default",childLayers:[{name:"tour_cfl__category"}]},{id:197,name:"tour_sentiers_ajl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"c2587c18-ed11-44da-99dd-760a3fd73126"},dimensions:{},type:"WMS",layers:"tour_sentiers_ajl",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_ajl__category"}]},{id:218,name:"tour_saint_jacques",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"431c5622-7941-482b-a629-42bd1db17dfe"},dimensions:{},type:"WMS",layers:"tour_saint_jacques",imageType:"image/png",style:"default",childLayers:[{name:"tour_saint_jacques__category"}]},{id:2675,name:"tour_liberation_route",metadata:{is_queryable:!0,metadata_id:"348236c5-0894-4a5b-8a2e-39e22f0b8272"},dimensions:{},type:"WMS",layers:"tour_liberation_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_liberation_route__category"}]}],metadata:{},mixed:!0},{id:2009,name:"tour_rando_thematique_new",children:[{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]},{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:2022,name:"tour_rando_kunst_kultur_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"8fd3ce05-52b9-4104-9ecc-c671281eb8de"},dimensions:{},type:"WMS",layers:"tour_rando_kunst_kultur_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_kunst_kultur_new__category"}]},{id:2023,name:"tour_rando_geschichte_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"92ad7d05-c898-4ed9-8833-8f5ffa4645d3"},dimensions:{},type:"WMS",layers:"tour_rando_geschichte_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_geschichte_new__category"}]},{id:2028,name:"tour_rando_wein_genuss_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"b906a49a-3f35-442d-bada-1a28f132d8fc"},dimensions:{},type:"WMS",layers:"tour_rando_wein_genuss_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_wein_genuss_new__category"}]},{id:2024,name:"tour_rando_barrierefrei_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"7d274be4-fdf0-4a33-995d-cfb45c3d27ba"},dimensions:{},type:"WMS",layers:"tour_rando_barrierefrei_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_barrierefrei_new__category"}]},{id:2029,name:"tour_rando_fitness_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"d4c74795-d5dd-40b3-b17f-1d77eacd352a"},dimensions:{},type:"WMS",layers:"tour_rando_fitness_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_fitness_new__category"}]},{id:2025,name:"tour_rando_kinder_familie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"6ff5faaa-5a08-4619-a2e5-bdfc29feb9e0"},dimensions:{},type:"WMS",layers:"tour_rando_kinder_familie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_kinder_familie_new__category"}]},{id:370,name:"luxembourg_on_horse",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"e142f06a-349a-4163-a2a2-9dbdffe3fc95"},dimensions:{},type:"WMS",layers:"luxembourg_on_horse",imageType:"image/png",style:"default",childLayers:[{name:"luxembourg_on_horse__category"}]}],metadata:{},mixed:!0},{id:692,name:"tour_ivv",children:[{id:688,name:"tour_ivv_perm",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"83a51232-c3f3-4670-9f48-22e66a3c2a98"},dimensions:{},type:"WMS",layers:"tour_ivv_perm",imageType:"image/png",style:"default",childLayers:[{name:"tour_ivv_perm__category"}]},{id:693,name:"tour_ivv_temp",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f2b4174d-65d6-41f4-a612-188ca5f936be"},dimensions:{},type:"WMS",layers:"tour_ivv_temp",imageType:"image/png",style:"default",childLayers:[{name:"tour_ivv_temp__category"}]}],metadata:{},mixed:!0},{id:668,name:"tour_restrictions",children:[{id:667,name:"tour_restrictions_autre",metadata:{is_queryable:!0,metadata_id:"08bf0fb9-1158-46d7-a91a-e8bd6d3bb7f8"},dimensions:{},type:"WMS",layers:"tour_restrictions_autre",imageType:"image/png",style:"default",childLayers:[{name:"tour_restrictions_autre__category"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]}],metadata:{},mixed:!0},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]}],metadata:{},mixed:!0},{id:2010,name:"tour_velo_new",children:[{id:2011,name:"tour_velo_radwege_new",children:[{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:2732,name:"tour_kommunales_radwegenetz",metadata:{is_queryable:!0,metadata_id:"dc769481-d0b2-430b-b350-41698fc3df79"},dimensions:{},type:"WMS",layers:"tour_kommunales_radwegenetz",imageType:"image/png",style:"default",childLayers:[{name:"tour_kommunales_radwegenetz__category"}]},{id:2705,name:"tour_Radwege_Nachbarlaender",metadata:{is_queryable:!0,metadata_id:"3c9b8eb4-310c-4918-abd6-8462c6d16a43"},dimensions:{},type:"WMS",layers:"tour_Radwege_Nachbarlaender",imageType:"image/png",style:"default",childLayers:[{name:"tour_Radwege_Nachbarlaender__category"}]}],metadata:{},mixed:!0},{id:2012,name:"tour_velo_radtouren_new",children:[{id:809,name:"lvi_circuits_cyclables",metadata:{is_queryable:!0,metadata_id:"e5e9ddf6-dfdb-4d3b-a0e2-d1be2272bf38"},dimensions:{},type:"WMS",layers:"lvi_circuits_cyclables",imageType:"image/png",style:"default",childLayers:[{name:"lvi_circuits_cyclables__category"}]},{id:676,name:"tour_velo_route",metadata:{is_queryable:!0,linked_layers:["1713","1714"],metadata_id:"2a07d7fb-ae3e-4385-bf61-b071a7f6ffbd"},dimensions:{},type:"WMS",layers:"tour_velo_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_velo_route__category"}]},{id:293,name:"tour_pistes_vtt",metadata:{is_queryable:!0,linked_layers:["2026"],metadata_id:"2ea699a2-dc3c-4bd6-92fc-f7325b0c7fee"},dimensions:{},type:"WMS",layers:"tour_pistes_vtt",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_vtt__category"}]}],metadata:{},mixed:!0},{id:2706,name:"tour_Fernradwege",children:[{id:2701,name:"tour_EuroVelo5",metadata:{is_queryable:!0,metadata_id:"2355f6bd-8b91-42fc-8071-b47747fef4c8"},dimensions:{},type:"WMS",layers:"tour_EuroVelo5",imageType:"image/png",style:"default",childLayers:[{name:"tour_EuroVelo5__category"}]},{id:2702,name:"tour_Vennbahn",metadata:{is_queryable:!0,metadata_id:"07a2c2d2-f642-4a5a-9c76-bac2a641e481"},dimensions:{},type:"WMS",layers:"tour_Vennbahn",imageType:"image/png",style:"default",childLayers:[{name:"tour_Vennbahn__category"}]},{id:2703,name:"tour_SaarLorLux",metadata:{is_queryable:!0,metadata_id:"23815b5b-6d7a-49a3-9635-69f8a56ce835"},dimensions:{},type:"WMS",layers:"tour_SaarLorLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_SaarLorLux__category"}]},{id:2704,name:"tour_Voie_bleue",metadata:{is_queryable:!0,metadata_id:"aa88ba5e-f09c-4d8f-9bb8-a3ba09b5f6f7"},dimensions:{},type:"WMS",layers:"tour_Voie_bleue",imageType:"image/png",style:"default",childLayers:[{name:"tour_Voie_bleue__category"}]}],metadata:{},mixed:!0},{id:2013,name:"tour_fahrradstationen_new",children:[{id:2821,name:"tour_fahrradverleih",metadata:{is_queryable:!0,metadata_id:"657c2a5f-9aac-4a7f-bf0d-1bd8500c8891"},dimensions:{},type:"WMS",layers:"tour_fahrradverleih",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradverleih__21"},{name:"tour_fahrradverleih__22"}]},{id:2040,name:"tour_ebike_ladestationen",metadata:{is_queryable:!0,metadata_id:"f2a97908-06ba-4654-b302-039e5c14ee48"},dimensions:{},type:"WMS",layers:"tour_ebike_ladestationen",imageType:"image/png",style:"default",childLayers:[{name:"tour_ebike_ladestationen__10"}]},{id:2039,name:"tour_fahrradstationen_reparatur_wasch_new",metadata:{is_queryable:!0,metadata_id:"43adb071-d70e-415d-8c4e-3b64bff2a1cb"},dimensions:{},type:"WMS",layers:"tour_fahrradstationen_reparatur_wasch_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradstationen_reparatur_wasch_new__9"}]},{id:2733,name:"tour_fahrradstationen_waschstationen_new",metadata:{is_queryable:!0,metadata_id:"4cb92c0e-933a-4c6d-8a92-8f6755594641"},dimensions:{},type:"WMS",layers:"tour_fahrradstationen_waschstationen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fahrradstationen_waschstationen_new__19"}]}],metadata:{},mixed:!0},{id:2014,name:"tour_restrictions_velo_new",children:[{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:2026,name:"tour_restrictions_MTB_new",metadata:{is_queryable:!0,metadata_id:"ec4ddb2e-40b2-4844-9f1b-042427772e7b"},dimensions:{},type:"WMS",layers:"tour_restrictions_MTB_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restrictions_MTB_new__category"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]}],metadata:{},mixed:!0},{id:725,name:"tour_tdl",metadata:{is_queryable:!0,metadata_id:"35226642-3f09-4f98-86b6-6e55316bce53"},dimensions:{},type:"WMS",layers:"tour_tdl",imageType:"image/png",style:"default",childLayers:[{name:"tour_tdl__category"}]}],metadata:{},mixed:!0},{id:336,name:"tour_auto_moto_v2",children:[{id:681,name:"tour_moto",metadata:{is_queryable:!0,metadata_id:"5256618e-6c50-4044-84cb-ce5740abe508"},dimensions:{},type:"WMS",layers:"tour_moto",imageType:"image/png",style:"default",childLayers:[{name:"tour_moto__category"}]},{id:254,name:"tour_touring",metadata:{is_queryable:!0,metadata_id:"89e49996-258f-4a7e-86a3-80e2e9af51c9"},dimensions:{},type:"WMS",layers:"tour_touring",imageType:"image/png",style:"default",childLayers:[{name:"tour_touring__category"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:2058,name:"grand_tour_luxembourg",metadata:{is_queryable:!0,metadata_id:"d0157590-ddaf-487a-8994-d7142fd07ed8"},dimensions:{},type:"WMS",layers:"grand_tour_luxembourg",imageType:"image/png",style:"default",childLayers:[{name:"grand_tour_luxembourg__category"}]},{id:2674,name:"tour_grand_tour_regionale_touren",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_grand_tour_regionale_touren",imageType:"image/png",style:"default",childLayers:[{name:"tour_grand_tour_regionale_touren__category"}]}],metadata:{},mixed:!0},{id:2015,name:"tour_mobilite_new",children:[{id:2016,name:"tour_bus_bahn_new",children:[{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:2017,name:"tour_auto_new",children:[{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2018,name:"tour_erleben_new",children:[{id:2042,name:"tour_tourist_info_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_tourist_info_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_tourist_info_new__7"}]},{id:2030,name:"tour_essen_uebernachten_new",children:[{id:2038,name:"tour_hotels_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_hotels_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_hotels_new__2"}]},{id:2037,name:"tour_camping_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_camping_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_camping_new__11"}]},{id:2036,name:"tour_jugendherberge_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_jugendherberge_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_jugendherberge_new__12"}]},{id:2035,name:"tour_fewo_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_fewo_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fewo_new__13"}]},{id:2034,name:"tour_bb_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_bb_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_bb_new__14"}]},{id:2033,name:"tour_restaurants_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_restaurants_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restaurants_new__15"}]}],metadata:{},mixed:!0},{id:2031,name:"tour_kultur_new",children:[{id:2044,name:"tour_burgen_schloesser_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_burgen_schloesser_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_burgen_schloesser_new__16"}]},{id:2043,name:"tour_museen_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_museen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_museen_new__17"}]},{id:2027,name:"tour_unesco_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_unesco_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_unesco_new__category"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2032,name:"tour_erste_hilfe_new",children:[{id:2047,name:"hopitaux",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"2047",imageType:"image/png",style:"default",childLayers:[{name:"hopitaux__POI"}]},{id:1621,name:"points_sauvetage_vdl",metadata:{is_queryable:!0,metadata_id:"f8938381-7f09-45d1-becd-506b76327562"},dimensions:{},type:"WMS",layers:"points_sauvetage_vdl",imageType:"image/png",style:"default",childLayers:[{name:"points_sauvetage_vdl__0"}]}],metadata:{},mixed:!0},{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"tourisme.css",display_in_switcher:!0,link_title:"Send email",page_title:"tourisme.geoportail.lu",print_img:"bandeautourisme.png",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"tourisme.geoportal.lu",print_short_txt_en:"tourisme.geoportal.lu",print_short_txt_fr:"tourisme.geoportail.lu",print_short_txt_lu:"tourisme.geoportal.lu",show_in_mobile:!0}},{id:105,name:"emwelt",icon:"emwelt",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1823,name:"anf_mesures_compensatoires_group",children:[{id:1827,name:"anf_secteurs_ecologiques_compensation_ecopoint",metadata:{is_queryable:!0,metadata_id:"22033820-7317-4bcc-9c4c-df5b9ca80550"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques_compensation_ecopoint",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques_compensation_ecopoint__SECTEURS_COMPENSATION"}]},{id:1822,name:"anf_projets_compensation_approuves",metadata:{is_queryable:!0,metadata_id:"03aafc0c-c443-42ea-963a-8538a3f089d4"},dimensions:{},type:"WMS",layers:"anf_projets_compensation_approuves",imageType:"image/png",style:"default",childLayers:[{name:"anf_projets_compensation_approuves__ZONES_COMPENSATION_APPROUVEES"}]}],metadata:{},mixed:!0},{id:161,name:"env_obs",children:[{id:1963,name:"env_couverture_sol",children:[{id:1951,name:"LISL_Landcover_2018",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"6142a6a6-9356-47ac-babe-eaa2ae3628b6"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2018__0"},{name:"LISL_Landcover_2018__1"}]},{id:1950,name:"LISL_Landcover_2015_v2",metadata:{is_queryable:!0,legend_name:"lisl:lc2015_2",metadata_id:"67f4ecb8-5d4b-4a9e-a60b-239fc92b25a7"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2015_v2",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2015_v2__0"},{name:"LISL_Landcover_2015_v2__1"}]},{id:2714,name:"LISL_Landcover_2021",metadata:{is_queryable:!0,legend_name:"lisl:lc2018",metadata_id:"e7afeac8-c649-4c91-ab15-ea40b8986ebc"},dimensions:{},type:"WMS",layers:"LISL_Landcover_2021",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landcover_2021__0"},{name:"LISL_Landcover_2021__4"}]}],metadata:{},mixed:!0},{id:1964,name:"env_utilisation_sol",children:[{id:1970,name:"LISL_Landuse_2018",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2018",metadata_id:"e4572e0b-1b40-4834-b6c3-ccab83f75f57"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2018__0"}]},{id:2054,name:"LISL_Landuse_2015_v3",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2015_v3",metadata_id:"65e04718-1890-4c5e-8be7-08a73f69c0cc"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2015_v3",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2015_v3__0"}]},{id:1969,name:"LISL_Landuse_2007",metadata:{is_queryable:!0,legend_name:"lisl_landuse_2007",metadata_id:"257556b9-560b-4193-b773-e16a9137a690"},dimensions:{},type:"WMS",layers:"LISL_Landuse_2007",imageType:"image/png",style:"default",childLayers:[{name:"LISL_Landuse_2007__0"}]}],metadata:{},mixed:!0},{id:1965,name:"env_impermeabilisation",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0},{id:1966,name:"env_occupation_biophysique",children:[{id:215,name:"env_obs2007",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"bd672300-0851-4901-82c4-6099aff1fcf7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs2007",imageType:"image/png"},{id:163,name:"env_obs1999",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"b4836d86-2803-4dcf-a991-7e78ab9c41b6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_obs1999",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:276,name:"env_sentiers",children:[{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:1857,name:"anf_itineraire_nature",metadata:{is_queryable:!0,legend_name:"anf:vakanz_doheem",metadata_id:"fb71d4b6-b11a-4bf0-9b23-cddaa17e058c"},dimensions:{},type:"WMS",layers:"anf_itineraire_nature",imageType:"image/png",style:"default",childLayers:[{name:"anf_itineraire_nature__0"}]},{id:1968,name:"np_uewersauer_randonnee_eau",metadata:{is_queryable:!0,metadata_id:"2bfd404c-1734-491d-94c3-59a16a3edf2c"},dimensions:{},type:"WMS",layers:"np_uewersauer_randonnee_eau",imageType:"image/png",style:"default",childLayers:[{name:"np_uewersauer_randonnee_eau__category"}]}],metadata:{},mixed:!0},{id:280,name:"anf_unites_admin",children:[{id:427,name:"anf_arrondissements",metadata:{is_queryable:!0,metadata_id:"0ed72c13-1975-4cef-90de-1e4b737f5fbd"},dimensions:{},type:"WMS",layers:"anf_arrondissements",imageType:"image/png",style:"default",childLayers:[{name:"anf_arrondissements__ARRONDISSEMENTS"}]},{id:428,name:"anf_triages",metadata:{is_queryable:!0,metadata_id:"d4bb012a-73ab-4d3c-ac0c-f31e9df07d34"},dimensions:{},type:"WMS",layers:"anf_triages",imageType:"image/png",style:"default",childLayers:[{name:"anf_triages__TRIAGES"}]}],metadata:{},mixed:!0},{id:241,name:"anf_forets",children:[{id:677,name:"anf_proprietes_forestieres",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"fa6d38c7-263c-4349-b208-45652f9b98ca"},dimensions:{},type:"WMS",layers:"anf_proprietes_forestieres",imageType:"image/png",style:"default",childLayers:[{name:"anf_proprietes_forestieres__PROPRIETES_FORESTIERES"}]},{id:1514,name:"anf_forets_publiques_fsc_pefc",metadata:{is_queryable:!0,legend_name:"anf:proprietes_forestieres",metadata_id:"ad654091-a8b2-45db-91ff-f3eef50bbe38"},dimensions:{},type:"WMS",layers:"anf_forets_publiques_fsc_pefc",imageType:"image/png",style:"default",childLayers:[{name:"anf_forets_publiques_fsc_pefc__PROPRIETES_FORESTIERES_CERTIFIEES"}]},{id:389,name:"anf_peuplements_semenciers",metadata:{is_queryable:!0,metadata_id:"5d2b9400-3f94-4962-ad67-8b7e923d6d8b"},dimensions:{},type:"WMS",layers:"anf_peuplements_semenciers",imageType:"image/png",style:"default",childLayers:[{name:"anf_peuplements_semenciers__PEUPLEMENTS_SEMENCIERS"}]}],metadata:{},mixed:!0},{id:1953,name:"anf_especes",children:[{id:1961,name:"anf_amphibiens",children:[{id:1962,name:"anf_amphibiens_sauvetage",metadata:{is_queryable:!0,metadata_id:"348a241e-27c4-4d31-8cf0-e99626efa6a1"},dimensions:{},type:"WMS",layers:"anf_amphibiens_sauvetage",imageType:"image/png",style:"default",childLayers:[{name:"anf_amphibiens_sauvetage__0"}]},{id:2759,name:"anf_roadkill",metadata:{is_queryable:!0,metadata_id:"7868aa30-1480-49a7-85ad-bb117974c55e"},dimensions:{},type:"WMS",layers:"anf_roadkill",imageType:"image/png",style:"default",childLayers:[{name:"anf_roadkill__1"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2483,name:"anf_corridors_faune_sauvage_group",children:[{id:2482,name:"anf_corridors_faune_sauvage",metadata:{metadata_id:"58a2c50b-0f4e-4d9c-95ff-5851eebf6e58"},dimensions:{},type:"WMS",layers:"anf_corridors_faune_sauvage",imageType:"image/png",style:"default",childLayers:[{name:"anf_corridors_faune_sauvage__corridors_ecologiques"}]}],metadata:{},mixed:!0},{id:180,name:"anf_secteurs_ecologiques_group",children:[{id:690,name:"anf_secteurs_ecologiques",metadata:{is_queryable:!0,metadata_id:"8afa4162-c23b-4001-b737-4074d4f5360f"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques__SECTEURS_ECOLOGIQUES"}]}],metadata:{},mixed:!0},{id:322,name:"anf_chasse",children:[{id:1783,name:"anf_lots_chasse_2021",metadata:{exclusion:"[340]",is_queryable:!0,metadata_id:"a8d8f46d-f6b1-4bb0-9935-be825cffab3f"},dimensions:{},type:"WMS",layers:"anf_lots_chasse_2021",imageType:"image/png",style:"default",childLayers:[{name:"anf_lots_chasse_2021__LOTS_CHASSE_2021"}]},{id:444,name:"anf_dates_battues",metadata:{exclusion:"[340]",is_queryable:!1,metadata_id:"cd5c65e3-ce29-4317-bc07-127bc679861f"},dimensions:{},type:"WMS",layers:"anf_dates_battues",imageType:"image/png",style:"default",childLayers:[{name:"anf_dates_battues__BATTUES_CHASSE"}]},{id:1496,name:"anf_centre_ramassage",metadata:{is_queryable:!0,metadata_id:"44f25bb0-6b7d-46fa-8388-ccdf682797ce"},dimensions:{},type:"WMS",layers:"anf_centre_ramassage",imageType:"image/png",style:"default",childLayers:[{name:"anf_centre_ramassage__RAMASSAGE_GIBIER"}]},{id:1658,name:"anf_zone_prevention_ppa",metadata:{is_queryable:!0,metadata_id:"62f2a3ed-5893-4ed2-aba7-77159b10fb2e"},dimensions:{},type:"WMS",layers:"anf_zone_prevention_ppa",imageType:"image/png",style:"default",childLayers:[{name:"anf_zone_prevention_ppa__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0},{id:1361,name:"aev_casipo_group",children:[{id:1362,name:"aev_casipo",metadata:{is_queryable:!0,metadata_id:"974688ed-130e-4704-ba2c-72154ed0cecb"},dimensions:{},type:"WMS",layers:"aev_casipo",imageType:"image/png",style:"default",childLayers:[{name:"aev_casipo__PARCELLES"}]},{id:1858,name:"aev_anciennes_decharges",metadata:{is_queryable:!0,metadata_id:"ec1a8607-5f8d-4baa-9b14-1aa8ed0a828a"},dimensions:{},type:"WMS",layers:"aev_anciennes_decharges",imageType:"image/png",style:"default",childLayers:[{name:"aev_anciennes_decharges__1"}]}],metadata:{},mixed:!0},{id:1355,name:"aev_qualite_air",children:[{id:2697,name:"aev_qualite_air_zonage",children:[{id:2698,name:"aev_qualite_air_zonage_2021",metadata:{is_queryable:!0,metadata_id:"51eddfec-31e8-4b2a-adba-595e09816ff5"},dimensions:{},type:"WMS",layers:"aev_qualite_air_zonage_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_qualite_air_zonage_2021__4"},{name:"aev_qualite_air_zonage_2021__5"}]},{id:2725,name:"aev_qualite_air_ancien_zonage",metadata:{is_queryable:!0,metadata_id:"f3a40ebf-e5ad-4495-a0ce-83bbb3df02ed"},dimensions:{},type:"WMS",layers:"aev_qualite_air_ancien_zonage",imageType:"image/png",style:"default",childLayers:[{name:"aev_qualite_air_ancien_zonage__3"}]}],metadata:{},mixed:!0},{id:1472,name:"aev_modelisation",children:[{id:1430,name:"air_quality_o3",metadata:{is_queryable:!0,legend_name:"aev:air_quality_o3",metadata_id:"4ebe5c4d-2318-4caa-bace-3e3784a41509",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_no2",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_o3__1"},{name:"air_quality_o3__7"}]},{id:1429,name:"air_quality_no2",metadata:{is_queryable:!0,legend_name:"aev:air_quality",metadata_id:"d405406f-c1c7-4f47-ae40-e76008a91c4a",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_o3",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_no2__0"},{name:"air_quality_no2__7"}]},{id:1425,name:"air_quality_pm10",metadata:{is_queryable:!0,legend_name:"aev:air_quality_pm10",metadata_id:"94d2f0ea-f0ce-4a79-be7f-1d018deffb61",start_opacity:.7},dimensions:{},type:"WMS",layers:"air_quality_pm10",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_pm10__2"},{name:"air_quality_pm10__7"}]},{id:1480,name:"air_quality_pm2_5",metadata:{is_queryable:!0,legend_name:"aev:air_quality_pm2_5",metadata_id:"5b62c615-448c-4d74-8914-3275e64fbc1e",start_opacity:.75},dimensions:{},type:"WMS",layers:"air_quality_pm2_5",imageType:"image/png",style:"default",childLayers:[{name:"air_quality_pm2_5__7"},{name:"air_quality_pm2_5__9"}]}],metadata:{},mixed:!0},{id:1473,name:"aev_air_mesures",children:[{id:1357,name:"aev_reseau_telemetrique",metadata:{is_queryable:!0,metadata_id:"1be21b78-5824-47d6-87c1-db60c5e3d856"},dimensions:{},type:"WMS",layers:"aev_reseau_telemetrique",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_telemetrique__0"}]},{id:1358,name:"aev_poussieres_fines",metadata:{is_queryable:!0,metadata_id:"5e6fa76e-d6d7-41d8-b88f-9ae00e3222d5"},dimensions:{},type:"WMS",layers:"aev_poussieres_fines",imageType:"image/png",style:"default",childLayers:[{name:"aev_poussieres_fines__3"}]},{id:1359,name:"aev_reseau_bergerhoff",metadata:{is_queryable:!0,metadata_id:"735a1453-00f3-402e-91b0-2cd9e677cd2c"},dimensions:{},type:"WMS",layers:"aev_reseau_bergerhoff",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_bergerhoff__5"}]},{id:1426,name:"aev_reseau_biosurveillance",metadata:{is_queryable:!0,metadata_id:"68871fde-72b1-45e6-b891-14a8746264ea"},dimensions:{},type:"WMS",layers:"aev_reseau_biosurveillance",imageType:"image/png",style:"default",childLayers:[{name:"aev_reseau_biosurveillance__1"}]}],metadata:{},mixed:!0},{id:1704,name:"aev_mesurage_no2",children:[{id:2696,name:"aev_pacte_climat_participation_communes",metadata:{is_queryable:!0,metadata_id:"60879bfa-1eaa-4b58-984d-405bf2282b1b"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_participation_communes",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_participation_communes__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2594,name:"aev_pacte_climat_2022",metadata:{is_queryable:!0,legend_name:"aev:klimapakt",metadata_id:"9bbf8bb1-b693-49db-8c03-222425195ddc"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2022",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2022__9"}]},{id:2400,name:"aev_pacte_climat_2021",metadata:{is_queryable:!0,legend_name:"aev:klimapakt",metadata_id:"4ce0368e-af4e-456f-9dd1-7969b73360d7"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2021__8"}]},{id:2088,name:"aev_pacte_climat_2020",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat_2020",metadata_id:"805db173-9621-4b9a-ae8a-a8fae34a791b"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2020",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2020__7"}]},{id:1848,name:"aev_pacte_climat_2019",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat_2019",metadata_id:"aff9f715-babc-4f0b-a86b-16651d626bde"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2019",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2019__5"},{name:"aev_pacte_climat_2019__6"}]},{id:1477,name:"aev_pacte_climat_2018",metadata:{is_queryable:!0,legend_name:"aev:pacte_climat",metadata_id:"bb5aa932-2669-4802-9c34-c370addbc798"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2018",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2018__2"},{name:"aev_pacte_climat_2018__3"}]}],metadata:{},mixed:!0},{id:2171,name:"env_air_inventaires_emissions",children:[{id:2143,name:"env_GRETA",children:[{id:2144,name:"aev_GRETA_A_PublicPower_NOX",metadata:{is_queryable:!0,metadata_id:"587c5d9a-ac3d-42ae-8544-6688020d80df"},dimensions:{},type:"WMS",layers:"aev_GRETA_A_PublicPower_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_A_PublicPower_NOX__1"}]},{id:2145,name:"aev_GRETA_B_Industry_PCB",metadata:{is_queryable:!0,metadata_id:"a6c3a9cd-9c3d-4f68-9252-403a0a8241c8"},dimensions:{},type:"WMS",layers:"aev_GRETA_B_Industry_PCB",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_B_Industry_PCB__2"}]},{id:2146,name:"aev_GRETA_C_OtherStationaryComb_CO",metadata:{is_queryable:!0,metadata_id:"b922e53c-cfb9-4f7d-8cfe-166b3e518642"},dimensions:{},type:"WMS",layers:"aev_GRETA_C_OtherStationaryComb_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_C_OtherStationaryComb_CO__3"}]},{id:2147,name:"aev_GRETA_D_Fugitive_NMVOC",metadata:{is_queryable:!0,metadata_id:"68f34bfe-dfa8-4d8e-a6df-d8ef47ea296a"},dimensions:{},type:"WMS",layers:"aev_GRETA_D_Fugitive_NMVOC",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_D_Fugitive_NMVOC__4"}]},{id:2148,name:"aev_GRETA_E_Solvents_NMVOC",metadata:{is_queryable:!0,metadata_id:"49ef5406-e0cb-4d36-91f0-c8cd349bb79e"},dimensions:{},type:"WMS",layers:"aev_GRETA_E_Solvents_NMVOC",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_E_Solvents_NMVOC__5"}]},{id:2149,name:"aev_GRETA_F_RoadTransport_NOX",metadata:{is_queryable:!0,metadata_id:"b262fc22-b815-47b4-8a58-8f4c958f0b8e"},dimensions:{},type:"WMS",layers:"aev_GRETA_F_RoadTransport_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_F_RoadTransport_NOX__6"}]},{id:2150,name:"aev_GRETA_G_Shipping_CO",metadata:{is_queryable:!0,metadata_id:"16a8476a-67ad-43e0-bf86-a0f75eb25d51"},dimensions:{},type:"WMS",layers:"aev_GRETA_G_Shipping_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_G_Shipping_CO__7"}]},{id:2151,name:"aev_GRETA_H_Aviation_NOX",metadata:{is_queryable:!0,metadata_id:"86c039b8-58e8-45b4-8c80-57d341e6a192"},dimensions:{},type:"WMS",layers:"aev_GRETA_H_Aviation_NOX",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_H_Aviation_NOX__8"}]},{id:2152,name:"aev_GRETA_I_Offroad_CO",metadata:{is_queryable:!0,metadata_id:"09fed776-d254-46c3-85ad-21f4f05ac902"},dimensions:{},type:"WMS",layers:"aev_GRETA_I_Offroad_CO",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_I_Offroad_CO__9"}]},{id:2153,name:"aev_GRETA_J_Waste_PCDD",metadata:{is_queryable:!0,metadata_id:"f2219f8d-c455-4c14-9f72-5a0b62fd1fa6"},dimensions:{},type:"WMS",layers:"aev_GRETA_J_Waste_PCDD",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_J_Waste_PCDD__10"}]},{id:2154,name:"aev_GRETA_K_AgrilLivestock_NH3",metadata:{is_queryable:!0,metadata_id:"789a7a4a-0006-4512-b53d-b76173401231"},dimensions:{},type:"WMS",layers:"aev_GRETA_K_AgrilLivestock_NH3",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_K_AgrilLivestock_NH3__11"}]},{id:2155,name:"aev_GRETA_L_AgriOther_NH3",metadata:{is_queryable:!0,metadata_id:"a55b1da7-7e0e-4de0-8e4e-02700bc77a21"},dimensions:{},type:"WMS",layers:"aev_GRETA_L_AgriOther_NH3",imageType:"image/png",style:"default",childLayers:[{name:"aev_GRETA_L_AgriOther_NH3__12"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2172,name:"env_air_installations_tegistres",children:[{id:1465,name:"aev_medium_combustion_plants",metadata:{geocatalog_open_data_last_update_date:"2024-02-09T02:03:38.8412602",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65af7951656c669c7e2c7b68",is_queryable:!0,metadata_id:"1c8dc7c5-f94f-49f6-9d96-3a129b28a922"},dimensions:{},type:"WMS",layers:"aev_medium_combustion_plants",imageType:"image/png",style:"default",childLayers:[{name:"aev_medium_combustion_plants__0"}]},{id:2459,name:"aev_ets_quota",children:[{id:2460,name:"aev_ets_quota_phase3",children:[{id:2450,name:"aev_ets_quota_2013",metadata:{is_queryable:!0,metadata_id:"3a525901-e999-43b7-b76f-4b2685c3126f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2013",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2013__9"}]},{id:2451,name:"aev_ets_quota_2014",metadata:{is_queryable:!0,metadata_id:"fb7bd65d-1ba7-46ea-bd0a-8fea5ad31fa0"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2014",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2014__8"}]},{id:2452,name:"aev_ets_quota_2015",metadata:{is_queryable:!0,metadata_id:"8c5c24de-6cd4-4799-b15f-be94147f338f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2015",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2015__7"}]},{id:2453,name:"aev_ets_quota_2016",metadata:{is_queryable:!0,metadata_id:"ae7abf2b-fcd7-4f77-8ffb-b973cdd8efe2"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2016",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2016__6"}]},{id:2454,name:"aev_ets_quota_2017",metadata:{is_queryable:!0,metadata_id:"49168300-890e-4005-9ff2-50db00430846"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2017",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2017__5"}]},{id:2455,name:"aev_ets_quota_2018",metadata:{is_queryable:!0,metadata_id:"75c126a0-0778-4c08-87a1-d568a0112674"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2018",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2018__4"}]},{id:2456,name:"aev_ets_quota_2019",metadata:{is_queryable:!0,metadata_id:"1fbfd062-d911-4186-900d-7ea60f49a533"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2019",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2019__3"}]},{id:2457,name:"aev_ets_quota_2020",metadata:{is_queryable:!0,metadata_id:"b6ad5f19-97bd-4617-8f78-b1805cd8381f"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2020",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2020__2"}]}],metadata:{},mixed:!0},{id:2461,name:"aev_ets_quota_phase4",children:[{id:2458,name:"aev_ets_quota_2021",metadata:{is_queryable:!0,metadata_id:"bbbc661a-2f1c-43f3-9f38-ef7cf7156081"},dimensions:{},type:"WMS",layers:"aev_ets_quota_2021",imageType:"image/png",childLayers:[{name:"aev_ets_quota_2021__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:166,name:"env_bruit",children:[{id:2123,name:"env_bruit_modelisation",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0},{id:2771,name:"env_bruit_agglo",children:[{id:2769,name:"aev_bruit_agglo_industry_2021_Lden",metadata:{is_queryable:!0,metadata_id:"4faed79e-f82c-4758-b4bf-df654951b27f",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lden__37"}]},{id:2770,name:"aev_bruit_agglo_industry_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e1e006c9-c637-4e2a-840f-3b7e8a04ce1e",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lngt__38"}]},{id:2768,name:"aev_bruit_agglo_roads_2021_Lden",metadata:{is_queryable:!0,metadata_id:"0015e212-a7e5-42f6-ba94-3fdb5014513c",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lden__35"}]},{id:2767,name:"aev_bruit_agglo_roads_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"9718d119-a073-4406-8bf1-d4b409ed6a68",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lngt__36"}]},{id:2765,name:"aev_bruit_agglo_tram_2021_Lden",metadata:{is_queryable:!0,metadata_id:"47bbe08f-dbb4-4a4f-bbf7-8c6084e6da45",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lden__33"}]},{id:2766,name:"aev_bruit_agglo_tram_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e11fbfdf-29c4-4845-ad12-e2fc2ef5f530",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lngt__34"}]}],metadata:{},mixed:!0},{id:2124,name:"env_bruit_multiexposition",children:[{id:2125,name:"aev_multiexposition_Lden",metadata:{is_queryable:!0,metadata_id:"37c1c1a2-1926-4c92-8c2a-b9ce0ac6cfef"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lden__1"}]},{id:2126,name:"aev_multiexposition_Lnight",metadata:{is_queryable:!0,metadata_id:"a536e129-3c0f-4a6c-a767-0519eec880c1"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lnight",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lnight__2"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1641,name:"aev_campagne_mesure_bruit",children:[{id:2618,name:"aev_bruit_campagne_2023",children:[{id:2726,name:"aev_campagne_bruit_aeroportuaire_2023",metadata:{is_queryable:!0,metadata_id:"3c6a1f70-51ab-4c8b-9a09-c163bafd23ff"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_aeroportuaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_aeroportuaire_2023__109"}]}],metadata:{},mixed:!0},{id:2475,name:"env_bruit_campagne_2022",children:[{id:2619,name:"aev_campagne_bruit_routier_2023",metadata:{is_queryable:!0,metadata_id:"e242b817-86a7-4f70-bc41-8e90d264fd19"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_routier_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_routier_2023__97"}]},{id:2620,name:"aev_campagne_bruit_ferroviaire_2023",metadata:{is_queryable:!0,metadata_id:"c3c06743-6876-4f55-802d-4599000c1681"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_ferroviaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_ferroviaire_2023__94"}]}],metadata:{},mixed:!0},{id:1916,name:"aev_silent_cities_2020",children:[{id:1917,name:"aev_silent_cities_2020_phase1",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase1",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase1__7"}]},{id:1918,name:"aev_silent_cities_2020_phase2",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase2",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase2__8"}]},{id:1919,name:"aev_silent_cities_2020_phase3",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase3",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase3__9"}]}],metadata:{},mixed:!0},{id:1921,name:"env_bruit_routes_hotspots_2019_group",children:[{id:1642,name:"env_bruit_routes_hotspots_2019",metadata:{is_queryable:!0,legend_name:"aev:hotspots_rail",metadata_id:"f898e289-c5dd-432b-b3e6-de4c3681b77a"},dimensions:{},type:"WMS",layers:"env_bruit_routes_hotspots_2019",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_routes_hotspots_2019__4"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1382,name:"aev_zones_calmes",children:[{id:1383,name:"aev_zones_calmes_rurales",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"49cfe40d-b006-4aaa-831b-11d1e19e1411"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_rurales",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_rurales__12"}]},{id:1384,name:"aev_zones_calmes_urbaines",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"82ba068d-81c3-41d3-a24a-f5dc2545d005"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_urbaines",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_urbaines__10"},{name:"aev_zones_calmes_urbaines__7"}]},{id:1385,name:"aev_oases_urbaines",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes",metadata_id:"655d2f1e-c4b6-4f33-a4d1-4171d64bc3b1"},dimensions:{},type:"WMS",layers:"aev_oases_urbaines",imageType:"image/png",style:"default",childLayers:[{name:"aev_oases_urbaines__11"},{name:"aev_oases_urbaines__8"}]},{id:1828,name:"aev_zones_calmes_campagne_groupe",children:[{id:1829,name:"aev_zones_calmes_camp2020_ZCP",metadata:{is_queryable:!0,legend_name:"aev:zones_calmes_20",metadata_id:"d6f1740a-4c8a-40aa-a564-ddb6735f5a34"},dimensions:{},type:"WMS",layers:"aev_zones_calmes_camp2020_ZCP",imageType:"image/png",style:"default",childLayers:[{name:"aev_zones_calmes_camp2020_ZCP__13"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2131,name:"env_esch22",children:[{id:2130,name:"env_esch22_soundwalks",children:[{id:2127,name:"aev_soundwalks_fading_thunders",metadata:{is_queryable:!0,metadata_id:"1374bb36-c9c4-4be0-b81c-d7d1d7ae9684"},dimensions:{},type:"WMS",layers:"aev_soundwalks_fading_thunders",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_fading_thunders__1"},{name:"aev_soundwalks_fading_thunders__2"}]},{id:2128,name:"aev_soundwalks_city_stories",metadata:{is_queryable:!0,metadata_id:"0e47e8c5-1a26-4928-9a94-d26eba39c738"},dimensions:{},type:"WMS",layers:"aev_soundwalks_city_stories",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_city_stories__4"},{name:"aev_soundwalks_city_stories__5"}]},{id:2129,name:"aev_soundwalks_blue_noise",metadata:{is_queryable:!0,metadata_id:"3e7eea7f-c751-4c7a-9abb-7bdda313628c"},dimensions:{},type:"WMS",layers:"aev_soundwalks_blue_noise",imageType:"image/png",style:"default",childLayers:[{name:"aev_soundwalks_blue_noise__7"},{name:"aev_soundwalks_blue_noise__8"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1510,name:"aev_dechets",children:[{id:1509,name:"aev_dechets_biogas",metadata:{is_queryable:!0,metadata_id:"2f4a0025-33a4-4015-9acd-4660cef27129"},dimensions:{},type:"WMS",layers:"aev_dechets_biogas",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_biogas__1"}]},{id:1506,name:"aev_dechets_composting",metadata:{is_queryable:!0,metadata_id:"fe751427-564d-44b3-9d06-90a5d1a5054c"},dimensions:{},type:"WMS",layers:"aev_dechets_composting",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_composting__0"}]},{id:1507,name:"aev_dechets_inert_waste",metadata:{is_queryable:!0,metadata_id:"e17908a0-c45d-4312-bc8b-fdde4b5c5d83"},dimensions:{},type:"WMS",layers:"aev_dechets_inert_waste",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_inert_waste__2"}]},{id:1508,name:"aev_dechets_recycling",metadata:{is_queryable:!0,metadata_id:"7dc38059-fbac-4287-99aa-4d04bb7dd761"},dimensions:{},type:"WMS",layers:"aev_dechets_recycling",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_recycling__3"}]},{id:1801,name:"aev_dechets_menager",metadata:{is_queryable:!0,metadata_id:"8e63ec89-7d10-4374-88bc-580caabf9783"},dimensions:{},type:"WMS",layers:"aev_dechets_menager",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_menager__5"}]},{id:1933,name:"aev_dechets_stations_epuration",metadata:{is_queryable:!0,metadata_id:"b821085f-91a1-431e-a385-2f9e0dfef43d"},dimensions:{},type:"WMS",layers:"aev_dechets_stations_epuration",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_stations_epuration__6"}]},{id:2723,name:"aev_dechets_boues_epuration",metadata:{is_queryable:!0,metadata_id:"2c6d717e-6534-4c2b-86a7-b3b99c4cf114"},dimensions:{},type:"WMS",layers:"aev_dechets_boues_epuration",imageType:"image/png",style:"default",childLayers:[{name:"aev_dechets_boues_epuration__7"}]}],metadata:{},mixed:!0},{id:1466,name:"aev_facilities_registers",children:[{id:803,name:"cadastre_hertzien_group",children:[{id:811,name:"mat_antennes_moins_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennesbelow50w",metadata_id:"cbf57825-26ba-4e36-98e8-083c1945066c"},dimensions:{},type:"WMS",layers:"mat_antennes_moins_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_moins_50_watt__0"}]},{id:1930,name:"mat_5G_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"76e25a5d-8e78-40cb-a54b-9cfc27b16e60"},dimensions:{},type:"WMS",layers:"mat_5G_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G_antennes_plus_50_watt__0"}]},{id:2053,name:"mat_5G-3.6GHZ_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"e048acda-0ec7-4f52-8221-613d9312c28b"},dimensions:{},type:"WMS",layers:"mat_5G-3.6GHZ_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G-3.6GHZ_antennes_plus_50_watt__0"}]},{id:801,name:"mat_antennes_plus_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennes",metadata_id:"e4a24392-591c-4d20-a62b-f75a9191488d"},dimensions:{},type:"WMS",layers:"mat_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_plus_50_watt__0"}]},{id:802,name:"mat_points_mesure",metadata:{is_queryable:!0,legend_name:"at:pointmesure",metadata_id:"f8f71353-40b8-4e10-b72c-85d8fe9e0577"},dimensions:{},type:"WMS",layers:"mat_points_mesure",imageType:"image/png",style:"default",childLayers:[{name:"mat_points_mesure__0"}]}],metadata:{is_expanded:!0},mixed:!0},{id:1360,name:"aev_emplacements_eoliennes",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:02:39.4998465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"5e739028d2bfb222b781c722",is_queryable:!0,legend_name:"aev:eoliennes",metadata_id:"354c5313-a733-4121-8f0d-5e0932d563b7"},dimensions:{},type:"WMS",layers:"aev_emplacements_eoliennes",imageType:"image/png",style:"default",childLayers:[{name:"aev_emplacements_eoliennes__2"}]},{id:1826,name:"aev_facilities_ied",metadata:{geocatalog_open_data_last_update_date:"2024-07-17T01:05:05.5508376",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"6690f0b6663adf116ea5d0f9",is_queryable:!0,legend_name:"aev_facilities_ied",metadata_id:"2606152c-0169-41a2-843e-861e15e9024c"},dimensions:{},type:"WMS",layers:"aev_facilities_ied",imageType:"image/png",style:"default",childLayers:[{name:"aev_facilities_ied__0"}]},{id:798,name:"seveso",metadata:{is_queryable:!0,legend_name:"seveso",metadata_id:"b9ab14d8-4e51-4146-b019-3937715a8fe8"},dimensions:{},type:"WMS",layers:"seveso",imageType:"image/png",style:"default",childLayers:[{name:"seveso__POI"}]}],metadata:{},mixed:!0},{id:1467,name:"radon",children:[{id:1468,name:"carte_radon_communes",metadata:{is_queryable:!0,legend_name:"radon",metadata_id:"80309cdb-b664-4ea8-a3a4-c602f5814f79",start_opacity:.7},dimensions:{},type:"WMS",layers:"carte_radon_communes",imageType:"image/png",style:"default",childLayers:[{name:"carte_radon_communes__3"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"anf.css",display_in_switcher:!0,link_title:"Portail Environnement",page_title:"emwelt.geoportail.lu",print_img:"anf_right.jpg",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"emwelt.geoportal.lu",print_short_txt_en:"emwelt.geoportal.lu",print_short_txt_fr:"emwelt.geoportail.lu",print_short_txt_lu:"emwelt.geoportal.lu",show_in_mobile:!0}},{id:128,name:"eau",icon:"eau",children:[{id:234,name:"eau_basisdaten",children:[{id:317,name:"eau_topographie",children:[{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"}],metadata:{},mixed:!0},{id:160,name:"eau_luft_sat_bilder",children:[{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"}],metadata:{},mixed:!0},{id:318,name:"eau_landnutzung",children:[{id:301,name:"wg_landnutzung",metadata:{is_queryable:!0,legend_name:"wg:landnutzung",metadata_id:"f53e9c0b-a269-48e6-b77c-061e7ac2e116",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_landnutzung",imageType:"image/png"},{id:308,name:"wg_versiegelungsklassen",metadata:{legend_name:"wg:versiegelungsklassen",metadata_id:"7e48b187-3080-4bf6-aaa8-6a58fe513380",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_versiegelungsklassen",imageType:"image/png"}],metadata:{},mixed:!0},{id:186,name:"eau_grenzen",children:[{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:169,name:"eau_zones_protegees",children:[{id:207,name:"eau_zones_protegees_nationales",children:[{id:319,name:"eau_anf_reserves",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:330,name:"geodesy",children:[{id:1831,name:"ng_new",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng_new",imageType:"image/png",style:"default",childLayers:[{name:"ng_new__0"}]},{id:411,name:"ng",metadata:{is_queryable:!0,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"ng",imageType:"image/png",style:"default",childLayers:[{name:"ng__POINT_NG"}]},{id:1724,name:"points_reference_gps",metadata:{is_queryable:!0,metadata_id:"fd406ca9-2542-4de9-8cee-7ee0a16c7f42"},dimensions:{},type:"WMS",layers:"points_reference_gps",imageType:"image/png",style:"default",childLayers:[{name:"points_reference_gps__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:453,name:"eau_new_Messstationen",children:[{id:485,name:"eau_new_Hydrologische_Messstationen",children:[{id:655,name:"eau_new_Wasserstand",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:12.0164112",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"59c220a4111e9b1de61d8864",is_queryable:!0,legend_name:"eau:wasserstand",max_dpi:128,metadata_id:"124abb10-1d87-4449-912b-06fbf307a95f"},dimensions:{},type:"WMS",layers:"eau_new_Wasserstand",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserstand__2"}]},{id:653,name:"eau_new_Alluvialer_Grundwasserspiegel",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.915308",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5fd1caf5e9996e5faf62ea74",is_queryable:!0,legend_name:"eau:alluvialer_grundwasserspiegel",max_dpi:128,metadata_id:"4d328b62-5df3-4205-a45a-4d3d36dc0fa8"},dimensions:{},type:"WMS",layers:"eau_new_Alluvialer_Grundwasserspiegel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Alluvialer_Grundwasserspiegel__3"}]}],metadata:{},mixed:!0},{id:460,name:"eau_new_Klimatologische_Messstationen",children:[{id:609,name:"eau_new_Niederschlag",metadata:{is_queryable:!0,legend_name:"eau:niederschlag",max_dpi:128,metadata_id:"288300c6-5d83-45a6-98ef-4146f37129e2"},dimensions:{},type:"WMS",layers:"eau_new_Niederschlag",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Niederschlag__5"}]},{id:595,name:"eau_new_Lufttemperatur",metadata:{is_queryable:!0,legend_name:"eau:lufttemperatur",max_dpi:128,metadata_id:"6d73e310-0ef2-4e19-863d-387a90405e78"},dimensions:{},type:"WMS",layers:"eau_new_Lufttemperatur",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Lufttemperatur__6"}]},{id:620,name:"eau_new_Bodentemperatur",metadata:{is_queryable:!0,legend_name:"eau:bodentemperatur",max_dpi:128,metadata_id:"ebded1e9-613e-4f58-a47f-386676a0a39f"},dimensions:{},type:"WMS",layers:"eau_new_Bodentemperatur",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bodentemperatur__7"}]},{id:610,name:"eau_new_Schneehoehe",metadata:{is_queryable:!0,legend_name:"eau:schneehoehe",max_dpi:128,metadata_id:"60c9ec41-6fa8-4aed-8822-bfdad9ab755d"},dimensions:{},type:"WMS",layers:"eau_new_Schneehoehe",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Schneehoehe__8"}]},{id:615,name:"eau_new_Luftfeucht",metadata:{is_queryable:!0,legend_name:"eau:luftfeucht",max_dpi:128,metadata_id:"bbb784cd-a8f2-4f60-8d2d-8a7bd341ac73"},dimensions:{},type:"WMS",layers:"eau_new_Luftfeucht",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Luftfeucht__9"}]},{id:563,name:"eau_new_Luftdruck",metadata:{is_queryable:!0,legend_name:"eau:luftdruck",max_dpi:128,metadata_id:"1ebc644b-0643-495f-84ed-c820459920cc"},dimensions:{},type:"WMS",layers:"eau_new_Luftdruck",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Luftdruck__10"}]},{id:616,name:"eau_new_Globalstrahlung",metadata:{is_queryable:!0,legend_name:"eau:globalstrahlung",max_dpi:128,metadata_id:"f5d2d484-adb2-46fc-95f0-9a94c85db5de"},dimensions:{},type:"WMS",layers:"eau_new_Globalstrahlung",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Globalstrahlung__11"}]}],metadata:{},mixed:!0},{id:472,name:"eau_new_Oberflaechengewaesser_Messstationen",children:[{id:2487,name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_owk_-_2e_zyklus",metadata_id:"97e6564c-7758-4850-9606-c690a1c1c4ba"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_2e_zyklus__432"}]},{id:2488,name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_owk_-_3e_zyklus",metadata_id:"01a0bbed-f787-4f5b-a89f-1abed736896c"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_OWK_3e_zyklus__433"}]},{id:654,name:"eau_new_Oberflächengewässer_Nitratrichtlinie_91_676_CEE",metadata:{geocatalog_open_data_last_update_date:"2024-09-03T01:02:57.1228277",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d6604000b5fead3c39cf42",is_queryable:!0,legend_name:"eau:nitratrichtlinie_messstationen",max_dpi:128,metadata_id:"dc7d9871-2693-4714-b1f6-ab202a59d28b"},dimensions:{},type:"WMS",layers:"654",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflächengewässer_Nitratrichtlinie_91_676_CEE__16"}]}],metadata:{},mixed:!0},{id:473,name:"eau_new_Grundwasser_Messstationen",children:[{id:2489,name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_gwk_-_2e_zyklus",metadata_id:"b3fda5d5-c071-4ea0-bb1c-d2bf9ca36af1"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_2e_zyklus__466"}]},{id:2490,name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus",metadata:{is_queryable:!0,legend_name:"eau:wrrl_ueberwachungsnetzwerk_gwk_-_3e_zyklus",metadata_id:"d0f6a240-48c4-434c-a762-cd2fdb427cf9"},dimensions:{},type:"WMS",layers:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL_Ueberwachungsnetzwerk_GWK_3e_zyklus__467"}]},{id:570,name:"eau_new_Grundwasser_Nitratrichtlinie_91_676_CEE",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:03:05.9320276",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c987ac9208bf4692ea",is_queryable:!0,legend_name:"eau:grundwasser_nitratrichtlinie",max_dpi:128,metadata_id:"9b358488-a605-46af-81eb-90c4ab7c9931"},dimensions:{},type:"WMS",layers:"570",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasser_Nitratrichtlinie_91_676_CEE__320"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:484,name:"eau_new_Hydrografie",children:[{id:450,name:"eau_new_Gewaessernetz",children:[{id:749,name:"eau_new_Gewässer",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewässer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewässer__23"},{name:"eau_new_Gewässer__24"},{name:"eau_new_Gewässer__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewässer",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewässer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewässer__27"},{name:"eau_new_Kilometrierung der Gewässer__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]},{id:569,name:"eau_new_Stausee_Sauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.6659471",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece210cc765e1a2422811f",is_queryable:!0,legend_name:"eau:stausee_sauer",max_dpi:128,metadata_id:"119ad2e3-b44f-4777-883d-d2d522bafeca"},dimensions:{},type:"WMS",layers:"eau_new_Stausee_Sauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Stausee_Sauer__30"}]}],metadata:{},mixed:!0},{id:451,name:"eau_new_Fischerei",children:[{id:626,name:"eau_new_Fischereiabschnitte",metadata:{geocatalog_open_data_last_update_date:"2024-09-11T01:02:43.2828183",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb079111e9b02db9a6ece",is_queryable:!0,legend_name:"eau:fischereiabschnitte",max_dpi:128,metadata_id:"bd6be85a-cec4-4e4d-9657-cffa242db28f"},dimensions:{},type:"WMS",layers:"eau_new_Fischereiabschnitte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fischereiabschnitte__37"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:483,name:"eau_new_Grundwasser",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:2396,name:"eau_new_Einschraenkung_Waermepumpe_(public)",metadata:{legend_name:"eau:einschraenkung_waermepumpe",max_dpi:128,metadata_id:"ed3ff125-47cc-4247-abaf-77e05cf60984"},dimensions:{},type:"WMS",layers:"eau_new_Einschraenkung_Waermepumpe_(public)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einschraenkung_Waermepumpe_(public)__453"}]},{id:2288,name:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche",metadata:{legend_name:"eau:einschraenkung_waermepumpe_15m",max_dpi:128,metadata_id:"b2d715ed-660e-46e6-8c5f-ee3327e0fcb9"},dimensions:{},type:"WMS",layers:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einschraenkung_Waermepumpe_nouvelle_couche__446"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{},mixed:!0},{id:448,name:"eau_new_Trinkwasser",children:[{id:567,name:"eau_new_Trinkwasserentnahmepunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3958552",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb044cc765e17f1820812",is_queryable:!0,legend_name:"eau:trinkwasserentnahmepunkte",max_dpi:128,metadata_id:"a049086b-9c17-4ba6-b9bf-78cb4af8ee68"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserentnahmepunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserentnahmepunkte__47"}]},{id:598,name:"eau_new_Trinkwasserbehaelter",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:23.7053926",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb062cc765e18ae5ed883",is_queryable:!0,legend_name:"eau:trinkwasserbehaelter",max_dpi:128,metadata_id:"abe5466d-e045-4872-a17c-7379adc497f5"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserbehaelter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserbehaelter__49"}]},{id:538,name:"eau_new_Trinkwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3237467",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecb057111e9b02db9a6ecd",is_queryable:!0,legend_name:"eau_new:trinkwassersyndikate",max_dpi:128,metadata_id:"63ecd69e-5714-4311-b05a-5bfa191ac546"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwassersyndikate__50"}]},{id:2573,name:"eau_certificat_drepsi",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:09.7919567",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"665921c12d0aeb8d9802c3d3",is_queryable:!0,legend_name:"eau:drepsi",metadata_id:"5ecb8e6f-383d-424c-a399-f2faa3e24a8d"},dimensions:{},type:"WMS",layers:"eau_certificat_drepsi",imageType:"image/png",style:"default",childLayers:[{name:"eau_certificat_drepsi__468"}]},{id:1754,name:"eau_new_qualite_eau_potable",children:[{id:1767,name:"eau_new_wasserhaerte",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.6951685",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"665921c72d0aeb8d9802c3d4",legend_name:"eau:wasserhaerte",metadata_id:"28e8de6e-9274-4e62-be68-a071b6e8db1c"},dimensions:{},type:"WMS",layers:"eau_new_wasserhaerte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_wasserhaerte__361"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:373,name:"eau_new_Trinkwasser_Schutzzonen_(ZPS)",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:469,name:"eau_new_Schutzgebiete",children:[{id:656,name:"eau_new_Badegewaesser",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecaff2cc765e18ae5ed87f",is_queryable:!0,legend_name:"eau:badegewaesser",max_dpi:128,metadata_id:"72f770ee-7290-4ecb-9358-580b7cfcadf7"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser__135"}]},{id:581,name:"eau_new_Badegewaesser_-_Qualitaet",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece261cc765e1a24228120",is_queryable:!0,legend_name:"eau:badegewaesser_-_qualitaet",max_dpi:128,metadata_id:"c0c9c705-8b26-4a0b-b9bb-e2243cd5386a"},dimensions:{},type:"WMS",layers:"eau_new_Badegewaesser_-_Qualitaet",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Badegewaesser_-_Qualitaet__136"}]},{id:612,name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",metadata:{geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_uuid:"57ece27bcc765e1a270cf61d",is_queryable:!0,legend_name:"eau:empfindliche_gebiete_kommunalabwasserrichtlinie",max_dpi:128,metadata_id:"39952e6c-8e73-4a23-a19c-78c4f06c84d9"},dimensions:{},type:"WMS",layers:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Empfindliche_Gebiete_(Kommunalabwasserrichtlinie)__139"}]},{id:492,name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",metadata:{geocatalog_open_data_last_update_date:"2024-09-04T01:02:59.0520396",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66d7b1c287ac9208bf4692e9",is_queryable:!0,legend_name:"eau:gefaehrdete_gebiete_nitratrichtlinie",max_dpi:128,metadata_id:"9426a9a6-7cb1-4c1a-a504-40dabc4429c0"},dimensions:{},type:"WMS",layers:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gefaehrdete_Gebiete_(Nitratrichtlinie)__140"}]}],metadata:{},mixed:!0},{id:470,name:"eau_new_Gewaesserschutz",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:474,name:"eau_new_Wasserrahmenrichtlinie",children:[{id:1469,name:"eau_strahlwirkungskonzept",metadata:{is_queryable:!0,legend_name:"eau:strahlwirkungskonzept",metadata_id:"e1744b8e-101e-406d-b742-776d488a00b5"},dimensions:{},type:"WMS",layers:"eau_strahlwirkungskonzept",imageType:"image/png",style:"default",childLayers:[{name:"eau_strahlwirkungskonzept__351"},{name:"eau_strahlwirkungskonzept__352"}]},{id:475,name:"eau_new_Bewirtschaftungsplan_2009",children:[{id:644,name:"eau_new_Betrachtungsraeume_2009",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2009",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2009__146"}]},{id:607,name:"eau_new_Typologie_Oberflaechengewasser_2009",metadata:{is_queryable:!0,legend_name:"eau:typologie_oberflaechengewasser_2009",max_dpi:128,metadata_id:"0d1d73f0-7644-4217-a0df-b6c497508592"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Oberflaechengewasser_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Oberflaechengewasser_2009__147"}]},{id:601,name:"eau_new_Oberflaechenwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2009",max_dpi:128,metadata_id:"404cf7b4-f70b-4c2c-a44b-89e297fab0f8"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2009__148"}]},{id:634,name:"eau_new_Erheblich veränderte Wasserkörper 2009",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_owk_2009",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich veränderte Wasserkörper 2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich veränderte Wasserkörper 2009__149"}]},{id:603,name:"eau_new_Grundwasserkoerper_2009",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2009",max_dpi:128,metadata_id:"f23ca424-ec87-4c53-929c-7e627a8e06af"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2009__151"}]},{id:468,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2009",children:[{id:464,name:"eau_new_Oberflaechengewaesser_2009",children:[{id:585,name:"eau_new_Gesamtzustand_2009",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2009",max_dpi:128,metadata_id:"44862c13-7006-44a4-99e6-2877ea512714"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2009__154"}]},{id:586,name:"eau_new_Chemischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2009",max_dpi:128,metadata_id:"d934fbcc-02c6-47fa-a23d-cfbe49214709"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2009__155"}]},{id:614,name:"eau_new_Oekologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2009",max_dpi:128,metadata_id:"92d28c19-ed51-4e9e-8a80-831144fe3553"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2009__156"}]},{id:593,name:"eau_new_Hydromorphologischer_Zustand_2009",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2009",max_dpi:128,metadata_id:"0227e64f-11ef-4f0a-8853-48fd7385f2b1"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologischer_Zustand_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologischer_Zustand_2009__157"}]}],metadata:{},mixed:!0},{id:435,name:"eau_new_Grundwasser_2009",children:[{id:657,name:"eau_new_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2009",max_dpi:128,metadata_id:"2df25c38-15d5-447f-a269-4184ce781050"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2009__159"}]},{id:605,name:"eau_new_Quantitativer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2009",max_dpi:128,metadata_id:"a9ebce38-6c8b-447e-9d22-46ba333fa63c"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2009__160"}]},{id:441,name:"eau_new_Chemischer_Zustand_der_WK_2009",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2009",max_dpi:128,metadata_id:"e9a72fec-29a0-4183-9e3a-6d4f49c9fea7"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2009",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2009__161"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:480,name:"eau_new_Bewirtschaftungsplan_2015",children:[{id:536,name:"eau_new_Oberflaechenwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2015",max_dpi:128,metadata_id:"ead261ed-7be1-4435-9cf5-d1527a18bd19"},dimensions:{},type:"WMS",layers:"eau_new_Oberflaechenwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oberflaechenwasserkoerper_2015__165"}]},{id:658,name:"eau_new_Erheblich veränderte Wasserkörper 2015",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2015",max_dpi:128,metadata_id:"78da31c2-55eb-40c9-99fe-22ff409468c2"},dimensions:{},type:"WMS",layers:"eau_new_Erheblich veränderte Wasserkörper 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erheblich veränderte Wasserkörper 2015__166"}]},{id:619,name:"eau_new_Betrachtungsraeume_2015",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2015",max_dpi:128,metadata_id:"be15dd7d-df57-44e1-b724-0929cf05eef9"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2015__163"}]},{id:588,name:"eau_new_Typologie_Gewaesser_2015",metadata:{is_queryable:!0,legend_name:"eau:typologie_gewaesser_2015",max_dpi:128,metadata_id:"c7eea236-ad59-47fc-8c02-630fee3292dc"},dimensions:{},type:"WMS",layers:"eau_new_Typologie_Gewaesser_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Typologie_Gewaesser_2015__164"}]},{id:1470,name:"eau_fliessgewaessertypen_2015",metadata:{is_queryable:!0,legend_name:"eau:fliessgewaessertypen_2015_lawa",metadata_id:"79f4588f-a264-4921-a382-d1f83cf48da3"},dimensions:{},type:"WMS",layers:"eau_fliessgewaessertypen_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_fliessgewaessertypen_2015__354"}]},{id:759,name:"eau_new_Strukturgütekartierung 2015 [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_7-stufige_bewertung",metadata_id:"dd28de7b-6182-4054-89a6-dd92b80b565f"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgütekartierung 2015 [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgütekartierung 2015 [7-stufige Bewertung]__315"}]},{id:760,name:"eau_new_Strukturgütekartierung 2015 [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2015_5-stufige_bewertung",metadata_id:"ff70c904-a6b9-4989-88c0-8359ff52e57e"},dimensions:{},type:"WMS",layers:"eau_new_Strukturgütekartierung 2015 [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Strukturgütekartierung 2015 [5-stufige Bewertung]__316"}]},{id:761,name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_7-stufige_bewertung_5-band_ufer_links_7-stufige_bewertung_5-band_ufer_rechts_7-stufige_bewertung_5-band_umfeld_links_7-stufige_bewertung_5-band_umfeld_rechts_7-stufige_bewertung",metadata_id:"429d3552-5f72-4be6-9c03-95c76f0a6c07"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__336"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__337"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__338"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__339"},{name:"eau_new_Struktukartierung 2015 in 5 Band [7-stufige Bewertung]__340"}]},{id:763,name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",metadata:{is_queryable:!0,legend_name:"eau:5-band_sohle_5-stufige_bewertung_5-band_ufer_links_5-stufige_bewertung_5-band_ufer_rechts_5-stufige_bewertung_5-band_umfeld_links_5-stufige_bewertung_5-band_umfeld_rechts_5-stufige_bewertung",metadata_id:"4c64f3a4-627f-4aa7-9e0c-d3ad003d9afe"},dimensions:{},type:"WMS",layers:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__342"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__343"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__344"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__345"},{name:"eau_new_Struktukartierung 2015 in 5 Band [5-stufige Bewertung]__346"}]},{id:785,name:"eau_new_WRRL und HWRM-RL Massnahmen",metadata:{is_queryable:!0,legend_name:"eau:wrrl_und_hwrm-rl_-_massnahmen",metadata_id:"9a339e4e-eb04-42a0-ac0d-5a5f354c9548"},dimensions:{},type:"WMS",layers:"eau_new_WRRL und HWRM-RL Massnahmen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_WRRL und HWRM-RL Massnahmen__347"}]},{id:1471,name:"eau_detailliertes_massnahmenprogramm_sww",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww",metadata_id:"5b9d1544-da64-4a58-b519-9a03e5491e07"},dimensions:{},type:"WMS",layers:"eau_detailliertes_massnahmenprogramm_sww",imageType:"image/png",style:"default",childLayers:[{name:"eau_detailliertes_massnahmenprogramm_sww__355"}]},{id:659,name:"eau_new_Grundwasserkoerper_2015",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2015",max_dpi:128,metadata_id:"bb5f17b7-ddac-46cc-a59d-25f82d422b5b"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserkoerper_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserkoerper_2015__168"}]},{id:476,name:"eau_new_Zustand_der_Wasserkoerper_(WK)_2015",children:[{id:479,name:"eau_new_Oberflaechengewaesser_2015",children:[{id:622,name:"eau_new_Oekologischer_Zustand_2015",metadata:{is_queryable:!0,legend_name:"eau:oekologischer_zustand_2015",max_dpi:128,metadata_id:"5b78d0a5-1984-4efc-9e7d-0cb9d7ca829d"},dimensions:{},type:"WMS",layers:"eau_new_Oekologischer_Zustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Oekologischer_Zustand_2015__173"}]},{id:663,name:"eau_new_Gesamtzustand_2015",metadata:{is_queryable:!0,legend_name:"eau:gesamtzustand_2015",max_dpi:128,metadata_id:"bea7140f-b938-4494-ac14-a2252a1d0fcb"},dimensions:{},type:"WMS",layers:"eau_new_Gesamtzustand_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gesamtzustand_2015__171"}]},{id:621,name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015",max_dpi:128,metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"621",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer Zustand 2015_Richtlinie 2008_105_EG__172"}]},{id:764,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2008_105_eg",metadata_id:"68f761b4-e1d1-4cda-b4aa-1e61fc812588"},dimensions:{},type:"WMS",layers:"764",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe 2015_Richtlinie_2008_105_EG__318"}]},{id:765,name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_2015_richtlinie_2013_39_eu",metadata_id:"7df87ec3-bfad-4d1b-a10b-68670c8073f4"},dimensions:{},type:"WMS",layers:"765",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_2015_Richtlinie 2013_39_EU__319"}]},{id:766,name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2015_richtlinie_2013_39_eu",metadata_id:"d78ac813-7ab3-4162-945a-f87512e66654"},dimensions:{},type:"WMS",layers:"766",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_ohne_ubiquitaere_Stoffe_2015_Richtlinie 2013_39_EU__320"}]},{id:466,name:"eau_new_Qualitaetskomponenten_des_oekologischen_Zustands_2015",children:[{id:767,name:"eau_new_Hydromorphologische Gesamtbewertung 2015",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologischer_zustand_2015",metadata_id:"767e0a8a-31e0-4a53-913f-6ab1c76ca27c"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische Gesamtbewertung 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische Gesamtbewertung 2015__174"}]},{id:769,name:"eau_new_Morphologie 2015",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2015",metadata_id:"b7812f62-a8b5-4ef4-bbb8-c2e3a9688c93"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie 2015__330"}]},{id:770,name:"eau_new_Durchgängigkeit 2015",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2015",metadata_id:"4983c058-3d33-4b6f-b801-de1113a11f27"},dimensions:{},type:"WMS",layers:"eau_new_Durchgängigkeit 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgängigkeit 2015__331"}]},{id:583,name:"eau_new_Physiko-Chemie_2015",metadata:{is_queryable:!0,legend_name:"eau:physiko-chemie_2015",max_dpi:128,metadata_id:"45702d13-2608-4300-ba54-0e078c96386c"},dimensions:{},type:"WMS",layers:"eau_new_Physiko-Chemie_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Physiko-Chemie_2015__176"}]},{id:771,name:"eau_new_Phytoplankton 2015",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2015",metadata_id:"e5d8434c-c367-4a56-a7d1-aa60f70a301f"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton 2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton 2015__321"}]},{id:662,name:"eau_new_Makrophyten_2015",metadata:{is_queryable:!0,legend_name:"eau:aquatische_flora_2015",max_dpi:128,metadata_id:"fe673001-2447-4e3c-bce6-4606b6bf222d"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_2015__177"}]},{id:600,name:"eau_new_Makro-Invertebraten_2015",metadata:{is_queryable:!0,legend_name:"eau:makro-invertebraten_2015",max_dpi:128,metadata_id:"b8a59482-2696-4b9a-a527-3201597a4caf"},dimensions:{},type:"WMS",layers:"eau_new_Makro-Invertebraten_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makro-Invertebraten_2015__180"}]},{id:646,name:"eau_new_Fische_2015",metadata:{is_queryable:!0,legend_name:"eau:fische_2015",max_dpi:128,metadata_id:"f44a6aa7-6dcc-4d99-9033-c13ef23ebef4"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2015__179"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:471,name:"eau_new_Grundwasser_2015",children:[{id:591,name:"eau_new_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_wk_2015",max_dpi:128,metadata_id:"489c9b85-6c3c-4019-b3ee-096936b2683c"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_WK_2015__182"}]},{id:592,name:"eau_new_Quantitativer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_wk_2015",max_dpi:128,metadata_id:"333c7e4f-cdc3-439a-aa13-ca0f9138c764"},dimensions:{},type:"WMS",layers:"eau_new_Quantitativer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quantitativer_Zustand_der_WK_2015__183"}]},{id:632,name:"eau_new_Chemischer_Zustand_der_WK_2015",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_wk_2015",max_dpi:128,metadata_id:"ddd64c4a-f5af-4bbb-a7d3-3db1016ee541"},dimensions:{},type:"WMS",layers:"eau_new_Chemischer_Zustand_der_WK_2015",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Chemischer_Zustand_der_WK_2015__184"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2085,name:"eau_Bewirtschaftungsplan_2021",children:[{id:2090,name:"eau_Oberflaechenwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:oberflaechenwasserkoerper_2021",max_dpi:128,metadata_id:"c50b2bc7-aeb7-4d3e-9349-09eb3ec0f927"},dimensions:{},type:"WMS",layers:"eau_Oberflaechenwasserkoerper_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Oberflaechenwasserkoerper_2021__386"}]},{id:2091,name:"eau_Erheblich veränderte Wasserkörper 2021",metadata:{is_queryable:!0,legend_name:"eau:erheblich_veraenderte_wk_2021",max_dpi:128,metadata_id:"311cc30b-8092-4816-9f86-87d5f2995706"},dimensions:{},type:"WMS",layers:"eau_Erheblich veränderte Wasserkörper 2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Erheblich veränderte Wasserkörper 2021__387"}]},{id:2491,name:"eau_new_Betrachtungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:betrachtungsraeume_2021",metadata_id:"af21fbbf-3f63-4742-8c44-f8a377930197"},dimensions:{},type:"WMS",layers:"eau_new_Betrachtungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Betrachtungsraeume_2021__455"}]},{id:2223,name:"eau_typologie_Gewässer_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lu",metadata_id:"492d6faa-5c91-45d4-83d7-733398cc48d1"},dimensions:{},type:"WMS",layers:"eau_typologie_Gewässer_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_typologie_Gewässer_2021__419"}]},{id:2224,name:"eau_Fließgewässertypen_2021",metadata:{is_queryable:!0,legend_name:"eau:fleissgewaessertypen_2021_lawa",metadata_id:"8608d8c5-def8-4050-9f44-7746edd7a32e"},dimensions:{},type:"WMS",layers:"eau_Fließgewässertypen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Fließgewässertypen_2021__420"}]},{id:2269,name:"eau_grundwasserkoerper_2021",metadata:{is_queryable:!0,legend_name:"eau:grundwasserkoerper_2021",metadata_id:"3bd42cf4-93ce-451f-8749-e3f6d1750eeb"},dimensions:{},type:"WMS",layers:"eau_grundwasserkoerper_2021",imageType:"image/png",childLayers:[{name:"eau_grundwasserkoerper_2021__444"}]},{id:2222,name:"eau_Strukturgütekartierung_2021",children:[{id:2225,name:"eau_Strukturgütekartierung_2021_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_7-stufige_bewertung",metadata_id:"87e3688f-b831-44e9-aa4f-38d89a41139a"},dimensions:{},type:"WMS",layers:"eau_Strukturgütekartierung_2021_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgütekartierung_2021_7stufige_bewertung__405"}]},{id:2226,name:"eau_Strukturgütekartierung_2021_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:strukturguetekartierung_2021_5-stufige_bewertung",metadata_id:"0e36b3e4-8811-43b6-9f2d-a2ea26c817cb"},dimensions:{},type:"WMS",layers:"eau_Strukturgütekartierung_2021_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturgütekartierung_2021_5stufige_bewertung__406"}]},{id:2227,name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_7-stufige_bewertung",metadata_id:"27c60680-00ac-4e28-857f-41a1021ae4d9"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_7stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__408"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__409"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__410"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__411"},{name:"eau_Struktukartierung_2021_5_band_7stufige_bewertung__412"}]},{id:2228,name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",metadata:{is_queryable:!0,legend_name:"eau:struktukartierung_2021_5_band_5-stufige_bewertung",metadata_id:"dedcc2a3-b587-4dfe-a967-5f4bfd8f575a"},dimensions:{},type:"WMS",layers:"eau_Struktukartierung_2021_5_band_5stufige_bewertung",imageType:"image/png",style:"default",childLayers:[{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__414"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__415"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__416"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__417"},{name:"eau_Struktukartierung_2021_5_band_5stufige_bewertung__418"}]},{id:2492,name:"eau_new_Querbauwerke_2021",metadata:{geocatalog_open_data_last_update_date:"2024-08-01T01:02:32.8749807",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f595f96f574ccd9e7e7c",is_queryable:!0,legend_name:"eau:Querbauwerke%202021",metadata_id:"88b06474-f029-4544-a60d-7c46c5f32191"},dimensions:{},type:"WMS",layers:"eau_new_Querbauwerke_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querbauwerke_2021__422"}]},{id:2493,name:"eau_new_Durchlaesse_Verrohrungen_2021",metadata:{geocatalog_open_data_last_update_date:"2024-07-31T01:02:20.8968264",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a2f58e7af13982e1abe7e7",is_queryable:!0,legend_name:"eau:durchlaesseverrohrungen_2021",metadata_id:"6eb34108-4bad-4cb7-881e-7db3174c7531"},dimensions:{},type:"WMS",layers:"eau_new_Durchlaesse_Verrohrungen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchlaesse_Verrohrungen_2021__423"}]},{id:2494,name:"eau_new_Querprofile_2021",metadata:{is_queryable:!0,legend_name:"eau:querprofile_2021",metadata_id:"a40281d4-1ee2-42d0-9378-012f1f415afa"},dimensions:{},type:"WMS",layers:"eau_new_Querprofile_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Querprofile_2021__424"}]},{id:2495,name:"eau_new_Substratkartierung_2021",metadata:{is_queryable:!0,legend_name:"eau:substratkartierung_2021",metadata_id:"c4eb10fd-305d-43f7-ae01-b9caa32ed484"},dimensions:{},type:"WMS",layers:"eau_new_Substratkartierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Substratkartierung_2021__425"}]}],metadata:{},mixed:!0},{id:2497,name:"eau_new_Massnahmenprogramm_2021",children:[{id:2106,name:"eau_Masssnahmenprogramm_SWW_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_sww_2021",metadata_id:"10f4a12e-1a67-42d5-b575-8993e2f3aa68"},dimensions:{},type:"WMS",layers:"eau_Masssnahmenprogramm_SWW_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Masssnahmenprogramm_SWW_2021__403"}]},{id:2496,name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",metadata:{is_queryable:!0,legend_name:"eau:detailliertes_massnahmenprogramm_hy_2021_alle",metadata_id:"4b00cf8c-d4e6-486d-8bda-d385302792f6"},dimensions:{},type:"WMS",layers:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__389"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__390"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__391"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__392"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__393"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__394"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__395"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__396"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__397"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__398"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__399"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__400"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__401"},{name:"eau_new_Detailliertes_Massnahmenprogramm_HY_2021__402"}]},{id:2086,name:"eau_Entwurf_Massnahmenprogramm_HY_2021",children:[{id:2092,name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit",metadata_id:"c150f6a5-41c7-477a-9d44-c0a26a502d85"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Querbauwerk_2021__389"}]},{id:2093,name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_der_oekologischen_durchgaengigkeit_durchlass",metadata_id:"569bf0ea-c428-4171-aba6-8f2ace180a10"},dimensions:{},type:"WMS",layers:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Weiderherstellung_Durchgaengigkeit_Verrohrung_2021__390"}]},{id:2094,name:"eau_Strukturelemente_Sohle_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_strukturelementen_in_sohle",metadata_id:"2d233ca6-553e-43bf-ba25-f46b88f63710"},dimensions:{},type:"WMS",layers:"eau_Strukturelemente_Sohle_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Strukturelemente_Sohle_2021__391"}]},{id:2095,name:"eau_Umgestalten_Sohlverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_sohlverbau",metadata_id:"0d30a3ee-e860-4816-b5c8-9f43e93020e3"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Sohlverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Sohlverbau_2021__392"}]},{id:2096,name:"eau_Stroemungslenkern_2021",metadata:{is_queryable:!0,legend_name:"eau:einbau_von_stroemungslenkern_fuer_eigendynamik",metadata_id:"b86c62a9-0ec8-4d35-878f-b275e74ff02e"},dimensions:{},type:"WMS",layers:"eau_Stroemungslenkern_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Stroemungslenkern_2021__393"}]},{id:2097,name:"eau_Umgestalten_Uferverbau_2021",metadata:{is_queryable:!0,legend_name:"eau:entfernen_umgestalten_von_uferverbau",metadata_id:"bec0ccbc-09b5-4351-8b72-f0e458fc7d19"},dimensions:{},type:"WMS",layers:"eau_Umgestalten_Uferverbau_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Umgestalten_Uferverbau_2021__394"}]},{id:2098,name:"eau_naturnah_Gewaesserbett_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_von_naturnaher_laufentwicklung_und_gewaesserbett",metadata_id:"3ddf627c-90ae-4b58-a05e-20925493dcf9"},dimensions:{},type:"WMS",layers:"eau_naturnah_Gewaesserbett_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnah_Gewaesserbett_2021__395"}]},{id:2099,name:"eau_Gewaesserrandstreifen_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesserrandstreifens",metadata_id:"3bc0e52d-954b-47d3-8905-1ecfe7108ce0"},dimensions:{},type:"WMS",layers:"eau_Gewaesserrandstreifen_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserrandstreifen_2021__396"}]},{id:2100,name:"eau_Gewaesserentwicklungskorridor_2021",metadata:{is_queryable:!0,legend_name:"eau:anlage_eines_gewaesser_entwicklungskorridors",metadata_id:"13299bf5-57ca-4538-993e-7c00f6247722"},dimensions:{},type:"WMS",layers:"eau_Gewaesserentwicklungskorridor_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Gewaesserentwicklungskorridor_2021__397"}]},{id:2101,name:"eau_natuerlich_Ueberflutungsraeume_2021",metadata:{is_queryable:!0,legend_name:"eau:sicherung_und_erweiterung_natuerlicher_ueberflutungsraeume_und_augewaesser",metadata_id:"7fb0080e-d178-401d-83de-7595ef1885b5"},dimensions:{},type:"WMS",layers:"eau_natuerlich_Ueberflutungsraeume_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_natuerlich_Ueberflutungsraeume_2021__398"}]},{id:2102,name:"eau_eigendynamische_Entwicklung_2021",metadata:{is_queryable:!0,legend_name:"eau:zulassen_von_eigendynamischer_entwicklung",metadata_id:"d13e22e9-d22a-48a0-838d-3d7c914ccfe3"},dimensions:{},type:"WMS",layers:"eau_eigendynamische_Entwicklung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_eigendynamische_Entwicklung_2021__399"}]},{id:2103,name:"eau_naturnahe_Abflussverhaeltnisse_2021",metadata:{is_queryable:!0,legend_name:"eau:widerherstellung_und_sicherung_naturnaher_abflussverhaeltnisse",metadata_id:"b3f8a9e0-17f7-4b64-a34b-6ee6de972b52"},dimensions:{},type:"WMS",layers:"eau_naturnahe_Abflussverhaeltnisse_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnahe_Abflussverhaeltnisse_2021__400"}]},{id:2104,name:"eau_naturnaher_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wiederherstellung_und_sicherung_naturnahem_wasserhaushalt",metadata_id:"91008390-557e-4db3-8d7c-e608a5478edb"},dimensions:{},type:"WMS",layers:"eau_naturnaher_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_naturnaher_Wasserhaushalt_2021__401"}]},{id:2105,name:"eau_Abflussregulierung_2021",metadata:{is_queryable:!0,legend_name:"eau:abflussregulierung",metadata_id:"393be87d-44ce-42e1-9b81-9585aa2d7678"},dimensions:{},type:"WMS",layers:"eau_Abflussregulierung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_Abflussregulierung_2021__402"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2498,name:"eau_new_Zustand_Wasserkoerper_2021",children:[{id:2501,name:"eau_new_OWK_2021",children:[{id:2516,name:"eau_new_oekologischer_Zustand_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9819519",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologischer_zustand_2021",metadata_id:"d6e11b40-6e70-4f68-86c2-1c69c1e41c04"},dimensions:{},type:"WMS",layers:"eau_new_oekologischer_Zustand_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologischer_Zustand_2021__428"}]},{id:2517,name:"eau_new_oekologisches_Potenzial_2021",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.9441803",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:oekologisches_potenzial_2021",metadata_id:"ed63b4ab-aee0-4402-8f30-98f2a08b98a4"},dimensions:{},type:"WMS",layers:"eau_new_oekologisches_Potenzial_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_oekologisches_Potenzial_2021__429"}]},{id:2518,name:"eau_new_chemischer_Zustand_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.8760847",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"2973678d-b858-4c7b-abfa-b99c206c32be"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_2021_2013_39_EU__430"}]},{id:2519,name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",metadata:{geocatalog_open_data_last_update_date:"2024-01-12T14:27:52.4632089",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"65a14865ac485d4e6b99f6e8",is_queryable:!0,legend_name:"eau:chemischer_zustand_ohne_ubiquitaere_stoffe_2021",metadata_id:"e32c56b5-a839-4cd1-a724-85153d87c5d5"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_ohne_ubiquitaere_stoffe_2021_2013_39_EU__431"}]},{id:2499,name:"eau_new_Qualitaetskomponenten_oekologischer_Zustand_2021",children:[{id:2520,name:"eau_new_biologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:biologische_qk_-_gesamtbewertung_2021",metadata_id:"61ac19af-e01b-48e3-8730-d955709d92ce"},dimensions:{},type:"WMS",layers:"eau_new_biologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_biologische_QK_Gesamtbewertung_2021__435"}]},{id:2521,name:"eau_new_Phytoplankton_2021",metadata:{is_queryable:!0,legend_name:"eau:phytoplankton_2021",metadata_id:"f1bb6a6e-cc76-420a-8426-cf78bebea0aa"},dimensions:{},type:"WMS",layers:"eau_new_Phytoplankton_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytoplankton_2021__436"}]},{id:2522,name:"eau_new_Makrophyten_und_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrophyten_und_phytobenthos_2021",metadata_id:"53087821-654a-4fad-b891-b6f86f347482"},dimensions:{},type:"WMS",layers:"eau_new_Makrophyten_und_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrophyten_und_Phytobenthos_2021__437"}]},{id:2536,name:"eau_new_Macrophytes_2021",metadata:{is_queryable:!0,legend_name:"eau:macrophytes_2021",metadata_id:"060dc4f4-8486-4b5a-ae46-2b608bd87386"},dimensions:{},type:"WMS",layers:"eau_new_Macrophytes_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Macrophytes_2021__438"}]},{id:2523,name:"eau_new_Phytobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:phytobenthos_2021",metadata_id:"83f6b866-467a-4b00-9641-0252426c0808"},dimensions:{},type:"WMS",layers:"eau_new_Phytobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Phytobenthos_2021__439"}]},{id:2524,name:"eau_new_Makrozoobenthos_2021",metadata:{is_queryable:!0,legend_name:"eau:makrozoobenthos_2021",metadata_id:"d4028c85-831b-4950-905a-6df780d6b57d"},dimensions:{},type:"WMS",layers:"eau_new_Makrozoobenthos_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Makrozoobenthos_2021__440"}]},{id:2525,name:"eau_new_Fische_2021",metadata:{is_queryable:!0,legend_name:"eau:fische_2021",metadata_id:"961e396d-f123-4842-9a58-7968806e084d"},dimensions:{},type:"WMS",layers:"eau_new_Fische_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Fische_2021__441"}]},{id:2526,name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:physikalisch-chemische_qk_-_gesamtbewertung_2021",metadata_id:"a254a96a-8179-4a85-bd3d-c371d84e3884"},dimensions:{},type:"WMS",layers:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_physikalisch_chemische_QK_Gesamtbewertung_2021__442"}]},{id:2527,name:"eau_new_allg_physikalisch_chemische_Parameter_2021",metadata:{is_queryable:!0,legend_name:"eau:allgemein_physikalisch-chemische_parameter_2021",metadata_id:"405ff58f-aca0-4781-9b28-c3481a7a0b0d"},dimensions:{},type:"WMS",layers:"eau_new_allg_physikalisch_chemische_Parameter_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_allg_physikalisch_chemische_Parameter_2021__443"}]},{id:2528,name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",metadata:{is_queryable:!0,legend_name:"eau:flussgebietsspezifische_schadstoffe_2021",metadata_id:"f321c03f-196d-4d12-992a-f6914088fd11"},dimensions:{},type:"WMS",layers:"eau_new_Flussgebietsspezifische_Schadstoffe_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Flussgebietsspezifische_Schadstoffe_2021__457"}]},{id:2529,name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",metadata:{is_queryable:!0,legend_name:"eau:hydromorphologische_qk_-_gesamtbewertung_2021",metadata_id:"673ef74f-1257-4de4-9c63-be9a82e7fbf7"},dimensions:{},type:"WMS",layers:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hydromorphologische_QK_Gesamtbewertung_2021__458"}]},{id:2530,name:"eau_new_Morphologie_2021",metadata:{is_queryable:!0,legend_name:"eau:morphologie_2021",metadata_id:"877aecd9-f5b3-4266-a520-e8cfd9d861c9"},dimensions:{},type:"WMS",layers:"eau_new_Morphologie_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Morphologie_2021__459"}]},{id:2531,name:"eau_new_Durchgaengigkeit_2021",metadata:{is_queryable:!0,legend_name:"eau:durchgaengigkeit_2021",metadata_id:"afa4a183-b069-4b65-9d9e-ca692f91f140"},dimensions:{},type:"WMS",layers:"eau_new_Durchgaengigkeit_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Durchgaengigkeit_2021__460"}]},{id:2532,name:"eau_new_Wasserhaushalt_2021",metadata:{is_queryable:!0,legend_name:"eau:wasserhaushalt_2021",metadata_id:"299eb814-3703-4119-b8d3-e9581c234c3b"},dimensions:{},type:"WMS",layers:"eau_new_Wasserhaushalt_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserhaushalt_2021__461"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2500,name:"eau_new_GWK_2021",children:[{id:2533,name:"eau_new_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:zustand_der_gwk_2021",metadata_id:"ef79616f-fd66-45dd-a73a-e5677948dd56"},dimensions:{},type:"WMS",layers:"eau_new_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zustand_der_GWK_2021__463"}]},{id:2534,name:"eau_new_quantitativer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:quantitativer_zustand_der_gwk_2021",metadata_id:"5b9fbb7b-26b1-4b74-a709-80df547a755d"},dimensions:{},type:"WMS",layers:"eau_new_quantitativer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_quantitativer_Zustand_der_GWK_2021__464"}]},{id:2535,name:"eau_new_chemischer_Zustand_der_GWK_2021",metadata:{is_queryable:!0,legend_name:"eau:chemischer_zustand_der_gwk_2021",metadata_id:"efa9de18-5db0-498f-aebb-fd659f689da7"},dimensions:{},type:"WMS",layers:"eau_new_chemischer_Zustand_der_GWK_2021",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_chemischer_Zustand_der_GWK_2021__465"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:482,name:"eau_new_Nitratrichtlinie",children:[{id:589,name:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie",metadata:{is_queryable:!0,legend_name:"eau:messstationen_oberflaechengewaesser_-_nitratrichtlinie",max_dpi:128,metadata_id:"e3d8df5f-eb08-4e11-831f-ae2a90294ccf"},dimensions:{},type:"WMS",layers:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Messstationen_Oberflaechengewaesser_-_Nitratrichtlinie__192"}]},{id:582,name:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie",metadata:{is_queryable:!0,legend_name:"eau:messstationen_grundwasser_-_nitratrichtlinie",max_dpi:128,metadata_id:"e15fcc8c-217c-4577-b5a0-e62f08e480c1"},dimensions:{},type:"WMS",layers:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Messstationen_Grundwasser_-_Nitratrichtlinie__193"}]}],metadata:{},mixed:!0},{id:478,name:"eau_new_Plan_im_Fall_einer_Trockenheit",children:[{id:797,name:"eau_new_trockenheit_gelb",metadata:{is_queryable:!0,legend_name:"eau:vorbeugungsphase_phase_gelb",metadata_id:"2ec1e46e-2411-4828-b702-cc3f41b3ad04"},dimensions:{},type:"WMS",layers:"eau_new_trockenheit_gelb",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_trockenheit_gelb__348"}]},{id:617,name:"eau_new_Trinkwasserknappheit_(Zustand_orange)",metadata:{is_queryable:!0,legend_name:"eau:trinkwasserknappheit_zustand_orange",max_dpi:128,metadata_id:"c5a93247-af34-494d-bce2-9bc112fa50d8"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserknappheit_(Zustand_orange)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserknappheit_(Zustand_orange)__195"}]},{id:481,name:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)",metadata:{is_queryable:!0,legend_name:"eau:erhoehte_trinkwasserknappheit_zustand_rot",max_dpi:128,metadata_id:"620eea7b-266a-4ba5-9646-8006ff5915d4"},dimensions:{},type:"WMS",layers:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Erhoehte_Trinkwasserknappheit_(Zustand_rot)__196"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",css:"eau.css",display_in_switcher:!0,link_title:"Administration de la gestion d'eau",page_title:"eau.geoportail.lu",print_img:"bandeauEau.png",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"eau.geoportal.lu",print_short_txt_en:"eau.geoportal.lu",print_short_txt_fr:"eau.geoportail.lu",print_short_txt_lu:"eau.geoportal.lu"}},{id:130,name:"pag",icon:"pag",children:[{id:706,name:"basisden_pag",children:[{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:694,name:"pag_group",children:[{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:696,name:"pag_pap_approuves",metadata:{is_queryable:!1,max_dpi:128,metadata_id:"7fd67f56-d2f6-4697-9d3b-5d9a6be770c9",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pap_approuves",imageType:"image/png",style:"default",childLayers:[{name:"pag_pap_approuves__2"}]},{id:1366,name:"pag_infos_supp",metadata:{metadata_id:"5ab48871-aa35-4b74-ada2-3033c6666748"},dimensions:{},type:"WMS",layers:"pag_infos_supp",imageType:"image/png",style:"default",childLayers:[{name:"pag_infos_supp__103"},{name:"pag_infos_supp__102"},{name:"pag_infos_supp__101"}]},{id:697,name:"pag_pcn",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"672e2e56-b888-45bb-b665-1b8132a0e147",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pcn",imageType:"image/png",style:"default",childLayers:[{name:"pag_pcn__pag_fonds"}]}],metadata:{},mixed:!0},{id:695,name:"pag_addtional_layers",children:[{id:716,name:"pag_at",children:[{id:710,name:"pag_pos",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a5f51e0e-c737-44e6-b0e0-7a0016d87707",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pos",imageType:"image/png",style:"default",childLayers:[{name:"pag_pos__0"}]}],metadata:{},mixed:!0},{id:717,name:"pag_env",children:[{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:720,name:"pag_eau",children:[{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]}],metadata:{},mixed:!0},{id:718,name:"pag_hum",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:719,name:"pag_sites_et_monuments",children:[{id:709,name:"pag_ssmn",metadata:{is_queryable:!1,max_dpi:128,metadata_id:"ab8bba00-fe68-4e1f-8fad-9dbd2f8c7809",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_ssmn",imageType:"image/png",style:"default",childLayers:[{name:"pag_ssmn__2"},{name:"pag_ssmn__1"},{name:"pag_ssmn__0"}]}],metadata:{},mixed:!0},{id:196,name:"verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:2401,name:"act_ponts",metadata:{is_queryable:!0,metadata_id:"2b7d36db-987f-49b4-96d7-60e934ddf926"},dimensions:{},type:"WMS",layers:"act_ponts",imageType:"image/png",childLayers:[{name:"act_ponts__0"},{name:"act_ponts__1"},{name:"act_ponts__2"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:812,name:"cdt_lignes_bus_par_operateur",children:[{id:814,name:"cdt_lignes_avl",metadata:{is_queryable:!0,metadata_id:"1e6f614b-e347-4115-82d7-74a72f51389f"},dimensions:{},type:"WMS",layers:"cdt_lignes_avl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_avl__category"}]},{id:815,name:"cdt_lignes_rgtr",metadata:{is_queryable:!0,metadata_id:"eae3ed54-d2ae-45ae-a62c-0dec4d44acdf"},dimensions:{},type:"WMS",layers:"cdt_lignes_rgtr",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_rgtr__category"}]},{id:816,name:"cdt_lignes_tice",metadata:{is_queryable:!0,metadata_id:"a3cb973c-12b0-4e41-bfc0-b2fb67637513"},dimensions:{},type:"WMS",layers:"cdt_lignes_tice",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tice__category"}]},{id:817,name:"cdt_lignes_cfl",metadata:{is_queryable:!0,metadata_id:"84ebdfbc-ba25-464c-af86-e74e588978ef"},dimensions:{},type:"WMS",layers:"cdt_lignes_cfl",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_cfl__category"}]},{id:1374,name:"cdt_lignes_tram",metadata:{is_queryable:!0,metadata_id:"0f46c673-d4b4-4c25-8d9a-fca41035f587"},dimensions:{},type:"WMS",layers:"cdt_lignes_tram",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_tram__category"}]}],metadata:{},mixed:!0},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:352,name:"cfl_hecto",metadata:{is_queryable:!0,metadata_id:"938f9e8e-071c-4e6b-940f-64b2a60eca74"},dimensions:{},type:"WMS",layers:"cfl_hecto",imageType:"image/png",style:"default",childLayers:[{name:"cfl_hecto__points_hecto"}]},{id:685,name:"cita_chantiers_actuel",metadata:{is_queryable:!0,metadata_id:"9c823038-5965-47cc-8dad-21496e57e3f2",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_actuel",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_actuel__CHANTIERS_ACTUEL"}]},{id:686,name:"cita_chantiers_futur",metadata:{is_queryable:!0,metadata_id:"063cb796-640f-4ab0-8430-955983a00e3b",start_opacity:1},dimensions:{},type:"WMS",layers:"cita_chantiers_futur",imageType:"image/png",style:"default",childLayers:[{name:"cita_chantiers_futur__CHANTIERS_FUTUR"}]},{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]},{id:713,name:"pch_radars",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"385180ba-a9bc-49d4-8858-ba5f19942a66",start_opacity:1},dimensions:{},type:"WMS",layers:"pch_radars",imageType:"image/png",style:"default",childLayers:[{name:"pch_radars__1"},{name:"pch_radars__2"}]},{id:2729,name:"pch_points_repere",metadata:{geocatalog_open_data_last_update_date:"2024-07-26T08:50:03.7336833",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_uuid:"66a3633bcf73e6f52fd83901",is_queryable:!0,metadata_id:"1dbe9ca0-638e-4034-94ef-c8a12fdaa57a"},dimensions:{},type:"WMS",layers:"pch_points_repere",imageType:"image/png",style:"default",childLayers:[{name:"pch_points_repere__6"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",bg_opacity:.01,css:"pag.css",display_in_switcher:!0,page_title:"pag.geoportail.lu",print_img:"PAG.png",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["2500","5000","10000","15000","20000","25000","50000","100000","200000","250000","400000"],print_short_txt_de:"pag.geoportal.lu",print_short_txt_en:"pag.geoportal.lu",print_short_txt_fr:"pag.geoportail.lu",print_short_txt_lu:"pag.geoportal.lu",show_in_mobile:!1,start_layers:["pag_pag","pag_pcn","pag_pap_approuves","pag_ssmn","pag_pos"]}},{id:126,name:"agriculture",icon:"agriculture",children:[{id:307,name:"asta",children:[{id:1637,name:"asta_flik_parcels",metadata:{is_queryable:!0,metadata_id:"f511a4ee-928a-4900-ac05-52aa0ce03bba"},dimensions:{},type:"WMS",layers:"asta_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"asta_flik_parcels__3"}]},{id:1511,name:"asta_prairies_permanentes",metadata:{is_queryable:!0,metadata_id:"f6f493c2-f57b-419d-8953-ab8018576ac7"},dimensions:{},type:"WMS",layers:"asta_prairies_permanentes",imageType:"image/png",style:"default",childLayers:[{name:"asta_prairies_permanentes__0"}]},{id:740,name:"asta_herbages_sensibles",metadata:{metadata_id:"e5d2717e-4541-43f1-b586-1b18cdf11827"},dimensions:{},type:"WMS",layers:"asta_herbages_sensibles",imageType:"image/png",style:"default",childLayers:[{name:"asta_herbages_sensibles__gruenland"}]}],metadata:{},mixed:!0},{id:340,name:"asta_zones_prot",children:[{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]},{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]},{id:1481,name:"asta_projet_rgd",children:[{id:1484,name:"eau_asta_prgd_zones_protection_lac",metadata:{is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_asta_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_asta_prgd_zones_protection_lac__349"}]},{id:1482,name:"asta_contrainte_stockage_engrais",metadata:{legend_name:"asta:stockage_engrais",metadata_id:"e94ac1bb-890b-412e-97e9-f71dbef88ab7"},dimensions:{},type:"WMS",layers:"asta_contrainte_stockage_engrais",imageType:"image/png",style:"default",childLayers:[{name:"asta_contrainte_stockage_engrais__1"}]},{id:1483,name:"asta_contrainte_utilisation_engrais",metadata:{legend_name:"asta:utilisation_engrais",metadata_id:"47f9de64-9636-4ce6-bf73-cb85cdd7b8d9"},dimensions:{},type:"WMS",layers:"asta_contrainte_utilisation_engrais",imageType:"image/png",style:"default",childLayers:[{name:"asta_contrainte_utilisation_engrais__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:204,name:"asta_meteo_group",children:[{id:283,name:"asta_meteo",metadata:{is_queryable:!0,metadata_id:"23e4b02d-a93d-47a4-8597-060319ae2af5"},dimensions:{},type:"WMS",layers:"asta_meteo",imageType:"image/png",style:"default",childLayers:[{name:"asta_meteo__meteo"}]}],metadata:{},mixed:!0},{id:309,name:"administrative_einheiten",children:[{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:349,name:"country",metadata:{is_queryable:!0,metadata_id:"4c9b3c0b-85d4-447d-a68c-7416869f8d9b"},dimensions:{},type:"WMS",layers:"country",imageType:"image/png",style:"default",childLayers:[{name:"country__PAYS"}]},{id:732,name:"limadmin_judiciaire",metadata:{metadata_id:"235c0ac9-5bf6-45b6-9ceb-8680a07944ec"},dimensions:{},type:"WMS",layers:"limadmin_judiciaire",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_judiciaire__ARRONDISSEMENTS JUDICIAIRES"}]},{id:733,name:"limadmin_legislatif",metadata:{metadata_id:"627b78d9-ae18-4be2-9a69-02aa6d4e38bb"},dimensions:{},type:"WMS",layers:"limadmin_legislatif",imageType:"image/png",style:"default",childLayers:[{name:"limadmin_legislatif__CIRCONSCRIPTIONS LEGISLATIVES"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:678,name:"anf_stations_biologiques",metadata:{is_queryable:!0,metadata_id:"05e497fc-625d-4701-90af-dbe8813201ab"},dimensions:{},type:"WMS",layers:"anf_stations_biologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_stations_biologiques__STATIONS_BIOLOGIQUES"}]},{id:1364,name:"act_frontieres_isodistances",metadata:{metadata_id:"09318d11-a908-4dea-a8f9-0558d20b980f",start_opacity:.5},dimensions:{},type:"WMS",layers:"act_frontieres_isodistances",imageType:"image/png",style:"default",childLayers:[{name:"act_frontieres_isodistances__1"},{name:"act_frontieres_isodistances__0"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0},{id:509,name:"asta_esp_group",children:[{id:139,name:"asta_esp_esp",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"16f911c8-1008-4f86-b8c1-75584010f79b",start_opacity:.75},dimensions:{},type:"WMS",layers:"asta_esp_esp",imageType:"image/png",style:"default",childLayers:[{name:"asta_esp_esp__0"},{name:"asta_esp_esp__1"}]},{id:138,name:"asta_esp_lisiere",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"e3dd4b8c-760b-44b3-887a-08c6be34c72d",start_opacity:.5},dimensions:{},type:"WMS",layers:"asta_esp_lisiere",imageType:"image/png",style:"default",childLayers:[{name:"asta_esp_lisiere__2"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",bg_opacity:.01,css:"agriculture.css",display_in_switcher:!0,link_title:"Administration des services techniques de l'agriculture",page_title:"agriculture.geoportail.lu",print_img:"bandeau_asta.png",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"agriculture.geoportal.lu",print_short_txt_en:"agriculture.geoportal.lu",print_short_txt_fr:"agriculture.geoportail.lu",print_short_txt_lu:"agriculture.geoportal.lu",start_layers:["asta_flik_parcels_2016"]}},{id:132,name:"lenoz",icon:"lenoz",children:[{id:429,name:"group_lenoz",children:[{id:494,name:"lenoz_lmg",metadata:{is_queryable:!0,metadata_id:"22d587f3-2b7d-4ebc-8564-7816cd3f2f13"},dimensions:{},type:"WMS",layers:"494",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_lmg__POI"}]},{id:496,name:"lenoz_creches",metadata:{is_queryable:!0,metadata_id:"b355d9f7-174c-4349-b1c6-0e4d6f091ab3"},dimensions:{},type:"WMS",layers:"496",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_creches__POI"}]},{id:495,name:"lenoz_ecoles",metadata:{is_queryable:!0,metadata_id:"f528b8f4-e84f-4e0c-9cf3-0b46c272f85d"},dimensions:{},type:"WMS",layers:"495",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_ecoles__POI"}]},{id:511,name:"lenoz_Post",metadata:{is_queryable:!0,metadata_id:"efa463e0-9d5d-4120-9430-e1dd816c0ad2"},dimensions:{},type:"WMS",layers:"511",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Post__POI"}]},{id:516,name:"lenoz_Banken",metadata:{is_queryable:!0,metadata_id:"ccb93f63-b711-4113-9ffb-5ad40016ed05"},dimensions:{},type:"WMS",layers:"516",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Banken__POI"}]},{id:504,name:"lenoz_Ärzte",metadata:{is_queryable:!0,metadata_id:"7f97be71-db0c-4b2c-8b17-f5913d9b70aa"},dimensions:{},type:"WMS",layers:"504",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Ärzte__POI"}]},{id:519,name:"lenoz_Restaurants",metadata:{is_queryable:!0,metadata_id:"5fffa197-d8ba-43a2-9e6b-d4f593cb2f41"},dimensions:{},type:"WMS",layers:"519",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Restaurants__POI"}]},{id:505,name:"lenoz_Lycees",metadata:{is_queryable:!0,metadata_id:"35ffa708-81e1-48b8-814e-3a81647f108d"},dimensions:{},type:"WMS",layers:"505",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Lycees__POI"}]},{id:506,name:"lenoz_Tankstelle",metadata:{is_queryable:!0,metadata_id:"7301092d-ff3c-48a5-b3b7-d6a35ccab45f"},dimensions:{},type:"WMS",layers:"506",imageType:"image/png",style:"default",childLayers:[{name:"lenoz_Tankstelle__POI"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]}],metadata:{},mixed:!0},{id:486,name:"eau_new_Hochwasserrisikomanagement-Richtlinie [HWRM-RL]",children:[{id:1696,name:"eau_new_Risikogewaesser_2019_group",children:[{id:1703,name:"eau_Risikogewaesser_2019",metadata:{is_queryable:!0,legend_name:"eau:risikogewaesser_2019",metadata_id:"762cd956-9733-4855-afa7-38768a38e8a1"},dimensions:{},type:"WMS",layers:"eau_Risikogewaesser_2019",imageType:"image/png",style:"default",childLayers:[{name:"eau_Risikogewaesser_2019__16"}]}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:1711,name:"eau_atlas_crues_subites",children:[{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:2046,name:"age_risques_fortes",metadata:{legend_name:"age_risques_fortes",metadata_id:"f1d9b1cd-ad78-44df-89ac-ad591138243f"},dimensions:{},type:"WMS",layers:"age_risques_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_risques_fortes__1"},{name:"age_risques_fortes__2"},{name:"age_risques_fortes__3"},{name:"age_risques_fortes__4"},{name:"age_risques_fortes__5"}]}],metadata:{},mixed:!0},{id:461,name:"eau_new_Historische_Ueberschwemmungsgebiete",children:[{id:637,name:"eau_new_UESG_1983_-_Mosel",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.2797021",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde16111e9b03b03833be",is_queryable:!0,legend_name:"eau:uesg_1983_-_mosel",max_dpi:128,metadata_id:"e6896207-c0f9-417e-9661-119128628e8e"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1983_-_Mosel",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1983_-_Mosel__122"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]},{id:633,name:"eau_new_UESG_Sauer_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.4493603",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde30111e9b03b222c3b5",is_queryable:!0,legend_name:"eau:uesg_sauer_1995",max_dpi:128,metadata_id:"f01f7be2-0423-4571-8fff-57dd617ae632"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Sauer_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Sauer_1995__125"}]},{id:2116,name:"eau_Hochwasserkarten_2021",children:[{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2115,name:"eau_Hochwasserrisikokarten_2021",children:[{id:2120,name:"eau_Hochwasserrisikokarten_HQ10_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"4a428832-16cf-4861-a1da-78a1f0a8c194"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ10_2021",imageType:"image/png"},{id:2121,name:"eau_Hochwasserrisikokarten_HQ100_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"ccb959ef-0ad6-47ec-ade9-45021912353f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQ100_2021",imageType:"image/png"},{id:2122,name:"eau_Hochwasserrisikokarten_HQext_2021",metadata:{legend_name:"eau:risque_inondations_2019",metadata_id:"f803b49a-336a-4bb7-acd9-5cbf508a731f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwasserrisikokarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:463,name:"eau_new_Zusaetzliche_Informationen",children:[{id:756,name:"eau_new_Hochwasser Brennpunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.8729061",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"5fd1cadde9996e5faf62ea6f",is_queryable:!0,legend_name:"eau:hochwasser_brennpunkte",metadata_id:"b2bfd06d-5f05-4abf-8f41-103d40a380e7"},dimensions:{},type:"WMS",layers:"eau_new_Hochwasser Brennpunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Hochwasser Brennpunkte__309"}]},{id:758,name:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans__314"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:166,name:"env_bruit",children:[{id:2123,name:"env_bruit_modelisation",children:[{id:232,name:"env_bruit_axes_routiers",children:[{id:2764,name:"aev_bruit_roads_2021_Lden",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lden",metadata_id:"5504291e-3457-416d-84a3-438a83ae029d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lden",imageType:"image/png"},{id:2763,name:"aev_bruit_roads_2021_Lngt",metadata:{is_queryable:!0,legend_name:"aev:routes_2021_lngt",metadata_id:"43e0ddd5-7575-4ce7-b558-2114196bd6fe",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"aev_bruit_roads_2021_Lngt",imageType:"image/png"},{id:1497,name:"env_bruit2016_axes_routiers_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"cf1a21cc-8208-420e-bd7e-091d755b6ace",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lden",imageType:"image/png"},{id:1500,name:"env_bruit2016_axes_routiers_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"83ae2d3b-f0d9-4584-8c48-f6722bd4f517",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_routiers_lngt",imageType:"image/png"},{id:1504,name:"env_bruit_axes_routiers_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"c5a6e3c5-6bef-4ff9-ac3e-aa494a34e602"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots_2016__3"},{name:"env_bruit_axes_routiers_hotspots_2016__13"}]},{id:1505,name:"env_bruit_axes_routiers_agglomeration_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"a6c63355-6e42-4795-9d72-8744b907b151"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration_2016__6"},{name:"env_bruit_axes_routiers_agglomeration_2016__13"}]},{id:326,name:"env_bruit_axes_routiers_lden",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"3e3aa044-89e0-4676-9404-744f64dd7ba0",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lden",imageType:"image/png"},{id:255,name:"env_bruit_axes_routiers_lngt",metadata:{exclusion:"[333,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"5e4f2607-b114-4884-8e48-8e1faa997eb4",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_routiers_lngt",imageType:"image/png"},{id:1475,name:"env_bruit_axes_routiers_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"ff6b3d63-871c-4e88-8fc0-0f276abe259a"},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_hotspots__10"},{name:"env_bruit_axes_routiers_hotspots__13"}]},{id:1485,name:"env_bruit_axes_routiers_agglomeration",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"f1dd0dd5-4dd5-4d88-b556-af39a20ab137",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_axes_routiers_agglomeration",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_routiers_agglomeration__12"},{name:"env_bruit_axes_routiers_agglomeration__13"}]}],metadata:{},mixed:!0},{id:183,name:"env_bruit_axes_ferroviaires",children:[{id:2761,name:"aev_bruit_railways_2021_Lden",metadata:{is_queryable:!0,metadata_id:"e48e5b8f-9388-47ae-b12f-575ed7416ce1",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lden__46"}]},{id:2762,name:"aev_bruit_railways_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"c2106415-df81-4208-9714-7dad0479ab71",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_railways_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_railways_2021_Lngt__47"}]},{id:1498,name:"env_bruit2016_axes_ferroviaires_lden",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"7975b71b-2fd4-45e6-8c0a-306671d665c6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lden",imageType:"image/png"},{id:1502,name:"env_bruit2016_axes_ferroviaires_lngt",metadata:{exclusion:"[336,332]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"170143ce-53ef-4b2b-997c-a2ccb1b84477",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_ferroviaires_lngt",imageType:"image/png"},{id:1503,name:"env_bruit_axes_ferroviaires_hotspots_2016",metadata:{is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"29ef44c6-f357-4d21-829c-f2fdd5fe1149"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots_2016",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots_2016__1"},{name:"env_bruit_axes_ferroviaires_hotspots_2016__13"}]},{id:310,name:"env_bruit_axes_ferroviaires_lden",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"32b40d1c-111e-4eed-91c7-61d61ef27b8d",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lden",imageType:"image/png"},{id:259,name:"env_bruit_axes_ferroviaires_lngt",metadata:{exclusion:"[334,332]",is_queryable:!0,legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"2d7e26ad-e448-45a2-9045-3dfb3e3ec15b",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit_axes_ferroviaires_lngt",imageType:"image/png"},{id:1476,name:"env_bruit_axes_ferroviaires_hotspots",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"aev:noise_hotspots",metadata_id:"d3b30653-d0bf-4924-96b2-251e9f61c979"},dimensions:{},type:"WMS",layers:"env_bruit_axes_ferroviaires_hotspots",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_axes_ferroviaires_hotspots__8"},{name:"env_bruit_axes_ferroviaires_hotspots__13"}]}],metadata:{},mixed:!0},{id:190,name:"env_bruit_air",children:[{id:2667,name:"aev_bruit_aeroport_2021_Lden",metadata:{is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"4ceeb788-86c8-420d-a161-43607ed4e89a",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lden__40"}]},{id:2668,name:"aev_bruit_aeroport_2021_Lngt",metadata:{is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"71277cc9-4b62-4199-8a2e-71ca4a863519",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_aeroport_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_aeroport_2021_Lngt__41"}]},{id:1501,name:"env_bruit2016_axes_aeroport_lden",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lden",metadata_id:"26e208ff-39a3-4cf6-92db-4c6707fe972a",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lden",imageType:"image/png"},{id:1499,name:"env_bruit2016_axes_aeroport_lngt",metadata:{exclusion:"[332,336]",is_queryable:!0,legend_name:"env:bruit_lngt",metadata_id:"2aa6f79d-74cc-4f22-bedd-748f8e8e30b9",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"env_bruit2016_axes_aeroport_lngt",imageType:"image/png"},{id:157,name:"env_bruit_air_lden",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lden",max_dpi:128,metadata_id:"0f4dcfc5-e947-4e5c-9460-702b8e1a572f",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lden",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lden__70"}]},{id:327,name:"env_bruit_air_lngt",metadata:{exclusion:"[335,332]",legend_name:"env:bruit_lngt",max_dpi:128,metadata_id:"6b031060-1f82-467d-af86-afe02a3f04fa",start_opacity:.7},dimensions:{},type:"WMS",layers:"env_bruit_air_lngt",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_air_lngt__72"}]}],metadata:{},mixed:!0},{id:2771,name:"env_bruit_agglo",children:[{id:2769,name:"aev_bruit_agglo_industry_2021_Lden",metadata:{is_queryable:!0,metadata_id:"4faed79e-f82c-4758-b4bf-df654951b27f",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lden__37"}]},{id:2770,name:"aev_bruit_agglo_industry_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e1e006c9-c637-4e2a-840f-3b7e8a04ce1e",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_industry_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_industry_2021_Lngt__38"}]},{id:2768,name:"aev_bruit_agglo_roads_2021_Lden",metadata:{is_queryable:!0,metadata_id:"0015e212-a7e5-42f6-ba94-3fdb5014513c",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lden__35"}]},{id:2767,name:"aev_bruit_agglo_roads_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"9718d119-a073-4406-8bf1-d4b409ed6a68",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_roads_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_roads_2021_Lngt__36"}]},{id:2765,name:"aev_bruit_agglo_tram_2021_Lden",metadata:{is_queryable:!0,metadata_id:"47bbe08f-dbb4-4a4f-bbf7-8c6084e6da45",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lden__33"}]},{id:2766,name:"aev_bruit_agglo_tram_2021_Lngt",metadata:{is_queryable:!0,metadata_id:"e11fbfdf-29c4-4845-ad12-e2fc2ef5f530",start_opacity:.7},dimensions:{},type:"WMS",layers:"aev_bruit_agglo_tram_2021_Lngt",imageType:"image/png",style:"default",childLayers:[{name:"aev_bruit_agglo_tram_2021_Lngt__34"}]}],metadata:{},mixed:!0},{id:2124,name:"env_bruit_multiexposition",children:[{id:2125,name:"aev_multiexposition_Lden",metadata:{is_queryable:!0,metadata_id:"37c1c1a2-1926-4c92-8c2a-b9ce0ac6cfef"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lden",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lden__1"}]},{id:2126,name:"aev_multiexposition_Lnight",metadata:{is_queryable:!0,metadata_id:"a536e129-3c0f-4a6c-a767-0519eec880c1"},dimensions:{},type:"WMS",layers:"aev_multiexposition_Lnight",imageType:"image/png",style:"default",childLayers:[{name:"aev_multiexposition_Lnight__2"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1641,name:"aev_campagne_mesure_bruit",children:[{id:2618,name:"aev_bruit_campagne_2023",children:[{id:2726,name:"aev_campagne_bruit_aeroportuaire_2023",metadata:{is_queryable:!0,metadata_id:"3c6a1f70-51ab-4c8b-9a09-c163bafd23ff"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_aeroportuaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_aeroportuaire_2023__109"}]}],metadata:{},mixed:!0},{id:2475,name:"env_bruit_campagne_2022",children:[{id:2619,name:"aev_campagne_bruit_routier_2023",metadata:{is_queryable:!0,metadata_id:"e242b817-86a7-4f70-bc41-8e90d264fd19"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_routier_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_routier_2023__97"}]},{id:2620,name:"aev_campagne_bruit_ferroviaire_2023",metadata:{is_queryable:!0,metadata_id:"c3c06743-6876-4f55-802d-4599000c1681"},dimensions:{},type:"WMS",layers:"aev_campagne_bruit_ferroviaire_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_campagne_bruit_ferroviaire_2023__94"}]}],metadata:{},mixed:!0},{id:1916,name:"aev_silent_cities_2020",children:[{id:1917,name:"aev_silent_cities_2020_phase1",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase1",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase1__7"}]},{id:1918,name:"aev_silent_cities_2020_phase2",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase2",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase2__8"}]},{id:1919,name:"aev_silent_cities_2020_phase3",metadata:{is_queryable:!0,legend_name:"aev:silent_cities",metadata_id:"58cd0d5a-e69a-4381-8d1c-7cdfd7d98272"},dimensions:{},type:"WMS",layers:"aev_silent_cities_2020_phase3",imageType:"image/png",childLayers:[{name:"aev_silent_cities_2020_phase3__9"}]}],metadata:{},mixed:!0},{id:1921,name:"env_bruit_routes_hotspots_2019_group",children:[{id:1642,name:"env_bruit_routes_hotspots_2019",metadata:{is_queryable:!0,legend_name:"aev:hotspots_rail",metadata_id:"f898e289-c5dd-432b-b3e6-de4c3681b77a"},dimensions:{},type:"WMS",layers:"env_bruit_routes_hotspots_2019",imageType:"image/png",style:"default",childLayers:[{name:"env_bruit_routes_hotspots_2019__4"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"webbasemap",css:"lenoz.css",display_in_switcher:!0,fake_scales:["3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],page_title:"lenoz.geoportail.lu",print_img:"bandeaulenoz.png",print_long_txt_de:"Luxemburgische Nachhaltigkeitszertifierung",print_long_txt_en:"Luxembourgish durability certification",print_long_txt_fr:"Certification en durabilité luxembourgeoise",print_long_txt_lu:"Lëtzebuergesch Nohaltëgkeetszertifizéirung",print_scales:["10000"],print_short_txt_de:"lenoz.geoportail.lu",print_short_txt_en:"lenoz.geoportail.lu",print_short_txt_fr:"lenoz.geoportail.lu",print_short_txt_lu:"lenoz.geoportail.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0"],start_layers:["poi_ecoles"]}},{id:124,name:"preizerdaul",icon:"preizerdaul",children:[{id:287,name:"group_ac_preizerdaul_pag",children:[{id:331,name:"ac_preizerdaul_pag",metadata:{is_queryable:!0,legend_name:"preizerdaul:pag",max_dpi:128,metadata_id:"2eb99e09-635c-400f-a32f-fbc7129854c3",start_opacity:.7},dimensions:{},type:"WMS",layers:"ac_preizerdaul_pag",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_pag__0"}]},{id:363,name:"ac_preizerdaul_ortho",metadata:{max_dpi:128,metadata_id:"83700e3f-2590-4bab-b93f-47390186a04f"},dimensions:{},type:"WMS",layers:"ac_preizerdaul_ortho",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_ortho__0"}]},{id:137,name:"ac_preizerdaul_ortho_2009",metadata:{max_dpi:128,metadata_id:"2d9a745c-4574-42dd-9c7b-ce8f6ddeb4e3"},dimensions:{},type:"WMS",layers:"ac_preizerdaul_ortho_2009",imageType:"image/png",style:"default",childLayers:[{name:"ac_preizerdaul_ortho_2009__1"},{name:"ac_preizerdaul_ortho_2009__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"webbasemap",bg_opacity:0,css:"preizerdaul.css",link_title:"Administration communale de Préizerdaul",page_title:"preizerdaul.geoportail.lu",print_img:"preizerdaul.png",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"preizerdaul.geoportal.lu",print_short_txt_en:"preizerdaul.geoportal.lu",print_short_txt_fr:"preizerdaul.geoportail.lu",print_short_txt_lu:"preizerdaul.geoportal.lu",start_layers:["ac_preizerdaul_ortho","ac_preizerdaul_pag"],start_x:95500,start_y:63500,start_zoom:7}},{id:125,name:"wellenstein",icon:"wellenstein",children:[{id:279,name:"group_ac_wellenstein_pag",children:[{id:210,name:"ac_wellenstein_pag_complet",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_complet",imageType:"image/png"},{id:182,name:"ac_wellenstein_pag_zones",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_zones",imageType:"image/png"},{id:257,name:"ac_wellenstein_pag_limites",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_limites",imageType:"image/png"},{id:258,name:"ac_wellenstein_pag_voies_acces",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"310c9c19-b3fd-42f2-a537-41a5525fa4a2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_voies_acces",imageType:"image/png"},{id:300,name:"ac_wellenstein_pag_perimetres_zones",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_perimetres_zones",imageType:"image/png"},{id:305,name:"ac_wellenstein_pag_volumes_a_sauvegarder",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_volumes_a_sauvegarder",imageType:"image/png"},{id:162,name:"ac_wellenstein_pag_volumes_batiments",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_volumes_batiments",imageType:"image/png"},{id:282,name:"ac_wellenstein_pag_alignements_a_preserver",metadata:{legend_name:"wellenstein:pag_complet",metadata_id:"f92b66ee-4d6c-48fe-a553-83236e8f0ed6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_wellenstein_pag_alignements_a_preserver",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",css:"wellenstein.css",link_title:"Commune de Wellenstein",page_title:"wellenstein.geoportail.lu",print_img:"wellenstein.png",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"wellenstein.geoportal.lu",print_short_txt_en:"wellenstein.geoportal.lu",print_short_txt_fr:"wellenstein.geoportail.lu",print_short_txt_lu:"wellenstein.geoportal.lu",start_layers:["ac_wellenstein_pag_complet"],start_x:64965,start_y:93325.5,start_zoom:6}},{id:131,name:"lintgen",icon:"lintgen",children:[{id:422,name:"pag_lintgen",children:[{id:425,name:"pag_lintgen_layer",metadata:{legend_name:"lintgen",metadata_id:"809bceff-4802-47d2-983d-290a0956b327",start_opacity:.6},dimensions:{},type:"WMS",layers:"pag_lintgen_layer",imageType:"image/png",style:"default",childLayers:[{name:"pag_lintgen_layer__pag_lintgen"}]}],metadata:{},mixed:!0},{id:421,name:"eau_4_lintgen",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:641,name:"eau_new_UESG_1993_(ausser_Mosel)",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:25.7826569",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde1e111e9b03b03833bf",is_queryable:!0,legend_name:"eau:uesg_1993_ausser_mosel",max_dpi:128,metadata_id:"78c692f3-ad20-467b-b03a-0d020a821647"},dimensions:{},type:"WMS",layers:"eau_new_UESG_1993_(ausser_Mosel)",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_1993_(ausser_Mosel)__123"}]},{id:642,name:"eau_new_UESG_Alzette_1995",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.5894792",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"57ecde26111e9b03b03833c0",is_queryable:!0,legend_name:"eau:uesg_alzette_1995",max_dpi:128,metadata_id:"aaf81780-df85-4580-a890-fded8ae03db7"},dimensions:{},type:"WMS",layers:"eau_new_UESG_Alzette_1995",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_UESG_Alzette_1995__124"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"voidLayer",bg_opacity:.01,css:"lintgen.css",fake_scales:["2000","2500","5000","10000","15000","30000"],page_title:"lintgen.geoportail.lu",print_img:"Lintgen.jpg",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["5000","10000","15000","20000","25000"],print_short_txt_de:"lintgen.geoportal.lu",print_short_txt_en:"lintgen.geoportal.lu",print_short_txt_fr:"lintgen.geoportail.lu",print_short_txt_lu:"lintgen.geoportal.lu",start_layers:["pag_lintgen_layer"],start_x:87430,start_y:77248,start_zoom:1}},{id:120,name:"remich",icon:"remich",children:[{id:236,name:"group_ac_remich_pag",children:[{id:344,name:"ac_remich_pag",metadata:{legend_name:"remich:pag",metadata_id:"14d4159d-e103-4cac-a2a0-418ff24edaee",start_opacity:.7},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_remich_pag",imageType:"image/png"},{id:267,name:"ac_remich_ortho",metadata:{metadata_id:"a2d86966-e7e6-477e-b581-ae3a0e9f8e68"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ac_remich_ortho",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"streets",css:"remich.css",link_title:"Administration communale de Remich",page_title:"remich.geoportail.lu",print_img:"remich.png",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"remich.geoportal.lu",print_short_txt_en:"remich.geoportal.lu",print_short_txt_fr:"remich.geoportail.lu",print_short_txt_lu:"remich.geoportal.lu",start_layers:["ac_remich_ortho","ac_remich_pag"],start_x:67965,start_y:94325.5,start_zoom:6}},{id:114,name:"commande",icon:"commande",children:[{id:253,name:"commande_grp",children:[{id:200,name:"topo_decoupage_100k",metadata:{is_queryable:!0,metadata_id:"0d331d41-73ff-4091-84e1-bf949e092a52"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_100k",imageType:"image/png"},{id:219,name:"topo_decoupage_50k",metadata:{is_queryable:!0,metadata_id:"f3714ffe-11ec-4a4a-8d51-549ba41086da"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_50k",imageType:"image/png"},{id:193,name:"topo_decoupage_5000",metadata:{is_queryable:!0,metadata_id:"036d0cd3-c605-40cb-90d3-8c7afd4ddff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_5000",imageType:"image/png"},{id:188,name:"topo_decoupage_tc",metadata:{is_queryable:!0,metadata_id:"ef075fce-9bea-4ecd-89a5-73a2587a464a"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_tc",imageType:"image/png"},{id:216,name:"decoupage_communes",metadata:{is_queryable:!0,metadata_id:"e71c2d85-3495-435d-90b7-98ac18f9235f"},dimensions:{},type:"WMS",layers:"decoupage_communes",imageType:"image/png",style:"default",childLayers:[{name:"decoupage_communes__DECOUPAGE_COMMUNE"}]},{id:306,name:"decoupage_geo25k",metadata:{is_queryable:!0,metadata_id:"5cf702be-f598-4d49-9af0-67724acf5ae2"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"decoupage_geo25k",imageType:"image/png"},{id:211,name:"decoupage_geo25_50k",metadata:{is_queryable:!0,metadata_id:"26ebc97c-166b-426c-ac5c-60ae42256f9e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"decoupage_geo25_50k",imageType:"image/png"},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:374,name:"topo_decoupage_ortho_2013",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMS",layers:"topo_decoupage_ortho_2013",imageType:"image/png",style:"default",childLayers:[{name:"topo_decoupage_ortho_2013__DECOUPAGE_ORTHO_2013"}]},{id:418,name:"repere_alti",metadata:{is_queryable:!1,metadata_id:"3119179b-56bb-459d-8904-1e0a2bfb6bc7"},dimensions:{},type:"WMS",layers:"418",imageType:"image/png",style:"default",childLayers:[{name:"repere_alti__POI"}]},{id:457,name:"topo_decoupage_5000_ed2015",metadata:{is_queryable:!0,metadata_id:"01182ea0-3c30-4fc0-9bc2-e2dc778592da"},dimensions:{},type:"WMS",layers:"topo_decoupage_5000_ed2015",imageType:"image/png",style:"default",childLayers:[{name:"topo_decoupage_5000_ed2015__DECOUPAGE_5000_ED2015"}]},{id:823,name:"feuilles_cadastrales_urplang2",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales_urplang",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales_urplang2__FEUILLES_CADASTRALES"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{css:"main.css",page_title:"map.geoportail.lu",print_img:"bandeau.jpg",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"map.geoportal.lu",print_short_txt_en:"map.geoportal.lu",print_short_txt_fr:"map.geoportal.lu",print_short_txt_lu:"map.geoportal.lu"}},{id:123,name:"at",icon:"at",children:[{id:394,name:"at_ps",children:[{id:392,name:"at_pst",children:[{id:410,name:"at_pst1",metadata:{is_queryable:!0,legend_name:"at:projetspst",max_dpi:128,metadata_id:"10568679-86b2-487b-b19b-b371c39773c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pst1",imageType:"image/png",style:"default",childLayers:[{name:"at_pst1__0"},{name:"at_pst1__1"}]},{id:408,name:"at_pst2",metadata:{is_queryable:!0,legend_name:"at:couloirpst",max_dpi:128,metadata_id:"10568679-86b2-487b-b19b-b371c39773c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pst2",imageType:"image/png",style:"default",childLayers:[{name:"at_pst2__0"}]}],metadata:{},mixed:!0},{id:398,name:"at_psp",children:[{id:396,name:"at_psp_cv",metadata:{is_queryable:!0,legend_name:"at:coupureverte",max_dpi:128,metadata_id:"84763751-9311-4d45-8f30-06e8370aeffa",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_cv",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_cv__0"}]},{id:409,name:"at_psp_zvi",metadata:{is_queryable:!0,legend_name:"at:zoneverteinterurbaine",max_dpi:128,metadata_id:"7428ad86-57d1-4186-98aa-c4c2fb94578f",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_zvi",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_zvi__0"}]},{id:395,name:"at_psp_gep",metadata:{is_queryable:!0,legend_name:"at:grandsensemblespaysagers",max_dpi:128,metadata_id:"84763751-9311-4d45-8f30-06e8370aeffa",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psp_gep",imageType:"image/png",style:"default",childLayers:[{name:"at_psp_gep__0"}]}],metadata:{},mixed:!0},{id:393,name:"at_pszae",children:[{id:407,name:"at_pszae1",metadata:{is_queryable:!0,legend_name:"at:zaeexistante",max_dpi:128,metadata_id:"2133d9bd-6941-4181-8866-0d8db0e1d041",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae1",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae1__0"},{name:"at_pszae1__1"}]},{id:402,name:"at_pszae2",metadata:{is_queryable:!0,legend_name:"at:zaenouvext",max_dpi:128,metadata_id:"ea5da181-a572-43fb-9813-e373ad3ac0c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae2",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae2__0"},{name:"at_pszae2__1"}]},{id:403,name:"at_pszae3",metadata:{is_queryable:!0,legend_name:"at:zoneareclasser",max_dpi:128,metadata_id:"ea5da181-a572-43fb-9813-e373ad3ac0c1",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_pszae3",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae3__0"},{name:"at_pszae3__1"}]},{id:1435,name:"at_pszae_droit_preemption",metadata:{is_queryable:!0,metadata_id:"ac28744b-e9cd-4db1-8904-7bfe137aafcd"},dimensions:{},type:"WMS",layers:"at_pszae_droit_preemption",imageType:"image/png",style:"default",childLayers:[{name:"at_pszae_droit_preemption__0"}]}],metadata:{},mixed:!0},{id:400,name:"at_psl",children:[{id:401,name:"at_psl1",metadata:{is_queryable:!0,legend_name:"at:zoneprojenvergurehabitat",max_dpi:128,metadata_id:"a0c94819-73be-40b8-9327-e3b8b0407633",start_opacity:.7},dimensions:{},type:"WMS",layers:"at_psl1",imageType:"image/png",style:"default",childLayers:[{name:"at_psl1__0"},{name:"at_psl1__1"}]},{id:1436,name:"at_psl_droit_preemption",metadata:{is_queryable:!0,metadata_id:"ec647d3d-46bf-4c3d-84dc-fc42f5c875a7"},dimensions:{},type:"WMS",layers:"at_psl_droit_preemption",imageType:"image/png",style:"default",childLayers:[{name:"at_psl_droit_preemption__0"}]}],metadata:{},mixed:!0},{id:1493,name:"at_pds_parcels_group",children:[{id:1492,name:"at_pds_parcels",metadata:{is_queryable:!0,legend_name:"attestation_pds",metadata_id:"2b5a9769-3c31-4468-b457-724037bc8657"},dimensions:{},type:"WMS",layers:"at_pds_parcels",imageType:"image/png",style:"default",childLayers:[{name:"at_pds_parcels__0"}]},{id:1712,name:"at_psl_fond_de_plan",metadata:{metadata_id:"6c0d4541-6626-4ab4-8d02-baebcd2496bb"},dimensions:{},type:"WMS",layers:"at_psl_fond_de_plan",imageType:"image/png",style:"default",childLayers:[{name:"at_psl_fond_de_plan__0"}]}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2208,name:"at_diagnostique_terr_group",children:[{id:2209,name:"at_impermeabilisation_group",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:2281,name:"at_impermeabilisation_communes_2018",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_communes_2018",metadata_id:"dae9931e-abd9-4f88-8180-024815cd0e1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_communes_2018",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_communes_2018__0"}]},{id:2282,name:"at_impermeabilisation_communes_utilisateur_2018",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_communes_utilisateur_2018",metadata_id:"6bd9208a-01a0-42fc-b7dc-55c26ea95e02"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_communes_utilisateur_2018",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_communes_utilisateur_2018__0"}]},{id:2216,name:"at_impermeabilisation_grid_2018_100m",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_100m",metadata_id:"210db74a-e33a-401b-9e17-2cd966cdcd1f"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_100m",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_100m__0"}]},{id:2215,name:"at_impermeabilisation_grid_2018_1km",metadata:{is_queryable:!0,legend_name:"at:impermeabilisation_grid_2018_1km",metadata_id:"8dc777d0-f910-4c69-a476-85a73dcd8474"},dimensions:{},type:"WMS",layers:"at_impermeabilisation_grid_2018_1km",imageType:"image/png",style:"default",childLayers:[{name:"at_impermeabilisation_grid_2018_1km__0"}]}],metadata:{},mixed:!0},{id:2212,name:"at_batiments_group",children:[{id:2214,name:"at_batiments_periode_construction",metadata:{is_queryable:!0,legend_name:"at:periode_construction_batiments",metadata_id:"7c138282-86de-4adb-91c2-467b06786821"},dimensions:{},type:"WMS",layers:"at_batiments_periode_construction",imageType:"image/png",style:"default",childLayers:[{name:"at_batiments_periode_construction__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2211,name:"at_regional_group",children:[{id:2218,name:"at_region_sud_group",children:[{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]},{id:2603,name:"at_fruitiers",metadata:{is_queryable:!0,metadata_id:"d47a0780-2fb9-4d01-8774-64a1532f6280"},dimensions:{},type:"WMS",layers:"at_fruitiers",imageType:"image/png",style:"default",childLayers:[{name:"at_fruitiers__0"}]},{id:2604,name:"at_fruitiers_parking",metadata:{is_queryable:!0,metadata_id:"87fca8cd-aa11-4bd6-bc55-72f96a6016b4"},dimensions:{},type:"WMS",layers:"at_fruitiers_parking",imageType:"image/png",style:"default",childLayers:[{name:"at_fruitiers_parking__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2313,name:"at_pos_group",children:[{id:710,name:"pag_pos",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a5f51e0e-c737-44e6-b0e0-7a0016d87707",start_opacity:1},dimensions:{},type:"WMS",layers:"pag_pos",imageType:"image/png",style:"default",childLayers:[{name:"pag_pos__0"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{bg_layer:"pixelmaps-gray",bg_opacity:100,css:"at.css",display_in_switcher:!0,fake_scales:["750","1500","3000","6000","15000","30000","60000","150000","300000","450000","700000","1500000"],link_title:"Aménagement du territoire",page_title:"at.geoportail.lu",print_img:"bandeau_at.png",print_long_txt_de:"Das öffentliche Geoportal des Grossherzogtums Luxemburg",print_long_txt_en:"The official geoportal for the Grand-Duchy of Luxembourg",print_long_txt_fr:"Le géoportail officiel du Grand-Duché de Luxembourg",print_long_txt_lu:"Den offizielle Geoportal vu Lëtzebuerg",print_scales:["1000","1500","2500","5000","10000","15000","20000","25000","50000","80000","100000","125000","200000","250000","400000"],print_short_txt_de:"at.geoportal.lu",print_short_txt_en:"at.geoportal.lu",print_short_txt_fr:"at.geoportail.lu",print_short_txt_lu:"at.geoportal.lu",resolutions:["500.0","250.0","150.0","100.0","50.0","20.0","10.0","5.0","2.0","1.0","0.5","0.25"]}},{id:800,name:"cadastre_hertzien",icon:"main",children:[{id:803,name:"cadastre_hertzien_group",children:[{id:811,name:"mat_antennes_moins_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennesbelow50w",metadata_id:"cbf57825-26ba-4e36-98e8-083c1945066c"},dimensions:{},type:"WMS",layers:"mat_antennes_moins_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_moins_50_watt__0"}]},{id:1930,name:"mat_5G_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"76e25a5d-8e78-40cb-a54b-9cfc27b16e60"},dimensions:{},type:"WMS",layers:"mat_5G_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G_antennes_plus_50_watt__0"}]},{id:2053,name:"mat_5G-3.6GHZ_antennes_plus_50_watt",metadata:{is_queryable:!0,metadata_id:"e048acda-0ec7-4f52-8221-613d9312c28b"},dimensions:{},type:"WMS",layers:"mat_5G-3.6GHZ_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_5G-3.6GHZ_antennes_plus_50_watt__0"}]},{id:801,name:"mat_antennes_plus_50_watt",metadata:{is_queryable:!0,legend_name:"at:antennes",metadata_id:"e4a24392-591c-4d20-a62b-f75a9191488d"},dimensions:{},type:"WMS",layers:"mat_antennes_plus_50_watt",imageType:"image/png",style:"default",childLayers:[{name:"mat_antennes_plus_50_watt__0"}]},{id:802,name:"mat_points_mesure",metadata:{is_queryable:!0,legend_name:"at:pointmesure",metadata_id:"f8f71353-40b8-4e10-b72c-85d8fe9e0577"},dimensions:{},type:"WMS",layers:"mat_points_mesure",imageType:"image/png",style:"default",childLayers:[{name:"mat_points_mesure__0"}]}],metadata:{is_expanded:!0},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1672,name:"urban_farming",icon:"urban_farming",children:[{id:1678,name:"urban_farming_donnees_disponibles_group",children:[{id:1679,name:"Données disponibles",metadata:{is_queryable:!0,legend_name:"uf:donnees_disponibles",metadata_id:"aaa7619b-8b65-4283-829d-f990c62e7f4c"},dimensions:{},type:"WMS",layers:"Données disponibles",imageType:"image/png",style:"default",childLayers:[{name:"Données disponibles__2"},{name:"Données disponibles__3"}]}],metadata:{},mixed:!0},{id:1690,name:"Analyse Ensoleillement",children:[{id:1806,name:"Ensoleillement au 15.02",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.02__15"}]},{id:1683,name:"Ensoleillement au 15.05",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.05",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.05__16"}]},{id:1682,name:"Ensoleillement au 15.08",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"89b63cab-2220-4b00-abd5-2bfbe35352cd"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.08",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.08__17"}]}],metadata:{legend_name:"uf:solar_hiver",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},mixed:!0},{id:1673,name:"Projet en extérieur, hors sol, professionnel, en toiture",children:[{id:1674,name:"Toitures plates",metadata:{legend_name:"uf:roof_type",metadata_id:"65ba3e71-d581-4cde-b037-b6e852963fe6"},dimensions:{},type:"WMS",layers:"Toitures plates",imageType:"image/png",style:"default",childLayers:[{name:"Toitures plates__7"}]},{id:1675,name:"Hauteur des bâtiments",metadata:{legend_name:"uf:building_height",metadata_id:"021f0cc2-68ea-46b9-97c5-169cc5052e5e"},dimensions:{},type:"WMS",layers:"Hauteur des bâtiments",imageType:"image/png",style:"default",childLayers:[{name:"Hauteur des bâtiments__8"}]},{id:1680,name:"Accessibilité légale",metadata:{legend_name:"uf:parcels_streets",metadata_id:"a53e2022-a799-47b3-9d21-414c992f1019"},dimensions:{},type:"WMS",layers:"Accessibilité légale",imageType:"image/png",style:"default",childLayers:[{name:"Accessibilité légale__6"}]},{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1681,name:"Sites de commercialisation et consommation",metadata:{is_queryable:!0,legend_name:"uf:commerce_closeby",metadata_id:"54c3973e-3168-4a0a-9df0-ce5c97360d0d"},dimensions:{},type:"WMS",layers:"Sites de commercialisation et consommation",imageType:"image/png",style:"default",childLayers:[{name:"Sites de commercialisation et consommation__5"}]},{id:1687,name:"Typologie 1 - Carte pondérée pour le 15.02",metadata:{is_queryable:!0,legend_name:"uf:typologie1",metadata_id:"aa400ef6-b447-403e-9070-8795067e9017"},dimensions:{},type:"WMS",layers:"Typologie 1 - Carte pondérée pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 1 - Carte pondérée pour le 15.02__11"}]}],metadata:{},mixed:!0},{id:1685,name:"Projet en extérieur, hors sol, professionnel, au sol",children:[{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1681,name:"Sites de commercialisation et consommation",metadata:{is_queryable:!0,legend_name:"uf:commerce_closeby",metadata_id:"54c3973e-3168-4a0a-9df0-ce5c97360d0d"},dimensions:{},type:"WMS",layers:"Sites de commercialisation et consommation",imageType:"image/png",style:"default",childLayers:[{name:"Sites de commercialisation et consommation__5"}]},{id:1688,name:"Typologie 2 - Carte pondérée pour le 15.02",metadata:{legend_name:"uf:typologie2",metadata_id:"2fdba3ac-42ef-4a4d-9480-a0641b9d9cdc"},dimensions:{},type:"WMS",layers:"Typologie 2 - Carte pondérée pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 2 - Carte pondérée pour le 15.02__12"}]}],metadata:{},mixed:!0},{id:1686,name:"Projet en extérieur, hors sol, communautaire, en toiture",children:[{id:1674,name:"Toitures plates",metadata:{legend_name:"uf:roof_type",metadata_id:"65ba3e71-d581-4cde-b037-b6e852963fe6"},dimensions:{},type:"WMS",layers:"Toitures plates",imageType:"image/png",style:"default",childLayers:[{name:"Toitures plates__7"}]},{id:1675,name:"Hauteur des bâtiments",metadata:{legend_name:"uf:building_height",metadata_id:"021f0cc2-68ea-46b9-97c5-169cc5052e5e"},dimensions:{},type:"WMS",layers:"Hauteur des bâtiments",imageType:"image/png",style:"default",childLayers:[{name:"Hauteur des bâtiments__8"}]},{id:1676,name:"Ensoleillement",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},dimensions:{},type:"WMS",layers:"Ensoleillement",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement__9"}]},{id:1689,name:"Typologie 3 - Carte pondérée pour le 15.02",metadata:{legend_name:"uf:typologie3",metadata_id:"1fe3fa11-8d55-4612-b044-95a124cb5740"},dimensions:{},type:"WMS",layers:"Typologie 3 - Carte pondérée pour le 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Typologie 3 - Carte pondérée pour le 15.02__13"}]}],metadata:{},mixed:!0},{id:248,name:"flurstucke_grundstucke",children:[{id:359,name:"parcels",metadata:{exclusion:'[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,"exclusion_ortho2022","exclusion_ortho2022IR","exclusion_ortho2023","exclusion_ortho2023_bati","exclusion_ortho2023IR"]',is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels",imageType:"image/png"},{id:353,name:"parcels_labels",metadata:{metadata_id:"a65629c7-ddd6-43de-b0c3-c49647d8fd2b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"parcels_labels",imageType:"image/png"},{id:199,name:"buildings",metadata:{is_queryable:!0,legend_name:"pcn_batiments:show",metadata_id:"5d0efc9d-a05a-4964-9f9d-a0ab9932af04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"buildings",imageType:"image/png"},{id:320,name:"toponymes",metadata:{metadata_id:"ffa537f7-a438-47da-9e0c-8e32260646a9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"toponymes",imageType:"image/png"},{id:350,name:"communes_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"5ae8fdfb-bb8f-4f72-b7ee-36c7664fe4b5"},dimensions:{},type:"WMS",layers:"communes_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales_labels__COMMUNES_CADASTRALES_LABELS"}]},{id:153,name:"communes_cadastrales",metadata:{is_queryable:!0,metadata_id:"8a95f8b2-2cfb-42e7-a51c-02084228b364"},dimensions:{},type:"WMS",layers:"communes_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"communes_cadastrales__COMMUNES_CADASTRALES"}]},{id:266,name:"sections_cadastrales_labels",metadata:{is_queryable:!0,metadata_id:"69d1b609-11f7-4587-872a-508ee98ea76c"},dimensions:{},type:"WMS",layers:"sections_cadastrales_labels",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales_labels__SECTIONS_CADASTRALES_LABELS"}]},{id:355,name:"sections_cadastrales",metadata:{is_queryable:!0,metadata_id:"c9122320-8f06-4499-ac86-eb469e911369"},dimensions:{},type:"WMS",layers:"sections_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"sections_cadastrales__SECTIONS_CADASTRALES"}]},{id:256,name:"feuilles_cadastrales",metadata:{is_queryable:!0,metadata_id:"51333029-c8cf-490f-b4a6-80ba239f0cb4"},dimensions:{},type:"WMS",layers:"feuilles_cadastrales",imageType:"image/png",style:"default",childLayers:[{name:"feuilles_cadastrales__FEUILLES_CADASTRALES"}]},{id:417,name:"remembrements",metadata:{exclusion:"[301,302,303,304,305,306,307,308,309,310]",is_queryable:!0,max_dpi:128,metadata_id:"03d079f3-61fb-48bc-ab39-f3427b208702",start_opacity:.7},dimensions:{},type:"WMS",layers:"remembrements",imageType:"image/png",style:"default",childLayers:[{name:"remembrements__0"},{name:"remembrements__1"}]},{id:1643,name:"act_grid_land_tenure",children:[{id:1644,name:"act_privately_owned_land",metadata:{is_queryable:!0,legend_name:"act:privately",metadata_id:"75cb5ae7-7c48-478f-b2a6-1e5bfbdd5958"},dimensions:{},type:"WMS",layers:"act_privately_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_privately_owned_land__6"}]},{id:1645,name:"act_state_owned_land",metadata:{is_queryable:!0,legend_name:"act:stateowned",metadata_id:"e8813b4e-43c4-4a72-853e-bd7c06fd1111"},dimensions:{},type:"WMS",layers:"act_state_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_state_owned_land__5"}]},{id:1646,name:"act_municipality_owned_land",metadata:{is_queryable:!0,legend_name:"act:municipality",metadata_id:"89d42e03-93ae-444f-a49e-eb869b30071e"},dimensions:{},type:"WMS",layers:"act_municipality_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_municipality_owned_land__4"}]},{id:1647,name:"act_domainepublic_owned_land",metadata:{is_queryable:!0,legend_name:"act:domainepublic",metadata_id:"ac32c380-37df-4594-bbf2-0fd394482fd9"},dimensions:{},type:"WMS",layers:"act_domainepublic_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_domainepublic_owned_land__1"}]},{id:1648,name:"act_publicly_owned_land",metadata:{is_queryable:!0,legend_name:"act:publicly",metadata_id:"0a1852f5-1f32-4bdc-8bbc-d6103921d862"},dimensions:{},type:"WMS",layers:"act_publicly_owned_land",imageType:"image/png",style:"default",childLayers:[{name:"act_publicly_owned_land__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1530,name:"atlas_demographique",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2515,name:"statec_census_grid",children:[{id:2720,name:"statec_census_group_repartition_territoriale",children:[{id:2596,name:"statec_population_commune",metadata:{is_queryable:!0,metadata_id:"5b0ec0de-1ed8-467c-b750-b4421e532cee",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"statec_population_commune__0"},{name:"statec_population_commune__1"}]},{id:2597,name:"statec_densite_population_commune",metadata:{is_queryable:!0,metadata_id:"e469230d-68bd-4d9c-8c0b-beda13b4c713",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_densite_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"statec_densite_population_commune__0"},{name:"statec_densite_population_commune__2"}]}],metadata:{},mixed:!0},{id:2721,name:"statec_census_group_repartition_km2",children:[{id:2514,name:"statec_population_grid",metadata:{is_queryable:!0,metadata_id:"3d252bbe-6491-4d22-b03b-d8070d863448",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_population_grid",imageType:"image/png",childLayers:[{name:"statec_population_grid__0"},{name:"statec_population_grid__1"},{name:"statec_population_grid__2"},{name:"statec_population_grid__3"},{name:"statec_population_grid__4"}]}],metadata:{},mixed:!0},{id:2719,name:"statec_census_group_nationalite",children:[{id:2613,name:"statec_census_etrangers",metadata:{is_queryable:!0,metadata_id:"45428d05-75c1-4eb9-93fd-9bbd7030be01",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_etrangers",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_etrangers__0"},{name:"statec_census_etrangers__1"}]},{id:2612,name:"statec_census_allemands",metadata:{is_queryable:!0,metadata_id:"e4a62561-3787-4cee-a28b-cd79975df871",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_allemands",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_allemands__0"},{name:"statec_census_allemands__6"}]},{id:2611,name:"statec_census_belges",metadata:{is_queryable:!0,metadata_id:"9d44ce99-10bf-40c6-b34f-2197aa78d0e3",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_belges",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_belges__0"},{name:"statec_census_belges__5"}]},{id:2609,name:"statec_census_francais",metadata:{is_queryable:!0,metadata_id:"eae3d241-9146-48f6-b1fb-cfd9d6ef8b45",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_francais",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_francais__0"},{name:"statec_census_francais__3"}]},{id:2610,name:"statec_census_italiens",metadata:{is_queryable:!0,metadata_id:"4906e802-8b67-4e46-8d32-daf5ee442d4c",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_italiens",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_italiens__0"},{name:"statec_census_italiens__4"}]},{id:2608,name:"statec_census_portugais",metadata:{is_queryable:!0,metadata_id:"2d0daf15-9519-4d10-af52-8fcda45a352c",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_portugais",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_portugais__0"},{name:"statec_census_portugais__2"}]}],metadata:{},mixed:!0},{id:2722,name:"statec_census_group_structure_urbaine",children:[{id:2715,name:"statec_census_nuclei",metadata:{is_queryable:!0,metadata_id:"7da8cd39-c078-4ed0-8015-49aef4b47aae",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_nuclei",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_nuclei__11"},{name:"statec_census_nuclei__10"},{name:"statec_census_nuclei__7"}]},{id:2717,name:"statec_census_degre_urbanisation",metadata:{is_queryable:!0,metadata_id:"409e0940-6c92-49a7-84b0-3b064cf41e30",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_degre_urbanisation",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_degre_urbanisation__7"},{name:"statec_census_degre_urbanisation__8"},{name:"statec_census_degre_urbanisation__2"},{name:"statec_census_degre_urbanisation__5"}]},{id:2718,name:"statec_census_evolution_poulation_grid",metadata:{is_queryable:!0,metadata_id:"3f7216af-0849-40cd-8c3a-de71065fd51b",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_census_evolution_poulation_grid",imageType:"image/png",style:"default",childLayers:[{name:"statec_census_evolution_poulation_grid__9"},{name:"statec_census_evolution_poulation_grid__8"},{name:"statec_census_evolution_poulation_grid__3"},{name:"statec_census_evolution_poulation_grid__4"}]}],metadata:{},mixed:!0},{id:2741,name:"statec_recensement_2011_langues",children:[{id:2735,name:"statec_rec_langue_lux",metadata:{is_queryable:!0,metadata_id:"f3e10304-cf5a-4578-b126-90474e40cdf5",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_lux",imageType:"image/png",childLayers:[{name:"statec_rec_langue_lux__3"},{name:"statec_rec_langue_lux__4"},{name:"statec_rec_langue_lux__7"}]},{id:2736,name:"statec_rec_langue_fr",metadata:{is_queryable:!0,metadata_id:"8f95bc60-c665-4429-b04e-afcd13580e9a",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_fr",imageType:"image/png",childLayers:[{name:"statec_rec_langue_fr__3"},{name:"statec_rec_langue_fr__4"},{name:"statec_rec_langue_fr__8"}]},{id:2737,name:"statec_rec_langue_all",metadata:{is_queryable:!0,metadata_id:"e6531436-b506-4229-a1fa-7f1e69a93e8f",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_all",imageType:"image/png",childLayers:[{name:"statec_rec_langue_all__3"},{name:"statec_rec_langue_all__4"},{name:"statec_rec_langue_all__9"}]},{id:2739,name:"statec_rec_langue_eng",metadata:{is_queryable:!0,metadata_id:"0a382635-e8e6-408a-a8f0-20c6a07c3913",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_eng",imageType:"image/png",childLayers:[{name:"statec_rec_langue_eng__3"},{name:"statec_rec_langue_eng__4"},{name:"statec_rec_langue_eng__11"}]},{id:2738,name:"statec_rec_langue_por",metadata:{is_queryable:!0,metadata_id:"54df3b86-a6cd-423e-aafa-8f24075f6402",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_por",imageType:"image/png",childLayers:[{name:"statec_rec_langue_por__3"},{name:"statec_rec_langue_por__4"},{name:"statec_rec_langue_por__10"}]},{id:2740,name:"statec_rec_langue_allo",metadata:{is_queryable:!0,metadata_id:"ae08301b-2fe3-4ed5-8dd4-45d94961e518",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_rec_langue_allo",imageType:"image/png",childLayers:[{name:"statec_rec_langue_allo__12"}]}],metadata:{},mixed:!0},{id:2772,name:"statec_recensement_2011_immigration",children:[{id:2773,name:"statec_nee_etr_pop_tot",children:[{id:2776,name:"statec_nee_etr_pop_tot_par_grid",metadata:{is_queryable:!0,metadata_id:"44f3db25-9487-4735-8148-2704fc5573d0",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_pop_tot_par_grid",imageType:"image/png",childLayers:[{name:"statec_nee_etr_pop_tot_par_grid__23"},{name:"statec_nee_etr_pop_tot_par_grid__28"},{name:"statec_nee_etr_pop_tot_par_grid__21"}]}],metadata:{},mixed:!0},{id:2774,name:"statec_nee_etr_region",children:[{id:2780,name:"statec_nee_etr_region_portugal",metadata:{is_queryable:!0,metadata_id:"0fedc058-9bcb-4abf-a32b-53af46b7b3fd",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_portugal",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_portugal__27"},{name:"statec_nee_etr_region_portugal__28"},{name:"statec_nee_etr_region_portugal__21"}]},{id:2778,name:"statec_nee_etr_region_UE",metadata:{is_queryable:!0,metadata_id:"ced2cc65-dac6-4804-ab9e-46673c3777d7",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_UE",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_UE__25"},{name:"statec_nee_etr_region_UE__28"},{name:"statec_nee_etr_region_UE__21"}]},{id:2779,name:"statec_nee_etr_region_hors_UE",metadata:{is_queryable:!0,metadata_id:"d7eb9236-facf-4130-a2e2-71d3962cb081",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_region_hors_UE",imageType:"image/png",childLayers:[{name:"statec_nee_etr_region_hors_UE__26"},{name:"statec_nee_etr_region_hors_UE__28"},{name:"statec_nee_etr_region_hors_UE__21"}]}],metadata:{},mixed:!0},{id:2775,name:"statec_nee_etr_duree_sejour",children:[{id:2781,name:"statec_nee_etr_duree_sejour_0_4",metadata:{is_queryable:!0,metadata_id:"bebdb67a-db53-4f21-9f55-8f6b9f6b8242",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_0_4",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_0_4__2"},{name:"statec_nee_etr_duree_sejour_0_4__0"}]},{id:2782,name:"statec_nee_etr_duree_sejour_5_10",metadata:{is_queryable:!0,metadata_id:"26468daa-2fb2-4285-9e29-ed9b5212f6d8",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_5_10",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_5_10__30"},{name:"statec_nee_etr_duree_sejour_5_10__28"},{name:"statec_nee_etr_duree_sejour_5_10__21"}]},{id:2783,name:"statec_nee_etr_duree_sejour_11_20",metadata:{is_queryable:!0,metadata_id:"f3d49e73-7c46-4dd2-961a-6a0ee484954f",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_11_20",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_11_20__31"},{name:"statec_nee_etr_duree_sejour_11_20__28"},{name:"statec_nee_etr_duree_sejour_11_20__21"}]},{id:2784,name:"statec_nee_etr_duree_sejour_plus_20",metadata:{is_queryable:!0,metadata_id:"7eaff321-ad4c-4134-8180-e5c8c61d4721",start_opacity:.7},dimensions:{},type:"WMS",layers:"statec_nee_etr_duree_sejour_plus_20",imageType:"image/png",childLayers:[{name:"statec_nee_etr_duree_sejour_plus_20__32"},{name:"statec_nee_etr_duree_sejour_plus_20__28"},{name:"statec_nee_etr_duree_sejour_plus_20__21"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2728,name:"statec_atlas_demographique_group",children:[{id:1546,name:"ad_org_territoriale",children:[{id:1547,name:"ad_org_terr_lux",children:[{id:1532,name:"ad_communes_cantons",metadata:{is_queryable:!0,legend_name:"ad:communes_cantons",metadata_id:"fbf159ad-4c67-40f4-9b40-547d1eb35642"},dimensions:{},type:"WMS",layers:"ad_communes_cantons",imageType:"image/png",style:"default",childLayers:[{name:"ad_communes_cantons__1"},{name:"ad_communes_cantons__0"}]},{id:1531,name:"ad_fusions_communes",metadata:{is_queryable:!0,legend_name:"ad:fusions_communes",metadata_id:"07ce11d6-1cc7-4e87-9d09-ceb89c39bfe1"},dimensions:{},type:"WMS",layers:"ad_fusions_communes",imageType:"image/png",style:"default",childLayers:[{name:"ad_fusions_communes__9"},{name:"ad_fusions_communes__10"},{name:"ad_fusions_communes__11"},{name:"ad_fusions_communes__12"},{name:"ad_fusions_communes__13"},{name:"ad_fusions_communes__14"},{name:"ad_fusions_communes__15"},{name:"ad_fusions_communes__0"}]},{id:1574,name:"ad_poles_urbains",metadata:{is_queryable:!0,legend_name:"ad:poles_urbains",metadata_id:"891c4e2b-8972-4fd7-a1aa-6330f6dafbf8"},dimensions:{},type:"WMS",layers:"ad_poles_urbains",imageType:"image/png",style:"default",childLayers:[{name:"ad_poles_urbains__17"},{name:"ad_poles_urbains__18"},{name:"ad_poles_urbains__19"},{name:"ad_poles_urbains__20"},{name:"ad_poles_urbains__21"},{name:"ad_poles_urbains__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1548,name:"ad_etat_population",children:[{id:1549,name:"ad_population_stock_evolution_densite",children:[{id:1575,name:"ad_population_commune_canton",children:[{id:1576,name:"ad_population_canton",metadata:{is_queryable:!0,legend_name:"ad:population_canton",metadata_id:"18ceedb6-1867-419f-ab92-11e9787782a0"},dimensions:{},type:"WMS",layers:"ad_population_canton",imageType:"image/png",style:"default",childLayers:[{name:"ad_population_canton__24"},{name:"ad_population_canton__0"}]},{id:1577,name:"ad_population_commune",metadata:{is_queryable:!0,legend_name:"ad:population_commune",metadata_id:"26308dad-cae4-4ba7-af9f-5585488efb9d"},dimensions:{},type:"WMS",layers:"ad_population_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_population_commune__23"},{name:"ad_population_commune__0"}]}],metadata:{},mixed:!0},{id:1550,name:"ad_evolution_pop_comm",children:[{id:1533,name:"ad_evol_pop_1981_2018",metadata:{is_queryable:!0,legend_name:"ad:accroissement:1981:2018",metadata_id:"bb9534dd-5a4c-4cfd-8733-90f4b4501379"},dimensions:{},type:"WMS",layers:"ad_evol_pop_1981_2018",imageType:"image/png",style:"default",childLayers:[{name:"ad_evol_pop_1981_2018__25"},{name:"ad_evol_pop_1981_2018__0"}]}],metadata:{},mixed:!0},{id:1551,name:"ad_densite_pop",children:[{id:1535,name:"ad_densite_pop_comm",metadata:{is_queryable:!0,legend_name:"ad:population_densite_commune",metadata_id:"1c6bd461-d2f8-4d87-ab8e-48291eb18cbd"},dimensions:{},type:"WMS",layers:"ad_densite_pop_comm",imageType:"image/png",style:"default",childLayers:[{name:"ad_densite_pop_comm__28"},{name:"ad_densite_pop_comm__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1552,name:"ad_rapport_hommes_femmes",children:[{id:1578,name:"ad_prop_femmes_comm_2018",metadata:{is_queryable:!0,legend_name:"ad:proportion_femmes",metadata_id:"4424bbe2-bb9b-4bab-b0fd-b754d833ce07"},dimensions:{},type:"WMS",layers:"ad_prop_femmes_comm_2018",imageType:"image/png",style:"default",childLayers:[{name:"ad_prop_femmes_comm_2018__29"},{name:"ad_prop_femmes_comm_2018__0"}]}],metadata:{},mixed:!0},{id:1554,name:"ad_etrangers_lieu_naissance",children:[{id:1545,name:"ad_part_etrangers_comm",children:[{id:1579,name:"ad_structure_pop_comm",metadata:{is_queryable:!0,legend_name:"ad:structure_population",metadata_id:"a12c27e9-37a5-4a1e-a98d-6cfccff42c21"},dimensions:{},type:"WMS",layers:"ad_structure_pop_comm",imageType:"image/png",style:"default",childLayers:[{name:"ad_structure_pop_comm__27"},{name:"ad_structure_pop_comm__0"}]}],metadata:{},mixed:!0},{id:1555,name:"ad_nationalites_commune_2018",children:[{id:1536,name:"ad_part_portugais_commune",metadata:{is_queryable:!0,legend_name:"ad:part_portugais",metadata_id:"78513942-ee02-43c1-bd56-a32e57688bf7"},dimensions:{},type:"WMS",layers:"ad_part_portugais_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_portugais_commune__34"},{name:"ad_part_portugais_commune__35"},{name:"ad_part_portugais_commune__0"}]},{id:1534,name:"ad_part_francais_commune",metadata:{is_queryable:!0,legend_name:"ad:part_francais",metadata_id:"aff2570e-da08-47a3-a943-a9d8b16bcebb"},dimensions:{},type:"WMS",layers:"ad_part_francais_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_francais_commune__36"},{name:"ad_part_francais_commune__37"},{name:"ad_part_francais_commune__0"}]},{id:1544,name:"ad_part_italiens_commune",metadata:{is_queryable:!0,legend_name:"ad:part_italiens",metadata_id:"c983db23-867c-40b0-8388-80a6bc35cc96"},dimensions:{},type:"WMS",layers:"ad_part_italiens_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_italiens_commune__38"},{name:"ad_part_italiens_commune__39"},{name:"ad_part_italiens_commune__0"}]},{id:1541,name:"ad_part_belges_commune",metadata:{is_queryable:!0,legend_name:"ad:part_belges",metadata_id:"9b2484d9-1085-43df-bab0-e1ada3a02fde"},dimensions:{},type:"WMS",layers:"ad_part_belges_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_belges_commune__40"},{name:"ad_part_belges_commune__41"},{name:"ad_part_belges_commune__0"}]},{id:1538,name:"ad_part_allemands_commune",metadata:{is_queryable:!0,legend_name:"ad:part_allemands",metadata_id:"0c638f13-5530-41fc-8f3b-68eba2cbf8db"},dimensions:{},type:"WMS",layers:"ad_part_allemands_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_allemands_commune__42"},{name:"ad_part_allemands_commune__43"},{name:"ad_part_allemands_commune__0"}]},{id:1543,name:"ad_part_UE28_commune",metadata:{is_queryable:!0,legend_name:"ad:part_ue28",metadata_id:"2e232af1-5a76-44ba-b793-2e891c4d2056"},dimensions:{},type:"WMS",layers:"ad_part_UE28_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_UE28_commune__44"},{name:"ad_part_UE28_commune__45"},{name:"ad_part_UE28_commune__0"}]},{id:1542,name:"ad_part_nonUE28_commune",metadata:{is_queryable:!0,legend_name:"ad:part_non_ue28",metadata_id:"448fb00f-a7e6-442e-bc45-4f4eb2ba57b8"},dimensions:{},type:"WMS",layers:"ad_part_nonUE28_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_nonUE28_commune__46"},{name:"ad_part_nonUE28_commune__47"},{name:"ad_part_nonUE28_commune__0"}]},{id:1537,name:"ad_part_africains_commune",metadata:{is_queryable:!0,legend_name:"ad:part_africains",metadata_id:"4cda15de-4bf7-442c-b4ea-cf9eb48132e2"},dimensions:{},type:"WMS",layers:"ad_part_africains_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_africains_commune__48"},{name:"ad_part_africains_commune__49"},{name:"ad_part_africains_commune__0"}]},{id:1539,name:"ad_part_americains_commune",metadata:{is_queryable:!0,legend_name:"ad:part_americains",metadata_id:"5b9181b3-29a1-41a6-a44a-9e54a8677efd"},dimensions:{},type:"WMS",layers:"ad_part_americains_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_americains_commune__50"},{name:"ad_part_americains_commune__51"},{name:"ad_part_americains_commune__0"}]},{id:1540,name:"ad_part_asiates_commune",metadata:{is_queryable:!0,legend_name:"ad:part_asiates",metadata_id:"8f83aa66-4b95-4632-90c3-164f591ad99d"},dimensions:{},type:"WMS",layers:"ad_part_asiates_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_part_asiates_commune__52"},{name:"ad_part_asiates_commune__53"},{name:"ad_part_asiates_commune__0"}]}],metadata:{},mixed:!0},{id:1580,name:"ad_lieu_naissance_lux_etr",children:[{id:1581,name:"ad_lieu_naissance_commune",metadata:{is_queryable:!0,legend_name:"ad:lieu_naissance",metadata_id:"34c8f0cb-08fd-41d9-8f6c-e0036e48a7a2"},dimensions:{},type:"WMS",layers:"ad_lieu_naissance_commune",imageType:"image/png",style:"default",childLayers:[{name:"ad_lieu_naissance_commune__54"},{name:"ad_lieu_naissance_commune__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1556,name:"ad_structure_age",children:[{id:1557,name:"ad_age_moyen",children:[{id:1561,name:"ad_age_moyen_femmes",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_femmes",metadata_id:"d371cccb-da30-4a98-9d6e-1b0a6cb43e84"},dimensions:{},type:"WMS",layers:"ad_age_moyen_femmes",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_femmes__3"},{name:"ad_age_moyen_femmes__0"}]},{id:1562,name:"ad_age_moyen_hommes",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_hommes",metadata_id:"6448bc58-c7a2-483e-8fef-381bcd24c007"},dimensions:{},type:"WMS",layers:"ad_age_moyen_hommes",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_hommes__4"},{name:"ad_age_moyen_hommes__0"}]},{id:1563,name:"ad_age_moyen_2",metadata:{is_queryable:!0,legend_name:"ad:age_moyen_2",metadata_id:"d5e02e7a-859e-445e-984f-c88cc03f107e"},dimensions:{},type:"WMS",layers:"ad_age_moyen_2",imageType:"image/png",style:"default",childLayers:[{name:"ad_age_moyen_2__5"},{name:"ad_age_moyen_2__0"}]}],metadata:{},mixed:!0},{id:1558,name:"ad_proportion_classes_age",children:[{id:1564,name:"ad_moins20",metadata:{is_queryable:!0,legend_name:"ad:age_moins20",metadata_id:"5834d06d-316a-41e8-823d-68e522b77550"},dimensions:{},type:"WMS",layers:"ad_moins20",imageType:"image/png",style:"default",childLayers:[{name:"ad_moins20__7"},{name:"ad_moins20__0"}]},{id:1565,name:"ad_20_64",metadata:{is_queryable:!0,legend_name:"ad:age_20_64",metadata_id:"8d1624c9-9c5e-4131-8ebe-4989a1214be1"},dimensions:{},type:"WMS",layers:"ad_20_64",imageType:"image/png",style:"default",childLayers:[{name:"ad_20_64__8"},{name:"ad_20_64__0"}]},{id:1566,name:"ad_65plus",metadata:{is_queryable:!0,legend_name:"ad:age_65plus",metadata_id:"e263aee4-2f0f-454c-84d5-7abd64406211"},dimensions:{},type:"WMS",layers:"ad_65plus",imageType:"image/png",style:"default",childLayers:[{name:"ad_65plus__9"},{name:"ad_65plus__0"}]}],metadata:{},mixed:!0},{id:1559,name:"ad_proportion_jeunes",children:[{id:1567,name:"ad_moins3",metadata:{is_queryable:!0,legend_name:"ad:age_moin3",metadata_id:"e270926d-1f82-42c5-be80-c8f0d551e52c"},dimensions:{},type:"WMS",layers:"ad_moins3",imageType:"image/png",style:"default",childLayers:[{name:"ad_moins3__11"},{name:"ad_moins3__0"}]},{id:1568,name:"ad_3_5",metadata:{is_queryable:!0,legend_name:"ad:age_3_5",metadata_id:"68791225-c16c-45c8-ba06-fa88be4ef4e0"},dimensions:{},type:"WMS",layers:"ad_3_5",imageType:"image/png",style:"default",childLayers:[{name:"ad_3_5__12"},{name:"ad_3_5__0"}]},{id:1569,name:"ad_6_10",metadata:{is_queryable:!0,legend_name:"ad:age_6_10",metadata_id:"2e54caf6-b57c-4da5-855e-0dd521518862"},dimensions:{},type:"WMS",layers:"ad_6_10",imageType:"image/png",style:"default",childLayers:[{name:"ad_6_10__13"},{name:"ad_6_10__0"}]},{id:1570,name:"ad_11_17",metadata:{is_queryable:!0,legend_name:"ad:age_11_17",metadata_id:"cc51e192-a9b7-4d2f-9406-4ed6639280ed"},dimensions:{},type:"WMS",layers:"ad_11_17",imageType:"image/png",style:"default",childLayers:[{name:"ad_11_17__14"},{name:"ad_11_17__0"}]}],metadata:{},mixed:!0},{id:1560,name:"ad_proportion_ages",children:[{id:1571,name:"ad_65_74",metadata:{is_queryable:!0,legend_name:"ad:age_65_74",metadata_id:"fb59a479-3177-417b-a905-bff71f9eb335"},dimensions:{},type:"WMS",layers:"ad_65_74",imageType:"image/png",style:"default",childLayers:[{name:"ad_65_74__16"},{name:"ad_65_74__0"}]},{id:1572,name:"ad_75_89",metadata:{is_queryable:!0,legend_name:"ad:age_75_89",metadata_id:"ee4a9399-501f-4a1f-93b0-d3827d3dd016"},dimensions:{},type:"WMS",layers:"ad_75_89",imageType:"image/png",style:"default",childLayers:[{name:"ad_75_89__17"},{name:"ad_75_89__0"}]},{id:1573,name:"ad_90plus",metadata:{is_queryable:!0,legend_name:"ad:age_90plus",metadata_id:"c859f388-6e37-49c5-bc23-404703ad9215"},dimensions:{},type:"WMS",layers:"ad_90plus",imageType:"image/png",style:"default",childLayers:[{name:"ad_90plus__18"},{name:"ad_90plus__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1589,name:"ad_rapport_dependance",children:[{id:1582,name:"ad_rapport_dependance_personnes_agees",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_ages",metadata_id:"b739896e-28cb-471b-afc8-4c9d8a36fcf5"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_personnes_agees",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_personnes_agees__19"},{name:"ad_rapport_dependance_personnes_agees__0"}]},{id:1583,name:"ad_rapport_dependance_jeunes",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_jeunes",metadata_id:"711df835-4cf0-4557-80dc-67c7c18d5f3c"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_jeunes",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_jeunes__20"},{name:"ad_rapport_dependance_jeunes__0"}]},{id:1584,name:"ad_rapport_dependance_total",metadata:{is_queryable:!0,legend_name:"ad:rapport_dependance_total",metadata_id:"b898fae0-2073-4cc2-88b4-a4851e93e16f"},dimensions:{},type:"WMS",layers:"ad_rapport_dependance_total",imageType:"image/png",style:"default",childLayers:[{name:"ad_rapport_dependance_total__21"},{name:"ad_rapport_dependance_total__0"}]}],metadata:{},mixed:!0},{id:1590,name:"ad_situation_matrimoniale",children:[{id:1585,name:"ad_celibataires",metadata:{is_queryable:!0,legend_name:"ad:celibataires",metadata_id:"40c3ab92-f09b-4722-b401-a6a271f083a4"},dimensions:{},type:"WMS",layers:"ad_celibataires",imageType:"image/png",style:"default",childLayers:[{name:"ad_celibataires__23"},{name:"ad_celibataires__0"}]},{id:1586,name:"ad_maries_pacses",metadata:{is_queryable:!0,legend_name:"ad:maries",metadata_id:"764c6af3-bc24-43a6-9741-d3e4f7cf83bb"},dimensions:{},type:"WMS",layers:"ad_maries_pacses",imageType:"image/png",style:"default",childLayers:[{name:"ad_maries_pacses__24"},{name:"ad_maries_pacses__0"}]},{id:1587,name:"ad_divorces_separes",metadata:{is_queryable:!0,legend_name:"ad:divorces",metadata_id:"7eb6a7f9-1419-4b34-adbc-fecaef5b5954"},dimensions:{},type:"WMS",layers:"ad_divorces_separes",imageType:"image/png",style:"default",childLayers:[{name:"ad_divorces_separes__25"},{name:"ad_divorces_separes__0"}]},{id:1588,name:"ad_veufs_veuves",metadata:{is_queryable:!0,legend_name:"ad:veufs",metadata_id:"e17b3af4-b31b-47ec-9a38-c01e8d3ccb30"},dimensions:{},type:"WMS",layers:"ad_veufs_veuves",imageType:"image/png",style:"default",childLayers:[{name:"ad_veufs_veuves__26"},{name:"ad_veufs_veuves__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1591,name:"ad_mouvement_population",children:[{id:1592,name:"ad_naissances",children:[{id:1597,name:"ad_naissances_taux_natalite",metadata:{is_queryable:!0,legend_name:"ad:naissances_taux_natalite",metadata_id:"9930d837-0412-47a3-bca1-711cdd61af6a"},dimensions:{},type:"WMS",layers:"ad_naissances_taux_natalite",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_taux_natalite__4"},{name:"ad_naissances_taux_natalite__5"},{name:"ad_naissances_taux_natalite__0"}]},{id:1598,name:"ad_naissances_mariage",metadata:{is_queryable:!0,legend_name:"ad:naissances_mariage",metadata_id:"535ff8a9-86b6-486d-8a68-2e73e0c7a979"},dimensions:{},type:"WMS",layers:"ad_naissances_mariage",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_mariage__7"},{name:"ad_naissances_mariage__0"}]},{id:1599,name:"ad_naissances_age_maternite",metadata:{is_queryable:!0,legend_name:"ad:naissances_age_maternite",metadata_id:"75a40efe-456c-4f72-8ce7-ea860143ea29"},dimensions:{},type:"WMS",layers:"ad_naissances_age_maternite",imageType:"image/png",style:"default",childLayers:[{name:"ad_naissances_age_maternite__9"},{name:"ad_naissances_age_maternite__0"}]}],metadata:{},mixed:!0},{id:1593,name:"ad_deces",children:[{id:1600,name:"ad_deces_taux_mortalite",metadata:{is_queryable:!0,legend_name:"ad:deces_taux_mortalite",metadata_id:"68b8de6b-b71f-4f93-9d07-150181d2dfba"},dimensions:{},type:"WMS",layers:"ad_deces_taux_mortalite",imageType:"image/png",style:"default",childLayers:[{name:"ad_deces_taux_mortalite__12"},{name:"ad_deces_taux_mortalite__13"},{name:"ad_deces_taux_mortalite__0"}]}],metadata:{},mixed:!0},{id:1594,name:"ad_solde_naturel",children:[{id:1601,name:"ad_solde_naturel_nombre_absolu",metadata:{is_queryable:!0,legend_name:"ad:solde_naturel",metadata_id:"7a2fd409-5e34-48b6-89a1-83d14b519dff"},dimensions:{},type:"WMS",layers:"ad_solde_naturel_nombre_absolu",imageType:"image/png",style:"default",childLayers:[{name:"ad_solde_naturel_nombre_absolu__16"},{name:"ad_solde_naturel_nombre_absolu__17"},{name:"ad_solde_naturel_nombre_absolu__18"},{name:"ad_solde_naturel_nombre_absolu__0"}]}],metadata:{},mixed:!0},{id:1595,name:"ad_migrations",children:[{id:1603,name:"ad_migrations_solde_interne",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde",metadata_id:"2d500aa2-fe45-4a07-ab9f-506b11153744"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_interne",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_interne__21"},{name:"ad_migrations_solde_interne__22"},{name:"ad_migrations_solde_interne__23"},{name:"ad_migrations_solde_interne__0"}]},{id:1604,name:"ad_migrations_solde_international",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde_international",metadata_id:"48795eb2-baf4-4f60-bb41-bed3b7dac520"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_international",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_international__25"},{name:"ad_migrations_solde_international__26"},{name:"ad_migrations_solde_international__27"},{name:"ad_migrations_solde_international__0"}]},{id:1605,name:"ad_migrations_solde_total",metadata:{is_queryable:!0,legend_name:"ad:migrations_solde_total",metadata_id:"27cdcc17-8190-4381-94df-e06dcbe7808a"},dimensions:{},type:"WMS",layers:"ad_migrations_solde_total",imageType:"image/png",style:"default",childLayers:[{name:"ad_migrations_solde_total__29"},{name:"ad_migrations_solde_total__30"},{name:"ad_migrations_solde_total__31"},{name:"ad_migrations_solde_total__0"}]}],metadata:{},mixed:!0},{id:1596,name:"ad_mariages",children:[{id:1606,name:"ad_mariages_taux_nuptialite",metadata:{is_queryable:!0,legend_name:"ad:mariages_taux_nuptialite",metadata_id:"25192002-b1b7-49fd-a0d7-b83642c07c68"},dimensions:{},type:"WMS",layers:"ad_mariages_taux_nuptialite",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariages_taux_nuptialite__34"},{name:"ad_mariages_taux_nuptialite__35"},{name:"ad_mariages_taux_nuptialite__0"}]},{id:1607,name:"ad_mariages_age_femme",metadata:{is_queryable:!0,legend_name:"ad:mariages_age_femmes",metadata_id:"727febc6-600f-425c-a8d6-1349890f5e31"},dimensions:{},type:"WMS",layers:"ad_mariages_age_femme",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariages_age_femme__37"},{name:"ad_mariages_age_femme__0"}]},{id:1608,name:"ad_mariage_age_hommes",metadata:{is_queryable:!0,legend_name:"ad:mariages_age_homme",metadata_id:"e7334b68-11fe-430f-95d5-d2f792d24011"},dimensions:{},type:"WMS",layers:"ad_mariage_age_hommes",imageType:"image/png",style:"default",childLayers:[{name:"ad_mariage_age_hommes__38"},{name:"ad_mariage_age_hommes__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1602,name:"ad_langues_lux",children:[{id:1616,name:"ad_langue_principale_2018",children:[{id:1609,name:"ad_langues_luxembourgeois",metadata:{is_queryable:!0,legend_name:"ad:langues_lux",metadata_id:"665006fe-aaff-40d3-8adc-76f41909a2cf"},dimensions:{},type:"WMS",layers:"ad_langues_luxembourgeois",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_luxembourgeois__42"},{name:"ad_langues_luxembourgeois__43"},{name:"ad_langues_luxembourgeois__0"}]},{id:1610,name:"ad_langues_francais",metadata:{is_queryable:!0,legend_name:"ad:langues_francais",metadata_id:"207b92c0-6479-4bbc-b8a3-3ddef53d3029"},dimensions:{},type:"WMS",layers:"ad_langues_francais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_francais__45"},{name:"ad_langues_francais__46"},{name:"ad_langues_francais__0"}]},{id:1611,name:"ad_langues_allemand",metadata:{is_queryable:!0,legend_name:"ad:langues_allemand",metadata_id:"2fbdab89-6330-426c-af00-a1ce4b6294f5"},dimensions:{},type:"WMS",layers:"ad_langues_allemand",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_allemand__48"},{name:"ad_langues_allemand__49"},{name:"ad_langues_allemand__0"}]},{id:1612,name:"ad_langues_portugais",metadata:{is_queryable:!0,legend_name:"ad:langues_portugais",metadata_id:"a0efcf68-9445-4d39-8193-a6f9cebf500b"},dimensions:{},type:"WMS",layers:"ad_langues_portugais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_portugais__51"},{name:"ad_langues_portugais__52"},{name:"ad_langues_portugais__0"}]},{id:1613,name:"ad_langues_italien",metadata:{is_queryable:!0,legend_name:"ad:langues_italien",metadata_id:"aa83ba2b-297e-4d1a-9dbf-00853a3a01bd"},dimensions:{},type:"WMS",layers:"ad_langues_italien",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_italien__54"},{name:"ad_langues_italien__55"},{name:"ad_langues_italien__0"}]},{id:1614,name:"ad_langues_anglais",metadata:{is_queryable:!0,legend_name:"ad:langues_anglais",metadata_id:"2fef731d-4c11-4c56-be6c-69b2f800931d"},dimensions:{},type:"WMS",layers:"ad_langues_anglais",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_anglais__57"},{name:"ad_langues_anglais__58"},{name:"ad_langues_anglais__0"}]},{id:1615,name:"ad_langues_autre",metadata:{is_queryable:!0,legend_name:"ad:langues_autre",metadata_id:"6c87f276-7219-4507-b4ba-a7f8a2378856"},dimensions:{},type:"WMS",layers:"ad_langues_autre",imageType:"image/png",style:"default",childLayers:[{name:"ad_langues_autre__60"},{name:"ad_langues_autre__61"},{name:"ad_langues_autre__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:818,name:"API_ONLY",icon:"main",children:[{id:2841,name:"Couches populaires",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:262,name:"cadastre",metadata:{exclusion:"[1,11,21,31,32,33,34,35,36,37,38,39,51,52,53,54,55,56,57,58,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115]",is_queryable:!0,legend_name:"pcn_parcelles:show",metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2050"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"cadastre",imageType:"image/png"},{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:698,name:"pag_pag",metadata:{is_queryable:!0,legend_name:"pag",linked_layers:["697","696","1366","709","710"],max_dpi:128,metadata_id:"12c67295-d150-430f-aa28-fa004ecba3c7",start_opacity:.7},dimensions:{},type:"WMS",layers:"pag_pag",imageType:"image/png",style:"default",childLayers:[{name:"pag_pag__28"},{name:"pag_pag__27"},{name:"pag_pag__26"},{name:"pag_pag__25"},{name:"pag_pag__24"},{name:"pag_pag__23"},{name:"pag_pag__22"},{name:"pag_pag__21"},{name:"pag_pag__20"},{name:"pag_pag__19"},{name:"pag_pag__18"},{name:"pag_pag__17"},{name:"pag_pag__16"},{name:"pag_pag__15"},{name:"pag_pag__14"},{name:"pag_pag__13"},{name:"pag_pag__12"},{name:"pag_pag__11"},{name:"pag_pag__9"},{name:"pag_pag__8"},{name:"pag_pag__7"},{name:"pag_pag__6"},{name:"pag_pag__202"},{name:"pag_pag__5"},{name:"pag_pag__200"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:2811,name:"tour_randonnee_all",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_randonnee_all",imageType:"image/png",style:"default",childLayers:[{name:"tour_randonnee_all__category"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:245,name:"env_zones_protegees",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2114,name:"eau_Hochwassergefahrenkarten_2021",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2118,name:"eau_Hochwassergefahrenkarten_HQ100_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cdb4137d-822f-4888-8a51-4596480970fe"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ100_2021",imageType:"image/png"},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{is_expanded:!0},mixed:!0},{id:2846,name:"Couches récentes",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2812,name:"aev_pacte_climat_2023",metadata:{is_queryable:!0,legend_name:"aev:klimapakt2023",metadata_id:"223a6d2c-ac2c-4b95-9beb-900fd9b3e168"},dimensions:{},type:"WMS",layers:"aev_pacte_climat_2023",imageType:"image/png",style:"default",childLayers:[{name:"aev_pacte_climat_2023__10"}]},{id:2794,name:"eau_restrictions_forages_prives_prelevement",metadata:{legend_name:"eau:restrictions_nouveaux_forages_prives",metadata_id:"b2f60fc1-c2e8-4472-a8e2-4e11a862b257"},dimensions:{},type:"WMS",layers:"eau_restrictions_forages_prives_prelevement",imageType:"image/png",style:"default",childLayers:[{name:"eau_restrictions_forages_prives_prelevement__475"}]}],metadata:{is_expanded:!1},mixed:!0},{id:820,name:"API_ONLY_LAYERS",children:[{id:1363,name:"reagis",metadata:{is_queryable:!0,metadata_id:"aafa412b-a2df-428e-a6d2-19a5774c8000"},dimensions:{},type:"WMS",layers:"reagis",imageType:"image/png",style:"dfault",childLayers:[{name:"reagis__POI"}]},{id:1375,name:"makerspaces",metadata:{is_queryable:!0,metadata_id:"4344ba7d-463c-499f-8a15-29e8baf46d9a"},dimensions:{},type:"WMS",layers:"makerspaces",imageType:"image/png",style:"default",childLayers:[{name:"makerspaces__POI"}]},{id:1376,name:"parcels_daily",metadata:{is_queryable:!0,metadata_id:"205a55db-473d-4f0e-8fbb-265dcb4dd8e2"},dimensions:{},type:"WMS",layers:"parcels_daily",imageType:"image/png",style:"default",childLayers:[{name:"parcels_daily__PARCELLES"}]},{id:1459,name:"OSM_MQ",metadata:{attribution:'&copy; <a href="https://www.mapzen.com/rights">CARTO</a>  &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg',metadata_id:"537f7a04-3d75-4f03-9ac4-7212ad78219c"},dimensions:{},type:"WMS",layers:"OSM_MQ",imageType:"image/png",style:"default",childLayers:[{name:"OSM_MQ__category"}]},{id:1798,name:"sante_infrastructures_covid19",metadata:{is_queryable:!0,legend_name:"sante_infrastructures_covid19",metadata_id:"3f86620b-cb97-49fb-a363-898575f6628c",start_opacity:.9},dimensions:{},type:"WMS",layers:"1798",imageType:"image/png",style:"default",childLayers:[{name:"sante_infrastructures_covid19__POI"}]},{id:1800,name:"sip_theatres",metadata:{is_queryable:!0,metadata_id:"6745d7eb-93e3-4f55-be5f-2286903e46f0",start_opacity:.9},dimensions:{},type:"WMS",layers:"1800",imageType:"image/png",style:"default",childLayers:[{name:"sip_theatres__POI"}]},{id:1960,name:"stations_sps_Lux",metadata:{},dimensions:{},type:"WMS",layers:"1078",imageType:"image/png",style:"default",childLayers:[{name:"stations_sps_Lux__POI"}]},{id:2575,name:"asta_uferrandstreifen",metadata:{is_queryable:!0,metadata_id:"b8f5042b-793f-4d78-a96a-b9a7c8837c7c"},dimensions:{},type:"WMS",layers:"asta_uferrandstreifen",imageType:"image/png",childLayers:[{name:"asta_uferrandstreifen__0"}]},{id:2709,name:"geo_carte_geol_harmonisee_forage_virtuel",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",return_clicked_point:"true"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_forage_virtuel",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_forage_virtuel__6"},{name:"geo_carte_geol_harmonisee_forage_virtuel__1"},{name:"geo_carte_geol_harmonisee_forage_virtuel__2"},{name:"geo_carte_geol_harmonisee_forage_virtuel__3"}]},{id:2710,name:"meteolux_meteo_en_europe",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"meteolux_meteo_en_europe",imageType:"image/png",style:"default",childLayers:[{name:"meteolux_meteo_en_europe__0"}]},{id:2711,name:"meteolux_meteo_gr",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"meteolux_meteo_gr",imageType:"image/png",style:"default",childLayers:[{name:"meteolux_meteo_gr__1"}]},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:2825,name:"geoportail_minecraft_exports",metadata:{is_queryable:!0,metadata_id:"0fedc058-9bcb-4abf-a32b-53af46b7b3fd",start_opacity:.7},dimensions:{},type:"WMS",layers:"geoportail_minecraft_exports",imageType:"image/png",childLayers:[{name:"geoportail_minecraft_exports__0"}]},{id:2836,name:"map_new-geoportail-lu-roadmap",metadata:{},dimensions:{},type:"WMTS",url:"https://maptiler.geoportail.lu/api/maps/new-geoportail-lu-roadmap/WMTSCapabilities.xml",style:"default",matrixSet:"map_new-geoportail-lu-roadmap",layer:"map_new-geoportail-lu-roadmap",imageType:"image/jpeg"},{id:2842,name:"test_sproochatlas_audio",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"test_sproochatlas_audio",imageType:"image/png",style:"default",childLayers:[{name:"test_sproochatlas_audio__1"},{name:"test_sproochatlas_audio__2"},{name:"test_sproochatlas_audio__23"},{name:"test_sproochatlas_audio__24"},{name:"test_sproochatlas_audio__25"}]},{id:2868,name:"aev_enoise_hotspots_2021_major_roads",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_major_roads",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_major_roads__9"}]},{id:2869,name:"aev_enoise_hotspots_2021_major_railways",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_major_railways",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_major_railways__8"}]},{id:2870,name:"aev_enoise_hotspots_2021_agglo_lux",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_agglo_lux",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_agglo_lux__7"}]},{id:2871,name:"aev_enoise_hotspots_2021_agglo_sud",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_hotspots_2021_agglo_sud",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_hotspots_2021_agglo_sud__6"}]},{id:2872,name:"aev_enoise_batiments_sensibles_2021",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"aev_enoise_batiments_sensibles_2021",imageType:"image/png",style:"default",childLayers:[{name:"aev_enoise_batiments_sensibles_2021__12"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{ol3d_options:{cesium3DTileStyle:{show:"${id} !== 'gml1c41b6db-cb10-4593-9eed-62b660c786b9' && ${id} !== 'gml6a0ef1e9-a3f5-4962-84b0-e776b0eb9b21'"}}}},{id:1732,name:"logement",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1733,name:"log_prix",children:[{id:1734,name:"log_prix_app",children:[{id:1739,name:"log_prix_app_existants",metadata:{is_queryable:!0,legend_name:"logt_prix_app_exist",metadata_id:"9679921a-f90e-4d26-9918-96e66225a171"},dimensions:{},type:"WMS",layers:"log_prix_app_existants",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_existants__21"}]},{id:1740,name:"log_prix_app_en_construction",metadata:{is_queryable:!0,legend_name:"logt_prix_app_enconstruction",metadata_id:"bbb36662-64ba-4d2e-a9a4-7ab00d0bb264"},dimensions:{},type:"WMS",layers:"log_prix_app_en_construction",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_app_en_construction__20"}]}],metadata:{},mixed:!0},{id:1735,name:"log_loyers",children:[{id:1741,name:"log_loyers_app",metadata:{is_queryable:!0,legend_name:"logt_loyers_app",metadata_id:"2c3dc437-77ac-4030-a8d0-f61fd12e8f5e"},dimensions:{},type:"WMS",layers:"log_loyers_app",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_app__18"}]},{id:1742,name:"log_loyers_maisons",metadata:{is_queryable:!0,legend_name:"logt_loyers_maisons",metadata_id:"f914e59b-6684-4a94-b5ec-b5a782708371"},dimensions:{},type:"WMS",layers:"log_loyers_maisons",imageType:"image/png",style:"default",childLayers:[{name:"log_loyers_maisons__17"}]}],metadata:{},mixed:!0},{id:1736,name:"log_prix_terrains",children:[{id:1743,name:"log_prix_median_terrain_15_17",metadata:{is_queryable:!0,legend_name:"logt_prix_median_terrain",metadata_id:"3d5b4a58-3817-41fe-b2db-9310fa605635"},dimensions:{},type:"WMS",layers:"log_prix_median_terrain_15_17",imageType:"image/png",style:"default",childLayers:[{name:"log_prix_median_terrain_15_17__14"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1737,name:"log_potentiel_foncier",children:[{id:1744,name:"log_superficie_2016",metadata:{is_queryable:!0,legend_name:"logt_superficie_dispo",metadata_id:"c3fb1ec8-10d3-4e2b-9272-bb0a7396cdb5"},dimensions:{},type:"WMS",layers:"log_superficie_2016",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_2016__12"}]},{id:1745,name:"log_superficie_selon_type_2016",metadata:{is_queryable:!0,legend_name:"logt_superficie_selon_type",metadata_id:"8c6408ca-4195-4cf0-b4bc-8c095f372c42"},dimensions:{},type:"WMS",layers:"log_superficie_selon_type_2016",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_selon_type_2016__11"}]}],metadata:{},mixed:!0},{id:1738,name:"log_consommation_fonciere",children:[{id:1746,name:"log_superficie_consommee",metadata:{is_queryable:!0,legend_name:"logt_superficie_consommee",metadata_id:"6766fa1f-26fe-402b-9f21-e3d6e903f13b"},dimensions:{},type:"WMS",layers:"log_superficie_consommee",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_consommee__9"}]},{id:1747,name:"log_superficie_reconstruite",metadata:{is_queryable:!0,legend_name:"logt_superficie_reconstruite",metadata_id:"ea8570b2-f85b-4445-a5d1-a63ac01fa2c1"},dimensions:{},type:"WMS",layers:"log_superficie_reconstruite",imageType:"image/png",style:"default",childLayers:[{name:"log_superficie_reconstruite__8"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1833,name:"energie",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1842,name:"energie_solaire_group",children:[{id:1821,name:"myenergy_solarkataster",children:[{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]},{id:1819,name:"myenergy_solarkataster_luxemburg_feed_in_potential",metadata:{is_queryable:!0,legend_name:"energie:tarifs_injection",metadata_id:"23e8adfb-b628-4a4f-89ea-0f057baf6ec8",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857"},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_feed_in_potential",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_feed_in_potential__st_luxemburg_22_feed_in_potential"}]},{id:1818,name:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp",metadata:{is_queryable:!0,legend_name:"energie:toitures",metadata_id:"a16c315e-abae-4904-95bc-90199393e8ae",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857"},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_roofs_above_30_kWp__st_luxemburg_22_roofs_above_30_kWp"}]},{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:1690,name:"Analyse Ensoleillement",children:[{id:1806,name:"Ensoleillement au 15.02",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.02",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.02__15"}]},{id:1683,name:"Ensoleillement au 15.05",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"ece9ef19-b1ff-4acc-9d19-c00f7233d648"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.05",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.05__16"}]},{id:1682,name:"Ensoleillement au 15.08",metadata:{is_queryable:!0,legend_name:"uf:ensoleillement_fr",metadata_id:"89b63cab-2220-4b00-abd5-2bfbe35352cd"},dimensions:{},type:"WMS",layers:"Ensoleillement au 15.08",imageType:"image/png",style:"default",childLayers:[{name:"Ensoleillement au 15.08__17"}]}],metadata:{legend_name:"uf:solar_hiver",metadata_id:"15446cbb-82d8-4d68-b049-a0ad24ae670e"},mixed:!0}],metadata:{},mixed:!0},{id:1843,name:"energie_eolienne_group",children:[{id:1360,name:"aev_emplacements_eoliennes",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:02:39.4998465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"5e739028d2bfb222b781c722",is_queryable:!0,legend_name:"aev:eoliennes",metadata_id:"354c5313-a733-4121-8f0d-5e0932d563b7"},dimensions:{},type:"WMS",layers:"aev_emplacements_eoliennes",imageType:"image/png",style:"default",childLayers:[{name:"aev_emplacements_eoliennes__2"}]}],metadata:{},mixed:!0},{id:1835,name:"ilr_energie_group",children:[{id:2473,name:"ilr_energie_canton_commune",children:[{id:1836,name:"ilr_energie_biogas",metadata:{is_queryable:!0,legend_name:"energie:ilr:biogaz",metadata_id:"3caf3f4a-f492-4635-8c8e-b1b7ad37ae24-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_biogas",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_biogas__1"},{name:"ilr_energie_biogas__2"},{name:"ilr_energie_biogas__0"}]},{id:1837,name:"ilr_energie_biomasse",metadata:{is_queryable:!0,legend_name:"energie:ilr:biomasse",metadata_id:"021ba8d1-2af9-45b7-8e30-c461ae56416a",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_biomasse",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_biomasse__3"},{name:"ilr_energie_biomasse__4"},{name:"ilr_energie_biomasse__0"}]},{id:1838,name:"ilr_energie_cogeneration",metadata:{is_queryable:!0,legend_name:"energie:ilr:cogeneration",metadata_id:"71a854b4-010d-48a4-acc1-8eddc2bb87c1-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_cogeneration",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_cogeneration__5"},{name:"ilr_energie_cogeneration__6"},{name:"ilr_energie_cogeneration__0"}]},{id:1839,name:"ilr_energie_eolienne",metadata:{is_queryable:!0,legend_name:"energie:ilr:eolienne",metadata_id:"97ce42fc-848c-4c1c-a361-61a9736ae97f-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_eolienne",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_eolienne__7"},{name:"ilr_energie_eolienne__8"},{name:"ilr_energie_eolienne__0"}]},{id:1840,name:"ilr_energie_hydroelectrique",metadata:{is_queryable:!0,legend_name:"energie:ilr:hydroelectrique",metadata_id:"a96e0c84-8dcc-49af-a753-7321072aa198-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_hydroelectrique",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_hydroelectrique__9"},{name:"ilr_energie_hydroelectrique__10"},{name:"ilr_energie_hydroelectrique__0"}]},{id:1841,name:"ilr_energie_photovoltaique",metadata:{is_queryable:!0,legend_name:"energie:ilr:solaire",metadata_id:"1bd8193e-5728-4020-be60-9677f3a2c2d6-intranet",start_opacity:.7},dimensions:{},type:"WMS",layers:"ilr_energie_photovoltaique",imageType:"image/png",style:"default",childLayers:[{name:"ilr_energie_photovoltaique__11"},{name:"ilr_energie_photovoltaique__12"},{name:"ilr_energie_photovoltaique__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1847,name:"energie_disponibilite",children:[{id:1494,name:"gaz_naturel",metadata:{is_queryable:!0,legend_name:"gaz",metadata_id:"9e04e366-fcb7-4836-8d09-41b20f280cb0",start_opacity:.75},dimensions:{},type:"WMS",layers:"gaz_naturel",imageType:"image/png",style:"default",childLayers:[{name:"gaz_naturel__1"},{name:"gaz_naturel__3"}]}],metadata:{},mixed:!0},{id:1845,name:"electromobilite_group",children:[{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:2707,name:"mmtp_electromobilite_AC",metadata:{is_queryable:!0,metadata_id:"08885ef4-d534-47d4-8b93-2883c71a8452"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_AC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_AC__0"}]},{id:2708,name:"mmtp_electromobilite_DC",metadata:{is_queryable:!0,metadata_id:"624d34e4-1192-40bb-871a-e6c8720d766b"},dimensions:{},type:"WMS",layers:"mmtp_electromobilite_DC",imageType:"image/png",style:"default",childLayers:[{name:"mmtp_electromobilite_DC__2"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:1834,name:"np_our",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1860,name:"npour_basisdaten",children:[{id:1861,name:"npour_basisdaten_verwaltungseinheiten",children:[{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:744,name:"tour_ort",metadata:{is_queryable:!0,metadata_id:"44dbfde5-664e-4e45-8802-3d60b52eb9cb",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_ort",imageType:"image/png",style:"default",childLayers:[{name:"tour_ort__3"}]},{id:746,name:"tour_leader",metadata:{is_queryable:!0,metadata_id:"a48aec89-7341-459e-a7d3-0e572982b255",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_leader",imageType:"image/png",style:"default",childLayers:[{name:"tour_leader__0"}]},{id:747,name:"tour_parcsnaturels",metadata:{is_queryable:!0,legend_name:"parcnaturel",metadata_id:"f519c4e7-4459-49b5-b8c1-569328252d44",start_opacity:.7},dimensions:{},type:"WMS",layers:"tour_parcnaturels",imageType:"image/png",style:"default",childLayers:[{name:"tour_parcsnaturels__4"}]}],metadata:{},mixed:!0},{id:1862,name:"npour_basisdaten_adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0},{id:1863,name:"npour_basisdaten_topo",children:[{id:223,name:"topo_250k",metadata:{metadata_id:"e1f601a5-ed8f-4043-8719-0cad50cbb483"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_250k",imageType:"image/png"},{id:1730,name:"topo_100k_2019",metadata:{legend_name:"topo_100k_sans_tour",metadata_id:"ce051f08-bca6-43c0-af7b-5fcf3e02376e"},dimensions:{},type:"WMS",layers:"topo_100k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_100k_2019__topo_100k"}]},{id:1727,name:"topo_50k_2019",metadata:{legend_name:"topo_50k_sans_tour",metadata_id:"abc505e1-224c-455e-9e7f-4f094eb4e7b0"},dimensions:{},type:"WMS",layers:"topo_50k_2019",imageType:"image/png",style:"default",childLayers:[{name:"topo_50k_2019__50K-2019-LUX_avec_ETRANGER"}]},{id:206,name:"topo_20k",metadata:{legend_name:"topo_20k",metadata_id:"ea998ae8-731a-43bc-aa9f-171684f97602"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_20k",imageType:"image/png"},{id:149,name:"topo_tour_20k",metadata:{legend_name:"topo_tour_20k",metadata_id:"1173_"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_tour_20k",imageType:"image/png"},{id:195,name:"topo_5k",metadata:{exclusion:"[32,42]",legend_name:"topo_5k",metadata_id:"270_2012"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_5k",imageType:"image/png"}],metadata:{},mixed:!0},{id:178,name:"luft_und_satellitenbilder",children:[{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}},{id:2792,name:"ortho_2023",metadata:{exclusion:'["exclusion_ortho2023","exclusion_ortho2023_bati"]',metadata_id:"742d2a2e-eb7a-4a0b-a6d8-00d70831ef04"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2023",imageType:"image/jpeg"},{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1789,name:"ortho_2019_winter",metadata:{exclusion:"[118,218]",metadata_id:"d6cc500f-b802-4be2-a49c-73f3eb2d131e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019_winter",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2787,name:"ortho_1967",metadata:{metadata_id:"9be42a5c-7a6f-46b5-8815-8adb17e6aff6"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_1967",imageType:"image/jpeg"},{id:345,name:"topo_decoupage_ortho",metadata:{is_queryable:!0,metadata_id:"3a35eb1a-9eaa-4f90-927f-2891d5e865f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_decoupage_ortho",imageType:"image/png"},{id:292,name:"wg_ikonos_satellitendaten",metadata:{legend_name:"wg:ikonos_satellitendaten",metadata_id:"db0eea79-114a-4e61-a1f2-7e064f92cdd3"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"wg_ikonos_satellitendaten",imageType:"image/png"},{id:341,name:"aero_1951_10k",metadata:{is_queryable:!0,metadata_id:"16586649-8e46-4b04-b75c-5537a4bf214e"},dimensions:{},type:"WMS",layers:"aero_1951_10k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_10k__1951_10k"}]},{id:229,name:"aero_1951_25k",metadata:{is_queryable:!0,metadata_id:"b3b5fc05-323c-4f0b-804c-a4c186d62a96"},dimensions:{},type:"WMS",layers:"aero_1951_25k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1951_25k__1951_25k"}]},{id:140,name:"aero_1963_20k",metadata:{is_queryable:!0,metadata_id:"56b65f04-d3ab-45b6-9e93-95c8c9524c3e"},dimensions:{},type:"WMS",layers:"aero_1963_20k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1963_20k__1963_20k"}]},{id:665,name:"aero_1977_30k",metadata:{is_queryable:!0,metadata_id:"d9dd951e-7345-4ba2-9a76-ce54305edf2f"},dimensions:{},type:"WMS",layers:"aero_1977_30k",imageType:"image/png",style:"default",childLayers:[{name:"aero_1977_30k__1977_30k"}]},{id:743,name:"aero_1987_30k",metadata:{is_queryable:!0,metadata_id:"98b63794-8cb1-42ff-9872-214f990ec8cd"},dimensions:{},type:"WMS",layers:"aero_1987_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1987_30k__1987_30k"}]},{id:748,name:"aero_1994_30k",metadata:{is_queryable:!0,metadata_id:"abf7f6f5-8647-4317-98f6-8d4f5cd38585"},dimensions:{},type:"WMS",layers:"aero_1994_30k",imageType:"image/png",style:"defaults",childLayers:[{name:"aero_1994_30k__1994_30k"}]},{id:790,name:"Orthophotos Infrarouge",children:[{id:2835,name:"ortho2023_IR",metadata:{exclusion:'["exclusion_ortho2023IR","exclusion_ortho2023IR_bati"]',metadata_id:"3bb6099a-67f2-4243-b820-ffaeb03e439b"},dimensions:{},type:"WMS",layers:"ortho2023_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2023_IR__0"}]},{id:2595,name:"ortho2022_IR",metadata:{exclusion:'["exclusion_ortho2022IR","exclusion_ortho2022IR_bati"]',metadata_id:"c58ceaa0-d36d-4edf-ab68-ed1040bea10c"},dimensions:{},type:"WMS",layers:"ortho2022_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2022_IR__0"}]},{id:2283,name:"ortho2021_IR",metadata:{exclusion:"[122,222]",metadata_id:"067dc519-f507-45db-8e7a-f3ccc9125bc5"},dimensions:{},type:"WMS",layers:"ortho2021_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2021_IR__3"},{name:"ortho2021_IR__2"},{name:"ortho2021_IR__1"},{name:"ortho2021_IR__0"}]},{id:2089,name:"ortho2020_IR",metadata:{exclusion:"[120,220]",metadata_id:"134fb490-c022-476d-b484-dc652ae8c626"},dimensions:{},type:"WMS",layers:"ortho2020_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2020_IR__4"},{name:"ortho2020_IR__3"},{name:"ortho2020_IR__2"},{name:"ortho2020_IR__1"}]},{id:1785,name:"ortho2019_IR",metadata:{exclusion:"[117,217]",metadata_id:"3dfd031a-1721-4f35-b358-25062d5d4c26"},dimensions:{},type:"WMS",layers:"ortho2019_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2019_IR__9"},{name:"ortho2019_IR__8"},{name:"ortho2019_IR__7"},{name:"ortho2019_IR__6"}]},{id:1529,name:"ortho2018_IR",metadata:{exclusion:"[114,214]",metadata_id:"2edf6bcb-2a1c-4b8c-8488-56000133abb4"},dimensions:{},type:"WMS",layers:"ortho2018_IR",imageType:"image/png",style:"default",childLayers:[{name:"ortho2018_IR__14"},{name:"ortho2018_IR__13"},{name:"ortho2018_IR__12"},{name:"ortho2018_IR__11"}]},{id:1372,name:"ortho_2017_irc",metadata:{exclusion:"[112,212]",metadata_id:"659a3236-a22e-44ae-9fa3-025cdf5d0043"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017_irc",imageType:"image/jpeg"},{id:793,name:"ortho_2016_irc",metadata:{exclusion:"[110,210]",is_queryable:!0,metadata_id:"c313da75-7d8b-4570-9db5-bb6add56309e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016_irc",imageType:"image/jpeg"},{id:792,name:"ortho_2013_irc",metadata:{exclusion:"[109,209]",is_queryable:!0,metadata_id:"649b34a1-a195-40b4-81c9-0100343b9661"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013_irc",imageType:"image/jpeg"},{id:791,name:"ortho_2010_irc",metadata:{exclusion:"[108,208]",is_queryable:!0,metadata_id:"728ffc2a-9062-4822-8596-01f0e93f6b40"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010_irc",imageType:"image/jpeg"}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1865,name:"npour_poi_group",children:[{id:1879,name:"npour_poi_propres",children:[{id:1880,name:"npour_poi_admin",metadata:{is_queryable:!0,metadata_id:"d5e79fbd-4a11-428f-a7be-4a765508e791"},dimensions:{},type:"WMS",layers:"npour_poi_admin",imageType:"image/png",childLayers:[{name:"npour_poi_admin__14"}]},{id:1881,name:"npour_poi_batiments_reli",metadata:{is_queryable:!0,metadata_id:"a3384282-5913-4610-b28e-72fa46ea18ea"},dimensions:{},type:"WMS",layers:"npour_poi_batiments_reli",imageType:"image/png",childLayers:[{name:"npour_poi_batiments_reli__12"}]},{id:1894,name:"npour_poi_culture",metadata:{is_queryable:!0,metadata_id:"d4b40114-f351-484d-9b09-bbfc0fd20abd"},dimensions:{},type:"WMS",layers:"npour_poi_culture",imageType:"image/png",childLayers:[{name:"npour_poi_culture__2"}]},{id:1883,name:"npour_poi_secours",metadata:{is_queryable:!0,metadata_id:"988f5449-959b-488b-acfe-bfb2eee23247"},dimensions:{},type:"WMS",layers:"npour_poi_secours",imageType:"image/png",childLayers:[{name:"npour_poi_secours__0"}]},{id:1884,name:"npour_poi_autres",metadata:{is_queryable:!0,metadata_id:"ed8ad1e0-d4ff-46ee-8c2b-91323f45786b"},dimensions:{},type:"WMS",layers:"npour_poi_autres",imageType:"image/png",childLayers:[{name:"npour_poi_autres__3"}]},{id:1878,name:"npour_poi_transport",metadata:{is_queryable:!0,metadata_id:"3821f8ee-0d90-47a0-b54f-02235af78fc2"},dimensions:{},type:"WMS",layers:"npour_poi_transport",imageType:"image/png",childLayers:[{name:"npour_poi_transport__4"}]},{id:1885,name:"npour_poi_sociale",metadata:{is_queryable:!0,metadata_id:"fa6c56a3-1bb6-4147-916b-956d0ce795e8"},dimensions:{},type:"WMS",layers:"npour_poi_sociale",imageType:"image/png",childLayers:[{name:"npour_poi_sociale__7"}]},{id:1886,name:"npour_poi_enseignement",metadata:{is_queryable:!0,metadata_id:"6b31dedb-5bd7-44f3-a34e-48871adae269"},dimensions:{},type:"WMS",layers:"npour_poi_enseignement",imageType:"image/png",childLayers:[{name:"npour_poi_enseignement__10"}]},{id:1887,name:"npour_poi_sante",metadata:{is_queryable:!0,metadata_id:"f6480b65-fd0e-441d-a5fe-fd240540b57b"},dimensions:{},type:"WMS",layers:"npour_poi_sante",imageType:"image/png",childLayers:[{name:"npour_poi_sante__8"}]},{id:1888,name:"npour_poi_attraction",metadata:{is_queryable:!0,metadata_id:"7e66c353-2a0d-4d58-a782-f2ec67371166"},dimensions:{},type:"WMS",layers:"npour_poi_attraction",imageType:"image/png",childLayers:[{name:"npour_poi_attraction__13"}]},{id:1889,name:"npour_poi_logement",metadata:{is_queryable:!0,metadata_id:"d9f9d25d-2c2e-41a8-84fb-ba6d941ddb05"},dimensions:{},type:"WMS",layers:"npour_poi_logement",imageType:"image/png",childLayers:[{name:"npour_poi_logement__9"}]},{id:1890,name:"npour_poi_gastronomie",metadata:{is_queryable:!0,metadata_id:"54de547d-f500-4985-9893-96f58f9b8bc1"},dimensions:{},type:"WMS",layers:"npour_poi_gastronomie",imageType:"image/png",childLayers:[{name:"npour_poi_gastronomie__1"}]},{id:1891,name:"npour_poi_sport",metadata:{is_queryable:!0,metadata_id:"43b24d55-7198-41f2-86d4-e6203d71ec09"},dimensions:{},type:"WMS",layers:"npour_poi_sport",imageType:"image/png",childLayers:[{name:"npour_poi_sport__6"}]},{id:1892,name:"npour_poi_tourisme",metadata:{is_queryable:!0,metadata_id:"c36ba1cd-0d28-491f-8d51-e268e420a8f9"},dimensions:{},type:"WMS",layers:"npour_poi_tourisme",imageType:"image/png",childLayers:[{name:"npour_poi_tourisme__5"}]},{id:1893,name:"npour_poi_commerce",metadata:{is_queryable:!0,metadata_id:"87c0fcc6-3452-47f7-9b23-0fd9c9f38189"},dimensions:{},type:"WMS",layers:"npour_poi_commerce",imageType:"image/png",childLayers:[{name:"npour_poi_commerce__11"}]}],metadata:{},mixed:!0},{id:684,name:"editus_pois_tourisme",children:[{id:542,name:"editus_poi_299",metadata:{is_queryable:!0,legend_name:"editus_1",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"542",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_299__POI"}]},{id:543,name:"editus_poi_286",metadata:{is_queryable:!0,legend_name:"editus_2",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"543",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_286__POI"}]},{id:544,name:"editus_poi_285",metadata:{is_queryable:!0,legend_name:"editus_3",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"544",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_285__POI"}]},{id:545,name:"editus_poi_287",metadata:{is_queryable:!0,legend_name:"editus_4",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"545",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_287__POI"}]},{id:546,name:"editus_poi_289",metadata:{is_queryable:!0,legend_name:"editus_5",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"546",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_289__POI"}]},{id:547,name:"editus_poi_290",metadata:{is_queryable:!0,legend_name:"editus_6",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"547",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_290__POI"}]},{id:549,name:"editus_poi_291",metadata:{is_queryable:!0,legend_name:"editus_7",metadata_id:"4a04ebff-4954-4c4d-9387-46d3587eccef",start_opacity:.9},dimensions:{},type:"WMS",layers:"549",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_291__POI"}]},{id:550,name:"editus_poi_292",metadata:{is_queryable:!0,legend_name:"editus_8",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"550",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_292__POI"}]},{id:551,name:"editus_poi_293",metadata:{is_queryable:!0,legend_name:"editus_9",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"551",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_293__POI"}]},{id:548,name:"editus_poi_294",metadata:{is_queryable:!0,legend_name:"editus_10",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"548",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_294__POI"}]},{id:552,name:"editus_poi_295",metadata:{is_queryable:!0,legend_name:"editus_11",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"552",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_295__POI"}]},{id:553,name:"editus_poi_296",metadata:{is_queryable:!0,legend_name:"editus_12",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"553",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_296__POI"}]},{id:554,name:"editus_poi_298",metadata:{is_queryable:!0,legend_name:"editus_13",metadata_id:"ae1bc422-5751-4efa-92af-c24287609dbb",start_opacity:.9},dimensions:{},type:"WMS",layers:"554",imageType:"image/png",style:"default",childLayers:[{name:"editus_poi_298__POI"}]}],metadata:{},mixed:!0},{id:2018,name:"tour_erleben_new",children:[{id:2042,name:"tour_tourist_info_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_tourist_info_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_tourist_info_new__7"}]},{id:2030,name:"tour_essen_uebernachten_new",children:[{id:2038,name:"tour_hotels_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_hotels_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_hotels_new__2"}]},{id:2037,name:"tour_camping_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_camping_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_camping_new__11"}]},{id:2036,name:"tour_jugendherberge_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_jugendherberge_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_jugendherberge_new__12"}]},{id:2035,name:"tour_fewo_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_fewo_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_fewo_new__13"}]},{id:2034,name:"tour_bb_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_bb_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_bb_new__14"}]},{id:2033,name:"tour_restaurants_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_restaurants_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_restaurants_new__15"}]}],metadata:{},mixed:!0},{id:2031,name:"tour_kultur_new",children:[{id:2044,name:"tour_burgen_schloesser_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_burgen_schloesser_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_burgen_schloesser_new__16"}]},{id:2043,name:"tour_museen_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_museen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_museen_new__17"}]},{id:2027,name:"tour_unesco_new",metadata:{is_queryable:!0},dimensions:{},type:"WMS",layers:"tour_unesco_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_unesco_new__category"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1866,name:"npour_wanderwege_group",children:[{id:1867,name:"npour_wanderwege_eigene_group",children:[{id:1895,name:"npour_wanderwege_eigene",metadata:{is_queryable:!0,metadata_id:"ef5983e1-a28f-4770-845a-8fcbd6f22fc0"},dimensions:{},type:"WMS",layers:"npour_wanderwege_eigene",imageType:"image/png",childLayers:[{name:"npour_wanderwege_eigene__15"}]}],metadata:{},mixed:!0},{id:304,name:"tour_quality",children:[{id:189,name:"tour_mullerthal_trail",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"be71ab82-8930-4da7-840d-a99374312093"},dimensions:{},type:"WMS",layers:"tour_mullerthal_trail",imageType:"image/png",style:"default",childLayers:[{name:"tour_mullerthal_trail__category"}]},{id:205,name:"tour_escape_ardenne",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"f01f9d77-cb2e-4189-89a9-df7eed16525b"},dimensions:{},type:"WMS",layers:"tour_escape_ardenne",imageType:"image/png",style:"default",childLayers:[{name:"tour_escape_ardenne__category"}]},{id:250,name:"tour_DeLux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"df101633-54fb-46bb-9d33-91d241c69ae2"},dimensions:{},type:"WMS",layers:"tour_DeLux",imageType:"image/png",style:"default",childLayers:[{name:"tour_DeLux__category"}]},{id:168,name:"tour_rando_traumschleifen_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"109f2940-b476-4bdd-96a8-7301fa3c7e39"},dimensions:{},type:"WMS",layers:"tour_rando_traumschleifen_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_traumschleifen_new__category"}]}],metadata:{is_expanded:!0},mixed:!0},{id:1868,name:"npour_wanderwege_andere",children:[{id:176,name:"tour_autopedestre",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"1514749f-19e9-4873-9c70-68b34ebc2e30"},dimensions:{},type:"WMS",layers:"tour_autopedestre",imageType:"image/png",style:"default",childLayers:[{name:"tour_autopedestre__category"}]},{id:227,name:"tour_sentiers_nationaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"05311fc8-28fa-470c-984e-879a410ce753"},dimensions:{},type:"WMS",layers:"tour_sentiers_nationaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_nationaux__category"}]},{id:158,name:"tour_cfl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfa696a6-1c25-4ba5-bde1-beb140776881"},dimensions:{},type:"WMS",layers:"tour_cfl",imageType:"image/png",style:"default",childLayers:[{name:"tour_cfl__category"}]},{id:197,name:"tour_sentiers_ajl",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"c2587c18-ed11-44da-99dd-760a3fd73126"},dimensions:{},type:"WMS",layers:"tour_sentiers_ajl",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_ajl__category"}]},{id:235,name:"tour_sentiers_gr",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"004e728b-6e63-4ab7-9b65-f327eb2f7618"},dimensions:{},type:"WMS",layers:"tour_sentiers_gr",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_gr__category"}]},{id:218,name:"tour_saint_jacques",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"431c5622-7941-482b-a629-42bd1db17dfe"},dimensions:{},type:"WMS",layers:"tour_saint_jacques",imageType:"image/png",style:"default",childLayers:[{name:"tour_saint_jacques__category"}]},{id:316,name:"env_sentiersnature",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"cfc8de82-e187-4547-a1da-83385f86c786"},dimensions:{},type:"WMS",layers:"env_sentiersnature",imageType:"image/png",style:"default",childLayers:[{name:"env_sentiersnature__sentiers_nature"}]},{id:179,name:"tour_sentiers_locaux",children:[{id:177,name:"tour_sentiers_communaux",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4d39824a-6a5d-4020-bc88-a0bb3d3e28e6"},dimensions:{},type:"WMS",layers:"tour_sentiers_communaux",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_communaux__category"}]},{id:246,name:"tour_sentiers_syndicats",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"3e98c2a3-b991-4b11-b3cc-d18aaf6eac80"},dimensions:{},type:"WMS",layers:"tour_sentiers_syndicats",imageType:"image/png",style:"default",childLayers:[{name:"tour_sentiers_syndicats__category"}]}],metadata:{is_expanded:!0},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1869,name:"npour_radwege_group",children:[{id:281,name:"tour_velo_v2",children:[{id:808,name:"velo_by_pch",metadata:{is_queryable:!0,legend_name:"tour_velo_national",linked_layers:["1713","1714"],metadata_id:"387f6949-0fc4-43a5-b0e6-4e09bdf65225"},dimensions:{},type:"WMS",layers:"velo_by_pch",imageType:"image/png",style:"default",childLayers:[{name:"velo_by_pch__4"},{name:"velo_by_pch__5"}]},{id:512,name:"tour_pistes_velo_mymaps2",metadata:{is_queryable:!0,legend_name:"tour_velo_national",metadata_id:"e9fea021-2aab-4f58-a777-8c7536898d9b"},dimensions:{},type:"WMS",layers:"tour_pistes_velo_mymaps2",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_velo_mymaps2__category"}]},{id:809,name:"lvi_circuits_cyclables",metadata:{is_queryable:!0,metadata_id:"e5e9ddf6-dfdb-4d3b-a0e2-d1be2272bf38"},dimensions:{},type:"WMS",layers:"lvi_circuits_cyclables",imageType:"image/png",style:"default",childLayers:[{name:"lvi_circuits_cyclables__category"}]},{id:293,name:"tour_pistes_vtt",metadata:{is_queryable:!0,linked_layers:["2026"],metadata_id:"2ea699a2-dc3c-4bd6-92fc-f7325b0c7fee"},dimensions:{},type:"WMS",layers:"tour_pistes_vtt",imageType:"image/png",style:"default",childLayers:[{name:"tour_pistes_vtt__category"}]},{id:676,name:"tour_velo_route",metadata:{is_queryable:!0,linked_layers:["1713","1714"],metadata_id:"2a07d7fb-ae3e-4385-bf61-b071a7f6ffbd"},dimensions:{},type:"WMS",layers:"tour_velo_route",imageType:"image/png",style:"default",childLayers:[{name:"tour_velo_route__category"}]},{id:1650,name:"unseco_biketour",metadata:{is_queryable:!0,metadata_id:"eda8222e-b76f-4016-8fea-87b27d0f622f"},dimensions:{},type:"WMS",layers:"unseco_biketour",imageType:"image/png",style:"default",childLayers:[{name:"unseco_biketour__category"}]},{id:725,name:"tour_tdl",metadata:{is_queryable:!0,metadata_id:"35226642-3f09-4f98-86b6-6e55316bce53"},dimensions:{},type:"WMS",layers:"tour_tdl",imageType:"image/png",style:"default",childLayers:[{name:"tour_tdl__category"}]},{id:1913,name:"tour_restrictions_velo",children:[{id:1713,name:"chantiers_actuels_pc",metadata:{is_queryable:!0,metadata_id:"7d59f3a6-e8d8-464b-bbf9-73c6ca358a51",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_actuels_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_actuels_pc__CHANTIERS_ACTUEL_PC"}]},{id:1714,name:"chantiers_futurs_pc",metadata:{is_queryable:!0,metadata_id:"f6b9df36-5e62-46d1-ae91-c7c58c7e2e45",start_opacity:1},dimensions:{},type:"WMS",layers:"chantiers_futurs_pc",imageType:"image/png",style:"default",childLayers:[{name:"chantiers_futurs_pc__CHANTIERS_FUTUR_PC"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1870,name:"npour_infrastruktur",children:[{id:1871,name:"npour_verkehrsnetze",children:[{id:181,name:"roads",metadata:{legend_name:"road_network:show",linked_layers:["351"],metadata_id:"12627f90-f0f8-41b3-a56a-2e11a232ba59"},dimensions:{},type:"WMS",layers:"roads",imageType:"image/png",style:"default",childLayers:[{name:"roads__ROADS_NOLABELS"}]},{id:351,name:"roads_labels",metadata:{metadata_id:"5d606cae-cbc6-44c3-a465-edb981e44a39"},dimensions:{},type:"WMS",layers:"roads_labels",imageType:"image/png",style:"default",childLayers:[{name:"roads_labels__ROADS_LABELS"}]},{id:147,name:"arrets_bus",metadata:{is_queryable:!0,legend_name:"mobiliteit:arrets_de_bus",linked_layers:["813"],metadata_id:"7318c6e8-bb63-40e0-9e40-46ae7b0dc266"},dimensions:{},type:"WMS",layers:"arrets_bus",imageType:"image/png",style:"default",childLayers:[{name:"arrets_bus__0"},{name:"arrets_bus__1"}]},{id:813,name:"cdt_lignes_all",metadata:{is_queryable:!0,metadata_id:"bbe0523f-374d-4c94-a27d-7ce81d8bae3b"},dimensions:{},type:"WMS",layers:"cdt_lignes_all",imageType:"image/png",style:"default",childLayers:[{name:"cdt_lignes_all__lignes_de_bus_detaillees"},{name:"cdt_lignes_all__lignes_de_bus_detaillees_mymaps"}]},{id:1381,name:"chargy",metadata:{is_queryable:!0,legend_name:"chargy",metadata_id:"801d732a-c285-4fcd-a043-c5220d6d7eef"},dimensions:{},type:"WMS",layers:"chargy",imageType:"image/png",style:"default",childLayers:[{name:"chargy__chargy"}]},{id:423,name:"mobiliteit_cfl",metadata:{is_queryable:!0,legend_name:"mobiliteit:cfl",max_dpi:128,metadata_id:"0b3c42a2-275e-4519-b228-f407d46b8350"},dimensions:{},type:"WMS",layers:"mobiliteit_cfl",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_cfl__1"}]},{id:377,name:"mobiliteit_pr",metadata:{is_queryable:!0,legend_name:"mobiliteit:pr",max_dpi:128,metadata_id:"9e0c97ae-aff9-41fc-9489-bbf97999163d"},dimensions:{},type:"WMS",layers:"mobiliteit_pr",imageType:"image/png",style:"default",childLayers:[{name:"mobiliteit_pr__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1924,name:"npour_umwelt",children:[{id:807,name:"zpin_group",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:805,name:"anf_zpin_a_declarer",metadata:{is_queryable:!0,legend_name:"anf:zpin_a_declarer",metadata_id:"db53336b-1a33-4b1a-94a8-42a29b55ce45"},dimensions:{},type:"WMS",layers:"anf_zpin_a_declarer",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_a_declarer__ZPIN_A_DECLARER"}]},{id:806,name:"anf_zpin_en_procedure",metadata:{is_queryable:!0,legend_name:"anf:zpin_en_procedure_reglementaire",metadata_id:"74499cf0-ab69-48bd-a357-8c151dd3d5c9"},dimensions:{},type:"WMS",layers:"anf_zpin_en_procedure",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_en_procedure__ZPIN_EN_PROCEDURE_REGLEMENTAIRE"}]}],metadata:{},mixed:!0},{id:334,name:"env_zones_protegees_communautaires",children:[{id:146,name:"env_natura2000",children:[{id:1915,name:"anf_communes_copil_2020",metadata:{is_queryable:!0,metadata_id:"e0369dfa-0219-4a60-84c4-4ce60cec0a02"},dimensions:{},type:"WMS",layers:"anf_communes_copil_2020",imageType:"image/png",style:"default",childLayers:[{name:"anf_communes_copil_2020__COMMUNES_COPIL_2020"}]},{id:540,name:"natura2000_habitats",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"a38326c1-3d68-43da-9883-a80763ee06e9"},dimensions:{},type:"WMS",layers:"natura2000_habitats",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_habitats__1"}]},{id:533,name:"natura2000_oiseaux",metadata:{is_queryable:!0,max_dpi:128,metadata_id:"080b7d2e-f8d5-4943-8dbf-04d3dfd4fe09"},dimensions:{},type:"WMS",layers:"natura2000_oiseaux",imageType:"image/png",style:"default",childLayers:[{name:"natura2000_oiseaux__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:180,name:"anf_secteurs_ecologiques_group",children:[{id:690,name:"anf_secteurs_ecologiques",metadata:{is_queryable:!0,metadata_id:"8afa4162-c23b-4001-b737-4074d4f5360f"},dimensions:{},type:"WMS",layers:"anf_secteurs_ecologiques",imageType:"image/png",style:"default",childLayers:[{name:"anf_secteurs_ecologiques__SECTEURS_ECOLOGIQUES"}]}],metadata:{},mixed:!0},{id:366,name:"emwelt_biotop_kadaster",children:[{id:1367,name:"anf_biotopes_points",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_points",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_points__BIOTOPES_MO_EL_PONCTUELS_GEOPORTN"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]},{id:1370,name:"anf_biotopes_tampons",metadata:{is_queryable:!0,legend_name:"env:btk_b",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_tampons",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_tampons__BIOTOPES_MO_ZONES_TAMPONS"}]},{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1872,name:"npour_agri",children:[{id:307,name:"asta",children:[{id:1637,name:"asta_flik_parcels",metadata:{is_queryable:!0,metadata_id:"f511a4ee-928a-4900-ac05-52aa0ce03bba"},dimensions:{},type:"WMS",layers:"asta_flik_parcels",imageType:"image/png",style:"default",childLayers:[{name:"asta_flik_parcels__3"}]},{id:1511,name:"asta_prairies_permanentes",metadata:{is_queryable:!0,metadata_id:"f6f493c2-f57b-419d-8953-ab8018576ac7"},dimensions:{},type:"WMS",layers:"asta_prairies_permanentes",imageType:"image/png",style:"default",childLayers:[{name:"asta_prairies_permanentes__0"}]},{id:740,name:"asta_herbages_sensibles",metadata:{metadata_id:"e5d2717e-4541-43f1-b586-1b18cdf11827"},dimensions:{},type:"WMS",layers:"asta_herbages_sensibles",imageType:"image/png",style:"default",childLayers:[{name:"asta_herbages_sensibles__gruenland"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:1873,name:"npour_eau",children:[{id:1874,name:"npour_eau_surface",children:[{id:749,name:"eau_new_Gewässer",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewässer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewässer__23"},{name:"eau_new_Gewässer__24"},{name:"eau_new_Gewässer__25"}]},{id:651,name:"eau_new_Kanal_-__Muehlgraben",metadata:{is_queryable:!0,legend_name:"eau:kanal_-__muehlgraben",max_dpi:128,metadata_id:"909501fc-a0a9-4af8-8e82-f2a8d7f2fe2f"},dimensions:{},type:"WMS",layers:"eau_new_Kanal_-__Muehlgraben",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kanal_-__Muehlgraben__26"}]},{id:750,name:"eau_new_Kilometrierung der Gewässer",metadata:{legend_name:"eau:kilometrierung_primaere_gewaesser_kilometrierung_sekundaere_gewaesser",metadata_id:"4002b1cf-08b5-421a-bc92-40271d62f03c"},dimensions:{},type:"WMS",layers:"eau_new_Kilometrierung der Gewässer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Kilometrierung der Gewässer__27"},{name:"eau_new_Kilometrierung der Gewässer__28"}]},{id:636,name:"eau_new_Einzugsgebiete",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.8156287",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb010cc765e17f1820811",is_queryable:!0,legend_name:"eau:einzugsgebiete",max_dpi:128,metadata_id:"a295a30a-f819-400c-842c-d0ccc695bea5"},dimensions:{},type:"WMS",layers:"eau_new_Einzugsgebiete",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Einzugsgebiete__29"}]}],metadata:{},mixed:!0},{id:1875,name:"npour_eau_souterraine",children:[{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]}],metadata:{},mixed:!0},{id:1876,name:"npour_eau_zps",children:[{id:214,name:"eau_new_Provisorische_ZPS",metadata:{geocatalog_open_data_last_update_date:"2024-10-03T01:04:17.082383",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece254111e9b03b03833c4",is_queryable:!0,legend_name:"eau:provisorische_zps",max_dpi:128,metadata_id:"ddc51f25-2fb7-4d14-866a-a08f8af8ef03"},dimensions:{},type:"WMS",layers:"eau_new_Provisorische_ZPS",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Provisorische_ZPS__130"}]},{id:664,name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:09.8847458",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e745b111e9b729d2f54dd",is_queryable:!0,legend_name:"eau:zps_laufende_oeffentliche_verfahrungsweise",max_dpi:128,metadata_id:"87beb1ac-7496-48f6-b5a9-8666e3897523"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_laufende_oeffentliche_Verfahrungsweise__131"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:1464,name:"eau_prgd_zones_protection_lac",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.5407176",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"5b571c9546f3b55625dc355c",is_queryable:!0,legend_name:"eau:prgd_stausee",metadata_id:"eab29425-71cc-4610-b48e-8d848d0a8431"},dimensions:{},type:"WMS",layers:"eau_prgd_zones_protection_lac",imageType:"image/png",style:"default",childLayers:[{name:"eau_prgd_zones_protection_lac__349"}]},{id:490,name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",metadata:{geocatalog_open_data_last_update_date:"2024-06-01T01:05:08.8469357",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ece272cc765e1a24228122",is_queryable:!0,legend_name:"eau:sanitaere_schutzzonen_stausee",max_dpi:128,metadata_id:"e34de488-68ea-48a8-9e92-f67bb209508e"},dimensions:{},type:"WMS",layers:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Sanitaere_Schutzzonen_Stausee_EschSauer__133"}]},{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]}],metadata:{},mixed:!0},{id:1877,name:"npour_eau_protection",children:[{id:643,name:"eau_new_Abwassersyndikate",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.7305149",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece2dd111e9b03b03833c5",is_queryable:!0,legend_name:"eau:abwassersyndikate",max_dpi:128,metadata_id:"4b5e384c-5603-4cf4-9bd5-6e520df5c375"},dimensions:{},type:"WMS",layers:"eau_new_Abwassersyndikate",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Abwassersyndikate__143"}]},{id:645,name:"eau_new_Klaeranlagen",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:05:26.116702",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece288cc765e1a25470f74",is_queryable:!0,legend_name:"eau:klaeranlagen",max_dpi:128,metadata_id:"53e55765-90eb-438f-a744-3ac878b06334"},dimensions:{},type:"WMS",layers:"eau_new_Klaeranlagen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Klaeranlagen__142"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:2177,name:"geosciences",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2178,name:"geo_geologie_group",children:[{id:2167,name:"geo_carte_geol_harmonisee",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",metadata_id:"542a0caa-4b33-4019-8ce7-b8541b436106"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee__6"},{name:"geo_carte_geol_harmonisee__1"},{name:"geo_carte_geol_harmonisee__2"},{name:"geo_carte_geol_harmonisee__3"}]},{id:2168,name:"geo_carte_geol_harmonisee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee_decouverte",metadata_id:"d03be720-e33c-4bd4-8829-559dc951dc2d"},dimensions:{},type:"WMS",layers:"geo_carte_geol_harmonisee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_harmonisee_decouverte__5"},{name:"geo_carte_geol_harmonisee_decouverte__1"},{name:"geo_carte_geol_harmonisee_decouverte__2"},{name:"geo_carte_geol_harmonisee_decouverte__3"}]},{id:2185,name:"geo_carte_detail_25k",metadata:{is_queryable:!0,legend_name:"geol:geo25k_ned",metadata_id:"f8e6c6ca-948a-404e-9d15-54d9a423627b"},dimensions:{},type:"WMS",layers:"geo_carte_detail_25k",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_detail_25k__0"}]},{id:2186,name:"geo_carte_generale_100k",metadata:{is_queryable:!0,legend_name:"geol:geologie_generale",metadata_id:"61b929b6-7964-449d-bc3e-87483a7997f5"},dimensions:{},type:"WMS",layers:"geo_carte_generale_100k",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_generale_100k__0"}]},{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2170,name:"geo_carte_geol_simplifiee_decouverte",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee_decouverte",metadata_id:"d8d627ee-ec11-4054-8a05-f4cd98adbd72"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee_decouverte",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee_decouverte__0"},{name:"geo_carte_geol_simplifiee_decouverte__2"}]},{id:2199,name:"geo_cartes_geologiques_historiques",children:[{id:2202,name:"geo_geologie_wies_siegen",metadata:{is_queryable:!0,legend_name:"geol:geologie_wies_siegen",metadata_id:"f595fd68-0036-433f-ae93-2bbace506f0a"},dimensions:{},type:"WMS",layers:"geo_geologie_wies_siegen",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_wies_siegen__0"}]},{id:2203,name:"geo_geologie_van_werweke",metadata:{is_queryable:!0,legend_name:"geol:geologie_van_werweke",metadata_id:"5156b574-f67c-4bee-b349-e769581fe079"},dimensions:{},type:"WMS",layers:"geo_geologie_van_werweke",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_van_werweke__1"}]},{id:2204,name:"geo_geologie_lucius",metadata:{is_queryable:!0,legend_name:"geol:geologie_lucius",metadata_id:"34e148cb-7d47-455a-8d5f-0f2623ab6a4e"},dimensions:{},type:"WMS",layers:"geo_geologie_lucius",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_lucius__3"}]},{id:2205,name:"geo_geologie_robert",metadata:{is_queryable:!0,legend_name:"geol:geologie_robert",metadata_id:"a299b930-a36c-4709-8712-b52cfd7c9fa1"},dimensions:{},type:"WMS",layers:"geo_geologie_robert",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_robert__2"}]},{id:2206,name:"geo_geologie_detail_anc_edition",metadata:{is_queryable:!0,legend_name:"geol:geo25_50k_aed",metadata_id:"a3342917-2a84-48ee-bf20-668810bb4c80"},dimensions:{},type:"WMS",layers:"geo_geologie_detail_anc_edition",imageType:"image/png",style:"default",childLayers:[{name:"geo_geologie_detail_anc_edition__12"}]}],metadata:{},mixed:!0},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2175,name:"geo_epaisseurs_unites",metadata:{is_queryable:!0,legend_name:"geol:epaisseurs_unites",metadata_id:"3fab8010-2f8b-43e2-96a7-155a24233db4"},dimensions:{},type:"WMS",layers:"geo_epaisseurs_unites",imageType:"image/png",style:"default",childLayers:[{name:"geo_epaisseurs_unites__0"}]},{id:2201,name:"geo_forages_group",children:[{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:628,name:"eau_new_Bohrungen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:02:16.7602644",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb039cc765e18ae5ed882",is_queryable:!0,legend_name:"eau:bohrungen",max_dpi:128,metadata_id:"4ab49f17-a50e-4439-9a9e-01ec93421aec"},dimensions:{},type:"WMS",layers:"eau_new_Bohrungen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Bohrungen__39"}]},{id:2791,name:"pch_sgl_demande_forage_virtuel",metadata:{is_queryable:!0,legend_name:"geol:geologie_harmonisee",linked_layers:["2847"],metadata_id:"4858f69e-4ce5-4d49-984f-fecb1d8b61ac",return_clicked_point:"true"},dimensions:{},type:"WMS",layers:"pch_sgl_demande_forage_virtuel",imageType:"image/png",style:"default",childLayers:[{name:"pch_sgl_demande_forage_virtuel__6"},{name:"pch_sgl_demande_forage_virtuel__1"},{name:"pch_sgl_demande_forage_virtuel__2"},{name:"pch_sgl_demande_forage_virtuel__3"}]},{id:2847,name:"pch_sgl_demande_forage_virtuel_masque",metadata:{metadata_id:"b1f69cb4-30ad-4856-926c-0fc28bb331ca"},dimensions:{},type:"WMS",layers:"pch_sgl_demande_forage_virtuel_masque",imageType:"image/png",style:"default",childLayers:[{name:"pch_sgl_demande_forage_virtuel_masque__0"}]}],metadata:{},mixed:!0},{id:2200,name:"geo_eaux_souterraines",children:[{id:631,name:"eau_new_Grundwasserleiter",metadata:{geocatalog_open_data_last_update_date:"2024-06-03T01:02:35.1743465",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"yearly",geocatalog_open_data_uuid:"57ecafe1cc765e18ae5ed87e",is_queryable:!0,legend_name:"eau:grundwasserleiter",max_dpi:128,metadata_id:"783a8608-e4b3-44ed-8864-68525da33760"},dimensions:{},type:"WMS",layers:"eau_new_Grundwasserleiter",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Grundwasserleiter__41"}]},{id:629,name:"eau_new_Quellen",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.4671511",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ece292cc765e1a24228123",is_queryable:!0,legend_name:"eau:quellen",max_dpi:128,metadata_id:"58fa573a-a0c3-474d-9e74-c277cf90b135"},dimensions:{},type:"WMS",layers:"eau_new_Quellen",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Quellen__40"}]},{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]}],metadata:{},mixed:!0},{id:2191,name:"geo_geomorphologie_carte100K",metadata:{is_queryable:!0,legend_name:"geol:geomorphologie100k",metadata_id:"3fd5088b-021d-4207-9d4b-4040e1ccfe22"},dimensions:{},type:"WMS",layers:"geo_geomorphologie_carte100K",imageType:"image/png",style:"default",childLayers:[{name:"geo_geomorphologie_carte100K__0"}]}],metadata:{},mixed:!0},{id:2182,name:"geo_geophysique_group",children:[{id:2192,name:"geo_geophysique_comptage_uranium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_uranium",metadata_id:"6b9443de-b85c-4360-9c3b-b937c5804303"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_uranium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_uranium__0"}]},{id:2193,name:"geo_geophysique_comptage_thorium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_thorium",metadata_id:"335aec3a-52e5-49c4-8325-cd57b0751b47"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_thorium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_thorium__1"}]},{id:2194,name:"geo_geophysique_comptage_potassium",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_potassium",metadata_id:"39b205a1-2a16-44fe-9a16-c6e1fdd60084"},dimensions:{},type:"WMS",layers:"geo_geophysique_comptage_potassium",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_comptage_potassium__2"}]},{id:2195,name:"geo_geophysique_synthese_uthk",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_uthk",metadata_id:"bcbbc55a-e6b7-4b5a-ac62-dc5ce8b0825a"},dimensions:{},type:"WMS",layers:"geo_geophysique_synthese_uthk",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_synthese_uthk__3"}]},{id:2196,name:"geo_geophysique_champ_vlf",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_vlf",metadata_id:"ce816301-b6eb-480a-a891-6d394b635ff7"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_vlf",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_vlf__4"}]},{id:2197,name:"geo_geophysique_champ_total",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_total_residuel",metadata_id:"efcea741-1392-4c97-8233-3d31b64eb82a"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_total",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_total__5"}]},{id:2198,name:"geo_geophysique_champ_total_reduit_pole",metadata:{is_queryable:!0,legend_name:"geol:geophysique_aeroportee_total_residuel_reduit_pole",metadata_id:"b1b387a3-96d2-4a4b-9a1f-0add1712840c"},dimensions:{},type:"WMS",layers:"geo_geophysique_champ_total_reduit_pole",imageType:"image/png",style:"default",childLayers:[{name:"geo_geophysique_champ_total_reduit_pole__6"}]}],metadata:{},mixed:!0},{id:321,name:"pedologie",children:[{id:272,name:"pedologie_100k",metadata:{legend_name:"pedologie",metadata_id:"2d712a34-ce79-426d-a57b-b7cadf97b80f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"pedologie_100k",imageType:"image/png"},{id:702,name:"asta_pedologie_new",metadata:{legend_name:"pedologie_new",max_dpi:128,metadata_id:"37686d89-0173-4040-88c7-be84a3648d01"},dimensions:{},type:"WMS",layers:"asta_pedologie_new",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_new__9"},{name:"asta_pedologie_new__10"},{name:"asta_pedologie_new__11"},{name:"asta_pedologie_new__12"},{name:"asta_pedologie_new__13"},{name:"asta_pedologie_new__14"},{name:"asta_pedologie_new__15"}]},{id:704,name:"asta_pedologie_humus",metadata:{legend_name:"asta_corg",max_dpi:128,metadata_id:"a1b0807c-9bff-4f6a-a5e7-130316742f56"},dimensions:{},type:"WMS",layers:"asta_pedologie_humus",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_humus__0"}]},{id:703,name:"asta_pedologie_ph",metadata:{legend_name:"asta_ph",max_dpi:128,metadata_id:"628ee73f-4c37-4689-bc4c-1fd9f6bd2663"},dimensions:{},type:"WMS",layers:"asta_pedologie_ph",imageType:"image/png",style:"default",childLayers:[{name:"asta_pedologie_ph__0"}]},{id:2408,name:"asta_erosion_group",children:[{id:2760,name:"asta_rigoles_erosion_enquete",metadata:{is_queryable:!0,metadata_id:"00c1398d-604f-4e1b-9abd-af05261d80ba"},dimensions:{},type:"WMS",layers:"asta_rigoles_erosion_enquete",imageType:"image/png",childLayers:[{name:"asta_rigoles_erosion_enquete__2"}]},{id:2407,name:"asta_erosion_2023",metadata:{is_queryable:!0,metadata_id:"427aff9b-b988-455c-8cd9-1c029cfd6b6e",start_opacity:.25},dimensions:{},type:"WMS",layers:"asta_erosion_2023",imageType:"image/png",childLayers:[{name:"asta_erosion_2023__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2183,name:"geo_relief_group",children:[{id:1460,name:"wg_relief_map",metadata:{metadata_id:"7d195815-23c2-4963-863c-60e3a39ab8af"},dimensions:{},type:"WMS",layers:"wg_relief_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_relief_map__0"}]},{id:1461,name:"wg_hangneigung_map",metadata:{legend_name:"wg:hangneigung",metadata_id:"6ffa94a4-af02-43ec-82e0-6796cd01a948"},dimensions:{},type:"WMS",layers:"wg_hangneigung_map",imageType:"image/png",style:"default",childLayers:[{name:"wg_hangneigung_map__0"}]},{id:1752,name:"lidar_2019_mnt",metadata:{legend_name:"lidar:mnt2019",metadata_id:"30577c48-b240-4f69-8431-e35ecaa85ebc"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"lidar_2019_mnt",imageType:"image/png"}],metadata:{},mixed:!0},{id:2184,name:"geo_decouverte_group",children:[{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{display_in_switcher:!0}},{id:2332,name:"3D Layers",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:1958,name:"3d Layers",children:[{id:2346,name:"ACT2022_BD_L_BATI3D_LOD2",metadata:{exclusion:'["mesh_2020_vs_bd-l-bati-3d"]',metadata_id:"2e8b722a-87ea-4b62-a307-423832adabab",ol3d_defaultlayer:!0,ol3d_options:{cesium3DTileStyle:{show:"! ( ${id} === '00855_00750-000001'||${id} === '00850_00755-000001_1on9'||${id} === '00850_00755-000001_2on9'||${id} === '00850_00755-000001_3on9'||${id} === '00850_00755-000001_4on9'||${id} === '00850_00755-000001_5on9'||${id} === '00850_00755-000001_6on9'||${id} === '00850_00755-000001_7on9'||${id} === '00850_00755-000001_8on9'||${id} === '00850_00755-000001_9on9'||${id} === '00850_00750-000001'||${id} === '00635_00675-000004_1on8'||${id} === '00635_00675-000004_2on8'||${id} === '00635_00675-000004_3on8'||${id} === '00635_00675-000004_4on8'||${id} === '00635_00675-000004_5on8'||${id} === '00635_00675-000004_6on8'||${id} === '00635_00675-000004_7on8'||${id} === '00635_00675-000004_8on8'||${id} === '00635_00675-000005_1on5'||${id} === '00635_00675-000005_2on5'||${id} === '00635_00675-000005_3on5'||${id} === '00635_00675-000005_4on5'||${id} === '00635_00675-000005_5on5'||${id} === '00635_00675-000002_1on2'||${id} === '00635_00675-000002_2on2'||${id} === '00635_00675-000003_1on2'||${id} === '00635_00675-000003_2on2'||${id} === '01020_00905-000023_1on9'||${id} === '01020_00905-000023_2on9'||${id} === '01020_00905-000023_3on9'||${id} === '01020_00905-000023_4on9'||${id} === '01020_00905-000023_5on9'||${id} === '01020_00905-000023_6on9'||${id} === '01020_00905-000023_7on9'||${id} === '01020_00905-000023_8on9'||${id} === '01020_00905-000023_9on9' )"}}},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2022_BD_L_BATI3D_LOD2",imageType:"image/png"},{id:2348,name:"VDL2022_LOD2_IMPORT",metadata:{exclusion:'["mesh_2020_vs_bd-l-bati-3d_vdl"]',metadata_id:"a116f21e-faf1-4bdd-9a29-064fd9a30b8d",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"VDL2022_LOD2_IMPORT_old",imageType:"image/png"},{id:2350,name:"VDL2022_BRIDGES_IMPORT",metadata:{exclusion:'["mesh_2020_vs_bridges_vdl"]',metadata_id:"95c91657-5d7b-4b1f-bc74-de0e2db0f5c7",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"Bridges_LOD2",imageType:"image/png"},{id:2397,name:"ACT2019_LiDAR_Bridges",metadata:{exclusion:'["mesh_2020_vs_bridges_ACT"]',metadata_id:"0690e5cb-50df-4cf8-8cf3-d12dbecfc171",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Bridges_LOD1",imageType:"image/png"},{id:2384,name:"ACT2019_LiDAR_Vegetation",metadata:{exclusion:'["mesh_2020_vs_trees"]',metadata_id:"99180a32-bf64-46c2-b901-ce055b0f01fe",ol3d_defaultlayer:!0},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Vegetation",imageType:"image/png"},{id:2538,name:"ACT2019_LiDAR_Powerlines",metadata:{},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles",layer:"ACT2019_LiDAR_Powerlines",imageType:"image/png"}],metadata:{display_in_switcher:!0,is_expanded:!0},mixed:!0},{id:2447,name:"reference_objects_3d",children:[{id:2446,name:"OBJ3D_sharedBikes",metadata:{},dimensions:{},type:"WMTS",url:"https://acts3.geoportail.lu/3d-data/3d-tiles/OBJECTS3D",layer:"SharedBikes",imageType:"image/png"}],metadata:{},mixed:!0}],functionalities:{},metadata:{ol3d_type:"data"}},{id:2576,name:"anf_expo",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2577,name:"anf_expo_einleitung",children:[{id:2601,name:"anf_overlay_expo_biosphere",metadata:{is_queryable:!0,start_opacity:.7},dimensions:{},type:"WMS",layers:"anf_overlay_expo_ort",imageType:"image/png",style:"default",childLayers:[{name:"anf_overlay_expo_biosphere__2"},{name:"anf_overlay_expo_biosphere__3"}]},{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]}],metadata:{},mixed:!0},{id:2578,name:"anf_expo_biodiversitaet",children:[{id:804,name:"anf_zpin_declarees",metadata:{is_queryable:!0,legend_name:"anf:zpin_declarees",metadata_id:"9439d9b1-eff6-47b5-a4c7-4c5bde2744f4"},dimensions:{},type:"WMS",layers:"anf_zpin_declarees",imageType:"image/png",style:"default",childLayers:[{name:"anf_zpin_declarees__ZPIN_DECLAREES"}]},{id:2482,name:"anf_corridors_faune_sauvage",metadata:{metadata_id:"58a2c50b-0f4e-4d9c-95ff-5851eebf6e58"},dimensions:{},type:"WMS",layers:"anf_corridors_faune_sauvage",imageType:"image/png",style:"default",childLayers:[{name:"anf_corridors_faune_sauvage__corridors_ecologiques"}]},{id:1822,name:"anf_projets_compensation_approuves",metadata:{is_queryable:!0,metadata_id:"03aafc0c-c443-42ea-963a-8538a3f089d4"},dimensions:{},type:"WMS",layers:"anf_projets_compensation_approuves",imageType:"image/png",style:"default",childLayers:[{name:"anf_projets_compensation_approuves__ZONES_COMPENSATION_APPROUVEES"}]}],metadata:{},mixed:!0},{id:2580,name:"anf_expo_landwirtschaft",children:[{id:559,name:"eau_new_Zones_interdiction_utilisation_metazachlore",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:11.3349336",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"591d66aecc765e79df289232",is_queryable:!1,legend_name:"eau_new:metazachlore",max_dpi:128,metadata_id:"803e93f8-588f-4697-8d76-972be1ad3531",start_opacity:.7},dimensions:{},type:"WMS",layers:"eau_new_Zones_interdiction_utilisation_metazachlore",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Zones_interdiction_utilisation_metazachlore__304"}]},{id:1368,name:"anf_biotopes_vergers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_vergers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_vergers__BIOTOPES_MO_VERGERS_GEOPORTN"}]},{id:1369,name:"anf_biotopes_surfaces",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"f46eace4-8a83-4fa5-b2dd-a417a46fc720"},dimensions:{},type:"WMS",layers:"anf_biotopes_surfaces",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_surfaces__BIOTOPES_MO_SURFACES_GEOPORTN"}]}],metadata:{},mixed:!0},{id:2582,name:"anf_expo_wasser",children:[{id:573,name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",metadata:{geocatalog_open_data_last_update_date:"2024-10-09T01:03:43.6506495",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"596e7451111e9b72855243a1",is_queryable:!0,legend_name:"eau:zps_durch_grosshrzgl._verordnung_festgelegt",max_dpi:128,metadata_id:"d70f99e0-6032-4a4b-b516-5dfdfce33b26"},dimensions:{},type:"WMS",layers:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_ZPS_durch_grosshrzgl._Verordnung_festgelegt__132"}]},{id:567,name:"eau_new_Trinkwasserentnahmepunkte",metadata:{geocatalog_open_data_last_update_date:"2024-09-12T01:04:21.3958552",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"57ecb044cc765e17f1820812",is_queryable:!0,legend_name:"eau:trinkwasserentnahmepunkte",max_dpi:128,metadata_id:"a049086b-9c17-4ba6-b9bf-78cb4af8ee68"},dimensions:{},type:"WMS",layers:"eau_new_Trinkwasserentnahmepunkte",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Trinkwasserentnahmepunkte__47"}]},{id:749,name:"eau_new_Gewässer",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewässer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewässer__23"},{name:"eau_new_Gewässer__24"},{name:"eau_new_Gewässer__25"}]},{id:2119,name:"eau_Hochwassergefahrenkarten_HQext_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"cd0f52f7-7226-4748-95e0-b77025284423"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQext_2021",imageType:"image/png"}],metadata:{},mixed:!0},{id:2581,name:"anf_expo_stadt",children:[{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]},{id:1813,name:"myenergy_solarkataster_luxemburg_solar_potentials",metadata:{is_queryable:!0,legend_name:"energie:potentiel_solaire",metadata_id:"97628fac-c53b-4426-a829-b188105b9ead",ogc_info_format:"geojson",ogc_info_srs:"epsg:3857",ogc_query_layers:["st_luxemburg_22_feature_info"]},dimensions:{},type:"WMS",layers:"myenergy_solarkataster_luxemburg_solar_potentials",imageType:"image/png",style:"default",childLayers:[{name:"myenergy_solarkataster_luxemburg_solar_potentials__st_luxemburg_22_solar_potentials"}]}],metadata:{},mixed:!0},{id:2579,name:"anf_expo_wald",children:[{id:2472,name:"anf_biotopes_forestiers",metadata:{is_queryable:!0,legend_name:"env:cadastre_biotopes",metadata_id:"18698bbe-4d55-42b8-baca-62cab9705b5f"},dimensions:{},type:"WMS",layers:"anf_biotopes_forestiers",imageType:"image/png",style:"default",childLayers:[{name:"anf_biotopes_forestiers__BIOTOPES_MILIEU_FERME_GEOPORTN"}]}],metadata:{},mixed:!0}],functionalities:{},metadata:{}},{id:2742,name:"school",icon:"https://migration.geoportail.lu/static/ddc9f661fc1b496c919d096d89f6f3fb/images/blank.png",children:[{id:2753,name:"school_basisdaten",children:[{id:2754,name:"school_verwaltungseinheiten",children:[{id:302,name:"communes",metadata:{is_queryable:!0,linked_layers:["269"],metadata_id:"de5373d6-340f-4203-a065-da7550a03cc4_2049"},dimensions:{},type:"WMS",layers:"communes",imageType:"image/png",style:"default",childLayers:[{name:"communes__COMMUNES"}]},{id:269,name:"communes_labels",metadata:{is_queryable:!0,metadata_id:"17c7d883-ff7f-4b48-a894-46bea40d2e49"},dimensions:{},type:"WMS",layers:"communes_labels",imageType:"image/png",style:"default",childLayers:[{name:"communes_labels__COMMUNES_LABELS"}]},{id:329,name:"cantons",metadata:{is_queryable:!0,metadata_id:"e8a034e8-f986-4745-a848-b7ef30ce2740"},dimensions:{},type:"WMS",layers:"CANTONS",imageType:"image/png",style:"default",childLayers:[{name:"cantons__CANTONS"}]},{id:346,name:"cantons_labels",metadata:{is_queryable:!0,metadata_id:"3af20a80-be4a-4819-a42b-18e49af799aa"},dimensions:{},type:"WMS",layers:"cantons_labels",imageType:"image/png",style:"default",childLayers:[{name:"cantons_labels__CANTONS_LABELS"}]},{id:354,name:"districts",metadata:{is_queryable:!0,metadata_id:"b9edd03f-3aef-4fd6-a3d9-db076b1cf237"},dimensions:{},type:"WMS",layers:"districts",imageType:"image/png",style:"default",childLayers:[{name:"districts__DISTRICTS"}]},{id:268,name:"districts_labels",metadata:{is_queryable:!0,metadata_id:"c42842e2-834a-427a-99f6-eb8cb79d1db4"},dimensions:{},type:"WMS",layers:"districts_labels",imageType:"image/png",style:"default",childLayers:[{name:"districts_labels__DISTRICTS_LABELS"}]}],metadata:{},mixed:!0},{id:2755,name:"school_adressen",children:[{id:165,name:"adressen",children:[{id:152,name:"addresses",metadata:{is_queryable:!0,metadata_id:"28b310e4-b9e1-467c-a28d-fce2e9a96548"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"addresses",imageType:"image/png"}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2757,name:"school_topo_karten",children:[{id:734,name:"utm_grid",metadata:{max_dpi:128,metadata_id:"84f59e51-2772-4b6d-8c5b-3ec19aa7d8f2"},dimensions:{},type:"WMS",layers:"utm_grid",imageType:"image/png",style:"default",childLayers:[{name:"utm_grid__2"},{name:"utm_grid__3"}]},{id:738,name:"luref_graticules",metadata:{max_dpi:128,metadata_id:"0d1a431c-36b0-406f-8cfd-d264d4949bf0"},dimensions:{},type:"WMS",layers:"luref_graticules",imageType:"image/png",style:"default",childLayers:[{name:"luref_graticules__0"},{name:"luref_graticules__1"}]}],metadata:{},mixed:!0},{id:2756,name:"school_luftbilder",children:[{id:2537,name:"ortho_2022",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"63f18835-55ac-448c-a0ea-dc998933077b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2022",imageType:"image/jpeg"},{id:2272,name:"ortho_2021",metadata:{exclusion:"[121,221]",metadata_id:"ea0bd2ff-b743-4f3a-bd9b-450976563de9"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2021",imageType:"image/jpeg"},{id:2056,name:"ortho_2020",metadata:{exclusion:"[119,219]",metadata_id:"87870b8a-10a1-4c33-bf50-7efe851fd450"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"ortho_2020",imageType:"image/jpeg"},{id:1784,name:"ortho_2019",metadata:{exclusion:"[116,216]",metadata_id:"97c88ef6-6c64-4cb0-a134-06bb42b2b448"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2019",imageType:"image/jpeg"},{id:1527,name:"ortho_2018",metadata:{exclusion:"[113,213]",metadata_id:"6fde72c4-802f-4663-be74-5fa5901cb4f0"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2018",imageType:"image/jpeg"},{id:1371,name:"ortho_2017",metadata:{exclusion:"[111,211]",metadata_id:"1cdae616-1a7a-49d5-b35d-05864891641f"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2017",imageType:"image/jpeg"},{id:745,name:"ortho_2016",metadata:{exclusion:"[107,207]",metadata_id:"bba79b6d-4205-4ce4-98e4-7b7922afcd55"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2016",imageType:"image/jpeg"},{id:360,name:"ortho_2013",metadata:{exclusion:"[106,206]",metadata_id:"ced4a3dd-135e-43d0-86b9-2318982581f7"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2013",imageType:"image/jpeg"},{id:342,name:"ortho_2010",metadata:{exclusion:"[105,205]",metadata_id:"0faf4bdb-a54b-42d7-942c-4e52fa66e963"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2010",imageType:"image/jpeg"},{id:231,name:"ortho_2007",metadata:{exclusion:"[101,201]",metadata_id:"3be3d98e-7997-4ff6-8d77-e393a5fc4fdd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2007",imageType:"image/jpeg"},{id:224,name:"ortho_2004",metadata:{exclusion:"[103,203]",metadata_id:"a185f78a-ca9c-43f8-8d06-b1abba8ff056"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2004",imageType:"image/jpeg"},{id:225,name:"ortho_2001",metadata:{exclusion:"[104,204]",metadata_id:"e6ff269c-1c7c-401f-a90b-b805e80a046e"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"ortho_2001",imageType:"image/jpeg"},{id:2592,name:"act_ortho_time",metadata:{exclusion:'["exclusion_ortho2022","exclusion_ortho2022_bati"]',metadata_id:"1adb95b0-d0a5-4afa-936a-c9faa9edba2c",time_config:'{"default_time":"2023-08","time_links":{"2001-08":"ortho_2001","2004-08":"ortho_2004","2007-08":"ortho_2007","2010-08":"ortho_2010","2013-08":"ortho_2013","2016-08":"ortho_2016","2017-08":"ortho_2017","2018-08":"ortho_2018","2019-01":"ortho_2019_winter","2019-08":"ortho_2019","2020-08":"ortho_2020","2021-08":"ortho_2021","2022-08":"ortho_2022","2023-08":"ortho_2023"}}',time_layers:{"2001-08-01T00:00:00Z":"ortho_2001","2004-08-01T00:00:00Z":"ortho_2004","2007-08-01T00:00:00Z":"ortho_2007","2010-08-01T00:00:00Z":"ortho_2010","2013-08-01T00:00:00Z":"ortho_2013","2016-08-01T00:00:00Z":"ortho_2016","2017-08-01T00:00:00Z":"ortho_2017","2018-08-01T00:00:00Z":"ortho_2018","2019-01-01T00:00:00Z":"ortho_2019_winter","2019-08-01T00:00:00Z":"ortho_2019","2020-08-01T00:00:00Z":"ortho_2020","2021-08-01T00:00:00Z":"ortho_2021","2022-08-01T00:00:00Z":"ortho_2022","2023-08-01T00:00:00Z":"ortho_2023"}},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR_4_V3",layer:"act_ortho_time",imageType:"image/jpeg",time:{minValue:"2001-08-01T00:00:00Z",maxValue:"2023-08-01T00:00:00Z",values:["2001-08-01T00:00:00Z","2004-08-01T00:00:00Z","2007-08-01T00:00:00Z","2010-08-01T00:00:00Z","2013-08-01T00:00:00Z","2016-08-01T00:00:00Z","2017-08-01T00:00:00Z","2018-08-01T00:00:00Z","2019-01-01T00:00:00Z","2019-08-01T00:00:00Z","2020-08-01T00:00:00Z","2021-08-01T00:00:00Z","2022-08-01T00:00:00Z","2023-08-01T00:00:00Z"],resolution:"month",minDefValue:"2023-08-01T00:00:00Z",maxDefValue:null,mode:"value",widget:"slider"}}],metadata:{},mixed:!0}],metadata:{},mixed:!0},{id:2747,name:"school_themen",children:[{id:2743,name:"school_thema_gesteinskreislauf",children:[{id:2169,name:"geo_carte_geol_simplifiee",metadata:{is_queryable:!0,legend_name:"geol:geologie_simplifiee",metadata_id:"d5235bf1-96c8-4fc8-8d6d-2a0cde246aad"},dimensions:{},type:"WMS",layers:"geo_carte_geol_simplifiee",imageType:"image/png",style:"default",childLayers:[{name:"geo_carte_geol_simplifiee__2"},{name:"geo_carte_geol_simplifiee__1"},{name:"geo_carte_geol_simplifiee__0"}]},{id:2173,name:"geo_coupes_geologiques",metadata:{is_queryable:!0,legend_name:"geol:coupes_geologiques",metadata_id:"8a35490a-8dc8-4dfd-9136-edfdd6d08281"},dimensions:{},type:"WMS",layers:"geo_coupes_geologiques",imageType:"image/png",style:"default",childLayers:[{name:"geo_coupes_geologiques__0"}]},{id:2176,name:"geo_forages_ref",metadata:{is_queryable:!0,legend_name:"geol:forages_ref",metadata_id:"0564eda7-c92d-4a80-b3c7-be94f5d67186"},dimensions:{},type:"WMS",layers:"geo_forages_ref",imageType:"image/png",style:"default",childLayers:[{name:"geo_forages_ref__0"}]},{id:2021,name:"tour_rando_natur_geologie_new",metadata:{is_queryable:!0,linked_layers:["667"],metadata_id:"4f360781-3708-416a-a6d5-8944a4864737"},dimensions:{},type:"WMS",layers:"tour_rando_natur_geologie_new",imageType:"image/png",style:"default",childLayers:[{name:"tour_rando_natur_geologie_new__category"}]}],metadata:{},mixed:!0},{id:2744,name:"school_thema_fluesse",children:[{id:749,name:"eau_new_Gewässer",metadata:{geocatalog_open_data_last_update_date:"2024-10-04T01:04:10.2318338",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"weekly",geocatalog_open_data_uuid:"57ece2a1cc765e1a24228124",is_queryable:!0,legend_name:"eau:primaere_gewaesser_sekundaere_gewaesser_temporaer_fliessende_baeche",metadata_id:"9da34ec3-89d5-4731-b927-e38ed8088571"},dimensions:{},type:"WMS",layers:"eau_new_Gewässer",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Gewässer__23"},{name:"eau_new_Gewässer__24"},{name:"eau_new_Gewässer__25"}]},{id:655,name:"eau_new_Wasserstand",metadata:{geocatalog_open_data_last_update_date:"2024-09-29T01:05:12.0164112",geocatalog_open_data_only_add_gpkg:!0,geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"monthly",geocatalog_open_data_uuid:"59c220a4111e9b1de61d8864",is_queryable:!0,legend_name:"eau:wasserstand",max_dpi:128,metadata_id:"124abb10-1d87-4449-912b-06fbf307a95f"},dimensions:{},type:"WMS",layers:"eau_new_Wasserstand",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Wasserstand__2"}]}],metadata:{},mixed:!0},{id:2745,name:"school_thema_ueberschwemmungen",children:[{id:2117,name:"eau_Hochwassergefahrenkarten_HQ10_2021",metadata:{legend_name:"eau:inondations_2019",metadata_id:"153130ef-8255-4bce-bca0-d2359d277995"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"eau_Hochwassergefahrenkarten_HQ10_2021",imageType:"image/png"},{id:2045,name:"age_dangers_fortes",metadata:{legend_name:"age_dangers_fortes",metadata_id:"55dbe91c-f1e5-4c56-b0b9-4590988e23e5"},dimensions:{},type:"WMS",layers:"age_dangers_fortes",imageType:"image/png",style:"default",childLayers:[{name:"age_dangers_fortes__0"},{name:"age_dangers_fortes__1"}]},{id:758,name:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans",metadata:{geocatalog_open_data_last_update_date:"2024-09-14T01:03:13.4638796",geocatalog_open_data_publish_flag:!0,geocatalog_open_data_update_frequency:"once",geocatalog_open_data_uuid:"66e4e0d15a1785364d6db3fb",is_queryable:!0,legend_name:"eau:massnahmens_des_hochwasserrisikomanagementplans",metadata_id:"4326fea6-7ec4-4bb9-861f-4476b0d4ceac"},dimensions:{},type:"WMS",layers:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans",imageType:"image/png",style:"default",childLayers:[{name:"eau_new_Maßnahmens des Hochwasserrisikomanagementplans__314"}]},{id:1952,name:"LISL_taux_impermeabilisation_2018",metadata:{is_queryable:!0,legend_name:"lisl_taux_impermeabilisation_2018",metadata_id:"5b40c571-dd3c-4e76-8f4f-b54746799688"},dimensions:{},type:"WMS",layers:"LISL_taux_impermeabilisation_2018",imageType:"image/png",style:"default",childLayers:[{name:"LISL_taux_impermeabilisation_2018__0"},{name:"LISL_taux_impermeabilisation_2018__1"}]}],metadata:{},mixed:!0},{id:2746,name:"school_thema_minette",children:[{id:2213,name:"at_unesco_minett",metadata:{is_queryable:!0,legend_name:"at:unesco_minett",metadata_id:"815fc4a3-95ef-47b6-a9ff-fa7e88654639"},dimensions:{},type:"WMS",layers:"at_unesco_minett",imageType:"image/png",style:"default",childLayers:[{name:"at_unesco_minett__0"}]}],metadata:{},mixed:!0}],metadata:{},mixed:!0}],functionalities:{},metadata:{}}],background_layers:[{id:556,name:"basemap_2015_global",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[31, 32]",legend_name:"act:roadmap_vt",metadata_id:"a1fea2a0-e0a0-4e5f-a61d-9b3c3a9426bd"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"basemap_2015_global",imageType:"image/png"},{id:502,name:"topo_bw_jpeg",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[35, 45]",legend_name:"act_topovt_bw",metadata_id:"b786acc2-b87e-4c7a-aff7-52778357243b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topo_bw_jpeg",imageType:"image/jpeg"},{id:529,name:"topogr_global",metadata:{attribution:`&copy; <a href='https://www.maptiler.com/copyright/'>MapTiler</a> &copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap</a> contributors for data outside of Luxembourg`,exclusion:"[36, 46]",legend_name:"act_topovt",metadata_id:"b786acc2-b87e-4c7a-aff7-52778357243b"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"topogr_global",imageType:"image/png"},{id:530,name:"orthogr_2013_global",metadata:{exclusion:"[21, 22]",hasRetina:!1,metadata_id:"554cb3f9-a6e7-4e0e-8d62-0853dfd33c32"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"orthogr_2013_global",imageType:"image/jpeg"},{id:501,name:"streets_jpeg",metadata:{exclusion:"[11, 12]",hasRetina:!1,metadata_id:"c427b194-53ba-418d-9b4a-226a8cbfd568"},dimensions:{},type:"WMTS",url:"http://wmts.geoportail.lu/mapproxy_4_v3/wmts/1.0.0/WMTSCapabilities.xml",style:"default",matrixSet:"GLOBAL_WEBMERCATOR",layer:"streets_jpeg",imageType:"image/png"}],errors:[],lux_3d:{terrain_url:"https://acts3.geoportail.lu/3d-data/3d-tiles/terrain3D/lidar_2019_terrain/3DTiles"}}),KQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM0AAAAoCAMAAABq645qAAACPVBMVEUAAABaW13////tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy7tGy5aW13tGy5DjxTaAAAAvXRSTlMAAAABAgMEBQYHCAkKCwwNDg8QERESFBUWFxkaGx0eHyAhIiInKSosMTIzNTY5Ojs8PUFCQ0RERkpMTk9QU1RVVldaXmFjZWZmamtwcXJzdXd3eHl7fX+AgYKDhIaHiIiKi4yOj5CTlJWWl5iZmZqcnZ+goaKjpKanqKqqq6ywsbK0tbW4u7u8vb6/wMHExcbHysvMzM7P0NDS1NXa29zd3t/g4eTl5ujp6uvs7e7u8PLz9PX29/j5+vv8/f5cALqzAAAEcklEQVRo3u3Z+ZPUVBAH8O63LsLKijoIgotHFI+HgiKNeGC8MCqgUUFAJYjgAQ6HKMgGEQQiqChIPFh1iciiwPIEhvv49t/mD5lBORa2tHbLTO2rmqnUTCrJZ3r65ZuEjDHGGLrMWGcKMah7mh/7NP8PzXBqbqgfzdtPb7i/fjQPvq8r5jUVXNNIY4moYeL6+XNfn9Ov6LUZ2/Z7Pxo3YaZWTp/uLPw/reXYbqLRPz/38g+qJ/oTEV396IzmgmquXHZoIRHd/sTs31T1DqIBcyqHZjQWtTbf6nQiokHLVVWn7ju4euXGjsX9LtTAGgPAGGMzOPZSOGFYtmAXsO8skFkgZovQgi2QcZKyIGAAjJQtIgAB/5vRTc2IvbqSqOWNJQdUVdfe+/zitmsu2jeQ/GWMC43HacRhxhAWcJRyEgmYBSVYgROwgJkzeGVEDGEGotqnPaih1Xp63KSvVFVVtz0wt23AvMVda5AZY2FM7OWO/N2DwBMgESBiQZyABUgYSYQkYSBjhAh7QXN3Zfey7YdyzXh6aQpdu2fIpWsD30CykKOU4XPgmBPEnNcmC1jgIT9uCx9ZkOW1kQi9oBm6aMvO3KIVomUPES19/KIaoNo34uA8cUgtB4DzmQXCFoCFhbXgMtgC8DNGKMj7xnIKtj2toeGf55X5c9+ZRpo1lWjyq5c/33Avj+5obpz25miiwd+p6q4/2jfvIrqtrYlemF5MzZObTuhHCw6cUd2y/91ftj5DRJOn0JKniqm56jPtUNXDx44u6NywvaPzPqL+G5v3jCimhhqaX/vyi6VTxtzyYkVV9dSsRvrmnVXUI5oo7GkNEV2RH/igaRVV1Y8fOdE+tEc0tlzqBU1tND+7U1W18t51F8/QAFJrkUccL4VjABFb+MwoMyznszWzBZxfDT2SIbZgm0/TzBbIpLqcr8GwScJxfF4UiliAgGEZ1gKx8VK4bmuafmpdrqr6cFdXBJBSORPkp9A0ZI8hAi4jYQY8CEN8MDML2K/FBBdwKU80kOp3eSBirq7BkJJLstK5UShw+eYhDBGUYNPQeN3WTND2rd+r6oquNUZQ00A49gCEJQg8RhJD8j0DQX6IEBZYMLMAAANZrpHa8lkNBwjOi0Ion90KRIDIQEzsdVfzlurhT1X11F2XqE3qwfNQMiYLGYIYNgAQMcTltXHV3z9w1dAD/8LapH/XJt9eycWudG4U8lGrjYeSIAtMFlaD1SU1NxAR0cA9qrpqr6ruaOmybxLPREBojLEOzoMNkAXsO4YNYRnIpNo3WS30+EByXt+kttY3AEdAyGmZ4/TcKORCDgDhEAg5D0wO7vK1mbmwhajxA9XWkXTTh8dVj6wZX9gr6ZFL9eTm1nbVhUREdOs2Vb25sJqmRTuOq+r+rwfmgGEHVYcU+H7a8KNrdP6kYTXBJ6qPFVjT2DxwzD/msbWqE+vnrvqvevSeutGMUm0dXC+ahk3asb5unt+8cvLIqOvr52nU7Dv7nq31afo0/0mzrhiavwAx1n2SsZnMdgAAAABJRU5ErkJggg==",qQ="fr",jQ=!0,JQ=!1,QQ=!1,$Q=!1,e$=!1,t$=!1,a$=!1,i$=!1,n$=!1,r$=!1,yi=rl("app",()=>{const a=Qe(!1),e=Qe(!1),t=Qe(qQ),i=Qe(jQ),n=Qe(JQ),s=Qe(QQ),r=Qe($Q),l=Qe(),c=Qe(e$),h=Qe(t$),g=Qe(a$),b=Qe(i$),v=Qe(n$),C=Qe(r$),S=Qe(),L=Qe(!1),R=Qe(void 0),G=Qe(!1),O=Qe(!1),V=Qe(!1),B=Qe(!1),z=Qe(!1);function j(We){z.value=We}function re(We){t.value=We}function ne(We){i.value=We}function te(We){s.value=We,s.value&&(r.value=!1,n.value=!1)}function le(We){r.value=We,r.value&&(L.value=!1,n.value=!1)}function ue(){r.value?(i.value=!1,n.value=!1,c.value=!1,r.value=!1):(r.value=!0,i.value=!0,n.value=!1,c.value=!1,h.value=!1,L.value=!1,s.value&&(s.value=!1))}function fe(We){S.value=We}function be(We){l.value=We}function Pe(){L.value=!0,i.value=!1}function Be(){L.value=!1,i.value=!0}function Me(We){a.value=We??!a.value}function ke(We){G.value=We??!G.value}function Je(We){c.value=We??!c.value}function ut(We){n.value=We??!n.value}function ht(We){h.value=We??!h.value}function Dt(We){V.value=We??!V.value}return{authFormOpened:a,embedded:e,lang:t,layersOpen:i,legendsOpen:n,myLayersTabOpen:s,themeGridOpen:r,mapId:l,myMapsOpen:c,infoOpen:h,feedbackOpen:g,feedbackanfOpen:b,feedbackageOpen:v,feedbackcruesOpen:C,styleEditorOpen:L,styleEditorOpenedSection:R,remoteLayersOpen:S,drawToolbarOpen:G,measureToolbarOpen:O,isOffLine:B,isApp:z,setIsApp:j,printToolbarOpen:V,setLang:re,setLayersOpen:ne,setMyLayersTabOpen:te,setThemeGridOpen:le,setRemoteLayersOpen:fe,setMapId:be,openStyleEditorPanel:Pe,closeStyleEditorPanel:Be,toggleAuthFormOpen:Me,toggleDrawToolbarOpen:ke,togglePrintToolbarOpen:Dt,toggleMyMapsOpen:Je,toggleInfoOpen:ht,toggleThemeGrid:ue,toggleLegendsOpen:ut}},{}),w1=rl("user-manager",()=>{const a=yi(),{isOffLine:e}=Zt(a),t=Qe(void 0),i=Ft(()=>e.value||!!t.value);function n(){return i.value}function s(l){if(l.login)t.value=l;else throw r(),new Error("Invalid username or password")}function r(){t.value=void 0}return{authenticated:i,currentUser:t,clearUser:r,isAuthenticated:n,setCurrentUser:s}},{}),UC="same-origin",s$="/login",o$="/logout",l$="/getuserinfo";class u${async authenticate(e,t,i=!1){const n=new URLSearchParams({login:e,password:t,app:i?"true":"false"}),s=await fetch(s$,{method:"POST",credentials:UC,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n});if(!s.ok)throw new Error("Error while trying to authenticate user");const r=await s.json();return this.mapUserApiToUser(r)}async logout(){const e=await fetch(o$,{credentials:UC});if(!e.ok)throw new Error("Error while trying to logout user");return await e.text()}async getUserInfo(){const e=new URLSearchParams({}),t=await fetch(l$,{method:"POST",credentials:UC,headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}),i=t.ok&&await t.json();if(!i.login)throw new Error("Error while trying to get user info");return this.mapUserApiToUser(i)}mapUserApiToUser(e){const{is_admin:t,login:i,mail:n,mymaps_role:s,role:r,role_id:l,sn:c,typeUtilisateur:h}=e;return{login:i,mail:n,isAdmin:t,mymapsRole:s,name:c,role:r,roleId:l,sn:c,typeUtilisateur:h}}}const XC=new u$;var ds=[];for(var HC=0;HC<256;++HC)ds.push((HC+256).toString(16).slice(1));function c$(a,e=0){return(ds[a[e+0]]+ds[a[e+1]]+ds[a[e+2]]+ds[a[e+3]]+"-"+ds[a[e+4]]+ds[a[e+5]]+"-"+ds[a[e+6]]+ds[a[e+7]]+"-"+ds[a[e+8]]+ds[a[e+9]]+"-"+ds[a[e+10]]+ds[a[e+11]]+ds[a[e+12]]+ds[a[e+13]]+ds[a[e+14]]+ds[a[e+15]]).toLowerCase()}var _v,d$=new Uint8Array(16);function h$(){if(!_v&&(_v=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!_v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _v(d$)}var _$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const bR={randomUUID:_$};function Vw(a,e,t){if(bR.randomUUID&&!e&&!a)return bR.randomUUID();a=a||{};var i=a.random||(a.rng||h$)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){t=t||0;for(var n=0;n<16;++n)e[t+n]=i[n];return e}return c$(i)}var su=(a=>(a.INFO="alert-info",a.WARNING="alert-warning",a.ERROR="alert-danger",a))(su||{});class m${constructor(e,t,i,n,s){_a(this,"timeoutID");this.uuid=e,this.message=t,this.type=i,this.duration=n,this.timer=s,this.start()}start(){this.timer&&(this.timeoutID=setTimeout(()=>this.timer(this.uuid),this.duration))}cancel(){clearTimeout(this.timeoutID)}}const g$=su.INFO,p$=7e3,f$=4e3,oc=rl("alert-notifications",()=>{const a=Qe([]);function e(i,n=g$,s){s=s??(n===su.WARNING?f$:p$);const r=new m$(Vw(),i,n,s,l=>t(l));return a.value.push(r),r.uuid}function t(i){a.value=a.value.filter(n=>(n.uuid===i&&n.cancel(),n.uuid!==i))}return{notifications:a,addNotification:e,removeNotification:t}},{}),y$={"data-cy":"authForm",class:"lux-account bg-secondary"},b$={class:"lux-panel-title pt-5 mb-5 pl-5 h-16 shrink-0 flex justify-between"},v$={class:"lux-account-content"},x$={class:"flex flex-col gap-2 mb-2"},w$=["placeholder"],I$=["placeholder"],C$={class:"flex mt-3 items-center"},A$={class:"grow leading-5"},S$=["href"],T$=["href"],E$=["value"],M$={key:1},L$={class:"flex flex-col gap-[1px] mb-2 text-white"},R$={class:"bg-secondary py-1 px-3"},k$={class:"bg-secondary py-1 px-3"},W$={class:"flex items-center gap-3 justify-end"},G$=["href"],O$=bt({__name:"auth-form",setup(a){const e="https://myaccount.geoportail.lu",t="https://myaccount.geoportail.lu/recover-password",i="https://myaccount.geoportail.lu/new-user",{t:n}=ya(),{addNotification:s}=oc(),{lang:r,isApp:l}=Zt(yi()),c=w1(),{setCurrentUser:h,clearUser:g}=c,{authenticated:b,currentUser:v}=Zt(c),C=Qe(!1),S=Qe(""),L=Qe("");Kt(b,z=>{!C.value&&z&&s(n("Vous êtes maintenant correctement connecté."))}),tr(()=>{XC.getUserInfo().then(z=>{C.value=!0,O(z)}).catch(()=>{})});function R(){XC.logout().then(()=>g()).catch(()=>s(n("Une erreur est survenue durant la déconnexion."),su.ERROR)),B()}function G(){XC.authenticate(S.value,L.value,l.value).then(z=>{C.value=!1,O(z)}).catch(V),B()}function O(z){h(z)}function V(){s(n("Invalid username or password."),su.WARNING),g()}function B(){S.value="",L.value=""}return(z,j)=>{var re,ne;return se(),Ie("div",y$,[q("h4",b$,Fe(X(n)("My account")),1),q("fieldset",null,[j[2]||(j[2]=q("legend",{class:"lux-account-tab"},null,-1)),q("div",v$,[X(b)?(se(),Ie("div",M$,[q("div",L$,[q("div",R$,Fe((re=X(v))==null?void 0:re.login),1),q("div",k$,Fe((ne=X(v))==null?void 0:ne.mail),1)]),q("div",W$,[q("div",null,[q("a",{class:"text-secondary hover:underline hover:text-white",target:"_blank",href:`${X(e)}?lang=${X(r)}`},Fe(X(n)("My account")),9,G$)]),q("div",null,[q("button",{class:"lux-btn",onClick:R},Fe(X(n)("Logout")),1)])])])):(se(),Ie("form",{key:0,onSubmit:Hl(G,["prevent"])},[q("div",x$,[q("div",null,[Mi(q("input",{class:"w-full lux-input h-11",type:"text",name:"userName","onUpdate:modelValue":j[0]||(j[0]=te=>S.value=te),placeholder:X(n)("Username"),required:""},null,8,w$),[[ac,S.value]])]),q("div",null,[Mi(q("input",{class:"w-full lux-input h-11",type:"password",name:"userPassword","onUpdate:modelValue":j[1]||(j[1]=te=>L.value=te),placeholder:X(n)("Password"),required:""},null,8,I$),[[ac,L.value]])])]),q("div",C$,[q("div",A$,[q("p",null,[q("a",{"data-cy":"authFormLostPwd",class:"text-secondary hover:underline hover:text-white",target:"_blank",href:X(t)},Fe(X(n)("I lost my password")),9,S$)]),q("p",null,[q("a",{"data-cy":"authFormNewAccount",class:"text-secondary hover:underline hover:text-white",target:"_blank",href:X(i)},Fe(X(n)("Create a new user account")),9,T$)])]),q("div",null,[q("input",{class:"lux-btn h-11 w-24 text-white placeholder:italic bg-secondary border-none uppercase hover:text-primary hover:bg-secondary",type:"submit",value:X(n)("Submit")},null,8,E$)])])],32))])])])}}}),P$={class:"h-full w-full"},B$=["aria-expanded"],F$={class:"lux-dropdown-wrapper"},N$=bt({__name:"dropdown-content",props:{placeholder:{},enableClickOutside:{type:Boolean,default:!0},isOpen:{type:Boolean,default:!1},direction:{}},emits:["toggleDropdown"],setup(a,{emit:e}){const t=a,i=e,n=Wi(t.isOpen);Kt(()=>t.isOpen,g=>{n.value=g});function s(g){n.value=g===void 0?!n.value:g,i("toggleDropdown",n.value)}function r(g){g.stopImmediatePropagation(),s()}function l(){s(!1)}const c=Qe(null),h=Qe("");return tr(()=>{t.enableClickOutside&&document.addEventListener("click",l),h.value=c.value?"lux-btn-"+getComputedStyle(c.value).getPropertyValue("--button-theme"):""}),Ds(()=>t.enableClickOutside&&document.removeEventListener("click",l)),(g,b)=>(se(),Ie("div",dT({class:"lux-dropdown"},g.$attrs,{ref_key:"root",ref:c}),[q("div",P$,[q("button",{type:"button",class:ti(["lux-btn lux-dropdown-btn",[n.value?"expanded":"",h.value]]),"aria-expanded":n.value,"aria-haspopup":"true",onClick:r},[q("span",null,Fe(t.placeholder),1),q("span",{class:ti(["lux-caret ml-1",{up:g.direction==="up"}])},null,2)],10,B$)]),q("div",F$,[q("div",{class:ti(["lux-dropdown-content",n.value?"":"hidden"]),tabindex:"-1"},[qa(g.$slots,"default",{},void 0,!0)],2)])],16))}});const x3=(a,e)=>{const t=a.__vccOpts||a;for(const[i,n]of e)t[i]=n;return t},hW=x3(N$,[["__scopeId","data-v-63914dd3"]]),D$=["data-cy"],V$=["aria-label","data-value"],dx=bt({__name:"dropdown-list",props:{placeholder:{},options:{default:()=>[{label:"Default label",value:"Default value"}]},modelValue:{},direction:{default:"down"}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Wi(),s=w6(t.direction);function r(c){n.value=c.target.dataset.value,i("change",n.value)}function l(){var c;return t.placeholder??((c=t.options.find(h=>h.value===t.modelValue))==null?void 0:c.label)}return(c,h)=>(se(),xa(hW,dT({placeholder:l(),direction:s.value},c.$attrs),{default:Ha(()=>[q("ul",{class:ti(["lux-dropdown-list",s.value])},[(se(!0),Ie(ua,null,Gn(t.options,g=>(se(),Ie("li",{key:g.value,class:ti(c.modelValue===g.value?"selected":""),"data-cy":`dropdownItem-${g.value}`},[q("button",{class:"lux-dropdown-list-item","aria-label":g.ariaLabel,"data-value":g.value,onClick:r},Fe(g.label),9,V$)],10,D$))),128))],2)]),_:1},16,["placeholder","direction"]))}});function Z$(a){return{fr:"fre",en:"eng",de:"ger",lb:"ltz"}[a.toLowerCase()]}function z$(a){return new DOMParser().parseFromString(a,"text/html").body}function U$(a){const e=[];function t(i){if(!i)return;const n=i.split("|");n[3]==="WWW:LINK-1.0-http--link"&&e.indexOf(n[2])===-1&&e.push(n[2])}return Array.isArray(a)?a.forEach(t,a):t(a),e}function X$(a){const t=(Array.isArray(a)?a:[a]).filter(i=>i.split("|")[1]==="metadata");return{organisaton:t[0].split("|")[2],name:t[0].split("|")[5],unknown:t[0].split("|")[6],address:t[0].split("|")[7],email:t[0].split("|")[4]}}const H$="/";var _W=(a=>(a.PNG="image/png",a.JPG="image/jpeg",a))(_W||{}),ed=(a=>(a.VALUE="value",a.RANGE="range",a))(ed||{}),u2=(a=>(a.DATEPICKER="datepicker",a.SLIDER="slider",a))(u2||{});function al(){const a=od();function e(h,g){try{const b=JSON.parse(h).concat(JSON.parse(g));return new Set(b).size<b.length}catch{return!1}}function t(h){var g;return h.opacity=h.previousOpacity=((g=h.metadata)==null?void 0:g.start_opacity)??1,i(h),h}function i(h){var b,v,C,S,L;h.currentTimeMinValue||(h.currentTimeMinValue=((b=h.time)==null?void 0:b.minDefValue)??((v=h.time)==null?void 0:v.minValue));const g=((C=h.time)==null?void 0:C.mode)===ed.RANGE;!h.currentTimeMaxValue&&g&&(h.currentTimeMaxValue=((S=h.time)==null?void 0:S.maxDefValue)??((L=h.time)==null?void 0:L.maxValue))}function n(h){var v,C;const g=s(h);let b=h.name;return g&&(b=((C=(v=h.metadata)==null?void 0:v.time_layers)==null?void 0:C[g])??b),b}function s(h){return[h.currentTimeMinValue,...h.currentTimeMaxValue?[h.currentTimeMaxValue]:[]].join(H$)}function r(h){var C,S;const g=oc();if(!((C=h.metadata)!=null&&C.exclusion))return;const b=mn(),v=b.layers.filter(L=>{var R,G;return e((R=h==null?void 0:h.metadata)==null?void 0:R.exclusion,(G=L==null?void 0:L.metadata)==null?void 0:G.exclusion)});v.length>0&&(b.removeLayers(...v.map(L=>L.id)),g.addNotification(_n.t("The layer <b>{{layersToRemove}}</b> has been removed because it cannot be displayed while the layer <b>{{layer}}</b> is displayed",{count:v.length,layersToRemove:v.map(L=>_n.t(L.name,{ns:"client"})).join(", "),layer:_n.t(h.name,{ns:"client"}),ns:"client"}),su.WARNING)),h.id!==((S=b.bgLayer)==null?void 0:S.id)&&l(h)}function l(h){var v,C,S;const g=mn(),b=oc();e((v=h.metadata)==null?void 0:v.exclusion,(S=(C=g.bgLayer)==null?void 0:C.metadata)==null?void 0:S.exclusion)&&(g.setBgLayer(null),b.addNotification(_n.t("Background has been deactivated because the layer {{layer}} cannot be displayed on top of it.",{layer:_n.t(h.name,{ns:"client"}),ns:"client"}),su.WARNING))}function c(h,g=!0,b,v){var G;const C=ps(),S=mn(),L=b?C.layerTrees_3d:C.theme,R=a.findById(h,v?L:void 0);if(R){const O=((G=R.metadata)==null?void 0:G.linked_layers)||[];g===!1?S.removeLayers(R.id,...O):(r(R),(b?S.add3dLayers:S.addLayers)(t(R),...O.map(B=>t(a.findById(parseInt(B,10))))))}}return{initLayer:t,getLayerCurrentLabel:n,getLayerCurrentTime:s,handleExclusionLayers:r,toggleLayer:c}}class Em extends Error{}class Y$ extends Em{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class K$ extends Em{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class q$ extends Em{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class np extends Em{}class mW extends Em{constructor(e){super(`Invalid unit ${e}`)}}class ks extends Em{}class Yd extends Em{constructor(){super("Zone is an abstract class")}}const Xt="numeric",ou="short",il="long",hx={year:Xt,month:Xt,day:Xt},gW={year:Xt,month:ou,day:Xt},j$={year:Xt,month:ou,day:Xt,weekday:ou},pW={year:Xt,month:il,day:Xt},fW={year:Xt,month:il,day:Xt,weekday:il},yW={hour:Xt,minute:Xt},bW={hour:Xt,minute:Xt,second:Xt},vW={hour:Xt,minute:Xt,second:Xt,timeZoneName:ou},xW={hour:Xt,minute:Xt,second:Xt,timeZoneName:il},wW={hour:Xt,minute:Xt,hourCycle:"h23"},IW={hour:Xt,minute:Xt,second:Xt,hourCycle:"h23"},CW={hour:Xt,minute:Xt,second:Xt,hourCycle:"h23",timeZoneName:ou},AW={hour:Xt,minute:Xt,second:Xt,hourCycle:"h23",timeZoneName:il},SW={year:Xt,month:Xt,day:Xt,hour:Xt,minute:Xt},TW={year:Xt,month:Xt,day:Xt,hour:Xt,minute:Xt,second:Xt},EW={year:Xt,month:ou,day:Xt,hour:Xt,minute:Xt},MW={year:Xt,month:ou,day:Xt,hour:Xt,minute:Xt,second:Xt},J$={year:Xt,month:ou,day:Xt,weekday:ou,hour:Xt,minute:Xt},LW={year:Xt,month:il,day:Xt,hour:Xt,minute:Xt,timeZoneName:ou},RW={year:Xt,month:il,day:Xt,hour:Xt,minute:Xt,second:Xt,timeZoneName:ou},kW={year:Xt,month:il,day:Xt,weekday:il,hour:Xt,minute:Xt,timeZoneName:il},WW={year:Xt,month:il,day:Xt,weekday:il,hour:Xt,minute:Xt,second:Xt,timeZoneName:il};class I1{get type(){throw new Yd}get name(){throw new Yd}get ianaName(){return this.name}get isUniversal(){throw new Yd}offsetName(e,t){throw new Yd}formatOffset(e,t){throw new Yd}offset(e){throw new Yd}equals(e){throw new Yd}get isValid(){throw new Yd}}let YC=null;class Zw extends I1{static get instance(){return YC===null&&(YC=new Zw),YC}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return UW(e,t,i)}formatOffset(e,t){return d0(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}const BS=new Map;function Q$(a){let e=BS.get(a);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),BS.set(a,e)),e}const $$={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function eee(a,e){const t=a.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,n,s,r,l,c,h,g]=i;return[r,n,s,l,c,h,g]}function tee(a,e){const t=a.formatToParts(e),i=[];for(let n=0;n<t.length;n++){const{type:s,value:r}=t[n],l=$$[s];s==="era"?i[l]=r:Ka(l)||(i[l]=parseInt(r,10))}return i}const KC=new Map;class _d extends I1{static create(e){let t=KC.get(e);return t===void 0&&KC.set(e,t=new _d(e)),t}static resetCache(){KC.clear(),BS.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=_d.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return UW(e,t,i,this.name)}formatOffset(e,t){return d0(this.offset(e),t)}offset(e){if(!this.valid)return NaN;const t=new Date(e);if(isNaN(t))return NaN;const i=Q$(this.name);let[n,s,r,l,c,h,g]=i.formatToParts?tee(i,t):eee(i,t);l==="BC"&&(n=-Math.abs(n)+1);const v=Uw({year:n,month:s,day:r,hour:c===24?0:c,minute:h,second:g,millisecond:0});let C=+t;const S=C%1e3;return C-=S>=0?S:1e3+S,(v-C)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let vR={};function aee(a,e={}){const t=JSON.stringify([a,e]);let i=vR[t];return i||(i=new Intl.ListFormat(a,e),vR[t]=i),i}const FS=new Map;function NS(a,e={}){const t=JSON.stringify([a,e]);let i=FS.get(t);return i===void 0&&(i=new Intl.DateTimeFormat(a,e),FS.set(t,i)),i}const DS=new Map;function iee(a,e={}){const t=JSON.stringify([a,e]);let i=DS.get(t);return i===void 0&&(i=new Intl.NumberFormat(a,e),DS.set(t,i)),i}const VS=new Map;function nee(a,e={}){const{base:t,...i}=e,n=JSON.stringify([a,i]);let s=VS.get(n);return s===void 0&&(s=new Intl.RelativeTimeFormat(a,e),VS.set(n,s)),s}let Fy=null;function ree(){return Fy||(Fy=new Intl.DateTimeFormat().resolvedOptions().locale,Fy)}const ZS=new Map;function GW(a){let e=ZS.get(a);return e===void 0&&(e=new Intl.DateTimeFormat(a).resolvedOptions(),ZS.set(a,e)),e}const zS=new Map;function see(a){let e=zS.get(a);if(!e){const t=new Intl.Locale(a);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...OW,...e}),zS.set(a,e)}return e}function oee(a){const e=a.indexOf("-x-");e!==-1&&(a=a.substring(0,e));const t=a.indexOf("-u-");if(t===-1)return[a];{let i,n;try{i=NS(a).resolvedOptions(),n=a}catch{const c=a.substring(0,t);i=NS(c).resolvedOptions(),n=c}const{numberingSystem:s,calendar:r}=i;return[n,s,r]}}function lee(a,e,t){return(t||e)&&(a.includes("-u-")||(a+="-u"),t&&(a+=`-ca-${t}`),e&&(a+=`-nu-${e}`)),a}function uee(a){const e=[];for(let t=1;t<=12;t++){const i=Xa.utc(2009,t,1);e.push(a(i))}return e}function cee(a){const e=[];for(let t=1;t<=7;t++){const i=Xa.utc(2016,11,13+t);e.push(a(i))}return e}function mv(a,e,t,i){const n=a.listingMode();return n==="error"?null:n==="en"?t(e):i(e)}function dee(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||GW(a.locale).numberingSystem==="latn"}class hee{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:n,floor:s,...r}=i;if(!t||Object.keys(r).length>0){const l={useGrouping:!1,...i};i.padTo>0&&(l.minimumIntegerDigits=i.padTo),this.inf=iee(e,l)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{const t=this.floor?Math.floor(e):S3(e,3);return Mr(t,this.padTo)}}}class _ee{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let n;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){const r=-1*(e.offset/60),l=r>=0?`Etc/GMT+${r}`:`Etc/GMT${r}`;e.offset!==0&&_d.create(l).valid?(n=l,this.dt=e):(n="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,n=e.zone.name):(n="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const s={...this.opts};s.timeZone=s.timeZone||n,this.dtf=NS(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class mee{constructor(e,t,i){this.opts={style:"long",...i},!t&&ZW()&&(this.rtf=nee(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):Pee(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const OW={firstDay:1,minimalDays:4,weekend:[6,7]};class an{static fromOpts(e){return an.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,i,n,s=!1){const r=e||lr.defaultLocale,l=r||(s?"en-US":ree()),c=t||lr.defaultNumberingSystem,h=i||lr.defaultOutputCalendar,g=XS(n)||lr.defaultWeekSettings;return new an(l,c,h,g,r)}static resetCache(){Fy=null,FS.clear(),DS.clear(),VS.clear(),ZS.clear(),zS.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:i,weekSettings:n}={}){return an.create(e,t,i,n)}constructor(e,t,i,n,s){const[r,l,c]=oee(e);this.locale=r,this.numberingSystem=t||l||null,this.outputCalendar=i||c||null,this.weekSettings=n,this.intl=lee(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=dee(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:an.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,XS(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return mv(this,e,YW,()=>{const i=t?{month:e,day:"numeric"}:{month:e},n=t?"format":"standalone";return this.monthsCache[n][e]||(this.monthsCache[n][e]=uee(s=>this.extract(s,i,"month"))),this.monthsCache[n][e]})}weekdays(e,t=!1){return mv(this,e,jW,()=>{const i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},n=t?"format":"standalone";return this.weekdaysCache[n][e]||(this.weekdaysCache[n][e]=cee(s=>this.extract(s,i,"weekday"))),this.weekdaysCache[n][e]})}meridiems(){return mv(this,void 0,()=>JW,()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Xa.utc(2016,11,13,9),Xa.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return mv(this,e,QW,()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Xa.utc(-40,1,1),Xa.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){const n=this.dtFormatter(e,t),s=n.formatToParts(),r=s.find(l=>l.type.toLowerCase()===i);return r?r.value:null}numberFormatter(e={}){return new hee(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new _ee(e,this.intl,t)}relFormatter(e={}){return new mee(this.intl,this.isEnglish(),e)}listFormatter(e={}){return aee(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||GW(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:zW()?see(this.locale):OW}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let qC=null;class io extends I1{static get utcInstance(){return qC===null&&(qC=new io(0)),qC}static instance(e){return e===0?io.utcInstance:new io(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new io(Xw(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${d0(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${d0(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return d0(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class gee extends I1{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function ch(a,e){if(Ka(a)||a===null)return e;if(a instanceof I1)return a;if(xee(a)){const t=a.toLowerCase();return t==="default"?e:t==="local"||t==="system"?Zw.instance:t==="utc"||t==="gmt"?io.utcInstance:io.parseSpecifier(t)||_d.create(a)}else return Ih(a)?io.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new gee(a)}const w3={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},xR={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pee=w3.hanidec.replace(/[\[|\]]/g,"").split("");function fee(a){let e=parseInt(a,10);if(isNaN(e)){e="";for(let t=0;t<a.length;t++){const i=a.charCodeAt(t);if(a[t].search(w3.hanidec)!==-1)e+=pee.indexOf(a[t]);else for(const n in xR){const[s,r]=xR[n];i>=s&&i<=r&&(e+=i-s)}}return parseInt(e,10)}else return e}const US=new Map;function yee(){US.clear()}function Dl({numberingSystem:a},e=""){const t=a||"latn";let i=US.get(t);i===void 0&&(i=new Map,US.set(t,i));let n=i.get(e);return n===void 0&&(n=new RegExp(`${w3[t]}${e}`),i.set(e,n)),n}let wR=()=>Date.now(),IR="system",CR=null,AR=null,SR=null,TR=60,ER,MR=null;class lr{static get now(){return wR}static set now(e){wR=e}static set defaultZone(e){IR=e}static get defaultZone(){return ch(IR,Zw.instance)}static get defaultLocale(){return CR}static set defaultLocale(e){CR=e}static get defaultNumberingSystem(){return AR}static set defaultNumberingSystem(e){AR=e}static get defaultOutputCalendar(){return SR}static set defaultOutputCalendar(e){SR=e}static get defaultWeekSettings(){return MR}static set defaultWeekSettings(e){MR=XS(e)}static get twoDigitCutoffYear(){return TR}static set twoDigitCutoffYear(e){TR=e%100}static get throwOnInvalid(){return ER}static set throwOnInvalid(e){ER=e}static resetCaches(){an.resetCache(),_d.resetCache(),Xa.resetCache(),yee()}}class jl{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const PW=[0,31,59,90,120,151,181,212,243,273,304,334],BW=[0,31,60,91,121,152,182,213,244,274,305,335];function vl(a,e){return new jl("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${a}, which is invalid`)}function I3(a,e,t){const i=new Date(Date.UTC(a,e-1,t));a<100&&a>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const n=i.getUTCDay();return n===0?7:n}function FW(a,e,t){return t+(C1(a)?BW:PW)[e-1]}function NW(a,e){const t=C1(a)?BW:PW,i=t.findIndex(s=>s<e),n=e-t[i];return{month:i+1,day:n}}function C3(a,e){return(a-e+7)%7+1}function _x(a,e=4,t=1){const{year:i,month:n,day:s}=a,r=FW(i,n,s),l=C3(I3(i,n,s),t);let c=Math.floor((r-l+14-e)/7),h;return c<1?(h=i-1,c=q0(h,e,t)):c>q0(i,e,t)?(h=i+1,c=1):h=i,{weekYear:h,weekNumber:c,weekday:l,...Hw(a)}}function LR(a,e=4,t=1){const{weekYear:i,weekNumber:n,weekday:s}=a,r=C3(I3(i,1,e),t),l=wp(i);let c=n*7+s-r-7+e,h;c<1?(h=i-1,c+=wp(h)):c>l?(h=i+1,c-=wp(i)):h=i;const{month:g,day:b}=NW(h,c);return{year:h,month:g,day:b,...Hw(a)}}function jC(a){const{year:e,month:t,day:i}=a,n=FW(e,t,i);return{year:e,ordinal:n,...Hw(a)}}function RR(a){const{year:e,ordinal:t}=a,{month:i,day:n}=NW(e,t);return{year:e,month:i,day:n,...Hw(a)}}function kR(a,e){if(!Ka(a.localWeekday)||!Ka(a.localWeekNumber)||!Ka(a.localWeekYear)){if(!Ka(a.weekday)||!Ka(a.weekNumber)||!Ka(a.weekYear))throw new np("Cannot mix locale-based week fields with ISO-based week fields");return Ka(a.localWeekday)||(a.weekday=a.localWeekday),Ka(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ka(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function bee(a,e=4,t=1){const i=zw(a.weekYear),n=xl(a.weekNumber,1,q0(a.weekYear,e,t)),s=xl(a.weekday,1,7);return i?n?s?!1:vl("weekday",a.weekday):vl("week",a.weekNumber):vl("weekYear",a.weekYear)}function vee(a){const e=zw(a.year),t=xl(a.ordinal,1,wp(a.year));return e?t?!1:vl("ordinal",a.ordinal):vl("year",a.year)}function DW(a){const e=zw(a.year),t=xl(a.month,1,12),i=xl(a.day,1,mx(a.year,a.month));return e?t?i?!1:vl("day",a.day):vl("month",a.month):vl("year",a.year)}function VW(a){const{hour:e,minute:t,second:i,millisecond:n}=a,s=xl(e,0,23)||e===24&&t===0&&i===0&&n===0,r=xl(t,0,59),l=xl(i,0,59),c=xl(n,0,999);return s?r?l?c?!1:vl("millisecond",n):vl("second",i):vl("minute",t):vl("hour",e)}function Ka(a){return typeof a>"u"}function Ih(a){return typeof a=="number"}function zw(a){return typeof a=="number"&&a%1===0}function xee(a){return typeof a=="string"}function wee(a){return Object.prototype.toString.call(a)==="[object Date]"}function ZW(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function zW(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Iee(a){return Array.isArray(a)?a:[a]}function WR(a,e,t){if(a.length!==0)return a.reduce((i,n)=>{const s=[e(n),n];return i&&t(i[0],s[0])===i[0]?i:s},null)[1]}function Cee(a,e){return e.reduce((t,i)=>(t[i]=a[i],t),{})}function zp(a,e){return Object.prototype.hasOwnProperty.call(a,e)}function XS(a){if(a==null)return null;if(typeof a!="object")throw new ks("Week settings must be an object");if(!xl(a.firstDay,1,7)||!xl(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(e=>!xl(e,1,7)))throw new ks("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function xl(a,e,t){return zw(a)&&a>=e&&a<=t}function Aee(a,e){return a-e*Math.floor(a/e)}function Mr(a,e=2){const t=a<0;let i;return t?i="-"+(""+-a).padStart(e,"0"):i=(""+a).padStart(e,"0"),i}function rh(a){if(!(Ka(a)||a===null||a===""))return parseInt(a,10)}function L_(a){if(!(Ka(a)||a===null||a===""))return parseFloat(a)}function A3(a){if(!(Ka(a)||a===null||a==="")){const e=parseFloat("0."+a)*1e3;return Math.floor(e)}}function S3(a,e,t=!1){const i=10**e;return(t?Math.trunc:Math.round)(a*i)/i}function C1(a){return a%4===0&&(a%100!==0||a%400===0)}function wp(a){return C1(a)?366:365}function mx(a,e){const t=Aee(e-1,12)+1,i=a+(e-t)/12;return t===2?C1(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Uw(a){let e=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(e=new Date(e),e.setUTCFullYear(a.year,a.month-1,a.day)),+e}function GR(a,e,t){return-C3(I3(a,1,e),t)+e-1}function q0(a,e=4,t=1){const i=GR(a,e,t),n=GR(a+1,e,t);return(wp(a)-i+n)/7}function HS(a){return a>99?a:a>lr.twoDigitCutoffYear?1900+a:2e3+a}function UW(a,e,t,i=null){const n=new Date(a),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const r={timeZoneName:e,...s},l=new Intl.DateTimeFormat(t,r).formatToParts(n).find(c=>c.type.toLowerCase()==="timezonename");return l?l.value:null}function Xw(a,e){let t=parseInt(a,10);Number.isNaN(t)&&(t=0);const i=parseInt(e,10)||0,n=t<0||Object.is(t,-0)?-i:i;return t*60+n}function XW(a){const e=Number(a);if(typeof a=="boolean"||a===""||Number.isNaN(e))throw new ks(`Invalid unit value ${a}`);return e}function gx(a,e){const t={};for(const i in a)if(zp(a,i)){const n=a[i];if(n==null)continue;t[e(i)]=XW(n)}return t}function d0(a,e){const t=Math.trunc(Math.abs(a/60)),i=Math.trunc(Math.abs(a%60)),n=a>=0?"+":"-";switch(e){case"short":return`${n}${Mr(t,2)}:${Mr(i,2)}`;case"narrow":return`${n}${t}${i>0?`:${i}`:""}`;case"techie":return`${n}${Mr(t,2)}${Mr(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Hw(a){return Cee(a,["hour","minute","second","millisecond"])}const See=["January","February","March","April","May","June","July","August","September","October","November","December"],HW=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Tee=["J","F","M","A","M","J","J","A","S","O","N","D"];function YW(a){switch(a){case"narrow":return[...Tee];case"short":return[...HW];case"long":return[...See];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const KW=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],qW=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Eee=["M","T","W","T","F","S","S"];function jW(a){switch(a){case"narrow":return[...Eee];case"short":return[...qW];case"long":return[...KW];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const JW=["AM","PM"],Mee=["Before Christ","Anno Domini"],Lee=["BC","AD"],Ree=["B","A"];function QW(a){switch(a){case"narrow":return[...Ree];case"short":return[...Lee];case"long":return[...Mee];default:return null}}function kee(a){return JW[a.hour<12?0:1]}function Wee(a,e){return jW(e)[a.weekday-1]}function Gee(a,e){return YW(e)[a.month-1]}function Oee(a,e){return QW(e)[a.year<0?0:1]}function Pee(a,e,t="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(a)===-1;if(t==="auto"&&s){const b=a==="days";switch(e){case 1:return b?"tomorrow":`next ${n[a][0]}`;case-1:return b?"yesterday":`last ${n[a][0]}`;case 0:return b?"today":`this ${n[a][0]}`}}const r=Object.is(e,-0)||e<0,l=Math.abs(e),c=l===1,h=n[a],g=i?c?h[1]:h[2]||h[1]:c?n[a][0]:a;return r?`${l} ${g} ago`:`in ${l} ${g}`}function OR(a,e){let t="";for(const i of a)i.literal?t+=i.val:t+=e(i.val);return t}const Bee={D:hx,DD:gW,DDD:pW,DDDD:fW,t:yW,tt:bW,ttt:vW,tttt:xW,T:wW,TT:IW,TTT:CW,TTTT:AW,f:SW,ff:EW,fff:LW,ffff:kW,F:TW,FF:MW,FFF:RW,FFFF:WW};class Os{static create(e,t={}){return new Os(e,t)}static parseFormat(e){let t=null,i="",n=!1;const s=[];for(let r=0;r<e.length;r++){const l=e.charAt(r);l==="'"?(i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),t=null,i="",n=!n):n||l===t?i+=l:(i.length>0&&s.push({literal:/^\s+$/.test(i),val:i}),i=l,t=l)}return i.length>0&&s.push({literal:n||/^\s+$/.test(i),val:i}),s}static macroTokenToFormatOpts(e){return Bee[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Mr(e,t);const i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(C,S)=>this.loc.extract(e,C,S),r=C=>e.isOffsetFixed&&e.offset===0&&C.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,C.format):"",l=()=>i?kee(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),c=(C,S)=>i?Gee(e,C):s(S?{month:C}:{month:C,day:"numeric"},"month"),h=(C,S)=>i?Wee(e,C):s(S?{weekday:C}:{weekday:C,month:"long",day:"numeric"},"weekday"),g=C=>{const S=Os.macroTokenToFormatOpts(C);return S?this.formatWithSystemDefault(e,S):C},b=C=>i?Oee(e,C):s({era:C},"era"),v=C=>{switch(C){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return r({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return r({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return r({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return l();case"d":return n?s({day:"numeric"},"day"):this.num(e.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return h("short",!0);case"cccc":return h("long",!0);case"ccccc":return h("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return h("short",!1);case"EEEE":return h("long",!1);case"EEEEE":return h("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(e.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(e.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return b("short");case"GG":return b("long");case"GGGGG":return b("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return g(C)}};return OR(Os.parseFormat(t),v)}formatDurationFromString(e,t){const i=c=>{switch(c[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},n=c=>h=>{const g=i(h);return g?this.num(c.get(g),h.length):h},s=Os.parseFormat(t),r=s.reduce((c,{literal:h,val:g})=>h?c:c.concat(g),[]),l=e.shiftTo(...r.map(i).filter(c=>c));return OR(s,n(l))}}const $W=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function of(...a){const e=a.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function lf(...a){return e=>a.reduce(([t,i,n],s)=>{const[r,l,c]=s(e,n);return[{...t,...r},l||i,c]},[{},null,1]).slice(0,2)}function uf(a,...e){if(a==null)return[null,null];for(const[t,i]of e){const n=t.exec(a);if(n)return i(n)}return[null,null]}function eG(...a){return(e,t)=>{const i={};let n;for(n=0;n<a.length;n++)i[a[n]]=rh(e[t+n]);return[i,null,t+n]}}const tG=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Fee=`(?:${tG.source}?(?:\\[(${$W.source})\\])?)?`,T3=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,aG=RegExp(`${T3.source}${Fee}`),E3=RegExp(`(?:T${aG.source})?`),Nee=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Dee=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Vee=/(\d{4})-?(\d{3})/,Zee=eG("weekYear","weekNumber","weekDay"),zee=eG("year","ordinal"),Uee=/(\d{4})-(\d\d)-(\d\d)/,iG=RegExp(`${T3.source} ?(?:${tG.source}|(${$W.source}))?`),Xee=RegExp(`(?: ${iG.source})?`);function Ip(a,e,t){const i=a[e];return Ka(i)?t:rh(i)}function Hee(a,e){return[{year:Ip(a,e),month:Ip(a,e+1,1),day:Ip(a,e+2,1)},null,e+3]}function cf(a,e){return[{hours:Ip(a,e,0),minutes:Ip(a,e+1,0),seconds:Ip(a,e+2,0),milliseconds:A3(a[e+3])},null,e+4]}function A1(a,e){const t=!a[e]&&!a[e+1],i=Xw(a[e+1],a[e+2]),n=t?null:io.instance(i);return[{},n,e+3]}function S1(a,e){const t=a[e]?_d.create(a[e]):null;return[{},t,e+1]}const Yee=RegExp(`^T?${T3.source}$`),Kee=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function qee(a){const[e,t,i,n,s,r,l,c,h]=a,g=e[0]==="-",b=c&&c[0]==="-",v=(C,S=!1)=>C!==void 0&&(S||C&&g)?-C:C;return[{years:v(L_(t)),months:v(L_(i)),weeks:v(L_(n)),days:v(L_(s)),hours:v(L_(r)),minutes:v(L_(l)),seconds:v(L_(c),c==="-0"),milliseconds:v(A3(h),b)}]}const jee={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function M3(a,e,t,i,n,s,r){const l={year:e.length===2?HS(rh(e)):rh(e),month:HW.indexOf(t)+1,day:rh(i),hour:rh(n),minute:rh(s)};return r&&(l.second=rh(r)),a&&(l.weekday=a.length>3?KW.indexOf(a)+1:qW.indexOf(a)+1),l}const Jee=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Qee(a){const[,e,t,i,n,s,r,l,c,h,g,b]=a,v=M3(e,n,i,t,s,r,l);let C;return c?C=jee[c]:h?C=0:C=Xw(g,b),[v,new io(C)]}function $ee(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const ete=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,tte=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ate=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function PR(a){const[,e,t,i,n,s,r,l]=a;return[M3(e,n,i,t,s,r,l),io.utcInstance]}function ite(a){const[,e,t,i,n,s,r,l]=a;return[M3(e,l,t,i,n,s,r),io.utcInstance]}const nte=of(Nee,E3),rte=of(Dee,E3),ste=of(Vee,E3),ote=of(aG),nG=lf(Hee,cf,A1,S1),lte=lf(Zee,cf,A1,S1),ute=lf(zee,cf,A1,S1),cte=lf(cf,A1,S1);function dte(a){return uf(a,[nte,nG],[rte,lte],[ste,ute],[ote,cte])}function hte(a){return uf($ee(a),[Jee,Qee])}function _te(a){return uf(a,[ete,PR],[tte,PR],[ate,ite])}function mte(a){return uf(a,[Kee,qee])}const gte=lf(cf);function pte(a){return uf(a,[Yee,gte])}const fte=of(Uee,Xee),yte=of(iG),bte=lf(cf,A1,S1);function vte(a){return uf(a,[fte,nG],[yte,bte])}const BR="Invalid Duration",rG={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},xte={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...rG},gl=146097/400,Wg=146097/4800,wte={years:{quarters:4,months:12,weeks:gl/7,days:gl,hours:gl*24,minutes:gl*24*60,seconds:gl*24*60*60,milliseconds:gl*24*60*60*1e3},quarters:{months:3,weeks:gl/28,days:gl/4,hours:gl*24/4,minutes:gl*24*60/4,seconds:gl*24*60*60/4,milliseconds:gl*24*60*60*1e3/4},months:{weeks:Wg/7,days:Wg,hours:Wg*24,minutes:Wg*24*60,seconds:Wg*24*60*60,milliseconds:Wg*24*60*60*1e3},...rG},Y_=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Ite=Y_.slice(0).reverse();function Kd(a,e,t=!1){const i={values:t?e.values:{...a.values,...e.values||{}},loc:a.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||a.conversionAccuracy,matrix:e.matrix||a.matrix};return new Bi(i)}function sG(a,e){let t=e.milliseconds??0;for(const i of Ite.slice(1))e[i]&&(t+=e[i]*a[i].milliseconds);return t}function FR(a,e){const t=sG(a,e)<0?-1:1;Y_.reduceRight((i,n)=>{if(Ka(e[n]))return i;if(i){const s=e[i]*t,r=a[n][i],l=Math.floor(s/r);e[n]+=l*t,e[i]-=l*r*t}return n},null),Y_.reduce((i,n)=>{if(Ka(e[n]))return i;if(i){const s=e[i]%1;e[i]-=s,e[n]+=s*a[i][n]}return n},null)}function Cte(a){const e={};for(const[t,i]of Object.entries(a))i!==0&&(e[t]=i);return e}class Bi{constructor(e){const t=e.conversionAccuracy==="longterm"||!1;let i=t?wte:xte;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||an.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return Bi.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new ks(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Bi({values:gx(e,Bi.normalizeUnit),loc:an.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Ih(e))return Bi.fromMillis(e);if(Bi.isDuration(e))return e;if(typeof e=="object")return Bi.fromObject(e);throw new ks(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[i]=mte(e);return i?Bi.fromObject(i,t):Bi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[i]=pte(e);return i?Bi.fromObject(i,t):Bi.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new ks("need to specify a reason the Duration is invalid");const i=e instanceof jl?e:new jl(e,t);if(lr.throwOnInvalid)throw new q$(i);return new Bi({invalid:i})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new mW(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Os.create(this.loc,i).formatDurationFromString(this,e):BR}toHuman(e={}){if(!this.isValid)return BR;const t=Y_.map(i=>{const n=this.values[i];return Ka(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(n)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=S3(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Xa.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?sG(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Bi.fromDurationLike(e),i={};for(const n of Y_)(zp(t.values,n)||zp(this.values,n))&&(i[n]=t.get(n)+this.get(n));return Kd(this,{values:i},!0)}minus(e){if(!this.isValid)return this;const t=Bi.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const i of Object.keys(this.values))t[i]=XW(e(this.values[i],i));return Kd(this,{values:t},!0)}get(e){return this[Bi.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...gx(e,Bi.normalizeUnit)};return Kd(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:n}={}){const r={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:n,conversionAccuracy:i};return Kd(this,r)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return FR(this.matrix,e),Kd(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=Cte(this.normalize().shiftToAll().toObject());return Kd(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(r=>Bi.normalizeUnit(r));const t={},i={},n=this.toObject();let s;for(const r of Y_)if(e.indexOf(r)>=0){s=r;let l=0;for(const h in i)l+=this.matrix[h][r]*i[h],i[h]=0;Ih(n[r])&&(l+=n[r]);const c=Math.trunc(l);t[r]=c,i[r]=(l*1e3-c*1e3)/1e3}else Ih(n[r])&&(i[r]=n[r]);for(const r in i)i[r]!==0&&(t[s]+=r===s?i[r]:i[r]/this.matrix[s][r]);return FR(this.matrix,t),Kd(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Kd(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of Y_)if(!t(this.values[i],e.values[i]))return!1;return!0}}const Gg="Invalid Interval";function Ate(a,e){return!a||!a.isValid?or.invalid("missing or invalid start"):!e||!e.isValid?or.invalid("missing or invalid end"):e<a?or.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${e.toISO()}`):null}class or{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new ks("need to specify a reason the Interval is invalid");const i=e instanceof jl?e:new jl(e,t);if(lr.throwOnInvalid)throw new K$(i);return new or({invalid:i})}static fromDateTimes(e,t){const i=Iy(e),n=Iy(t),s=Ate(i,n);return s??new or({start:i,end:n})}static after(e,t){const i=Bi.fromDurationLike(t),n=Iy(e);return or.fromDateTimes(n,n.plus(i))}static before(e,t){const i=Bi.fromDurationLike(t),n=Iy(e);return or.fromDateTimes(n.minus(i),n)}static fromISO(e,t){const[i,n]=(e||"").split("/",2);if(i&&n){let s,r;try{s=Xa.fromISO(i,t),r=s.isValid}catch{r=!1}let l,c;try{l=Xa.fromISO(n,t),c=l.isValid}catch{c=!1}if(r&&c)return or.fromDateTimes(s,l);if(r){const h=Bi.fromISO(n,t);if(h.isValid)return or.after(s,h)}else if(c){const h=Bi.fromISO(i,t);if(h.isValid)return or.before(l,h)}}return or.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const i=this.start.startOf(e,t);let n;return t!=null&&t.useLocaleWeeks?n=this.end.reconfigure({locale:i.locale}):n=this.end,n=n.startOf(e,t),Math.floor(n.diff(i,e).get(e))+(n.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?or.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Iy).filter(r=>this.contains(r)).sort((r,l)=>r.toMillis()-l.toMillis()),i=[];let{s:n}=this,s=0;for(;n<this.e;){const r=t[s]||this.e,l=+r>+this.e?this.e:r;i.push(or.fromDateTimes(n,l)),n=l,s+=1}return i}splitBy(e){const t=Bi.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const r=[];for(;i<this.e;){const l=this.start.plus(t.mapUnits(c=>c*n));s=+l>+this.e?this.e:l,r.push(or.fromDateTimes(i,s)),i=s,n+=1}return r}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:or.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return or.fromDateTimes(t,i)}static merge(e){const[t,i]=e.sort((n,s)=>n.s-s.s).reduce(([n,s],r)=>s?s.overlaps(r)||s.abutsStart(r)?[n,s.union(r)]:[n.concat([s]),r]:[n,r],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0;const n=[],s=e.map(c=>[{time:c.s,type:"s"},{time:c.e,type:"e"}]),r=Array.prototype.concat(...s),l=r.sort((c,h)=>c.time-h.time);for(const c of l)i+=c.type==="s"?1:-1,i===1?t=c.time:(t&&+t!=+c.time&&n.push(or.fromDateTimes(t,c.time)),t=null);return or.merge(n)}difference(...e){return or.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Gg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=hx,t={}){return this.isValid?Os.create(this.s.loc.clone(t),e).formatInterval(this):Gg}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Gg}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Gg}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Gg}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Gg}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Bi.invalid(this.invalidReason)}mapEndpoints(e){return or.fromDateTimes(e(this.s),e(this.e))}}class gv{static hasDST(e=lr.defaultZone){const t=Xa.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return _d.isValidZone(e)}static normalizeZone(e){return ch(e,lr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||an.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||an.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||an.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||an.create(t,i,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||an.create(t,i,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null}={}){return(n||an.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:n=null}={}){return(n||an.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return an.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return an.create(t,null,"gregory").eras(e)}static features(){return{relative:ZW(),localeWeek:zW()}}}function NR(a,e){const t=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(a);return Math.floor(Bi.fromMillis(i).as("days"))}function Ste(a,e,t){const i=[["years",(c,h)=>h.year-c.year],["quarters",(c,h)=>h.quarter-c.quarter+(h.year-c.year)*4],["months",(c,h)=>h.month-c.month+(h.year-c.year)*12],["weeks",(c,h)=>{const g=NR(c,h);return(g-g%7)/7}],["days",NR]],n={},s=a;let r,l;for(const[c,h]of i)t.indexOf(c)>=0&&(r=c,n[c]=h(a,e),l=s.plus(n),l>e?(n[c]--,a=s.plus(n),a>e&&(l=a,n[c]--,a=s.plus(n))):a=l);return[a,n,l,r]}function Tte(a,e,t,i){let[n,s,r,l]=Ste(a,e,t);const c=e-n,h=t.filter(b=>["hours","minutes","seconds","milliseconds"].indexOf(b)>=0);h.length===0&&(r<e&&(r=n.plus({[l]:1})),r!==n&&(s[l]=(s[l]||0)+c/(r-n)));const g=Bi.fromObject(s,i);return h.length>0?Bi.fromMillis(c,i).shiftTo(...h).plus(g):g}const Ete="missing Intl.DateTimeFormat.formatToParts support";function qi(a,e=t=>t){return{regex:a,deser:([t])=>e(fee(t))}}const Mte=String.fromCharCode(160),oG=`[ ${Mte}]`,lG=new RegExp(oG,"g");function Lte(a){return a.replace(/\./g,"\\.?").replace(lG,oG)}function DR(a){return a.replace(/\./g,"").replace(lG," ").toLowerCase()}function Vl(a,e){return a===null?null:{regex:RegExp(a.map(Lte).join("|")),deser:([t])=>a.findIndex(i=>DR(t)===DR(i))+e}}function VR(a,e){return{regex:a,deser:([,t,i])=>Xw(t,i),groups:e}}function pv(a){return{regex:a,deser:([e])=>e}}function Rte(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function kte(a,e){const t=Dl(e),i=Dl(e,"{2}"),n=Dl(e,"{3}"),s=Dl(e,"{4}"),r=Dl(e,"{6}"),l=Dl(e,"{1,2}"),c=Dl(e,"{1,3}"),h=Dl(e,"{1,6}"),g=Dl(e,"{1,9}"),b=Dl(e,"{2,4}"),v=Dl(e,"{4,6}"),C=R=>({regex:RegExp(Rte(R.val)),deser:([G])=>G,literal:!0}),L=(R=>{if(a.literal)return C(R);switch(R.val){case"G":return Vl(e.eras("short"),0);case"GG":return Vl(e.eras("long"),0);case"y":return qi(h);case"yy":return qi(b,HS);case"yyyy":return qi(s);case"yyyyy":return qi(v);case"yyyyyy":return qi(r);case"M":return qi(l);case"MM":return qi(i);case"MMM":return Vl(e.months("short",!0),1);case"MMMM":return Vl(e.months("long",!0),1);case"L":return qi(l);case"LL":return qi(i);case"LLL":return Vl(e.months("short",!1),1);case"LLLL":return Vl(e.months("long",!1),1);case"d":return qi(l);case"dd":return qi(i);case"o":return qi(c);case"ooo":return qi(n);case"HH":return qi(i);case"H":return qi(l);case"hh":return qi(i);case"h":return qi(l);case"mm":return qi(i);case"m":return qi(l);case"q":return qi(l);case"qq":return qi(i);case"s":return qi(l);case"ss":return qi(i);case"S":return qi(c);case"SSS":return qi(n);case"u":return pv(g);case"uu":return pv(l);case"uuu":return qi(t);case"a":return Vl(e.meridiems(),0);case"kkkk":return qi(s);case"kk":return qi(b,HS);case"W":return qi(l);case"WW":return qi(i);case"E":case"c":return qi(t);case"EEE":return Vl(e.weekdays("short",!1),1);case"EEEE":return Vl(e.weekdays("long",!1),1);case"ccc":return Vl(e.weekdays("short",!0),1);case"cccc":return Vl(e.weekdays("long",!0),1);case"Z":case"ZZ":return VR(new RegExp(`([+-]${l.source})(?::(${i.source}))?`),2);case"ZZZ":return VR(new RegExp(`([+-]${l.source})(${i.source})?`),2);case"z":return pv(/[a-z_+-/]{1,256}?/i);case" ":return pv(/[^\S\n\r]/);default:return C(R)}})(a)||{invalidReason:Ete};return L.token=a,L}const Wte={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Gte(a,e,t){const{type:i,value:n}=a;if(i==="literal"){const c=/^\s+$/.test(n);return{literal:!c,val:c?" ":n}}const s=e[i];let r=i;i==="hour"&&(e.hour12!=null?r=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?r="hour12":r="hour24":r=t.hour12?"hour12":"hour24");let l=Wte[r];if(typeof l=="object"&&(l=l[s]),l)return{literal:!1,val:l}}function Ote(a){return[`^${a.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,a]}function Pte(a,e,t){const i=a.match(e);if(i){const n={};let s=1;for(const r in t)if(zp(t,r)){const l=t[r],c=l.groups?l.groups+1:1;!l.literal&&l.token&&(n[l.token.val[0]]=l.deser(i.slice(s,s+c))),s+=c}return[i,n]}else return[i,{}]}function Bte(a){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let t=null,i;return Ka(a.z)||(t=_d.create(a.z)),Ka(a.Z)||(t||(t=new io(a.Z)),i=a.Z),Ka(a.q)||(a.M=(a.q-1)*3+1),Ka(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ka(a.u)||(a.S=A3(a.u)),[Object.keys(a).reduce((s,r)=>{const l=e(r);return l&&(s[l]=a[r]),s},{}),t,i]}let JC=null;function Fte(){return JC||(JC=Xa.fromMillis(1555555555555)),JC}function Nte(a,e){if(a.literal)return a;const t=Os.macroTokenToFormatOpts(a.val),i=hG(t,e);return i==null||i.includes(void 0)?a:i}function uG(a,e){return Array.prototype.concat(...a.map(t=>Nte(t,e)))}class cG{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=uG(Os.parseFormat(t),e),this.units=this.tokens.map(i=>kte(i,e)),this.disqualifyingUnit=this.units.find(i=>i.invalidReason),!this.disqualifyingUnit){const[i,n]=Ote(this.units);this.regex=RegExp(i,"i"),this.handlers=n}}explainFromTokens(e){if(this.isValid){const[t,i]=Pte(e,this.regex,this.handlers),[n,s,r]=i?Bte(i):[null,null,void 0];if(zp(i,"a")&&zp(i,"H"))throw new np("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:i,result:n,zone:s,specificOffset:r}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function dG(a,e,t){return new cG(a,t).explainFromTokens(e)}function Dte(a,e,t){const{result:i,zone:n,specificOffset:s,invalidReason:r}=dG(a,e,t);return[i,n,s,r]}function hG(a,e){if(!a)return null;const i=Os.create(e,a).dtFormatter(Fte()),n=i.formatToParts(),s=i.resolvedOptions();return n.map(r=>Gte(r,a,s))}const QC="Invalid DateTime",ZR=864e13;function Ny(a){return new jl("unsupported zone",`the zone "${a.name}" is not supported`)}function $C(a){return a.weekData===null&&(a.weekData=_x(a.c)),a.weekData}function eA(a){return a.localWeekData===null&&(a.localWeekData=_x(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function R_(a,e){const t={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Xa({...t,...e,old:t})}function _G(a,e,t){let i=a-e*60*1e3;const n=t.offset(i);if(e===n)return[i,e];i-=(n-e)*60*1e3;const s=t.offset(i);return n===s?[i,n]:[a-Math.min(n,s)*60*1e3,Math.max(n,s)]}function fv(a,e){a+=e*60*1e3;const t=new Date(a);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function c2(a,e,t){return _G(Uw(a),e,t)}function zR(a,e){const t=a.o,i=a.c.year+Math.trunc(e.years),n=a.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...a.c,year:i,month:n,day:Math.min(a.c.day,mx(i,n))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},r=Bi.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),l=Uw(s);let[c,h]=_G(l,t,a.zone);return r!==0&&(c+=r,h=a.zone.offset(c)),{ts:c,o:h}}function Og(a,e,t,i,n,s){const{setZone:r,zone:l}=t;if(a&&Object.keys(a).length!==0||e){const c=e||l,h=Xa.fromObject(a,{...t,zone:c,specificOffset:s});return r?h:h.setZone(l)}else return Xa.invalid(new jl("unparsable",`the input "${n}" can't be parsed as ${i}`))}function yv(a,e,t=!0){return a.isValid?Os.create(an.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(a,e):null}function tA(a,e){const t=a.c.year>9999||a.c.year<0;let i="";return t&&a.c.year>=0&&(i+="+"),i+=Mr(a.c.year,t?6:4),e?(i+="-",i+=Mr(a.c.month),i+="-",i+=Mr(a.c.day)):(i+=Mr(a.c.month),i+=Mr(a.c.day)),i}function UR(a,e,t,i,n,s){let r=Mr(a.c.hour);return e?(r+=":",r+=Mr(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!t)&&(r+=":")):r+=Mr(a.c.minute),(a.c.millisecond!==0||a.c.second!==0||!t)&&(r+=Mr(a.c.second),(a.c.millisecond!==0||!i)&&(r+=".",r+=Mr(a.c.millisecond,3))),n&&(a.isOffsetFixed&&a.offset===0&&!s?r+="Z":a.o<0?(r+="-",r+=Mr(Math.trunc(-a.o/60)),r+=":",r+=Mr(Math.trunc(-a.o%60))):(r+="+",r+=Mr(Math.trunc(a.o/60)),r+=":",r+=Mr(Math.trunc(a.o%60)))),s&&(r+="["+a.zone.ianaName+"]"),r}const mG={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Vte={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Zte={ordinal:1,hour:0,minute:0,second:0,millisecond:0},gG=["year","month","day","hour","minute","second","millisecond"],zte=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Ute=["year","ordinal","hour","minute","second","millisecond"];function Xte(a){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!e)throw new mW(a);return e}function XR(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Xte(a)}}function Hte(a){if(Dy===void 0&&(Dy=lr.now()),a.type!=="iana")return a.offset(Dy);const e=a.name;let t=YS.get(e);return t===void 0&&(t=a.offset(Dy),YS.set(e,t)),t}function HR(a,e){const t=ch(e.zone,lr.defaultZone);if(!t.isValid)return Xa.invalid(Ny(t));const i=an.fromObject(e);let n,s;if(Ka(a.year))n=lr.now();else{for(const c of gG)Ka(a[c])&&(a[c]=mG[c]);const r=DW(a)||VW(a);if(r)return Xa.invalid(r);const l=Hte(t);[n,s]=c2(a,l,t)}return new Xa({ts:n,zone:t,loc:i,o:s})}function YR(a,e,t){const i=Ka(t.round)?!0:t.round,n=(r,l)=>(r=S3(r,i||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(r,l)),s=r=>t.calendary?e.hasSame(a,r)?0:e.startOf(r).diff(a.startOf(r),r).get(r):e.diff(a,r).get(r);if(t.unit)return n(s(t.unit),t.unit);for(const r of t.units){const l=s(r);if(Math.abs(l)>=1)return n(l,r)}return n(a>e?-0:0,t.units[t.units.length-1])}function KR(a){let e={},t;return a.length>0&&typeof a[a.length-1]=="object"?(e=a[a.length-1],t=Array.from(a).slice(0,a.length-1)):t=Array.from(a),[e,t]}let Dy;const YS=new Map;class Xa{constructor(e){const t=e.zone||lr.defaultZone;let i=e.invalid||(Number.isNaN(e.ts)?new jl("invalid input"):null)||(t.isValid?null:Ny(t));this.ts=Ka(e.ts)?lr.now():e.ts;let n=null,s=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[n,s]=[e.old.c,e.old.o];else{const l=Ih(e.o)&&!e.old?e.o:t.offset(this.ts);n=fv(this.ts,l),i=Number.isNaN(n.year)?new jl("invalid input"):null,n=i?null:n,s=i?null:l}this._zone=t,this.loc=e.loc||an.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new Xa({})}static local(){const[e,t]=KR(arguments),[i,n,s,r,l,c,h]=t;return HR({year:i,month:n,day:s,hour:r,minute:l,second:c,millisecond:h},e)}static utc(){const[e,t]=KR(arguments),[i,n,s,r,l,c,h]=t;return e.zone=io.utcInstance,HR({year:i,month:n,day:s,hour:r,minute:l,second:c,millisecond:h},e)}static fromJSDate(e,t={}){const i=wee(e)?e.valueOf():NaN;if(Number.isNaN(i))return Xa.invalid("invalid input");const n=ch(t.zone,lr.defaultZone);return n.isValid?new Xa({ts:i,zone:n,loc:an.fromObject(t)}):Xa.invalid(Ny(n))}static fromMillis(e,t={}){if(Ih(e))return e<-ZR||e>ZR?Xa.invalid("Timestamp out of range"):new Xa({ts:e,zone:ch(t.zone,lr.defaultZone),loc:an.fromObject(t)});throw new ks(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Ih(e))return new Xa({ts:e*1e3,zone:ch(t.zone,lr.defaultZone),loc:an.fromObject(t)});throw new ks("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const i=ch(t.zone,lr.defaultZone);if(!i.isValid)return Xa.invalid(Ny(i));const n=an.fromObject(t),s=gx(e,XR),{minDaysInFirstWeek:r,startOfWeek:l}=kR(s,n),c=lr.now(),h=Ka(t.specificOffset)?i.offset(c):t.specificOffset,g=!Ka(s.ordinal),b=!Ka(s.year),v=!Ka(s.month)||!Ka(s.day),C=b||v,S=s.weekYear||s.weekNumber;if((C||g)&&S)throw new np("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(v&&g)throw new np("Can't mix ordinal dates with month/day");const L=S||s.weekday&&!C;let R,G,O=fv(c,h);L?(R=zte,G=Vte,O=_x(O,r,l)):g?(R=Ute,G=Zte,O=jC(O)):(R=gG,G=mG);let V=!1;for(const le of R){const ue=s[le];Ka(ue)?V?s[le]=G[le]:s[le]=O[le]:V=!0}const B=L?bee(s,r,l):g?vee(s):DW(s),z=B||VW(s);if(z)return Xa.invalid(z);const j=L?LR(s,r,l):g?RR(s):s,[re,ne]=c2(j,h,i),te=new Xa({ts:re,zone:i,o:ne,loc:n});return s.weekday&&C&&e.weekday!==te.weekday?Xa.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${te.toISO()}`):te.isValid?te:Xa.invalid(te.invalid)}static fromISO(e,t={}){const[i,n]=dte(e);return Og(i,n,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[i,n]=hte(e);return Og(i,n,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[i,n]=_te(e);return Og(i,n,t,"HTTP",t)}static fromFormat(e,t,i={}){if(Ka(e)||Ka(t))throw new ks("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,r=an.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[l,c,h,g]=Dte(r,e,t);return g?Xa.invalid(g):Og(l,c,i,`format ${t}`,e,h)}static fromString(e,t,i={}){return Xa.fromFormat(e,t,i)}static fromSQL(e,t={}){const[i,n]=vte(e);return Og(i,n,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new ks("need to specify a reason the DateTime is invalid");const i=e instanceof jl?e:new jl(e,t);if(lr.throwOnInvalid)throw new Y$(i);return new Xa({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const i=hG(e,an.fromObject(t));return i?i.map(n=>n?n.val:null).join(""):null}static expandFormat(e,t={}){return uG(Os.parseFormat(e),an.fromObject(t)).map(n=>n.val).join("")}static resetCache(){Dy=void 0,YS.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?$C(this).weekYear:NaN}get weekNumber(){return this.isValid?$C(this).weekNumber:NaN}get weekday(){return this.isValid?$C(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?eA(this).weekday:NaN}get localWeekNumber(){return this.isValid?eA(this).weekNumber:NaN}get localWeekYear(){return this.isValid?eA(this).weekYear:NaN}get ordinal(){return this.isValid?jC(this.c).ordinal:NaN}get monthShort(){return this.isValid?gv.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?gv.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?gv.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?gv.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,i=Uw(this.c),n=this.zone.offset(i-e),s=this.zone.offset(i+e),r=this.zone.offset(i-n*t),l=this.zone.offset(i-s*t);if(r===l)return[this];const c=i-r*t,h=i-l*t,g=fv(c,r),b=fv(h,l);return g.hour===b.hour&&g.minute===b.minute&&g.second===b.second&&g.millisecond===b.millisecond?[R_(this,{ts:c}),R_(this,{ts:h})]:[this]}get isInLeapYear(){return C1(this.year)}get daysInMonth(){return mx(this.year,this.month)}get daysInYear(){return this.isValid?wp(this.year):NaN}get weeksInWeekYear(){return this.isValid?q0(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?q0(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:i,calendar:n}=Os.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:n}}toUTC(e=0,t={}){return this.setZone(io.instance(e),t)}toLocal(){return this.setZone(lr.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=ch(e,lr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let n=this.ts;if(t||i){const s=e.offset(this.ts),r=this.toObject();[n]=c2(r,s,e)}return R_(this,{ts:n,zone:e})}else return Xa.invalid(Ny(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){const n=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return R_(this,{loc:n})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=gx(e,XR),{minDaysInFirstWeek:i,startOfWeek:n}=kR(t,this.loc),s=!Ka(t.weekYear)||!Ka(t.weekNumber)||!Ka(t.weekday),r=!Ka(t.ordinal),l=!Ka(t.year),c=!Ka(t.month)||!Ka(t.day),h=l||c,g=t.weekYear||t.weekNumber;if((h||r)&&g)throw new np("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&r)throw new np("Can't mix ordinal dates with month/day");let b;s?b=LR({..._x(this.c,i,n),...t},i,n):Ka(t.ordinal)?(b={...this.toObject(),...t},Ka(t.day)&&(b.day=Math.min(mx(b.year,b.month),b.day))):b=RR({...jC(this.c),...t});const[v,C]=c2(b,this.o,this.zone);return R_(this,{ts:v,o:C})}plus(e){if(!this.isValid)return this;const t=Bi.fromDurationLike(e);return R_(this,zR(this,t))}minus(e){if(!this.isValid)return this;const t=Bi.fromDurationLike(e).negate();return R_(this,zR(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const i={},n=Bi.normalizeUnit(e);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks")if(t){const s=this.loc.getStartOfWeek(),{weekday:r}=this;r<s&&(i.weekNumber=this.weekNumber-1),i.weekday=s}else i.weekday=1;if(n==="quarters"){const s=Math.ceil(this.month/3);i.month=(s-1)*3+1}return this.set(i)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Os.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):QC}toLocaleString(e=hx,t={}){return this.isValid?Os.create(this.loc.clone(t),e).formatDateTime(this):QC}toLocaleParts(e={}){return this.isValid?Os.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:n=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const r=e==="extended";let l=tA(this,r);return l+="T",l+=UR(this,r,t,i,n,s),l}toISODate({format:e="extended"}={}){return this.isValid?tA(this,e==="extended"):null}toISOWeekDate(){return yv(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:n=!1,extendedZone:s=!1,format:r="extended"}={}){return this.isValid?(n?"T":"")+UR(this,r==="extended",t,e,i,s):null}toRFC2822(){return yv(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return yv(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?tA(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let n="HH:mm:ss.SSS";return(t||e)&&(i&&(n+=" "),t?n+="z":e&&(n+="ZZ")),yv(this,n,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():QC}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return Bi.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=Iee(t).map(Bi.normalizeUnit),r=e.valueOf()>this.valueOf(),l=r?this:e,c=r?e:this,h=Tte(l,c,s,n);return r?h.negate():h}diffNow(e="milliseconds",t={}){return this.diff(Xa.now(),e,t)}until(e){return this.isValid?or.fromDateTimes(this,e):this}hasSame(e,t,i){if(!this.isValid)return!1;const n=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,i)<=n&&n<=s.endOf(t,i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Xa.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(n=e.unit,s=void 0),YR(t,this.plus(i),{...e,numeric:"always",units:n,unit:s})}toRelativeCalendar(e={}){return this.isValid?YR(e.base||Xa.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Xa.isDateTime))throw new ks("min requires all arguments be DateTimes");return WR(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(Xa.isDateTime))throw new ks("max requires all arguments be DateTimes");return WR(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){const{locale:n=null,numberingSystem:s=null}=i,r=an.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return dG(r,e,t)}static fromStringExplain(e,t,i={}){return Xa.fromFormatExplain(e,t,i)}static buildFormatParser(e,t={}){const{locale:i=null,numberingSystem:n=null}=t,s=an.fromOpts({locale:i,numberingSystem:n,defaultToEN:!0});return new cG(s,e)}static fromFormatParser(e,t,i={}){if(Ka(e)||Ka(t))throw new ks("fromFormatParser requires an input string and a format parser");const{locale:n=null,numberingSystem:s=null}=i,r=an.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});if(!r.equals(t.locale))throw new ks(`fromFormatParser called with a locale of ${r}, but the format parser was created for ${t.locale}`);const{result:l,zone:c,specificOffset:h,invalidReason:g}=t.explainFromTokens(e);return g?Xa.invalid(g):Og(l,c,i,`format ${t.format}`,e,h)}static get DATE_SHORT(){return hx}static get DATE_MED(){return gW}static get DATE_MED_WITH_WEEKDAY(){return j$}static get DATE_FULL(){return pW}static get DATE_HUGE(){return fW}static get TIME_SIMPLE(){return yW}static get TIME_WITH_SECONDS(){return bW}static get TIME_WITH_SHORT_OFFSET(){return vW}static get TIME_WITH_LONG_OFFSET(){return xW}static get TIME_24_SIMPLE(){return wW}static get TIME_24_WITH_SECONDS(){return IW}static get TIME_24_WITH_SHORT_OFFSET(){return CW}static get TIME_24_WITH_LONG_OFFSET(){return AW}static get DATETIME_SHORT(){return SW}static get DATETIME_SHORT_WITH_SECONDS(){return TW}static get DATETIME_MED(){return EW}static get DATETIME_MED_WITH_SECONDS(){return MW}static get DATETIME_MED_WITH_WEEKDAY(){return J$}static get DATETIME_FULL(){return LW}static get DATETIME_FULL_WITH_SECONDS(){return RW}static get DATETIME_HUGE(){return kW}static get DATETIME_HUGE_WITH_SECONDS(){return WW}}function Iy(a){if(Xa.isDateTime(a))return a;if(a&&a.valueOf&&Ih(a.valueOf()))return Xa.fromJSDate(a);if(a&&typeof a=="object")return Xa.fromObject(a);throw new ks(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const pG=[0,1,0,0];function qR(a,e="second",t,i){const{t:n}=ya(),s=new Date(a).toISOString(),r={year:n("yyyy"),month:n("M/yyyy"),day:n("M/d/yyyy"),second:n("M/d/yyyy HH:mm:ss")},c=(t?{year:"yyyy",month:"yyyy-MM",day:"yyyy-MM-dd",second:void 0}:r)[e];return c?Xa.fromISO(s).toFormat(`${i?"UTC:":""}${c}`):s.replace(/\.\d{3}/,"")}function KS(a){return new Date(a).toISOString().split(".")[0]+"Z"}function aA(a){return Xa.fromISO(a).toFormat("yyyy-MM-dd")}function Yte(a,e){return a<=e.minValue?e.minValue:a>=e.maxValue?e.maxValue:e.timeValueList?Kte(a,e):qte(a,e)}function Kte(a,e){const t=e.timeValueList??[];let i,n=0,s=t.length-1;for(;s-n>1;)i=Math.floor((n+s)/2),t[i]>=a?s=i:n=i;const r=Math.abs(t[n]-a),l=Math.abs(t[s]-a);return t[r<l?n:s]}function qte(a,e){const t=e.timeInterval??pG,i=new Date(a).getTime(),n=new Date(e.minValue),s=e.maxValue;let r=e.minValue,l=Math.abs(i-r);for(let c=1;;c++){const h=new Date(n.getTime());if(h.setFullYear(n.getFullYear()+c*t[0]),h.setMonth(n.getMonth()+c*t[1],n.getDate()+c*t[2]),h.setSeconds(n.getSeconds()+c*t[3]),h.getTime()>s)break;const g=Math.abs(i-h.getTime());if(g<=l)r=h.getTime(),l=g;else break}return r}const mn=rl("map",()=>{const a=al(),e=Qe({}),t=Wi([]),i=Wi([]),n=Qe(!1),s=Qe(!1),r=Qe(void 0),l=Qe(void 0),c=Qe(void 0);function h(B){r.value=B}function g(...B){t.value=[...new Set([...t.value,...B])]}function b(...B){i.value=[...new Set([...i.value,...B])]}function v(...B){t.value=t.value.filter(z=>B.indexOf(z.id)===-1),i.value=i.value.filter(z=>B.indexOf(z.id)===-1)}function C(){t.value=[]}function S(B){var z;return!!((z=t.value)!=null&&z.find(j=>j.id===B))}function L(B,z=!1){var re;const j=z?i:t;j.value=[...((re=j.value)==null?void 0:re.sort((ne,te)=>B.indexOf(ne.id)-B.indexOf(te.id)))||[]]}function R(B,z){t.value=t.value.map(j=>j.id===B?{...j,opacity:z,previousOpacity:j.opacity}:j)}function G(B,z,j){t.value=t.value.map(re=>{if(re.id===B){const ne={...re,currentTimeMinValue:z?KS(z):void 0,currentTimeMaxValue:j?KS(j):void 0};return ne.type==="WMTS"&&(ne.name=a.getLayerCurrentLabel(ne)),ne}return re})}function O(B){n.value=B}function V(B){s.value=B}return{map:e,layers:t,layers3d:i,is3dActive:n,is3dMesh:s,bgLayer:r,minZoom:l,maxZoom:c,addLayers:g,add3dLayers:b,removeLayers:v,removeAllLayers:C,reorderLayers:L,setLayerOpacity:R,setLayerTime:G,setBgLayer:h,setIs3dActive:O,setIs3dMesh:V,hasLayer:S}});function od(){function a(h,g){return t(h,void 0,g)}function e(h,g){return t(void 0,h,g)}function t(h,g,b){const{themes:v}=ps();if(b=b||(v==null?void 0:v.find(C=>t(h,g,C))),h&&(b==null?void 0:b.id)===+h||g&&(b==null?void 0:b.name)===g)return b;if(b!=null&&b.children)for(const C of b.children){const S=t(h,g,C);if(S)return S}}function i(h){const{layerTrees_3d:g}=ps();return t(h,void 0,g)}function n(h){const{bgLayers:g}=ps();return g.find(b=>b.id===h)}function s(h){const{bgLayers:g}=ps();return g.find(b=>b.name===h)}function r(h){return n(+h)||a(+h)||i(+h)}function l(h){const{setTheme:g}=ps();g(h),c(h)}function c(h){const{maxZoom:g}=Zt(mn()),b=e(h),{resolutions:v}=(b==null?void 0:b.metadata)||{};g.value=v?v.length+7:V7}return{findById:a,findByName:e,find3dLayerById:i,findBgLayerById:n,findBgLayerByName:s,findAnyLayerById:r,setTheme:l}}var Qu=(a=>(a.WMS="WMS",a.WMTS="WMTS",a))(Qu||{});let jte=0;function Jte(){return jte++}/*! @rgrove/parse-xml v4.1.0 | ISC License | Copyright Ryan Grove */var L3=Object.defineProperty,Qte=Object.getOwnPropertyDescriptor,$te=Object.getOwnPropertyNames,eae=Object.prototype.hasOwnProperty,tae=(a,e)=>{for(var t in e)L3(a,t,{get:e[t],enumerable:!0})},aae=(a,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of $te(e))!eae.call(a,n)&&n!==t&&L3(a,n,{get:()=>e[n],enumerable:!(i=Qte(e,n))||i.enumerable});return a},iae=a=>aae(L3({},"__esModule",{value:!0}),a),fG={};tae(fG,{XmlCdata:()=>xG,XmlComment:()=>wG,XmlDeclaration:()=>IG,XmlDocument:()=>CG,XmlDocumentType:()=>AG,XmlElement:()=>Yw,XmlError:()=>SG,XmlNode:()=>Ui,XmlProcessingInstruction:()=>qS,XmlText:()=>k3,parseXml:()=>mae});iae(fG);var k_="",nae=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rae=class{constructor(e){if(this.k=this.q(e,!0),this.d=0,this.length=e.length,this.n=this.k!==this.length,this.m=e,this.n){let t=[];for(let i=0,n=0;n<this.k;++n)t[n]=i,i+=e.codePointAt(i)>65535?2:1;this.y=t}}get z(){return this.d>=this.k}q(e,t=this.n){return t?e.replace(nae,"_").length:e.length}g(e=1){this.d=Math.min(this.k,this.d+e)}i(e=this.d){var t;return this.n?(t=this.y[e])!=null?t:1/0:e}F(e=1){let t=this.h(e);return this.g(e),t}G(e){if(!e.sticky)throw new Error('`regex` must have a sticky flag ("y")');e.lastIndex=this.i();let t=e.exec(this.m);if(t===null||t.length===0)return k_;let i=t[0];return this.g(this.q(i)),i}v(e){let t,i=k_;for(;(t=this.h())&&e(t);)i+=t,this.g();return i}Q(e){if(this.b(e))return e;if(this.n){let{length:t}=e,i=this.q(e);if(i!==t&&e===this.h(i))return this.g(i),e}return k_}b(e){let{length:t}=e;return this.h(t)===e?(this.g(t),e):k_}A(e){let t=this.m.slice(this.i()),i=t.search(e);if(i<=0)return k_;let n=t.slice(0,i);return this.g(this.q(n)),n}t(e){let{m:t}=this,i=this.i(),n=t.indexOf(e,i);if(n<=0)return k_;let s=t.slice(i,n);return this.g(this.q(s)),s}h(e=1){let{d:t,n:i,m:n}=this;return i?t>=this.k?k_:n.slice(this.i(t),this.i(t+e)):n.slice(t,t+e)}o(e=0){this.d=e>=0?Math.min(this.k,e):Math.max(0,this.d+e)}},sae=/[^"&<]+/y,oae=/[^'&<]+/y,lae=/\r\n|[\n\r\t]/g,uae=/<|&|]]>/,cae=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function yG(a){let e=R3(a);return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||e===45||e===46||e===183||e>=768&&e<=879||e>=8255&&e<=8256||bG(a,e)}function bG(a,e=R3(a)){return e>=97&&e<=122||e>=65&&e<=90||e===58||e===95||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function dae(a){return a==="#"||yG(a)}function hae(a){let e=R3(a);return e===32||e===9||e===10||e===13}function jR(a){return a===9||a===10||a===13||a>=32&&a<=55295||a>=57344&&a<=65533||a>=65536&&a<=1114111}function R3(a){return a.codePointAt(0)||-1}var vG=class{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var e,t;return(t=(e=this.parent)==null?void 0:e.document)!=null?t:null}get isRootNode(){return this.parent!==null&&this.parent===this.document&&this.type===vG.TYPE_ELEMENT}get preserveWhitespace(){var e;return!!((e=this.parent)!=null&&e.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),this.start!==-1&&(e.start=this.start,e.end=this.end),e}},Ui=vG;Ui.TYPE_CDATA="cdata";Ui.TYPE_COMMENT="comment";Ui.TYPE_DOCUMENT="document";Ui.TYPE_DOCUMENT_TYPE="doctype";Ui.TYPE_ELEMENT="element";Ui.TYPE_PROCESSING_INSTRUCTION="pi";Ui.TYPE_TEXT="text";Ui.TYPE_XML_DECLARATION="xmldecl";var k3=class extends Ui{constructor(e=""){super(),this.text=e}get type(){return Ui.TYPE_TEXT}toJSON(){return Object.assign(Ui.prototype.toJSON.call(this),{text:this.text})}},xG=class extends k3{get type(){return Ui.TYPE_CDATA}},wG=class extends Ui{constructor(e=""){super(),this.content=e}get type(){return Ui.TYPE_COMMENT}toJSON(){return Object.assign(Ui.prototype.toJSON.call(this),{content:this.content})}},IG=class extends Ui{constructor(e,t,i){super(),this.version=e,this.encoding=t??null,this.standalone=i??null}get type(){return Ui.TYPE_XML_DECLARATION}toJSON(){let e=Ui.prototype.toJSON.call(this);e.version=this.version;for(let t of["encoding","standalone"])this[t]!==null&&(e[t]=this[t]);return e}},Yw=class extends Ui{constructor(e,t=Object.create(null),i=[]){super(),this.name=e,this.attributes=t,this.children=i}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let e=this;for(;e instanceof Yw;){if("xml:space"in e.attributes)return e.attributes["xml:space"]==="preserve";e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return Ui.TYPE_ELEMENT}toJSON(){return Object.assign(Ui.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}},CG=class extends Ui{constructor(e=[]){super(),this.children=e}get document(){return this}get root(){for(let e of this.children)if(e instanceof Yw)return e;return null}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return Ui.TYPE_DOCUMENT}toJSON(){return Object.assign(Ui.prototype.toJSON.call(this),{children:this.children.map(e=>e.toJSON())})}},AG=class extends Ui{constructor(e,t,i,n){super(),this.name=e,this.publicId=t??null,this.systemId=i??null,this.internalSubset=n??null}get type(){return Ui.TYPE_DOCUMENT_TYPE}toJSON(){let e=Ui.prototype.toJSON.call(this);e.name=this.name;for(let t of["publicId","systemId","internalSubset"])this[t]!==null&&(e[t]=this[t]);return e}},SG=class extends Error{constructor(e,t,i){let n=1,s="",r=1;for(let h=0;h<t;++h){let g=i[h];g===`
`?(n=1,s="",r+=1):(n+=1,s+=g)}let l=i.indexOf(`
`,t);s+=l===-1?i.slice(t):i.slice(t,l);let c=0;s.length>50&&(n<40?s=s.slice(0,50):(c=n-20,s=s.slice(c,n+30))),super(`${e} (line ${r}, column ${n})
  ${s}
`+" ".repeat(n-c+1)+`^
`),this.column=n,this.excerpt=s,this.line=r,this.name="XmlError",this.pos=t}},qS=class extends Ui{constructor(e,t=""){super(),this.name=e,this.content=t}get type(){return Ui.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(Ui.prototype.toJSON.call(this),{name:this.name,content:this.content})}},iA="",_ae=class{constructor(e,t={}){let i=this.document=new CG,n=this.c=new rae(e);if(this.l=i,this.f=t,this.f.includeOffsets&&(i.start=0,i.end=e.length),n.b("\uFEFF"),this.H(),!this.B())throw this.a("Root element is missing or invalid");for(;this.w(););if(!n.z)throw this.a("Extra content at the end of the document")}j(e,t){return e.parent=this.l,this.f.includeOffsets&&(e.start=this.c.i(t),e.end=this.c.i()),this.l.children.push(e),!0}x(e,t){let{children:i}=this.l,{length:n}=i;if(e=bv(e),n>0){let s=i[n-1];if((s==null?void 0:s.type)===Ui.TYPE_TEXT){let r=s;return r.text+=e,this.f.includeOffsets&&(r.end=this.c.i()),!0}}return this.j(new k3(e),t)}I(){let e=Object.create(null);for(;this.e();){let t=this.r();if(!t)break;let i=this.u()&&this.J();if(i===!1)throw this.a("Attribute value expected");if(t in e)throw this.a(`Duplicate attribute: ${t}`);if(t==="xml:space"&&i!=="default"&&i!=="preserve")throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');e[t]=i}if(this.f.sortAttributes){let t=Object.keys(e).sort(),i=Object.create(null);for(let n=0;n<t.length;++n){let s=t[n];i[s]=e[s]}e=i}return e}J(){let{c:e}=this,t=e.h();if(t!=='"'&&t!=="'")return!1;e.g();let i,n=!1,s=iA,r=t==='"'?sae:oae;e:for(;!e.z;)switch(i=e.G(r),i&&(this.p(i),s+=i.replace(lae," ")),e.h()){case t:n=!0;break e;case"&":s+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");case iA:break e}if(!n)throw this.a("Unclosed attribute");return e.g(),s}K(){let{c:e}=this,t=e.d;if(!e.b("<![CDATA["))return!1;let i=e.t("]]>");if(this.p(i),!e.b("]]>"))throw this.a("Unclosed CDATA section");return this.f.preserveCdata?this.j(new xG(bv(i)),t):this.x(i,t)}L(){let{c:e}=this,t=e.d,i=e.A(uae);if(!i)return!1;if(this.p(i),e.h(3)==="]]>")throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.x(i,t)}D(){let{c:e}=this,t=e.d;if(!e.b("<!--"))return!1;let i=e.t("--");if(this.p(i),!e.b("-->"))throw e.h(2)==="--"?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return this.f.preserveComments?this.j(new wG(bv(i)),t):!0}M(){let e=this.c.d,t=this.C();return t?this.x(t,e):!1}N(){let{c:e}=this,t=e.d;if(!e.b("<!DOCTYPE"))return!1;let i=this.e()&&this.r();if(!i)throw this.a("Expected a name");let n,s;if(this.e()){if(e.b("PUBLIC")){if(n=this.e()&&this.O(),n===!1)throw this.a("Expected a public identifier");this.e()}if(n!==void 0||e.b("SYSTEM")){if(this.e(),s=this.s(),s===!1)throw this.a("Expected a system identifier");this.e()}}let r;if(e.b("[")){if(r=e.A(/\][\x20\t\r\n]*>/),!e.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!e.b(">"))throw this.a("Unclosed doctype declaration");return this.f.preserveDocumentType?this.j(new AG(i,n,s,r),t):!0}B(){let{c:e}=this,t=e.d;if(!e.b("<"))return!1;let i=this.r();if(!i)return e.o(t),!1;let n=this.I(),s=!!e.b("/>"),r=new Yw(i,n);if(r.parent=this.l,!s){if(!e.b(">"))throw this.a(`Unclosed start tag for element \`${i}\``);this.l=r;do this.L();while(this.B()||this.M()||this.K()||this.E()||this.D());let l=e.d,c;if(!e.b("</")||!(c=this.r())||c!==i)throw e.o(l),this.a(`Missing end tag for element ${i}`);if(this.e(),!e.b(">"))throw this.a(`Unclosed end tag for element ${i}`);this.l=r.parent}return this.j(r,t)}u(){return this.e(),this.c.b("=")?(this.e(),!0):!1}w(){return this.D()||this.E()||this.e()}r(){return bG(this.c.h())?this.c.v(yG):iA}E(){let{c:e}=this,t=e.d;if(!e.b("<?"))return!1;let i=this.r();if(i){if(i.toLowerCase()==="xml")throw e.o(t),this.a("XML declaration isn't allowed here")}else throw this.a("Invalid processing instruction");if(!this.e()){if(e.b("?>"))return this.j(new qS(i),t);throw this.a("Whitespace is required after a processing instruction name")}let n=e.t("?>");if(this.p(n),!e.b("?>"))throw this.a("Unterminated processing instruction");return this.j(new qS(i,bv(n)),t)}H(){let{c:e}=this,t=e.d;for(this.P();this.w(););if(this.N())for(;this.w(););return t<e.d}O(){let e=this.c.d,t=this.s();if(t!==!1&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(t))throw this.c.o(e),this.a("Invalid character in public identifier");return t}C(){let{c:e}=this;if(!e.b("&"))return!1;let t=e.v(dae);if(e.F()!==";")throw this.a("Unterminated reference (a reference must end with `;`)");let i;if(t[0]==="#"){let n=t[1]==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);if(isNaN(n))throw this.a("Invalid character reference");if(!jR(n))throw this.a("Character reference resolves to an invalid character");i=String.fromCodePoint(n)}else if(i=cae[t],i===void 0){let{ignoreUndefinedEntities:n,resolveUndefinedEntity:s}=this.f,r=`&${t};`;if(s){let l=s(r);if(l!=null){let c=typeof l;if(c!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${c}`);return l}}if(n)return r;throw e.o(-r.length),this.a(`Named entity isn't defined: ${r}`)}return i}s(){let{c:e}=this,t=e.b('"')||e.b("'");if(!t)return!1;let i=e.t(t);if(this.p(i),!e.b(t))throw this.a("Missing end quote");return i}e(){return!!this.c.v(hae)}P(){let{c:e}=this,t=e.d;if(!e.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let i=!!e.b("version")&&this.u()&&this.s();if(i===!1)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(i))throw this.a("Invalid character in version number");let n,s;if(this.e()&&(n=!!e.b("encoding")&&this.u()&&this.s(),n&&this.e(),s=!!e.b("standalone")&&this.u()&&this.s(),s)){if(s!=="yes"&&s!=="no")throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}if(!e.b("?>"))throw this.a("Invalid or unclosed XML declaration");return this.f.preserveXmlDeclaration?this.j(new IG(i,n||void 0,s||void 0),t):!0}a(e){let{c:t}=this;return new SG(e,t.d,t.m)}p(e){let{length:t}=e;for(let i=0;i<t;++i){let n=e.codePointAt(i);if(!jR(n))throw this.c.o(-([...e].length-i)),this.a("Invalid character");n>65535&&(i+=1)}}};function bv(a){let e=0;for(;(e=a.indexOf("\r",e))!==-1;)a=a[e+1]===`
`?a.slice(0,e)+a.slice(e+1):a.slice(0,e)+`
`+a.slice(e+1);return a}function mae(a,e){return new _ae(a,e).document}let gae=class extends Error{constructor(e,t,i){super(e),this.httpStatus=t,this.isCrossOriginRelated=i,this.name="EndpointError"}},pae=class extends Error{constructor(e,t,i,n,s){super(e),this.requestUrl=t,this.code=i,this.locator=n,this.response=s,this.name="ServiceExceptionError"}};function fae(a){if(a.name==="ServiceExceptionError"){const t=new pae(a.message,a.requestUrl,a.code,a.locator,a.response);return t.stack=a.stack,t}if(a.name==="EndpointError"){const t=new gae(a.message,a.httpStatus,a.isCrossOriginRelated);return t.stack=a.stack,t}const e=new Error(a.message);return e.stack=a.stack,e}function yae(a,e,t){return new Promise((i,n)=>{const s=Jte(),r={requestId:s,taskName:a,params:t};e===null?globalThis.dispatchEvent(new CustomEvent("ogc-client.request",{detail:r})):e.postMessage(r);const l=g=>{g.requestId===s&&(e===null?globalThis.removeEventListener("message",c):e.removeEventListener("message",h),"error"in g?n(fae(g.error)):i(g.response))},c=g=>l(g.detail),h=g=>l(g.data);e===null?globalThis.addEventListener("ogc-client.response",c):e.addEventListener("message",h)})}const TG="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICAvKiEgQHJncm92ZS9wYXJzZS14bWwgdjQuMS4wIHwgSVNDIExpY2Vuc2UgfCBDb3B5cmlnaHQgUnlhbiBHcm92ZSAqLwogIHZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7CiAgdmFyIF9fZ2V0T3duUHJvcERlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yOwogIHZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzOwogIHZhciBfX2hhc093blByb3AgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5OwogIHZhciBfX2V4cG9ydCA9ICh0YXJnZXQsIGFsbCkgPT4gewogICAgZm9yICh2YXIgbmFtZSBpbiBhbGwpCiAgICAgIF9fZGVmUHJvcCh0YXJnZXQsIG5hbWUsIHsgZ2V0OiBhbGxbbmFtZV0sIGVudW1lcmFibGU6IHRydWUgfSk7CiAgfTsKICB2YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4gewogICAgaWYgKGZyb20gJiYgdHlwZW9mIGZyb20gPT09ICJvYmplY3QiIHx8IHR5cGVvZiBmcm9tID09PSAiZnVuY3Rpb24iKSB7CiAgICAgIGZvciAobGV0IGtleSBvZiBfX2dldE93blByb3BOYW1lcyhmcm9tKSkKICAgICAgICBpZiAoIV9faGFzT3duUHJvcC5jYWxsKHRvLCBrZXkpICYmIGtleSAhPT0gZXhjZXB0KQogICAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pOwogICAgfQogICAgcmV0dXJuIHRvOwogIH07CiAgdmFyIF9fdG9Db21tb25KUyA9IChtb2QpID0+IF9fY29weVByb3BzKF9fZGVmUHJvcCh7fSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pLCBtb2QpOwogIHZhciBzcmNfZXhwb3J0cyA9IHt9OwogIF9fZXhwb3J0KHNyY19leHBvcnRzLCB7CiAgICBYbWxDZGF0YTogKCkgPT4gWG1sQ2RhdGEsCiAgICBYbWxDb21tZW50OiAoKSA9PiBYbWxDb21tZW50LAogICAgWG1sRGVjbGFyYXRpb246ICgpID0+IFhtbERlY2xhcmF0aW9uLAogICAgWG1sRG9jdW1lbnQ6ICgpID0+IFhtbERvY3VtZW50LAogICAgWG1sRG9jdW1lbnRUeXBlOiAoKSA9PiBYbWxEb2N1bWVudFR5cGUsCiAgICBYbWxFbGVtZW50OiAoKSA9PiBYbWxFbGVtZW50LAogICAgWG1sRXJyb3I6ICgpID0+IFhtbEVycm9yLAogICAgWG1sTm9kZTogKCkgPT4gWG1sTm9kZSwKICAgIFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbjogKCkgPT4gWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uLAogICAgWG1sVGV4dDogKCkgPT4gWG1sVGV4dCwKICAgIHBhcnNlWG1sOiAoKSA9PiBwYXJzZVhtbAogIH0pOwogIHZhciBicm93c2VyID0gX190b0NvbW1vbkpTKHNyY19leHBvcnRzKTsKICB2YXIgZW1wdHlTdHJpbmcgPSAiIjsKICB2YXIgc3Vycm9nYXRlUGFpciA9IC9bXHVEODAwLVx1REJGRl1bXHVEQzAwLVx1REZGRl0vZzsKICB2YXIgU3RyaW5nU2Nhbm5lciA9IGNsYXNzIHsKICAgIGNvbnN0cnVjdG9yKHN0cmluZykgewogICAgICB0aGlzLmsgPSB0aGlzLnEoc3RyaW5nLCB0cnVlKTsKICAgICAgdGhpcy5kID0gMDsKICAgICAgdGhpcy5sZW5ndGggPSBzdHJpbmcubGVuZ3RoOwogICAgICB0aGlzLm4gPSB0aGlzLmsgIT09IHRoaXMubGVuZ3RoOwogICAgICB0aGlzLm0gPSBzdHJpbmc7CiAgICAgIGlmICh0aGlzLm4pIHsKICAgICAgICBsZXQgY2hhcnNUb0J5dGVzID0gW107CiAgICAgICAgZm9yIChsZXQgYnl0ZUluZGV4ID0gMCwgY2hhckluZGV4ID0gMDsgY2hhckluZGV4IDwgdGhpcy5rOyArK2NoYXJJbmRleCkgewogICAgICAgICAgY2hhcnNUb0J5dGVzW2NoYXJJbmRleF0gPSBieXRlSW5kZXg7CiAgICAgICAgICBieXRlSW5kZXggKz0gc3RyaW5nLmNvZGVQb2ludEF0KGJ5dGVJbmRleCkgPiA2NTUzNSA/IDIgOiAxOwogICAgICAgIH0KICAgICAgICB0aGlzLnkgPSBjaGFyc1RvQnl0ZXM7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXggaXMgYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBnZXQgeigpIHsKICAgICAgcmV0dXJuIHRoaXMuZCA+PSB0aGlzLms7CiAgICB9CiAgICAvLyAtLSBQcm90ZWN0ZWQgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gdGhlIGdpdmVuIHN0cmluZywgd2hpY2ggbWF5IGRpZmZlciBmcm9tCiAgICAgKiB0aGUgYnl0ZSBsZW5ndGggaWYgdGhlIHN0cmluZyBjb250YWlucyBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgcShzdHJpbmcsIG11bHRpQnl0ZVNhZmUgPSB0aGlzLm4pIHsKICAgICAgcmV0dXJuIG11bHRpQnl0ZVNhZmUgPyBzdHJpbmcucmVwbGFjZShzdXJyb2dhdGVQYWlyLCAiXyIpLmxlbmd0aCA6IHN0cmluZy5sZW5ndGg7CiAgICB9CiAgICAvLyAtLSBQdWJsaWMgTWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogQWR2YW5jZXMgdGhlIHNjYW5uZXIgYnkgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzLCBzdG9wcGluZyBpZiB0aGUgZW5kCiAgICAgKiBvZiB0aGUgc3RyaW5nIGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIGcoY291bnQgPSAxKSB7CiAgICAgIHRoaXMuZCA9IE1hdGgubWluKHRoaXMuaywgdGhpcy5kICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRoZSBieXRlIGluZGV4IG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXIgaW5kZXggaW4gdGhlIHN0cmluZy4gVGhlIHR3bwogICAgICogbWF5IGRpZmZlciBpbiBzdHJpbmdzIHRoYXQgY29udGFpbiBtdWx0aWJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgaShjaGFySW5kZXggPSB0aGlzLmQpIHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gdGhpcy5uID8gKF9hID0gdGhpcy55W2NoYXJJbmRleF0pICE9IG51bGwgPyBfYSA6IEluZmluaXR5IDogY2hhckluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbmQgcmV0dXJucyB0aGUgZ2l2ZW4gbnVtYmVyIG9mIGNoYXJhY3RlcnMgaWYgcG9zc2libGUsIGFkdmFuY2luZwogICAgICogdGhlIHNjYW5uZXIgYW5kIHN0b3BwaW5nIGlmIHRoZSBlbmQgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICoKICAgICAqIElmIG5vIGNoYXJhY3RlcnMgY291bGQgYmUgY29uc3VtZWQsIGFuIGVtcHR5IHN0cmluZyB3aWxsIGJlIHJldHVybmVkLgogICAgICovCiAgICBGKGNvdW50ID0gMSkgewogICAgICBsZXQgY2hhcnMgPSB0aGlzLmgoY291bnQpOwogICAgICB0aGlzLmcoY291bnQpOwogICAgICByZXR1cm4gY2hhcnM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgbWF0Y2ggZm9yIHRoZSBnaXZlbiBzdGlja3kgcmVnZXgsIGFkdmFuY2VzIHRoZSBzY2FubmVyLCB1cGRhdGVzCiAgICAgKiB0aGUgYGxhc3RJbmRleGAgcHJvcGVydHkgb2YgdGhlIHJlZ2V4LCBhbmQgcmV0dXJucyB0aGUgbWF0Y2hpbmcgc3RyaW5nLgogICAgICoKICAgICAqIFRoZSByZWdleCBtdXN0IGhhdmUgYSBzdGlja3kgZmxhZyAoInkiKSBzbyB0aGF0IGl0cyBgbGFzdEluZGV4YCBwcm9wIGNhbiBiZQogICAgICogdXNlZCB0byBhbmNob3IgdGhlIG1hdGNoIGF0IHRoZSBjdXJyZW50IHNjYW5uZXIgcG9zaXRpb24uCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIEcocmVnZXgpIHsKICAgICAgaWYgKCFyZWdleC5zdGlja3kpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ByZWdleGAgbXVzdCBoYXZlIGEgc3RpY2t5IGZsYWcgKCJ5IiknKTsKICAgICAgfQogICAgICByZWdleC5sYXN0SW5kZXggPSB0aGlzLmkoKTsKICAgICAgbGV0IHJlc3VsdCA9IHJlZ2V4LmV4ZWModGhpcy5tKTsKICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCBtYXRjaCA9IHJlc3VsdFswXTsKICAgICAgdGhpcy5nKHRoaXMucShtYXRjaCkpOwogICAgICByZXR1cm4gbWF0Y2g7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuZCByZXR1cm5zIGFsbCBjaGFyYWN0ZXJzIGZvciB3aGljaCB0aGUgZ2l2ZW4gZnVuY3Rpb24gcmV0dXJucyBhCiAgICAgKiB0cnV0aHkgdmFsdWUsIHN0b3BwaW5nIG9uIHRoZSBmaXJzdCBmYWxzeSByZXR1cm4gdmFsdWUgb3IgaWYgdGhlIGVuZCBvZiB0aGUKICAgICAqIGlucHV0IGlzIHJlYWNoZWQuCiAgICAgKi8KICAgIHYoZm4pIHsKICAgICAgbGV0IGNoYXI7CiAgICAgIGxldCBtYXRjaCA9IGVtcHR5U3RyaW5nOwogICAgICB3aGlsZSAoKGNoYXIgPSB0aGlzLmgoKSkgJiYgZm4oY2hhcikpIHsKICAgICAgICBtYXRjaCArPSBjaGFyOwogICAgICAgIHRoaXMuZygpOwogICAgICB9CiAgICAgIHJldHVybiBtYXRjaDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgdGhlIGdpdmVuIHN0cmluZyBpZiBpdCBleGlzdHMgYXQgdGhlIGN1cnJlbnQgY2hhcmFjdGVyIGluZGV4LCBhbmQKICAgICAqIGFkdmFuY2VzIHRoZSBzY2FubmVyLgogICAgICoKICAgICAqIElmIHRoZSBnaXZlbiBzdHJpbmcgZG9lc24ndCBleGlzdCBhdCB0aGUgY3VycmVudCBjaGFyYWN0ZXIgaW5kZXgsIGFuIGVtcHR5CiAgICAgKiBzdHJpbmcgd2lsbCBiZSByZXR1cm5lZCBhbmQgdGhlIHNjYW5uZXIgd2lsbCBub3QgYmUgYWR2YW5jZWQuCiAgICAgKi8KICAgIFEoc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgIGlmICh0aGlzLmIoc3RyaW5nVG9Db25zdW1lKSkgewogICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubikgewogICAgICAgIGxldCB7IGxlbmd0aCB9ID0gc3RyaW5nVG9Db25zdW1lOwogICAgICAgIGxldCBjaGFyTGVuZ3RoVG9NYXRjaCA9IHRoaXMucShzdHJpbmdUb0NvbnN1bWUpOwogICAgICAgIGlmIChjaGFyTGVuZ3RoVG9NYXRjaCAhPT0gbGVuZ3RoICYmIHN0cmluZ1RvQ29uc3VtZSA9PT0gdGhpcy5oKGNoYXJMZW5ndGhUb01hdGNoKSkgewogICAgICAgICAgdGhpcy5nKGNoYXJMZW5ndGhUb01hdGNoKTsKICAgICAgICAgIHJldHVybiBzdHJpbmdUb0NvbnN1bWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBlbXB0eVN0cmluZzsKICAgIH0KICAgIC8qKgogICAgICogRG9lcyB0aGUgc2FtZSB0aGluZyBhcyBgY29uc3VtZVN0cmluZygpYCwgYnV0IGRvZXNuJ3Qgc3VwcG9ydCBjb25zdW1pbmcKICAgICAqIG11bHRpYnl0ZSBjaGFyYWN0ZXJzLiBUaGlzIGNhbiBiZSBmYXN0ZXIgaWYgeW91IG9ubHkgbmVlZCB0byBtYXRjaCBzaW5nbGUKICAgICAqIGJ5dGUgY2hhcmFjdGVycy4KICAgICAqLwogICAgYihzdHJpbmdUb0NvbnN1bWUpIHsKICAgICAgbGV0IHsgbGVuZ3RoIH0gPSBzdHJpbmdUb0NvbnN1bWU7CiAgICAgIGlmICh0aGlzLmgobGVuZ3RoKSA9PT0gc3RyaW5nVG9Db25zdW1lKSB7CiAgICAgICAgdGhpcy5nKGxlbmd0aCk7CiAgICAgICAgcmV0dXJuIHN0cmluZ1RvQ29uc3VtZTsKICAgICAgfQogICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIGdsb2JhbCByZWdleCBpcyBtYXRjaGVkLCBhZHZhbmNpbmcgdGhlCiAgICAgKiBzY2FubmVyIHVwIHRvIChidXQgbm90IGJleW9uZCkgdGhlIGJlZ2lubmluZyBvZiB0aGUgbWF0Y2guIElmIHRoZSByZWdleAogICAgICogZG9lc24ndCBtYXRjaCwgbm90aGluZyB3aWxsIGJlIGNvbnN1bWVkLgogICAgICoKICAgICAqIFJldHVybnMgdGhlIGNvbnN1bWVkIHN0cmluZywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIGNvbnN1bWVkLgogICAgICovCiAgICBBKHJlZ2V4KSB7CiAgICAgIGxldCByZXN0T2ZTdHJpbmcgPSB0aGlzLm0uc2xpY2UodGhpcy5pKCkpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSByZXN0T2ZTdHJpbmcuc2VhcmNoKHJlZ2V4KTsKICAgICAgaWYgKG1hdGNoQnl0ZUluZGV4IDw9IDApIHsKICAgICAgICByZXR1cm4gZW1wdHlTdHJpbmc7CiAgICAgIH0KICAgICAgbGV0IHJlc3VsdCA9IHJlc3RPZlN0cmluZy5zbGljZSgwLCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGNoYXJhY3RlcnMgdW50aWwgdGhlIGdpdmVuIHN0cmluZyBpcyBmb3VuZCwgYWR2YW5jaW5nIHRoZSBzY2FubmVyCiAgICAgKiB1cCB0byAoYnV0IG5vdCBiZXlvbmQpIHRoYXQgcG9pbnQuIElmIHRoZSBzdHJpbmcgaXMgbmV2ZXIgZm91bmQsIG5vdGhpbmcKICAgICAqIHdpbGwgYmUgY29uc3VtZWQuCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgY29uc3VtZWQgc3RyaW5nLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKi8KICAgIHQoc2VhcmNoU3RyaW5nKSB7CiAgICAgIGxldCB7IG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgbGV0IGJ5dGVJbmRleCA9IHRoaXMuaSgpOwogICAgICBsZXQgbWF0Y2hCeXRlSW5kZXggPSBzdHJpbmcuaW5kZXhPZihzZWFyY2hTdHJpbmcsIGJ5dGVJbmRleCk7CiAgICAgIGlmIChtYXRjaEJ5dGVJbmRleCA8PSAwKSB7CiAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICB9CiAgICAgIGxldCByZXN1bHQgPSBzdHJpbmcuc2xpY2UoYnl0ZUluZGV4LCBtYXRjaEJ5dGVJbmRleCk7CiAgICAgIHRoaXMuZyh0aGlzLnEocmVzdWx0KSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdGhlIGdpdmVuIG51bWJlciBvZiBjaGFyYWN0ZXJzIHN0YXJ0aW5nIGF0IHRoZSBjdXJyZW50IGNoYXJhY3RlcgogICAgICogaW5kZXgsIHdpdGhvdXQgYWR2YW5jaW5nIHRoZSBzY2FubmVyIGFuZCB3aXRob3V0IGV4Y2VlZGluZyB0aGUgZW5kIG9mIHRoZQogICAgICogaW5wdXQgc3RyaW5nLgogICAgICovCiAgICBoKGNvdW50ID0gMSkgewogICAgICBsZXQgeyBkOiBjaGFySW5kZXgsIG46IG11bHRpQnl0ZU1vZGUsIG06IHN0cmluZyB9ID0gdGhpczsKICAgICAgaWYgKG11bHRpQnl0ZU1vZGUpIHsKICAgICAgICBpZiAoY2hhckluZGV4ID49IHRoaXMuaykgewogICAgICAgICAgcmV0dXJuIGVtcHR5U3RyaW5nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKAogICAgICAgICAgdGhpcy5pKGNoYXJJbmRleCksCiAgICAgICAgICB0aGlzLmkoY2hhckluZGV4ICsgY291bnQpCiAgICAgICAgKTsKICAgICAgfQogICAgICByZXR1cm4gc3RyaW5nLnNsaWNlKGNoYXJJbmRleCwgY2hhckluZGV4ICsgY291bnQpOwogICAgfQogICAgLyoqCiAgICAgKiBSZXNldHMgdGhlIHNjYW5uZXIgcG9zaXRpb24gdG8gdGhlIGdpdmVuIGNoYXJhY3RlciBfaW5kZXhfLCBvciB0byB0aGUgc3RhcnQKICAgICAqIG9mIHRoZSBpbnB1dCBzdHJpbmcgaWYgbm8gaW5kZXggaXMgZ2l2ZW4uCiAgICAgKgogICAgICogSWYgX2luZGV4XyBpcyBuZWdhdGl2ZSwgdGhlIHNjYW5uZXIgcG9zaXRpb24gd2lsbCBiZSBtb3ZlZCBiYWNrd2FyZCBieSB0aGF0CiAgICAgKiBtYW55IGNoYXJhY3RlcnMsIHN0b3BwaW5nIGlmIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHN0cmluZyBpcyByZWFjaGVkLgogICAgICovCiAgICBvKGluZGV4ID0gMCkgewogICAgICB0aGlzLmQgPSBpbmRleCA+PSAwID8gTWF0aC5taW4odGhpcy5rLCBpbmRleCkgOiBNYXRoLm1heCgwLCB0aGlzLmQgKyBpbmRleCk7CiAgICB9CiAgfTsKICB2YXIgYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgPSAvW14iJjxdKy95OwogIHZhciBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZSA9IC9bXicmPF0rL3k7CiAgdmFyIGF0dFZhbHVlTm9ybWFsaXplZFdoaXRlc3BhY2UgPSAvXHJcbnxbXG5cclx0XS9nOwogIHZhciBlbmRDaGFyRGF0YSA9IC88fCZ8XV0+LzsKICB2YXIgcHJlZGVmaW5lZEVudGl0aWVzID0gT2JqZWN0LmZyZWV6ZShPYmplY3QuYXNzaWduKC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCB7CiAgICBhbXA6ICImIiwKICAgIGFwb3M6ICInIiwKICAgIGd0OiAiPiIsCiAgICBsdDogIjwiLAogICAgcXVvdDogJyInCiAgfSkpOwogIGZ1bmN0aW9uIGlzTmFtZUNoYXIoY2hhcikgewogICAgbGV0IGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpOwogICAgcmV0dXJuIGNwID49IDk3ICYmIGNwIDw9IDEyMiB8fCBjcCA+PSA2NSAmJiBjcCA8PSA5MCB8fCBjcCA+PSA0OCAmJiBjcCA8PSA1NyB8fCBjcCA9PT0gNDUgfHwgY3AgPT09IDQ2IHx8IGNwID09PSAxODMgfHwgY3AgPj0gNzY4ICYmIGNwIDw9IDg3OSB8fCBjcCA+PSA4MjU1ICYmIGNwIDw9IDgyNTYgfHwgaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwKTsKICB9CiAgZnVuY3Rpb24gaXNOYW1lU3RhcnRDaGFyKGNoYXIsIGNwID0gZ2V0Q29kZVBvaW50KGNoYXIpKSB7CiAgICByZXR1cm4gY3AgPj0gOTcgJiYgY3AgPD0gMTIyIHx8IGNwID49IDY1ICYmIGNwIDw9IDkwIHx8IGNwID09PSA1OCB8fCBjcCA9PT0gOTUgfHwgY3AgPj0gMTkyICYmIGNwIDw9IDIxNCB8fCBjcCA+PSAyMTYgJiYgY3AgPD0gMjQ2IHx8IGNwID49IDI0OCAmJiBjcCA8PSA3NjcgfHwgY3AgPj0gODgwICYmIGNwIDw9IDg5MyB8fCBjcCA+PSA4OTUgJiYgY3AgPD0gODE5MSB8fCBjcCA+PSA4MjA0ICYmIGNwIDw9IDgyMDUgfHwgY3AgPj0gODMwNCAmJiBjcCA8PSA4NTkxIHx8IGNwID49IDExMjY0ICYmIGNwIDw9IDEyMjcxIHx8IGNwID49IDEyMjg5ICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDYzNzQ0ICYmIGNwIDw9IDY0OTc1IHx8IGNwID49IDY1MDA4ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDk4MzAzOTsKICB9CiAgZnVuY3Rpb24gaXNSZWZlcmVuY2VDaGFyKGNoYXIpIHsKICAgIHJldHVybiBjaGFyID09PSAiIyIgfHwgaXNOYW1lQ2hhcihjaGFyKTsKICB9CiAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGNoYXIpIHsKICAgIGxldCBjcCA9IGdldENvZGVQb2ludChjaGFyKTsKICAgIHJldHVybiBjcCA9PT0gMzIgfHwgY3AgPT09IDkgfHwgY3AgPT09IDEwIHx8IGNwID09PSAxMzsKICB9CiAgZnVuY3Rpb24gaXNYbWxDb2RlUG9pbnQoY3ApIHsKICAgIHJldHVybiBjcCA9PT0gOSB8fCBjcCA9PT0gMTAgfHwgY3AgPT09IDEzIHx8IGNwID49IDMyICYmIGNwIDw9IDU1Mjk1IHx8IGNwID49IDU3MzQ0ICYmIGNwIDw9IDY1NTMzIHx8IGNwID49IDY1NTM2ICYmIGNwIDw9IDExMTQxMTE7CiAgfQogIGZ1bmN0aW9uIGdldENvZGVQb2ludChjaGFyKSB7CiAgICByZXR1cm4gY2hhci5jb2RlUG9pbnRBdCgwKSB8fCAtMTsKICB9CiAgdmFyIF9YbWxOb2RlID0gY2xhc3MgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICAgICAgdGhpcy5zdGFydCA9IC0xOwogICAgICB0aGlzLmVuZCA9IC0xOwogICAgfQogICAgLyoqCiAgICAgKiBEb2N1bWVudCB0aGF0IGNvbnRhaW5zIHRoaXMgbm9kZSwgb3IgYG51bGxgIGlmIHRoaXMgbm9kZSBpcyBub3QgYXNzb2NpYXRlZAogICAgICogd2l0aCBhIGRvY3VtZW50LgogICAgICovCiAgICBnZXQgZG9jdW1lbnQoKSB7CiAgICAgIHZhciBfYSwgX2I7CiAgICAgIHJldHVybiAoX2IgPSAoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLmRvY3VtZW50KSAhPSBudWxsID8gX2IgOiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRoaXMgbm9kZSBpcyB0aGUgcm9vdCBub2RlIG9mIHRoZSBkb2N1bWVudCAoYWxzbyBrbm93biBhcyB0aGUKICAgICAqIGRvY3VtZW50IGVsZW1lbnQpLgogICAgICovCiAgICBnZXQgaXNSb290Tm9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFyZW50ICE9PSBudWxsICYmIHRoaXMucGFyZW50ID09PSB0aGlzLmRvY3VtZW50ICYmIHRoaXMudHlwZSA9PT0gX1htbE5vZGUuVFlQRV9FTEVNRU5UOwogICAgfQogICAgLyoqCiAgICAgKiBXaGV0aGVyIHdoaXRlc3BhY2Ugc2hvdWxkIGJlIHByZXNlcnZlZCBpbiB0aGUgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kCiAgICAgKiBpdHMgY2hpbGRyZW4uCiAgICAgKgogICAgICogVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHRoZSB2YWx1ZSBvZiB0aGUgc3BlY2lhbCBgeG1sOnNwYWNlYCBhdHRyaWJ1dGUsIGFuZAogICAgICogd2lsbCBiZSBgdHJ1ZWAgZm9yIGFueSBub2RlIHdob3NlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBpcyBzZXQgdG8KICAgICAqICJwcmVzZXJ2ZSIuIElmIGEgbm9kZSBoYXMgbm8gc3VjaCBhdHRyaWJ1dGUsIGl0IHdpbGwgaW5oZXJpdCB0aGUgdmFsdWUgb2YKICAgICAqIHRoZSBuZWFyZXN0IGFuY2VzdG9yIHRoYXQgZG9lcyAoaWYgYW55KS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy13aGl0ZS1zcGFjZQogICAgICovCiAgICBnZXQgcHJlc2VydmVXaGl0ZXNwYWNlKCkgewogICAgICB2YXIgX2E7CiAgICAgIHJldHVybiAhISgoX2EgPSB0aGlzLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnByZXNlcnZlV2hpdGVzcGFjZSk7CiAgICB9CiAgICAvKioKICAgICAqIFR5cGUgb2YgdGhpcyBub2RlLgogICAgICoKICAgICAqIFRoZSB2YWx1ZSBvZiB0aGlzIHByb3BlcnR5IGlzIGEgc3RyaW5nIHRoYXQgbWF0Y2hlcyBvbmUgb2YgdGhlIHN0YXRpYwogICAgICogYFRZUEVfKmAgcHJvcGVydGllcyBvbiB0aGUgYFhtbE5vZGVgIGNsYXNzIChlLmcuIGBUWVBFX0VMRU1FTlRgLAogICAgICogYFRZUEVfVEVYVGAsIGV0Yy4pLgogICAgICoKICAgICAqIFRoZSBgWG1sTm9kZWAgY2xhc3MgaXRzZWxmIGlzIGEgYmFzZSBjbGFzcyBhbmQgZG9lc24ndCBoYXZlIGl0cyBvd24gdHlwZQogICAgICogbmFtZS4KICAgICAqLwogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiAiIjsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBub2RlLCBtaW51cyBwcm9wZXJ0aWVzCiAgICAgKiB0aGF0IGNvdWxkIHJlc3VsdCBpbiBjaXJjdWxhciByZWZlcmVuY2VzLgogICAgICovCiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gewogICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICB9OwogICAgICBpZiAodGhpcy5pc1Jvb3ROb2RlKSB7CiAgICAgICAganNvbi5pc1Jvb3ROb2RlID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAodGhpcy5wcmVzZXJ2ZVdoaXRlc3BhY2UpIHsKICAgICAgICBqc29uLnByZXNlcnZlV2hpdGVzcGFjZSA9IHRydWU7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RhcnQgIT09IC0xKSB7CiAgICAgICAganNvbi5zdGFydCA9IHRoaXMuc3RhcnQ7CiAgICAgICAganNvbi5lbmQgPSB0aGlzLmVuZDsKICAgICAgfQogICAgICByZXR1cm4ganNvbjsKICAgIH0KICB9OwogIHZhciBYbWxOb2RlID0gX1htbE5vZGU7CiAgWG1sTm9kZS5UWVBFX0NEQVRBID0gImNkYXRhIjsKICBYbWxOb2RlLlRZUEVfQ09NTUVOVCA9ICJjb21tZW50IjsKICBYbWxOb2RlLlRZUEVfRE9DVU1FTlQgPSAiZG9jdW1lbnQiOwogIFhtbE5vZGUuVFlQRV9ET0NVTUVOVF9UWVBFID0gImRvY3R5cGUiOwogIFhtbE5vZGUuVFlQRV9FTEVNRU5UID0gImVsZW1lbnQiOwogIFhtbE5vZGUuVFlQRV9QUk9DRVNTSU5HX0lOU1RSVUNUSU9OID0gInBpIjsKICBYbWxOb2RlLlRZUEVfVEVYVCA9ICJ0ZXh0IjsKICBYbWxOb2RlLlRZUEVfWE1MX0RFQ0xBUkFUSU9OID0gInhtbGRlY2wiOwogIHZhciBYbWxUZXh0ID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHRleHQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLnRleHQgPSB0ZXh0OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfVEVYVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICB0ZXh0OiB0aGlzLnRleHQKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sQ2RhdGEgPSBjbGFzcyBleHRlbmRzIFhtbFRleHQgewogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfQ0RBVEE7CiAgICB9CiAgfTsKICB2YXIgWG1sQ29tbWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3Rvcihjb250ZW50ID0gIiIpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0NPTU1FTlQ7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKFhtbE5vZGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpLCB7CiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIFhtbERlY2xhcmF0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMudmVyc2lvbiA9IHZlcnNpb247CiAgICAgIHRoaXMuZW5jb2RpbmcgPSBlbmNvZGluZyAhPSBudWxsID8gZW5jb2RpbmcgOiBudWxsOwogICAgICB0aGlzLnN0YW5kYWxvbmUgPSBzdGFuZGFsb25lICE9IG51bGwgPyBzdGFuZGFsb25lIDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX1hNTF9ERUNMQVJBVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgbGV0IGpzb24gPSBYbWxOb2RlLnByb3RvdHlwZS50b0pTT04uY2FsbCh0aGlzKTsKICAgICAganNvbi52ZXJzaW9uID0gdGhpcy52ZXJzaW9uOwogICAgICBmb3IgKGxldCBrZXkgb2YgWyJlbmNvZGluZyIsICJzdGFuZGFsb25lIl0pIHsKICAgICAgICBpZiAodGhpc1trZXldICE9PSBudWxsKSB7CiAgICAgICAgICBqc29uW2tleV0gPSB0aGlzW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBqc29uOwogICAgfQogIH07CiAgdmFyIFhtbEVsZW1lbnQgPSBjbGFzcyBleHRlbmRzIFhtbE5vZGUgewogICAgY29uc3RydWN0b3IobmFtZSwgYXR0cmlidXRlcyA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpLCBjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIC8qKgogICAgICogV2hldGhlciB0aGlzIGVsZW1lbnQgaXMgZW1wdHkgKG1lYW5pbmcgaXQgaGFzIG5vIGNoaWxkcmVuKS4KICAgICAqLwogICAgZ2V0IGlzRW1wdHkoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLmxlbmd0aCA9PT0gMDsKICAgIH0KICAgIGdldCBwcmVzZXJ2ZVdoaXRlc3BhY2UoKSB7CiAgICAgIGxldCBub2RlID0gdGhpczsKICAgICAgd2hpbGUgKG5vZGUgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgaWYgKCJ4bWw6c3BhY2UiIGluIG5vZGUuYXR0cmlidXRlcykgewogICAgICAgICAgcmV0dXJuIG5vZGUuYXR0cmlidXRlc1sieG1sOnNwYWNlIl0gPT09ICJwcmVzZXJ2ZSI7CiAgICAgICAgfQogICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRleHQgY29udGVudCBvZiB0aGlzIGVsZW1lbnQgYW5kIGFsbCBpdHMgZGVzY2VuZGFudHMuCiAgICAgKi8KICAgIGdldCB0ZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiAidGV4dCIgaW4gY2hpbGQgPyBjaGlsZC50ZXh0IDogIiIpLmpvaW4oIiIpOwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfRUxFTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgYXR0cmlidXRlczogdGhpcy5hdHRyaWJ1dGVzLAogICAgICAgIGNoaWxkcmVuOiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+IGNoaWxkLnRvSlNPTigpKQogICAgICB9KTsKICAgIH0KICB9OwogIHZhciBYbWxEb2N1bWVudCA9IGNsYXNzIGV4dGVuZHMgWG1sTm9kZSB7CiAgICBjb25zdHJ1Y3RvcihjaGlsZHJlbiA9IFtdKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBjaGlsZHJlbjsKICAgIH0KICAgIGdldCBkb2N1bWVudCgpIHsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJvb3QgZWxlbWVudCBvZiB0aGlzIGRvY3VtZW50LCBvciBgbnVsbGAgaWYgdGhpcyBkb2N1bWVudCBpcyBlbXB0eS4KICAgICAqLwogICAgZ2V0IHJvb3QoKSB7CiAgICAgIGZvciAobGV0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHsKICAgICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBYbWxFbGVtZW50KSB7CiAgICAgICAgICByZXR1cm4gY2hpbGQ7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBUZXh0IGNvbnRlbnQgb2YgdGhpcyBkb2N1bWVudCBhbmQgYWxsIGl0cyBkZXNjZW5kYW50cy4KICAgICAqLwogICAgZ2V0IHRleHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuLm1hcCgoY2hpbGQpID0+ICJ0ZXh0IiBpbiBjaGlsZCA/IGNoaWxkLnRleHQgOiAiIikuam9pbigiIik7CiAgICB9CiAgICBnZXQgdHlwZSgpIHsKICAgICAgcmV0dXJuIFhtbE5vZGUuVFlQRV9ET0NVTUVOVDsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBjaGlsZHJlbjogdGhpcy5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiBjaGlsZC50b0pTT04oKSkKICAgICAgfSk7CiAgICB9CiAgfTsKICB2YXIgWG1sRG9jdW1lbnRUeXBlID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIHB1YmxpY0lkLCBzeXN0ZW1JZCwgaW50ZXJuYWxTdWJzZXQpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgdGhpcy5wdWJsaWNJZCA9IHB1YmxpY0lkICE9IG51bGwgPyBwdWJsaWNJZCA6IG51bGw7CiAgICAgIHRoaXMuc3lzdGVtSWQgPSBzeXN0ZW1JZCAhPSBudWxsID8gc3lzdGVtSWQgOiBudWxsOwogICAgICB0aGlzLmludGVybmFsU3Vic2V0ID0gaW50ZXJuYWxTdWJzZXQgIT0gbnVsbCA/IGludGVybmFsU3Vic2V0IDogbnVsbDsKICAgIH0KICAgIGdldCB0eXBlKCkgewogICAgICByZXR1cm4gWG1sTm9kZS5UWVBFX0RPQ1VNRU5UX1RZUEU7CiAgICB9CiAgICB0b0pTT04oKSB7CiAgICAgIGxldCBqc29uID0gWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyk7CiAgICAgIGpzb24ubmFtZSA9IHRoaXMubmFtZTsKICAgICAgZm9yIChsZXQga2V5IG9mIFsicHVibGljSWQiLCAic3lzdGVtSWQiLCAiaW50ZXJuYWxTdWJzZXQiXSkgewogICAgICAgIGlmICh0aGlzW2tleV0gIT09IG51bGwpIHsKICAgICAgICAgIGpzb25ba2V5XSA9IHRoaXNba2V5XTsKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIGpzb247CiAgICB9CiAgfTsKICB2YXIgWG1sRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHsKICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNoYXJJbmRleCwgeG1sKSB7CiAgICAgIGxldCBjb2x1bW4gPSAxOwogICAgICBsZXQgZXhjZXJwdCA9ICIiOwogICAgICBsZXQgbGluZSA9IDE7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhckluZGV4OyArK2kpIHsKICAgICAgICBsZXQgY2hhciA9IHhtbFtpXTsKICAgICAgICBpZiAoY2hhciA9PT0gIlxuIikgewogICAgICAgICAgY29sdW1uID0gMTsKICAgICAgICAgIGV4Y2VycHQgPSAiIjsKICAgICAgICAgIGxpbmUgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29sdW1uICs9IDE7CiAgICAgICAgICBleGNlcnB0ICs9IGNoYXI7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxldCBlb2wgPSB4bWwuaW5kZXhPZigiXG4iLCBjaGFySW5kZXgpOwogICAgICBleGNlcnB0ICs9IGVvbCA9PT0gLTEgPyB4bWwuc2xpY2UoY2hhckluZGV4KSA6IHhtbC5zbGljZShjaGFySW5kZXgsIGVvbCk7CiAgICAgIGxldCBleGNlcnB0U3RhcnQgPSAwOwogICAgICBpZiAoZXhjZXJwdC5sZW5ndGggPiA1MCkgewogICAgICAgIGlmIChjb2x1bW4gPCA0MCkgewogICAgICAgICAgZXhjZXJwdCA9IGV4Y2VycHQuc2xpY2UoMCwgNTApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBleGNlcnB0U3RhcnQgPSBjb2x1bW4gLSAyMDsKICAgICAgICAgIGV4Y2VycHQgPSBleGNlcnB0LnNsaWNlKGV4Y2VycHRTdGFydCwgY29sdW1uICsgMzApOwogICAgICAgIH0KICAgICAgfQogICAgICBzdXBlcigKICAgICAgICBgJHttZXNzYWdlfSAobGluZSAke2xpbmV9LCBjb2x1bW4gJHtjb2x1bW59KQogICR7ZXhjZXJwdH0KYCArICIgIi5yZXBlYXQoY29sdW1uIC0gZXhjZXJwdFN0YXJ0ICsgMSkgKyAiXlxuIgogICAgICApOwogICAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjsKICAgICAgdGhpcy5leGNlcnB0ID0gZXhjZXJwdDsKICAgICAgdGhpcy5saW5lID0gbGluZTsKICAgICAgdGhpcy5uYW1lID0gIlhtbEVycm9yIjsKICAgICAgdGhpcy5wb3MgPSBjaGFySW5kZXg7CiAgICB9CiAgfTsKICB2YXIgWG1sUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gY2xhc3MgZXh0ZW5kcyBYbWxOb2RlIHsKICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRlbnQgPSAiIikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50OwogICAgfQogICAgZ2V0IHR5cGUoKSB7CiAgICAgIHJldHVybiBYbWxOb2RlLlRZUEVfUFJPQ0VTU0lOR19JTlNUUlVDVElPTjsKICAgIH0KICAgIHRvSlNPTigpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oWG1sTm9kZS5wcm90b3R5cGUudG9KU09OLmNhbGwodGhpcyksIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUsCiAgICAgICAgY29udGVudDogdGhpcy5jb250ZW50CiAgICAgIH0pOwogICAgfQogIH07CiAgdmFyIGVtcHR5U3RyaW5nMiA9ICIiOwogIHZhciBQYXJzZXIgPSBjbGFzcyB7CiAgICAvKioKICAgICAqIEBwYXJhbSB4bWwgWE1MIHN0cmluZyB0byBwYXJzZS4KICAgICAqIEBwYXJhbSBvcHRpb25zIFBhcnNlciBvcHRpb25zLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcih4bWwsIG9wdGlvbnMgPSB7fSkgewogICAgICBsZXQgZG9jID0gdGhpcy5kb2N1bWVudCA9IG5ldyBYbWxEb2N1bWVudCgpOwogICAgICBsZXQgc2Nhbm5lciA9IHRoaXMuYyA9IG5ldyBTdHJpbmdTY2FubmVyKHhtbCk7CiAgICAgIHRoaXMubCA9IGRvYzsKICAgICAgdGhpcy5mID0gb3B0aW9uczsKICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgIGRvYy5zdGFydCA9IDA7CiAgICAgICAgZG9jLmVuZCA9IHhtbC5sZW5ndGg7CiAgICAgIH0KICAgICAgc2Nhbm5lci5iKCJcdUZFRkYiKTsKICAgICAgdGhpcy5IKCk7CiAgICAgIGlmICghdGhpcy5CKCkpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlJvb3QgZWxlbWVudCBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfQogICAgICB3aGlsZSAodGhpcy53KCkpIHsKICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIueikgewogICAgICAgIHRocm93IHRoaXMuYSgiRXh0cmEgY29udGVudCBhdCB0aGUgZW5kIG9mIHRoZSBkb2N1bWVudCIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgdGhlIGdpdmVuIGBYbWxOb2RlYCBhcyBhIGNoaWxkIG9mIGB0aGlzLmN1cnJlbnROb2RlYC4KICAgICAqLwogICAgaihub2RlLCBjaGFySW5kZXgpIHsKICAgICAgbm9kZS5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICh0aGlzLmYuaW5jbHVkZU9mZnNldHMpIHsKICAgICAgICBub2RlLnN0YXJ0ID0gdGhpcy5jLmkoY2hhckluZGV4KTsKICAgICAgICBub2RlLmVuZCA9IHRoaXMuYy5pKCk7CiAgICAgIH0KICAgICAgdGhpcy5sLmNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIHRoZSBnaXZlbiBfdGV4dF8gdG8gdGhlIGRvY3VtZW50LCBlaXRoZXIgYnkgYXBwZW5kaW5nIGl0IHRvIGEKICAgICAqIHByZWNlZGluZyBgWG1sVGV4dGAgbm9kZSAoaWYgcG9zc2libGUpIG9yIGJ5IGNyZWF0aW5nIGEgbmV3IGBYbWxUZXh0YCBub2RlLgogICAgICovCiAgICB4KHRleHQsIGNoYXJJbmRleCkgewogICAgICBsZXQgeyBjaGlsZHJlbiB9ID0gdGhpcy5sOwogICAgICBsZXQgeyBsZW5ndGggfSA9IGNoaWxkcmVuOwogICAgICB0ZXh0ID0gbm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KTsKICAgICAgaWYgKGxlbmd0aCA+IDApIHsKICAgICAgICBsZXQgcHJldk5vZGUgPSBjaGlsZHJlbltsZW5ndGggLSAxXTsKICAgICAgICBpZiAoKHByZXZOb2RlID09IG51bGwgPyB2b2lkIDAgOiBwcmV2Tm9kZS50eXBlKSA9PT0gWG1sTm9kZS5UWVBFX1RFWFQpIHsKICAgICAgICAgIGxldCB0ZXh0Tm9kZSA9IHByZXZOb2RlOwogICAgICAgICAgdGV4dE5vZGUudGV4dCArPSB0ZXh0OwogICAgICAgICAgaWYgKHRoaXMuZi5pbmNsdWRlT2Zmc2V0cykgewogICAgICAgICAgICB0ZXh0Tm9kZS5lbmQgPSB0aGlzLmMuaSgpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFRleHQodGV4dCksIGNoYXJJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGVsZW1lbnQgYXR0cmlidXRlcy4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1zdGFydHRhZ3MKICAgICAqLwogICAgSSgpIHsKICAgICAgbGV0IGF0dHJpYnV0ZXMgPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTsKICAgICAgd2hpbGUgKHRoaXMuZSgpKSB7CiAgICAgICAgbGV0IGF0dHJOYW1lID0gdGhpcy5yKCk7CiAgICAgICAgaWYgKCFhdHRyTmFtZSkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGxldCBhdHRyVmFsdWUgPSB0aGlzLnUoKSAmJiB0aGlzLkooKTsKICAgICAgICBpZiAoYXR0clZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJBdHRyaWJ1dGUgdmFsdWUgZXhwZWN0ZWQiKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lIGluIGF0dHJpYnV0ZXMpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgRHVwbGljYXRlIGF0dHJpYnV0ZTogJHthdHRyTmFtZX1gKTsKICAgICAgICB9CiAgICAgICAgaWYgKGF0dHJOYW1lID09PSAieG1sOnNwYWNlIiAmJiBhdHRyVmFsdWUgIT09ICJkZWZhdWx0IiAmJiBhdHRyVmFsdWUgIT09ICJwcmVzZXJ2ZSIpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgnVmFsdWUgb2YgdGhlIGB4bWw6c3BhY2VgIGF0dHJpYnV0ZSBtdXN0IGJlICJkZWZhdWx0IiBvciAicHJlc2VydmUiJyk7CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0clZhbHVlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmYuc29ydEF0dHJpYnV0ZXMpIHsKICAgICAgICBsZXQgYXR0ck5hbWVzID0gT2JqZWN0LmtleXMoYXR0cmlidXRlcykuc29ydCgpOwogICAgICAgIGxldCBzb3J0ZWRBdHRyaWJ1dGVzID0gLyogQF9fUFVSRV9fICovIE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyTmFtZXMubGVuZ3RoOyArK2kpIHsKICAgICAgICAgIGxldCBhdHRyTmFtZSA9IGF0dHJOYW1lc1tpXTsKICAgICAgICAgIHNvcnRlZEF0dHJpYnV0ZXNbYXR0ck5hbWVdID0gYXR0cmlidXRlc1thdHRyTmFtZV07CiAgICAgICAgfQogICAgICAgIGF0dHJpYnV0ZXMgPSBzb3J0ZWRBdHRyaWJ1dGVzOwogICAgICB9CiAgICAgIHJldHVybiBhdHRyaWJ1dGVzOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBgQXR0VmFsdWVgIChhdHRyaWJ1dGUgdmFsdWUpIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIENvbnRlbnRzIG9mIHRoZSBgQXR0VmFsdWVgIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcwogICAgICogICBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGFuIGBBdHRWYWx1ZWAgd2FzIGNvbnN1bWVkIGJ1dAogICAgICogICB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1BdHRWYWx1ZQogICAgICovCiAgICBKKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgcXVvdGUgPSBzY2FubmVyLmgoKTsKICAgICAgaWYgKHF1b3RlICE9PSAnIicgJiYgcXVvdGUgIT09ICInIikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBzY2FubmVyLmcoKTsKICAgICAgbGV0IGNoYXJzOwogICAgICBsZXQgaXNDbG9zZWQgPSBmYWxzZTsKICAgICAgbGV0IHZhbHVlID0gZW1wdHlTdHJpbmcyOwogICAgICBsZXQgcmVnZXggPSBxdW90ZSA9PT0gJyInID8gYXR0VmFsdWVDaGFyRG91YmxlUXVvdGUgOiBhdHRWYWx1ZUNoYXJTaW5nbGVRdW90ZTsKICAgICAgbWF0Y2hMb29wOgogICAgICAgIHdoaWxlICghc2Nhbm5lci56KSB7CiAgICAgICAgICBjaGFycyA9IHNjYW5uZXIuRyhyZWdleCk7CiAgICAgICAgICBpZiAoY2hhcnMpIHsKICAgICAgICAgICAgdGhpcy5wKGNoYXJzKTsKICAgICAgICAgICAgdmFsdWUgKz0gY2hhcnMucmVwbGFjZShhdHRWYWx1ZU5vcm1hbGl6ZWRXaGl0ZXNwYWNlLCAiICIpOwogICAgICAgICAgfQogICAgICAgICAgc3dpdGNoIChzY2FubmVyLmgoKSkgewogICAgICAgICAgICBjYXNlIHF1b3RlOgogICAgICAgICAgICAgIGlzQ2xvc2VkID0gdHJ1ZTsKICAgICAgICAgICAgICBicmVhayBtYXRjaExvb3A7CiAgICAgICAgICAgIGNhc2UgIiYiOgogICAgICAgICAgICAgIHZhbHVlICs9IHRoaXMuQygpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICBjYXNlICI8IjoKICAgICAgICAgICAgICB0aHJvdyB0aGlzLmEoIlVuZXNjYXBlZCBgPGAgaXMgbm90IGFsbG93ZWQgaW4gYW4gYXR0cmlidXRlIHZhbHVlIik7CiAgICAgICAgICAgIGNhc2UgZW1wdHlTdHJpbmcyOgogICAgICAgICAgICAgIGJyZWFrIG1hdGNoTG9vcDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGlmICghaXNDbG9zZWQpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGF0dHJpYnV0ZSIpOwogICAgICB9CiAgICAgIHNjYW5uZXIuZygpOwogICAgICByZXR1cm4gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgQ0RBVEEgc2VjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgQ0RBVEEgc2VjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1jZGF0YS1zZWN0CiAgICAgKi8KICAgIEsoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFbQ0RBVEFbIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHRleHQgPSBzY2FubmVyLnQoIl1dPiIpOwogICAgICB0aGlzLnAodGV4dCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCJdXT4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgQ0RBVEEgc2VjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDZGF0YSA/IHRoaXMuaihuZXcgWG1sQ2RhdGEobm9ybWFsaXplTGluZUJyZWFrcyh0ZXh0KSksIHN0YXJ0SW5kZXgpIDogdGhpcy54KHRleHQsIHN0YXJ0SW5kZXgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBjaGFyYWN0ZXIgZGF0YSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGNoYXJhY3RlciBkYXRhIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHQtY2hhcmRhdGEKICAgICAqLwogICAgTCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGxldCBjaGFyRGF0YSA9IHNjYW5uZXIuQShlbmRDaGFyRGF0YSk7CiAgICAgIGlmICghY2hhckRhdGEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5wKGNoYXJEYXRhKTsKICAgICAgaWYgKHNjYW5uZXIuaCgzKSA9PT0gIl1dPiIpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIkVsZW1lbnQgY29udGVudCBtYXkgbm90IGNvbnRhaW4gdGhlIENEQVRBIHNlY3Rpb24gY2xvc2UgZGVsaW1pdGVyIGBdXT5gIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMueChjaGFyRGF0YSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgY29tbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgY29tbWVudCB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUNvbW1lbnQKICAgICAqLwogICAgRCgpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSBzY2FubmVyLmQ7CiAgICAgIGlmICghc2Nhbm5lci5iKCI8IS0tIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGNvbnRlbnQgPSBzY2FubmVyLnQoIi0tIik7CiAgICAgIHRoaXMucChjb250ZW50KTsKICAgICAgaWYgKCFzY2FubmVyLmIoIi0tPiIpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuaCgyKSA9PT0gIi0tIikgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJUaGUgc3RyaW5nIGAtLWAgaXNuJ3QgYWxsb3dlZCBpbnNpZGUgYSBjb21tZW50Iik7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgY29tbWVudCIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmYucHJlc2VydmVDb21tZW50cyA/IHRoaXMuaihuZXcgWG1sQ29tbWVudChub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCkgOiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpbiBhIGNvbnRlbnQgY29udGV4dCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZVJlZmVyZW5jZSgpYCBpbiB0aGF0IGEgY29uc3VtZWQgcmVmZXJlbmNlIHdpbGwgYmUKICAgICAqIGFkZGVkIHRvIHRoZSBkb2N1bWVudCBhcyBhIHRleHQgbm9kZSBpbnN0ZWFkIG9mIHJldHVybmVkLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSByZWZlcmVuY2Ugd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNlbnRwcm9jCiAgICAgKi8KICAgIE0oKSB7CiAgICAgIGxldCBzdGFydEluZGV4ID0gdGhpcy5jLmQ7CiAgICAgIGxldCByZWYgPSB0aGlzLkMoKTsKICAgICAgcmV0dXJuIHJlZiA/IHRoaXMueChyZWYsIHN0YXJ0SW5kZXgpIDogZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgZG9jdHlwZSBkZWNsYXJhdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGlzIGEgbG9vc2UgaW1wbGVtZW50YXRpb24gc2luY2UgZG9jdHlwZSBkZWNsYXJhdGlvbnMgYXJlIGN1cnJlbnRseQogICAgICogZGlzY2FyZGVkIHdpdGhvdXQgZnVydGhlciBwYXJzaW5nLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBkb2N0eXBlIGRlY2xhcmF0aW9uIHdhcyBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jZHRkCiAgICAgKi8KICAgIE4oKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCFET0NUWVBFIikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLmUoKSAmJiB0aGlzLnIoKTsKICAgICAgaWYgKCFuYW1lKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIG5hbWUiKTsKICAgICAgfQogICAgICBsZXQgcHVibGljSWQ7CiAgICAgIGxldCBzeXN0ZW1JZDsKICAgICAgaWYgKHRoaXMuZSgpKSB7CiAgICAgICAgaWYgKHNjYW5uZXIuYigiUFVCTElDIikpIHsKICAgICAgICAgIHB1YmxpY0lkID0gdGhpcy5lKCkgJiYgdGhpcy5PKCk7CiAgICAgICAgICBpZiAocHVibGljSWQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgiRXhwZWN0ZWQgYSBwdWJsaWMgaWRlbnRpZmllciIpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5lKCk7CiAgICAgICAgfQogICAgICAgIGlmIChwdWJsaWNJZCAhPT0gdm9pZCAwIHx8IHNjYW5uZXIuYigiU1lTVEVNIikpIHsKICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgICAgc3lzdGVtSWQgPSB0aGlzLnMoKTsKICAgICAgICAgIGlmIChzeXN0ZW1JZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgdGhyb3cgdGhpcy5hKCJFeHBlY3RlZCBhIHN5c3RlbSBpZGVudGlmaWVyIik7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IGludGVybmFsU3Vic2V0OwogICAgICBpZiAoc2Nhbm5lci5iKCJbIikpIHsKICAgICAgICBpbnRlcm5hbFN1YnNldCA9IHNjYW5uZXIuQSgvXF1bXHgyMFx0XHJcbl0qPi8pOwogICAgICAgIGlmICghc2Nhbm5lci5iKCJdIikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiVW5jbG9zZWQgaW50ZXJuYWwgc3Vic2V0Iik7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICB9CiAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICB0aHJvdyB0aGlzLmEoIlVuY2xvc2VkIGRvY3R5cGUgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlRG9jdW1lbnRUeXBlID8gdGhpcy5qKG5ldyBYbWxEb2N1bWVudFR5cGUobmFtZSwgcHVibGljSWQsIHN5c3RlbUlkLCBpbnRlcm5hbFN1YnNldCksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYW4gZWxlbWVudCBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGVsZW1lbnQgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1lbGVtZW50CiAgICAgKi8KICAgIEIoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPCIpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGxldCBuYW1lID0gdGhpcy5yKCk7CiAgICAgIGlmICghbmFtZSkgewogICAgICAgIHNjYW5uZXIubyhzdGFydEluZGV4KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IGF0dHJpYnV0ZXMgPSB0aGlzLkkoKTsKICAgICAgbGV0IGlzRW1wdHkgPSAhIXNjYW5uZXIuYigiLz4iKTsKICAgICAgbGV0IGVsZW1lbnQgPSBuZXcgWG1sRWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzKTsKICAgICAgZWxlbWVudC5wYXJlbnQgPSB0aGlzLmw7CiAgICAgIGlmICghaXNFbXB0eSkgewogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgc3RhcnQgdGFnIGZvciBlbGVtZW50IFxgJHtuYW1lfVxgYCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQ7CiAgICAgICAgZG8gewogICAgICAgICAgdGhpcy5MKCk7CiAgICAgICAgfSB3aGlsZSAodGhpcy5CKCkgfHwgdGhpcy5NKCkgfHwgdGhpcy5LKCkgfHwgdGhpcy5FKCkgfHwgdGhpcy5EKCkpOwogICAgICAgIGxldCBlbmRUYWdNYXJrID0gc2Nhbm5lci5kOwogICAgICAgIGxldCBlbmRUYWdOYW1lOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI8LyIpIHx8ICEoZW5kVGFnTmFtZSA9IHRoaXMucigpKSB8fCBlbmRUYWdOYW1lICE9PSBuYW1lKSB7CiAgICAgICAgICBzY2FubmVyLm8oZW5kVGFnTWFyayk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoYE1pc3NpbmcgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZSgpOwogICAgICAgIGlmICghc2Nhbm5lci5iKCI+IikpIHsKICAgICAgICAgIHRocm93IHRoaXMuYShgVW5jbG9zZWQgZW5kIHRhZyBmb3IgZWxlbWVudCAke25hbWV9YCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubCA9IGVsZW1lbnQucGFyZW50OwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmooZWxlbWVudCwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGFuIGBFcWAgcHJvZHVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGFuIGBFcWAgcHJvZHVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULUVxCiAgICAgKi8KICAgIHUoKSB7CiAgICAgIHRoaXMuZSgpOwogICAgICBpZiAodGhpcy5jLmIoIj0iKSkgewogICAgICAgIHRoaXMuZSgpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYE1pc2NgIGNvbnRlbnQgaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbnl0aGluZyB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULU1pc2MKICAgICAqLwogICAgdygpIHsKICAgICAgcmV0dXJuIHRoaXMuRCgpIHx8IHRoaXMuRSgpIHx8IHRoaXMuZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBvbmUgb3IgbW9yZSBgTmFtZWAgY2hhcmFjdGVycyBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBgTmFtZWAgY2hhcmFjdGVycywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vbmUgd2VyZSBjb25zdW1lZC4KICAgICAqIEBzZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMDgvUkVDLXhtbC0yMDA4MTEyNi8jTlQtTmFtZQogICAgICovCiAgICByKCkgewogICAgICByZXR1cm4gaXNOYW1lU3RhcnRDaGFyKHRoaXMuYy5oKCkpID8gdGhpcy5jLnYoaXNOYW1lQ2hhcikgOiBlbXB0eVN0cmluZzI7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiB3YXMgY29uc3VtZWQuCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI3NlYy1waQogICAgICovCiAgICBFKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgaWYgKCFzY2FubmVyLmIoIjw/IikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IG5hbWUgPSB0aGlzLnIoKTsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICBpZiAobmFtZS50b0xvd2VyQ2FzZSgpID09PSAieG1sIikgewogICAgICAgICAgc2Nhbm5lci5vKHN0YXJ0SW5kZXgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgZGVjbGFyYXRpb24gaXNuJ3QgYWxsb3dlZCBoZXJlIik7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBwcm9jZXNzaW5nIGluc3RydWN0aW9uIik7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmUoKSkgewogICAgICAgIGlmIChzY2FubmVyLmIoIj8+IikpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lKSwgc3RhcnRJbmRleCk7CiAgICAgICAgfQogICAgICAgIHRocm93IHRoaXMuYSgiV2hpdGVzcGFjZSBpcyByZXF1aXJlZCBhZnRlciBhIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbmFtZSIpOwogICAgICB9CiAgICAgIGxldCBjb250ZW50ID0gc2Nhbm5lci50KCI/PiIpOwogICAgICB0aGlzLnAoY29udGVudCk7CiAgICAgIGlmICghc2Nhbm5lci5iKCI/PiIpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiIpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmoobmV3IFhtbFByb2Nlc3NpbmdJbnN0cnVjdGlvbihuYW1lLCBub3JtYWxpemVMaW5lQnJlYWtzKGNvbnRlbnQpKSwgc3RhcnRJbmRleCk7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgcHJvbG9nIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYSBwcm9sb2cgd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNzZWMtcHJvbG9nLWR0ZAogICAgICovCiAgICBIKCkgewogICAgICBsZXQgeyBjOiBzY2FubmVyIH0gPSB0aGlzOwogICAgICBsZXQgc3RhcnRJbmRleCA9IHNjYW5uZXIuZDsKICAgICAgdGhpcy5QKCk7CiAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICB9CiAgICAgIGlmICh0aGlzLk4oKSkgewogICAgICAgIHdoaWxlICh0aGlzLncoKSkgewogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gc3RhcnRJbmRleCA8IHNjYW5uZXIuZDsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgYSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zCiAgICAgKiAgIFZhbHVlIG9mIHRoZSBwdWJsaWMgaWRlbnRpZmllciBsaXRlcmFsIG1pbnVzIHF1b3Rlcywgb3IgYGZhbHNlYCBpZgogICAgICogICBub3RoaW5nIHdhcyBjb25zdW1lZC4gQW4gZW1wdHkgc3RyaW5nIGluZGljYXRlcyB0aGF0IGEgcHVibGljIGlkIGxpdGVyYWwKICAgICAqICAgd2FzIGNvbnN1bWVkIGJ1dCB3YXMgZW1wdHkuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1QdWJpZExpdGVyYWwKICAgICAqLwogICAgTygpIHsKICAgICAgbGV0IHN0YXJ0SW5kZXggPSB0aGlzLmMuZDsKICAgICAgbGV0IHZhbHVlID0gdGhpcy5zKCk7CiAgICAgIGlmICh2YWx1ZSAhPT0gZmFsc2UgJiYgIS9eWy1ceDIwXHJcbmEtekEtWjAtOScoKSssLi86PT87ISojQCRfJV0qJC8udGVzdCh2YWx1ZSkpIHsKICAgICAgICB0aGlzLmMubyhzdGFydEluZGV4KTsKICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIGluIHB1YmxpYyBpZGVudGlmaWVyIik7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhIHJlZmVyZW5jZSBpZiBwb3NzaWJsZS4KICAgICAqCiAgICAgKiBUaGlzIGRpZmZlcnMgZnJvbSBgY29uc3VtZUNvbnRlbnRSZWZlcmVuY2UoKWAgaW4gdGhhdCBhIGNvbnN1bWVkIHJlZmVyZW5jZQogICAgICogd2lsbCBiZSByZXR1cm5lZCByYXRoZXIgdGhhbiBhZGRlZCB0byB0aGUgZG9jdW1lbnQuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgUGFyc2VkIHJlZmVyZW5jZSB2YWx1ZSwgb3IgYGZhbHNlYCBpZiBub3RoaW5nIHdhcyBjb25zdW1lZCAodG8KICAgICAqICAgZGlzdGluZ3Vpc2ggZnJvbSBhIHJlZmVyZW5jZSB0aGF0IHJlc29sdmVzIHRvIGFuIGVtcHR5IHN0cmluZykuCiAgICAgKgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1SZWZlcmVuY2UKICAgICAqLwogICAgQygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgaWYgKCFzY2FubmVyLmIoIiYiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBsZXQgcmVmID0gc2Nhbm5lci52KGlzUmVmZXJlbmNlQ2hhcik7CiAgICAgIGlmIChzY2FubmVyLkYoKSAhPT0gIjsiKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJVbnRlcm1pbmF0ZWQgcmVmZXJlbmNlIChhIHJlZmVyZW5jZSBtdXN0IGVuZCB3aXRoIGA7YCkiKTsKICAgICAgfQogICAgICBsZXQgcGFyc2VkVmFsdWU7CiAgICAgIGlmIChyZWZbMF0gPT09ICIjIikgewogICAgICAgIGxldCBjb2RlUG9pbnQgPSByZWZbMV0gPT09ICJ4IiA/IHBhcnNlSW50KHJlZi5zbGljZSgyKSwgMTYpIDogcGFyc2VJbnQocmVmLnNsaWNlKDEpLCAxMCk7CiAgICAgICAgaWYgKGlzTmFOKGNvZGVQb2ludCkpIHsKICAgICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBjaGFyYWN0ZXIgcmVmZXJlbmNlIik7CiAgICAgICAgfQogICAgICAgIGlmICghaXNYbWxDb2RlUG9pbnQoY29kZVBvaW50KSkgewogICAgICAgICAgdGhyb3cgdGhpcy5hKCJDaGFyYWN0ZXIgcmVmZXJlbmNlIHJlc29sdmVzIHRvIGFuIGludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIHBhcnNlZFZhbHVlID0gU3RyaW5nLmZyb21Db2RlUG9pbnQoY29kZVBvaW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwYXJzZWRWYWx1ZSA9IHByZWRlZmluZWRFbnRpdGllc1tyZWZdOwogICAgICAgIGlmIChwYXJzZWRWYWx1ZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICBpZ25vcmVVbmRlZmluZWRFbnRpdGllcywKICAgICAgICAgICAgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eQogICAgICAgICAgfSA9IHRoaXMuZjsKICAgICAgICAgIGxldCB3cmFwcGVkUmVmID0gYCYke3JlZn07YDsKICAgICAgICAgIGlmIChyZXNvbHZlVW5kZWZpbmVkRW50aXR5KSB7CiAgICAgICAgICAgIGxldCByZXNvbHZlZFZhbHVlID0gcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSh3cmFwcGVkUmVmKTsKICAgICAgICAgICAgaWYgKHJlc29sdmVkVmFsdWUgIT09IG51bGwgJiYgcmVzb2x2ZWRWYWx1ZSAhPT0gdm9pZCAwKSB7CiAgICAgICAgICAgICAgbGV0IHR5cGUgPSB0eXBlb2YgcmVzb2x2ZWRWYWx1ZTsKICAgICAgICAgICAgICBpZiAodHlwZSAhPT0gInN0cmluZyIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFxgcmVzb2x2ZVVuZGVmaW5lZEVudGl0eSgpXGAgbXVzdCByZXR1cm4gYSBzdHJpbmcsIFxgbnVsbFxgLCBvciBcYHVuZGVmaW5lZFxgLCBidXQgcmV0dXJuZWQgYSB2YWx1ZSBvZiB0eXBlICR7dHlwZX1gKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmVkVmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChpZ25vcmVVbmRlZmluZWRFbnRpdGllcykgewogICAgICAgICAgICByZXR1cm4gd3JhcHBlZFJlZjsKICAgICAgICAgIH0KICAgICAgICAgIHNjYW5uZXIubygtd3JhcHBlZFJlZi5sZW5ndGgpOwogICAgICAgICAgdGhyb3cgdGhpcy5hKGBOYW1lZCBlbnRpdHkgaXNuJ3QgZGVmaW5lZDogJHt3cmFwcGVkUmVmfWApOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gcGFyc2VkVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbnN1bWVzIGEgYFN5c3RlbUxpdGVyYWxgIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEEgYFN5c3RlbUxpdGVyYWxgIGlzIHNpbWlsYXIgdG8gYW4gYXR0cmlidXRlIHZhbHVlLCBidXQgYWxsb3dzIHRoZQogICAgICogY2hhcmFjdGVycyBgPGAgYW5kIGAmYCBhbmQgZG9lc24ndCByZXBsYWNlIHJlZmVyZW5jZXMuCiAgICAgKgogICAgICogQHJldHVybnMKICAgICAqICAgVmFsdWUgb2YgdGhlIGBTeXN0ZW1MaXRlcmFsYCBtaW51cyBxdW90ZXMsIG9yIGBmYWxzZWAgaWYgbm90aGluZyB3YXMKICAgICAqICAgY29uc3VtZWQuIEFuIGVtcHR5IHN0cmluZyBpbmRpY2F0ZXMgdGhhdCBhIGBTeXN0ZW1MaXRlcmFsYCB3YXMgY29uc3VtZWQKICAgICAqICAgYnV0IHdhcyBlbXB0eS4KICAgICAqCiAgICAgKiBAc2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDA4L1JFQy14bWwtMjAwODExMjYvI05ULVN5c3RlbUxpdGVyYWwKICAgICAqLwogICAgcygpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgbGV0IHF1b3RlID0gc2Nhbm5lci5iKCciJykgfHwgc2Nhbm5lci5iKCInIik7CiAgICAgIGlmICghcXVvdGUpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHZhbHVlID0gc2Nhbm5lci50KHF1b3RlKTsKICAgICAgdGhpcy5wKHZhbHVlKTsKICAgICAgaWYgKCFzY2FubmVyLmIocXVvdGUpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJNaXNzaW5nIGVuZCBxdW90ZSIpOwogICAgICB9CiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3VtZXMgb25lIG9yIG1vcmUgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGlmIHBvc3NpYmxlLgogICAgICoKICAgICAqIEByZXR1cm5zIFdoZXRoZXIgYW55IHdoaXRlc3BhY2UgY2hhcmFjdGVycyB3ZXJlIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyN3aGl0ZQogICAgICovCiAgICBlKCkgewogICAgICByZXR1cm4gISF0aGlzLmMudihpc1doaXRlc3BhY2UpOwogICAgfQogICAgLyoqCiAgICAgKiBDb25zdW1lcyBhbiBYTUwgZGVjbGFyYXRpb24gaWYgcG9zc2libGUuCiAgICAgKgogICAgICogQHJldHVybnMgV2hldGhlciBhbiBYTUwgZGVjbGFyYXRpb24gd2FzIGNvbnN1bWVkLgogICAgICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAwOC9SRUMteG1sLTIwMDgxMTI2LyNOVC1YTUxEZWNsCiAgICAgKi8KICAgIFAoKSB7CiAgICAgIGxldCB7IGM6IHNjYW5uZXIgfSA9IHRoaXM7CiAgICAgIGxldCBzdGFydEluZGV4ID0gc2Nhbm5lci5kOwogICAgICBpZiAoIXNjYW5uZXIuYigiPD94bWwiKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZSgpKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIFhNTCBkZWNsYXJhdGlvbiIpOwogICAgICB9CiAgICAgIGxldCB2ZXJzaW9uID0gISFzY2FubmVyLmIoInZlcnNpb24iKSAmJiB0aGlzLnUoKSAmJiB0aGlzLnMoKTsKICAgICAgaWYgKHZlcnNpb24gPT09IGZhbHNlKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJYTUwgdmVyc2lvbiBpcyBtaXNzaW5nIG9yIGludmFsaWQiKTsKICAgICAgfSBlbHNlIGlmICghL14xXC5bMC05XSskLy50ZXN0KHZlcnNpb24pKSB7CiAgICAgICAgdGhyb3cgdGhpcy5hKCJJbnZhbGlkIGNoYXJhY3RlciBpbiB2ZXJzaW9uIG51bWJlciIpOwogICAgICB9CiAgICAgIGxldCBlbmNvZGluZzsKICAgICAgbGV0IHN0YW5kYWxvbmU7CiAgICAgIGlmICh0aGlzLmUoKSkgewogICAgICAgIGVuY29kaW5nID0gISFzY2FubmVyLmIoImVuY29kaW5nIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKGVuY29kaW5nKSB7CiAgICAgICAgICB0aGlzLmUoKTsKICAgICAgICB9CiAgICAgICAgc3RhbmRhbG9uZSA9ICEhc2Nhbm5lci5iKCJzdGFuZGFsb25lIikgJiYgdGhpcy51KCkgJiYgdGhpcy5zKCk7CiAgICAgICAgaWYgKHN0YW5kYWxvbmUpIHsKICAgICAgICAgIGlmIChzdGFuZGFsb25lICE9PSAieWVzIiAmJiBzdGFuZGFsb25lICE9PSAibm8iKSB7CiAgICAgICAgICAgIHRocm93IHRoaXMuYSgnT25seSAieWVzIiBhbmQgIm5vIiBhcmUgcGVybWl0dGVkIGFzIHZhbHVlcyBvZiBgc3RhbmRhbG9uZWAnKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuZSgpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIXNjYW5uZXIuYigiPz4iKSkgewogICAgICAgIHRocm93IHRoaXMuYSgiSW52YWxpZCBvciB1bmNsb3NlZCBYTUwgZGVjbGFyYXRpb24iKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5mLnByZXNlcnZlWG1sRGVjbGFyYXRpb24gPyB0aGlzLmoobmV3IFhtbERlY2xhcmF0aW9uKAogICAgICAgIHZlcnNpb24sCiAgICAgICAgZW5jb2RpbmcgfHwgdm9pZCAwLAogICAgICAgIHN0YW5kYWxvbmUgfHwgdm9pZCAwCiAgICAgICksIHN0YXJ0SW5kZXgpIDogdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbiBgWG1sRXJyb3JgIGZvciB0aGUgY3VycmVudCBzY2FubmVyIHBvc2l0aW9uLgogICAgICovCiAgICBhKG1lc3NhZ2UpIHsKICAgICAgbGV0IHsgYzogc2Nhbm5lciB9ID0gdGhpczsKICAgICAgcmV0dXJuIG5ldyBYbWxFcnJvcihtZXNzYWdlLCBzY2FubmVyLmQsIHNjYW5uZXIubSk7CiAgICB9CiAgICAvKioKICAgICAqIFRocm93cyBhbiBpbnZhbGlkIGNoYXJhY3RlciBlcnJvciBpZiBhbnkgY2hhcmFjdGVyIGluIHRoZSBnaXZlbiBfc3RyaW5nXwogICAgICogaXNuJ3QgYSB2YWxpZCBYTUwgY2hhcmFjdGVyLgogICAgICovCiAgICBwKHN0cmluZykgewogICAgICBsZXQgeyBsZW5ndGggfSA9IHN0cmluZzsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkgewogICAgICAgIGxldCBjcCA9IHN0cmluZy5jb2RlUG9pbnRBdChpKTsKICAgICAgICBpZiAoIWlzWG1sQ29kZVBvaW50KGNwKSkgewogICAgICAgICAgdGhpcy5jLm8oLShbLi4uc3RyaW5nXS5sZW5ndGggLSBpKSk7CiAgICAgICAgICB0aHJvdyB0aGlzLmEoIkludmFsaWQgY2hhcmFjdGVyIik7CiAgICAgICAgfQogICAgICAgIGlmIChjcCA+IDY1NTM1KSB7CiAgICAgICAgICBpICs9IDE7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICBmdW5jdGlvbiBub3JtYWxpemVMaW5lQnJlYWtzKHRleHQpIHsKICAgIGxldCBpID0gMDsKICAgIHdoaWxlICgoaSA9IHRleHQuaW5kZXhPZigiXHIiLCBpKSkgIT09IC0xKSB7CiAgICAgIHRleHQgPSB0ZXh0W2kgKyAxXSA9PT0gIlxuIiA/IHRleHQuc2xpY2UoMCwgaSkgKyB0ZXh0LnNsaWNlKGkgKyAxKSA6IHRleHQuc2xpY2UoMCwgaSkgKyAiXG4iICsgdGV4dC5zbGljZShpICsgMSk7CiAgICB9CiAgICByZXR1cm4gdGV4dDsKICB9CiAgZnVuY3Rpb24gcGFyc2VYbWwoeG1sLCBvcHRpb25zKSB7CiAgICByZXR1cm4gbmV3IFBhcnNlcih4bWwsIG9wdGlvbnMpLmRvY3VtZW50OwogIH0KICBjbGFzcyBYbWxQYXJzZUVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2VYbWxTdHJpbmcoeG1sU3RyaW5nKSB7CiAgICBsZXQgZG9jID0gbnVsbDsKICAgIHRyeSB7CiAgICAgIGRvYyA9IGJyb3dzZXIucGFyc2VYbWwoeG1sU3RyaW5nKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgdGhyb3cgbmV3IFhtbFBhcnNlRXJyb3IoZS5tZXNzYWdlKTsKICAgIH0KICAgIHJldHVybiBkb2M7CiAgfQogIGZ1bmN0aW9uIHN0cmlwTmFtZXNwYWNlKG5hbWUpIHsKICAgIGNvbnN0IGNvbG9uID0gbmFtZS5pbmRleE9mKCI6Iik7CiAgICByZXR1cm4gY29sb24gPiAtMSA/IG5hbWUuc3Vic3RyKGNvbG9uICsgMSkgOiBuYW1lOwogIH0KICBmdW5jdGlvbiBnZXRSb290RWxlbWVudCh4bWxEb2MpIHsKICAgIHJldHVybiB4bWxEb2MuY2hpbGRyZW5bMF07CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnROYW1lKGVsZW1lbnQpIHsKICAgIHJldHVybiBlbGVtZW50Lm5hbWUgfHwgIiI7CiAgfQogIGZ1bmN0aW9uIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkID0gZmFsc2UpIHsKICAgIGNvbnN0IHN0cmlwcGVkTmFtZSA9IHN0cmlwTmFtZXNwYWNlKG5hbWUpOwogICAgZnVuY3Rpb24gcmVkdWNlcihwcmV2LCBjdXJyKSB7CiAgICAgIGlmIChzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShjdXJyKSkgPT09IHN0cmlwcGVkTmFtZSkgewogICAgICAgIHByZXYucHVzaChjdXJyKTsKICAgICAgfQogICAgICBpZiAobmVzdGVkICYmIEFycmF5LmlzQXJyYXkoY3Vyci5jaGlsZHJlbikpIHsKICAgICAgICByZXR1cm4gWy4uLnByZXYsIC4uLmN1cnIuY2hpbGRyZW4ucmVkdWNlKHJlZHVjZXIsIFtdKV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHByZXY7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBlbGVtZW50ICYmIEFycmF5LmlzQXJyYXkoZWxlbWVudC5jaGlsZHJlbikgPyBlbGVtZW50LmNoaWxkcmVuLnJlZHVjZShyZWR1Y2VyLCBbXSkgOiBbXTsKICB9CiAgZnVuY3Rpb24gZmluZENoaWxkRWxlbWVudChlbGVtZW50LCBuYW1lLCBuZXN0ZWQgPSBmYWxzZSkgewogICAgcmV0dXJuIGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgbmFtZSwgbmVzdGVkKVswXSB8fCBudWxsOwogIH0KICBmdW5jdGlvbiBnZXRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCkgewogICAgcmV0dXJuIGVsZW1lbnQgJiYgQXJyYXkuaXNBcnJheShlbGVtZW50LmNoaWxkcmVuKSA/IFsKICAgICAgLi4uZWxlbWVudC5jaGlsZHJlbi5maWx0ZXIoCiAgICAgICAgKGVsKSA9PiBlbCBpbnN0YW5jZW9mIGJyb3dzZXIuWG1sRWxlbWVudAogICAgICApCiAgICBdIDogW107CiAgfQogIGZ1bmN0aW9uIGdldEVsZW1lbnRUZXh0KGVsZW1lbnQpIHsKICAgIGNvbnN0IHRleHROb2RlID0gZWxlbWVudCAmJiBBcnJheS5pc0FycmF5KGVsZW1lbnQuY2hpbGRyZW4pID8gZWxlbWVudC5jaGlsZHJlbi5maW5kKChub2RlKSA9PiBub2RlLnR5cGUgPT09ICJ0ZXh0IikgOiBudWxsOwogICAgcmV0dXJuIHRleHROb2RlID8gdGV4dE5vZGUudGV4dCA6ICIiOwogIH0KICBmdW5jdGlvbiBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJOYW1lKSB7CiAgICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmF0dHJpYnV0ZXNbYXR0ck5hbWVdIHx8ICIiOwogIH0KICBjbGFzcyBFbmRwb2ludEVycm9yIGV4dGVuZHMgRXJyb3IgewogICAgY29uc3RydWN0b3IobWVzc2FnZSwgaHR0cFN0YXR1cywgaXNDcm9zc09yaWdpblJlbGF0ZWQpIHsKICAgICAgc3VwZXIobWVzc2FnZSk7CiAgICAgIHRoaXMuaHR0cFN0YXR1cyA9IGh0dHBTdGF0dXM7CiAgICAgIHRoaXMuaXNDcm9zc09yaWdpblJlbGF0ZWQgPSBpc0Nyb3NzT3JpZ2luUmVsYXRlZDsKICAgICAgdGhpcy5uYW1lID0gIkVuZHBvaW50RXJyb3IiOwogICAgfQogIH0KICBjbGFzcyBTZXJ2aWNlRXhjZXB0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7CiAgICAvKioKICAgICAqIENvbnN0cnVjdG9yCiAgICAgKiBAcGFyYW0gbWVzc2FnZSBFcnJvciBtZXNzYWdlCiAgICAgKiBAcGFyYW0gcmVxdWVzdFVybCBVUkwgd2hpY2ggcmVzdWx0ZWQgaW4gdGhlIFNlcnZpY2VFeGNlcHRpb24KICAgICAqIEBwYXJhbSBjb2RlIE9wdGlvbmFsIFNlcnZpY2VFeGNlcHRpb24gY29kZQogICAgICogQHBhcmFtIGxvY2F0b3IgT3B0aW9uYWwgU2VydmljZUV4Y2VwdGlvbiBsb2NhdG9yCiAgICAgKiBAcGFyYW0gcmVzcG9uc2UgT3B0aW9uYWwgcmVzcG9uc2UgY29udGVudCByZWNlaXZlZAogICAgICovCiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCByZXF1ZXN0VXJsLCBjb2RlLCBsb2NhdG9yLCByZXNwb25zZSkgewogICAgICBzdXBlcihtZXNzYWdlKTsKICAgICAgdGhpcy5yZXF1ZXN0VXJsID0gcmVxdWVzdFVybDsKICAgICAgdGhpcy5jb2RlID0gY29kZTsKICAgICAgdGhpcy5sb2NhdG9yID0gbG9jYXRvcjsKICAgICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlOwogICAgICB0aGlzLm5hbWUgPSAiU2VydmljZUV4Y2VwdGlvbkVycm9yIjsKICAgIH0KICB9CiAgZnVuY3Rpb24gcGFyc2Uoc2VydmljZUV4Y2VwdGlvbiwgdXJsKSB7CiAgICBjb25zdCBlcnJvckNvZGUgPSBnZXRFbGVtZW50QXR0cmlidXRlKHNlcnZpY2VFeGNlcHRpb24sICJjb2RlIikgfHwgZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAiZXhjZXB0aW9uQ29kZSIpOwogICAgY29uc3QgZXJyb3JMb2NhdG9yID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShzZXJ2aWNlRXhjZXB0aW9uLCAibG9jYXRvciIpOwogICAgY29uc3QgdGV4dEVsZW1lbnQgPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VFeGNlcHRpb24sICJFeGNlcHRpb25UZXh0IikgfHwgc2VydmljZUV4Y2VwdGlvbjsKICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGdldEVsZW1lbnRUZXh0KHRleHRFbGVtZW50KS50cmltKCk7CiAgICByZXR1cm4gbmV3IFNlcnZpY2VFeGNlcHRpb25FcnJvcigKICAgICAgZXJyb3JNZXNzYWdlLAogICAgICB1cmwsCiAgICAgIGVycm9yQ29kZSwKICAgICAgZXJyb3JMb2NhdG9yLAogICAgICBzZXJ2aWNlRXhjZXB0aW9uLmRvY3VtZW50CiAgICApOwogIH0KICBmdW5jdGlvbiBjaGVjayhyZXNwb25zZSwgdXJsKSB7CiAgICBjb25zdCByb290RWwgPSBnZXRSb290RWxlbWVudChyZXNwb25zZSk7CiAgICBjb25zdCByb290RWxOYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUocm9vdEVsKSk7CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIlNlcnZpY2VFeGNlcHRpb25SZXBvcnQiKSB7CiAgICAgIGNvbnN0IGVycm9yID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJTZXJ2aWNlRXhjZXB0aW9uIik7CiAgICAgIGlmIChlcnJvcikgewogICAgICAgIHRocm93IHBhcnNlKGVycm9yLCB1cmwpOwogICAgICB9CiAgICB9CiAgICBpZiAocm9vdEVsTmFtZSA9PT0gIkV4Y2VwdGlvblJlcG9ydCIpIHsKICAgICAgY29uc3QgZXJyb3IgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIkV4Y2VwdGlvbiIpOwogICAgICBpZiAoZXJyb3IpIHsKICAgICAgICB0aHJvdyBwYXJzZShlcnJvciwgdXJsKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0KICBmdW5jdGlvbiBlbmNvZGVFcnJvcihlcnJvcikgewogICAgY29uc3QgYmFzZSA9IHsKICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLAogICAgICBuYW1lOiBlcnJvci5uYW1lCiAgICB9OwogICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU2VydmljZUV4Y2VwdGlvbkVycm9yKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgLi4uYmFzZSwKICAgICAgICBjb2RlOiBlcnJvci5jb2RlLAogICAgICAgIGxvY2F0b3I6IGVycm9yLmxvY2F0b3IsCiAgICAgICAgcmVzcG9uc2U6IGVycm9yLnJlc3BvbnNlLAogICAgICAgIHJlcXVlc3RVcmw6IGVycm9yLnJlcXVlc3RVcmwKICAgICAgfTsKICAgIH0KICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVuZHBvaW50RXJyb3IpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5iYXNlLAogICAgICAgIGh0dHBTdGF0dXM6IGVycm9yLmh0dHBTdGF0dXMsCiAgICAgICAgaXNDcm9zc09yaWdpblJlbGF0ZWQ6IGVycm9yLmlzQ3Jvc3NPcmlnaW5SZWxhdGVkCiAgICAgIH07CiAgICB9CiAgICByZXR1cm4gYmFzZTsKICB9CiAgZnVuY3Rpb24gYWRkVGFza0hhbmRsZXIodGFza05hbWUsIHNjb3BlLCBoYW5kbGVyKSB7CiAgICBjb25zdCB1c2VXb3JrZXIgPSB0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICJ1bmRlZmluZWQiOwogICAgY29uc3QgZXZlbnRIYW5kbGVyID0gYXN5bmMgKHJlcXVlc3QpID0+IHsKICAgICAgaWYgKHJlcXVlc3QudGFza05hbWUgPT09IHRhc2tOYW1lKSB7CiAgICAgICAgbGV0IHJlc3BvbnNlLCBlcnJvcjsKICAgICAgICB0cnkgewogICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVyKHJlcXVlc3QucGFyYW1zKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBlcnJvciA9IGVuY29kZUVycm9yKGUpOwogICAgICAgIH0KICAgICAgICBjb25zdCBtZXNzYWdlID0gKAogICAgICAgICAgLyoqIEB0eXBlIHtXb3JrZXJSZXNwb25zZX0gKi8KICAgICAgICAgIHsKICAgICAgICAgICAgdGFza05hbWUsCiAgICAgICAgICAgIHJlcXVlc3RJZDogcmVxdWVzdC5yZXF1ZXN0SWQsCiAgICAgICAgICAgIC4uLnJlc3BvbnNlICYmIHsgcmVzcG9uc2UgfSwKICAgICAgICAgICAgLi4uZXJyb3IgJiYgeyBlcnJvciB9CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgICBpZiAodXNlV29ya2VyKSB7CiAgICAgICAgICBzY29wZS5wb3N0TWVzc2FnZShtZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2NvcGUuZGlzcGF0Y2hFdmVudCgKICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KCJvZ2MtY2xpZW50LnJlc3BvbnNlIiwgewogICAgICAgICAgICAgIGRldGFpbDogbWVzc2FnZQogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgICBpZiAodXNlV29ya2VyKSB7CiAgICAgIHNjb3BlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLCAoZXZlbnQpID0+IGV2ZW50SGFuZGxlcihldmVudC5kYXRhKSk7CiAgICB9IGVsc2UgewogICAgICBzY29wZS5hZGRFdmVudExpc3RlbmVyKAogICAgICAgICJvZ2MtY2xpZW50LnJlcXVlc3QiLAogICAgICAgIChldmVudCkgPT4gZXZlbnRIYW5kbGVyKGV2ZW50LmRldGFpbCkKICAgICAgKTsKICAgIH0KICB9CiAgY29uc3QgRU5DT0RJTkdTID0gWyJ1dGYtOCIsICJ1dGYtMTYiLCAiaXNvLTg4NTktMSJdOwogIGNvbnN0IEZBTExCQUNLX0VOQ09ESU5HID0gInV0Zi04IjsKICBmdW5jdGlvbiBleHRyYWN0RW5jb2RpbmcoY29udGVudFR5cGUpIHsKICAgIGNvbnN0IG1hdGNoZXMgPSAvY2hhcnNldD0oW147XSspLy5leGVjKGNvbnRlbnRUeXBlKTsKICAgIHJldHVybiBtYXRjaGVzID8gbWF0Y2hlc1sxXSA6IG51bGw7CiAgfQogIGZ1bmN0aW9uIGRlY29kZVN0cmluZyhidWZmZXIsIGNvbnRlbnRUeXBlKSB7CiAgICBjb25zdCBlbmNvZGluZ0hpbnQgPSBjb250ZW50VHlwZSA/IGV4dHJhY3RFbmNvZGluZyhjb250ZW50VHlwZSkgOiBudWxsOwogICAgY29uc3QgZW5jb2RpbmdBdHRlbXB0cyA9IGVuY29kaW5nSGludCA/IFtlbmNvZGluZ0hpbnQsIC4uLkVOQ09ESU5HU10gOiBFTkNPRElOR1M7CiAgICBmb3IgKGNvbnN0IGVuY29kaW5nIG9mIGVuY29kaW5nQXR0ZW1wdHMpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nLCB7IGZhdGFsOiB0cnVlIH0pOwogICAgICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShidWZmZXIpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgIH0KICAgIH0KICAgIGNvbnNvbGUud2FybigKICAgICAgYFtvZ2MtY2xpZW50XSBYTUwgZG9jdW1lbnQgZW5jb2RpbmcgY291bGQgbm90IGJlIGRldGVybWluZWQsIGZhbGxpbmcgYmFjayB0byAke0ZBTExCQUNLX0VOQ09ESU5HfS5gCiAgICApOwogICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcihGQUxMQkFDS19FTkNPRElORykuZGVjb2RlKGJ1ZmZlcik7CiAgfQogIGNvbnN0IGZldGNoUHJvbWlzZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpOwogIGxldCBmZXRjaE9wdGlvbnMgPSB7fTsKICBmdW5jdGlvbiBzZXRGZXRjaE9wdGlvbnMob3B0aW9ucykgewogICAgZmV0Y2hPcHRpb25zID0gb3B0aW9uczsKICB9CiAgZnVuY3Rpb24gZ2V0RmV0Y2hPcHRpb25zKCkgewogICAgcmV0dXJuIGZldGNoT3B0aW9uczsKICB9CiAgZnVuY3Rpb24gc2hhcmVkRmV0Y2godXJsLCBtZXRob2QgPSAiR0VUIiwgYXNKc29uKSB7CiAgICBsZXQgZmV0Y2hLZXkgPSBgJHttZXRob2R9IyR7dXJsfWA7CiAgICBpZiAoYXNKc29uKSB7CiAgICAgIGZldGNoS2V5ID0gYCR7bWV0aG9kfSNhc0pzb24jJHt1cmx9YDsKICAgIH0KICAgIGlmIChmZXRjaFByb21pc2VzLmhhcyhmZXRjaEtleSkpIHsKICAgICAgcmV0dXJuIGZldGNoUHJvbWlzZXMuZ2V0KGZldGNoS2V5KTsKICAgIH0KICAgIGNvbnN0IG9wdGlvbnMgPSB7IC4uLmdldEZldGNoT3B0aW9ucygpIH07CiAgICBvcHRpb25zLm1ldGhvZCA9IG1ldGhvZDsKICAgIGlmIChhc0pzb24pIHsKICAgICAgb3B0aW9ucy5oZWFkZXJzID0gImhlYWRlcnMiIGluIG9wdGlvbnMgPyBvcHRpb25zLmhlYWRlcnMgOiB7fTsKICAgICAgb3B0aW9ucy5oZWFkZXJzWyJBY2NlcHQiXSA9ICJhcHBsaWNhdGlvbi9qc29uIjsKICAgIH0KICAgIGNvbnN0IHByb21pc2UgPSBmZXRjaCh1cmwsIG9wdGlvbnMpLmNhdGNoKChlKSA9PiBlKS50aGVuKChyZXNwKSA9PiB7CiAgICAgIGZldGNoUHJvbWlzZXMuZGVsZXRlKGZldGNoS2V5KTsKICAgICAgcmV0dXJuIHJlc3A7CiAgICB9KTsKICAgIGZldGNoUHJvbWlzZXMuc2V0KGZldGNoS2V5LCBwcm9taXNlKTsKICAgIHJldHVybiBwcm9taXNlLnRoZW4oKHJlc3ApID0+IHsKICAgICAgaWYgKHJlc3AgaW5zdGFuY2VvZiBFcnJvcikKICAgICAgICB0aHJvdyByZXNwOwogICAgICByZXR1cm4gcmVzcDsKICAgIH0pOwogIH0KICBmdW5jdGlvbiBxdWVyeVhtbERvY3VtZW50KHVybCkgewogICAgcmV0dXJuIHNoYXJlZEZldGNoKHVybCkuY2F0Y2goCiAgICAgICgpID0+ICgKICAgICAgICAvLyBhdHRlbXB0IGEgSEVBRCB0byBzZWUgaWYgdGhlIGZhaWx1cmUgY29tZXMgZnJvbSBDT1JTIG9yIHRoZSBzZXJ2aWNlIGlzIGdlbmVyYWxseSB1bnJlYWNoYWJsZQogICAgICAgIGZldGNoKHVybCwgeyAuLi5nZXRGZXRjaE9wdGlvbnMoKSwgbWV0aG9kOiAiSEVBRCIsIG1vZGU6ICJuby1jb3JzIiB9KS5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRocm93IG5ldyBFbmRwb2ludEVycm9yKAogICAgICAgICAgICBgRmV0Y2hpbmcgdGhlIGRvY3VtZW50IGZhaWxlZCBlaXRoZXIgZHVlIHRvIG5ldHdvcmsgZXJyb3JzIG9yIHVucmVhY2hhYmxlIGhvc3QsIGVycm9yIGlzOiAke2Vycm9yLm1lc3NhZ2V9YCwKICAgICAgICAgICAgMCwKICAgICAgICAgICAgZmFsc2UKICAgICAgICAgICk7CiAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aHJvdyBuZXcgRW5kcG9pbnRFcnJvcigKICAgICAgICAgICAgYFRoZSBkb2N1bWVudCBjb3VsZCBub3QgYmUgZmV0Y2hlZCBkdWUgdG8gQ09SUyBsaW1pdGF0aW9uc2AsCiAgICAgICAgICAgIDAsCiAgICAgICAgICAgIHRydWUKICAgICAgICAgICk7CiAgICAgICAgfSkKICAgICAgKQogICAgKS50aGVuKGFzeW5jIChyZXNwKSA9PiB7CiAgICAgIGlmICghcmVzcC5vaykgewogICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXNwLnRleHQoKTsKICAgICAgICB0aHJvdyBuZXcgRW5kcG9pbnRFcnJvcigKICAgICAgICAgIGBSZWNlaXZlZCBhbiBlcnJvciB3aXRoIGNvZGUgJHtyZXNwLnN0YXR1c306ICR7dGV4dH1gLAogICAgICAgICAgcmVzcC5zdGF0dXMsCiAgICAgICAgICBmYWxzZQogICAgICAgICk7CiAgICAgIH0KICAgICAgY29uc3QgYnVmZmVyID0gYXdhaXQgcmVzcC5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBjb250ZW50VHlwZUhlYWRlciA9IHJlc3AuaGVhZGVycy5nZXQoIkNvbnRlbnQtVHlwZSIpOwogICAgICByZXR1cm4gZGVjb2RlU3RyaW5nKGJ1ZmZlciwgY29udGVudFR5cGVIZWFkZXIpOwogICAgfSkudGhlbigoeG1sKSA9PiBwYXJzZVhtbFN0cmluZyh4bWwpKTsKICB9CiAgZnVuY3Rpb24gc2V0UXVlcnlQYXJhbXModXJsLCBwYXJhbXMpIHsKICAgIGNvbnN0IGVuY29kZWRVcmxNYXRjaCA9IHVybC5tYXRjaCgvKGh0dHBzPyUzQSUyRiUyRlteL10rKSQvKTsKICAgIGlmIChlbmNvZGVkVXJsTWF0Y2gpIHsKICAgICAgY29uc3QgZW5jb2RlZFVybCA9IGVuY29kZWRVcmxNYXRjaFsxXTsKICAgICAgY29uc3QgbW9kaWZpZWRVcmwgPSBzZXRRdWVyeVBhcmFtcyhkZWNvZGVVUklDb21wb25lbnQoZW5jb2RlZFVybCksIHBhcmFtcyk7CiAgICAgIHJldHVybiB1cmwucmVwbGFjZShlbmNvZGVkVXJsLCBlbmNvZGVVUklDb21wb25lbnQobW9kaWZpZWRVcmwpKTsKICAgIH0KICAgIGNvbnN0IHVybE9iaiA9IG5ldyBVUkwodXJsKTsKICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhwYXJhbXMpOwogICAgY29uc3Qga2V5c0xvd2VyID0ga2V5cy5tYXAoKGtleSkgPT4ga2V5LnRvTG93ZXJDYXNlKCkpOwogICAgY29uc3QgdG9EZWxldGUgPSBbXTsKICAgIGZvciAoY29uc3QgcGFyYW0gb2YgdXJsT2JqLnNlYXJjaFBhcmFtcy5rZXlzKCkpIHsKICAgICAgaWYgKGtleXNMb3dlci5pbmRleE9mKHBhcmFtLnRvTG93ZXJDYXNlKCkpID4gLTEpIHsKICAgICAgICB0b0RlbGV0ZS5wdXNoKHBhcmFtKTsKICAgICAgfQogICAgfQogICAgdG9EZWxldGUubWFwKChwYXJhbSkgPT4gdXJsT2JqLnNlYXJjaFBhcmFtcy5kZWxldGUocGFyYW0pKTsKICAgIGtleXMuZm9yRWFjaCgKICAgICAgKGtleSkgPT4gdXJsT2JqLnNlYXJjaFBhcmFtcy5zZXQoCiAgICAgICAga2V5LAogICAgICAgIHBhcmFtc1trZXldID09PSB0cnVlID8gIiIgOiBwYXJhbXNba2V5XQogICAgICApCiAgICApOwogICAgcmV0dXJuIHVybE9iai50b1N0cmluZygpOwogIH0KICBjb25zdCBMYXRMb25DcnNMaXN0ID0gWwogICAgIkVQU0c6NDA0NiIsCiAgICAvLyBSR1JEQyAyMDA1CiAgICAiRVBTRzo0MDc1IiwKICAgIC8vIFNSRUY5OAogICAgIkVQU0c6NDEyMCIsCiAgICAvLyBHcmVlawogICAgIkVQU0c6NDEyMiIsCiAgICAvLyBBVFM3NwogICAgIkVQU0c6NDEyNCIsCiAgICAvLyBSVDkwCiAgICAiRVBTRzo0MTI2IiwKICAgIC8vIExLUzk0IChFVFJTODkpCiAgICAiRVBTRzo0MTQ5IiwKICAgIC8vIENIMTkwMwogICAgIkVQU0c6NDE1MSIsCiAgICAvLyBDSFRSRjk1CiAgICAiRVBTRzo0MTUzIiwKICAgIC8vIFJhc3NhZGlyYW4KICAgICJFUFNHOjQxNTUiLAogICAgLy8gRGFib2xhIDE5ODEKICAgICJFUFNHOjQxNTciLAogICAgLy8gTW91bnQgRGlsbG9uCiAgICAiRVBTRzo0MTU5IiwKICAgIC8vIEVMRDc5CiAgICAiRVBTRzo0MTYxIiwKICAgIC8vIFBhbXBhIGRlbCBDYXN0aWxsbwogICAgIkVQU0c6NDE2MyIsCiAgICAvLyBZZW1lbiBOR045NgogICAgIkVQU0c6NDE2NSIsCiAgICAvLyBCaXNzYXUKICAgICJFUFNHOjQxNjciLAogICAgLy8gTlpHRDIwMDAKICAgICJFUFNHOjQxNjkiLAogICAgLy8gQW1lcmljYW4gU2Ftb2EgMTk2MgogICAgIkVQU0c6NDE3MSIsCiAgICAvLyBSR0Y5MwogICAgIkVQU0c6NDE3MyIsCiAgICAvLyBJUkVORVQ5NQogICAgIkVQU0c6NDE3NSIsCiAgICAvLyBTaWVycmEgTGVvbmUgMTk2OAogICAgIkVQU0c6NDE3OCIsCiAgICAvLyBQdWxrb3ZvIDE5NDIoODMpCiAgICAiRVBTRzo0MTgwIiwKICAgIC8vIEVTVDk3CiAgICAiRVBTRzo0MTgyIiwKICAgIC8vIEF6b3JlcyBPY2NpZGVudGFsIDE5MzkKICAgICJFUFNHOjQxODQiLAogICAgLy8gQXpvcmVzIE9yaWVudGFsIDE5NDAKICAgICJFUFNHOjQxODgiLAogICAgLy8gT1NOSSAxOTUyCiAgICAiRVBTRzo0MTkwIiwKICAgIC8vIFBPU0dBUiA5OAogICAgIkVQU0c6NDE5MSIsCiAgICAvLyBBbGJhbmlhbiAxOTg3CiAgICAiRVBTRzo0MTk2IiwKICAgIC8vIEFtbWFzc2FsaWsgMTk1OAogICAgIkVQU0c6NDE5OCIsCiAgICAvLyBLb3Vzc2VyaQogICAgIkVQU0c6NDIwMiIsCiAgICAvLyBBR0Q2NgogICAgIkVQU0c6NDIxMCIsCiAgICAvLyBBcmMgMTk2MAogICAgIkVQU0c6NDIxMSIsCiAgICAvLyBCYXRhdmlhCiAgICAiRVBTRzo0MjE0IiwKICAgIC8vIEJlaWppbmcgMTk1NAogICAgIkVQU0c6NDIyNiIsCiAgICAvLyBDb3RlIGQnSXZvaXJlCiAgICAiRVBTRzo0MjI5IiwKICAgIC8vIEVneXB0IDE5MDcKICAgICJFUFNHOjQyMzEiLAogICAgLy8gRUQ4NwogICAgIkVQU0c6NDIzMyIsCiAgICAvLyBHYW5kYWppa2EgMTk3MAogICAgIkVQU0c6NDIzNiIsCiAgICAvLyBIdSBUenUgU2hhbiAxOTUwCiAgICAiRVBTRzo0MjM4IiwKICAgIC8vIElENzQKICAgICJFUFNHOjQyNDAiLAogICAgLy8gSW5kaWFuIDE5NzUKICAgICJFUFNHOjQyNDIiLAogICAgLy8gSkFENjkKICAgICJFUFNHOjQyNDQiLAogICAgLy8gS2FuZGF3YWxhCiAgICAiRVBTRzo0MjQ2IiwKICAgIC8vIEtPQwogICAgIkVQU0c6NDI0OCIsCiAgICAvLyBQU0FENTYKICAgICJFUFNHOjQyNTAiLAogICAgLy8gTGVpZ29uCiAgICAiRVBTRzo0MjUyIiwKICAgIC8vIExvbWUKICAgICJFUFNHOjQyNTUiLAogICAgLy8gSGVyYXQgTm9ydGgKICAgICJFUFNHOjQyNTgiLAogICAgLy8gRVRSUzg5CiAgICAiRVBTRzo0MjYxIiwKICAgIC8vIE1lcmNoaWNoCiAgICAiRVBTRzo0MjY0IiwKICAgIC8vIE1oYXN0CiAgICAiRVBTRzo0MjY3IiwKICAgIC8vIE5BRDI3CiAgICAiRVBTRzo0MjcwIiwKICAgIC8vIE5haHJ3YW4gMTk2NwogICAgIkVQU0c6NDI3MyIsCiAgICAvLyBOR08gMTk0OAogICAgIkVQU0c6NDI3NiIsCiAgICAvLyBOU1dDIDlaLTIKICAgICJFUFNHOjQyNzkiLAogICAgLy8gT1MoU04pODAKICAgICJFUFNHOjQyODEiLAogICAgLy8gUGFsZXN0aW5lIDE5MjMKICAgICJFUFNHOjQyODQiLAogICAgLy8gUHVsa292byAxOTQyCiAgICAiRVBTRzo0Mjg2IiwKICAgIC8vIFFhdGFyIDE5NDgKICAgICJFUFNHOjQyODgiLAogICAgLy8gTG9tYSBRdWludGFuYQogICAgIkVQU0c6NDI5MiIsCiAgICAvLyBTYXBwZXIgSGlsbCAxOTQzCiAgICAiRVBTRzo0Mjk1IiwKICAgIC8vIFNlcmluZHVuZwogICAgIkVQU0c6NDI5NyIsCiAgICAvLyBUYW5hbmFyaXZlCiAgICAiRVBTRzo0Mjk5IiwKICAgIC8vIFRNNjUKICAgICJFUFNHOjQzMDIiLAogICAgLy8gVHJpbmlkYWQgMTkwMwogICAgIkVQU0c6NDMyNCIsCiAgICAvLyBXR1MgNzJCRQogICAgIkVQU0c6NDMyNiIKICAgIC8vIFdHUyA4NAogIF07CiAgZnVuY3Rpb24gaGFzSW52ZXJ0ZWRDb29yZGluYXRlcyhjcnNOYW1lKSB7CiAgICByZXR1cm4gTGF0TG9uQ3JzTGlzdC5pbmRleE9mKHNpbXBsaWZ5RXBzZ1VybihjcnNOYW1lKSkgPiAtMTsKICB9CiAgZnVuY3Rpb24gc2ltcGxpZnlFcHNnVXJuKGZ1bGxDcnNOYW1lKSB7CiAgICBpZiAoL151cm46KD86eC0pP29nYzpkZWY6Y3JzOmVwc2c6Ly50ZXN0KGZ1bGxDcnNOYW1lLnRvTG93ZXJDYXNlKCkpKSB7CiAgICAgIGNvbnN0IGNvZGUgPSAvKFswLTldKykkLy5leGVjKGZ1bGxDcnNOYW1lKVsxXTsKICAgICAgcmV0dXJuIGBFUFNHOiR7Y29kZX1gOwogICAgfQogICAgcmV0dXJuIGZ1bGxDcnNOYW1lOwogIH0KICBmdW5jdGlvbiByZWFkT3BlcmF0aW9uVXJsc0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICBjb25zdCByZXF1ZXN0ID0gZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXR5LCAiUmVxdWVzdCIpOwogICAgZ2V0Q2hpbGRyZW5FbGVtZW50KHJlcXVlc3QpLmZvckVhY2goKG9wZXJhdGlvbikgPT4gewogICAgICBjb25zdCBvcGVyYXRpb25OYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUob3BlcmF0aW9uKSk7CiAgICAgIHVybHNbb3BlcmF0aW9uTmFtZV0gPSBwYXJzZU9wZXJhdGlvbihvcGVyYXRpb24pOwogICAgfSk7CiAgICByZXR1cm4gdXJsczsKICB9CiAgZnVuY3Rpb24gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICByZXR1cm4gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKS5hdHRyaWJ1dGVzWyJ2ZXJzaW9uIl07CiAgfQogIGZ1bmN0aW9uIHJlYWRMYXllcnNGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICByZXR1cm4gZmluZENoaWxkcmVuRWxlbWVudChjYXBhYmlsaXR5LCAiTGF5ZXIiKS5tYXAoCiAgICAgIChsYXllckVsKSA9PiBwYXJzZUxheWVyKGxheWVyRWwsIHZlcnNpb24pCiAgICApOwogIH0KICBmdW5jdGlvbiByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMkMShjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICBjb25zdCBnZXRNYXAgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJSZXF1ZXN0IiksCiAgICAgICJHZXRNYXAiCiAgICApOwogICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0TWFwLCAiRm9ybWF0IikubWFwKAogICAgICBnZXRFbGVtZW50VGV4dAogICAgKTsKICAgIHJldHVybiBvdXRwdXRGb3JtYXRzOwogIH0KICBmdW5jdGlvbiByZWFkSW5mb0Zvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3QgY2FwYWJpbGl0eSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDYXBhYmlsaXR5IgogICAgKTsKICAgIGNvbnN0IGdldEZlYXR1cmVJbmZvID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChjYXBhYmlsaXR5LCAiUmVxdWVzdCIpLAogICAgICAiR2V0RmVhdHVyZUluZm8iCiAgICApOwogICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0RmVhdHVyZUluZm8sICJGb3JtYXQiKS5tYXAoCiAgICAgIGdldEVsZW1lbnRUZXh0CiAgICApOwogICAgcmV0dXJuIG91dHB1dEZvcm1hdHM7CiAgfQogIGZ1bmN0aW9uIHJlYWRFeGNlcHRpb25Gb3JtYXRzRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLAogICAgICAiQ2FwYWJpbGl0eSIKICAgICk7CiAgICBjb25zdCBleGNlcHRpb24gPSBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdHksICJFeGNlcHRpb24iKTsKICAgIGNvbnN0IGV4Y2VwdGlvbkZvcm1hdHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGV4Y2VwdGlvbiwgIkZvcm1hdCIpLm1hcCgKICAgICAgZ2V0RWxlbWVudFRleHQKICAgICk7CiAgICByZXR1cm4gZXhjZXB0aW9uRm9ybWF0czsKICB9CiAgZnVuY3Rpb24gcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzJDIoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBzZXJ2aWNlID0gZmluZENoaWxkRWxlbWVudChnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLCAiU2VydmljZSIpOwogICAgY29uc3Qgb3V0cHV0Rm9ybWF0cyA9IHJlYWRPdXRwdXRGb3JtYXRzRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBpbmZvRm9ybWF0cyA9IHJlYWRJbmZvRm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGV4Y2VwdGlvbkZvcm1hdHMgPSByZWFkRXhjZXB0aW9uRm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGtleXdvcmRzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiS2V5d29yZExpc3QiKSwKICAgICAgIktleXdvcmQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCkuZmlsdGVyKCh2LCBpLCBhcnIpID0+IGFyci5pbmRleE9mKHYpID09PSBpKTsKICAgIGNvbnN0IHByb3ZpZGVyID0gcmVhZFByb3ZpZGVyRnJvbUNhcGFiaWxpdGllcyQxKGNhcGFiaWxpdGllc0RvYyk7CiAgICByZXR1cm4gewogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiVGl0bGUiKSksCiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIk5hbWUiKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBYnN0cmFjdCIpKSwKICAgICAgb3V0cHV0Rm9ybWF0cywKICAgICAgaW5mb0Zvcm1hdHMsCiAgICAgIGV4Y2VwdGlvbkZvcm1hdHMsCiAgICAgIGZlZXM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkZlZXMiKSksCiAgICAgIGNvbnN0cmFpbnRzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBY2Nlc3NDb25zdHJhaW50cyIpKSwKICAgICAgcHJvdmlkZXIsCiAgICAgIGtleXdvcmRzCiAgICB9OwogIH0KICBmdW5jdGlvbiBwYXJzZU9wZXJhdGlvbihvcGVyYXRpb24pIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGRjcFR5cGUgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbiwgIkRDUFR5cGUiKTsKICAgIGNvbnN0IGh0dHAgPSBkY3BUeXBlLmZsYXRNYXAoKGQpID0+IGZpbmRDaGlsZEVsZW1lbnQoZCwgIkhUVFAiKSk7CiAgICBjb25zdCBtZXRob2RzID0gaHR0cC5mbGF0TWFwKChoKSA9PiBnZXRDaGlsZHJlbkVsZW1lbnQoaCkpOwogICAgbWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHsKICAgICAgY29uc3Qgb25saW5lUmVzb3VyY2UgPSBmaW5kQ2hpbGRFbGVtZW50KG1ldGhvZCwgIk9ubGluZVJlc291cmNlIik7CiAgICAgIGNvbnN0IG1ldGhvZE5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShtZXRob2QpKTsKICAgICAgdXJsc1ttZXRob2ROYW1lXSA9IGdldEVsZW1lbnRBdHRyaWJ1dGUob25saW5lUmVzb3VyY2UsICJ4bGluazpocmVmIik7CiAgICB9KTsKICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiBwYXJzZUxheWVyKGxheWVyRWwsIHZlcnNpb24sIGluaGVyaXRlZFNycyA9IFtdLCBpbmhlcml0ZWRTdHlsZXMgPSBbXSwgaW5oZXJpdGVkQXR0cmlidXRpb24gPSBudWxsLCBpbmhlcml0ZWRCb3VuZGluZ0JveGVzID0gbnVsbCwgaW5oZXJpdGVkTWF4U2NhbGVEZW5vbSA9IG51bGwsIGluaGVyaXRlZE1pblNjYWxlRGVub20gPSBudWxsKSB7CiAgICBjb25zdCBzcnNUYWcgPSB2ZXJzaW9uID09PSAiMS4zLjAiID8gIkNSUyIgOiAiU1JTIjsKICAgIGNvbnN0IHNyc0xpc3QgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGxheWVyRWwsIHNyc1RhZykubWFwKGdldEVsZW1lbnRUZXh0KTsKICAgIGNvbnN0IGF2YWlsYWJsZUNycyA9IHNyc0xpc3QubGVuZ3RoID4gMCA/IHNyc0xpc3QgOiBpbmhlcml0ZWRTcnM7CiAgICBjb25zdCBsYXllclN0eWxlcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgIlN0eWxlIikubWFwKAogICAgICBwYXJzZUxheWVyU3R5bGUKICAgICk7CiAgICBjb25zdCBzdHlsZXMgPSBsYXllclN0eWxlcy5sZW5ndGggPiAwID8gbGF5ZXJTdHlsZXMgOiBpbmhlcml0ZWRTdHlsZXM7CiAgICBmdW5jdGlvbiBwYXJzZUJCb3gyKGJib3hFbCkgewogICAgICBjb25zdCBzcnMgPSBnZXRFbGVtZW50QXR0cmlidXRlKGJib3hFbCwgc3JzVGFnKTsKICAgICAgY29uc3QgYXR0cnMgPSBoYXNJbnZlcnRlZENvb3JkaW5hdGVzKHNycykgJiYgdmVyc2lvbiA9PT0gIjEuMy4wIiA/IFsibWlueSIsICJtaW54IiwgIm1heHkiLCAibWF4eCJdIDogWyJtaW54IiwgIm1pbnkiLCAibWF4eCIsICJtYXh5Il07CiAgICAgIHJldHVybiBhdHRycy5tYXAoKG5hbWUpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBuYW1lKSk7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZUV4R2VvZ3JhcGhpY0JvdW5kaW5nQm94KGJib3hFbCkgewogICAgICByZXR1cm4gWwogICAgICAgICJ3ZXN0Qm91bmRMb25naXR1ZGUiLAogICAgICAgICJzb3V0aEJvdW5kTGF0aXR1ZGUiLAogICAgICAgICJlYXN0Qm91bmRMb25naXR1ZGUiLAogICAgICAgICJub3J0aEJvdW5kTGF0aXR1ZGUiCiAgICAgIF0ubWFwKChuYW1lKSA9PiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGJib3hFbCwgbmFtZSkpKTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlTGF0TG9uQm91bmRpbmdCb3goYmJveEVsKSB7CiAgICAgIHJldHVybiBbIm1pbngiLCAibWlueSIsICJtYXh4IiwgIm1heHkiXS5tYXAoCiAgICAgICAgKG5hbWUpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBuYW1lKQogICAgICApOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VTY2FsZUhpbnRWYWx1ZSh0ZXh0VmFsdWUsIGRlZmF1bHRWYWx1ZSkgewogICAgICBpZiAodGV4dFZhbHVlID09PSAiIikgewogICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7CiAgICAgIH0KICAgICAgcmV0dXJuIE1hdGguc3FydCgwLjUgKiBwYXJzZUZsb2F0KHRleHRWYWx1ZSkgKiogMikgLyAyOGUtNTsKICAgIH0KICAgIGZ1bmN0aW9uIHBhcnNlU2NhbGVIaW50KCkgewogICAgICBjb25zdCBzY2FsZUhpbnQgPSBmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJTY2FsZUhpbnQiKTsKICAgICAgaWYgKCFzY2FsZUhpbnQpIHsKICAgICAgICByZXR1cm4gW2luaGVyaXRlZE1pblNjYWxlRGVub20sIGluaGVyaXRlZE1heFNjYWxlRGVub21dOwogICAgICB9CiAgICAgIGNvbnN0IG1pbiA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoc2NhbGVIaW50LCAibWluIik7CiAgICAgIGNvbnN0IG1heCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoc2NhbGVIaW50LCAibWF4Iik7CiAgICAgIHJldHVybiBbCiAgICAgICAgcGFyc2VTY2FsZUhpbnRWYWx1ZShtaW4sIGluaGVyaXRlZE1pblNjYWxlRGVub20pLAogICAgICAgIHBhcnNlU2NhbGVIaW50VmFsdWUobWF4LCBpbmhlcml0ZWRNYXhTY2FsZURlbm9tKQogICAgICBdOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VTY2FsZURlbm9taW5hdG9yKG5hbWUsIGluaGVyaXRlZFZhbHVlKSB7CiAgICAgIGNvbnN0IHRleHRWYWx1ZSA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgbmFtZSkpOwogICAgICByZXR1cm4gdGV4dFZhbHVlID09PSAiIiA/IGluaGVyaXRlZFZhbHVlIDogcGFyc2VGbG9hdCh0ZXh0VmFsdWUpOwogICAgfQogICAgY29uc3QgYXR0cmlidXRpb25FbCA9IGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIkF0dHJpYnV0aW9uIik7CiAgICBjb25zdCBhdHRyaWJ1dGlvbiA9IGF0dHJpYnV0aW9uRWwgIT09IG51bGwgPyBwYXJzZUxheWVyQXR0cmlidXRpb24oYXR0cmlidXRpb25FbCkgOiBpbmhlcml0ZWRBdHRyaWJ1dGlvbjsKICAgIGNvbnN0IGxhdExvbkJib3hFbCA9IHZlcnNpb24gPT09ICIxLjMuMCIgPyBmaW5kQ2hpbGRFbGVtZW50KGxheWVyRWwsICJFWF9HZW9ncmFwaGljQm91bmRpbmdCb3giKSA6IGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIkxhdExvbkJvdW5kaW5nQm94Iik7CiAgICBjb25zdCBiYXNlQm91bmRpbmdCb3ggPSB7fTsKICAgIGlmIChsYXRMb25CYm94RWwpIHsKICAgICAgYmFzZUJvdW5kaW5nQm94WyJFUFNHOjQzMjYiXSA9IHZlcnNpb24gPT09ICIxLjMuMCIgPyBwYXJzZUV4R2VvZ3JhcGhpY0JvdW5kaW5nQm94KGxhdExvbkJib3hFbCkgOiBwYXJzZUxhdExvbkJvdW5kaW5nQm94KGxhdExvbkJib3hFbCk7CiAgICB9CiAgICBsZXQgYm91bmRpbmdCb3hlcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQobGF5ZXJFbCwgIkJvdW5kaW5nQm94IikucmVkdWNlKAogICAgICAocHJldiwgYmJveEVsKSA9PiAoewogICAgICAgIC4uLnByZXYsCiAgICAgICAgW2dldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBzcnNUYWcpXTogcGFyc2VCQm94MihiYm94RWwpCiAgICAgIH0pLAogICAgICBiYXNlQm91bmRpbmdCb3gKICAgICk7CiAgICBib3VuZGluZ0JveGVzID0gT2JqZWN0LmtleXMoYm91bmRpbmdCb3hlcykubGVuZ3RoID4gMCB8fCBpbmhlcml0ZWRCb3VuZGluZ0JveGVzID09PSBudWxsID8gYm91bmRpbmdCb3hlcyA6IGluaGVyaXRlZEJvdW5kaW5nQm94ZXM7CiAgICBjb25zdCBxdWVyeWFibGUgPSBsYXllckVsLmF0dHJpYnV0ZXMucXVlcnlhYmxlID09PSAiMSIgfHwgbGF5ZXJFbC5hdHRyaWJ1dGVzLnF1ZXJ5YWJsZSA9PT0gInRydWUiID8gdHJ1ZSA6IGZhbHNlOwogICAgY29uc3Qgb3BhcXVlID0gbGF5ZXJFbC5hdHRyaWJ1dGVzLm9wYXF1ZSA9PT0gIjEiIHx8IGxheWVyRWwuYXR0cmlidXRlcy5vcGFxdWUgPT09ICJ0cnVlIiA/IHRydWUgOiBmYWxzZTsKICAgIGNvbnN0IGtleXdvcmRzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiS2V5d29yZExpc3QiKSwKICAgICAgIktleXdvcmQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCkuZmlsdGVyKCh2LCBpLCBhcnIpID0+IGFyci5pbmRleE9mKHYpID09PSBpKTsKICAgIGxldCBtaW5TY2FsZURlbm9taW5hdG9yLCBtYXhTY2FsZURlbm9taW5hdG9yOwogICAgaWYgKHZlcnNpb24gPT09ICIxLjMuMCIpIHsKICAgICAgbWluU2NhbGVEZW5vbWluYXRvciA9IHBhcnNlU2NhbGVEZW5vbWluYXRvcigKICAgICAgICAiTWluU2NhbGVEZW5vbWluYXRvciIsCiAgICAgICAgaW5oZXJpdGVkTWluU2NhbGVEZW5vbQogICAgICApOwogICAgICBtYXhTY2FsZURlbm9taW5hdG9yID0gcGFyc2VTY2FsZURlbm9taW5hdG9yKAogICAgICAgICJNYXhTY2FsZURlbm9taW5hdG9yIiwKICAgICAgICBpbmhlcml0ZWRNYXhTY2FsZURlbm9tCiAgICAgICk7CiAgICB9IGVsc2UgewogICAgICBbbWluU2NhbGVEZW5vbWluYXRvciwgbWF4U2NhbGVEZW5vbWluYXRvcl0gPSBwYXJzZVNjYWxlSGludCgpOwogICAgfQogICAgY29uc3QgbWV0YWRhdGEgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGxheWVyRWwsICJNZXRhZGF0YVVSTCIpLm1hcCgKICAgICAgKG1ldGFkYXRhVXJsRWwpID0+ICh7CiAgICAgICAgdHlwZTogZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRhZGF0YVVybEVsLCAidHlwZSIpLAogICAgICAgIGZvcm1hdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChtZXRhZGF0YVVybEVsLCAiRm9ybWF0IikpLAogICAgICAgIHVybDogZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQobWV0YWRhdGFVcmxFbCwgIk9ubGluZVJlc291cmNlIiksCiAgICAgICAgICAieGxpbms6aHJlZiIKICAgICAgICApCiAgICAgIH0pCiAgICApOwogICAgY29uc3QgY2hpbGRyZW4gPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGxheWVyRWwsICJMYXllciIpLm1hcCgKICAgICAgKGxheWVyKSA9PiBwYXJzZUxheWVyKAogICAgICAgIGxheWVyLAogICAgICAgIHZlcnNpb24sCiAgICAgICAgYXZhaWxhYmxlQ3JzLAogICAgICAgIHN0eWxlcywKICAgICAgICBhdHRyaWJ1dGlvbiwKICAgICAgICBib3VuZGluZ0JveGVzLAogICAgICAgIG1heFNjYWxlRGVub21pbmF0b3IsCiAgICAgICAgbWluU2NhbGVEZW5vbWluYXRvcgogICAgICApCiAgICApOwogICAgcmV0dXJuIHsKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiTmFtZSIpKSwKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobGF5ZXJFbCwgIlRpdGxlIikpLAogICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChsYXllckVsLCAiQWJzdHJhY3QiKSksCiAgICAgIGF2YWlsYWJsZUNycywKICAgICAgc3R5bGVzLAogICAgICBhdHRyaWJ1dGlvbiwKICAgICAgYm91bmRpbmdCb3hlcywKICAgICAga2V5d29yZHMsCiAgICAgIHF1ZXJ5YWJsZSwKICAgICAgb3BhcXVlLAogICAgICAuLi5taW5TY2FsZURlbm9taW5hdG9yICE9PSBudWxsID8geyBtaW5TY2FsZURlbm9taW5hdG9yIH0gOiB7fSwKICAgICAgLi4ubWF4U2NhbGVEZW5vbWluYXRvciAhPT0gbnVsbCA/IHsgbWF4U2NhbGVEZW5vbWluYXRvciB9IDoge30sCiAgICAgIC4uLm1ldGFkYXRhLmxlbmd0aCAmJiB7IG1ldGFkYXRhIH0sCiAgICAgIC4uLmNoaWxkcmVuLmxlbmd0aCAmJiB7IGNoaWxkcmVuIH0KICAgIH07CiAgfQogIGZ1bmN0aW9uIHBhcnNlTGF5ZXJTdHlsZShzdHlsZUVsKSB7CiAgICBjb25zdCBsZWdlbmRVcmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICBmaW5kQ2hpbGRFbGVtZW50KGZpbmRDaGlsZEVsZW1lbnQoc3R5bGVFbCwgIkxlZ2VuZFVSTCIpLCAiT25saW5lUmVzb3VyY2UiKSwKICAgICAgInhsaW5rOmhyZWYiCiAgICApOwogICAgY29uc3QgYWJzdHJhY3QgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHN0eWxlRWwsICJBYnN0cmFjdCIpKTsKICAgIHJldHVybiB7CiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc3R5bGVFbCwgIk5hbWUiKSksCiAgICAgIHRpdGxlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHN0eWxlRWwsICJUaXRsZSIpKSwKICAgICAgLi4uYWJzdHJhY3QgJiYgeyBhYnN0cmFjdCB9LAogICAgICAuLi5sZWdlbmRVcmwgJiYgeyBsZWdlbmRVcmwgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcGFyc2VMYXllckF0dHJpYnV0aW9uKGF0dHJpYnV0aW9uRWwpIHsKICAgIGNvbnN0IGxvZ29VcmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKAogICAgICBmaW5kQ2hpbGRFbGVtZW50KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYXR0cmlidXRpb25FbCwgIkxvZ29VUkwiKSwKICAgICAgICAiT25saW5lUmVzb3VyY2UiCiAgICAgICksCiAgICAgICJ4bGluazpocmVmIgogICAgKTsKICAgIGNvbnN0IHVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYXR0cmlidXRpb25FbCwgIk9ubGluZVJlc291cmNlIiksCiAgICAgICJ4bGluazpocmVmIgogICAgKTsKICAgIGNvbnN0IHRpdGxlID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhdHRyaWJ1dGlvbkVsLCAiVGl0bGUiKSk7CiAgICByZXR1cm4gewogICAgICAuLi50aXRsZSAmJiB7IHRpdGxlIH0sCiAgICAgIC4uLnVybCAmJiB7IHVybCB9LAogICAgICAuLi5sb2dvVXJsICYmIHsgbG9nb1VybCB9CiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCBzZXJ2aWNlID0gZmluZENoaWxkRWxlbWVudChnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpLCAiU2VydmljZSIpOwogICAgY29uc3QgY29udGFjdEluZm9ybWF0aW9uID0gZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQ29udGFjdEluZm9ybWF0aW9uIik7CiAgICBjb25zdCBjb250YWN0UGVyc29uUHJpbWFyeSA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGNvbnRhY3RJbmZvcm1hdGlvbiwKICAgICAgIkNvbnRhY3RQZXJzb25QcmltYXJ5IgogICAgKTsKICAgIGNvbnN0IGFkZHJlc3MgPSBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RBZGRyZXNzIik7CiAgICByZXR1cm4gewogICAgICBjb250YWN0OiB7CiAgICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RQZXJzb25QcmltYXJ5LCAiQ29udGFjdFBlcnNvbiIpCiAgICAgICAgKSwKICAgICAgICBvcmdhbml6YXRpb246IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0UGVyc29uUHJpbWFyeSwgIkNvbnRhY3RPcmdhbml6YXRpb24iKQogICAgICAgICksCiAgICAgICAgcG9zaXRpb246IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mb3JtYXRpb24sICJDb250YWN0UG9zaXRpb24iKQogICAgICAgICksCiAgICAgICAgcGhvbmU6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgZmluZENoaWxkRWxlbWVudChjb250YWN0SW5mb3JtYXRpb24sICJDb250YWN0Vm9pY2VUZWxlcGhvbmUiKQogICAgICAgICksCiAgICAgICAgZmF4OiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY29udGFjdEluZm9ybWF0aW9uLCAiQ29udGFjdEZhY3NpbWlsZVRlbGVwaG9uZSIpCiAgICAgICAgKSwKICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICBkZWxpdmVyeVBvaW50OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJBZGRyZXNzIikpLAogICAgICAgICAgY2l0eTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQ2l0eSIpKSwKICAgICAgICAgIGFkbWluaXN0cmF0aXZlQXJlYTogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIlN0YXRlT3JQcm92aW5jZSIpCiAgICAgICAgICApLAogICAgICAgICAgcG9zdGFsQ29kZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiUG9zdENvZGUiKSksCiAgICAgICAgICBjb3VudHJ5OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJDb3VudHJ5IikpCiAgICAgICAgfSwKICAgICAgICBlbWFpbDogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvcm1hdGlvbiwgIkNvbnRhY3RFbGVjdHJvbmljTWFpbEFkZHJlc3MiKQogICAgICAgICkKICAgICAgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcmVhZFByb3ZpZGVyRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHNlcnZpY2VQcm92aWRlciA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJTZXJ2aWNlUHJvdmlkZXIiCiAgICApOwogICAgY29uc3Qgc2VydmljZUNvbnRhY3QgPSBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VQcm92aWRlciwgIlNlcnZpY2VDb250YWN0Iik7CiAgICBjb25zdCBjb250YWN0SW5mbyA9IGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZUNvbnRhY3QsICJDb250YWN0SW5mbyIpOwogICAgY29uc3QgcGhvbmUgPSBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvLCAiUGhvbmUiKTsKICAgIGNvbnN0IGFkZHJlc3MgPSBmaW5kQ2hpbGRFbGVtZW50KGNvbnRhY3RJbmZvLCAiQWRkcmVzcyIpOwogICAgcmV0dXJuIHsKICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlUHJvdmlkZXIsICJQcm92aWRlck5hbWUiKSksCiAgICAgIHNpdGU6IGdldEVsZW1lbnRBdHRyaWJ1dGUoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlUHJvdmlkZXIsICJQcm92aWRlclNpdGUiKSwKICAgICAgICAieGxpbms6aHJlZiIKICAgICAgKSwKICAgICAgY29udGFjdDogewogICAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZUNvbnRhY3QsICJJbmRpdmlkdWFsTmFtZSIpKSwKICAgICAgICBwb3NpdGlvbjogZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2VDb250YWN0LCAiUG9zaXRpb25OYW1lIikKICAgICAgICApLAogICAgICAgIHBob25lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHBob25lLCAiVm9pY2UiKSksCiAgICAgICAgZmF4OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHBob25lLCAiRmFjc2ltaWxlIikpLAogICAgICAgIGFkZHJlc3M6IHsKICAgICAgICAgIGRlbGl2ZXJ5UG9pbnQ6IGdldEVsZW1lbnRUZXh0KAogICAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJEZWxpdmVyeVBvaW50IikKICAgICAgICAgICksCiAgICAgICAgICBjaXR5OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJDaXR5IikpLAogICAgICAgICAgYWRtaW5pc3RyYXRpdmVBcmVhOiBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQWRtaW5pc3RyYXRpdmVBcmVhIikKICAgICAgICAgICksCiAgICAgICAgICBwb3N0YWxDb2RlOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGFkZHJlc3MsICJQb3N0YWxDb2RlIikpLAogICAgICAgICAgY291bnRyeTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChhZGRyZXNzLCAiQ291bnRyeSIpKQogICAgICAgIH0sCiAgICAgICAgZW1haWw6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoYWRkcmVzcywgIkVsZWN0cm9uaWNNYWlsQWRkcmVzcyIpKQogICAgICB9CiAgICB9OwogIH0KICBmdW5jdGlvbiByZWFkT3BlcmF0aW9uVXJsc0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB1cmxzID0ge307CiAgICBjb25zdCBjYXBhYmlsaXRpZXMgPSBnZXRSb290RWxlbWVudChjYXBhYmlsaXRpZXNEb2MpOwogICAgY29uc3Qgb3BlcmF0aW9uc01ldGFkYXRhID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgY2FwYWJpbGl0aWVzLAogICAgICAiT3BlcmF0aW9uc01ldGFkYXRhIgogICAgKTsKICAgIGlmIChvcGVyYXRpb25zTWV0YWRhdGEpIHsKICAgICAgZmluZENoaWxkcmVuRWxlbWVudChvcGVyYXRpb25zTWV0YWRhdGEsICJPcGVyYXRpb24iKS5mb3JFYWNoKAogICAgICAgIChvcGVyYXRpb24pID0+IHsKICAgICAgICAgIGNvbnN0IG5hbWUgPSBnZXRFbGVtZW50QXR0cmlidXRlKG9wZXJhdGlvbiwgIm5hbWUiKTsKICAgICAgICAgIHVybHNbbmFtZV0gPSBwYXJzZU9wZXJhdGlvbjExMChvcGVyYXRpb24pOwogICAgICAgIH0KICAgICAgKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGNhcGFiaWxpdHkgPSBmaW5kQ2hpbGRFbGVtZW50KGNhcGFiaWxpdGllcywgIkNhcGFiaWxpdHkiKTsKICAgICAgY29uc3QgcmVxdWVzdCA9IGZpbmRDaGlsZEVsZW1lbnQoY2FwYWJpbGl0eSwgIlJlcXVlc3QiKTsKICAgICAgZ2V0Q2hpbGRyZW5FbGVtZW50KHJlcXVlc3QpLmZvckVhY2goKG9wZXJhdGlvbikgPT4gewogICAgICAgIGNvbnN0IG5hbWUgPSBzdHJpcE5hbWVzcGFjZShnZXRFbGVtZW50TmFtZShvcGVyYXRpb24pKTsKICAgICAgICB1cmxzW25hbWVdID0gcGFyc2VPcGVyYXRpb24xMDAob3BlcmF0aW9uKTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gdXJsczsKICB9CiAgZnVuY3Rpb24gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgcmV0dXJuIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYykuYXR0cmlidXRlc1sidmVyc2lvbiJdOwogIH0KICBmdW5jdGlvbiByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBsZXQgb3V0cHV0Rm9ybWF0czsKICAgIGlmICh2ZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpKSB7CiAgICAgIGNvbnN0IGdldEZlYXR1cmUgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgICAgICBmaW5kQ2hpbGRFbGVtZW50KGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksICJDYXBhYmlsaXR5IiksCiAgICAgICAgICAiUmVxdWVzdCIKICAgICAgICApLAogICAgICAgICJHZXRGZWF0dXJlIgogICAgICApOwogICAgICBvdXRwdXRGb3JtYXRzID0gZ2V0Q2hpbGRyZW5FbGVtZW50KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZ2V0RmVhdHVyZSwgIlJlc3VsdEZvcm1hdCIpCiAgICAgICkubWFwKGdldEVsZW1lbnROYW1lKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IG9wZXJhdGlvbnMgPSBmaW5kQ2hpbGRFbGVtZW50KAogICAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICAgIk9wZXJhdGlvbnNNZXRhZGF0YSIKICAgICAgKTsKICAgICAgY29uc3QgZ2V0RmVhdHVyZSA9IGZpbmRDaGlsZHJlbkVsZW1lbnQob3BlcmF0aW9ucywgIk9wZXJhdGlvbiIpLmZpbmQoCiAgICAgICAgKGVsKSA9PiBnZXRFbGVtZW50QXR0cmlidXRlKGVsLCAibmFtZSIpID09PSAiR2V0RmVhdHVyZSIKICAgICAgKTsKICAgICAgY29uc3QgcGFyYW1ldGVyID0gZmluZENoaWxkcmVuRWxlbWVudChnZXRGZWF0dXJlLCAiUGFyYW1ldGVyIikuZmluZCgKICAgICAgICAoZWwpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsICJuYW1lIikgPT09ICJvdXRwdXRGb3JtYXQiCiAgICAgICk7CiAgICAgIG91dHB1dEZvcm1hdHMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KHBhcmFtZXRlciwgIlZhbHVlIiwgdHJ1ZSkubWFwKAogICAgICAgIGdldEVsZW1lbnRUZXh0CiAgICAgICk7CiAgICB9CiAgICByZXR1cm4gb3V0cHV0Rm9ybWF0czsKICB9CiAgZnVuY3Rpb24gcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzJDEoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBzZXJ2aWNlVGFnID0gdmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/ICJTZXJ2aWNlIiA6ICJTZXJ2aWNlSWRlbnRpZmljYXRpb24iOwogICAgY29uc3QgbmFtZVRhZyA9IHZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyAiTmFtZSIgOiAiU2VydmljZVR5cGUiOwogICAgY29uc3Qgc2VydmljZSA9IGZpbmRDaGlsZEVsZW1lbnQoZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwgc2VydmljZVRhZyk7CiAgICBsZXQga2V5d29yZHM7CiAgICBpZiAodmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSkgewogICAgICBrZXl3b3JkcyA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIktleXdvcmRzIikpLnNwbGl0KCIsIikubWFwKChrZXl3b3JkKSA9PiBrZXl3b3JkLnRyaW0oKSk7CiAgICB9IGVsc2UgewogICAgICBrZXl3b3JkcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiS2V5d29yZHMiKSwKICAgICAgICAiS2V5d29yZCIKICAgICAgKS5tYXAoZ2V0RWxlbWVudFRleHQpOwogICAgfQogICAgbGV0IHByb3ZpZGVyOwogICAgaWYgKHZlcnNpb24gIT09ICIxLjAuMCIpIHsKICAgICAgcHJvdmlkZXIgPSByZWFkUHJvdmlkZXJGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICB9CiAgICByZXR1cm4gewogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiVGl0bGUiKSksCiAgICAgIG5hbWU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgbmFtZVRhZykpLAogICAgICBhYnN0cmFjdDogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWJzdHJhY3QiKSksCiAgICAgIGZlZXM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkZlZXMiKSksCiAgICAgIGNvbnN0cmFpbnRzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJBY2Nlc3NDb25zdHJhaW50cyIpKSwKICAgICAga2V5d29yZHMsCiAgICAgIHByb3ZpZGVyLAogICAgICBvdXRwdXRGb3JtYXRzOiByZWFkT3V0cHV0Rm9ybWF0c0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKQogICAgfTsKICB9CiAgZnVuY3Rpb24gcmVhZEZlYXR1cmVUeXBlc0Zyb21DYXBhYmlsaXRpZXMoY2FwYWJpbGl0aWVzRG9jKSB7CiAgICBjb25zdCB2ZXJzaW9uID0gcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gcmVhZE91dHB1dEZvcm1hdHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBjYXBhYmlsaXR5ID0gZmluZENoaWxkRWxlbWVudCgKICAgICAgZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKSwKICAgICAgIkZlYXR1cmVUeXBlTGlzdCIKICAgICk7CiAgICByZXR1cm4gZmluZENoaWxkcmVuRWxlbWVudChjYXBhYmlsaXR5LCAiRmVhdHVyZVR5cGUiKS5tYXAoCiAgICAgIChmZWF0dXJlVHlwZUVsKSA9PiBwYXJzZUZlYXR1cmVUeXBlKGZlYXR1cmVUeXBlRWwsIHZlcnNpb24sIG91dHB1dEZvcm1hdHMpCiAgICApOwogIH0KICBmdW5jdGlvbiBwYXJzZU9wZXJhdGlvbjEwMChvcGVyYXRpb24pIHsKICAgIGNvbnN0IHVybHMgPSB7fTsKICAgIGNvbnN0IGRjcFR5cGUgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KG9wZXJhdGlvbiwgIkRDUFR5cGUiKTsKICAgIGNvbnN0IGh0dHAgPSBkY3BUeXBlLmZsYXRNYXAoKGQpID0+IGZpbmRDaGlsZHJlbkVsZW1lbnQoZCwgIkhUVFAiKSk7CiAgICBjb25zdCBtZXRob2RzID0gaHR0cC5mbGF0TWFwKChoKSA9PiBnZXRDaGlsZHJlbkVsZW1lbnQoaCkpOwogICAgbWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHsKICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG1ldGhvZCkpOwogICAgICB1cmxzW21ldGhvZE5hbWVdID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRob2QsICJvbmxpbmVSZXNvdXJjZSIpOwogICAgfSk7CiAgICByZXR1cm4gdXJsczsKICB9CiAgZnVuY3Rpb24gcGFyc2VPcGVyYXRpb24xMTAob3BlcmF0aW9uKSB7CiAgICBjb25zdCB1cmxzID0ge307CiAgICBjb25zdCBkY3BUeXBlID0gZmluZENoaWxkcmVuRWxlbWVudChvcGVyYXRpb24sICJEQ1AiKTsKICAgIGNvbnN0IGh0dHAgPSBkY3BUeXBlLmZsYXRNYXAoKGQpID0+IGZpbmRDaGlsZEVsZW1lbnQoZCwgIkhUVFAiKSk7CiAgICBjb25zdCBtZXRob2RzID0gaHR0cC5mbGF0TWFwKChoKSA9PiBnZXRDaGlsZHJlbkVsZW1lbnQoaCkpOwogICAgbWV0aG9kcy5mb3JFYWNoKChtZXRob2QpID0+IHsKICAgICAgY29uc3QgbWV0aG9kTmFtZSA9IHN0cmlwTmFtZXNwYWNlKGdldEVsZW1lbnROYW1lKG1ldGhvZCkpOwogICAgICB1cmxzW21ldGhvZE5hbWVdID0gZ2V0RWxlbWVudEF0dHJpYnV0ZShtZXRob2QsICJ4bGluazpocmVmIik7CiAgICB9KTsKICAgIHJldHVybiB1cmxzOwogIH0KICBmdW5jdGlvbiBwYXJzZUZlYXR1cmVUeXBlKGZlYXR1cmVUeXBlRWwsIHNlcnZpY2VWZXJzaW9uLCBkZWZhdWx0T3V0cHV0Rm9ybWF0cykgewogICAgY29uc3Qgc3JzVGFnID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMi4iKSA/ICJDUlMiIDogIlNSUyI7CiAgICBjb25zdCBkZWZhdWx0U3JzVGFnID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyAiU1JTIiA6IGBEZWZhdWx0JHtzcnNUYWd9YDsKICAgIGZ1bmN0aW9uIHBhcnNlQkJveDEwMCgpIHsKICAgICAgY29uc3QgYmJveEVsID0gZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiTGF0TG9uZ0JvdW5kaW5nQm94Iik7CiAgICAgIHJldHVybiBbIm1pbngiLCAibWlueSIsICJtYXh4IiwgIm1heHkiXS5tYXAoKG5hbWUpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoYmJveEVsLCBuYW1lKSkubWFwKHBhcnNlRmxvYXQpOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VCQm94MigpIHsKICAgICAgY29uc3QgYmJveEVsID0gZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiV0dTODRCb3VuZGluZ0JveCIpOwogICAgICByZXR1cm4gWyJMb3dlckNvcm5lciIsICJVcHBlckNvcm5lciJdLm1hcCgoZWxOYW1lKSA9PiBmaW5kQ2hpbGRFbGVtZW50KGJib3hFbCwgZWxOYW1lKSkubWFwKChjb3JuZXJFbCkgPT4gZ2V0RWxlbWVudFRleHQoY29ybmVyRWwpLnNwbGl0KCIgIikpLnJlZHVjZSgocHJldiwgY3VycikgPT4gWy4uLnByZXYsIC4uLmN1cnJdKS5tYXAocGFyc2VGbG9hdCk7CiAgICB9CiAgICBjb25zdCBvdGhlckNycyA9IHNlcnZpY2VWZXJzaW9uLnN0YXJ0c1dpdGgoIjEuMCIpID8gW10gOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGZlYXR1cmVUeXBlRWwsIGBPdGhlciR7c3JzVGFnfWApLm1hcChnZXRFbGVtZW50VGV4dCkubWFwKHNpbXBsaWZ5RXBzZ1Vybik7CiAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyBbXSA6IGZpbmRDaGlsZHJlbkVsZW1lbnQoCiAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgIk91dHB1dEZvcm1hdHMiKSwKICAgICAgIkZvcm1hdCIKICAgICkubWFwKGdldEVsZW1lbnRUZXh0KTsKICAgIGNvbnN0IGtleXdvcmRzID0gc2VydmljZVZlcnNpb24uc3RhcnRzV2l0aCgiMS4wIikgPyBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJLZXl3b3JkcyIpKS5zcGxpdCgiLCIpLm1hcCgoa2V5d29yZCkgPT4ga2V5d29yZC50cmltKCkpIDogZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiS2V5d29yZHMiKSwKICAgICAgIktleXdvcmQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCkuZmlsdGVyKCh2LCBpLCBhcnIpID0+IGFyci5pbmRleE9mKHYpID09PSBpKTsKICAgIGNvbnN0IG1ldGFkYXRhID0gc2VydmljZVZlcnNpb24gPT09ICIyLjAuMCIgPyBmaW5kQ2hpbGRyZW5FbGVtZW50KGZlYXR1cmVUeXBlRWwsICJNZXRhZGF0YVVSTCIpLm1hcCgKICAgICAgKG1ldGFkYXRhVXJsRWwpID0+ICh7CiAgICAgICAgdXJsOiBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGFkYXRhVXJsRWwsICJ4bGluazpocmVmIikKICAgICAgfSkKICAgICkgOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGZlYXR1cmVUeXBlRWwsICJNZXRhZGF0YVVSTCIpLm1hcCgKICAgICAgKG1ldGFkYXRhVXJsRWwpID0+ICh7CiAgICAgICAgZm9ybWF0OiBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGFkYXRhVXJsRWwsICJmb3JtYXQiKSwKICAgICAgICB0eXBlOiBnZXRFbGVtZW50QXR0cmlidXRlKG1ldGFkYXRhVXJsRWwsICJ0eXBlIiksCiAgICAgICAgdXJsOiBnZXRFbGVtZW50VGV4dChtZXRhZGF0YVVybEVsKS50cmltKCkKICAgICAgfSkKICAgICk7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJOYW1lIikpLAogICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChmZWF0dXJlVHlwZUVsLCAiVGl0bGUiKSksCiAgICAgIGFic3RyYWN0OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGZlYXR1cmVUeXBlRWwsICJBYnN0cmFjdCIpKSwKICAgICAgZGVmYXVsdENyczogc2ltcGxpZnlFcHNnVXJuKAogICAgICAgIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZmVhdHVyZVR5cGVFbCwgZGVmYXVsdFNyc1RhZykpCiAgICAgICksCiAgICAgIG90aGVyQ3JzLAogICAgICBvdXRwdXRGb3JtYXRzOiBvdXRwdXRGb3JtYXRzLmxlbmd0aCA+IDAgPyBvdXRwdXRGb3JtYXRzIDogZGVmYXVsdE91dHB1dEZvcm1hdHMsCiAgICAgIGxhdExvbkJvdW5kaW5nQm94OiBzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIxLjAiKSA/IHBhcnNlQkJveDEwMCgpIDogcGFyc2VCQm94MigpLAogICAgICBrZXl3b3JkcywKICAgICAgLi4ubWV0YWRhdGEubGVuZ3RoICYmIHsgbWV0YWRhdGEgfQogICAgfTsKICB9CiAgZnVuY3Rpb24gcGFyc2VCQm94KHhtbEVsZW1lbnQpIHsKICAgIGNvbnN0IHJlc3VsdCA9IFsiTG93ZXJDb3JuZXIiLCAiVXBwZXJDb3JuZXIiXS5tYXAoKGVsTmFtZSkgPT4gZmluZENoaWxkRWxlbWVudCh4bWxFbGVtZW50LCBlbE5hbWUpKS5tYXAoKGNvcm5lckVsKSA9PiBnZXRFbGVtZW50VGV4dChjb3JuZXJFbCkuc3BsaXQoIiAiKSkucmVkdWNlKChwcmV2LCBjdXJyKSA9PiBbLi4ucHJldiwgLi4uY3Vycl0pLm1hcChwYXJzZUZsb2F0KTsKICAgIGlmIChyZXN1bHQuc29tZShOdW1iZXIuaXNOYU4pKQogICAgICByZXR1cm4gbnVsbDsKICAgIHJldHVybiByZXN1bHQ7CiAgfQogIGZ1bmN0aW9uIHJlYWRJbmZvRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpIHsKICAgIGNvbnN0IHJvb3RFbCA9IGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyk7CiAgICBjb25zdCBzZXJ2aWNlID0gZmluZENoaWxkRWxlbWVudChyb290RWwsICJTZXJ2aWNlSWRlbnRpZmljYXRpb24iKTsKICAgIGNvbnN0IGtleXdvcmRzID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiS2V5d29yZHMiKSwKICAgICAgIktleXdvcmQiCiAgICApLm1hcChnZXRFbGVtZW50VGV4dCk7CiAgICBjb25zdCBtZXRhZGF0YSA9IGZpbmRDaGlsZEVsZW1lbnQocm9vdEVsLCAiT3BlcmF0aW9uc01ldGFkYXRhIik7CiAgICBjb25zdCBnZXRUaWxlT3BlcmF0aW9uID0gZmluZENoaWxkcmVuRWxlbWVudChtZXRhZGF0YSwgIk9wZXJhdGlvbiIpLmZpbmQoCiAgICAgIChlbCkgPT4gZ2V0RWxlbWVudEF0dHJpYnV0ZShlbCwgIm5hbWUiKSA9PSAiR2V0VGlsZSIKICAgICk7CiAgICBjb25zdCBnZXRUaWxlVXJscyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0VGlsZU9wZXJhdGlvbiwgIkdldCIsIHRydWUpLnJlZHVjZSgKICAgICAgKHByZXYsIGN1cnIpID0+IHsKICAgICAgICBjb25zdCBlbmNvZGluZ1R5cGUgPSBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoY3VyciwgIlZhbHVlIiwgdHJ1ZSkKICAgICAgICApOwogICAgICAgIGNvbnN0IHVybCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoY3VyciwgInhsaW5rOmhyZWYiKTsKICAgICAgICBpZiAoZW5jb2RpbmdUeXBlLnRvTG93ZXJDYXNlKCkgPT09ICJyZXN0ZnVsIikKICAgICAgICAgIHJldHVybiB7IC4uLnByZXYsIHJlc3Q6IHVybCB9OwogICAgICAgIHJldHVybiB7IC4uLnByZXYsIGt2cDogdXJsIH07CiAgICAgIH0sCiAgICAgIHt9CiAgICApOwogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIlRpdGxlIikpLAogICAgICBuYW1lOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJTZXJ2aWNlVHlwZSIpKSwKICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoc2VydmljZSwgIkFic3RyYWN0IikpLAogICAgICBmZWVzOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KHNlcnZpY2UsICJGZWVzIikpLAogICAgICBjb25zdHJhaW50czogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChzZXJ2aWNlLCAiQWNjZXNzQ29uc3RyYWludHMiKSksCiAgICAgIGtleXdvcmRzLAogICAgICBwcm92aWRlcjogcmVhZFByb3ZpZGVyRnJvbUNhcGFiaWxpdGllcyhjYXBhYmlsaXRpZXNEb2MpLAogICAgICBnZXRUaWxlVXJscwogICAgfTsKICB9CiAgZnVuY3Rpb24gcmVhZE1hdHJpeFNldHNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgZnVuY3Rpb24gcGFyc2VNYXRyaXhTZXQoZWxlbWVudCkgewogICAgICBjb25zdCB0b3BMZWZ0ID0gZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVG9wTGVmdENvcm5lciIpKS5zcGxpdCgiICIpLm1hcChwYXJzZUZsb2F0KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBpZGVudGlmaWVyOiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJJZGVudGlmaWVyIikpLAogICAgICAgIHRpbGVXaWR0aDogcGFyc2VJbnQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJUaWxlV2lkdGgiKSkKICAgICAgICApLAogICAgICAgIHRpbGVIZWlnaHQ6IHBhcnNlSW50KAogICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVGlsZUhlaWdodCIpKQogICAgICAgICksCiAgICAgICAgbWF0cml4V2lkdGg6IHBhcnNlSW50KAogICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiTWF0cml4V2lkdGgiKSkKICAgICAgICApLAogICAgICAgIG1hdHJpeEhlaWdodDogcGFyc2VJbnQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJNYXRyaXhIZWlnaHQiKSkKICAgICAgICApLAogICAgICAgIHNjYWxlRGVub21pbmF0b3I6IHBhcnNlRmxvYXQoCiAgICAgICAgICBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQsICJTY2FsZURlbm9taW5hdG9yIikpCiAgICAgICAgKSwKICAgICAgICB0b3BMZWZ0CiAgICAgIH07CiAgICB9CiAgICBjb25zdCBjb250ZW50cyA9IGZpbmRDaGlsZEVsZW1lbnQoCiAgICAgIGdldFJvb3RFbGVtZW50KGNhcGFiaWxpdGllc0RvYyksCiAgICAgICJDb250ZW50cyIKICAgICk7CiAgICBjb25zdCBtYXRyaXhTZXRzID0gZmluZENoaWxkcmVuRWxlbWVudChjb250ZW50cywgIlRpbGVNYXRyaXhTZXQiKTsKICAgIHJldHVybiBtYXRyaXhTZXRzLm1hcCgoZWxlbWVudCkgPT4gewogICAgICBjb25zdCB3ZWxsS25vd25TY2FsZVNldCA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIldlbGxLbm93blNjYWxlU2V0IikKICAgICAgKTsKICAgICAgY29uc3QgYm91bmRpbmdCb3ggPSBwYXJzZUJCb3goZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiQm91bmRpbmdCb3giKSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWRlbnRpZmllcjogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiSWRlbnRpZmllciIpKSwKICAgICAgICBjcnM6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlN1cHBvcnRlZENSUyIpKSwKICAgICAgICB0aWxlTWF0cmljZXM6IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudCwgIlRpbGVNYXRyaXgiKS5tYXAoCiAgICAgICAgICBwYXJzZU1hdHJpeFNldAogICAgICAgICksCiAgICAgICAgLi4uYm91bmRpbmdCb3ggJiYgeyBib3VuZGluZ0JveCB9LAogICAgICAgIC4uLndlbGxLbm93blNjYWxlU2V0ICYmIHsgd2VsbEtub3duU2NhbGVTZXQgfQogICAgICB9OwogICAgfSk7CiAgfQogIGZ1bmN0aW9uIHJlYWRMYXllcnNGcm9tQ2FwYWJpbGl0aWVzKGNhcGFiaWxpdGllc0RvYykgewogICAgY29uc3Qgcm9vdEVsID0gZ2V0Um9vdEVsZW1lbnQoY2FwYWJpbGl0aWVzRG9jKTsKICAgIGNvbnN0IGNvbnRlbnRzRWwgPSBmaW5kQ2hpbGRFbGVtZW50KHJvb3RFbCwgIkNvbnRlbnRzIik7CiAgICBmdW5jdGlvbiBnZXRNYXRyaXhTZXRDcnMoY29udGVudHNFbDIsIGlkZW50aWZpZXIpIHsKICAgICAgY29uc3QgbWF0cml4U2V0ID0gZmluZENoaWxkcmVuRWxlbWVudChjb250ZW50c0VsMiwgIlRpbGVNYXRyaXhTZXQiKS5maW5kKAogICAgICAgIChtYXRyaXhTZXRFbCkgPT4gewogICAgICAgICAgY29uc3QgaWRlbnRpZmllckVsID0gZmluZENoaWxkRWxlbWVudChtYXRyaXhTZXRFbCwgIklkZW50aWZpZXIiKTsKICAgICAgICAgIHJldHVybiBnZXRFbGVtZW50VGV4dChpZGVudGlmaWVyRWwpID09PSBpZGVudGlmaWVyOwogICAgICAgIH0KICAgICAgKTsKICAgICAgcmV0dXJuIGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQobWF0cml4U2V0LCAiU3VwcG9ydGVkQ1JTIikpOwogICAgfQogICAgZnVuY3Rpb24gcGFyc2VNYXRyaXhTZXRMaW5rKGVsZW1lbnQpIHsKICAgICAgY29uc3QgaWRlbnRpZmllciA9IGdldEVsZW1lbnRUZXh0KAogICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIlRpbGVNYXRyaXhTZXQiKQogICAgICApOwogICAgICBjb25zdCBjcnMgPSBnZXRNYXRyaXhTZXRDcnMoY29udGVudHNFbCwgaWRlbnRpZmllcik7CiAgICAgIHJldHVybiB7CiAgICAgICAgaWRlbnRpZmllciwKICAgICAgICBjcnMsCiAgICAgICAgbGltaXRzOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJUaWxlTWF0cml4TGltaXRzIiwgdHJ1ZSkubWFwKAogICAgICAgICAgKGVsZW1lbnQyKSA9PiAoewogICAgICAgICAgICB0aWxlTWF0cml4OiBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiVGlsZU1hdHJpeCIpKSwKICAgICAgICAgICAgbWluVGlsZVJvdzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIk1pblRpbGVSb3ciKSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgbWluVGlsZUNvbDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIk1pblRpbGVDb2wiKSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgbWF4VGlsZVJvdzogcGFyc2VJbnQoCiAgICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIk1heFRpbGVSb3ciKSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgbWF4VGlsZUNvbDogcGFyc2VJbnQoCiAgICAgICAgICAgICAgZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIk1heFRpbGVDb2wiKSkKICAgICAgICAgICAgKQogICAgICAgICAgfSkKICAgICAgICApCiAgICAgIH07CiAgICB9CiAgICBjb25zdCBnZXRUaWxlT3BlcmF0aW9uID0gZmluZENoaWxkcmVuRWxlbWVudCgKICAgICAgZmluZENoaWxkRWxlbWVudChyb290RWwsICJPcGVyYXRpb25zTWV0YWRhdGEiKSwKICAgICAgIk9wZXJhdGlvbiIKICAgICkuZmluZCgoZWwpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsICJuYW1lIikgPT0gIkdldFRpbGUiKTsKICAgIGNvbnN0IGdldEt2cEVsdCA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZ2V0VGlsZU9wZXJhdGlvbiwgIkdldCIsIHRydWUpLmZpbHRlcigKICAgICAgKGVsdCkgPT4gewogICAgICAgIGNvbnN0IGVuY29kaW5nVHlwZSA9IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWx0LCAiVmFsdWUiLCB0cnVlKSk7CiAgICAgICAgcmV0dXJuIGVuY29kaW5nVHlwZS50b0xvd2VyQ2FzZSgpID09PSAia3ZwIjsKICAgICAgfQogICAgKVswXTsKICAgIGNvbnN0IGdldEt2cFVybCA9IGdldEt2cEVsdCA/IGdldEVsZW1lbnRBdHRyaWJ1dGUoZ2V0S3ZwRWx0LCAieGxpbms6aHJlZiIpIDogIiI7CiAgICBjb25zdCBjb250ZW50cyA9IGZpbmRDaGlsZEVsZW1lbnQocm9vdEVsLCAiQ29udGVudHMiKTsKICAgIGNvbnN0IGxheWVycyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoY29udGVudHMsICJMYXllciIpOwogICAgcmV0dXJuIGxheWVycy5tYXAoKGVsZW1lbnQpID0+IHsKICAgICAgY29uc3QgbGF0TG9uQm91bmRpbmdCb3ggPSBwYXJzZUJCb3goCiAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiV0dTODRCb3VuZGluZ0JveCIpCiAgICAgICk7CiAgICAgIGxldCBkZWZhdWx0U3R5bGUgPSAiIjsKICAgICAgY29uc3Qgc3R5bGVzID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiU3R5bGUiKS5tYXAoKGVsZW1lbnQyKSA9PiB7CiAgICAgICAgY29uc3QgbGVnZW5kVXJsID0gZ2V0RWxlbWVudEF0dHJpYnV0ZSgKICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJMZWdlbmRVUkwiKSwKICAgICAgICAgICJ4bGluazpocmVmIgogICAgICAgICk7CiAgICAgICAgY29uc3QgYWJzdHJhY3QgPSBnZXRFbGVtZW50VGV4dChmaW5kQ2hpbGRFbGVtZW50KGVsZW1lbnQyLCAiQWJzdHJhY3QiKSk7CiAgICAgICAgY29uc3Qgc3R5bGUgPSB7CiAgICAgICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIlRpdGxlIikpLAogICAgICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIklkZW50aWZpZXIiKSksCiAgICAgICAgICAuLi5hYnN0cmFjdCAmJiB7IGFic3RyYWN0IH0sCiAgICAgICAgICAuLi5sZWdlbmRVcmwgJiYgeyBsZWdlbmRVcmwgfQogICAgICAgIH07CiAgICAgICAgaWYgKGdldEVsZW1lbnRBdHRyaWJ1dGUoZWxlbWVudDIsICJpc0RlZmF1bHQiKSA9PT0gInRydWUiKSB7CiAgICAgICAgICBkZWZhdWx0U3R5bGUgPSBzdHlsZS5uYW1lOwogICAgICAgIH0KICAgICAgICByZXR1cm4gc3R5bGU7CiAgICAgIH0pOwogICAgICBjb25zdCBvdXRwdXRGb3JtYXRzID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiRm9ybWF0IikubWFwKAogICAgICAgIGdldEVsZW1lbnRUZXh0CiAgICAgICk7CiAgICAgIGNvbnN0IHJlc291cmNlTGlua3MgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KAogICAgICAgIGVsZW1lbnQsCiAgICAgICAgIlJlc291cmNlVVJMIgogICAgICApLmZpbHRlcigKICAgICAgICAoZWxlbWVudDIpID0+IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWxlbWVudDIsICJyZXNvdXJjZVR5cGUiKSA9PT0gInRpbGUiCiAgICAgICkubWFwKChlbGVtZW50MikgPT4gewogICAgICAgIGNvbnN0IGZvcm1hdCA9IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWxlbWVudDIsICJmb3JtYXQiKTsKICAgICAgICBjb25zdCB1cmwgPSBnZXRFbGVtZW50QXR0cmlidXRlKGVsZW1lbnQyLCAidGVtcGxhdGUiKTsKICAgICAgICByZXR1cm4geyBmb3JtYXQsIHVybCwgZW5jb2Rpbmc6ICJSRVNUIiB9OwogICAgICB9KTsKICAgICAgaWYgKGdldEt2cFVybCkgewogICAgICAgIHJlc291cmNlTGlua3MucHVzaCgKICAgICAgICAgIC4uLm91dHB1dEZvcm1hdHMubWFwKChmb3JtYXQpID0+ICh7CiAgICAgICAgICAgIGVuY29kaW5nOiAiS1ZQIiwKICAgICAgICAgICAgdXJsOiBnZXRLdnBVcmwsCiAgICAgICAgICAgIGZvcm1hdAogICAgICAgICAgfSkpCiAgICAgICAgKTsKICAgICAgfQogICAgICBjb25zdCBtYXRyaXhTZXRzID0gZmluZENoaWxkcmVuRWxlbWVudChlbGVtZW50LCAiVGlsZU1hdHJpeFNldExpbmsiKS5tYXAoCiAgICAgICAgcGFyc2VNYXRyaXhTZXRMaW5rCiAgICAgICk7CiAgICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBmaW5kQ2hpbGRyZW5FbGVtZW50KGVsZW1lbnQsICJEaW1lbnNpb24iKS5tYXAoCiAgICAgICAgKGVsZW1lbnQyKSA9PiB7CiAgICAgICAgICBjb25zdCBpZGVudGlmaWVyID0gZ2V0RWxlbWVudFRleHQoCiAgICAgICAgICAgIGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudDIsICJJZGVudGlmaWVyIikKICAgICAgICAgICk7CiAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBnZXRFbGVtZW50VGV4dCgKICAgICAgICAgICAgZmluZENoaWxkRWxlbWVudChlbGVtZW50MiwgIkRlZmF1bHQiKQogICAgICAgICAgKTsKICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGZpbmRDaGlsZHJlbkVsZW1lbnQoZWxlbWVudDIsICJWYWx1ZXMiKS5tYXAoCiAgICAgICAgICAgIGdldEVsZW1lbnRUZXh0CiAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuIHsgaWRlbnRpZmllciwgZGVmYXVsdFZhbHVlLCB2YWx1ZXMgfTsKICAgICAgICB9CiAgICAgICk7CiAgICAgIHJldHVybiB7CiAgICAgICAgbmFtZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiSWRlbnRpZmllciIpKSwKICAgICAgICB0aXRsZTogZ2V0RWxlbWVudFRleHQoZmluZENoaWxkRWxlbWVudChlbGVtZW50LCAiVGl0bGUiKSksCiAgICAgICAgYWJzdHJhY3Q6IGdldEVsZW1lbnRUZXh0KGZpbmRDaGlsZEVsZW1lbnQoZWxlbWVudCwgIkFic3RyYWN0IikpLAogICAgICAgIHN0eWxlcywKICAgICAgICByZXNvdXJjZUxpbmtzLAogICAgICAgIG1hdHJpeFNldHMsCiAgICAgICAgZGVmYXVsdFN0eWxlLAogICAgICAgIC4uLmxhdExvbkJvdW5kaW5nQm94ICYmIHsgbGF0TG9uQm91bmRpbmdCb3ggfSwKICAgICAgICAuLi5kaW1lbnNpb25zICYmIHsgZGltZW5zaW9ucyB9CiAgICAgIH07CiAgICB9KTsKICB9CiAgZnVuY3Rpb24gcGFyc2VGZWF0dXJlUHJvcHMoZ2V0RmVhdHVyZXNEb2MsIGZlYXR1cmVUeXBlRnVsbCwgc2VydmljZVZlcnNpb24pIHsKICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBnZXRSb290RWxlbWVudChnZXRGZWF0dXJlc0RvYyk7CiAgICBsZXQgbWVtYmVyczsKICAgIGlmIChzZXJ2aWNlVmVyc2lvbi5zdGFydHNXaXRoKCIyLjAiKSkgewogICAgICBtZW1iZXJzID0gZmluZENoaWxkcmVuRWxlbWVudChjb2xsZWN0aW9uLCAibWVtYmVyIikubWFwKAogICAgICAgIChwYXJlbnQpID0+IGdldENoaWxkcmVuRWxlbWVudChwYXJlbnQpWzBdCiAgICAgICk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCBtZW1iZXJzUm9vdCA9IGZpbmRDaGlsZEVsZW1lbnQoY29sbGVjdGlvbiwgImZlYXR1cmVNZW1iZXJzIik7CiAgICAgIG1lbWJlcnMgPSBtZW1iZXJzUm9vdCA/IGdldENoaWxkcmVuRWxlbWVudChtZW1iZXJzUm9vdCkgOiBmaW5kQ2hpbGRyZW5FbGVtZW50KGNvbGxlY3Rpb24sICJmZWF0dXJlTWVtYmVyIikubWFwKAogICAgICAgIChwYXJlbnQpID0+IGdldENoaWxkcmVuRWxlbWVudChwYXJlbnQpWzBdCiAgICAgICk7CiAgICB9CiAgICBjb25zdCBpZEF0dHIgPSBzZXJ2aWNlVmVyc2lvbiA9PT0gIjEuMC4wIiA/ICJmaWQiIDogImdtbDppZCI7CiAgICBmdW5jdGlvbiBpc0VsZW1lbnRQcm9wZXJ0eShwcm9wTmFtZSkgewogICAgICByZXR1cm4gcHJvcE5hbWUgaW4gZmVhdHVyZVR5cGVGdWxsLnByb3BlcnRpZXM7CiAgICB9CiAgICBmdW5jdGlvbiBwYXJzZUVsZW1lbnRQcm9wZXJ0eVZhbHVlKHByb3BOYW1lLCB2YWx1ZUFzU3RyaW5nKSB7CiAgICAgIGNvbnN0IHR5cGUgPSBmZWF0dXJlVHlwZUZ1bGwucHJvcGVydGllc1twcm9wTmFtZV07CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgImludGVnZXIiOgogICAgICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlQXNTdHJpbmcpOwogICAgICAgIGNhc2UgImZsb2F0IjoKICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlQXNTdHJpbmcpOwogICAgICAgIGNhc2UgImJvb2xlYW4iOgogICAgICAgICAgcmV0dXJuIHZhbHVlQXNTdHJpbmcgPT09ICJ0cnVlIjsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuIHZhbHVlQXNTdHJpbmc7CiAgICAgIH0KICAgIH0KICAgIGZ1bmN0aW9uIGdldFByb3BlcnRpZXMobWVtYmVyRWwpIHsKICAgICAgcmV0dXJuIGdldENoaWxkcmVuRWxlbWVudChtZW1iZXJFbCkuZmlsdGVyKChlbCkgPT4gaXNFbGVtZW50UHJvcGVydHkoc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUoZWwpKSkpLnJlZHVjZSgocHJldiwgY3VycikgPT4gewogICAgICAgIGNvbnN0IHByb3BOYW1lID0gc3RyaXBOYW1lc3BhY2UoZ2V0RWxlbWVudE5hbWUoY3VycikpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5wcmV2LAogICAgICAgICAgW3Byb3BOYW1lXTogcGFyc2VFbGVtZW50UHJvcGVydHlWYWx1ZShwcm9wTmFtZSwgZ2V0RWxlbWVudFRleHQoY3VycikpCiAgICAgICAgfTsKICAgICAgfSwge30pOwogICAgfQogICAgcmV0dXJuIG1lbWJlcnMubWFwKChlbCkgPT4gKHsKICAgICAgaWQ6IGdldEVsZW1lbnRBdHRyaWJ1dGUoZWwsIGlkQXR0ciksCiAgICAgIHByb3BlcnRpZXM6IGdldFByb3BlcnRpZXMoZWwpCiAgICB9KSk7CiAgfQogIGZ1bmN0aW9uIGNvbXB1dGVGZWF0dXJlUHJvcHNEZXRhaWxzKGZlYXR1cmVzV2l0aFByb3BzKSB7CiAgICByZXR1cm4gZmVhdHVyZXNXaXRoUHJvcHMucmVkdWNlKChwcmV2LCBjdXJyKSA9PiB7CiAgICAgIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gY3Vyci5wcm9wZXJ0aWVzKSB7CiAgICAgICAgY29uc3QgcHJvcFZhbHVlID0gY3Vyci5wcm9wZXJ0aWVzW3Byb3BOYW1lXTsKICAgICAgICBpZiAoIShwcm9wTmFtZSBpbiBwcmV2KSkgewogICAgICAgICAgcHJldltwcm9wTmFtZV0gPSB7IHVuaXF1ZVZhbHVlczogW10gfTsKICAgICAgICB9CiAgICAgICAgY29uc3QgdW5pcXVlVmFsdWUgPSBwcmV2W3Byb3BOYW1lXS51bmlxdWVWYWx1ZXMuZmluZCgKICAgICAgICAgICh2KSA9PiB2LnZhbHVlID09PSBwcm9wVmFsdWUKICAgICAgICApOwogICAgICAgIGlmICh1bmlxdWVWYWx1ZSkKICAgICAgICAgIHVuaXF1ZVZhbHVlLmNvdW50Kys7CiAgICAgICAgZWxzZQogICAgICAgICAgcHJldltwcm9wTmFtZV0udW5pcXVlVmFsdWVzLnB1c2goeyB2YWx1ZTogcHJvcFZhbHVlLCBjb3VudDogMSB9KTsKICAgICAgfQogICAgICByZXR1cm4gcHJldjsKICAgIH0sIHt9KTsKICB9CiAgZnVuY3Rpb24gZ2VuZXJhdGVHZXRGZWF0dXJlVXJsKHNlcnZpY2VVcmwsIHZlcnNpb24sIGZlYXR1cmVUeXBlLCBvdXRwdXRGb3JtYXQsIG1heEZlYXR1cmVzLCBhdHRyaWJ1dGVzLCBoaXRzT25seSwgb3V0cHV0Q3JzLCBleHRlbnQsIGV4dGVudENycywgc3RhcnRJbmRleCkgewogICAgY29uc3QgdHlwZVBhcmFtID0gdmVyc2lvbiA9PT0gIjIuMC4wIiA/ICJUWVBFTkFNRVMiIDogIlRZUEVOQU1FIjsKICAgIGNvbnN0IGNvdW50UGFyYW0gPSB2ZXJzaW9uID09PSAiMi4wLjAiID8gIkNPVU5UIiA6ICJNQVhGRUFUVVJFUyI7CiAgICBjb25zdCBuZXdQYXJhbXMgPSB7CiAgICAgIFNFUlZJQ0U6ICJXRlMiLAogICAgICBSRVFVRVNUOiAiR2V0RmVhdHVyZSIsCiAgICAgIFZFUlNJT046IHZlcnNpb24sCiAgICAgIFt0eXBlUGFyYW1dOiBmZWF0dXJlVHlwZQogICAgfTsKICAgIGlmIChvdXRwdXRGb3JtYXQgIT09IHZvaWQgMCkKICAgICAgbmV3UGFyYW1zLk9VVFBVVEZPUk1BVCA9IG91dHB1dEZvcm1hdDsKICAgIGlmIChhdHRyaWJ1dGVzICE9PSB2b2lkIDApCiAgICAgIG5ld1BhcmFtcy5QUk9QRVJUWU5BTUUgPSBhdHRyaWJ1dGVzLmpvaW4oIiwiKTsKICAgIGlmIChoaXRzT25seSkgewogICAgICBuZXdQYXJhbXMuUkVTVUxUVFlQRSA9ICJoaXRzIjsKICAgICAgbmV3UGFyYW1zW2NvdW50UGFyYW1dID0gIjEiOwogICAgfSBlbHNlIGlmIChtYXhGZWF0dXJlcyAhPT0gdm9pZCAwKQogICAgICBuZXdQYXJhbXNbY291bnRQYXJhbV0gPSBtYXhGZWF0dXJlcy50b1N0cmluZygxMCk7CiAgICBpZiAob3V0cHV0Q3JzKSB7CiAgICAgIG5ld1BhcmFtcy5TUlNOQU1FID0gb3V0cHV0Q3JzOwogICAgfQogICAgaWYgKGV4dGVudCkgewogICAgICBjb25zdCBleHRlbnRKb2luZWQgPSBleHRlbnQuam9pbigiLCIpOwogICAgICBuZXdQYXJhbXMuQkJPWCA9IGV4dGVudENycyA/IGAke2V4dGVudEpvaW5lZH0sJHtleHRlbnRDcnN9YCA6IGV4dGVudEpvaW5lZDsKICAgIH0KICAgIGlmIChzdGFydEluZGV4KSB7CiAgICAgIG5ld1BhcmFtcy5TVEFSVElOREVYID0gc3RhcnRJbmRleC50b1N0cmluZygxMCk7CiAgICB9CiAgICByZXR1cm4gc2V0UXVlcnlQYXJhbXMoc2VydmljZVVybCwgbmV3UGFyYW1zKTsKICB9CiAgYWRkVGFza0hhbmRsZXIoCiAgICAicGFyc2VXbXNDYXBhYmlsaXRpZXMiLAogICAgZ2xvYmFsVGhpcywKICAgICh7IHVybCB9KSA9PiBxdWVyeVhtbERvY3VtZW50KHVybCkudGhlbigoeG1sRG9jKSA9PiBjaGVjayh4bWxEb2MsIHVybCkpLnRoZW4oKHhtbERvYykgPT4gKHsKICAgICAgaW5mbzogcmVhZEluZm9Gcm9tQ2FwYWJpbGl0aWVzJDIoeG1sRG9jKSwKICAgICAgbGF5ZXJzOiByZWFkTGF5ZXJzRnJvbUNhcGFiaWxpdGllcyQxKHhtbERvYyksCiAgICAgIHVybDogcmVhZE9wZXJhdGlvblVybHNGcm9tQ2FwYWJpbGl0aWVzJDEoeG1sRG9jKSwKICAgICAgdmVyc2lvbjogcmVhZFZlcnNpb25Gcm9tQ2FwYWJpbGl0aWVzJDEoeG1sRG9jKQogICAgfSkpCiAgKTsKICBhZGRUYXNrSGFuZGxlcigKICAgICJwYXJzZVdmc0NhcGFiaWxpdGllcyIsCiAgICBnbG9iYWxUaGlzLAogICAgKHsgdXJsIH0pID0+IHF1ZXJ5WG1sRG9jdW1lbnQodXJsKS50aGVuKCh4bWxEb2MpID0+IGNoZWNrKHhtbERvYywgdXJsKSkudGhlbigoeG1sRG9jKSA9PiAoewogICAgICBpbmZvOiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMkMSh4bWxEb2MpLAogICAgICBmZWF0dXJlVHlwZXM6IHJlYWRGZWF0dXJlVHlwZXNGcm9tQ2FwYWJpbGl0aWVzKHhtbERvYyksCiAgICAgIHVybDogcmVhZE9wZXJhdGlvblVybHNGcm9tQ2FwYWJpbGl0aWVzKHhtbERvYyksCiAgICAgIHZlcnNpb246IHJlYWRWZXJzaW9uRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpCiAgICB9KSkKICApOwogIGFkZFRhc2tIYW5kbGVyKAogICAgInF1ZXJ5V2ZzRmVhdHVyZVR5cGVEZXRhaWxzIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoewogICAgICB1cmwsCiAgICAgIHNlcnZpY2VWZXJzaW9uLAogICAgICBmZWF0dXJlVHlwZUZ1bGwKICAgIH0pID0+IHsKICAgICAgY29uc3QgZ2V0RmVhdHVyZVVybCA9IGdlbmVyYXRlR2V0RmVhdHVyZVVybCgKICAgICAgICB1cmwsCiAgICAgICAgc2VydmljZVZlcnNpb24sCiAgICAgICAgZmVhdHVyZVR5cGVGdWxsLm5hbWUsCiAgICAgICAgdm9pZCAwLAogICAgICAgIHZvaWQgMCwKICAgICAgICBPYmplY3Qua2V5cyhmZWF0dXJlVHlwZUZ1bGwucHJvcGVydGllcykKICAgICAgKTsKICAgICAgcmV0dXJuIHF1ZXJ5WG1sRG9jdW1lbnQoZ2V0RmVhdHVyZVVybCkudGhlbigoZ2V0RmVhdHVyZURvYykgPT4gKHsKICAgICAgICBwcm9wczogY29tcHV0ZUZlYXR1cmVQcm9wc0RldGFpbHMoCiAgICAgICAgICBwYXJzZUZlYXR1cmVQcm9wcyhnZXRGZWF0dXJlRG9jLCBmZWF0dXJlVHlwZUZ1bGwsIHNlcnZpY2VWZXJzaW9uKQogICAgICAgICkKICAgICAgfSkpOwogICAgfQogICk7CiAgYWRkVGFza0hhbmRsZXIoCiAgICAidXBkYXRlRmV0Y2hPcHRpb25zIiwKICAgIGdsb2JhbFRoaXMsCiAgICAoeyBvcHRpb25zIH0pID0+IHsKICAgICAgc2V0RmV0Y2hPcHRpb25zKG9wdGlvbnMpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHt9KTsKICAgIH0KICApOwogIGFkZFRhc2tIYW5kbGVyKAogICAgInBhcnNlV210c0NhcGFiaWxpdGllcyIsCiAgICBnbG9iYWxUaGlzLAogICAgKHsgdXJsIH0pID0+IHF1ZXJ5WG1sRG9jdW1lbnQodXJsKS50aGVuKCh4bWxEb2MpID0+IGNoZWNrKHhtbERvYywgdXJsKSkudGhlbigoeG1sRG9jKSA9PiAoewogICAgICBpbmZvOiByZWFkSW5mb0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKSwKICAgICAgbGF5ZXJzOiByZWFkTGF5ZXJzRnJvbUNhcGFiaWxpdGllcyh4bWxEb2MpLAogICAgICBtYXRyaXhTZXRzOiByZWFkTWF0cml4U2V0c0Zyb21DYXBhYmlsaXRpZXMoeG1sRG9jKQogICAgfSkpCiAgKTsKfSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9d29ya2VyLVFoUElKQmhJLmpzLm1hcAo=",JR=typeof window<"u"&&window.Blob&&new Blob([atob(TG)],{type:"text/javascript;charset=utf-8"});function bae(a){let e;try{if(e=JR&&(window.URL||window.webkitURL).createObjectURL(JR),!e)throw"";const t=new Worker(e,{name:a==null?void 0:a.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+TG,{name:a==null?void 0:a.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}let nA;function vae(){return nA||(nA=new bae),nA}function xae(a){return yae("parseWmsCapabilities",vae(),{url:a})}/*! @rgrove/parse-xml v4.2.0 | ISC License | Copyright Ryan Grove */var W3=Object.defineProperty,wae=Object.getOwnPropertyDescriptor,Iae=Object.getOwnPropertyNames,Cae=Object.prototype.hasOwnProperty,Aae=(a,e)=>{for(var t in e)W3(a,t,{get:e[t],enumerable:!0})},Sae=(a,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Iae(e))!Cae.call(a,n)&&n!==t&&W3(a,n,{get:()=>e[n],enumerable:!(i=wae(e,n))||i.enumerable});return a},Tae=a=>Sae(W3({},"__esModule",{value:!0}),a),EG={};Aae(EG,{XmlCdata:()=>WG,XmlComment:()=>GG,XmlDeclaration:()=>OG,XmlDocument:()=>BG,XmlDocumentType:()=>FG,XmlElement:()=>O3,XmlError:()=>NG,XmlNode:()=>zn,XmlProcessingInstruction:()=>jS,XmlText:()=>G3,parseXml:()=>Fae});var MG=Tae(EG),rA="",Eae=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mae=class{constructor(a){if(this.k=this.u(a,!0),this.d=0,this.length=a.length,this.l=this.k!==this.length,this.h=a,this.l){let e=[];for(let t=0,i=0;i<this.k;++i)e[i]=t,t+=a.codePointAt(t)>65535?2:1;this.A=e}}get B(){return this.d>=this.k}u(a,e=this.l){return e?a.replace(Eae,"_").length:a.length}p(a=1){this.d=Math.min(this.k,this.d+a)}f(a=this.d){var e;return this.l?(e=this.A[a])!=null?e:1/0:a}G(a=1){let e=this.m(a);return this.p(a),e}v(a){let e=this.f(),t=this.h.slice(e,e+a);return this.p(this.u(t)),t}w(a){let{length:e,l:t,h:i}=this,n=this.f(),s=n;if(t)for(;s<e;){let r=i[s],l=r>="\uD800"&&r<="\uDBFF";if(l&&(r+=i[s+1]),!a(r))break;s+=l?2:1}else for(;s<e&&a(i[s]);)++s;return this.v(s-n)}b(a){let{length:e}=a,t=this.f();return a===this.h.slice(t,t+e)?(this.p(e===1?1:this.u(a)),a):rA}x(a){let e=this.h.slice(this.f()).search(a);return e>0?this.v(e):rA}s(a){let e=this.f(),t=this.h.indexOf(a,e);return t>0?this.v(t-e):rA}m(a=1){let{d:e,h:t}=this;return this.l?t.slice(this.f(e),this.f(e+a)):t.slice(e,e+a)}n(a=0){this.d=a>=0?Math.min(this.k,a):Math.max(0,this.d+a)}},Lae=/["&<]/,Rae=/['&<]/,kae=/\r\n|[\n\r\t]/g,Wae=/<|&|]]>/,Gae=Object.freeze(Object.assign(Object.create(null),{amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}));function LG(a){let e=a.codePointAt(0);return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57||e===45||e===46||e===183||e>=768&&e<=879||e===8255||e===8256||RG(a,e)}function RG(a,e=a.codePointAt(0)){return e>=97&&e<=122||e>=65&&e<=90||e===58||e===95||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e===8204||e===8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function Oae(a){return a==="#"||LG(a)}function Pae(a){let e=a.codePointAt(0);return e===32||e===9||e===10||e===13}function QR(a){return a>=32&&a<=55295||a===10||a===9||a===13||a>=57344&&a<=65533||a>=65536&&a<=1114111}var Id=class kG{constructor(){this.parent=null,this.start=-1,this.end=-1}get document(){var e,t;return(t=(e=this.parent)==null?void 0:e.document)!=null?t:null}get isRootNode(){return this.parent!==null&&this.parent===this.document&&this.type===kG.TYPE_ELEMENT}get preserveWhitespace(){var e;return!!((e=this.parent)!=null&&e.preserveWhitespace)}get type(){return""}toJSON(){let e={type:this.type};return this.isRootNode&&(e.isRootNode=!0),this.preserveWhitespace&&(e.preserveWhitespace=!0),this.start!==-1&&(e.start=this.start,e.end=this.end),e}};Id.TYPE_CDATA="cdata";Id.TYPE_COMMENT="comment";Id.TYPE_DOCUMENT="document";Id.TYPE_DOCUMENT_TYPE="doctype";Id.TYPE_ELEMENT="element";Id.TYPE_PROCESSING_INSTRUCTION="pi";Id.TYPE_TEXT="text";Id.TYPE_XML_DECLARATION="xmldecl";var zn=Id,G3=class extends zn{constructor(a=""){super(),this.text=a}get type(){return zn.TYPE_TEXT}toJSON(){return Object.assign(zn.prototype.toJSON.call(this),{text:this.text})}},WG=class extends G3{get type(){return zn.TYPE_CDATA}},GG=class extends zn{constructor(a=""){super(),this.content=a}get type(){return zn.TYPE_COMMENT}toJSON(){return Object.assign(zn.prototype.toJSON.call(this),{content:this.content})}},OG=class extends zn{constructor(a,e,t){super(),this.version=a,this.encoding=e??null,this.standalone=t??null}get type(){return zn.TYPE_XML_DECLARATION}toJSON(){let a=zn.prototype.toJSON.call(this);a.version=this.version;for(let e of["encoding","standalone"])this[e]!==null&&(a[e]=this[e]);return a}},O3=class PG extends zn{constructor(e,t=Object.create(null),i=[]){super(),this.name=e,this.attributes=t,this.children=i}get isEmpty(){return this.children.length===0}get preserveWhitespace(){let e=this;for(;e instanceof PG;){if("xml:space"in e.attributes)return e.attributes["xml:space"]==="preserve";e=e.parent}return!1}get text(){return this.children.map(e=>"text"in e?e.text:"").join("")}get type(){return zn.TYPE_ELEMENT}toJSON(){return Object.assign(zn.prototype.toJSON.call(this),{name:this.name,attributes:this.attributes,children:this.children.map(e=>e.toJSON())})}},BG=class extends zn{constructor(a=[]){super(),this.children=a}get document(){return this}get root(){for(let a of this.children)if(a instanceof O3)return a;return null}get text(){return this.children.map(a=>"text"in a?a.text:"").join("")}get type(){return zn.TYPE_DOCUMENT}toJSON(){return Object.assign(zn.prototype.toJSON.call(this),{children:this.children.map(a=>a.toJSON())})}},FG=class extends zn{constructor(a,e,t,i){super(),this.name=a,this.publicId=e??null,this.systemId=t??null,this.internalSubset=i??null}get type(){return zn.TYPE_DOCUMENT_TYPE}toJSON(){let a=zn.prototype.toJSON.call(this);a.name=this.name;for(let e of["publicId","systemId","internalSubset"])this[e]!==null&&(a[e]=this[e]);return a}},NG=class extends Error{constructor(a,e,t){let i=1,n="",s=1;for(let c=0;c<e;++c){let h=t[c];h===`
`?(i=1,n="",s+=1):(i+=1,n+=h)}let r=t.indexOf(`
`,e);n+=r===-1?t.slice(e):t.slice(e,r);let l=0;n.length>50&&(i<40?n=n.slice(0,50):(l=i-20,n=n.slice(l,i+30))),super(`${a} (line ${s}, column ${i})
  ${n}
`+" ".repeat(i-l+1)+`^
`),this.column=i,this.excerpt=n,this.line=s,this.name="XmlError",this.pos=e}},jS=class extends zn{constructor(a,e=""){super(),this.name=a,this.content=e}get type(){return zn.TYPE_PROCESSING_INSTRUCTION}toJSON(){return Object.assign(zn.prototype.toJSON.call(this),{name:this.name,content:this.content})}},$R="",Bae=class{constructor(a,e={}){let t=this.document=new BG;this.j=t,this.g=e,this.c=new Mae(a),this.g.includeOffsets&&(t.start=0,t.end=a.length),this.parse()}i(a,e){return a.parent=this.j,this.g.includeOffsets&&(a.start=this.c.f(e),a.end=this.c.f()),this.j.children.push(a),!0}y(a,e){let{children:t}=this.j,{length:i}=t;if(a=vv(a),i>0){let n=t[i-1];if((n==null?void 0:n.type)===zn.TYPE_TEXT){let s=n;return s.text+=a,this.g.includeOffsets&&(s.end=this.c.f()),!0}}return this.i(new G3(a),e)}H(){let a=Object.create(null);for(;this.e();){let e=this.q();if(!e)break;let t=this.t()&&this.I();if(t===!1)throw this.a("Attribute value expected");if(e in a)throw this.a(`Duplicate attribute: ${e}`);if(e==="xml:space"&&t!=="default"&&t!=="preserve")throw this.a('Value of the `xml:space` attribute must be "default" or "preserve"');a[e]=t}if(this.g.sortAttributes){let e=Object.keys(a).sort(),t=Object.create(null);for(let i=0;i<e.length;++i){let n=e[i];t[n]=a[n]}a=t}return a}I(){let{c:a}=this,e=a.m();if(e!=='"'&&e!=="'")return!1;a.p();let t,i=!1,n=$R,s=e==='"'?Lae:Rae;e:for(;!a.B;)switch(t=a.x(s),t&&(this.o(t),n+=t.replace(kae," ")),a.m()){case e:i=!0;break e;case"&":n+=this.C();continue;case"<":throw this.a("Unescaped `<` is not allowed in an attribute value");default:break e}if(!i)throw this.a("Unclosed attribute");return a.p(),n}J(){let{c:a}=this,e=a.d;if(!a.b("<![CDATA["))return!1;let t=a.s("]]>");if(this.o(t),!a.b("]]>"))throw this.a("Unclosed CDATA section");return this.g.preserveCdata?this.i(new WG(vv(t)),e):this.y(t,e)}K(){let{c:a}=this,e=a.d,t=a.x(Wae);if(!t)return!1;if(this.o(t),a.m(3)==="]]>")throw this.a("Element content may not contain the CDATA section close delimiter `]]>`");return this.y(t,e)}D(){let{c:a}=this,e=a.d;if(!a.b("<!--"))return!1;let t=a.s("--");if(this.o(t),!a.b("-->"))throw a.m(2)==="--"?this.a("The string `--` isn't allowed inside a comment"):this.a("Unclosed comment");return this.g.preserveComments?this.i(new GG(vv(t)),e):!0}L(){let a=this.c.d,e=this.C();return e?this.y(e,a):!1}M(){let{c:a}=this,e=a.d;if(!a.b("<!DOCTYPE"))return!1;let t=this.e()&&this.q();if(!t)throw this.a("Expected a name");let i,n;if(this.e()){if(a.b("PUBLIC")){if(i=this.e()&&this.N(),i===!1)throw this.a("Expected a public identifier");this.e()}if(i!==void 0||a.b("SYSTEM")){if(this.e(),n=this.r(),n===!1)throw this.a("Expected a system identifier");this.e()}}let s;if(a.b("[")){if(s=a.x(/\][\x20\t\r\n]*>/),!a.b("]"))throw this.a("Unclosed internal subset");this.e()}if(!a.b(">"))throw this.a("Unclosed doctype declaration");return this.g.preserveDocumentType?this.i(new FG(t,i,n,s),e):!0}E(){let{c:a}=this,e=a.d;if(!a.b("<"))return!1;let t=this.q();if(!t)return a.n(e),!1;let i=this.H(),n=!!a.b("/>"),s=new O3(t,i);if(s.parent=this.j,!n){if(!a.b(">"))throw this.a(`Unclosed start tag for element \`${t}\``);this.j=s;do this.K();while(this.E()||this.L()||this.J()||this.F()||this.D());let r=a.d,l;if(!a.b("</")||!(l=this.q())||l!==t)throw a.n(r),this.a(`Missing end tag for element ${t}`);if(this.e(),!a.b(">"))throw this.a(`Unclosed end tag for element ${t}`);this.j=s.parent}return this.i(s,e)}t(){return this.e(),this.c.b("=")?(this.e(),!0):!1}z(){return this.D()||this.F()||this.e()}q(){return RG(this.c.m())?this.c.w(LG):$R}F(){let{c:a}=this,e=a.d;if(!a.b("<?"))return!1;let t=this.q();if(t){if(t.toLowerCase()==="xml")throw a.n(e),this.a("XML declaration isn't allowed here")}else throw this.a("Invalid processing instruction");if(!this.e()){if(a.b("?>"))return this.i(new jS(t),e);throw this.a("Whitespace is required after a processing instruction name")}let i=a.s("?>");if(this.o(i),!a.b("?>"))throw this.a("Unterminated processing instruction");return this.i(new jS(t,vv(i)),e)}O(){let{c:a}=this,e=a.d;for(this.P();this.z(););if(this.M())for(;this.z(););return e<a.d}N(){let a=this.c.d,e=this.r();if(e!==!1&&!/^[-\x20\r\na-zA-Z0-9'()+,./:=?;!*#@$_%]*$/.test(e))throw this.c.n(a),this.a("Invalid character in public identifier");return e}C(){let{c:a}=this;if(!a.b("&"))return!1;let e=a.w(Oae);if(a.G()!==";")throw this.a("Unterminated reference (a reference must end with `;`)");let t;if(e[0]==="#"){let i=e[1]==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10);if(isNaN(i))throw this.a("Invalid character reference");if(!QR(i))throw this.a("Character reference resolves to an invalid character");t=String.fromCodePoint(i)}else if(t=Gae[e],t===void 0){let{ignoreUndefinedEntities:i,resolveUndefinedEntity:n}=this.g,s=`&${e};`;if(n){let r=n(s);if(r!=null){let l=typeof r;if(l!=="string")throw new TypeError(`\`resolveUndefinedEntity()\` must return a string, \`null\`, or \`undefined\`, but returned a value of type ${l}`);return r}}if(i)return s;throw a.n(-s.length),this.a(`Named entity isn't defined: ${s}`)}return t}r(){let{c:a}=this,e=a.b('"')||a.b("'");if(!e)return!1;let t=a.s(e);if(this.o(t),!a.b(e))throw this.a("Missing end quote");return t}e(){return!!this.c.w(Pae)}P(){let{c:a}=this,e=a.d;if(!a.b("<?xml"))return!1;if(!this.e())throw this.a("Invalid XML declaration");let t=!!a.b("version")&&this.t()&&this.r();if(t===!1)throw this.a("XML version is missing or invalid");if(!/^1\.[0-9]+$/.test(t))throw this.a("Invalid character in version number");let i,n;if(this.e()){if(i=!!a.b("encoding")&&this.t()&&this.r(),i){if(!/^[A-Za-z][\w.-]*$/.test(i))throw this.a("Invalid character in encoding name");this.e()}if(n=!!a.b("standalone")&&this.t()&&this.r(),n){if(n!=="yes"&&n!=="no")throw this.a('Only "yes" and "no" are permitted as values of `standalone`');this.e()}}if(!a.b("?>"))throw this.a("Invalid or unclosed XML declaration");return this.g.preserveXmlDeclaration?this.i(new OG(t,i||void 0,n||void 0),e):!0}a(a){let{c:e}=this;return new NG(a,e.d,e.h)}parse(){if(this.c.b("\uFEFF"),this.O(),!this.E())throw this.a("Root element is missing or invalid");for(;this.z(););if(!this.c.B)throw this.a("Extra content at the end of the document")}o(a){let{length:e}=a;for(let t=0;t<e;++t){let i=a.codePointAt(t);if(!QR(i))throw this.c.n(-([...a].length-t)),this.a("Invalid character");i>65535&&(t+=1)}}};function vv(a){let e=0;for(;(e=a.indexOf("\r",e))!==-1;)a=a[e+1]===`
`?a.slice(0,e)+a.slice(e+1):a.slice(0,e)+`
`+a.slice(e+1);return a}function Fae(a,e){return new Bae(a,e).document}class Nae extends Error{constructor(e){super(e)}}function Dae(a){let e=null;try{e=MG.parseXml(a)}catch(t){throw new Nae(t.message)}return e}function lc(a){const e=a.indexOf(":");return e>-1?a.substr(e+1):a}function Gr(a){return a.children[0]}function uc(a){return a.name||""}function ei(a,e,t=!1){const i=lc(e);function n(s,r){return lc(uc(r))===i&&s.push(r),t&&Array.isArray(r.children)?[...s,...r.children.reduce(n,[])]:s}return a&&Array.isArray(a.children)?a.children.reduce(n,[]):[]}function Ke(a,e,t=!1){return ei(a,e,t)[0]||null}function Hu(a){return a&&Array.isArray(a.children)?[...a.children.filter(e=>e instanceof MG.XmlElement)]:[]}function wt(a){const e=a&&Array.isArray(a.children)?a.children.find(t=>t.type==="text"):null;return e?e.text:""}function Ei(a,e){return a&&a.attributes[e]||""}class d2 extends Error{constructor(e,t,i){super(e),this.httpStatus=t,this.isCrossOriginRelated=i,this.name="EndpointError"}}class DG extends Error{constructor(e,t,i,n,s){super(e),this.requestUrl=t,this.code=i,this.locator=n,this.response=s,this.name="ServiceExceptionError"}}function e9(a,e){const t=Ei(a,"code")||Ei(a,"exceptionCode"),i=Ei(a,"locator"),n=Ke(a,"ExceptionText")||a,s=wt(n).trim();return new DG(s,e,t,i,a.document)}function P3(a,e){const t=Gr(a),i=lc(uc(t));if(i==="ServiceExceptionReport"){const n=Ke(t,"ServiceException");if(n)throw e9(n,e)}if(i==="ExceptionReport"){const n=Ke(t,"Exception");if(n)throw e9(n,e)}return a}function Vae(a){const e={message:a.message,stack:a.stack,name:a.name};return a instanceof DG?{...e,code:a.code,locator:a.locator,response:a.response,requestUrl:a.requestUrl}:a instanceof d2?{...e,httpStatus:a.httpStatus,isCrossOriginRelated:a.isCrossOriginRelated}:e}const t9=["utf-8","utf-16","iso-8859-1"],a9="utf-8";function Zae(a){const e=/charset=([^;]+)/.exec(a);return e?e[1]:null}function zae(a,e){const t=e?Zae(e):null,i=t?[t,...t9]:t9;for(const n of i)try{return new TextDecoder(n,{fatal:!0}).decode(a)}catch{}return console.warn(`[ogc-client] XML document encoding could not be determined, falling back to ${a9}.`),new TextDecoder(a9).decode(a)}const xv=new Map;let VG={};function Uae(a){VG=a}function ZG(){return VG}function Xae(a,e="GET",t){let i=`${e}#${a}`;if(t&&(i=`${e}#asJson#${a}`),xv.has(i))return xv.get(i);const n={...ZG()};n.method=e,t&&(n.headers="headers"in n?n.headers:{},n.headers.Accept="application/json");const s=fetch(a,n).catch(r=>r).then(r=>(xv.delete(i),r));return xv.set(i,s),s.then(r=>{if(r instanceof Error)throw r;return r})}function Kw(a){return Xae(a).catch(()=>fetch(a,{...ZG(),method:"HEAD",mode:"no-cors"}).catch(e=>{throw new d2(`Fetching the document failed either due to network errors or unreachable host, error is: ${e.message}`,0,!1)}).then(()=>{throw new d2("The document could not be fetched due to CORS limitations",0,!0)})).then(async e=>{if(!e.ok){const n=await e.text();throw new d2(`Received an error with code ${e.status}: ${n}`,e.status,!1)}const t=await e.arrayBuffer(),i=e.headers.get("Content-Type");return zae(t,i)}).then(e=>Dae(e))}function j0(a,e){const t=a.match(/(https?%3A%2F%2F[^/]+)$/);if(t){const l=t[1],c=j0(decodeURIComponent(l),e);return a.replace(l,encodeURIComponent(c))}const i=new URL(a),n=Object.keys(e),s=n.map(l=>l.toLowerCase()),r=[];for(const l of i.searchParams.keys())s.indexOf(l.toLowerCase())>-1&&r.push(l);return r.map(l=>i.searchParams.delete(l)),n.forEach(l=>i.searchParams.set(l,e[l]===!0?"":e[l])),i.toString()}let Hae=1e3*60*60;function Yae(){return Hae}let N_;function qw(){return N_!==void 0?N_:"caches"in globalThis?(N_=caches.open("ogc-client").catch(a=>(console.info("[ogc-client] Cache could not be accessed for the following reason:",a),null)),N_):(N_=Promise.resolve(null),N_)}async function Kae(a,...e){const t=await qw();if(!t)return;const i="https://cache/"+e.join("/");try{await t.put(i,new Response(JSON.stringify(a),{headers:{"x-expiry":(Date.now()+Yae()).toString(10)}}))}catch(n){console.info("[ogc-client] Caching failed once for the following reason and will not be retried:",n),N_=Promise.resolve(null)}}async function qae(...a){const e=await qw();if(!e)return;const t="https://cache/"+a.join("/");return e.match(t).then(i=>!!i&&parseInt(i.headers.get("x-expiry"))>Date.now())}async function jae(...a){const e=await qw();if(!e)return;const t="https://cache/"+a.join("/"),i=await e.match(t);return i?i.clone().json():null}const wv=new Map;async function Jae(a,...e){if(await Qae(),await qae(...e))return jae(...e);const t=e.join("#");if(wv.has(t))return wv.get(t);const i=a();i instanceof Promise&&(i.then(()=>wv.delete(t)),wv.set(t,i));const n=await i;return await Kae(n,...e),n}async function Qae(){const a=await qw();if(!a)return;const e=await a.keys();for(const t of e){const i=await a.match(t);parseInt(i.headers.get("x-expiry"))<=Date.now()&&await a.delete(t)}}function $ae(a,e,t,i,n,s,r,l,c,h,g){const b=e==="2.0.0"?"TYPENAMES":"TYPENAME",v=e==="2.0.0"?"COUNT":"MAXFEATURES",C={SERVICE:"WFS",REQUEST:"GetFeature",VERSION:e,[b]:t};if(i!==void 0&&(C.OUTPUTFORMAT=i),s!==void 0&&(C.PROPERTYNAME=s.join(",")),r?(C.RESULTTYPE="hits",C[v]="1"):n!==void 0&&(C[v]=n.toString(10)),l&&(C.SRSNAME=l),c){const S=c.join(",");C.BBOX=h?`${S},${h}`:S}return g&&(C.STARTINDEX=g.toString(10)),j0(a,C)}function eie(a,e,t,i,n,s,r,l,c){const h=e==="1.3.0"?"CRS":"SRS",g={SERVICE:"WMS",REQUEST:"GetMap",VERSION:e,LAYERS:t,STYLES:c??""};return g.WIDTH=i.toString(),g.HEIGHT=n.toString(),g.FORMAT=l??"image/png",g[h]=s,g.BBOX=r.join(","),j0(a,g)}class tie{constructor(e){_a(this,"_capabilitiesUrl");_a(this,"_capabilitiesPromise");_a(this,"_info");_a(this,"_layers");_a(this,"_url");_a(this,"_version");this._capabilitiesUrl=j0(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"}),this._capabilitiesPromise=Jae(()=>xae(this._capabilitiesUrl),"WMS","CAPABILITIES",this._capabilitiesUrl).then(({info:t,layers:i,url:n,version:s})=>{this._info=t,this._layers=i,this._url=n,this._version=s})}isReady(){return this._capabilitiesPromise.then(()=>this)}getServiceInfo(){return this._info}getLayers(){function e(t){return{title:t.title,name:t.name,abstract:t.abstract,..."children"in t&&{children:t.children.map(e)}}}return this._layers.map(e)}getLayerByName(e){let t=null;function i(n){if(t===null){if(n.name===e){t=n;return}"children"in n&&n.children.map(i)}}return this._layers.map(i),t}getSingleLayerName(){if(!this._layers)return null;const e=[];function t(i){i.name&&e.push(i),"children"in i&&i.children.map(t)}return this._layers.map(t),e.length===1?e[0].name:null}getVersion(){return this._version}getMapUrl(e,t){if(!this._layers)return null;const{widthPx:i,heightPx:n,crs:s,extent:r,outputFormat:l,styles:c}=t;return eie(this.getOperationUrl("GetMap")||this._capabilitiesUrl,this._version,e.join(","),i,n,s,r,l,c!==void 0?c.join(","):"")}getCapabilitiesUrl(){const e=this.getOperationUrl("GetCapabilities");return e?j0(e,{SERVICE:"WMS",REQUEST:"GetCapabilities"}):this._capabilitiesUrl}getOperationUrl(e,t="Get"){var i;return this._url?(i=this._url[e])==null?void 0:i[t]:null}}function T1(a,e,t){const i=typeof WorkerGlobalScope<"u",n=async s=>{if(s.taskName===a){let r,l;try{r=await t(s.params)}catch(h){l=Vae(h)}const c={taskName:a,requestId:s.requestId,...r&&{response:r},...l&&{error:l}};i?e.postMessage(c):e.dispatchEvent(new CustomEvent("ogc-client.response",{detail:c}))}};i?e.addEventListener("message",s=>n(s.data)):e.addEventListener("ogc-client.request",s=>n(s.detail))}const aie=["EPSG:4046","EPSG:4075","EPSG:4120","EPSG:4122","EPSG:4124","EPSG:4126","EPSG:4149","EPSG:4151","EPSG:4153","EPSG:4155","EPSG:4157","EPSG:4159","EPSG:4161","EPSG:4163","EPSG:4165","EPSG:4167","EPSG:4169","EPSG:4171","EPSG:4173","EPSG:4175","EPSG:4178","EPSG:4180","EPSG:4182","EPSG:4184","EPSG:4188","EPSG:4190","EPSG:4191","EPSG:4196","EPSG:4198","EPSG:4202","EPSG:4210","EPSG:4211","EPSG:4214","EPSG:4226","EPSG:4229","EPSG:4231","EPSG:4233","EPSG:4236","EPSG:4238","EPSG:4240","EPSG:4242","EPSG:4244","EPSG:4246","EPSG:4248","EPSG:4250","EPSG:4252","EPSG:4255","EPSG:4258","EPSG:4261","EPSG:4264","EPSG:4267","EPSG:4270","EPSG:4273","EPSG:4276","EPSG:4279","EPSG:4281","EPSG:4284","EPSG:4286","EPSG:4288","EPSG:4292","EPSG:4295","EPSG:4297","EPSG:4299","EPSG:4302","EPSG:4324","EPSG:4326"];function iie(a){return aie.indexOf(JS(a))>-1}function JS(a){return/^urn:(?:x-)?ogc:def:crs:epsg:/.test(a.toLowerCase())?`EPSG:${/([0-9]+)$/.exec(a)[1]}`:a}function nie(a){const e={},t=Ke(Gr(a),"Capability"),i=Ke(t,"Request");return Hu(i).forEach(n=>{const s=lc(uc(n));e[s]=cie(n)}),e}function zG(a){return Gr(a).attributes.version}function rie(a){const e=zG(a),t=Ke(Gr(a),"Capability");return ei(t,"Layer").map(i=>UG(i,e))}function sie(a){const e=Ke(Gr(a),"Capability"),t=Ke(Ke(e,"Request"),"GetMap");return ei(t,"Format").map(wt)}function oie(a){const e=Ke(Gr(a),"Capability"),t=Ke(Ke(e,"Request"),"GetFeatureInfo");return ei(t,"Format").map(wt)}function lie(a){const e=Ke(Gr(a),"Capability"),t=Ke(e,"Exception");return ei(t,"Format").map(wt)}function uie(a){const e=Ke(Gr(a),"Service"),t=sie(a),i=oie(a),n=lie(a),s=ei(Ke(e,"KeywordList"),"Keyword").map(wt).filter((l,c,h)=>h.indexOf(l)===c),r=_ie(a);return{title:wt(Ke(e,"Title")),name:wt(Ke(e,"Name")),abstract:wt(Ke(e,"Abstract")),outputFormats:t,infoFormats:i,exceptionFormats:n,fees:wt(Ke(e,"Fees")),constraints:wt(Ke(e,"AccessConstraints")),provider:r,keywords:s}}function cie(a){const e={};return ei(a,"DCPType").flatMap(s=>Ke(s,"HTTP")).flatMap(s=>Hu(s)).forEach(s=>{const r=Ke(s,"OnlineResource"),l=lc(uc(s));e[l]=Ei(r,"xlink:href")}),e}function UG(a,e,t=[],i=[],n=null,s=null,r=null,l=null){const c=e==="1.3.0"?"CRS":"SRS",h=ei(a,c).map(wt),g=h.length>0?h:t,b=ei(a,"Style").map(die),v=b.length>0?b:i;function C(Be){const Me=Ei(Be,c);return(iie(Me)&&e==="1.3.0"?["miny","minx","maxy","maxx"]:["minx","miny","maxx","maxy"]).map(Je=>Ei(Be,Je))}function S(Be){return["westBoundLongitude","southBoundLatitude","eastBoundLongitude","northBoundLatitude"].map(Me=>wt(Ke(Be,Me)))}function L(Be){return["minx","miny","maxx","maxy"].map(Me=>Ei(Be,Me))}function R(Be,Me){return Be===""?Me:Math.sqrt(.5*parseFloat(Be)**2)/28e-5}function G(){const Be=Ke(a,"ScaleHint");if(!Be)return[l,r];const Me=Ei(Be,"min"),ke=Ei(Be,"max");return[R(Me,l),R(ke,r)]}function O(Be,Me){const ke=wt(Ke(a,Be));return ke===""?Me:parseFloat(ke)}const V=Ke(a,"Attribution"),B=V!==null?hie(V):n,z=e==="1.3.0"?Ke(a,"EX_GeographicBoundingBox"):Ke(a,"LatLonBoundingBox"),j={};z&&(j["EPSG:4326"]=e==="1.3.0"?S(z):L(z));let re=ei(a,"BoundingBox").reduce((Be,Me)=>({...Be,[Ei(Me,c)]:C(Me)}),j);re=Object.keys(re).length>0||s===null?re:s;const ne=a.attributes.queryable==="1"||a.attributes.queryable==="true",te=a.attributes.opaque==="1"||a.attributes.opaque==="true",le=ei(Ke(a,"KeywordList"),"Keyword").map(wt).filter((Be,Me,ke)=>ke.indexOf(Be)===Me);let ue,fe;e==="1.3.0"?(ue=O("MinScaleDenominator",l),fe=O("MaxScaleDenominator",r)):[ue,fe]=G();const be=ei(a,"MetadataURL").map(Be=>({type:Ei(Be,"type"),format:wt(Ke(Be,"Format")),url:Ei(Ke(Be,"OnlineResource"),"xlink:href")})),Pe=ei(a,"Layer").map(Be=>UG(Be,e,g,v,B,re,fe,ue));return{name:wt(Ke(a,"Name")),title:wt(Ke(a,"Title")),abstract:wt(Ke(a,"Abstract")),availableCrs:g,styles:v,attribution:B,boundingBoxes:re,keywords:le,queryable:ne,opaque:te,...ue!==null?{minScaleDenominator:ue}:{},...fe!==null?{maxScaleDenominator:fe}:{},...be.length&&{metadata:be},...Pe.length&&{children:Pe}}}function die(a){const e=Ei(Ke(Ke(a,"LegendURL"),"OnlineResource"),"xlink:href"),t=wt(Ke(a,"Abstract"));return{name:wt(Ke(a,"Name")),title:wt(Ke(a,"Title")),...t&&{abstract:t},...e&&{legendUrl:e}}}function hie(a){const e=Ei(Ke(Ke(a,"LogoURL"),"OnlineResource"),"xlink:href"),t=Ei(Ke(a,"OnlineResource"),"xlink:href"),i=wt(Ke(a,"Title"));return{...i&&{title:i},...t&&{url:t},...e&&{logoUrl:e}}}function _ie(a){const e=Ke(Gr(a),"Service"),t=Ke(e,"ContactInformation"),i=Ke(t,"ContactPersonPrimary"),n=Ke(t,"ContactAddress");return{contact:{name:wt(Ke(i,"ContactPerson")),organization:wt(Ke(i,"ContactOrganization")),position:wt(Ke(t,"ContactPosition")),phone:wt(Ke(t,"ContactVoiceTelephone")),fax:wt(Ke(t,"ContactFacsimileTelephone")),address:{deliveryPoint:wt(Ke(n,"Address")),city:wt(Ke(n,"City")),administrativeArea:wt(Ke(n,"StateOrProvince")),postalCode:wt(Ke(n,"PostCode")),country:wt(Ke(n,"Country"))},email:wt(Ke(t,"ContactElectronicMailAddress"))}}}function XG(a){const e=Ke(Gr(a),"ServiceProvider"),t=Ke(e,"ServiceContact"),i=Ke(t,"ContactInfo"),n=Ke(i,"Phone"),s=Ke(i,"Address");return{name:wt(Ke(e,"ProviderName")),site:Ei(Ke(e,"ProviderSite"),"xlink:href"),contact:{name:wt(Ke(t,"IndividualName")),position:wt(Ke(t,"PositionName")),phone:wt(Ke(n,"Voice")),fax:wt(Ke(n,"Facsimile")),address:{deliveryPoint:wt(Ke(s,"DeliveryPoint")),city:wt(Ke(s,"City")),administrativeArea:wt(Ke(s,"AdministrativeArea")),postalCode:wt(Ke(s,"PostalCode")),country:wt(Ke(s,"Country"))},email:wt(Ke(s,"ElectronicMailAddress"))}}}function mie(a){const e={},t=Gr(a),i=Ke(t,"OperationsMetadata");if(i)ei(i,"Operation").forEach(n=>{const s=Ei(n,"name");e[s]=yie(n)});else{const n=Ke(t,"Capability"),s=Ke(n,"Request");Hu(s).forEach(r=>{const l=lc(uc(r));e[l]=fie(r)})}return e}function jw(a){return Gr(a).attributes.version}function HG(a){const e=jw(a);let t;if(e.startsWith("1.0")){const i=Ke(Ke(Ke(Gr(a),"Capability"),"Request"),"GetFeature");t=Hu(Ke(i,"ResultFormat")).map(uc)}else{const i=Ke(Gr(a),"OperationsMetadata"),n=ei(i,"Operation").find(r=>Ei(r,"name")==="GetFeature"),s=ei(n,"Parameter").find(r=>Ei(r,"name")==="outputFormat");t=ei(s,"Value",!0).map(wt)}return t}function gie(a){const e=jw(a),t=e.startsWith("1.0")?"Service":"ServiceIdentification",i=e.startsWith("1.0")?"Name":"ServiceType",n=Ke(Gr(a),t);let s;e.startsWith("1.0")?s=wt(Ke(n,"Keywords")).split(",").map(l=>l.trim()):s=ei(Ke(n,"Keywords"),"Keyword").map(wt);let r;return e!=="1.0.0"&&(r=XG(a)),{title:wt(Ke(n,"Title")),name:wt(Ke(n,i)),abstract:wt(Ke(n,"Abstract")),fees:wt(Ke(n,"Fees")),constraints:wt(Ke(n,"AccessConstraints")),keywords:s,provider:r,outputFormats:HG(a)}}function pie(a){const e=jw(a),t=HG(a),i=Ke(Gr(a),"FeatureTypeList");return ei(i,"FeatureType").map(n=>bie(n,e,t))}function fie(a){const e={};return ei(a,"DCPType").flatMap(s=>ei(s,"HTTP")).flatMap(s=>Hu(s)).forEach(s=>{const r=lc(uc(s));e[r]=Ei(s,"onlineResource")}),e}function yie(a){const e={};return ei(a,"DCP").flatMap(s=>Ke(s,"HTTP")).flatMap(s=>Hu(s)).forEach(s=>{const r=lc(uc(s));e[r]=Ei(s,"xlink:href")}),e}function bie(a,e,t){const i=e.startsWith("2.")?"CRS":"SRS",n=e.startsWith("1.0")?"SRS":`Default${i}`;function s(){const b=Ke(a,"LatLongBoundingBox");return["minx","miny","maxx","maxy"].map(v=>Ei(b,v)).map(parseFloat)}function r(){const b=Ke(a,"WGS84BoundingBox");return["LowerCorner","UpperCorner"].map(v=>Ke(b,v)).map(v=>wt(v).split(" ")).reduce((v,C)=>[...v,...C]).map(parseFloat)}const l=e.startsWith("1.0")?[]:ei(a,`Other${i}`).map(wt).map(JS),c=e.startsWith("1.0")?[]:ei(Ke(a,"OutputFormats"),"Format").map(wt),h=e.startsWith("1.0")?wt(Ke(a,"Keywords")).split(",").map(b=>b.trim()):ei(Ke(a,"Keywords"),"Keyword").map(wt).filter((b,v,C)=>C.indexOf(b)===v),g=e==="2.0.0"?ei(a,"MetadataURL").map(b=>({url:Ei(b,"xlink:href")})):ei(a,"MetadataURL").map(b=>({format:Ei(b,"format"),type:Ei(b,"type"),url:wt(b).trim()}));return{name:wt(Ke(a,"Name")),title:wt(Ke(a,"Title")),abstract:wt(Ke(a,"Abstract")),defaultCrs:JS(wt(Ke(a,n))),otherCrs:l,outputFormats:c.length>0?c:t,latLonBoundingBox:e.startsWith("1.0")?s():r(),keywords:h,...g.length&&{metadata:g}}}function YG(a){const e=["LowerCorner","UpperCorner"].map(t=>Ke(a,t)).map(t=>wt(t).split(" ")).reduce((t,i)=>[...t,...i]).map(parseFloat);return e.some(Number.isNaN)?null:e}function vie(a){const e=Gr(a),t=Ke(e,"ServiceIdentification"),i=ei(Ke(t,"Keywords"),"Keyword").map(wt),n=Ke(e,"OperationsMetadata"),s=ei(n,"Operation").find(l=>Ei(l,"name")=="GetTile"),r=ei(s,"Get",!0).reduce((l,c)=>{const h=wt(Ke(c,"Value",!0)),g=Ei(c,"xlink:href");return h.toLowerCase()==="restful"?{...l,rest:g}:{...l,kvp:g}},{});return{title:wt(Ke(t,"Title")),name:wt(Ke(t,"ServiceType")),abstract:wt(Ke(t,"Abstract")),fees:wt(Ke(t,"Fees")),constraints:wt(Ke(t,"AccessConstraints")),keywords:i,provider:XG(a),getTileUrls:r}}function xie(a){function e(n){const s=wt(Ke(n,"TopLeftCorner")).split(" ").map(parseFloat);return{identifier:wt(Ke(n,"Identifier")),tileWidth:parseInt(wt(Ke(n,"TileWidth"))),tileHeight:parseInt(wt(Ke(n,"TileHeight"))),matrixWidth:parseInt(wt(Ke(n,"MatrixWidth"))),matrixHeight:parseInt(wt(Ke(n,"MatrixHeight"))),scaleDenominator:parseFloat(wt(Ke(n,"ScaleDenominator"))),topLeft:s}}const t=Ke(Gr(a),"Contents");return ei(t,"TileMatrixSet").map(n=>{const s=wt(Ke(n,"WellKnownScaleSet")),r=YG(Ke(n,"BoundingBox"));return{identifier:wt(Ke(n,"Identifier")),crs:wt(Ke(n,"SupportedCRS")),tileMatrices:ei(n,"TileMatrix").map(e),...r&&{boundingBox:r},...s&&{wellKnownScaleSet:s}}})}function wie(a){const e=Gr(a),t=Ke(e,"Contents");function i(g,b){const v=ei(g,"TileMatrixSet").find(C=>{const S=Ke(C,"Identifier");return wt(S)===b});return wt(Ke(v,"SupportedCRS"))}function n(g){const b=wt(Ke(g,"TileMatrixSet")),v=i(t,b);return{identifier:b,crs:v,limits:ei(g,"TileMatrixLimits",!0).map(C=>({tileMatrix:wt(Ke(C,"TileMatrix")),minTileRow:parseInt(wt(Ke(C,"MinTileRow"))),minTileCol:parseInt(wt(Ke(C,"MinTileCol"))),maxTileRow:parseInt(wt(Ke(C,"MaxTileRow"))),maxTileCol:parseInt(wt(Ke(C,"MaxTileCol")))}))}}const s=ei(Ke(e,"OperationsMetadata"),"Operation").find(g=>Ei(g,"name")=="GetTile"),r=ei(s,"Get",!0).filter(g=>wt(Ke(g,"Value",!0)).toLowerCase()==="kvp")[0],l=r?Ei(r,"xlink:href"):"",c=Ke(e,"Contents");return ei(c,"Layer").map(g=>{const b=YG(Ke(g,"WGS84BoundingBox"));let v="";const C=ei(g,"Style").map(O=>{const V=Ei(Ke(O,"LegendURL"),"xlink:href"),B=wt(Ke(O,"Abstract")),z={title:wt(Ke(O,"Title")),name:wt(Ke(O,"Identifier")),...B&&{abstract:B},...V&&{legendUrl:V}};return Ei(O,"isDefault")==="true"&&(v=z.name),z}),S=ei(g,"Format").map(wt),L=ei(g,"ResourceURL").filter(O=>Ei(O,"resourceType")==="tile").map(O=>{const V=Ei(O,"format"),B=Ei(O,"template");return{format:V,url:B,encoding:"REST"}});l&&L.push(...S.map(O=>({encoding:"KVP",url:l,format:O})));const R=ei(g,"TileMatrixSetLink").map(n),G=ei(g,"Dimension").map(O=>{const V=wt(Ke(O,"Identifier")),B=wt(Ke(O,"Default")),z=ei(O,"Values").map(wt);return{identifier:V,defaultValue:B,values:z}});return{name:wt(Ke(g,"Identifier")),title:wt(Ke(g,"Title")),abstract:wt(Ke(g,"Abstract")),styles:C,resourceLinks:L,matrixSets:R,defaultStyle:v,...b&&{latLonBoundingBox:b},...G&&{dimensions:G}}})}function Iie(a,e,t){const i=Gr(a);let n;if(t.startsWith("2.0"))n=ei(i,"member").map(h=>Hu(h)[0]);else{const h=Ke(i,"featureMembers");n=h?Hu(h):ei(i,"featureMember").map(g=>Hu(g)[0])}const s=t==="1.0.0"?"fid":"gml:id";function r(h){return h in e.properties}function l(h,g){switch(e.properties[h]){case"integer":return parseInt(g);case"float":return parseFloat(g);case"boolean":return g==="true";default:return g}}function c(h){return Hu(h).filter(g=>r(lc(uc(g)))).reduce((g,b)=>{const v=lc(uc(b));return{...g,[v]:l(v,wt(b))}},{})}return n.map(h=>({id:Ei(h,s),properties:c(h)}))}function Cie(a){return a.reduce((e,t)=>{for(const i in t.properties){const n=t.properties[i];i in e||(e[i]={uniqueValues:[]});const s=e[i].uniqueValues.find(r=>r.value===n);s?s.count++:e[i].uniqueValues.push({value:n,count:1})}return e},{})}T1("parseWmsCapabilities",globalThis,({url:a})=>Kw(a).then(e=>P3(e,a)).then(e=>({info:uie(e),layers:rie(e),url:nie(e),version:zG(e)})));T1("parseWfsCapabilities",globalThis,({url:a})=>Kw(a).then(e=>P3(e,a)).then(e=>({info:gie(e),featureTypes:pie(e),url:mie(e),version:jw(e)})));T1("queryWfsFeatureTypeDetails",globalThis,({url:a,serviceVersion:e,featureTypeFull:t})=>{const i=$ae(a,e,t.name,void 0,void 0,Object.keys(t.properties));return Kw(i).then(n=>({props:Cie(Iie(n,t,e))}))});T1("updateFetchOptions",globalThis,({options:a})=>(Uae(a),Promise.resolve({})));T1("parseWmtsCapabilities",globalThis,({url:a})=>Kw(a).then(e=>P3(e,a)).then(e=>({info:vie(e),layers:wie(e),matrixSets:xie(e)})));const Aie=()=>[{url:"http://wmts1.geoportail.lu/opendata/service",label:"Open Data Webservices WMS"},{url:"http://ows.terrestris.de/osm-gray/service",label:"OpenStreetMap by Terrestris (Grey)"},{url:"http://ows.terrestris.de/osm/service",label:"OpenStreetMap by Terrestris (Color)"}],px="http://www.w3.org/2001/XMLSchema-instance";function md(a,e){return df().createElementNS(a,e)}function du(a,e){return KG(a,e,[]).join("")}function KG(a,e,t){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)e?t.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(a.nodeValue);else{let i;for(i=a.firstChild;i;i=i.nextSibling)KG(i,e,t)}return t}function Yu(a){return"documentElement"in a}function Ku(a){return new DOMParser().parseFromString(a,"application/xml")}function i9(a,e){return function(t,i){const n=a.call(e??this,t,i);if(n!==void 0){const s=i[i.length-1];Vi(s,n)}}}function Mo(a,e){return function(t,i){const n=a.call(e??this,t,i);n!==void 0&&i[i.length-1].push(n)}}function B3(a,e){return function(t,i){const n=a.call(e??this,t,i);n!==void 0&&(i[i.length-1]=n)}}function So(a,e,t){return function(i,n){const s=a.call(t??this,i,n);if(s!==void 0){const r=n[n.length-1],l=e!==void 0?e:i.localName;let c;l in r?c=r[l]:(c=[],r[l]=c),c.push(s)}}}function Ve(a,e,t){return function(i,n){const s=a.call(t??this,i,n);if(s!==void 0){const r=n[n.length-1],l=e!==void 0?e:i.localName;r[l]=s}}}function Mt(a,e){return function(t,i,n){a.call(e??this,t,i,n),n[n.length-1].node.appendChild(t)}}function qG(a,e){let t,i;return function(n,s,r){if(t===void 0){t={};const l={};l[n.localName]=a,t[n.namespaceURI]=l,i=hu(n.localName)}jG(t,i,s,r)}}function hu(a,e){return function(t,i,n){const r=i[i.length-1].node;let l=a;l===void 0&&(l=n);const c=e!==void 0?e:r.namespaceURI;return md(c,l)}}const Fs=hu();function Go(a,e){const t=e.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=a[e[n]];return i}function pt(a,e,t){t=t!==void 0?t:{};let i,n;for(i=0,n=a.length;i<n;++i)t[a[i]]=e;return t}function Zh(a,e,t,i){let n;for(n=e.firstElementChild;n;n=n.nextElementSibling){const s=a[n.namespaceURI];if(s!==void 0){const r=s[n.localName];r!==void 0&&r.call(i,n,t)}}}function ma(a,e,t,i,n){return i.push(a),Zh(e,t,i,n),i.pop()}function jG(a,e,t,i,n,s){const r=(n!==void 0?n:t).length;let l,c;for(let h=0;h<r;++h)l=t[h],l!==void 0&&(c=e.call(s,l,i,n!==void 0?n[h]:void 0),c!==void 0&&a[c.namespaceURI][c.localName].call(s,c,l,i))}function xn(a,e,t,i,n,s,r){return n.push(a),jG(e,t,i,n,s,r),n.pop()}let sA;function Sie(){return sA===void 0&&typeof XMLSerializer<"u"&&(sA=new XMLSerializer),sA}let oA;function df(){return oA===void 0&&typeof document<"u"&&(oA=document.implementation.createDocument("","",null)),oA}class Tie{read(e){if(!e)return null;if(typeof e=="string"){const t=Ku(e);return this.readFromDocument(t)}return Yu(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){Aa()}}const JG=Tie,Eie="http://www.w3.org/1999/xlink";function F3(a){return a.getAttributeNS(Eie,"href")}function kh(a){const e=du(a,!1);return Mie(e)}function Mie(a){const e=/^\s*(true|1)|(false|0)\s*$/.exec(a);if(e)return e[1]!==void 0||!1}function Jw(a){const e=du(a,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function Fi(a){const e=du(a,!1);return Lie(e)}function Lie(a){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a);if(e)return parseFloat(e[1])}function el(a){const e=du(a,!1);return Rie(e)}function Rie(a){const e=/^\s*(\d+)\s*$/.exec(a);if(e)return parseInt(e[1],10)}function Yt(a){return du(a,!1).trim()}function Up(a,e){Zi(a,e?"1":"0")}function kie(a,e){a.appendChild(df().createCDATASection(e))}function Wie(a,e){const t=new Date(e*1e3),i=t.getUTCFullYear()+"-"+fy(t.getUTCMonth()+1,2)+"-"+fy(t.getUTCDate(),2)+"T"+fy(t.getUTCHours(),2)+":"+fy(t.getUTCMinutes(),2)+":"+fy(t.getUTCSeconds(),2)+"Z";a.appendChild(df().createTextNode(i))}function Io(a,e){const t=e.toPrecision();a.appendChild(df().createTextNode(t))}function fx(a,e){const t=e.toString();a.appendChild(df().createTextNode(t))}const Gie=/^\s/,Oie=/\s$/,Pie=/(\n|\t|\r|<|&| {2})/;function Zi(a,e){typeof e=="string"&&(Gie.test(e)||Oie.test(e)||Pie.test(e))?e.split("]]>").forEach((t,i,n)=>{i<n.length-1&&(t+="]]"),i>0&&(t=">"+t),kie(a,t)}):a.appendChild(df().createTextNode(e))}const Po=[null,"http://www.opengis.net/ows/1.1"],Bie=pt(Po,{ServiceIdentification:Ve(lne),ServiceProvider:Ve(cne),OperationsMetadata:Ve(sne)});class Fie extends JG{constructor(){super()}readFromNode(e){const t=ma({},Bie,e,[]);return t||null}}const Nie=pt(Po,{DeliveryPoint:Ve(Yt),City:Ve(Yt),AdministrativeArea:Ve(Yt),PostalCode:Ve(Yt),Country:Ve(Yt),ElectronicMailAddress:Ve(Yt)}),Die=pt(Po,{Value:So(dne)}),Vie=pt(Po,{AllowedValues:Ve($ie)}),Zie=pt(Po,{Phone:Ve(one),Address:Ve(Qie)}),zie=pt(Po,{HTTP:Ve(nne)}),Uie=pt(Po,{Get:So(ine),Post:void 0}),Xie=pt(Po,{DCP:Ve(ane)}),Hie=pt(Po,{Operation:rne}),Yie=pt(Po,{Voice:Ve(Yt),Facsimile:Ve(Yt)}),Kie=pt(Po,{Constraint:So(ene)}),qie=pt(Po,{IndividualName:Ve(Yt),PositionName:Ve(Yt),ContactInfo:Ve(tne)}),jie=pt(Po,{Abstract:Ve(Yt),AccessConstraints:Ve(Yt),Fees:Ve(Yt),Title:Ve(Yt),ServiceTypeVersion:Ve(Yt),ServiceType:Ve(Yt)}),Jie=pt(Po,{ProviderName:Ve(Yt),ProviderSite:Ve(F3),ServiceContact:Ve(une)});function Qie(a,e){return ma({},Nie,a,e)}function $ie(a,e){return ma({},Die,a,e)}function ene(a,e){const t=a.getAttribute("name");if(t)return ma({name:t},Vie,a,e)}function tne(a,e){return ma({},Zie,a,e)}function ane(a,e){return ma({},zie,a,e)}function ine(a,e){const t=F3(a);if(t)return ma({href:t},Kie,a,e)}function nne(a,e){return ma({},Uie,a,e)}function rne(a,e){const t=a.getAttribute("name"),i=ma({},Xie,a,e);if(!i)return;const n=e[e.length-1];n[t]=i}function sne(a,e){return ma({},Hie,a,e)}function one(a,e){return ma({},Yie,a,e)}function lne(a,e){return ma({},jie,a,e)}function une(a,e){return ma({},qie,a,e)}function cne(a,e){return ma({},Jie,a,e)}function dne(a,e){return Yt(a)}const hne=Fie,dc=[null,"http://www.opengis.net/wmts/1.0"],hf=[null,"http://www.opengis.net/ows/1.1"],_ne=pt(dc,{Contents:Ve(Cne)});class mne extends JG{constructor(){super(),this.owsParser_=new hne}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let i=this.owsParser_.readFromNode(e);return i?(i.version=t,i=ma(i,_ne,e,[]),i||null):null}}const gne=pt(dc,{Layer:So(Ane),TileMatrixSet:So(Sne)}),pne=pt(dc,{Style:So(Tne),Format:So(Yt),TileMatrixSetLink:So(Ene),Dimension:So(Mne),ResourceURL:So(Lne)},pt(hf,{Title:Ve(Yt),Abstract:Ve(Yt),WGS84BoundingBox:Ve($G),BoundingBox:So(Rne),Identifier:Ve(Yt)})),fne=pt(dc,{LegendURL:So(kne)},pt(hf,{Title:Ve(Yt),Identifier:Ve(Yt)})),yne=pt(dc,{TileMatrixSet:Ve(Yt),TileMatrixSetLimits:Ve(Gne)}),bne=pt(dc,{TileMatrixLimits:Mo(One)}),vne=pt(dc,{TileMatrix:Ve(Yt),MinTileRow:Ve(el),MaxTileRow:Ve(el),MinTileCol:Ve(el),MaxTileCol:Ve(el)}),xne=pt(dc,{Default:Ve(Yt),Value:So(Yt)},pt(hf,{Identifier:Ve(Yt)})),QG=pt(hf,{LowerCorner:Mo(QS),UpperCorner:Mo(QS)}),wne=pt(dc,{WellKnownScaleSet:Ve(Yt),TileMatrix:So(Wne)},pt(hf,{SupportedCRS:Ve(Yt),Identifier:Ve(Yt),BoundingBox:Ve($G)})),Ine=pt(dc,{TopLeftCorner:Ve(QS),ScaleDenominator:Ve(Fi),TileWidth:Ve(el),TileHeight:Ve(el),MatrixWidth:Ve(el),MatrixHeight:Ve(el)},pt(hf,{Identifier:Ve(Yt)}));function Cne(a,e){return ma({},gne,a,e)}function Ane(a,e){return ma({},pne,a,e)}function Sne(a,e){return ma({},wne,a,e)}function Tne(a,e){const t=ma({},fne,a,e);if(!t)return;const i=a.getAttribute("isDefault")==="true";return t.isDefault=i,t}function Ene(a,e){return ma({},yne,a,e)}function Mne(a,e){return ma({},xne,a,e)}function Lne(a,e){const t=a.getAttribute("format"),i=a.getAttribute("template"),n=a.getAttribute("resourceType"),s={};return t&&(s.format=t),i&&(s.template=i),n&&(s.resourceType=n),s}function $G(a,e){const t=ma([],QG,a,e);if(t.length==2)return _s(t)}function Rne(a,e){const t=a.getAttribute("crs"),i=ma([],QG,a,e);if(i.length==2)return{extent:_s(i),crs:t}}function kne(a,e){const t={};return t.format=a.getAttribute("format"),t.href=F3(a),t}function QS(a,e){const t=Yt(a).split(/\s+/);if(!t||t.length!=2)return;const i=+t[0],n=+t[1];if(!(isNaN(i)||isNaN(n)))return[i,n]}function Wne(a,e){return ma({},Ine,a,e)}function Gne(a,e){return ma([],bne,a,e)}function One(a,e){return ma({},vne,a,e)}const Pne=mne;class Bne{constructor(e){_a(this,"capabilitiesPromise");_a(this,"serviceInfo");_a(this,"layers");const t=new Pne;let i="&";e.indexOf("?")===-1&&(i="?"),e.indexOf("Capabilities")===-1&&(e=e+i+"SERVICE=WMTS&REQUEST=GetCapabilities"),this.capabilitiesPromise=fetch(e).then(n=>n.text()).then(n=>{var r;const s=t.read(n);this.serviceInfo=this.mapServiceInfo(s.ServiceIdentification),this.layers=this.mapToRemoteLayers((r=s.Contents)==null?void 0:r.Layer)})}mapToRemoteLayers(e){return[{type:Qu.WMTS,children:e.map(t=>({type:Qu.WMTS,abstract:t.Abstract,format:t.Format,name:t.Identifier,title:t.Title,tileMatrixSetLink:t.TileMatrixSetLink,wgs84BoundingBox:t.WGS84BoundingBox}))}]}mapServiceInfo(e){return{type:Qu.WMTS,title:e.Title,abstract:e.Abstract,fees:e.Fees,constraints:e.AccessConstraints,serviceTypeVersion:e.ServiceTypeVersion}}isReady(){return this.capabilitiesPromise.then(()=>this)}getLayerByName(e){return this.layers[0].children.filter(t=>t.name===e)[0]}getLayers(){return this.layers}getServiceInfo(){return this.serviceInfo}}const Fne="https://migration.geoportail.lu/ogcproxywms",Nne="https://migration.geoportail.lu/httpsproxy";class Dne{constructor(){_a(this,"_wmsProxyUrl",Fne);_a(this,"_remoteProxyUrl",Nne)}get wmsProxyUrl(){return this._wmsProxyUrl===void 0&&console.warn("Warning: proxyWmsUrl is not set."),this._wmsProxyUrl}get remoteProxyUrl(){return this._remoteProxyUrl===void 0&&console.warn("Warning: remoteProxy is not set."),this._remoteProxyUrl}getProxyfiedUrl(e){return e.indexOf("httpsproxy")>0?e:this.remoteProxyUrl+"?url="+encodeURIComponent(e)}init_v3(e,t){e&&(this._wmsProxyUrl=e),t&&(this._remoteProxyUrl=t),console.warn("Deprecated: ProxyUrlHelper.init_v3() is meant to be removed when v4 is fully operational")}}const J0=new Dne;class Vne{async getRemoteEndpoint(e){let t;return await this.getWmsEndpoint(e).isReady().catch(async()=>{t=await this.getWmtsEndpoint(e).isReady()})||t}getWmsEndpoint(e){return new tie(J0.getProxyfiedUrl(e))}getWmtsEndpoint(e){return new Bne(J0.getProxyfiedUrl(e))}async fetchRemoteWmsEndpoint(){return new Promise(e=>e(Aie()))}isRemoteLayer(e){return typeof e=="string"&&(e.indexOf(Qu.WMS)===0||e.indexOf(Qu.WMTS)===0)}}const Q0=new Vne;class eO{}class Zne extends eO{async getMetadata(e,t,i){const n=Q0.getWmsEndpoint(t);await n.isReady();const s=n==null?void 0:n.getServiceInfo(),r=n==null?void 0:n.getLayerByName(i);return{title:r.title,description:r.abstract,keywords:s.keywords,accessConstraints:s.constraints,serviceDescription:s.abstract}}}const zne=new Zne;class Une extends eO{async getMetadata(e,t,i){const n=Q0.getWmtsEndpoint(t);await n.isReady();const s=n==null?void 0:n.getServiceInfo(),r=n==null?void 0:n.getLayerByName(i);return{title:r.title,description:r.abstract,accessConstraints:s.constraints,serviceDescription:s.abstract}}}const Xne=new Une;class Hne{async getMetadata(e,t,i){if(e===Qu.WMS)return zne.getMetadata(e,t,i);if(e===Qu.WMTS)return Xne.getMetadata(e,t,i);throw new Error(`Unsupported service type: ${e}`)}}const Yne=new Hne,Iv=new Map,Kne="https://geocatalogue.geoportail.lu/geonetwork/srv",qne="https://migration.geoportail.lu/legends/get_html",jne="https://migration.geoportail.lu/getMetadata";class Jne{async getLayerMetadata(e,t){let i;const s=od().findAnyLayerById(e);return Iv.has(e)?Iv.get(e):(s?i=this.getLayerMetadataLocal(s,t):i=this.getLayerMetadataRemote(e),Iv.set(e,i),i)}async getLayerMetadataRemote(e){const[t,i,n]=String(e).split("%2D").join("-").split("||");return Yne.getMetadata(t,i,n)}async getLayerMetadataLocal(e,t){const i=e.metadata,n=i==null?void 0:i.metadata_id,s=n?await this.getLocalMetadata(jne,n,t):{isError:!0},r=e.name,l=(i==null?void 0:i.legend_name)||"",c=e==null?void 0:e.id,h=await this.getLegendHtml(qne,l,c,t),g=!!h&&h.hasChildNodes();return{...s,title:r,hasLegend:g,...g&&{legendHtml:h}}}getLocalMetadata(e,t,i){return fetch(`${e}?lang=${i}&uid=${t}`).then(async n=>{const s=(await n.json()).metadata;return{name:s.title,serviceDescription:s.serviceDescription,description:s.abstract,legalConstraints:s.legalConstraints,link:U$(s.link),revisionDate:s.revisionDate,keyword:s.keyword,responsibleParty:s.responsibleParty?X$(s.responsibleParty):void 0,metadataLink:`${Kne}/${Z$(i)}/catalog.search#/metadata/${t}`,isError:!1}}).catch(()=>({isError:!0}))}getLegendHtml(e,t,i,n){const s={lang:n,...t&&{name:t},...i&&{id:i.toString()}};if(s.lang){window.devicePixelRatio>1&&(s.dpi=(window.devicePixelRatio*96).toString());const r=`${e}?${new URLSearchParams(s).toString()}`;return fetch(r).then(async l=>{if(l.status>=400&&l.status<600)throw new Error("Server responded with error code");const c=await l.text();return c?z$(c):void 0}).catch(()=>{})}}clearCache(){Iv.clear()}}const yx=new Jne,_f="ipv6",bx="address",Mm="applogin",Wh="localforage",Cp="debug",Qne="embedded",tO="embeddedserver",aO="embeddedserverprotocol",$S="features",Xp="fid",Ch="lang",vx="layersOpen",e4="version",$ne="map_id",n9="layers",r9="bgLayer",s9="opacities",$0="theme",o9="time",l9="zoom",u9="rotation",ere="SRS",t4="X",a4="Y",lA="crosshair",e1="serial",iO=["basemap_2015_global","topogr_global","topo_bw_jpeg"],i4="lc",n4="sliderRatio",nO="bgOpacity",tre="layers_indices",c9="layers_opacity",d9="layers_visibility";var gs=(a=>(a[a.localStorage=0]="localStorage",a[a.permalink=1]="permalink",a[a.permalinkAsPath=2]="permalinkAsPath",a[a.permalinkAndLocalStorage=3]="permalinkAndLocalStorage",a))(gs||{});class rO{}function h0(a,e){let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{a.apply(i)},e)}}const are=(a,e)=>{let t=null;return(...i)=>new Promise((n,s)=>{t&&clearTimeout(t),t=setTimeout(async()=>{try{const r=await a(...i);n(r)}catch(r){s(r)}},e)})};function sO(a,e){let t,i;return function(...n){const s=this;i?(clearTimeout(t),t=setTimeout(function(){Date.now()-i>=e&&(a.apply(s,n),i=Date.now())},e-(Date.now()-i))):(a.apply(s,n),i=Date.now())}}function K_(a){return a!=null&&a.trim()&&!isNaN(Number(a))?Number(a):void 0}function ire(a,e){return(a==null?void 0:a.split(e).map(t=>t!==null&&!isNaN(Number(t))?parseFloat(t):void 0))||[]}function nre(a,e){return(a==null?void 0:a.split(e).map(N3))||[]}function N3(a){return(a==null?void 0:a.trim())==="true"?!0:(a==null?void 0:a.trim())==="false"?!1:void 0}function oO(){return window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches}function $u(a){return typeof window<"u"&&window.navigator&&a.test(navigator.userAgent)}function rre(a){const e=new RegExp("[^/]*//[^/]+/(.*)"),t=a.match(e);return t?t[1]:null}const sre=$u(/firefox/i);$u(/safari/i)&&!$u(/chrome/i)&&$u(/android/i);$u(/iP(ad|od|hone)/i);$u(/chrome/i)&&$u(/android/i);$u(/chrome/i);$u(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i);$u(/Edge/i);function h9(a){return a.replace(/\s+/g,"_").replace(/[^a-z0-9\-_]/gi,"")||"_"}async function ore(a,e){const t=await fetch(a);if(!t.ok)throw new Error;const i=await t.blob();lO(e,i)}function lre(a,e,t="text/plain"){const i=new Blob([e],{type:t});lO(a,i)}function lO(a,e){const t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}function ure(a){return a.charAt(0).toUpperCase()+a.slice(1)}class xx extends rO{static processRules(e){return xx.ruleUseLocalStorage(e)?gs.localStorage:gs.permalink}static processRulesForKey(e,t){if(iO.includes(e))return gs.localStorage;if(e===e1)return gs.permalink;if(e===vx)return gs.localStorage}static ruleUseLocalStorage(e){return[cre,dre,hre].reduce((t,i)=>t||i(e),!1)}}const cre=a=>Object.keys(a).length===0,dre=a=>Object.keys(a).length===1&&(a.hasOwnProperty(_f)||a.hasOwnProperty(Mm)||a.hasOwnProperty(Wh)),hre=a=>Object.keys(a).length===3&&a.hasOwnProperty(_f)&&a.hasOwnProperty(Mm)&&a.hasOwnProperty(Wh);class wx extends rO{static processRules(){return gs.permalinkAndLocalStorage}static processRulesForKey(e,t){if(wx.ruleUsePermalink(e))return gs.permalink;if(e===vx||iO.includes(e))return gs.localStorage;if(e===e1||e===$S)return gs.permalink;if(e===$0)return gs.permalinkAsPath}static ruleUsePermalink(e){return[_re,mre,gre].reduce((t,i)=>t||i(e),!1)}}const _re=a=>a===i4||a===n4,mre=a=>a===e4,gre=a=>a===$0&&!0;class uO{constructor(){_a(this,"snappedUrl");this.snappedUrl=new URL(window.location.toString())}get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}getStrippedUrl(e){const t=new URL(window.location.toString()),i=new URLSearchParams(t.search);return e!==void 0&&(i.set("X",Math.round(e[0]).toString()),i.set("Y",Math.round(e[1]).toString())),i.delete(Wh),i.delete(Mm),i.delete(_f),i.delete(tO),i.delete(aO),t.search=i.toString(),t}getRelativeUrl(){const e=this.getStrippedUrl(void 0);return e.pathname+e.search}async getShortUrl(e){const t=this.getStrippedUrl(e).toString().replace(/https:\/\/geoportail-luxembourg.github.io\/luxembourg-geoportail\/.+\//,"https://migration.geoportail.lu/").replace(/http:\/\/localhost:[45]173\//,"https://migration.geoportail.lu/"),i=new URLSearchParams;return i.set("url",t),await(await fetch("https://migration.geoportail.lu/short/create",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i.toString()})).json()}getSnappedUrl(){return this.snappedUrl}getSnappedParamsAsObj(){return this.getSnappedParams().reduce((e,t)=>{const[i,n]=t.split("=");return{...e,[i]:n}},{})}getSnappedParams(){return this.getSnappedUrl().search.replace("?","").split("&").filter(e=>e.split("=")[1])}setItem(e,t){const i=new URLSearchParams(new URL(window.location.toString()).search);i.set(encodeURIComponent(e),encodeURIComponent(t));try{window.history.replaceState(null,"","?"+i.toString())}catch{}}getItem(e){const t=this.getSnappedUrl().searchParams.get(e);return t!==null?decodeURIComponent(t):t}removeItem(e){const t=new URLSearchParams(new URL(window.location.toString()).search);t.delete(e);try{window.history.replaceState(null,"","?"+t.toString())}catch{}}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`}removeQueryParam(e){const t=new URL(window.location.href);t.searchParams.delete(e),window.history.replaceState({},document.title,t.toString())}}const Ah=new uO;class pre extends uO{getItem(e){const t=this.getSnappedUrl().pathname.split("/"),i=t.findIndex(n=>n===e);return t[i+1]}setItem(e,t){const i=new URL(window.location.toString()).search,n=`/luxembourg-geoportail/GITLAB-49-my_maps/${e}/${t}${i}`;try{window.history.replaceState(null,"",n)}catch{}}}const cO=new pre;class fre{get length(){throw new Error("Method not implemented.")}clear(){throw new Error("Method not implemented.")}key(e){throw new Error("Method key() not implemented. "+e)}removeItem(e){const t=this.getWriteStorages(e);t==null||t.map(i=>i.removeItem(e))}setItem(e,t){this.setValue(e,t)}getItem(e){return this.getValue(e)}get paramKeys(){return Ah.getSnappedParamsAsObj()}getValue(e){var n;const t=(n=this.correspondingStorages(xx.processRules(this.paramKeys)))==null?void 0:n.pop(),i=this.storageForKey(e,xx,t);return i?i.getItem(e):null}setValue(e,t){const i=this.getWriteStorages(e);i==null||i.map(n=>n.setItem(e,t))}getWriteStorages(e){const t=this.correspondingStorages(wx.processRules()),i=this.storageForKey(e,wx);return i?[i]:t}storageForKey(e,t,i){var s;return((s=this.correspondingStorages(t.processRulesForKey(e,this.paramKeys)))==null?void 0:s.pop())??i}correspondingStorages(e){if(e===gs.permalinkAndLocalStorage)return[Ah,localStorage];if(e===gs.localStorage)return[localStorage];if(e===gs.permalink)return[Ah];if(e===gs.permalinkAsPath)return[cO]}}const Cv=new fre;function yre(a){return bre(a)||vre(a)||xre(a)||wre(a)}const bre=a=>Object.keys(a).length===0,vre=a=>{const e=Object.keys(a);return Object.keys(a).length===1&&[_f,Mm,Wh,Xp,Ch,bx,Cp].some(t=>e.indexOf(t)!==-1)},xre=a=>{const e=Object.keys(a),t=n=>e.indexOf(n)!==-1,i=[[Mm,Wh],[Cp,Xp],[Ch,Xp],[Cp,Ch],[Cp,bx],[Ch,bx]];return Object.keys(a).length===2&&i.reduce((n,s)=>n||s.every(t),!1)},wre=a=>{const e=Object.keys(a),t=r=>e.indexOf(r)!==-1,i=[_f,Mm,Wh].every(t),n=[Cp,Xp,Ch].every(t),s=[Cp,bx,Ch].every(t);return Object.keys(a).length===3&&(i||n||s)};class Ire{constructor(){_a(this,"intialVersion");const e=Cv.paramKeys,t=this.getValue(e4,K_);this.intialVersion=t?Math.max(2,Math.min(t,3)):yre(e)?3:2,this.setValue(e4,3)}getInitialVersion(){return this.intialVersion}mapToEntity(e,t){return t?t(e):e}mapToStorage(e,t){return t?t(e):String(e)}getValue(e,t){return this.mapToEntity(Cv.getValue(e),t)}setValue(e,t,i){Cv.setValue(e,this.mapToStorage(t,i))}removeItem(e){Cv.removeItem(e)}}const Ia=new Ire;class Cre{bootstrap(){this.restore();let e;e=er(()=>{this.persist(),e&&e()})}persist(){const e=yi(),{lang:t}=Zt(e);Kt(t,(i,n)=>{n!==i&&(Ia.setValue(Ch,i),document.documentElement.setAttribute("lang",i))},{immediate:!0})}restore(){const e=Ia.getValue(Ch);if(e){const{setLang:t}=yi(),{i18next:i}=ya();i.changeLanguage(e),t(e)}}}const Are=new Cre,Sre=bt({__name:"language-selector",setup(a){const{i18next:e,t}=ya(),{setLang:i}=yi(),{lang:n}=Zt(yi()),s=Ft(()=>["en","de","fr","lb"].map(c=>({label:t(c),value:c,ariaLabel:t("Change language: {{lang}}",{ns:"app",lang:c})}))),r=t("Change language",{ns:"app"});Are.bootstrap(),Kt(()=>e.language,()=>{yx.clearCache()});function l(c){e.changeLanguage(c),i(c)}return(c,h)=>(se(),xa(dx,{class:"lux-navbar-dropdown lux-dropdown-inline text-white h-full",options:s.value,placeholder:X(r),modelValue:X(n),"onUpdate:modelValue":h[0]||(h[0]=g=>Zn(n)?n.value=g:null),onChange:l},null,8,["options","placeholder","modelValue"]))}}),Tre={class:"w-full h-14 flex bg-white shadow-header z-10 shrink-0"},Ere={class:"h-full flex"},Mre={class:"hidden lg:inline-block"},Lre={class:"border-l-[1px] border-stone-300 h-full"},Rre={class:"border-l-[1px] border-stone-300 h-full"},kre=bt({__name:"header-bar",setup(a){const{t:e}=ya(),t=yi(),{toggleAuthFormOpen:i,toggleThemeGrid:n}=t,{authFormOpened:s}=Zt(t),{themeName:r}=Zt(ps()),{authenticated:l}=Zt(w1()),c=Qe(!1);Kt(l,b=>b&&i(!1));function h(b){c.value=b,b&&i(!1)}function g(b){i(b),b&&(c.value=!1)}return(b,v)=>(se(),Ie("header",Tre,[v[1]||(v[1]=q("div",{class:"flex-2 p-[5px]"},[q("img",{src:KQ})],-1)),v[2]||(v[2]=q("div",{class:"grow text-center"},"search",-1)),q("div",null,[q("ul",Ere,[q("li",null,[q("button",{class:ti(["flex items-center before:font-icons before:text-3xl before:w-16 text-primary uppercase h-full mr-3",`before:content-${X(r)}`]),"data-cy":"selectedThemeIcon",onClick:v[0]||(v[0]=(...C)=>X(n)&&X(n)(...C))},[q("span",Mre,Fe(X(e)(`${X(r)}`)),1)],2)]),q("li",Lre,[dt(Sre,{"data-cy":"langSelect",class:"flex-none h-full",isOpen:c.value,onToggleDropdown:h},null,8,["isOpen"])]),q("li",Rre,[dt(hW,{"data-cy":"authFormIcon",class:"lux-navbar-dropdown lux-navbar-dropdown-auth h-full",enableClickOutside:!1,isOpen:X(s),onToggleDropdown:g},{default:Ha(()=>[dt(O$,{class:"w-80"})]),_:1},8,["isOpen"])])])])]))}}),ro=rl("draw",()=>{const a=Qe(void 0),e=Qe(void 0),t=Qe(void 0),i=Qe(void 0),n=Qe([]),s=Qe(!1);function r(S){var L;((L=i.value)==null?void 0:L.replace("edit",""))===(S==null?void 0:S.replace("draw",""))?(t.value=void 0,i.value=void 0,e.value=void 0):t.value===S?t.value=void 0:l(S)}function l(S){S&&(i.value=void 0,e.value=void 0),t.value=S}function c(S){S?t.value=void 0:e.value=void 0,i.value=S}function h(S){n.value=[...n.value,S],a.value=S.id,e.value=S.id,i.value=S.featureType.replace("drawn","edit"),t.value=void 0}function g(S){const L=n.value.findIndex(R=>R.id===S.id);L!==-1&&(n.value[L]=S),n.value=[...n.value]}function b(S){n.value=S}function v(S){n.value=n.value.filter(L=>L.id!==S),a.value===S&&(a.value=void 0,e.value=void 0)}function C(S){n.value=n.value.map(L=>Object.assign(L,{display_order:S.indexOf(`f-${L.id}`)}))}return{activeFeatureId:a,editingFeatureId:e,drawStateActive:t,editStateActive:i,drawnFeatures:n,featureEditionDocked:s,removeFeature:v,reorderFeatures:C,toggleDrawActiveState:r,setDrawActiveState:l,setEditActiveState:c,addDrawnFeature:h,updateDrawnFeature:g,setDrawnFeatures:b}}),pm=rl("featureInfo",()=>{const a=Wi(),e=Wi(),t=Wi(!1),i=Wi(!1);function n(h){!h||h.length===0?a.value=void 0:(a.value=[...h],t.value=!1)}function s(){a.value=void 0,t.value=!1}function r(h){e.value=h}function l(h){t.value=h}function c(h){i.value=h}return{featureInfoPanelContent:a,fid:e,isLoading:t,displayStarOnMobile:i,setFeatureInfoPanelContent:n,clearContent:s,setFid:r,setLoading:l,setDisplayStarOnMobile:c}},{}),Wre={class:"block text-[13px] sm:text-base uppercase"},Dc=bt({__name:"button-icon",props:{label:{},icon:{},active:{type:Boolean}},setup(a){const e=a;return(t,i)=>(se(),Ie("button",{class:ti(["h-[42px] w-full sm:h-full sm:w-16 hover:text-white hover:bg-primary",e.active?"bg-primary text-white":""])},[q("span",{class:ti(["block text-[1.7rem] sm:text-[2rem] -mt-1.5 -mb-3 after:font-icons",e.active?"lux-close-cross":`after:content-${e.icon}`])},null,2),q("span",Wre,Fe(e.label),1)],2))}}),Gre=["href"],qd=bt({__name:"button-link",props:{label:{},link:{}},setup(a){const e=a;return(t,i)=>(se(),Ie("a",{class:"h-full flex flex-col justify-center px-[7px] uppercase hover:text-white hover:bg-primary",href:`${e.link}`,target:"_blank"},Fe(t.$props.label),9,Gre))}}),Ore={class:"block"},Kg=bt({__name:"button-text",props:{label:{},active:{type:Boolean}},setup(a){const e=a;return(t,i)=>(se(),Ie("button",{class:ti(["h-16 w-16 text-white hover:bg-primary",e.active?"bg-primary":"bg-tertiary"])},[q("span",Ore,Fe(e.label),1)],2))}}),Pre={"data-cy":"toolbarDraw"},Bre={class:"absolute bottom-full top-auto z-20 flex flex-row justify-start divide-y-0 divide-x divide-gray-400 divide-solid box-content border-y-0 border-x border-gray-400"},Fre={key:0,class:"absolute bottom-full top-auto z-10 pl-[130px] pb-16 w-[326px]","data-cy":"followRoads"},Nre={class:"flex flex-row justify-center text-white bg-tertiary hover:bg-primary py-2 box-content border-y border-x border-gray-400"},Dre=bt({__name:"toolbar-draw",setup(a){const{t:e}=ya(),t=ro(),{toggleDrawActiveState:i,setDrawActiveState:n}=t,{drawStateActive:s,editStateActive:r}=Zt(t);return iT(()=>{n(void 0)}),(l,c)=>(se(),Ie("div",Pre,[q("ul",Bre,[q("li",null,[dt(Kg,{label:X(e)("Draw Point",{ns:"client"}),active:X(s)==="drawPoint"||X(r)==="editPoint",onClick:c[0]||(c[0]=()=>X(i)("drawPoint")),"data-cy":"drawPointButton"},null,8,["label","active"])]),q("li",null,[dt(Kg,{label:X(e)("Label",{ns:"client"}),active:X(s)==="drawLabel"||X(r)==="editLabel",onClick:c[1]||(c[1]=()=>X(i)("drawLabel")),"data-cy":"drawLabelButton"},null,8,["label","active"])]),q("li",null,[dt(Kg,{label:X(e)("Line",{ns:"client"}),active:X(s)==="drawLine"||X(r)==="editLine",onClick:c[2]||(c[2]=()=>X(i)("drawLine")),"data-cy":"drawLineButton"},null,8,["label","active"])]),q("li",null,[dt(Kg,{label:X(e)("Polygon",{ns:"client"}),active:X(s)==="drawPolygon"||X(r)==="editPolygon",onClick:c[3]||(c[3]=()=>X(i)("drawPolygon")),"data-cy":"drawPolygonButton"},null,8,["label","active"])]),q("li",null,[dt(Kg,{label:X(e)("Circle",{ns:"client"}),active:X(s)==="drawCircle"||X(r)==="editCircle",onClick:c[4]||(c[4]=()=>X(i)("drawCircle")),"data-cy":"drawCircleButton"},null,8,["label","active"])])]),X(s)==="drawLine"||X(r)==="editLine"?(se(),Ie("ul",Fre,[q("li",Nre,[q("label",null,[c[5]||(c[5]=q("input",{type:"checkbox"},null,-1)),wr(" "+Fe(X(e)("Suivre la route",{ns:"client"})),1)])])])):je("",!0)]))}}),Vre="/luxembourg-geoportail/GITLAB-49-my_maps/assets/images/profile-81368bb1.png";var r4="http://www.w3.org/1999/xhtml";const _9={svg:"http://www.w3.org/2000/svg",xhtml:r4,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qw(a){var e=a+="",t=e.indexOf(":");return t>=0&&(e=a.slice(0,t))!=="xmlns"&&(a=a.slice(t+1)),_9.hasOwnProperty(e)?{space:_9[e],local:a}:a}function Zre(a){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===r4&&e.documentElement.namespaceURI===r4?e.createElement(a):e.createElementNS(t,a)}}function zre(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function dO(a){var e=Qw(a);return(e.local?zre:Zre)(e)}function Ure(){}function D3(a){return a==null?Ure:function(){return this.querySelector(a)}}function Xre(a){typeof a!="function"&&(a=D3(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=new Array(r),c,h,g=0;g<r;++g)(c=s[g])&&(h=a.call(c,c.__data__,g,s))&&("__data__"in c&&(h.__data__=c.__data__),l[g]=h);return new so(i,this._parents)}function hO(a){return a==null?[]:Array.isArray(a)?a:Array.from(a)}function Hre(){return[]}function _O(a){return a==null?Hre:function(){return this.querySelectorAll(a)}}function Yre(a){return function(){return hO(a.apply(this,arguments))}}function Kre(a){typeof a=="function"?a=Yre(a):a=_O(a);for(var e=this._groups,t=e.length,i=[],n=[],s=0;s<t;++s)for(var r=e[s],l=r.length,c,h=0;h<l;++h)(c=r[h])&&(i.push(a.call(c,c.__data__,h,r)),n.push(c));return new so(i,n)}function mO(a){return function(){return this.matches(a)}}function gO(a){return function(e){return e.matches(a)}}var qre=Array.prototype.find;function jre(a){return function(){return qre.call(this.children,a)}}function Jre(){return this.firstElementChild}function Qre(a){return this.select(a==null?Jre:jre(typeof a=="function"?a:gO(a)))}var $re=Array.prototype.filter;function ese(){return Array.from(this.children)}function tse(a){return function(){return $re.call(this.children,a)}}function ase(a){return this.selectAll(a==null?ese:tse(typeof a=="function"?a:gO(a)))}function ise(a){typeof a!="function"&&(a=mO(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=[],c,h=0;h<r;++h)(c=s[h])&&a.call(c,c.__data__,h,s)&&l.push(c);return new so(i,this._parents)}function pO(a){return new Array(a.length)}function nse(){return new so(this._enter||this._groups.map(pO),this._parents)}function Ix(a,e){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=e}Ix.prototype={constructor:Ix,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,e){return this._parent.insertBefore(a,e)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};function rse(a){return function(){return a}}function sse(a,e,t,i,n,s){for(var r=0,l,c=e.length,h=s.length;r<h;++r)(l=e[r])?(l.__data__=s[r],i[r]=l):t[r]=new Ix(a,s[r]);for(;r<c;++r)(l=e[r])&&(n[r]=l)}function ose(a,e,t,i,n,s,r){var l,c,h=new Map,g=e.length,b=s.length,v=new Array(g),C;for(l=0;l<g;++l)(c=e[l])&&(v[l]=C=r.call(c,c.__data__,l,e)+"",h.has(C)?n[l]=c:h.set(C,c));for(l=0;l<b;++l)C=r.call(a,s[l],l,s)+"",(c=h.get(C))?(i[l]=c,c.__data__=s[l],h.delete(C)):t[l]=new Ix(a,s[l]);for(l=0;l<g;++l)(c=e[l])&&h.get(v[l])===c&&(n[l]=c)}function lse(a){return a.__data__}function use(a,e){if(!arguments.length)return Array.from(this,lse);var t=e?ose:sse,i=this._parents,n=this._groups;typeof a!="function"&&(a=rse(a));for(var s=n.length,r=new Array(s),l=new Array(s),c=new Array(s),h=0;h<s;++h){var g=i[h],b=n[h],v=b.length,C=cse(a.call(g,g&&g.__data__,h,i)),S=C.length,L=l[h]=new Array(S),R=r[h]=new Array(S),G=c[h]=new Array(v);t(g,b,L,R,G,C,e);for(var O=0,V=0,B,z;O<S;++O)if(B=L[O]){for(O>=V&&(V=O+1);!(z=R[V])&&++V<S;);B._next=z||null}}return r=new so(r,i),r._enter=l,r._exit=c,r}function cse(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function dse(){return new so(this._exit||this._groups.map(pO),this._parents)}function hse(a,e,t){var i=this.enter(),n=this,s=this.exit();return typeof a=="function"?(i=a(i),i&&(i=i.selection())):i=i.append(a+""),e!=null&&(n=e(n),n&&(n=n.selection())),t==null?s.remove():t(s),i&&n?i.merge(n).order():n}function _se(a){for(var e=a.selection?a.selection():a,t=this._groups,i=e._groups,n=t.length,s=i.length,r=Math.min(n,s),l=new Array(n),c=0;c<r;++c)for(var h=t[c],g=i[c],b=h.length,v=l[c]=new Array(b),C,S=0;S<b;++S)(C=h[S]||g[S])&&(v[S]=C);for(;c<n;++c)l[c]=t[c];return new so(l,this._parents)}function mse(){for(var a=this._groups,e=-1,t=a.length;++e<t;)for(var i=a[e],n=i.length-1,s=i[n],r;--n>=0;)(r=i[n])&&(s&&r.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(r,s),s=r);return this}function gse(a){a||(a=pse);function e(b,v){return b&&v?a(b.__data__,v.__data__):!b-!v}for(var t=this._groups,i=t.length,n=new Array(i),s=0;s<i;++s){for(var r=t[s],l=r.length,c=n[s]=new Array(l),h,g=0;g<l;++g)(h=r[g])&&(c[g]=h);c.sort(e)}return new so(n,this._parents).order()}function pse(a,e){return a<e?-1:a>e?1:a>=e?0:NaN}function fse(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this}function yse(){return Array.from(this)}function bse(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var i=a[e],n=0,s=i.length;n<s;++n){var r=i[n];if(r)return r}return null}function vse(){let a=0;for(const e of this)++a;return a}function xse(){return!this.node()}function wse(a){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var n=e[t],s=0,r=n.length,l;s<r;++s)(l=n[s])&&a.call(l,l.__data__,s,n);return this}function Ise(a){return function(){this.removeAttribute(a)}}function Cse(a){return function(){this.removeAttributeNS(a.space,a.local)}}function Ase(a,e){return function(){this.setAttribute(a,e)}}function Sse(a,e){return function(){this.setAttributeNS(a.space,a.local,e)}}function Tse(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(a):this.setAttribute(a,t)}}function Ese(a,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,t)}}function Mse(a,e){var t=Qw(a);if(arguments.length<2){var i=this.node();return t.local?i.getAttributeNS(t.space,t.local):i.getAttribute(t)}return this.each((e==null?t.local?Cse:Ise:typeof e=="function"?t.local?Ese:Tse:t.local?Sse:Ase)(t,e))}function fO(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function Lse(a){return function(){this.style.removeProperty(a)}}function Rse(a,e,t){return function(){this.style.setProperty(a,e,t)}}function kse(a,e,t){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(a):this.style.setProperty(a,i,t)}}function Wse(a,e,t){return arguments.length>1?this.each((e==null?Lse:typeof e=="function"?kse:Rse)(a,e,t??"")):Hp(this.node(),a)}function Hp(a,e){return a.style.getPropertyValue(e)||fO(a).getComputedStyle(a,null).getPropertyValue(e)}function Gse(a){return function(){delete this[a]}}function Ose(a,e){return function(){this[a]=e}}function Pse(a,e){return function(){var t=e.apply(this,arguments);t==null?delete this[a]:this[a]=t}}function Bse(a,e){return arguments.length>1?this.each((e==null?Gse:typeof e=="function"?Pse:Ose)(a,e)):this.node()[a]}function yO(a){return a.trim().split(/^|\s+/)}function V3(a){return a.classList||new bO(a)}function bO(a){this._node=a,this._names=yO(a.getAttribute("class")||"")}bO.prototype={add:function(a){var e=this._names.indexOf(a);e<0&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var e=this._names.indexOf(a);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};function vO(a,e){for(var t=V3(a),i=-1,n=e.length;++i<n;)t.add(e[i])}function xO(a,e){for(var t=V3(a),i=-1,n=e.length;++i<n;)t.remove(e[i])}function Fse(a){return function(){vO(this,a)}}function Nse(a){return function(){xO(this,a)}}function Dse(a,e){return function(){(e.apply(this,arguments)?vO:xO)(this,a)}}function Vse(a,e){var t=yO(a+"");if(arguments.length<2){for(var i=V3(this.node()),n=-1,s=t.length;++n<s;)if(!i.contains(t[n]))return!1;return!0}return this.each((typeof e=="function"?Dse:e?Fse:Nse)(t,e))}function Zse(){this.textContent=""}function zse(a){return function(){this.textContent=a}}function Use(a){return function(){var e=a.apply(this,arguments);this.textContent=e??""}}function Xse(a){return arguments.length?this.each(a==null?Zse:(typeof a=="function"?Use:zse)(a)):this.node().textContent}function Hse(){this.innerHTML=""}function Yse(a){return function(){this.innerHTML=a}}function Kse(a){return function(){var e=a.apply(this,arguments);this.innerHTML=e??""}}function qse(a){return arguments.length?this.each(a==null?Hse:(typeof a=="function"?Kse:Yse)(a)):this.node().innerHTML}function jse(){this.nextSibling&&this.parentNode.appendChild(this)}function Jse(){return this.each(jse)}function Qse(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $se(){return this.each(Qse)}function eoe(a){var e=typeof a=="function"?a:dO(a);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function toe(){return null}function aoe(a,e){var t=typeof a=="function"?a:dO(a),i=e==null?toe:typeof e=="function"?e:D3(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),i.apply(this,arguments)||null)})}function ioe(){var a=this.parentNode;a&&a.removeChild(this)}function noe(){return this.each(ioe)}function roe(){var a=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function soe(){var a=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(a,this.nextSibling):a}function ooe(a){return this.select(a?soe:roe)}function loe(a){return arguments.length?this.property("__data__",a):this.node().__data__}function uoe(a){return function(e){a.call(this,e,this.__data__)}}function coe(a){return a.trim().split(/^|\s+/).map(function(e){var t="",i=e.indexOf(".");return i>=0&&(t=e.slice(i+1),e=e.slice(0,i)),{type:e,name:t}})}function doe(a){return function(){var e=this.__on;if(e){for(var t=0,i=-1,n=e.length,s;t<n;++t)s=e[t],(!a.type||s.type===a.type)&&s.name===a.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function hoe(a,e,t){return function(){var i=this.__on,n,s=uoe(e);if(i){for(var r=0,l=i.length;r<l;++r)if((n=i[r]).type===a.type&&n.name===a.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=t),n.value=e;return}}this.addEventListener(a.type,s,t),n={type:a.type,name:a.name,value:e,listener:s,options:t},i?i.push(n):this.__on=[n]}}function _oe(a,e,t){var i=coe(a+""),n,s=i.length,r;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,h=l.length,g;c<h;++c)for(n=0,g=l[c];n<s;++n)if((r=i[n]).type===g.type&&r.name===g.name)return g.value}return}for(l=e?hoe:doe,n=0;n<s;++n)this.each(l(i[n],e,t));return this}function wO(a,e,t){var i=fO(a),n=i.CustomEvent;typeof n=="function"?n=new n(e,t):(n=i.document.createEvent("Event"),t?(n.initEvent(e,t.bubbles,t.cancelable),n.detail=t.detail):n.initEvent(e,!1,!1)),a.dispatchEvent(n)}function moe(a,e){return function(){return wO(this,a,e)}}function goe(a,e){return function(){return wO(this,a,e.apply(this,arguments))}}function poe(a,e){return this.each((typeof e=="function"?goe:moe)(a,e))}function*foe(){for(var a=this._groups,e=0,t=a.length;e<t;++e)for(var i=a[e],n=0,s=i.length,r;n<s;++n)(r=i[n])&&(yield r)}var Z3=[null];function so(a,e){this._groups=a,this._parents=e}function E1(){return new so([[document.documentElement]],Z3)}function yoe(){return this}so.prototype=E1.prototype={constructor:so,select:Xre,selectAll:Kre,selectChild:Qre,selectChildren:ase,filter:ise,data:use,enter:nse,exit:dse,join:hse,merge:_se,selection:yoe,order:mse,sort:gse,call:fse,nodes:yse,node:bse,size:vse,empty:xse,each:wse,attr:Mse,style:Wse,property:Bse,classed:Vse,text:Xse,html:qse,raise:Jse,lower:$se,append:eoe,insert:aoe,remove:noe,clone:ooe,datum:loe,on:_oe,dispatch:poe,[Symbol.iterator]:foe};function IO(a){return typeof a=="string"?new so([[document.querySelector(a)]],[document.documentElement]):new so([[a]],Z3)}function boe(a){let e;for(;e=a.sourceEvent;)a=e;return a}function voe(a,e){if(a=boe(a),e===void 0&&(e=a.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var i=t.createSVGPoint();return i.x=a.clientX,i.y=a.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();return[a.clientX-n.left-e.clientLeft,a.clientY-n.top-e.clientTop]}}return[a.pageX,a.pageY]}function xoe(a){return typeof a=="string"?new so([document.querySelectorAll(a)],[document.documentElement]):new so([hO(a)],Z3)}var woe={value:()=>{}};function CO(){for(var a=0,e=arguments.length,t={},i;a<e;++a){if(!(i=arguments[a]+"")||i in t||/[\s.]/.test(i))throw new Error("illegal type: "+i);t[i]=[]}return new h2(t)}function h2(a){this._=a}function Ioe(a,e){return a.trim().split(/^|\s+/).map(function(t){var i="",n=t.indexOf(".");if(n>=0&&(i=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}})}h2.prototype=CO.prototype={constructor:h2,on:function(a,e){var t=this._,i=Ioe(a+"",t),n,s=-1,r=i.length;if(arguments.length<2){for(;++s<r;)if((n=(a=i[s]).type)&&(n=Coe(t[n],a.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<r;)if(n=(a=i[s]).type)t[n]=m9(t[n],a.name,e);else if(e==null)for(n in t)t[n]=m9(t[n],a.name,null);return this},copy:function(){var a={},e=this._;for(var t in e)a[t]=e[t].slice();return new h2(a)},call:function(a,e){if((n=arguments.length-2)>0)for(var t=new Array(n),i=0,n,s;i<n;++i)t[i]=arguments[i+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(s=this._[a],i=0,n=s.length;i<n;++i)s[i].value.apply(e,t)},apply:function(a,e,t){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var i=this._[a],n=0,s=i.length;n<s;++n)i[n].value.apply(e,t)}};function Coe(a,e){for(var t=0,i=a.length,n;t<i;++t)if((n=a[t]).name===e)return n.value}function m9(a,e,t){for(var i=0,n=a.length;i<n;++i)if(a[i].name===e){a[i]=woe,a=a.slice(0,i).concat(a.slice(i+1));break}return t!=null&&a.push({name:e,value:t}),a}var Yp=0,Vy=0,Cy=0,AO=1e3,Cx,Zy,Ax=0,fm=0,$w=0,t1=typeof performance=="object"&&performance.now?performance:Date,SO=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function z3(){return fm||(SO(Aoe),fm=t1.now()+$w)}function Aoe(){fm=0}function Sx(){this._call=this._time=this._next=null}Sx.prototype=TO.prototype={constructor:Sx,restart:function(a,e,t){if(typeof a!="function")throw new TypeError("callback is not a function");t=(t==null?z3():+t)+(e==null?0:+e),!this._next&&Zy!==this&&(Zy?Zy._next=this:Cx=this,Zy=this),this._call=a,this._time=t,s4()},stop:function(){this._call&&(this._call=null,this._time=1/0,s4())}};function TO(a,e,t){var i=new Sx;return i.restart(a,e,t),i}function Soe(){z3(),++Yp;for(var a=Cx,e;a;)(e=fm-a._time)>=0&&a._call.call(void 0,e),a=a._next;--Yp}function g9(){fm=(Ax=t1.now())+$w,Yp=Vy=0;try{Soe()}finally{Yp=0,Eoe(),fm=0}}function Toe(){var a=t1.now(),e=a-Ax;e>AO&&($w-=e,Ax=a)}function Eoe(){for(var a,e=Cx,t,i=1/0;e;)e._call?(i>e._time&&(i=e._time),a=e,e=e._next):(t=e._next,e._next=null,e=a?a._next=t:Cx=t);Zy=a,s4(i)}function s4(a){if(!Yp){Vy&&(Vy=clearTimeout(Vy));var e=a-fm;e>24?(a<1/0&&(Vy=setTimeout(g9,a-t1.now()-$w)),Cy&&(Cy=clearInterval(Cy))):(Cy||(Ax=t1.now(),Cy=setInterval(Toe,AO)),Yp=1,SO(g9))}}function p9(a,e,t){var i=new Sx;return e=e==null?0:+e,i.restart(n=>{i.stop(),a(n+e)},e,t),i}var Moe=CO("start","end","cancel","interrupt"),Loe=[],EO=0,f9=1,o4=2,_2=3,y9=4,l4=5,m2=6;function eI(a,e,t,i,n,s){var r=a.__transition;if(!r)a.__transition={};else if(t in r)return;Roe(a,t,{name:e,index:i,group:n,on:Moe,tween:Loe,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:EO})}function U3(a,e){var t=_u(a,e);if(t.state>EO)throw new Error("too late; already scheduled");return t}function hc(a,e){var t=_u(a,e);if(t.state>_2)throw new Error("too late; already running");return t}function _u(a,e){var t=a.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function Roe(a,e,t){var i=a.__transition,n;i[e]=t,t.timer=TO(s,0,t.time);function s(h){t.state=f9,t.timer.restart(r,t.delay,t.time),t.delay<=h&&r(h-t.delay)}function r(h){var g,b,v,C;if(t.state!==f9)return c();for(g in i)if(C=i[g],C.name===t.name){if(C.state===_2)return p9(r);C.state===y9?(C.state=m2,C.timer.stop(),C.on.call("interrupt",a,a.__data__,C.index,C.group),delete i[g]):+g<e&&(C.state=m2,C.timer.stop(),C.on.call("cancel",a,a.__data__,C.index,C.group),delete i[g])}if(p9(function(){t.state===_2&&(t.state=y9,t.timer.restart(l,t.delay,t.time),l(h))}),t.state=o4,t.on.call("start",a,a.__data__,t.index,t.group),t.state===o4){for(t.state=_2,n=new Array(v=t.tween.length),g=0,b=-1;g<v;++g)(C=t.tween[g].value.call(a,a.__data__,t.index,t.group))&&(n[++b]=C);n.length=b+1}}function l(h){for(var g=h<t.duration?t.ease.call(null,h/t.duration):(t.timer.restart(c),t.state=l4,1),b=-1,v=n.length;++b<v;)n[b].call(a,g);t.state===l4&&(t.on.call("end",a,a.__data__,t.index,t.group),c())}function c(){t.state=m2,t.timer.stop(),delete i[e];for(var h in i)return;delete a.__transition}}function koe(a,e){var t=a.__transition,i,n,s=!0,r;if(t){e=e==null?null:e+"";for(r in t){if((i=t[r]).name!==e){s=!1;continue}n=i.state>o4&&i.state<l4,i.state=m2,i.timer.stop(),i.on.call(n?"interrupt":"cancel",a,a.__data__,i.index,i.group),delete t[r]}s&&delete a.__transition}}function Woe(a){return this.each(function(){koe(this,a)})}function X3(a,e,t){a.prototype=e.prototype=t,t.constructor=a}function MO(a,e){var t=Object.create(a.prototype);for(var i in e)t[i]=e[i];return t}function M1(){}var a1=.7,Tx=1/a1,Ap="\\s*([+-]?\\d+)\\s*",i1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ec="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Goe=/^#([0-9a-f]{3,8})$/,Ooe=new RegExp(`^rgb\\(${Ap},${Ap},${Ap}\\)$`),Poe=new RegExp(`^rgb\\(${ec},${ec},${ec}\\)$`),Boe=new RegExp(`^rgba\\(${Ap},${Ap},${Ap},${i1}\\)$`),Foe=new RegExp(`^rgba\\(${ec},${ec},${ec},${i1}\\)$`),Noe=new RegExp(`^hsl\\(${i1},${ec},${ec}\\)$`),Doe=new RegExp(`^hsla\\(${i1},${ec},${ec},${i1}\\)$`),b9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};X3(M1,ym,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:v9,formatHex:v9,formatHex8:Voe,formatHsl:Zoe,formatRgb:x9,toString:x9});function v9(){return this.rgb().formatHex()}function Voe(){return this.rgb().formatHex8()}function Zoe(){return LO(this).formatHsl()}function x9(){return this.rgb().formatRgb()}function ym(a){var e,t;return a=(a+"").trim().toLowerCase(),(e=Goe.exec(a))?(t=e[1].length,e=parseInt(e[1],16),t===6?w9(e):t===3?new ko(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Av(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Av(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Ooe.exec(a))?new ko(e[1],e[2],e[3],1):(e=Poe.exec(a))?new ko(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Boe.exec(a))?Av(e[1],e[2],e[3],e[4]):(e=Foe.exec(a))?Av(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Noe.exec(a))?A9(e[1],e[2]/100,e[3]/100,1):(e=Doe.exec(a))?A9(e[1],e[2]/100,e[3]/100,e[4]):b9.hasOwnProperty(a)?w9(b9[a]):a==="transparent"?new ko(NaN,NaN,NaN,0):null}function w9(a){return new ko(a>>16&255,a>>8&255,a&255,1)}function Av(a,e,t,i){return i<=0&&(a=e=t=NaN),new ko(a,e,t,i)}function zoe(a){return a instanceof M1||(a=ym(a)),a?(a=a.rgb(),new ko(a.r,a.g,a.b,a.opacity)):new ko}function u4(a,e,t,i){return arguments.length===1?zoe(a):new ko(a,e,t,i??1)}function ko(a,e,t,i){this.r=+a,this.g=+e,this.b=+t,this.opacity=+i}X3(ko,u4,MO(M1,{brighter(a){return a=a==null?Tx:Math.pow(Tx,a),new ko(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=a==null?a1:Math.pow(a1,a),new ko(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new ko(am(this.r),am(this.g),am(this.b),Ex(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:I9,formatHex:I9,formatHex8:Uoe,formatRgb:C9,toString:C9}));function I9(){return`#${q_(this.r)}${q_(this.g)}${q_(this.b)}`}function Uoe(){return`#${q_(this.r)}${q_(this.g)}${q_(this.b)}${q_((isNaN(this.opacity)?1:this.opacity)*255)}`}function C9(){const a=Ex(this.opacity);return`${a===1?"rgb(":"rgba("}${am(this.r)}, ${am(this.g)}, ${am(this.b)}${a===1?")":`, ${a})`}`}function Ex(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function am(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function q_(a){return a=am(a),(a<16?"0":"")+a.toString(16)}function A9(a,e,t,i){return i<=0?a=e=t=NaN:t<=0||t>=1?a=e=NaN:e<=0&&(a=NaN),new ql(a,e,t,i)}function LO(a){if(a instanceof ql)return new ql(a.h,a.s,a.l,a.opacity);if(a instanceof M1||(a=ym(a)),!a)return new ql;if(a instanceof ql)return a;a=a.rgb();var e=a.r/255,t=a.g/255,i=a.b/255,n=Math.min(e,t,i),s=Math.max(e,t,i),r=NaN,l=s-n,c=(s+n)/2;return l?(e===s?r=(t-i)/l+(t<i)*6:t===s?r=(i-e)/l+2:r=(e-t)/l+4,l/=c<.5?s+n:2-s-n,r*=60):l=c>0&&c<1?0:r,new ql(r,l,c,a.opacity)}function Xoe(a,e,t,i){return arguments.length===1?LO(a):new ql(a,e,t,i??1)}function ql(a,e,t,i){this.h=+a,this.s=+e,this.l=+t,this.opacity=+i}X3(ql,Xoe,MO(M1,{brighter(a){return a=a==null?Tx:Math.pow(Tx,a),new ql(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=a==null?a1:Math.pow(a1,a),new ql(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,n=2*t-i;return new ko(uA(a>=240?a-240:a+120,n,i),uA(a,n,i),uA(a<120?a+240:a-120,n,i),this.opacity)},clamp(){return new ql(S9(this.h),Sv(this.s),Sv(this.l),Ex(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=Ex(this.opacity);return`${a===1?"hsl(":"hsla("}${S9(this.h)}, ${Sv(this.s)*100}%, ${Sv(this.l)*100}%${a===1?")":`, ${a})`}`}}));function S9(a){return a=(a||0)%360,a<0?a+360:a}function Sv(a){return Math.max(0,Math.min(1,a||0))}function uA(a,e,t){return(a<60?e+(t-e)*a/60:a<180?t:a<240?e+(t-e)*(240-a)/60:e)*255}const H3=a=>()=>a;function Hoe(a,e){return function(t){return a+t*e}}function Yoe(a,e,t){return a=Math.pow(a,t),e=Math.pow(e,t)-a,t=1/t,function(i){return Math.pow(a+i*e,t)}}function Koe(a){return(a=+a)==1?RO:function(e,t){return t-e?Yoe(e,t,a):H3(isNaN(e)?t:e)}}function RO(a,e){var t=e-a;return t?Hoe(a,t):H3(isNaN(a)?e:a)}const Mx=function a(e){var t=Koe(e);function i(n,s){var r=t((n=u4(n)).r,(s=u4(s)).r),l=t(n.g,s.g),c=t(n.b,s.b),h=RO(n.opacity,s.opacity);return function(g){return n.r=r(g),n.g=l(g),n.b=c(g),n.opacity=h(g),n+""}}return i.gamma=a,i}(1);function qoe(a,e){e||(e=[]);var t=a?Math.min(e.length,a.length):0,i=e.slice(),n;return function(s){for(n=0;n<t;++n)i[n]=a[n]*(1-s)+e[n]*s;return i}}function joe(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function Joe(a,e){var t=e?e.length:0,i=a?Math.min(t,a.length):0,n=new Array(i),s=new Array(t),r;for(r=0;r<i;++r)n[r]=Y3(a[r],e[r]);for(;r<t;++r)s[r]=e[r];return function(l){for(r=0;r<i;++r)s[r]=n[r](l);return s}}function Qoe(a,e){var t=new Date;return a=+a,e=+e,function(i){return t.setTime(a*(1-i)+e*i),t}}function Xl(a,e){return a=+a,e=+e,function(t){return a*(1-t)+e*t}}function $oe(a,e){var t={},i={},n;(a===null||typeof a!="object")&&(a={}),(e===null||typeof e!="object")&&(e={});for(n in e)n in a?t[n]=Y3(a[n],e[n]):i[n]=e[n];return function(s){for(n in t)i[n]=t[n](s);return i}}var c4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cA=new RegExp(c4.source,"g");function ele(a){return function(){return a}}function tle(a){return function(e){return a(e)+""}}function kO(a,e){var t=c4.lastIndex=cA.lastIndex=0,i,n,s,r=-1,l=[],c=[];for(a=a+"",e=e+"";(i=c4.exec(a))&&(n=cA.exec(e));)(s=n.index)>t&&(s=e.slice(t,s),l[r]?l[r]+=s:l[++r]=s),(i=i[0])===(n=n[0])?l[r]?l[r]+=n:l[++r]=n:(l[++r]=null,c.push({i:r,x:Xl(i,n)})),t=cA.lastIndex;return t<e.length&&(s=e.slice(t),l[r]?l[r]+=s:l[++r]=s),l.length<2?c[0]?tle(c[0].x):ele(e):(e=c.length,function(h){for(var g=0,b;g<e;++g)l[(b=c[g]).i]=b.x(h);return l.join("")})}function Y3(a,e){var t=typeof e,i;return e==null||t==="boolean"?H3(e):(t==="number"?Xl:t==="string"?(i=ym(e))?(e=i,Mx):kO:e instanceof ym?Mx:e instanceof Date?Qoe:joe(e)?qoe:Array.isArray(e)?Joe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?$oe:Xl)(a,e)}function ale(a,e){return a=+a,e=+e,function(t){return Math.round(a*(1-t)+e*t)}}var T9=180/Math.PI,d4={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function WO(a,e,t,i,n,s){var r,l,c;return(r=Math.sqrt(a*a+e*e))&&(a/=r,e/=r),(c=a*t+e*i)&&(t-=a*c,i-=e*c),(l=Math.sqrt(t*t+i*i))&&(t/=l,i/=l,c/=l),a*i<e*t&&(a=-a,e=-e,c=-c,r=-r),{translateX:n,translateY:s,rotate:Math.atan2(e,a)*T9,skewX:Math.atan(c)*T9,scaleX:r,scaleY:l}}var Tv;function ile(a){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(a+"");return e.isIdentity?d4:WO(e.a,e.b,e.c,e.d,e.e,e.f)}function nle(a){return a==null||(Tv||(Tv=document.createElementNS("http://www.w3.org/2000/svg","g")),Tv.setAttribute("transform",a),!(a=Tv.transform.baseVal.consolidate()))?d4:(a=a.matrix,WO(a.a,a.b,a.c,a.d,a.e,a.f))}function GO(a,e,t,i){function n(h){return h.length?h.pop()+" ":""}function s(h,g,b,v,C,S){if(h!==b||g!==v){var L=C.push("translate(",null,e,null,t);S.push({i:L-4,x:Xl(h,b)},{i:L-2,x:Xl(g,v)})}else(b||v)&&C.push("translate("+b+e+v+t)}function r(h,g,b,v){h!==g?(h-g>180?g+=360:g-h>180&&(h+=360),v.push({i:b.push(n(b)+"rotate(",null,i)-2,x:Xl(h,g)})):g&&b.push(n(b)+"rotate("+g+i)}function l(h,g,b,v){h!==g?v.push({i:b.push(n(b)+"skewX(",null,i)-2,x:Xl(h,g)}):g&&b.push(n(b)+"skewX("+g+i)}function c(h,g,b,v,C,S){if(h!==b||g!==v){var L=C.push(n(C)+"scale(",null,",",null,")");S.push({i:L-4,x:Xl(h,b)},{i:L-2,x:Xl(g,v)})}else(b!==1||v!==1)&&C.push(n(C)+"scale("+b+","+v+")")}return function(h,g){var b=[],v=[];return h=a(h),g=a(g),s(h.translateX,h.translateY,g.translateX,g.translateY,b,v),r(h.rotate,g.rotate,b,v),l(h.skewX,g.skewX,b,v),c(h.scaleX,h.scaleY,g.scaleX,g.scaleY,b,v),h=g=null,function(C){for(var S=-1,L=v.length,R;++S<L;)b[(R=v[S]).i]=R.x(C);return b.join("")}}}var rle=GO(ile,"px, ","px)","deg)"),sle=GO(nle,", ",")",")");function ole(a,e){var t,i;return function(){var n=hc(this,a),s=n.tween;if(s!==t){i=t=s;for(var r=0,l=i.length;r<l;++r)if(i[r].name===e){i=i.slice(),i.splice(r,1);break}}n.tween=i}}function lle(a,e,t){var i,n;if(typeof t!="function")throw new Error;return function(){var s=hc(this,a),r=s.tween;if(r!==i){n=(i=r).slice();for(var l={name:e,value:t},c=0,h=n.length;c<h;++c)if(n[c].name===e){n[c]=l;break}c===h&&n.push(l)}s.tween=n}}function ule(a,e){var t=this._id;if(a+="",arguments.length<2){for(var i=_u(this.node(),t).tween,n=0,s=i.length,r;n<s;++n)if((r=i[n]).name===a)return r.value;return null}return this.each((e==null?ole:lle)(t,a,e))}function K3(a,e,t){var i=a._id;return a.each(function(){var n=hc(this,i);(n.value||(n.value={}))[e]=t.apply(this,arguments)}),function(n){return _u(n,i).value[e]}}function OO(a,e){var t;return(typeof e=="number"?Xl:e instanceof ym?Mx:(t=ym(e))?(e=t,Mx):kO)(a,e)}function cle(a){return function(){this.removeAttribute(a)}}function dle(a){return function(){this.removeAttributeNS(a.space,a.local)}}function hle(a,e,t){var i,n=t+"",s;return function(){var r=this.getAttribute(a);return r===n?null:r===i?s:s=e(i=r,t)}}function _le(a,e,t){var i,n=t+"",s;return function(){var r=this.getAttributeNS(a.space,a.local);return r===n?null:r===i?s:s=e(i=r,t)}}function mle(a,e,t){var i,n,s;return function(){var r,l=t(this),c;return l==null?void this.removeAttribute(a):(r=this.getAttribute(a),c=l+"",r===c?null:r===i&&c===n?s:(n=c,s=e(i=r,l)))}}function gle(a,e,t){var i,n,s;return function(){var r,l=t(this),c;return l==null?void this.removeAttributeNS(a.space,a.local):(r=this.getAttributeNS(a.space,a.local),c=l+"",r===c?null:r===i&&c===n?s:(n=c,s=e(i=r,l)))}}function ple(a,e){var t=Qw(a),i=t==="transform"?sle:OO;return this.attrTween(a,typeof e=="function"?(t.local?gle:mle)(t,i,K3(this,"attr."+a,e)):e==null?(t.local?dle:cle)(t):(t.local?_le:hle)(t,i,e))}function fle(a,e){return function(t){this.setAttribute(a,e.call(this,t))}}function yle(a,e){return function(t){this.setAttributeNS(a.space,a.local,e.call(this,t))}}function ble(a,e){var t,i;function n(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&yle(a,s)),t}return n._value=e,n}function vle(a,e){var t,i;function n(){var s=e.apply(this,arguments);return s!==i&&(t=(i=s)&&fle(a,s)),t}return n._value=e,n}function xle(a,e){var t="attr."+a;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var i=Qw(a);return this.tween(t,(i.local?ble:vle)(i,e))}function wle(a,e){return function(){U3(this,a).delay=+e.apply(this,arguments)}}function Ile(a,e){return e=+e,function(){U3(this,a).delay=e}}function Cle(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?wle:Ile)(e,a)):_u(this.node(),e).delay}function Ale(a,e){return function(){hc(this,a).duration=+e.apply(this,arguments)}}function Sle(a,e){return e=+e,function(){hc(this,a).duration=e}}function Tle(a){var e=this._id;return arguments.length?this.each((typeof a=="function"?Ale:Sle)(e,a)):_u(this.node(),e).duration}function Ele(a,e){if(typeof e!="function")throw new Error;return function(){hc(this,a).ease=e}}function Mle(a){var e=this._id;return arguments.length?this.each(Ele(e,a)):_u(this.node(),e).ease}function Lle(a,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;hc(this,a).ease=t}}function Rle(a){if(typeof a!="function")throw new Error;return this.each(Lle(this._id,a))}function kle(a){typeof a!="function"&&(a=mO(a));for(var e=this._groups,t=e.length,i=new Array(t),n=0;n<t;++n)for(var s=e[n],r=s.length,l=i[n]=[],c,h=0;h<r;++h)(c=s[h])&&a.call(c,c.__data__,h,s)&&l.push(c);return new gd(i,this._parents,this._name,this._id)}function Wle(a){if(a._id!==this._id)throw new Error;for(var e=this._groups,t=a._groups,i=e.length,n=t.length,s=Math.min(i,n),r=new Array(i),l=0;l<s;++l)for(var c=e[l],h=t[l],g=c.length,b=r[l]=new Array(g),v,C=0;C<g;++C)(v=c[C]||h[C])&&(b[C]=v);for(;l<i;++l)r[l]=e[l];return new gd(r,this._parents,this._name,this._id)}function Gle(a){return(a+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function Ole(a,e,t){var i,n,s=Gle(e)?U3:hc;return function(){var r=s(this,a),l=r.on;l!==i&&(n=(i=l).copy()).on(e,t),r.on=n}}function Ple(a,e){var t=this._id;return arguments.length<2?_u(this.node(),t).on.on(a):this.each(Ole(t,a,e))}function Ble(a){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==a)return;e&&e.removeChild(this)}}function Fle(){return this.on("end.remove",Ble(this._id))}function Nle(a){var e=this._name,t=this._id;typeof a!="function"&&(a=D3(a));for(var i=this._groups,n=i.length,s=new Array(n),r=0;r<n;++r)for(var l=i[r],c=l.length,h=s[r]=new Array(c),g,b,v=0;v<c;++v)(g=l[v])&&(b=a.call(g,g.__data__,v,l))&&("__data__"in g&&(b.__data__=g.__data__),h[v]=b,eI(h[v],e,t,v,h,_u(g,t)));return new gd(s,this._parents,e,t)}function Dle(a){var e=this._name,t=this._id;typeof a!="function"&&(a=_O(a));for(var i=this._groups,n=i.length,s=[],r=[],l=0;l<n;++l)for(var c=i[l],h=c.length,g,b=0;b<h;++b)if(g=c[b]){for(var v=a.call(g,g.__data__,b,c),C,S=_u(g,t),L=0,R=v.length;L<R;++L)(C=v[L])&&eI(C,e,t,L,v,S);s.push(v),r.push(g)}return new gd(s,r,e,t)}var Vle=E1.prototype.constructor;function Zle(){return new Vle(this._groups,this._parents)}function zle(a,e){var t,i,n;return function(){var s=Hp(this,a),r=(this.style.removeProperty(a),Hp(this,a));return s===r?null:s===t&&r===i?n:n=e(t=s,i=r)}}function PO(a){return function(){this.style.removeProperty(a)}}function Ule(a,e,t){var i,n=t+"",s;return function(){var r=Hp(this,a);return r===n?null:r===i?s:s=e(i=r,t)}}function Xle(a,e,t){var i,n,s;return function(){var r=Hp(this,a),l=t(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(a),Hp(this,a))),r===c?null:r===i&&c===n?s:(n=c,s=e(i=r,l))}}function Hle(a,e){var t,i,n,s="style."+e,r="end."+s,l;return function(){var c=hc(this,a),h=c.on,g=c.value[s]==null?l||(l=PO(e)):void 0;(h!==t||n!==g)&&(i=(t=h).copy()).on(r,n=g),c.on=i}}function Yle(a,e,t){var i=(a+="")=="transform"?rle:OO;return e==null?this.styleTween(a,zle(a,i)).on("end.style."+a,PO(a)):typeof e=="function"?this.styleTween(a,Xle(a,i,K3(this,"style."+a,e))).each(Hle(this._id,a)):this.styleTween(a,Ule(a,i,e),t).on("end.style."+a,null)}function Kle(a,e,t){return function(i){this.style.setProperty(a,e.call(this,i),t)}}function qle(a,e,t){var i,n;function s(){var r=e.apply(this,arguments);return r!==n&&(i=(n=r)&&Kle(a,r,t)),i}return s._value=e,s}function jle(a,e,t){var i="style."+(a+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,qle(a,e,t??""))}function Jle(a){return function(){this.textContent=a}}function Qle(a){return function(){var e=a(this);this.textContent=e??""}}function $le(a){return this.tween("text",typeof a=="function"?Qle(K3(this,"text",a)):Jle(a==null?"":a+""))}function eue(a){return function(e){this.textContent=a.call(this,e)}}function tue(a){var e,t;function i(){var n=a.apply(this,arguments);return n!==t&&(e=(t=n)&&eue(n)),e}return i._value=a,i}function aue(a){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(a==null)return this.tween(e,null);if(typeof a!="function")throw new Error;return this.tween(e,tue(a))}function iue(){for(var a=this._name,e=this._id,t=BO(),i=this._groups,n=i.length,s=0;s<n;++s)for(var r=i[s],l=r.length,c,h=0;h<l;++h)if(c=r[h]){var g=_u(c,e);eI(c,a,t,h,r,{time:g.time+g.delay+g.duration,delay:0,duration:g.duration,ease:g.ease})}return new gd(i,this._parents,a,t)}function nue(){var a,e,t=this,i=t._id,n=t.size();return new Promise(function(s,r){var l={value:r},c={value:function(){--n===0&&s()}};t.each(function(){var h=hc(this,i),g=h.on;g!==a&&(e=(a=g).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(c)),h.on=e}),n===0&&s()})}var rue=0;function gd(a,e,t,i){this._groups=a,this._parents=e,this._name=t,this._id=i}function BO(){return++rue}var Vc=E1.prototype;gd.prototype={constructor:gd,select:Nle,selectAll:Dle,selectChild:Vc.selectChild,selectChildren:Vc.selectChildren,filter:kle,merge:Wle,selection:Zle,transition:iue,call:Vc.call,nodes:Vc.nodes,node:Vc.node,size:Vc.size,empty:Vc.empty,each:Vc.each,on:Ple,attr:ple,attrTween:xle,style:Yle,styleTween:jle,text:$le,textTween:aue,remove:Fle,tween:ule,delay:Cle,duration:Tle,ease:Mle,easeVarying:Rle,end:nue,[Symbol.iterator]:Vc[Symbol.iterator]};function sue(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}var oue={time:null,delay:0,duration:250,ease:sue};function lue(a,e){for(var t;!(t=a.__transition)||!(t=t[e]);)if(!(a=a.parentNode))throw new Error(`transition ${e} not found`);return t}function uue(a){var e,t;a instanceof gd?(e=a._id,a=a._name):(e=BO(),(t=oue).time=z3(),a=a==null?null:a+"");for(var i=this._groups,n=i.length,s=0;s<n;++s)for(var r=i[s],l=r.length,c,h=0;h<l;++h)(c=r[h])&&eI(c,a,e,h,r,t||lue(c,e));return new gd(i,this._parents,a,e)}E1.prototype.interrupt=Woe;E1.prototype.transition=uue;function g2(a,e){return a==null||e==null?NaN:a<e?-1:a>e?1:a>=e?0:NaN}function cue(a,e){return a==null||e==null?NaN:e<a?-1:e>a?1:e>=a?0:NaN}function q3(a){let e,t,i;a.length!==2?(e=g2,t=(l,c)=>g2(a(l),c),i=(l,c)=>a(l)-c):(e=a===g2||a===cue?a:due,t=a,i=a);function n(l,c,h=0,g=l.length){if(h<g){if(e(c,c)!==0)return g;do{const b=h+g>>>1;t(l[b],c)<0?h=b+1:g=b}while(h<g)}return h}function s(l,c,h=0,g=l.length){if(h<g){if(e(c,c)!==0)return g;do{const b=h+g>>>1;t(l[b],c)<=0?h=b+1:g=b}while(h<g)}return h}function r(l,c,h=0,g=l.length){const b=n(l,c,h,g-1);return b>h&&i(l[b-1],c)>-i(l[b],c)?b-1:b}return{left:n,center:r,right:s}}function due(){return 0}function hue(a){return a===null?NaN:+a}const _ue=q3(g2),mue=_ue.right;q3(hue).center;const gue=mue;function pue(a,e){let t,i;if(e===void 0)for(const n of a)n!=null&&(t===void 0?n>=n&&(t=i=n):(t>n&&(t=n),i<n&&(i=n)));else{let n=-1;for(let s of a)(s=e(s,++n,a))!=null&&(t===void 0?s>=s&&(t=i=s):(t>s&&(t=s),i<s&&(i=s)))}return[t,i]}const fue=Math.sqrt(50),yue=Math.sqrt(10),bue=Math.sqrt(2);function Lx(a,e,t){const i=(e-a)/Math.max(0,t),n=Math.floor(Math.log10(i)),s=i/Math.pow(10,n),r=s>=fue?10:s>=yue?5:s>=bue?2:1;let l,c,h;return n<0?(h=Math.pow(10,-n)/r,l=Math.round(a*h),c=Math.round(e*h),l/h<a&&++l,c/h>e&&--c,h=-h):(h=Math.pow(10,n)*r,l=Math.round(a/h),c=Math.round(e/h),l*h<a&&++l,c*h>e&&--c),c<l&&.5<=t&&t<2?Lx(a,e,t*2):[l,c,h]}function vue(a,e,t){if(e=+e,a=+a,t=+t,!(t>0))return[];if(a===e)return[a];const i=e<a,[n,s,r]=i?Lx(e,a,t):Lx(a,e,t);if(!(s>=n))return[];const l=s-n+1,c=new Array(l);if(i)if(r<0)for(let h=0;h<l;++h)c[h]=(s-h)/-r;else for(let h=0;h<l;++h)c[h]=(s-h)*r;else if(r<0)for(let h=0;h<l;++h)c[h]=(n+h)/-r;else for(let h=0;h<l;++h)c[h]=(n+h)*r;return c}function h4(a,e,t){return e=+e,a=+a,t=+t,Lx(a,e,t)[2]}function xue(a,e,t){e=+e,a=+a,t=+t;const i=e<a,n=i?h4(e,a,t):h4(a,e,t);return(i?-1:1)*(n<0?1/-n:n)}function wue(a){return a}var dA=1,hA=2,_4=3,zy=4,E9=1e-6;function Iue(a){return"translate("+a+",0)"}function Cue(a){return"translate(0,"+a+")"}function Aue(a){return e=>+a(e)}function Sue(a,e){return e=Math.max(0,a.bandwidth()-e*2)/2,a.round()&&(e=Math.round(e)),t=>+a(t)+e}function Tue(){return!this.__axis}function FO(a,e){var t=[],i=null,n=null,s=6,r=6,l=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,h=a===dA||a===zy?-1:1,g=a===zy||a===hA?"x":"y",b=a===dA||a===_4?Iue:Cue;function v(C){var S=i??(e.ticks?e.ticks.apply(e,t):e.domain()),L=n??(e.tickFormat?e.tickFormat.apply(e,t):wue),R=Math.max(s,0)+l,G=e.range(),O=+G[0]+c,V=+G[G.length-1]+c,B=(e.bandwidth?Sue:Aue)(e.copy(),c),z=C.selection?C.selection():C,j=z.selectAll(".domain").data([null]),re=z.selectAll(".tick").data(S,e).order(),ne=re.exit(),te=re.enter().append("g").attr("class","tick"),le=re.select("line"),ue=re.select("text");j=j.merge(j.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),re=re.merge(te),le=le.merge(te.append("line").attr("stroke","currentColor").attr(g+"2",h*s)),ue=ue.merge(te.append("text").attr("fill","currentColor").attr(g,h*R).attr("dy",a===dA?"0em":a===_4?"0.71em":"0.32em")),C!==z&&(j=j.transition(C),re=re.transition(C),le=le.transition(C),ue=ue.transition(C),ne=ne.transition(C).attr("opacity",E9).attr("transform",function(fe){return isFinite(fe=B(fe))?b(fe+c):this.getAttribute("transform")}),te.attr("opacity",E9).attr("transform",function(fe){var be=this.parentNode.__axis;return b((be&&isFinite(be=be(fe))?be:B(fe))+c)})),ne.remove(),j.attr("d",a===zy||a===hA?r?"M"+h*r+","+O+"H"+c+"V"+V+"H"+h*r:"M"+c+","+O+"V"+V:r?"M"+O+","+h*r+"V"+c+"H"+V+"V"+h*r:"M"+O+","+c+"H"+V),re.attr("opacity",1).attr("transform",function(fe){return b(B(fe)+c)}),le.attr(g+"2",h*s),ue.attr(g,h*R).text(L),z.filter(Tue).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",a===hA?"start":a===zy?"end":"middle"),z.each(function(){this.__axis=B})}return v.scale=function(C){return arguments.length?(e=C,v):e},v.ticks=function(){return t=Array.from(arguments),v},v.tickArguments=function(C){return arguments.length?(t=C==null?[]:Array.from(C),v):t.slice()},v.tickValues=function(C){return arguments.length?(i=C==null?null:Array.from(C),v):i&&i.slice()},v.tickFormat=function(C){return arguments.length?(n=C,v):n},v.tickSize=function(C){return arguments.length?(s=r=+C,v):s},v.tickSizeInner=function(C){return arguments.length?(s=+C,v):s},v.tickSizeOuter=function(C){return arguments.length?(r=+C,v):r},v.tickPadding=function(C){return arguments.length?(l=+C,v):l},v.offset=function(C){return arguments.length?(c=+C,v):c},v}function Eue(a){return FO(_4,a)}function Mue(a){return FO(zy,a)}function Lue(a,e){switch(arguments.length){case 0:break;case 1:this.range(a);break;default:this.range(e).domain(a);break}return this}function Rue(a){return function(){return a}}function kue(a){return+a}var M9=[0,1];function rp(a){return a}function m4(a,e){return(e-=a=+a)?function(t){return(t-a)/e}:Rue(isNaN(e)?NaN:.5)}function Wue(a,e){var t;return a>e&&(t=a,a=e,e=t),function(i){return Math.max(a,Math.min(e,i))}}function Gue(a,e,t){var i=a[0],n=a[1],s=e[0],r=e[1];return n<i?(i=m4(n,i),s=t(r,s)):(i=m4(i,n),s=t(s,r)),function(l){return s(i(l))}}function Oue(a,e,t){var i=Math.min(a.length,e.length)-1,n=new Array(i),s=new Array(i),r=-1;for(a[i]<a[0]&&(a=a.slice().reverse(),e=e.slice().reverse());++r<i;)n[r]=m4(a[r],a[r+1]),s[r]=t(e[r],e[r+1]);return function(l){var c=gue(a,l,1,i)-1;return s[c](n[c](l))}}function Pue(a,e){return e.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp()).unknown(a.unknown())}function Bue(){var a=M9,e=M9,t=Y3,i,n,s,r=rp,l,c,h;function g(){var v=Math.min(a.length,e.length);return r!==rp&&(r=Wue(a[0],a[v-1])),l=v>2?Oue:Gue,c=h=null,b}function b(v){return v==null||isNaN(v=+v)?s:(c||(c=l(a.map(i),e,t)))(i(r(v)))}return b.invert=function(v){return r(n((h||(h=l(e,a.map(i),Xl)))(v)))},b.domain=function(v){return arguments.length?(a=Array.from(v,kue),g()):a.slice()},b.range=function(v){return arguments.length?(e=Array.from(v),g()):e.slice()},b.rangeRound=function(v){return e=Array.from(v),t=ale,g()},b.clamp=function(v){return arguments.length?(r=v?!0:rp,g()):r!==rp},b.interpolate=function(v){return arguments.length?(t=v,g()):t},b.unknown=function(v){return arguments.length?(s=v,b):s},function(v,C){return i=v,n=C,g()}}function Fue(){return Bue()(rp,rp)}function Nue(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function Rx(a,e){if((t=(a=e?a.toExponential(e-1):a.toExponential()).indexOf("e"))<0)return null;var t,i=a.slice(0,t);return[i.length>1?i[0]+i.slice(2):i,+a.slice(t+1)]}function Kp(a){return a=Rx(Math.abs(a)),a?a[1]:NaN}function Due(a,e){return function(t,i){for(var n=t.length,s=[],r=0,l=a[0],c=0;n>0&&l>0&&(c+l+1>i&&(l=Math.max(1,i-c)),s.push(t.substring(n-=l,n+l)),!((c+=l+1)>i));)l=a[r=(r+1)%a.length];return s.reverse().join(e)}}function Vue(a){return function(e){return e.replace(/[0-9]/g,function(t){return a[+t]})}}var Zue=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kx(a){if(!(e=Zue.exec(a)))throw new Error("invalid format: "+a);var e;return new j3({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}kx.prototype=j3.prototype;function j3(a){this.fill=a.fill===void 0?" ":a.fill+"",this.align=a.align===void 0?">":a.align+"",this.sign=a.sign===void 0?"-":a.sign+"",this.symbol=a.symbol===void 0?"":a.symbol+"",this.zero=!!a.zero,this.width=a.width===void 0?void 0:+a.width,this.comma=!!a.comma,this.precision=a.precision===void 0?void 0:+a.precision,this.trim=!!a.trim,this.type=a.type===void 0?"":a.type+""}j3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zue(a){e:for(var e=a.length,t=1,i=-1,n;t<e;++t)switch(a[t]){case".":i=n=t;break;case"0":i===0&&(i=t),n=t;break;default:if(!+a[t])break e;i>0&&(i=0);break}return i>0?a.slice(0,i)+a.slice(n+1):a}var NO;function Uue(a,e){var t=Rx(a,e);if(!t)return a+"";var i=t[0],n=t[1],s=n-(NO=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,r=i.length;return s===r?i:s>r?i+new Array(s-r+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+Rx(a,Math.max(0,e+s-1))[0]}function L9(a,e){var t=Rx(a,e);if(!t)return a+"";var i=t[0],n=t[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}const R9={"%":(a,e)=>(a*100).toFixed(e),b:a=>Math.round(a).toString(2),c:a=>a+"",d:Nue,e:(a,e)=>a.toExponential(e),f:(a,e)=>a.toFixed(e),g:(a,e)=>a.toPrecision(e),o:a=>Math.round(a).toString(8),p:(a,e)=>L9(a*100,e),r:L9,s:Uue,X:a=>Math.round(a).toString(16).toUpperCase(),x:a=>Math.round(a).toString(16)};function k9(a){return a}var W9=Array.prototype.map,G9=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Xue(a){var e=a.grouping===void 0||a.thousands===void 0?k9:Due(W9.call(a.grouping,Number),a.thousands+""),t=a.currency===void 0?"":a.currency[0]+"",i=a.currency===void 0?"":a.currency[1]+"",n=a.decimal===void 0?".":a.decimal+"",s=a.numerals===void 0?k9:Vue(W9.call(a.numerals,String)),r=a.percent===void 0?"%":a.percent+"",l=a.minus===void 0?"−":a.minus+"",c=a.nan===void 0?"NaN":a.nan+"";function h(b){b=kx(b);var v=b.fill,C=b.align,S=b.sign,L=b.symbol,R=b.zero,G=b.width,O=b.comma,V=b.precision,B=b.trim,z=b.type;z==="n"?(O=!0,z="g"):R9[z]||(V===void 0&&(V=12),B=!0,z="g"),(R||v==="0"&&C==="=")&&(R=!0,v="0",C="=");var j=L==="$"?t:L==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():"",re=L==="$"?i:/[%p]/.test(z)?r:"",ne=R9[z],te=/[defgprs%]/.test(z);V=V===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,V)):Math.max(0,Math.min(20,V));function le(ue){var fe=j,be=re,Pe,Be,Me;if(z==="c")be=ne(ue)+be,ue="";else{ue=+ue;var ke=ue<0||1/ue<0;if(ue=isNaN(ue)?c:ne(Math.abs(ue),V),B&&(ue=zue(ue)),ke&&+ue==0&&S!=="+"&&(ke=!1),fe=(ke?S==="("?S:l:S==="-"||S==="("?"":S)+fe,be=(z==="s"?G9[8+NO/3]:"")+be+(ke&&S==="("?")":""),te){for(Pe=-1,Be=ue.length;++Pe<Be;)if(Me=ue.charCodeAt(Pe),48>Me||Me>57){be=(Me===46?n+ue.slice(Pe+1):ue.slice(Pe))+be,ue=ue.slice(0,Pe);break}}}O&&!R&&(ue=e(ue,1/0));var Je=fe.length+ue.length+be.length,ut=Je<G?new Array(G-Je+1).join(v):"";switch(O&&R&&(ue=e(ut+ue,ut.length?G-be.length:1/0),ut=""),C){case"<":ue=fe+ue+be+ut;break;case"=":ue=fe+ut+ue+be;break;case"^":ue=ut.slice(0,Je=ut.length>>1)+fe+ue+be+ut.slice(Je);break;default:ue=ut+fe+ue+be;break}return s(ue)}return le.toString=function(){return b+""},le}function g(b,v){var C=h((b=kx(b),b.type="f",b)),S=Math.max(-8,Math.min(8,Math.floor(Kp(v)/3)))*3,L=Math.pow(10,-S),R=G9[8+S/3];return function(G){return C(L*G)+R}}return{format:h,formatPrefix:g}}var Ev,DO,VO;Hue({thousands:",",grouping:[3],currency:["$",""]});function Hue(a){return Ev=Xue(a),DO=Ev.format,VO=Ev.formatPrefix,Ev}function Yue(a){return Math.max(0,-Kp(Math.abs(a)))}function Kue(a,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Kp(e)/3)))*3-Kp(Math.abs(a)))}function que(a,e){return a=Math.abs(a),e=Math.abs(e)-a,Math.max(0,Kp(e)-Kp(a))+1}function jue(a,e,t,i){var n=xue(a,e,t),s;switch(i=kx(i??",f"),i.type){case"s":{var r=Math.max(Math.abs(a),Math.abs(e));return i.precision==null&&!isNaN(s=Kue(n,r))&&(i.precision=s),VO(i,r)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=que(n,Math.max(Math.abs(a),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=Yue(n))&&(i.precision=s-(i.type==="%")*2);break}}return DO(i)}function Jue(a){var e=a.domain;return a.ticks=function(t){var i=e();return vue(i[0],i[i.length-1],t??10)},a.tickFormat=function(t,i){var n=e();return jue(n[0],n[n.length-1],t??10,i)},a.nice=function(t){t==null&&(t=10);var i=e(),n=0,s=i.length-1,r=i[n],l=i[s],c,h,g=10;for(l<r&&(h=r,r=l,l=h,h=n,n=s,s=h);g-- >0;){if(h=h4(r,l,t),h===c)return i[n]=r,i[s]=l,e(i);if(h>0)r=Math.floor(r/h)*h,l=Math.ceil(l/h)*h;else if(h<0)r=Math.ceil(r*h)/h,l=Math.floor(l*h)/h;else break;c=h}return a},a}function ZO(){var a=Fue();return a.copy=function(){return Pue(a,ZO())},Lue.apply(a,arguments),Jue(a)}function $r(a){return function(){return a}}const g4=Math.PI,p4=2*g4,D_=1e-6,Que=p4-D_;function zO(a){this._+=a[0];for(let e=1,t=a.length;e<t;++e)this._+=arguments[e]+a[e]}function $ue(a){let e=Math.floor(a);if(!(e>=0))throw new Error(`invalid digits: ${a}`);if(e>15)return zO;const t=10**e;return function(i){this._+=i[0];for(let n=1,s=i.length;n<s;++n)this._+=Math.round(arguments[n]*t)/t+i[n]}}class ece{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?zO:$ue(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,i,n){this._append`Q${+e},${+t},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,t,i,n,s,r){this._append`C${+e},${+t},${+i},${+n},${this._x1=+s},${this._y1=+r}`}arcTo(e,t,i,n,s){if(e=+e,t=+t,i=+i,n=+n,s=+s,s<0)throw new Error(`negative radius: ${s}`);let r=this._x1,l=this._y1,c=i-e,h=n-t,g=r-e,b=l-t,v=g*g+b*b;if(this._x1===null)this._append`M${this._x1=e},${this._y1=t}`;else if(v>D_)if(!(Math.abs(b*c-h*g)>D_)||!s)this._append`L${this._x1=e},${this._y1=t}`;else{let C=i-r,S=n-l,L=c*c+h*h,R=C*C+S*S,G=Math.sqrt(L),O=Math.sqrt(v),V=s*Math.tan((g4-Math.acos((L+v-R)/(2*G*O)))/2),B=V/O,z=V/G;Math.abs(B-1)>D_&&this._append`L${e+B*g},${t+B*b}`,this._append`A${s},${s},0,0,${+(b*C>g*S)},${this._x1=e+z*c},${this._y1=t+z*h}`}}arc(e,t,i,n,s,r){if(e=+e,t=+t,i=+i,r=!!r,i<0)throw new Error(`negative radius: ${i}`);let l=i*Math.cos(n),c=i*Math.sin(n),h=e+l,g=t+c,b=1^r,v=r?n-s:s-n;this._x1===null?this._append`M${h},${g}`:(Math.abs(this._x1-h)>D_||Math.abs(this._y1-g)>D_)&&this._append`L${h},${g}`,i&&(v<0&&(v=v%p4+p4),v>Que?this._append`A${i},${i},0,1,${b},${e-l},${t-c}A${i},${i},0,1,${b},${this._x1=h},${this._y1=g}`:v>D_&&this._append`A${i},${i},0,${+(v>=g4)},${b},${this._x1=e+i*Math.cos(s)},${this._y1=t+i*Math.sin(s)}`)}rect(e,t,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function UO(a){let e=3;return a.digits=function(t){if(!arguments.length)return e;if(t==null)e=null;else{const i=Math.floor(t);if(!(i>=0))throw new RangeError(`invalid digits: ${t}`);e=i}return a},()=>new ece(e)}function XO(a){return typeof a=="object"&&"length"in a?a:Array.from(a)}function HO(a){this._context=a}HO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(a,e){switch(a=+a,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,e):this._context.moveTo(a,e);break;case 1:this._point=2;default:this._context.lineTo(a,e);break}}};function YO(a){return new HO(a)}function KO(a){return a[0]}function qO(a){return a[1]}function jO(a,e){var t=$r(!0),i=null,n=YO,s=null,r=UO(l);a=typeof a=="function"?a:a===void 0?KO:$r(a),e=typeof e=="function"?e:e===void 0?qO:$r(e);function l(c){var h,g=(c=XO(c)).length,b,v=!1,C;for(i==null&&(s=n(C=r())),h=0;h<=g;++h)!(h<g&&t(b=c[h],h,c))===v&&((v=!v)?s.lineStart():s.lineEnd()),v&&s.point(+a(b,h,c),+e(b,h,c));if(C)return s=null,C+""||null}return l.x=function(c){return arguments.length?(a=typeof c=="function"?c:$r(+c),l):a},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:$r(+c),l):e},l.defined=function(c){return arguments.length?(t=typeof c=="function"?c:$r(!!c),l):t},l.curve=function(c){return arguments.length?(n=c,i!=null&&(s=n(i)),l):n},l.context=function(c){return arguments.length?(c==null?i=s=null:s=n(i=c),l):i},l}function tce(a,e,t){var i=null,n=$r(!0),s=null,r=YO,l=null,c=UO(h);a=typeof a=="function"?a:a===void 0?KO:$r(+a),e=typeof e=="function"?e:$r(e===void 0?0:+e),t=typeof t=="function"?t:t===void 0?qO:$r(+t);function h(b){var v,C,S,L=(b=XO(b)).length,R,G=!1,O,V=new Array(L),B=new Array(L);for(s==null&&(l=r(O=c())),v=0;v<=L;++v){if(!(v<L&&n(R=b[v],v,b))===G)if(G=!G)C=v,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),S=v-1;S>=C;--S)l.point(V[S],B[S]);l.lineEnd(),l.areaEnd()}G&&(V[v]=+a(R,v,b),B[v]=+e(R,v,b),l.point(i?+i(R,v,b):V[v],t?+t(R,v,b):B[v]))}if(O)return l=null,O+""||null}function g(){return jO().defined(n).curve(r).context(s)}return h.x=function(b){return arguments.length?(a=typeof b=="function"?b:$r(+b),i=null,h):a},h.x0=function(b){return arguments.length?(a=typeof b=="function"?b:$r(+b),h):a},h.x1=function(b){return arguments.length?(i=b==null?null:typeof b=="function"?b:$r(+b),h):i},h.y=function(b){return arguments.length?(e=typeof b=="function"?b:$r(+b),t=null,h):e},h.y0=function(b){return arguments.length?(e=typeof b=="function"?b:$r(+b),h):e},h.y1=function(b){return arguments.length?(t=b==null?null:typeof b=="function"?b:$r(+b),h):t},h.lineX0=h.lineY0=function(){return g().x(a).y(e)},h.lineY1=function(){return g().x(a).y(t)},h.lineX1=function(){return g().x(i).y(e)},h.defined=function(b){return arguments.length?(n=typeof b=="function"?b:$r(!!b),h):n},h.curve=function(b){return arguments.length?(r=b,s!=null&&(l=r(s)),h):r},h.context=function(b){return arguments.length?(b==null?s=l=null:l=r(s=b),h):s},h}const Xo={bisector:q3,extent:pue,axisBottom:Eue,axisLeft:Mue,scaleLinear:ZO,pointer:voe,select:IO,selectAll:xoe,area:tce,line:jO};function ace(a){const e=a.light!==void 0?a.light:!1,t=e?{top:0,right:0,bottom:0,left:0}:{top:10,right:20,bottom:30,left:40},i=a.hoverCallback!==void 0?a.hoverCallback:()=>{},n=a.outCallback!==void 0?a.outCallback:()=>{},s=a.distanceExtractor,r=a.linesConfiguration,l=Object.keys(r).length,c=Xo.bisector(le=>s(le)).left,h=a.poiExtractor,g=a.styleDefs,b=a.poiLabelAngle!==void 0?a.poiLabelAngle:-60,v=le=>String(le),C={xhover:v,yhover:v,xtick:v,ytick:v,xlabel:()=>"Distance",ylabel:()=>"Elevation",...a.formatter},S=a.lightXAxis!==void 0?a.lightXAxis:!1;let L,R,G;const O=a.scaleModifier;let V,B,z,j,re;const ne=le=>{le.each(function(ue){if(Xo.select(this).selectAll("svg").remove(),ue===void 0)return;z=Math.max(this.clientWidth-t.right-t.left,0),R=Xo.scaleLinear().range([0,z]),B=Math.max(this.clientHeight-t.top-t.bottom,0),G=Xo.scaleLinear().range([B,0]);const fe=Xo.axisBottom(R),be=Xo.axisLeft(G),Pe=l===1?Xo.area().x(We=>R(s(We))).y0(B).y1(We=>{const oa=Object.keys(r)[0];return G(r[oa].zExtractor(We))}):void 0;L=Xo.select(this).selectAll("svg").data([ue]);const Be=L.enter().append("svg");L=Xo.select(this).selectAll("svg").data([ue]),g!==void 0&&Be.append("defs").append("style").attr("type","text/css").text(g);const Me=Be.append("g");te(),Me.style("font","11px Arial"),l===1&&Me.append("path").attr("class","area").style("fill","rgba(222, 222, 222, 0.5)"),Me.insert("g",":first-child").attr("class","grid-y"),e||(Me.append("g").attr("class","x axis").attr("transform",`translate(0,${B})`),Me.append("text").attr("class","x label").attr("text-anchor","end").attr("x",z-4).attr("y",B-4),Me.append("g").attr("class","y axis"),Me.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").style("fill","grey").text(C.ylabel()),Me.append("g").attr("class","metas").attr("transform",`translate(${z+3}, 0)`)),Me.append("g").attr("class","pois");const ke=Me.append("g").attr("class","x grid-hover");ke.append("svg:line").attr("stroke-dasharray","5,5"),ke.append("text"),Me.append("rect").attr("class","overlay").attr("width",z).attr("height",B).style("fill","none").style("pointer-events","all"),L.attr("width",z+t.left+t.right).attr("height",B+t.top+t.bottom),V=L.select("g").attr("transform",`translate(${t.left},${t.top})`),re=Xo.extent(ue,We=>s(We)),R.domain(re);const Je=(()=>{let We=[];for(const oa in r){const li=Xo.extent(ue,da=>r[oa].zExtractor(da));li.every(Number.isFinite)&&(We=We.concat(li))}return[Math.min.apply(null,We),Math.max.apply(null,We)]})();if(G.domain(Je),O!==void 0)O(R,G,z,B);else{const We=(Je[1]-Je[0])*.1;G.domain([Je[0]-We,Je[1]+We])}l===1&&V.select(".area").transition().attr("d",Pe);let ut,ht,Dt;for(ht in r)Me.append("path").attr("class",`line ${ht}`).style("stroke",r[ht].color||"#F00").style("fill","none"),Dt=Me.append("g").attr("class",`y grid-hover ${ht}`),Dt.append("svg:line").attr("stroke-dasharray","5,5"),Dt.append("text"),ut=Xo.line().x(We=>R(s(We))).y(We=>G(r[ht].zExtractor(We))).defined(We=>r[ht].zExtractor(We)!==null),V.select(`.line.${ht}`).transition().attr("d",ut);re[1]>2e3?j=1e3:j=1,e||(fe.tickFormat(We=>C.xtick(We/j)),S&&fe.tickValues([0,R.domain()[1]]),be.tickFormat(We=>C.ytick(We)),V.select(".x.axis").transition().call(fe),V.select(".x.label").text(C.xlabel(j)).style("fill","grey").style("shape-rendering","crispEdges"),B/15<10&&be.ticks(B/15),V.select(".y.axis").transition().call(be)),V.select(".grid-y").transition().call(be.tickSize(-z).tickFormat(()=>"")).selectAll(".tick line").style("stroke","#ccc").style("opacity",.7),V.selectAll(".axis").selectAll("path, line").style("fill","none").style("stroke","#000").style("shape-rendering","crispEdges"),V.select(".grid-y").select("path").style("stroke","none"),V.selectAll(".grid-hover line").style("stroke","#222").style("opacity",.8),V.select(".overlay").on("mouseout",()=>ne.clearHighlight()).on("mousemove",We=>{const[oa]=Xo.pointer(We),li=R.invert(oa);ne.highlight(li)})})};ne.clearHighlight=()=>{V.selectAll(".grid-hover").style("display","none"),n.call(null)},ne.highlight=le=>{const ue=L.datum(),fe=c(ue,le);if(fe>=ue.length)return;const be=ue[fe],Pe=s(be);let Be;const Me=[],ke={};let Je;for(Je in r)Be=r[Je].zExtractor(be),Number.isFinite(Be)?(Me.push(Be),ke[Je]=Be,V.select(`.y.grid-hover.${Je}`).style("display","inline").select("line").attr("x1",R(0)).attr("y1",G(Be)).attr("x2",z).attr("y2",G(Be))):V.select(`.y.grid-hover.${Je}`).style("display","none");const ut=G(Math.max.apply(null,Me));V.select(".x.grid-hover").style("display","inline").select("line").attr("x1",R(Pe)).attr("y1",B).attr("x2",R(Pe)).attr("y2",Number.isFinite(ut)?ut:0);const ht=Pe>re[1]/2;let Dt=R(Pe);if(Dt+=ht?-10:10,V.select(".x.grid-hover text").text(C.xhover(Pe)).style("text-anchor",ht?"end":"start").attr("transform",`translate(${Dt},${B-10})`),l===1){const We=Me[0]===null?"no value":C.yhover(Me[0]);V.select(".y.grid-hover text").text(We).style("text-anchor",ht?"end":"start").attr("transform",`translate(${Dt},${G(Me[0])-10})`)}i.call(null,be,Pe,ke)},ne.showPois=le=>{le=le!==void 0?le:[];const ue=h,fe=L.select("g"),be=L.datum(),Me=fe.select(".pois").selectAll(".poi").data(le,ke=>{const Je=c(be,ue?Math.round(ue.dist(ke)*10)/10:void 0,1),ut=be[Je];if(ut){let ht;const Dt=[];for(ht in r)Dt.push(r[ht].zExtractor(ut));const We=Math.max.apply(null,Dt);ue==null||ue.z(ke,We)}return ue==null?void 0:ue.id(ke)}).enter().append("g").attr("class","poi");Me.append("text").attr("x",e?0:9).attr("dy",".35em").attr("text-anchor",e?"middle":"start"),Me.append("line").style("shape-rendering","crispEdges"),Me.style("opacity",0).transition().duration(1e3).delay(100).style("opacity",1),Me.selectAll("text").attr("transform",ke=>e?[`translate(${R(ue.dist(ke))},${G(ue.z(ke))-10})`]:[`translate(${R(ue.dist(ke))},${G(ue.z(ke))-20}) rotate(${b})`]).text(ke=>ue.sort(ke)+(e?"":` - ${ue.title(ke)}`)),Me.selectAll("line").style("stroke","grey").attr("x1",ke=>R(ue.dist(ke))).attr("y1",()=>G(G.domain()[0])).attr("x2",ke=>R(ue.dist(ke))).attr("y2",ke=>G(ue.z(ke))),Me.exit().remove()};function te(){ne.showPois([])}return ne}const ice=bt({__name:"d3-graph-elevation",props:{showTooltip:{type:Boolean,default:!0},dataset:{},highlightDistance:{},labelXFormatter:{},labelYFormatter:{},xFormatter:{},yFormatter:{}},emits:["hover:profile","out:profile"],setup(a,{emit:e}){const t=e,i=a,n=Qe();let s,r,l=(g,b,v)=>t("hover:profile",g,b,v);tr(()=>{r=IO(n.value),s=ace(h()),c()}),Kt(()=>i.highlightDistance,g=>{g&&g>0?s.highlight(g):s.clearHighlight()}),La(window,"resize",h0(c,50));function c(){s!==void 0&&r.datum(i.dataset).call(s)}function h(){return{linesConfiguration:{line1:{zExtractor:g=>{var b,v;return parseFloat((v=(b=g==null?void 0:g.values)==null?void 0:b.dhm)==null?void 0:v.toPrecision(5))||0}}},distanceExtractor:g=>g.dist??0,hoverCallback:l,outCallback:()=>t("out:profile"),formatter:{xhover:i.xFormatter,yhover:i.yFormatter,xlabel:i.labelXFormatter,ylabel:i.labelYFormatter}}}return(g,b)=>(se(),Ie("div",{class:"h-[250px]",ref_key:"graphElement",ref:n},null,512))}}),nce={key:1,class:"text-center"},rce=bt({__name:"elevation-profile",props:{profileData:{},highlightDistance:{}},setup(a){const{t:e}=ya();return(t,i)=>t.profileData?(se(),xa(ice,{key:0,dataset:t.profileData,highlightDistance:t.highlightDistance,labelXFormatter:n=>`${X(e)("Distance")} [${n===1?"m":"km"}]`,labelYFormatter:()=>`${X(e)("Elevation")} [m]`,xFormatter:n=>X(U0)(n,2),yFormatter:n=>X(_3)(n,1)},null,8,["dataset","highlightDistance","labelXFormatter","labelYFormatter","xFormatter","yFormatter"])):(se(),Ie("div",nce,i[0]||(i[0]=[q("img",{class:"inline-block min-h-64 p-1",src:Vre,alt:""},null,-1)])))}});class tI extends Nh{constructor(e,t,i){super(),i!==void 0&&t===void 0?this.setFlatCoordinates(i,e):(t=t||0,this.setCenterAndRadius(e,t,i))}clone(){const e=new tI(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){const s=this.flatCoordinates,r=e-s[0],l=t-s[1],c=r*r+l*l;if(c<n){if(c===0)for(let h=0;h<this.stride;++h)i[h]=s[h];else{const h=this.getRadius()/Math.sqrt(c);i[0]=s[0]+h*r,i[1]=s[1]+h*l;for(let g=2;g<this.stride;++g)i[g]=s[g]}return i.length=this.stride,c}return n}containsXY(e,t){const i=this.flatCoordinates,n=e-i[0],s=t-i[1];return n*n+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,i=t[this.stride]-t[0];return ic(t[0]-i,t[1]-i,t[0]+i,t[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(xr(e,t)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:pT(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,i=this.flatCoordinates[t]-this.flatCoordinates[0],n=e.slice();n[t]=n[0]+i;for(let s=1;s<t;++s)n[t+s]=e[s];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(e,t,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let s=e7(n,0,e,this.stride);n[s++]=n[0]+t;for(let r=1,l=this.stride;r<l;++r)n[s++]=n[r];n.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const i=this.getCenter(),n=this.getStride();this.setCenter(MT(i,0,i.length,n,e,t,i)),this.changed()}}tI.prototype.transform;const JO=tI;class Wx extends Jk{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(dn),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,i=e.length;t<i;++t)this.changeEventsKeys_.push(La(e[t],Ba.CHANGE,this.changed,this))}clone(){const e=new Wx(_A(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<vm(this.getExtent(),e,t))return n;const s=this.geometries_;for(let r=0,l=s.length;r<l;++r)n=s[r].closestPointXY(e,t,i,n);return n}containsXY(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)if(i[n].containsXY(e,t))return!0;return!1}computeExtent(e){Qp(e);const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)gT(e,t[i].getExtent());return e}getGeometries(){return _A(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].getType()===this.getType()?e=e.concat(t[i].getGeometriesArrayRecursive()):e.push(t[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],i=this.geometries_;let n=!1;for(let s=0,r=i.length;s<r;++s){const l=i[s],c=l.getSimplifiedGeometry(e);t.push(c),c!==l&&(n=!0)}return n?new Wx(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)if(t[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].rotate(e,t);this.changed()}scale(e,t,i){i||(i=iu(this.getExtent()));const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].scale(e,t,i);this.changed()}setGeometries(e){this.setGeometriesArray(_A(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let i=0,n=t.length;i<n;++i)t[i].applyTransform(e);this.changed()}translate(e,t){const i=this.geometries_;for(let n=0,s=i.length;n<s;++n)i[n].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function _A(a){return a.map(e=>e.clone())}const ld=Wx;function Gx(a,e,t,i,n,s,r){let l,c;const h=(t-e)/i;if(h===1)l=e;else if(h===2)l=e,c=n;else if(h!==0){let g=a[e],b=a[e+1],v=0;const C=[0];for(let R=e+i;R<t;R+=i){const G=a[R],O=a[R+1];v+=Math.sqrt((G-g)*(G-g)+(O-b)*(O-b)),C.push(v),g=G,b=O}const S=n*v,L=xU(C,S);L<0?(c=(S-C[-L-2])/(C[-L-1]-C[-L-2]),l=e+(-L-2)*i):l=e+L*i}r=r>1?r:2,s=s||new Array(r);for(let g=0;g<r;++g)s[g]=l===void 0?NaN:c===void 0?a[l+g]:jo(a[l+g],a[l+i+g],c);return s}function f4(a,e,t,i,n,s){if(t==e)return null;let r;if(n<a[e+i-1])return s?(r=a.slice(e,e+i),r[i-1]=n,r):null;if(a[t-1]<n)return s?(r=a.slice(t-i,t),r[i-1]=n,r):null;if(n==a[e+i-1])return a.slice(e,e+i);let l=e/i,c=t/i;for(;l<c;){const v=l+c>>1;n<a[(v+1)*i-1]?c=v:l=v+1}const h=a[l*i-1];if(n==h)return a.slice((l-1)*i,(l-1)*i+i);const g=a[(l+1)*i-1],b=(n-h)/(g-h);r=[];for(let v=0;v<i-1;++v)r.push(jo(a[(l-1)*i+v],a[l*i+v],b));return r.push(n),r}function sce(a,e,t,i,n,s,r){if(r)return f4(a,e,t[t.length-1],i,n,s);let l;if(n<a[i-1])return s?(l=a.slice(0,i),l[i-1]=n,l):null;if(a[a.length-1]<n)return s?(l=a.slice(a.length-i),l[i-1]=n,l):null;for(let c=0,h=t.length;c<h;++c){const g=t[c];if(e!=g){if(n<a[e+i-1])return null;if(n<=a[g-1])return f4(a,e,g,i,n,!1);e=g}}return null}function J3(a,e,t,i){let n=a[e],s=a[e+1],r=0;for(let l=e+i;l<t;l+=i){const c=a[l],h=a[l+1];r+=Math.sqrt((c-n)*(c-n)+(h-s)*(h-s)),n=c,s=h}return r}class Ox extends Nh{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){Vi(this.flatCoordinates,e),this.changed()}clone(){const e=new Ox(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<vm(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(LT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),kT(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,i,n))}forEachSegment(e){return r7(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,f4(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return _h(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Gx(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return J3(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=Gw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ox(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Ow(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ww(this.flatCoordinates,0,e,this.stride),this.changed()}}const is=Ox;class Px extends Nh{constructor(e,t,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&i)this.setFlatCoordinates(t,e),this.ends_=i;else{const n=e,s=[],r=[];for(let c=0,h=n.length;c<h;++c){const g=n[c];Vi(s,g.getFlatCoordinates()),r.push(s.length)}const l=n.length===0?this.getLayout():n[0].getLayout();this.setFlatCoordinates(l,s),this.ends_=r}}appendLineString(e){Vi(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Px(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,i,n){return n<vm(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(RT(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),WT(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,i,n))}getCoordinateAtM(e,t,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,i=i!==void 0?i:!1,sce(this.flatCoordinates,0,this.ends_,this.stride,e,t,i))}getCoordinates(){return B0(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new is(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,i=this.layout,n=[];let s=0;for(let r=0,l=t.length;r<l;++r){const c=t[r],h=new is(e.slice(s,c),i);n.push(h),s=c}return n}getLength(){const e=this.ends_;let t=0,i=0;for(let n=0,s=e.length;n<s;++n)i+=J3(this.flatCoordinates,t,e[n],this.stride),t=e[n];return i}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let i=0;const n=this.ends_,s=this.stride;for(let r=0,l=n.length;r<l;++r){const c=n[r],h=Gx(t,i,c,s,.5);Vi(e,h),i=c}return e}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=a7(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,i),new Px(t,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return cX(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=m1(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const zh=Px;class Q3 extends Nh{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){Vi(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Q3(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,i,n){if(n<vm(this.getExtent(),e,t))return n;const s=this.flatCoordinates,r=this.stride;for(let l=0,c=s.length;l<c;l+=r){const h=ad(e,t,s[l],s[l+1]);if(h<n){n=h;for(let g=0;g<r;++g)i[g]=s[l+g];i.length=r}}return n}getCoordinates(){return _h(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Zr(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,i=this.stride,n=[];for(let s=0,r=e.length;s<r;s+=i){const l=new Zr(e.slice(s,s+i),t);n.push(l)}return n}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,i=this.stride;for(let n=0,s=t.length;n<s;n+=i){const r=t[n],l=t[n+1];if(_T(e,r,l))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Ww(this.flatCoordinates,0,e,this.stride),this.changed()}}const bm=Q3;function QO(a,e,t,i){const n=[];let s=nl();for(let r=0,l=t.length;r<l;++r){const c=t[r];s=mT(a,e,c[0],i),n.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=c[c.length-1]}return n}class Bx extends Nh{constructor(e,t,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const n=e,s=[],r=[];for(let l=0,c=n.length;l<c;++l){const h=n[l],g=s.length,b=h.getEnds();for(let v=0,C=b.length;v<C;++v)b[v]+=g;Vi(s,h.getFlatCoordinates()),r.push(b)}t=n.length===0?this.getLayout():n[0].getLayout(),e=s,i=r}t!==void 0&&i?(this.setFlatCoordinates(t,e),this.endss_=i):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;Vi(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let n=0,s=t.length;n<s;++n)t[n]+=i}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let n=0;n<e;++n)t[n]=this.endss_[n].slice();const i=new Bx(this.flatCoordinates.slice(),this.layout,t);return i.applyProperties(this),i}closestPointXY(e,t,i,n){return n<vm(this.getExtent(),e,t)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iX(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),nX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,i,n))}containsXY(e,t){return uX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return aX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),IS(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,wS(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=QO(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=n7(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new bm(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;l7(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=IS(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],i=[];return t.length=sX(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,i),new Bx(t,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const i=this.endss_[e].slice(),n=i[i.length-1];if(t!==0)for(let s=0,r=i.length;s<r;++s)i[s]-=t;return new nc(this.flatCoordinates.slice(t,n),this.layout,i)}getPolygons(){const e=this.layout,t=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let r=0,l=i.length;r<l;++r){const c=i[r].slice(),h=c[c.length-1];if(s!==0)for(let b=0,v=c.length;b<v;++b)c[b]-=s;const g=new nc(t.slice(s,h),e,c);n.push(g),s=h}return n}getType(){return"MultiPolygon"}intersectsExtent(e){return dX(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=t7(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const n=i[i.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const L1=Bx,qg=new Map;function oce(){qg.clear()}class lce{styleSerialToStyle(e){return e?JSON.parse(decodeURIComponent(e))||[]:[]}styleLocalStorageToStyle(e){return e?JSON.parse(e).medium||[]:[]}styleToSerial(e){return e&&e.length>0?JSON.stringify(e):""}styleToLocalStorage(e){return e&&e.length>0?JSON.stringify({medium:e}):""}}const Mv=new lce;var Ko=(a=>(a[a.simpleStyle=0]="simpleStyle",a[a.mediumStyle=1]="mediumStyle",a[a.advancedStyle=2]="advancedStyle",a))(Ko||{});const uce=["line","fill","symbol","fill-extrusion","background","hillshade"],cce="https://vectortiles-staging.geoportail.lu",dce="https://migration.geoportail.lu/getvtstyle",hce="https://migration.geoportail.lu/uploadvtstyle",_ce="https://migration.geoportail.lu/deletevtstyle";class mce{constructor(){_a(this,"_vectortilesUrl",cce);_a(this,"_mvtStylesGetUrl",dce);_a(this,"_mvtStylesUploadUrl",hce);_a(this,"_mvtStylesDeleteUrl",_ce)}get vectortilesUrl(){return this._vectortilesUrl===void 0&&console.warn("Warning: vectortilesUrl is not set."),this._vectortilesUrl}get mvtStylesGetUrl(){return this._mvtStylesGetUrl===void 0&&console.warn("Warning: mvtStylesGetUrl is not set."),this._mvtStylesGetUrl}get mvtStylesUploadUrl(){return this._mvtStylesUploadUrl===void 0&&console.warn("Warning: mvtStylesUploadUrl is not set."),this._mvtStylesUploadUrl}get mvtStylesDeleteUrl(){return this._mvtStylesDeleteUrl===void 0&&console.warn("Warning: mvtStylesDeleteUrl is not set."),this._mvtStylesDeleteUrl}setRegisterUrl_v3(e){e.get&&(this._mvtStylesGetUrl=e.get),e.upload&&(this._mvtStylesUploadUrl=e.upload),e.delete&&(this._mvtStylesDeleteUrl=e.delete),e.vectortiles&&(this._vectortilesUrl=e.vectortiles),console.warn("Deprecated: StylesUrlHelper.setRegisterUrl_v3() is meant to be removed when v4 is fully operational")}}const Uy=new mce,ud=()=>({bg_layers:[{icon_id:"route",vector_id:"roadmap",simple_style_class:"road",medium_style_class:"road",expert_style_class:"maputnik",id:556,is_default:!0},{icon_id:"topo",vector_id:"topomap",medium_style_class:"topo",expert_style_class:"maputnik",id:529},{icon_id:"topo_bw",vector_id:"topomap_gray",medium_style_class:"topo",expert_style_class:"maputnik",id:502},{icon_id:"ortho",id:530},{icon_id:"hybrid",id:501},{icon_id:"blank",id:0}],bg_layer_theme_defaults:{tourisme:502},simple_styles:{road:[{unlocalized_label:"Light grey",hillshade:!1,colors:["#ffffff","#ffffff","#d6e0d7","#e1e1e1","#cccccc","#f2f2f2"],selected:!1},{unlocalized_label:"Dark grey",hillshade:!1,colors:["#808080","#808080","#494b4a","#505052","#232426","#454545"],selected:!1},{unlocalized_label:"Dark sand",hillshade:!1,colors:["#9e9375","#9e9375","#6b6249","#403928","#b8aa84","#1a1814"],selected:!1},{unlocalized_label:"Kids",hillshade:!1,colors:["#f9c50d","#ffffff","#839836","#d6d3ce","#2a5ba8","#eeeeee"],selected:!1},{unlocalized_label:"Light mauve",hillshade:!1,colors:["#f3edf5","#f3edf5","#9d7da8","#caa9d1","#613b5c","#e5d3e6"],selected:!1},{unlocalized_label:"Light Blue",hillshade:!1,colors:["#dceaf5","#dceaf5","#5598cf","#81b7e3","#3b576e","#b6cde0"],selected:!1}]},medium_default_styles:{road:[{label:"Roads primary",color:"#f7f7f7",lines:["lu_road_trunk_primary","lu_bridge_major","lu_tunnel_major","lu_road_major_motorway"],visible:!0},{label:"Roads secondary",color:"#f7f7f7",lines:["lu_road_minor","lu_road_secondary_tertiary","lu_bridge_minor","lu_road_path","lu_bridge_path","lu_bridge_railway case","lu_bridge_path case"],visible:!0},{label:"Vegetation",color:"#B8D293",opacity:"1",fills:["lu_landcover_wood","lu_landcover_grass","lu_landuse_stadium","lu_landuse_cemetery"],visible:!0},{label:"Buildings",color:"#D6AA85",opacity:"1",fillExtrusions:["lu_building-3d_public","lu_building-3d"],fills:["lu_building","lu_building_public"],lines:["lu_bridge_railway","lu_railway","lu_tunnel_railway"],visible:!0},{label:"Water",color:"#94c1e1",lines:["lu_waterway","lu_waterway_tunnel","lu_waterway_intermittent"],fills:["lu_water"],visible:!0},{label:"Background",color:"#e7e7e7",backgrounds:["background"],visible:!0},{label:"Hillshade",hillshades:["hillshade"],visible:!0}],topo:[{label:"Primary Names",symbols:["lu_place-label_other","lu_place-label_city","lu_place-label_canton","lu_country-label-other","lu_country-label","place_label_other","place_label_city","country_label-other","country_label"],visible:!0},{label:"Secondary Names",symbols:["lu_place-label_isolated","lu_place-label_locality_forest","lu_place-label_locality_lieudit"],visible:!0},{label:"Transport",lines:["lu_tunnel_track-casing","lu_tunnel_major_motorway-casing","lu_tunnel_railway_transit","lu_tunnel_railway","lu_tunnel_railway-hatching","lu_tunnel_path","lu_tunnel_track","lu_tunnel_minor","lu_tunnel_major_motorway","lu_tunnel_secondary_tertiary","lu_tunnel_trunk_primary","lu_road_track-casing","lu_road_minor-casing","lu_road_major_motorway-casing","lu_road_secondary_tertiary-casing","lu_road_trunk_primary-casing","lu_road_pier","lu_road_path","lu_road_track","lu_road_minor","lu_road_major_motorway","lu_road_secondary_tertiary","lu_road_trunk_primary","lu_tram","lu_tram-hatching","lu_railway_transit","lu_railway","lu_railway-hatching","lu_bridge_railway-casing","lu_bridge_track-casing","lu_bridge_path-casing","lu_bridge_minor-casing","lu_bridge_major_motorway-casing","lu_bridge_secondary_tertiary-casing","lu_bridge_trunk_primary-casing","lu_bridge_railway","lu_bridge_path","lu_bridge_track","lu_bridge_minor","lu_bridge_major_motorway","lu_bridge_secondary_tertiary","lu_bridge_trunk_primary","tunnel_track-casing","tunnel_major_motorway-casing","tunnel_railway_transit","tunnel_railway_transit-hatching","tunnel_railway","tunnel_railway-hatching","tunnel_path","tunnel_track","tunnel_minor","tunnel_major_motorway","tunnel_secondary_tertiary","tunnel_trunk_primary","road_track-casing","road_minor-casing","road_major_motorway-casing","road_secondary_tertiary-casing","road_trunk_primary-casing","road_pier","road_path","road_track","road_minor","road_major_motorway","road_secondary_tertiary","road_trunk_primary","railway-transit","railway-transit-hatching","railway","railway-hatching","bridge_railway-casing","bridge_path-casing","bridge_track_casing","bridge_minor-casing","bridge_major_motorway-casing","bridge_secondary_tertiary-casing","bridge_trunk_primary-casing","bridge_railway","bridge_path","bridge_track","bridge_minor","bridge_major_motorway","bridge_secondary_tertiary","bridge_trunk_primary"],symbols:["lu_road_major-label","lu_motorway-shield","lu_road-shield"],visible:!0},{label:"Vegetation",fills:["lu_landuse_stadium","lu_landuse_cemetery","lu_landuse_gras","lu_landuse_park","lu_landuse_park-outline","lu_landuse_vineyard","lu_landuse_orchard","lu_landuse_wood","landcover_grass","landcover_wood"],visible:!0},{label:"Electricity",fills:["lu_power_station","lu_power_pylone"],lines:["lu_power_line","lu_power_station-outline"],symbols:["lu_power_station-label","lu_eolienne"],visible:!0},{label:"Contours and Height Points",lines:["lu_contour-100","lu_contour-50","lu_contour-20","lu_contour-10","lu_contour"],symbols:["lu_contour-label-100","lu_contour-label-20","lu_apex-label"],visible:!0},{label:"Hillshade",hillshades:["lu_hillshade"],visible:!0}]},http_bg_server:"wmts{1-2}",https_bg_server:"wmts{3-4}",bg_wmts_server_path:"mapproxy_4_v3/wmts/{Layer}",bg_wmts_tile_template:"{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}",bg_layer_projection:"EPSG:3857",olcs_extent:[5.31,49.38,6.64,50.21],olcs_extent_projection:"EPSG:3857",bg_layer_resolutions:[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],bg_matrix_ids:["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"]});function Uh(){function a(L){const R=Ah.getItem(tO),G=Ah.getItem(aO)||"http";return(R?`${G}://${R}`:Uy.vectortilesUrl)+`/styles/${L}/style.json`}function e(L){return`${Uy.vectortilesUrl}/styles/${L}/{z}/{x}/{y}.png`}function t(L,R){const G=eu();if(L==null)return;const O=new Map;G.bgVectorSources.forEach((V,B)=>{if(B===L.id){const z={...V,xyz_custom:R};O.set(B,z)}else O.set(B,V)}),G.setBgVectorSources(O)}function i(L,R,G=!1){const O="",V=a(R),B=e(R),z={label:L,defaultMapBoxStyle:V,defaultMapBoxStyleXYZ:B,xyz:B,xyz_custom:O,style:V};if(!Ah.getItem(e1)){if(!G)return Promise.resolve(z)}return Promise.resolve(z)}function n(L){const R=ud().medium_default_styles.road;if(L){L.colors.forEach((O,V)=>{R[V].color=O});const G=R.findIndex(O=>O.label==="Hillshade");R[G].visible=L.hillshade}return R}function s(L,R,G){if(!L||!R.get(L.id))return;const O=JSON.parse(JSON.stringify(R.get(L.id)));if(O&&!(!O||!O.layers))return G&&G.forEach(V=>{O==null||O.layers.forEach((B,z)=>{for(const j of uce)if((V[`${j}s`]||[]).includes(B.id)){const ne=Object.assign({},O.layers[z].paint);V.color&&(ne[`${j}-color`]=V.color,ne[`${j}-opacity`]=1,O.layers[z].paint=ne),O.layers[z].layout=Object.assign({},O.layers[z].layout,{visibility:V.visible?"visible":"none"})}})}),O}function r(L){return L?fetch(`${Uy.mvtStylesDeleteUrl}?id=${L}`).catch(console.warn):Promise.resolve()}async function l(L,R){await r(R);const G=new FormData,O=JSON.stringify(L),V=new Blob([O],{type:"application/json"});G.append("style",V,"style.json");const B={method:"POST",body:G};return fetch(Uy.mvtStylesUploadUrl,B).then(z=>z.json()).then(z=>z.id).catch(console.warn)}function c(L,R){if(!R)return;const G=L.maplibreMap;G&&(G.loaded()?G.setStyle(R):new Promise(O=>G.once("data",O)).then(()=>G.setStyle(R)))}function h(L){return ud().bg_layers.find(R=>R.id==(L==null?void 0:L.id))}function g(L){const R=h(L);return R==null?void 0:R.vector_id}function b(L){const R=h(L);return(R==null?void 0:R.vector_id)!==void 0}function v(L){const R=h(L),G=[...R!=null&&R.simple_style_class?[Ko.simpleStyle]:[],...R!=null&&R.medium_style_class?[Ko.mediumStyle]:[],...R!=null&&R.expert_style_class?[Ko.advancedStyle]:[]];return{isEditable:(R==null?void 0:R.vector_id)!==void 0,styleEditors:G}}function C(L,R){return R.map(G=>Object.assign(G,{selected:G.colors.every((O,V)=>{var B;return((B=L[V])==null?void 0:B.color)===O})}))}function S(){const L=[],R=eu();ud().bg_layers.forEach(G=>{if(G.vector_id){const O=i(G.icon_id,G.vector_id);L.push(O.then(V=>({id:G.id,config:V})))}}),Promise.all(L).then(G=>{const O=new Map;G.forEach(V=>O.set(V.id,V.config)),R.setBgVectorSources(O)})}return{getDefaultMapBoxStyleUrl:a,getDefaultMapBoxStyleXYZ:e,setConfigForLayer:i,getRoadStyleFromSimpleStyle:n,applyDefaultStyle:s,applyConsolidatedStyle:c,getVectorId:g,setCustomStyleSerial:t,unregisterStyle:r,registerStyle:l,checkSelection:C,isLayerStyleEditable:b,getStyleCapabilitiesFromLayer:v,initBackgroundsConfigs:S}}const eu=rl("style",()=>{const a=Uh(),e=Wi(),t=Wi(new Map),i=Wi(new Map),n=Wi(!1),s=Wi(null),r=Wi();function l(S){t.value=S}function c(S){const L=new Map;i.value.forEach((R,G)=>{G!==S&&L.set(G,R)}),i.value=L}function h(S,L){const R=new Map;i.value.forEach((G,O)=>R.set(O,G)),R.set(S,L),i.value=R}function g(S){e.value=a.getRoadStyleFromSimpleStyle(S),v()}function b(S){e.value=S,v()}function v(){n.value=!1}function C(){n.value=!0}return{bgStyle:e,bgVectorSources:t,bgVectorBaseStyles:i,isExpertStyleActive:n,appliedStyle:r,removeBaseStyle:c,setBaseStyle:h,setBgVectorSources:l,setSimpleStyle:g,setStyle:b,disableExpertStyle:v,enableExpertStyle:C,styleSerial:s}},{});class gce{constructor(){_a(this,"styleWatcher")}bootstrap(){const e=eu();let t,i=!1;t=er(()=>{e.bgVectorSources&&(this.restore(!1),i&&this.persist(),i=!0,t&&t())})}persist(){const e=eu(),{bgStyle:t}=Zt(e);this.styleWatcher||(this.styleWatcher=Kt(t,(i,n)=>{if(n!==i){const s=mn();s.bgLayer&&e.bgVectorSources.has(s.bgLayer.id)&&(i&&i.length?Ia.setValue(s.bgLayer.name,i||[],Mv.styleToLocalStorage):Ia.removeItem(s.bgLayer.name),Ia.setValue(e1,i||[],Mv.styleToSerial))}},{immediate:!0}))}restore(e){const t=eu();t.setStyle(null);const n=mn().bgLayer;if(n){let s=[];e||(s=Ia.getValue(e1,Mv.styleSerialToStyle)),s.length===0&&(s=Ia.getValue(n.name,Mv.styleLocalStorageToStyle)),s&&s.length>0&&t.setStyle(s)}}}const $O=new gce;var j_=(a=>(a.LAYER_OFFLINE_TILE="tile",a.LAYER_OFFLINE_VECTOR="vector",a.LAYER_OFFLINE_BG_VECTOR="bg_vector",a.LAYER_OFFLINE_BG_WMTS="off_bg_wmts",a))(j_||{}),cd=(a=>(a.WMS="WMS",a.WFS="WFS",a.WMTS="WMTS",a.BG_WMTS="BG WMTS",a.BG_MVT="BG MVT",a["3D"]="3D",a.TILE_WMS="tileWMS",a))(cd||{});const Fx="id",y4="label",eP="layer_name",Nx="metadata",pce="queryable_id",fce="current_time",yce="time",bce="defaultMapBoxStyle";class vce{constructor(){_a(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Q2(),{get:(e,t)=>{if(typeof Q2()[t]=="function")return this.push_(t),this.pushMethodArgs_},set:(e,t,i)=>(this.push_(t,i),!0)})}push_(...e){const t=this.instructions_,i=this.zIndex+this.offset_;t[i]||(t[i]=[]),t[i].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let i=0,n=t.length;i<n;++i){const s=t[i];if(typeof s=="function"){s(e);continue}const r=t[++i];if(typeof e[s]=="function")e[s](...r);else{if(typeof r=="function"){e[s]=r(e);continue}e[s]=r}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const $3=vce,xce=5;class wce extends zk{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=xce}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return Aa()}getData(e){return null}prepareFrame(e){return Aa()}renderFrame(e,t){return Aa()}forEachFeatureAtCoordinate(e,t,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===la.LOADED||t.getState()===la.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=la.LOADED&&t!=la.ERROR&&e.addEventListener(Ba.CHANGE,this.boundHandleImageChange_),t==la.IDLE&&(e.load(),t=e.getState()),t==la.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Ice=wce,O9=[];let jg=null;function Cce(){jg=kr(1,1,void 0,{willReadFrequently:!0})}class Ace extends Ice{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Wo(),this.pixelTransform=Wo(),this.inversePixelTransform=Wo(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,i){jg||Cce(),jg.clearRect(0,0,1,1);let n;try{jg.drawImage(e,t,i,1,1,0,0,1,1),n=jg.getImageData(0,0,1,1).data}catch{return jg=null,null}return n}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,t,i){const n=this.getLayer().getClassName();let s,r;if(e&&e.className===n&&(!i||e&&e.style.backgroundColor&&vd(Cl(e.style.backgroundColor),Cl(i)))){const l=e.firstElementChild;l instanceof HTMLCanvasElement&&(r=l.getContext("2d"))}if(r&&qU(r.canvas.style.transform,t)?(this.container=e,this.context=r,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=n;let l=s.style;l.position="absolute",l.width="100%",l.height="100%",r=kr();const c=r.canvas;s.appendChild(c),l=c.style,l.position="absolute",l.left="0",l.transformOrigin="top left",this.container=s,this.context=r}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,t,i){const n=bd(i),s=Cw(i),r=Iw(i),l=ww(i);br(t.coordinateToPixelTransform,n),br(t.coordinateToPixelTransform,s),br(t.coordinateToPixelTransform,r),br(t.coordinateToPixelTransform,l);const c=this.inversePixelTransform;br(c,n),br(c,s),br(c,r),br(c,l),e.save(),e.beginPath(),e.moveTo(Math.round(n[0]),Math.round(n[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(l[0]),Math.round(l[1])),e.clip()}prepareContainer(e,t){const i=e.extent,n=e.viewState.resolution,s=e.viewState.rotation,r=e.pixelRatio,l=Math.round(fi(i)/n*r),c=Math.round(ur(i)/n*r);nu(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/r,1/r,s,-l/2,-c/2),jk(this.inversePixelTransform,this.pixelTransform);const h=KU(this.pixelTransform);if(this.useContainer(t,h,this.getBackground(e)),!this.containerReused){const g=this.context.canvas;g.width!=l||g.height!=c?(g.width=l,g.height=c):this.context.clearRect(0,0,l,c),h!==g.style.transform&&(g.style.transform=h)}}dispatchRenderEvent_(e,t,i){const n=this.getLayer();if(n.hasListener(e)){const s=new P7(e,this.inversePixelTransform,i,t);n.dispatchEvent(s)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(Ro.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(Ro.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new $3),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ro.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ro.POSTRENDER,this.context,e))}getRenderTransform(e,t,i,n,s,r,l){const c=s/2,h=r/2,g=n/t,b=-g,v=-e[0]+l,C=-e[1];return nu(this.tempTransform,c,h,g,b,-i,v,C)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const e5=Ace;class Sce extends e5{constructor(e){super(e),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(e){const t=e.layerStatesArray[e.layerIndex],i=e.pixelRatio,n=e.viewState,s=n.resolution,r=this.getLayer().getSource(),l=e.viewHints;let c=e.extent;if(t.extent!==void 0&&(c=qu(c,yl(t.extent,n.projection))),!l[Vn.ANIMATING]&&!l[Vn.INTERACTING]&&!xm(c))if(r){const h=n.projection,g=r.getImage(c,s,i,h);g&&(this.loadImage(g)?this.image=g:g.getState()===la.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=br(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!hd(s,n))return null;const r=this.image.getExtent(),l=this.image.getImage(),c=fi(r),h=Math.floor(l.width*((n[0]-r[0])/c));if(h<0||h>=l.width)return null;const g=ur(r),b=Math.floor(l.height*((r[3]-n[1])/g));return b<0||b>=l.height?null:this.getImageData(l,h,b)}renderFrame(e,t){const i=this.image,n=i.getExtent(),s=i.getResolution(),[r,l]=Array.isArray(s)?s:[s,s],c=i.getPixelRatio(),h=e.layerStatesArray[e.layerIndex],g=e.pixelRatio,b=e.viewState,v=b.center,C=b.resolution,S=g*r/(C*c),L=g*l/(C*c);this.prepareContainer(e,t);const R=this.context.canvas.width,G=this.context.canvas.height,O=this.getRenderContext(e);let V=!1,B=!0;if(h.extent){const te=yl(h.extent,b.projection);B=xr(te,e.extent),V=B&&!zu(te,e.extent),V&&this.clipUnrotated(O,e,te)}const z=i.getImage(),j=nu(this.tempTransform,R/2,G/2,S,L,0,c*(n[0]-v[0])/r,c*(v[1]-n[3])/l);this.renderedResolution=l*g/c;const re=z.width*j[0],ne=z.height*j[3];if(this.getLayer().getSource().getInterpolate()||(O.imageSmoothingEnabled=!1),this.preRender(O,e),B&&re>=.5&&ne>=.5){const te=j[4],le=j[5],ue=h.opacity;ue!==1&&(O.save(),O.globalAlpha=ue),O.drawImage(z,0,0,+z.width,+z.height,te,le,re,ne),ue!==1&&O.restore()}return this.postRender(this.context,e),V&&O.restore(),O.imageSmoothingEnabled=!0,this.container}}const Tce=Sce;class Ece extends Sm{constructor(e){e=e||{},super(e)}}const Mce=Ece;class Lce extends Mce{constructor(e){super(e)}createRenderer(){return new Tce(this)}getData(e){return super.getData(e)}}const _0=Lce;let mA;const Sp=[];function P9(a,e,t,i,n){a.beginPath(),a.moveTo(0,0),a.lineTo(e,t),a.lineTo(i,n),a.closePath(),a.save(),a.clip(),a.fillRect(0,0,Math.max(e,i)+1,Math.max(t,n)),a.restore()}function gA(a,e){return Math.abs(a[e*4]-210)>2||Math.abs(a[e*4+3]-.75*255)>2}function Rce(){if(mA===void 0){const a=kr(6,6,Sp);a.globalCompositeOperation="lighter",a.fillStyle="rgba(210, 0, 0, 0.75)",P9(a,4,5,4,0),P9(a,4,5,0,5);const e=a.getImageData(0,0,3,3).data;mA=gA(e,0)||gA(e,4)||gA(e,8),Pw(a),Sp.push(a.canvas)}return mA}function n1(a,e,t,i){const n=Ns(t,e,a);let s=yS(e,i,t);const r=e.getMetersPerUnit();r!==void 0&&(s*=r);const l=a.getMetersPerUnit();l!==void 0&&(s/=l);const c=a.getExtent();if(!c||hd(c,n)){const h=yS(a,s,n)/s;isFinite(h)&&h>0&&(s/=h)}return s}function kce(a,e,t,i){const n=iu(t);let s=n1(a,e,n,i);return(!isFinite(s)||s<=0)&&pT(t,function(r){return s=n1(a,e,r,i),isFinite(s)&&s>0}),s}function tP(a,e,t,i,n,s,r,l,c,h,g,b,v,C){const S=kr(Math.round(t*a),Math.round(t*e),Sp);if(b||(S.imageSmoothingEnabled=!1),c.length===0)return S.canvas;S.scale(t,t);function L(z){return Math.round(z*t)/t}S.globalCompositeOperation="lighter";const R=nl();c.forEach(function(z,j,re){gT(R,z.extent)});let G;const O=t/i,V=(b?1:1+Math.pow(2,-24))/O;if(!v||c.length!==1||h!==0){if(G=kr(Math.round(fi(R)*O),Math.round(ur(R)*O),Sp),b||(G.imageSmoothingEnabled=!1),n&&C){const z=(n[0]-R[0])*O,j=-(n[3]-R[3])*O,re=fi(n)*O,ne=ur(n)*O;G.rect(z,j,re,ne),G.clip()}c.forEach(function(z,j,re){if(z.image.width>0&&z.image.height>0){if(z.clipExtent){G.save();const fe=(z.clipExtent[0]-R[0])*O,be=-(z.clipExtent[3]-R[3])*O,Pe=fi(z.clipExtent)*O,Be=ur(z.clipExtent)*O;G.rect(b?fe:Math.round(fe),b?be:Math.round(be),b?Pe:Math.round(fe+Pe)-Math.round(fe),b?Be:Math.round(be+Be)-Math.round(be)),G.clip()}const ne=(z.extent[0]-R[0])*O,te=-(z.extent[3]-R[3])*O,le=fi(z.extent)*O,ue=ur(z.extent)*O;G.drawImage(z.image,h,h,z.image.width-2*h,z.image.height-2*h,b?ne:Math.round(ne),b?te:Math.round(te),b?le:Math.round(ne+le)-Math.round(ne),b?ue:Math.round(te+ue)-Math.round(te)),z.clipExtent&&G.restore()}})}const B=bd(r);return l.getTriangles().forEach(function(z,j,re){const ne=z.source,te=z.target;let le=ne[0][0],ue=ne[0][1],fe=ne[1][0],be=ne[1][1],Pe=ne[2][0],Be=ne[2][1];const Me=L((te[0][0]-B[0])/s),ke=L(-(te[0][1]-B[1])/s),Je=L((te[1][0]-B[0])/s),ut=L(-(te[1][1]-B[1])/s),ht=L((te[2][0]-B[0])/s),Dt=L(-(te[2][1]-B[1])/s),We=le,oa=ue;le=0,ue=0,fe-=We,be-=oa,Pe-=We,Be-=oa;const li=[[fe,be,0,0,Je-Me],[Pe,Be,0,0,ht-Me],[0,0,fe,be,ut-ke],[0,0,Pe,Be,Dt-ke]],da=Nz(li);if(!da)return;if(S.save(),S.beginPath(),Rce()||!b){S.moveTo(Je,ut);const sa=4,Ni=Me-Je,ka=ke-ut;for(let bi=0;bi<sa;bi++)S.lineTo(Je+L((bi+1)*Ni/sa),ut+L(bi*ka/(sa-1))),bi!=sa-1&&S.lineTo(Je+L((bi+1)*Ni/sa),ut+L((bi+1)*ka/(sa-1)));S.lineTo(ht,Dt)}else S.moveTo(Je,ut),S.lineTo(Me,ke),S.lineTo(ht,Dt);S.clip(),S.transform(da[0],da[2],da[1],da[3],Me,ke),S.translate(R[0]-We,R[3]-oa);let Ji;if(G)Ji=G.canvas,S.scale(V,-V);else{const sa=c[0],Ni=sa.extent;Ji=sa.image,S.scale(fi(Ni)/Ji.width,-ur(Ni)/Ji.height)}S.drawImage(Ji,0,0),S.restore()}),G&&(Pw(G),Sp.push(G.canvas)),g&&(S.save(),S.globalCompositeOperation="source-over",S.strokeStyle="black",S.lineWidth=1,l.getTriangles().forEach(function(z,j,re){const ne=z.target,te=(ne[0][0]-B[0])/s,le=-(ne[0][1]-B[1])/s,ue=(ne[1][0]-B[0])/s,fe=-(ne[1][1]-B[1])/s,be=(ne[2][0]-B[0])/s,Pe=-(ne[2][1]-B[1])/s;S.beginPath(),S.moveTo(ue,fe),S.lineTo(te,le),S.lineTo(be,Pe),S.closePath(),S.stroke()}),S.restore()),S.canvas}function b4(a){return Array.isArray(a)?Math.min(...a):a}const Wce=10,B9=.25;class Gce{constructor(e,t,i,n,s,r,l){this.sourceProj_=e,this.targetProj_=t;let c={};const h=l?vS(V=>br(l,Ns(V,this.targetProj_,this.sourceProj_))):um(this.targetProj_,this.sourceProj_);this.transformInv_=function(V){const B=V[0]+"/"+V[1];return c[B]||(c[B]=h(V)),c[B]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&fi(n)>=fi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?fi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?fi(this.targetProj_.getExtent()):null;const g=bd(i),b=Cw(i),v=Iw(i),C=ww(i),S=this.transformInv_(g),L=this.transformInv_(b),R=this.transformInv_(v),G=this.transformInv_(C),O=Wce+(r?Math.max(0,Math.ceil(Math.log2(mS(i)/(r*r*256*256)))):0);if(this.addQuad_(g,b,v,C,S,L,R,G,O),this.wrapsXInSource_){let V=1/0;this.triangles_.forEach(function(B,z,j){V=Math.min(V,B.source[0][0],B.source[1][0],B.source[2][0])}),this.triangles_.forEach(B=>{if(Math.max(B.source[0][0],B.source[1][0],B.source[2][0])-V>this.sourceWorldWidth_/2){const z=[[B.source[0][0],B.source[0][1]],[B.source[1][0],B.source[1][1]],[B.source[2][0],B.source[2][1]]];z[0][0]-V>this.sourceWorldWidth_/2&&(z[0][0]-=this.sourceWorldWidth_),z[1][0]-V>this.sourceWorldWidth_/2&&(z[1][0]-=this.sourceWorldWidth_),z[2][0]-V>this.sourceWorldWidth_/2&&(z[2][0]-=this.sourceWorldWidth_);const j=Math.min(z[0][0],z[1][0],z[2][0]);Math.max(z[0][0],z[1][0],z[2][0])-j<this.sourceWorldWidth_/2&&(B.source=z)}})}c={}}addTriangle_(e,t,i,n,s,r){this.triangles_.push({source:[n,s,r],target:[e,t,i]})}addQuad_(e,t,i,n,s,r,l,c,h){const g=_s([s,r,l,c]),b=this.sourceWorldWidth_?fi(g)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,C=this.sourceProj_.canWrapX()&&b>.5&&b<1;let S=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const R=_s([e,t,i,n]);S=fi(R)/this.targetWorldWidth_>B9||S}!C&&this.sourceProj_.isGlobal()&&b&&(S=b>B9||S)}if(!S&&this.maxSourceExtent_&&isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])&&isFinite(g[3])&&!xr(g,this.maxSourceExtent_))return;let L=0;if(!S&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(r[0])||!isFinite(r[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(c[0])||!isFinite(c[1]))){if(h>0)S=!0;else if(L=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(r[0])||!isFinite(r[1])?4:0)+(!isFinite(l[0])||!isFinite(l[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),L!=1&&L!=2&&L!=4&&L!=8)return}if(h>0){if(!S){const R=[(e[0]+i[0])/2,(e[1]+i[1])/2],G=this.transformInv_(R);let O;C?O=(id(s[0],v)+id(l[0],v))/2-id(G[0],v):O=(s[0]+l[0])/2-G[0];const V=(s[1]+l[1])/2-G[1];S=O*O+V*V>this.errorThresholdSquared_}if(S){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const R=[(t[0]+i[0])/2,(t[1]+i[1])/2],G=this.transformInv_(R),O=[(n[0]+e[0])/2,(n[1]+e[1])/2],V=this.transformInv_(O);this.addQuad_(e,t,R,O,s,r,G,V,h-1),this.addQuad_(O,R,i,n,V,G,l,c,h-1)}else{const R=[(e[0]+t[0])/2,(e[1]+t[1])/2],G=this.transformInv_(R),O=[(i[0]+n[0])/2,(i[1]+n[1])/2],V=this.transformInv_(O);this.addQuad_(e,R,O,n,s,G,V,c,h-1),this.addQuad_(R,t,i,O,G,r,l,V,h-1)}return}}if(C){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}L&11||this.addTriangle_(e,i,n,s,l,c),L&14||this.addTriangle_(e,i,t,s,l,r),L&&(L&13||this.addTriangle_(t,n,e,r,c,s),L&7||this.addTriangle_(t,n,i,r,c,l))}calculateSourceExtent(){const e=nl();return this.triangles_.forEach(function(t,i,n){const s=t.source;n0(e,s[0]),n0(e,s[1]),n0(e,s[2])}),e}getTriangles(){return this.triangles_}}const aP=Gce,iP=.5;class Oce extends C7{constructor(e,t,i,n,s,r,l){let c=e.getExtent();c&&e.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const g=h?qu(i,h):i,b=iu(g),v=n1(e,t,b,n),C=iP,S=new aP(e,t,g,c,v*C,n),L=S.calculateSourceExtent(),R=xm(L)?null:r(L,v,s),G=R?la.IDLE:la.EMPTY,O=R?R.getPixelRatio():1;super(i,n,O,G),this.targetProj_=t,this.maxSourceExtent_=c,this.triangulation_=S,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=R,this.sourcePixelRatio_=O,this.interpolate_=l,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==la.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==la.LOADED){const t=fi(this.targetExtent_)/this.targetResolution_,i=ur(this.targetExtent_)/this.targetResolution_;this.canvas_=tP(t,i,this.sourcePixelRatio_,b4(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==la.IDLE){this.state=la.LOADING,this.changed();const e=this.sourceImage_.getState();e==la.LOADED||e==la.ERROR?this.reproject_():(this.sourceListenerKey_=La(this.sourceImage_,Ba.CHANGE,t=>{const i=this.sourceImage_.getState();(i==la.LOADED||i==la.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){dn(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Pce=Oce;class Bce extends lu{constructor(e){super(),this.projection=Li(e.projection),this.attributions_=F9(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(i,n){t.viewResolver=i,t.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=F9(e),this.changed()}setState(e){this.state_=e,this.changed()}}function F9(a){return a?typeof a=="function"?a:(Array.isArray(a)||(a=[a]),e=>a):null}const t5=Bce,gh=4,pA={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class Fce extends sl{constructor(e,t){super(e),this.image=t}}class Nce extends t5{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const i=Rw(t,e,0);e=t[i]}return e}getImage(e,t,i,n){const s=this.getProjection();if(!s||!n||yp(s,n))return s&&(n=s),this.getImageInternal(e,t,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&yp(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==t&&rm(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Pce(s,n,e,t,i,(r,l,c)=>this.getImageInternal(r,l,c,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,i,n){if(this.loader){const s=nP(e,t,i,1),r=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===n&&(this.wantedExtent_&&zu(this.wantedExtent_,s)||zu(this.image.getExtent(),s))&&(this.wantedResolution_&&b4(this.wantedResolution_)===r||b4(this.image.getResolution())===r)))return this.image;this.wantedProjection_=n,this.wantedExtent_=s,this.wantedResolution_=r,this.image=new C7(s,r,i,this.loader),this.image.addEventListener(Ba.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let i;switch(t.getState()){case la.LOADING:this.loading=!0,i=pA.IMAGELOADSTART;break;case la.LOADED:this.loading=!1,i=pA.IMAGELOADEND;break;case la.ERROR:this.loading=!1,i=pA.IMAGELOADERROR;break;default:return}this.hasListener(i)&&this.dispatchEvent(new Fce(i,t))}}function Dce(a,e){a.getImage().src=e}function nP(a,e,t,i){const n=e/t,s=iu(a),r=hh(fi(a)/n,gh),l=hh(ur(a)/n,gh),c=hh((i-1)*r/2,gh),h=r+2*c,g=hh((i-1)*l/2,gh),b=l+2*g;return O0(s,n,0,[h,b])}const Vce=Nce;function Dx(a,e,t,i){return i!==void 0?(i[0]=a,i[1]=e,i[2]=t,i):[a,e,t]}function Zce(a,e,t){return a+"/"+e+"/"+t}function rP(a){return zce(a[0],a[1],a[2])}function zce(a,e,t){return(e<<a)+t}function Uce(a,e){const t=a[0],i=a[1],n=a[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(i,n):!0}function r1(a,e){const t=[];Object.keys(e).forEach(function(n){e[n]!==null&&e[n]!==void 0&&t.push(n+"="+encodeURIComponent(e[n]))});const i=t.join("&");return a=a.replace(/[?&]$/,""),a+=a.includes("?")?"&":"?",a+i}const Xce=/\{z\}/g,Hce=/\{x\}/g,Yce=/\{y\}/g,Kce=/\{-y\}/g;function qce(a,e,t,i,n){return a.replace(Xce,e.toString()).replace(Hce,t.toString()).replace(Yce,i.toString()).replace(Kce,function(){if(n===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(n-i).toString()})}function sP(a){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(a);if(t){const i=t[1].charCodeAt(0),n=t[2].charCodeAt(0);let s;for(s=i;s<=n;++s)e.push(a.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(a),t){const i=parseInt(t[2],10);for(let n=parseInt(t[1],10);n<=i;n++)e.push(a.replace(t[0],n.toString()));return e}return e.push(a),e}const Vx="1.3.0",N9=[101,101];function oP(a,e,t,i,n){n.WIDTH=t[0],n.HEIGHT=t[1];const s=i.getAxisOrientation(),r=fT(n.VERSION,"1.3")>=0;n[r?"CRS":"SRS"]=i.getCode();const l=r&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return n.BBOX=l.join(","),r1(a,n)}function lP(a,e,t,i,n,s,r){s=Object.assign({REQUEST:"GetMap"},s);const l=e/t,c=[pL(fi(a)/l,gh),pL(ur(a)/l,gh)];if(t!=1)switch(r){case"geoserver":const g=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+g:s.FORMAT_OPTIONS="dpi:"+g;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return oP(n,a,c,i,s)}function Zx(a,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:Vx,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},a)}function jce(a){const e=a.hidpi===void 0?!0:a.hidpi,t=Li(a.projection||"EPSG:3857"),i=a.ratio||1.5,n=a.load||S7,s=a.crossOrigin??null;return(r,l,c)=>{r=nP(r,l,c,i),c!=1&&(!e||a.serverType===void 0)&&(c=1);const h=lP(r,l,c,t,a.url,Zx(a.params,"GetMap"),a.serverType),g=new Image;return g.crossOrigin=s,n(g,h).then(b=>({image:b,extent:r,pixelRatio:c}))}}function Jce(a,e,t){if(a.url===void 0)return;const i=Li(a.projection||"EPSG:3857"),n=O0(e,t,0,N9),s={QUERY_LAYERS:a.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,Zx(a.params,"GetFeatureInfo"),a.params);const r=Qg((e[0]-n[0])/t,gh),l=Qg((n[3]-e[1])/t,gh),c=fT(s.VERSION,"1.3")>=0;return s[c?"I":"X"]=r,s[c?"J":"Y"]=l,oP(a.url,n,N9,i,s)}function Qce(a,e){if(a.url===void 0)return;const t={SERVICE:"WMS",VERSION:Vx,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const i=Li(a.projection||"EPSG:3857").getMetersPerUnit()||1,n=28e-5;t.SCALE=e*i/n}if(Object.assign(t,a.params),a.params!==void 0&&t.LAYER===void 0){const i=t.LAYERS;if(!(!Array.isArray(i)||i.length!==1))return;t.LAYER=i}return r1(a.url,t)}class $ce extends Vce{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:Dce,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,i,n){const s=Li(i),r=this.getProjection();r&&r!==s&&(t=n1(r,s,e,t),e=Ns(e,s,r));const l={url:this.url_,params:{...this.params_,...n},projection:r||s};return Jce(l,e,t)}getLegendUrl(e,t){return Qce({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,i,n){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==n)&&(this.loaderProjection_=n,this.loader=jce({crossOrigin:this.crossOrigin_,params:this.params_,projection:n,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,r)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,r),S7(s))})),super.getImageInternal(e,t,i,n))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const zx=$ce;function uP(){return Dk([5.31,49.38,6.64,50.21],Dp,tm)}function cP(a){var e;return!!((e=a==null?void 0:a.metadata)!=null&&e.hasRetina)&&oO()}function ede(a,e="https"){const t=a.imageType.split("/")[1],i=Ia.getValue(_f,N3)?"app.geoportail.lu":"geoportail.lu";return`${e==="https"?"//wmts{3-4}.":"//wmts{1-2}."}${i}/mapproxy_4_v3/wmts/{Layer}${cP(a)?"_hd":""}/{TileMatrixSet}/{TileMatrix}/{TileCol}/{TileRow}.${t}`}class tde{createOlLayer(e){const{name:t,layers:i,imageType:n,url:s,id:r}=e,l=new zx({url:s||J0.wmsProxyUrl,hidpi:oO(),serverType:"mapserver",params:{FORMAT:n,LAYERS:i},crossOrigin:"anonymous"});return new _0({properties:{"olcs.extent":uP(),label:t,id:r},source:l})}setLayerTime(e,t){const i=e.getParams();i.TIME=t,e.updateParams(i)}}const dP=new tde;class ade extends _1{constructor(e,t,i){super(),i=i||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(Ba.CHANGE)}release(){this.setState(Ca.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==Ca.EMPTY){if(this.state!==Ca.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){Aa()}getAlpha(e,t){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=t,this.transitionStarts_[e]=i;else if(i===-1)return 1;const n=t-i+1e3/60;return n>=this.transition_?1:Kk(n/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}const a5=ade;function v4(a){return a instanceof Image||a instanceof HTMLCanvasElement||a instanceof HTMLVideoElement||a instanceof ImageBitmap?a:null}const ide=new Error("disposed"),nde=[256,256];class rde extends a5{constructor(e){const t=Ca.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=v4(this.data_);return e?[e.width,e.height]:nde}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==Ca.IDLE&&this.state!==Ca.ERROR)return;this.state=Ca.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=Ca.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=Ca.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(ide),this.controller_=null),super.disposeInternal()}}const D9=rde;class sde extends a5{constructor(e,t,i,n,s,r){super(e,t,r),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=Ca.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=Ca.ERROR,this.unlistenImage_(),this.image_=ode(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=Ca.LOADED:this.state=Ca.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==Ca.ERROR&&(this.state=Ca.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==Ca.IDLE&&(this.state=Ca.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=aY(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function ode(){const a=kr(1,1);return a.fillStyle="rgba(0,0,0,0)",a.fillRect(0,0,1,1),a.canvas}const hP=sde;class _P{constructor(e,t,i,n){this.minX=e,this.maxX=t,this.minY=i,this.maxY=n}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function Pg(a,e,t,i,n){return n!==void 0?(n.minX=a,n.maxX=e,n.minY=t,n.maxY=i,n):new _P(a,e,t,i)}const mP=_P;class lde extends a5{constructor(e,t,i,n,s,r,l,c,h,g,b,v){super(s,Ca.IDLE,v),this.renderEdges_=b!==void 0?b:!1,this.pixelRatio_=l,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=n,this.wrappedTileCoord_=r||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const C=n.getTileCoordExtent(this.wrappedTileCoord_),S=this.targetTileGrid_.getExtent();let L=this.sourceTileGrid_.getExtent();const R=S?qu(C,S):C;if(mS(R)===0){this.state=Ca.EMPTY;return}const G=e.getExtent();G&&(L?L=qu(L,G):L=G);const O=n.getResolution(this.wrappedTileCoord_[0]),V=kce(e,i,R,O);if(!isFinite(V)||V<=0){this.state=Ca.EMPTY;return}const B=g!==void 0?g:iP;if(this.triangulation_=new aP(e,i,R,L,V*B,O),this.triangulation_.getTriangles().length===0){this.state=Ca.EMPTY;return}this.sourceZ_=t.getZForResolution(V);let z=this.triangulation_.calculateSourceExtent();if(L&&(e.canWrapX()?(z[1]=Sn(z[1],L[1],L[3]),z[3]=Sn(z[3],L[1],L[3])):z=qu(z,L)),!mS(z))this.state=Ca.EMPTY;else{let j=0,re=0;e.canWrapX()&&(j=fi(G),re=Math.floor((z[0]-G[0])/j)),Mk(z.slice(),e,!0).forEach(te=>{const le=t.getTileRangeForExtentAndZ(te,this.sourceZ_);for(let ue=le.minX;ue<=le.maxX;ue++)for(let fe=le.minY;fe<=le.maxY;fe++){const be=h(this.sourceZ_,ue,fe,l);if(be){const Pe=re*j;this.sourceTiles_.push({tile:be,offset:Pe})}}++re}),this.sourceTiles_.length===0&&(this.state=Ca.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var n;const i=t.tile;if(i&&i.getState()==Ca.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=t.offset,s[2]+=t.offset;const r=(n=this.clipExtent_)==null?void 0:n.slice();r&&(r[0]+=t.offset,r[2]+=t.offset),e.push({extent:s,clipExtent:r,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=Ca.ERROR;else{const t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),n=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],r=this.targetTileGrid_.getResolution(t),l=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=tP(n,s,this.pixelRatio_,l,this.sourceTileGrid_.getExtent(),r,c,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=Ca.LOADED}this.changed()}load(){if(this.state==Ca.IDLE){this.state=Ca.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const i=t.getState();if(i==Ca.IDLE||i==Ca.LOADING){e++;const n=La(t,Ba.CHANGE,s=>{const r=t.getState();(r==Ca.LOADED||r==Ca.ERROR||r==Ca.EMPTY)&&(dn(n),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},i,n){t.getState()==Ca.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(dn),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Pw(this.canvas_.getContext("2d")),Sp.push(this.canvas_),this.canvas_=null),super.release()}}const gP=lde;class ude{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Lw&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return ji(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return ji(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){ji(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}const cde=ude;function fA(a,e,t,i){return`${a},${Zce(e,t,i)}`}function yA(a,e,t){if(!(t in a))return a[t]=new Set([e]),!0;const i=a[t],n=i.has(e);return n||i.add(e),!n}function dde(a,e,t){const i=a[t];return i?i.delete(e):!1}function V9(a,e){const t=a.layerStatesArray[a.layerIndex];t.extent&&(e=qu(e,yl(t.extent,a.viewState.projection)));const i=t.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(a.viewState.projection).getExtent();n&&(e=qu(e,n))}return e}class hde extends e5{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=nl(),this.tempTileRange_=new mP(0,0,0,0),this.tempTileCoord_=Dx(0,0,0);const i=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new cde(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,i,n){const s=this.tileCache_,l=this.getLayer().getSource(),c=fA(l.getKey(),e,t,i);let h;if(s.containsKey(c))h=s.get(c);else{if(h=l.getTile(e,t,i,n.pixelRatio,n.viewState.projection),!h)return null;s.set(c,h)}return h}getTile(e,t,i,n){const s=this.getOrCreateTile(e,t,i,n);return s||null}getData(e){const t=this.frameState;if(!t)return null;const i=this.getLayer(),n=br(t.pixelToCoordinateTransform,e.slice()),s=i.getExtent();if(s&&!hd(s,n))return null;const r=t.viewState,l=i.getRenderSource(),c=l.getTileGridForProjection(r.projection),h=l.getTilePixelRatio(t.pixelRatio);for(let g=c.getZForResolution(r.resolution);g>=c.getMinZoom();--g){const b=c.getTileCoordForCoordAndZ(n,g),v=this.getTile(g,b[1],b[2],t);if(!v||v.getState()!==Ca.LOADED)continue;const C=c.getOrigin(g),S=Ps(c.getTileSize(g)),L=c.getResolution(g);let R;if(v instanceof hP||v instanceof gP)R=v.getImage();else if(v instanceof D9){if(R=v4(v.getData()),!R)continue}else continue;const G=Math.floor(h*((n[0]-C[0])/L-b[1]*S[0])),O=Math.floor(h*((C[1]-n[1])/L-b[2]*S[1])),V=Math.round(h*l.getGutterForProjection(r.projection));return this.getImageData(R,G+V,O+V)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const i=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(e,t,i,n,s){const r=e.viewState,l=this.getLayer(),c=l.getRenderSource(),h=c.getTileGridForProjection(r.projection),g=Ga(c);g in e.wantedTiles||(e.wantedTiles[g]={});const b=e.wantedTiles[g],v=l.getMapInternal(),C=Math.max(i-s,h.getMinZoom(),h.getZForResolution(Math.min(l.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):h.getResolution(0)),c.zDirection)),S=r.rotation,L=S?Tk(r.center,r.resolution,S,e.size):void 0;for(let R=i;R>=C;--R){const G=h.getTileRangeForExtentAndZ(t,R,this.tempTileRange_),O=h.getResolution(R);for(let V=G.minX;V<=G.maxX;++V)for(let B=G.minY;B<=G.maxY;++B){if(S&&!h.tileCoordIntersectsViewport([R,V,B],L))continue;const z=this.getTile(R,V,B,e);if(!z||!yA(n,z,R))continue;const re=z.getKey();if(b[re]=!0,z.getState()===Ca.IDLE&&!e.tileQueue.isKeyQueued(re)){const ne=Dx(R,V,B,this.tempTileCoord_);e.tileQueue.enqueue([z,g,h.getTileCoordCenter(ne),O])}}}}findStaleTile_(e,t){const i=this.tileCache_,n=e[0],s=e[1],r=e[2],l=this.getStaleKeys();for(let c=0;c<l.length;++c){const h=fA(l[c],n,s,r);if(i.containsKey(h)){const g=i.peek(h);if(g.getState()===Ca.LOADED)return g.endTransition(Ga(this)),yA(t,g,n),!0}}return!1}findAltTiles_(e,t,i,n){const s=e.getTileRangeForTileCoordAndZ(t,i,this.tempTileRange_);if(!s)return!1;let r=!0;const l=this.tileCache_,h=this.getLayer().getRenderSource().getKey();for(let g=s.minX;g<=s.maxX;++g)for(let b=s.minY;b<=s.maxY;++b){const v=fA(h,i,g,b);let C=!1;if(l.containsKey(v)){const S=l.peek(v);S.getState()===Ca.LOADED&&(yA(n,S,i),C=!0)}C||(r=!1)}return r}renderFrame(e,t){this.renderComplete=!0;const i=e.layerStatesArray[e.layerIndex],n=e.viewState,s=n.projection,r=n.resolution,l=n.center,c=e.pixelRatio,h=this.getLayer(),g=h.getSource(),b=g.getTileGridForProjection(s),v=b.getZForResolution(r,g.zDirection),C=b.getResolution(v),S=g.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==S&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=S):this.renderedSourceKey_=S;let L=e.extent;const R=g.getTilePixelRatio(c);this.prepareContainer(e,t);const G=this.context.canvas.width,O=this.context.canvas.height,V=i.extent&&yl(i.extent);V&&(L=qu(L,yl(i.extent)));const B=C*G/2/R,z=C*O/2/R,j=[l[0]-B,l[1]-z,l[0]+B,l[1]+z],re={};this.renderedTiles.length=0;const ne=h.getPreload();if(e.nextExtent){const Je=b.getZForResolution(n.nextResolution,g.zDirection),ut=V9(e,e.nextExtent);this.enqueueTiles(e,ut,Je,re,ne)}const te=V9(e,L);if(this.enqueueTiles(e,te,v,re,0),ne>0&&setTimeout(()=>{this.enqueueTiles(e,te,v-1,re,ne-1)},0),!(v in re))return this.container;const le=Ga(this),ue=e.time;for(const Je of re[v]){const ut=Je.getState();if(ut===Ca.EMPTY)continue;const ht=Je.tileCoord;if(ut===Ca.LOADED&&Je.getAlpha(le,ue)===1){Je.endTransition(le);continue}if(ut!==Ca.ERROR&&(this.renderComplete=!1),this.findStaleTile_(ht,re)){dde(re,Je,v),e.animate=!0;continue}if(this.findAltTiles_(b,ht,v+1,re))continue;const oa=b.getMinZoom();for(let li=v-1;li>=oa&&!this.findAltTiles_(b,ht,li,re);--li);}const fe=C/r*c/R,be=this.getRenderContext(e);nu(this.tempTransform,G/2,O/2,fe,fe,0,-G/2,-O/2),i.extent&&this.clipUnrotated(be,e,V),g.getInterpolate()||(be.imageSmoothingEnabled=!1),this.preRender(be,e);const Pe=Object.keys(re).map(Number);Pe.sort(ju);let Be;const Me=[],ke=[];for(let Je=Pe.length-1;Je>=0;--Je){const ut=Pe[Je],ht=g.getTilePixelSize(ut,c,s),We=b.getResolution(ut)/C,oa=ht[0]*We*fe,li=ht[1]*We*fe,da=b.getTileCoordForCoordAndZ(bd(j),ut),Ji=b.getTileCoordExtent(da),sa=br(this.tempTransform,[R*(Ji[0]-j[0])/C,R*(j[3]-Ji[3])/C]),Ni=R*g.getGutterForProjection(s);for(const ka of re[ut]){if(ka.getState()!==Ca.LOADED)continue;const bi=ka.tileCoord,cr=da[1]-bi[1],On=Math.round(sa[0]-(cr-1)*oa),pe=da[2]-bi[2],Ee=Math.round(sa[1]-(pe-1)*li),ze=Math.round(sa[0]-cr*oa),et=Math.round(sa[1]-pe*li),lt=On-ze,ot=Ee-et,Tt=Pe.length===1;let ft=!1;Be=[ze,et,ze+lt,et,ze+lt,et+ot,ze,et+ot];for(let vt=0,mt=Me.length;vt<mt;++vt)if(!Tt&&ut<ke[vt]){const Ot=Me[vt];xr([ze,et,ze+lt,et+ot],[Ot[0],Ot[3],Ot[4],Ot[7]])&&(ft||(be.save(),ft=!0),be.beginPath(),be.moveTo(Be[0],Be[1]),be.lineTo(Be[2],Be[3]),be.lineTo(Be[4],Be[5]),be.lineTo(Be[6],Be[7]),be.moveTo(Ot[6],Ot[7]),be.lineTo(Ot[4],Ot[5]),be.lineTo(Ot[2],Ot[3]),be.lineTo(Ot[0],Ot[1]),be.clip())}Me.push(Be),ke.push(ut),this.drawTile(ka,e,ze,et,lt,ot,Ni,Tt),ft&&be.restore(),this.renderedTiles.unshift(ka),this.updateUsedTiles(e.usedTiles,g,ka)}}if(this.renderedResolution=C,this.extentChanged=!this.renderedExtent_||!rm(this.renderedExtent_,j),this.renderedExtent_=j,this.renderedPixelRatio=c,this.postRender(this.context,e),i.extent&&be.restore(),be.imageSmoothingEnabled=!0,this.renderComplete){const Je=(ut,ht)=>{const Dt=Ga(g),We=ht.wantedTiles[Dt],oa=We?Object.keys(We).length:0;this.updateCacheSize(oa),this.tileCache_.expireCache()};e.postRenderFunctions.push(Je)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,i,n,s,r,l,c){let h;if(e instanceof D9){if(h=v4(e.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(e);if(!h)return;const g=this.getRenderContext(t),b=Ga(this),v=t.layerStatesArray[t.layerIndex],C=v.opacity*(c?e.getAlpha(b,t.time):1),S=C!==g.globalAlpha;S&&(g.save(),g.globalAlpha=C),g.drawImage(h,l,l,h.width-2*l,h.height-2*l,i,n,s,r),S&&g.restore(),C!==v.opacity?t.animate=!0:c&&e.endTransition(b)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,i){const n=Ga(t);n in e||(e[n]={}),e[n][i.getKey()]=!0}}const pP=hde,ph={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class _de extends Sm{constructor(e){e=e||{};const t=Object.assign({},e),i=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(ph.PRELOAD)}setPreload(e){this.set(ph.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(ph.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(ph.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}const mde=_de;class gde extends mde{constructor(e){super(e)}createRenderer(){return new pP(this,{cacheSize:this.getCacheSize()})}}const sp=gde,Bg=[0,0,0],jd=5;class pde{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,ji(CU(this.resolutions_,(n,s)=>s-n,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let n=0,s=this.resolutions_.length-1;n<s;++n)if(!t)t=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,ji(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=bd(i)),ji(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,ji(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:ZT,ji(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((n,s)=>{const r=new mP(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(i){const l=this.getTileRangeForExtentAndZ(i,s);r.minX=Math.max(l.minX,r.minX),r.maxX=Math.min(l.maxX,r.maxX),r.minY=Math.max(l.minY,r.minY),r.maxY=Math.min(l.maxY,r.maxY)}return r}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const n=this.getTileRangeForExtentAndZ(e,t);for(let s=n.minX,r=n.maxX;s<=r;++s)for(let l=n.minY,c=n.maxY;l<=c;++l)i([t,s,l])}forEachTileCoordParentTileRange(e,t,i,n){let s,r,l,c=null,h=e[0]-1;for(this.zoomFactor_===2?(r=e[1],l=e[2]):c=this.getTileCoordExtent(e,n);h>=this.minZoom;){if(r!==void 0&&l!==void 0?(r=Math.floor(r/2),l=Math.floor(l/2),s=Pg(r,r,l,l,i)):s=this.getTileRangeForExtentAndZ(c,h,i),t(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,r=e[2]*2;return Pg(s,s+1,r,r+1,t)}const n=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const n=e[0],s=e[1],r=e[2];if(t===n)return Pg(s,r,s,r,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-n),h=Math.floor(s*c),g=Math.floor(r*c);if(t<n)return Pg(h,h,g,g,i);const b=Math.floor(c*(s+1))-1,v=Math.floor(c*(r+1))-1;return Pg(h,b,g,v,i)}const l=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,t,i)}getTileRangeForExtentAndZ(e,t,i){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,Bg);const n=Bg[1],s=Bg[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,Bg);const r=Bg[1],l=Bg[2];return Pg(n,r,s,l,i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),n=Ps(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*n[0]*i,t[1]-(e[2]+.5)*n[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),n=this.getResolution(e[0]),s=Ps(this.getTileSize(e[0]),this.tmpSize_),r=i[0]+e[1]*s[0]*n,l=i[1]-(e[2]+1)*s[1]*n,c=r+s[0]*n,h=l+s[1]*n;return ic(r,l,c,h,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,n,s){const r=this.getZForResolution(i),l=i/this.getResolution(r),c=this.getOrigin(r),h=Ps(this.getTileSize(r),this.tmpSize_);let g=l*(e-c[0])/i/h[0],b=l*(c[1]-t)/i/h[1];return n?(g=hh(g,jd)-1,b=hh(b,jd)-1):(g=Qg(g,jd),b=Qg(b,jd)),Dx(r,g,b,s)}getTileCoordForXYAndZ_(e,t,i,n,s){const r=this.getOrigin(i),l=this.getResolution(i),c=Ps(this.getTileSize(i),this.tmpSize_);let h=(e-r[0])/l/c[0],g=(r[1]-t)/l/c[1];return n?(h=hh(h,jd)-1,g=hh(g,jd)-1):(h=Qg(h,jd),g=Qg(g,jd)),Dx(i,h,g,s)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=Rw(this.resolutions_,e,t||0);return Sn(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return s7(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let n=this.minZoom;n<t;++n)i[n]=this.getTileRangeForExtentAndZ(e,n);this.fullTileRanges_=i}}const aI=pde;class fde extends aI{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}const i5=fde;function yde(a,e){return function(t,i,n){if(!t)return;let s;const r=t[0];if(e){const l=e.getFullTileRange(r);l&&(s=l.getHeight()-1)}return qce(a,r,t[1],t[2],s)}}function bde(a,e){const t=a.length,i=new Array(t);for(let n=0;n<t;++n)i[n]=yde(a[n],e);return x4(i)}function x4(a){return a.length===1?a[0]:function(e,t,i){if(!e)return;const n=rP(e),s=id(n,a.length);return a[s](e,t,i)}}function fP(a){let e=a.getDefaultTileGrid();return e||(e=Ide(a),a.setDefaultTileGrid(e)),e}function vde(a,e,t){const i=e[0],n=a.getTileCoordCenter(e),s=n5(t);if(!hd(s,n)){const r=fi(s),l=Math.ceil((s[0]-n[0])/r);return n[0]+=r*l,a.getTileCoordForCoordAndZ(n,i)}return e}function xde(a,e,t,i){i=i!==void 0?i:"top-left";const n=yP(a,e,t);return new aI({extent:a,origin:Gz(a,i),resolutions:n,tileSize:t})}function wde(a){const e=a||{},t=e.extent||Li("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:yP(t,e.maxZoom,e.tileSize,e.maxResolution)};return new aI(i)}function yP(a,e,t,i){e=e!==void 0?e:bX,t=Ps(t!==void 0?t:ZT);const n=ur(a),s=fi(a);i=i>0?i:Math.max(s/t[0],n/t[1]);const r=e+1,l=new Array(r);for(let c=0;c<r;++c)l[c]=i/Math.pow(2,c);return l}function Ide(a,e,t,i){const n=n5(a);return xde(n,e,t,i)}function n5(a){a=Li(a);let e=a.getExtent();if(!e){const t=180*Gp.degrees/a.getMetersPerUnit();e=ic(-t,-t,t,t)}return e}class Cde extends t5{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Ps(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||Ga(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,i,n,s){return Aa()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:fP(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(t),r=Ps(n.getTileSize(e),this.tmpSize);return s==1?r:RH(r,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const i=t!==void 0?t:this.getProjection(),n=t!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=vde(n,e,i)),Uce(e,n)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class Ade extends sl{constructor(e,t){super(e),this.tile=t}}const Sde=Cde,bA={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class r5 extends Sde{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===r5.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=Ga(t),n=t.getState();let s;n==Ca.LOADING?(this.tileLoadingKeys_[i]=!0,s=bA.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==Ca.ERROR?bA.TILELOADERROR:n==Ca.LOADED?bA.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new Ade(s,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=sP(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(bde(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}}const Tde=r5;class Ede extends Tde{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Mde,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:hP,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!yp(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||yp(t,e)))return this.tileGrid;const i=Ga(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=fP(e)),this.tileGridForProjection[i]}createTile_(e,t,i,n,s,r){const l=[e,t,i],c=this.getTileCoordForTileUrlFunction(l,s),h=c?this.tileUrlFunction(c,n,s):void 0,g=new this.tileClass(l,h!==void 0?Ca.IDLE:Ca.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return g.key=r,g.addEventListener(Ba.CHANGE,this.handleTileChange.bind(this)),g}getTile(e,t,i,n,s){const r=this.getProjection();if(!r||!s||yp(r,s))return this.getTileInternal(e,t,i,n,r||s);const l=[e,t,i],c=this.getKey(),h=this.getTileGridForProjection(r),g=this.getTileGridForProjection(s),b=this.getTileCoordForTileUrlFunction(l,s),v=new gP(r,h,s,g,l,b,this.getTilePixelRatio(n),this.getGutter(),(C,S,L,R)=>this.getTileInternal(C,S,L,R,r),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return v.key=c,v}getTileInternal(e,t,i,n,s){const r=this.getKey();return this.createTile_(e,t,i,n,s,r)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const i=Li(e);if(i){const n=Ga(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=t)}}}function Mde(a,e){a.getImage().src=e}const s5=Ede;class Lde extends s5{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",i=e.tileGrid;let n=e.urls;n===void 0&&e.url!==void 0&&(n=sP(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:n,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=x4(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(x4(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?r1(e,i):e.replace(/\{(\w+?)\}/g,function(r,l){return l.toLowerCase()in i?i[l.toLowerCase()]:r});const n=this.tileGrid,s=this.dimensions_;return function(r,l,c){if(!r)return;const h={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};Object.assign(h,s);let g=e;return t=="KVP"?g=r1(g,h):g=g.replace(/\{(\w+?)\}/g,function(b,v){return encodeURIComponent(h[v])}),g}}}const s1=Lde,Rde=[156543.033928,78271.516964,39135.758482,19567.879241,9783.9396205,4891.96981025,2445.98490513,1222.99245256,611.496226281,305.748113141,152.87405657,76.4370282852,38.2185141426,19.1092570713,9.55462853565,4.77731426782,2.38865713391,1.19432856696,.597164283478,.298582141739,.1492910708695,.07464553543475],kde=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21"];class Wde{createOlLayer(e){const{name:t,imageType:i,id:n}=e,s=cP(e),r=Li(tm),l=r.getExtent(),c=new s1({url:ede(e),tilePixelRatio:s?2:1,layer:t,matrixSet:`GLOBAL_WEBMERCATOR_4_V3${s?"_HD":""}`,format:i,requestEncoding:"REST",projection:r,tileGrid:new i5({origin:bd(l),extent:l,resolutions:Rde,matrixIds:kde}),style:"default",crossOrigin:"anonymous"});return new sp({source:c,properties:{"olcs.extent":uP(),label:t,id:n}})}setLayerTime(e,t,i){const n=e.get(Nx).time_layers[i],s=t.getUrls();if(s){const r=this.transformUrls(s,n);t.setUrls(r),e.set(y4,n),e.set(eP,n)}}transformUrls(e,t){return e.map(i=>i.replace(/[/][^/]*[/]{TileMatrixSet}/,`/${t}/{TileMatrixSet}`))}}const bP=new Wde;class Gde{createOlLayer(e,t){const i=zi(),{id:n,metadata:s,name:r}=e,l=t.get(n);if(!l)return;const c={container:i.getOlMap().getTarget(),...l},h=new d3({maplibreOptions:c,label:r,id:n,queryable_id:n,metadata:s}),g=eu(),b=Uh();return h.getMapLibreMap().loaded()?g.setBaseStyle(n,h.getMapLibreMap().getStyle()):new Promise(v=>h.getMapLibreMap().once("data",v)).then(()=>g.setBaseStyle(n,h.getMapLibreMap().getStyle())),h.set(bce,b.getDefaultMapBoxStyleUrl(b.getVectorId(e))),h}}const Ode=new Gde;class Pde extends s5{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=nl(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,i,n){const s=Li(i),r=this.getProjection()||s;let l=this.getTileGrid();l||(l=this.getTileGridForProjection(r));const c=Ns(e,s,r),h=n1(r,s,e,t),g=l.getZForResolution(h,this.zDirection),b=l.getResolution(g),v=l.getTileCoordForCoordAndZ(c,g);if(l.getResolutions().length<=v[0])return;let C=l.getTileCoordExtent(v,this.tmpExtent_);const S=this.gutter_;S!==0&&(C=Eh(C,b*S,C));const L={QUERY_LAYERS:this.params_.LAYERS};Object.assign(L,Zx(this.params_,"GetFeatureInfo"),n);const R=Math.floor((c[0]-C[0])/b),G=Math.floor((C[3]-c[1])/b);return L[this.v13_?"I":"X"]=R,L[this.v13_?"J":"Y"]=G,this.getRequestUrl_(v,C,1,r||s,L)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:Vx,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;i.LAYER=n}if(e!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;i.SCALE=e*n/s}return Object.assign(i,t),r1(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,i,n,s){const r=this.urls;if(!r)return;let l;if(r.length==1)l=r[0];else{const c=id(rP(e),r.length);l=r[c]}return lP(t,(this.tileGrid||this.getTileGridForProjection(n)).getResolution(e[0]),i,n,l,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const i in this.params_)t[e++]=i+"-"+this.params_[i];return t.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||Vx;this.v13_=fT(e,"1.3")>=0}tileUrlFunction(e,t,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=n.getResolution(e[0]);let r=n.getTileCoordExtent(e,this.tmpExtent_);const l=this.gutter_;l!==0&&(r=Eh(r,s*l,r));const c=Object.assign({},Zx(this.params_,"GetMap"));return this.getRequestUrl_(e,r,t,i,c)}}const w4=Pde;function Bde(){const{initLayer:a}=al(),{addLayers:e,setBgLayer:t}=mn(),{findBgLayerByName:i}=od();function n(r){if(r.layerType===j_.LAYER_OFFLINE_BG_VECTOR)return i(r.key);{const l=JSON.parse(r.layerSerialization),{id:c,label:h,opacity:g}=l;let b=r.layerType;return b===cd.BG_WMTS&&(b=j_.LAYER_OFFLINE_BG_WMTS),{id:c,name:h,options:l,type:b,metadata:{start_opacity:g}}}}function s(r){if([j_.LAYER_OFFLINE_TILE,j_.LAYER_OFFLINE_BG_VECTOR].includes(r.layerType))try{const c=a(n(r));r.backgroundLayer?t(c):e(c)}catch{throw new Error("Invalid offline layer specification.")}}return{createOfflineLayer:s,offlineLayerToLayer:n}}let Z9;function qp(){const a=mn(),e=Bde(),{isOffLine:t}=Zt(yi()),{minZoom:i,maxZoom:n}=Zt(a),{removeAllLayers:s,setBgLayer:r}=a;function l(S){Z9=S,console.warn("Deprecated: useOffline.initLocalforage_v3() is meant to be removed when v4 is fully operational")}function c(){return t.value}function h(S){t.value=S}function g(S){b(),v(S),C(S)}function b(){oce(),s(),r(null)}function v(S){const{zooms:L}=S;i.value=L[0],n.value=L[L.length-1]}function C(S){[...S.layers].reverse().forEach(L=>e.createOfflineLayer(L))}return{localforage_v3:Z9,isOffLine:t,initLocalforage_v3:l,getIsOffline:c,setIsOffline:h,doRestore:g}}class vP{createOlLayer(e){const t=this.deserializeTileLayer(e.options);return new sp(t)}createTileLoadFunction(){const e=qp().localforage_v3;return(i,n)=>{const s=rre(n);e.getItem(s).then(r=>{i.getImage().src=r||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="}).catch(()=>i.setState(3))}}}class Fde extends vP{deserializeTileLayer(e){const t=JSON.parse(e.source);if(t.tileLoadFunction=this.createTileLoadFunction(),t.gutter=parseInt("96",10),t.tileGrid){const i=new aI(JSON.parse(t.tileGrid));t.tileGrid=i}return e.source=new w4(t),e}serializeTileLayer(){throw new Error("Method not implemented.")}}const Nde=new Fde;class Dde extends vP{deserializeTileLayer(e){const t=JSON.parse(e.source);if(t.tileLoadFunction=this.createTileLoadFunction(),t.tileGrid){const i=new i5(JSON.parse(t.tileGrid));t.tileGrid=i}return e.source=new s1(t),e}serializeTileLayer(){throw new Error("Method not implemented.")}}const Vde=new Dde;class Zde{createOlLayer(e){let t;switch(this.getOfflineLayerSourceType(e)){case cd.WMTS:t=Vde.createOlLayer(e);break;case cd.TILE_WMS:t=Nde.createOlLayer(e);break;default:throw new Error(`Unrecognized offline layer type: ${e.type}`)}return t}getOfflineLayerSourceType(e){return e.options.sourceType}}const zde=new Zde;class Ude{drawCustom(e,t,i,n,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,i){}drawFeature(e,t,i){}drawGeometryCollection(e,t,i){}drawLineString(e,t,i){}drawMultiLineString(e,t,i){}drawMultiPoint(e,t,i){}drawMultiPolygon(e,t,i){}drawPoint(e,t,i){}drawPolygon(e,t,i){}drawText(e,t,i){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}const xP=Ude,R1={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Lv=[R1.FILL],fh=[R1.STROKE],J_=[R1.BEGIN_PATH],z9=[R1.CLOSE_PATH],Na=R1;class Xde extends xP{constructor(e,t,i,n){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(i){return i*t})}appendFlatPointCoordinates(e,t){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let r=s.length;for(let l=0,c=e.length;l<c;l+=t)n[0]=e[l],n[1]=e[l+1],hd(i,n)&&(s[r++]=n[0],s[r++]=n[1]);return r}appendFlatLineCoordinates(e,t,i,n,s,r){const l=this.coordinates;let c=l.length;const h=this.getBufferedMaxExtent();r&&(t+=n);let g=e[t],b=e[t+1];const v=this.tmpCoordinate_;let C=!0,S,L,R;for(S=t+n;S<i;S+=n)v[0]=e[S],v[1]=e[S+1],R=_S(h,v),R!==L?(C&&(l[c++]=g,l[c++]=b,C=!1),l[c++]=v[0],l[c++]=v[1]):R===es.INTERSECTING?(l[c++]=v[0],l[c++]=v[1],C=!1):C=!0,g=v[0],b=v[1],L=R;return(s&&C||S===t+n)&&(l[c++]=g,l[c++]=b),c}drawCustomCoordinates_(e,t,i,n,s){for(let r=0,l=i.length;r<l;++r){const c=i[r],h=this.appendFlatLineCoordinates(e,t,c,n,!1,!1);s.push(h),t=c}return t}drawCustom(e,t,i,n,s){this.beginGeometry(e,t,s);const r=e.getType(),l=e.getStride(),c=this.coordinates.length;let h,g,b,v,C;switch(r){case"MultiPolygon":h=e.getOrientedFlatCoordinates(),v=[];const S=e.getEndss();C=0;for(let L=0,R=S.length;L<R;++L){const G=[];C=this.drawCustomCoordinates_(h,C,S[L],l,G),v.push(G)}this.instructions.push([Na.CUSTOM,c,v,e,i,wS,s]),this.hitDetectionInstructions.push([Na.CUSTOM,c,v,e,n||i,wS,s]);break;case"Polygon":case"MultiLineString":b=[],h=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),C=this.drawCustomCoordinates_(h,0,e.getEnds(),l,b),this.instructions.push([Na.CUSTOM,c,b,e,i,B0,s]),this.hitDetectionInstructions.push([Na.CUSTOM,c,b,e,n||i,B0,s]);break;case"LineString":case"Circle":h=e.getFlatCoordinates(),g=this.appendFlatLineCoordinates(h,0,h.length,l,!1,!1),this.instructions.push([Na.CUSTOM,c,g,e,i,_h,s]),this.hitDetectionInstructions.push([Na.CUSTOM,c,g,e,n||i,_h,s]);break;case"MultiPoint":h=e.getFlatCoordinates(),g=this.appendFlatPointCoordinates(h,l),g>c&&(this.instructions.push([Na.CUSTOM,c,g,e,i,_h,s]),this.hitDetectionInstructions.push([Na.CUSTOM,c,g,e,n||i,_h,s]));break;case"Point":h=e.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),g=this.coordinates.length,this.instructions.push([Na.CUSTOM,c,g,e,i,void 0,s]),this.hitDetectionInstructions.push([Na.CUSTOM,c,g,e,n||i,void 0,s]);break}this.endGeometry(t)}beginGeometry(e,t,i){this.beginGeometryInstruction1_=[Na.BEGIN_GEOMETRY,t,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Na.BEGIN_GEOMETRY,t,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const i=e.length;let n,s,r=-1;for(t=0;t<i;++t)n=e[t],s=n[0],s==Na.END_GEOMETRY?r=t:s==Na.BEGIN_GEOMETRY&&(n[2]=t,IU(this.hitDetectionInstructions,r,t),r=-1)}fillStyleToState(e,t={}){if(e){const i=e.getColor();t.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,t.fillStyle=Uu(i||Ao)}else t.fillStyle=void 0;return t}strokeStyleToState(e,t={}){if(e){const i=e.getColor();t.strokeStyle=Uu(i||N0);const n=e.getLineCap();t.lineCap=n!==void 0?n:Fp;const s=e.getLineDash();t.lineDash=s?s.slice():rd;const r=e.getLineDashOffset();t.lineDashOffset=r||sd;const l=e.getLineJoin();t.lineJoin=l!==void 0?l:Np;const c=e.getWidth();t.lineWidth=c!==void 0?c:V0;const h=e.getMiterLimit();t.miterLimit=h!==void 0?h:F0,t.lineWidth>this.maxLineWidth&&(this.maxLineWidth=t.lineWidth,this.bufferedMaxExtent_=null)}else t.strokeStyle=void 0,t.lineCap=void 0,t.lineDash=null,t.lineDashOffset=void 0,t.lineJoin=void 0,t.lineWidth=void 0,t.miterLimit=void 0;return t}setFillStrokeStyle(e,t){const i=this.state;this.fillStyleToState(e,i),this.strokeStyleToState(t,i)}createFill(e){const t=e.fillStyle,i=[Na.SET_FILL_STYLE,t];return typeof t!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Na.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,t){const i=e.strokeStyle,n=e.lineCap,s=e.lineDash,r=e.lineDashOffset,l=e.lineJoin,c=e.lineWidth,h=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=n||s!=e.currentLineDash&&!vd(e.currentLineDash,s)||e.currentLineDashOffset!=r||e.currentLineJoin!=l||e.currentLineWidth!=c||e.currentMiterLimit!=h)&&(i!==void 0&&t.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=n,e.currentLineDash=s,e.currentLineDashOffset=r,e.currentLineJoin=l,e.currentLineWidth=c,e.currentMiterLimit=h)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Na.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Ak(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Eh(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const k1=Xde;class Hde extends k1{constructor(e,t,i,n){super(e,t,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,i){if(!this.image_||this.maxExtent&&!hd(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,l=this.appendFlatPointCoordinates(n,s);this.instructions.push([Na.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Na.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,i){if(!this.image_)return;this.beginGeometry(e,t,i);const n=e.getFlatCoordinates(),s=[];for(let c=0,h=n.length;c<h;c+=e.getStride())(!this.maxExtent||hd(this.maxExtent,n.slice(c,c+2)))&&s.push(n[c],n[c+1]);const r=this.coordinates.length,l=this.appendFlatPointCoordinates(s,2);this.instructions.push([Na.DRAW_IMAGE,r,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Na.DRAW_IMAGE,r,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const i=e.getAnchor(),n=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=n[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const Yde=Hde;class Kde extends k1{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinates_(e,t,i,n){const s=this.coordinates.length,r=this.appendFlatLineCoordinates(e,t,i,n,!1,!1),l=[Na.MOVE_TO_LINE_TO,s,r];return this.instructions.push(l),this.hitDetectionInstructions.push(l),i}drawLineString(e,t,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Na.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,rd,sd],J_);const l=e.getFlatCoordinates(),c=e.getStride();this.drawFlatCoordinates_(l,0,l.length,c),this.hitDetectionInstructions.push(fh),this.endGeometry(t)}drawMultiLineString(e,t,i){const n=this.state,s=n.strokeStyle,r=n.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t,i),this.hitDetectionInstructions.push([Na.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,rd,sd],J_);const l=e.getEnds(),c=e.getFlatCoordinates(),h=e.getStride();let g=0;for(let b=0,v=l.length;b<v;++b)g=this.drawFlatCoordinates_(c,g,l[b],h);this.hitDetectionInstructions.push(fh),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(fh),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(fh),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(J_)}}const qde=Kde;class jde extends k1{constructor(e,t,i,n){super(e,t,i,n)}drawFlatCoordinatess_(e,t,i,n){const s=this.state,r=s.fillStyle!==void 0,l=s.strokeStyle!==void 0,c=i.length;this.instructions.push(J_),this.hitDetectionInstructions.push(J_);for(let h=0;h<c;++h){const g=i[h],b=this.coordinates.length,v=this.appendFlatLineCoordinates(e,t,g,n,!0,!l),C=[Na.MOVE_TO_LINE_TO,b,v];this.instructions.push(C),this.hitDetectionInstructions.push(C),l&&(this.instructions.push(z9),this.hitDetectionInstructions.push(z9)),t=g}return r&&(this.instructions.push(Lv),this.hitDetectionInstructions.push(Lv)),l&&(this.instructions.push(fh),this.hitDetectionInstructions.push(fh)),t}drawCircle(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Na.SET_FILL_STYLE,Ao]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Na.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,rd,sd]);const l=e.getFlatCoordinates(),c=e.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(l,0,l.length,c,!1,!1);const g=[Na.CIRCLE,h];this.instructions.push(J_,g),this.hitDetectionInstructions.push(J_,g),n.fillStyle!==void 0&&(this.instructions.push(Lv),this.hitDetectionInstructions.push(Lv)),n.strokeStyle!==void 0&&(this.instructions.push(fh),this.hitDetectionInstructions.push(fh)),this.endGeometry(t)}drawPolygon(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Na.SET_FILL_STYLE,Ao]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Na.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,rd,sd]);const l=e.getEnds(),c=e.getOrientedFlatCoordinates(),h=e.getStride();this.drawFlatCoordinatess_(c,0,l,h),this.endGeometry(t)}drawMultiPolygon(e,t,i){const n=this.state,s=n.fillStyle,r=n.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Na.SET_FILL_STYLE,Ao]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Na.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,rd,sd]);const l=e.getEndss(),c=e.getOrientedFlatCoordinates(),h=e.getStride();let g=0;for(let b=0,v=l.length;b<v;++b)g=this.drawFlatCoordinatess_(c,g,l[b],h);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let i=0,n=t.length;i<n;++i)t[i]=F_(t[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const U9=jde;function Jde(a,e,t,i,n){const s=[];let r=t,l=0,c=e.slice(t,2);for(;l<a&&r+n<i;){const[h,g]=c.slice(-2),b=e[r+n],v=e[r+n+1],C=Math.sqrt((b-h)*(b-h)+(v-g)*(v-g));if(l+=C,l>=a){const S=(a-l+C)/C,L=jo(h,b,S),R=jo(g,v,S);c.push(L,R),s.push(c),c=[L,R],l==a&&(r+=n),l=0}else if(l<a)c.push(e[r+n],e[r+n+1]),r+=n;else{const S=C-l,L=jo(h,b,S/C),R=jo(g,v,S/C);c.push(L,R),s.push(c),c=[L,R],l=0,r+=n}}return l>0&&s.push(c),s}function Qde(a,e,t,i,n){let s=t,r=t,l=0,c=0,h=t,g,b,v,C,S,L,R,G,O,V;for(b=t;b<i;b+=n){const B=e[b],z=e[b+1];S!==void 0&&(O=B-S,V=z-L,C=Math.sqrt(O*O+V*V),R!==void 0&&(c+=v,g=Math.acos((R*O+G*V)/(v*C)),g>a&&(c>l&&(l=c,s=h,r=b),c=0,h=b-n)),v=C,R=O,G=V),S=B,L=z}return c+=C,c>l?[h,b]:[s,r]}const Ux={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class $de extends k1{constructor(e,t,i,n){super(e,t,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ao]={fillStyle:Ao},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,i){const n=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!n&&!s)return;const l=this.coordinates;let c=l.length;const h=e.getType();let g=null,b=e.getStride();if(r.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!xr(this.maxExtent,e.getExtent()))return;let v;if(g=e.getFlatCoordinates(),h=="LineString")v=[g.length];else if(h=="MultiLineString")v=e.getEnds();else if(h=="Polygon")v=e.getEnds().slice(0,1);else if(h=="MultiPolygon"){const R=e.getEndss();v=[];for(let G=0,O=R.length;G<O;++G)v.push(R[G][0])}this.beginGeometry(e,t,i);const C=r.repeat,S=C?void 0:r.textAlign;let L=0;for(let R=0,G=v.length;R<G;++R){let O;C?O=Jde(C*this.resolution,g,L,v[R],b):O=[g.slice(L,v[R])];for(let V=0,B=O.length;V<B;++V){const z=O[V];let j=0,re=z.length;if(S==null){const te=Qde(r.maxAngle,z,0,z.length,2);j=te[0],re=te[1]}for(let te=j;te<re;te+=b)l.push(z[te],z[te+1]);const ne=l.length;L=v[R],this.drawChars_(c,ne),c=ne}}this.endGeometry(t)}else{let v=r.overflow?null:[];switch(h){case"Point":case"MultiPoint":g=e.getFlatCoordinates();break;case"LineString":g=e.getFlatMidpoint();break;case"Circle":g=e.getCenter();break;case"MultiLineString":g=e.getFlatMidpoints(),b=2;break;case"Polygon":g=e.getFlatInteriorPoint(),r.overflow||v.push(g[2]/this.resolution),b=3;break;case"MultiPolygon":const B=e.getFlatInteriorPoints();g=[];for(let z=0,j=B.length;z<j;z+=3)r.overflow||v.push(B[z+2]/this.resolution),g.push(B[z],B[z+1]);if(g.length===0)return;b=2;break}const C=this.appendFlatPointCoordinates(g,b);if(C===c)return;if(v&&(C-c)/2!==g.length/b){let B=c/2;v=v.filter((z,j)=>{const re=l[(B+j)*2]===g[j*b]&&l[(B+j)*2+1]===g[j*b+1];return re||--B,re})}this.saveTextStates_();const S=r.backgroundFill?this.createFill(this.fillStyleToState(r.backgroundFill)):null,L=r.backgroundStroke?this.createStroke(this.strokeStyleToState(r.backgroundStroke)):null;this.beginGeometry(e,t,i);let R=r.padding;if(R!=H_&&(r.scale[0]<0||r.scale[1]<0)){let B=r.padding[0],z=r.padding[1],j=r.padding[2],re=r.padding[3];r.scale[0]<0&&(z=-z,re=-re),r.scale[1]<0&&(B=-B,j=-j),R=[B,z,j,re]}const G=this.pixelRatio;this.instructions.push([Na.DRAW_IMAGE,c,C,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,R==H_?H_:R.map(function(B){return B*G}),S,L,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,v]);const O=1/G,V=S?S.slice(0):null;V&&(V[1]=Ao),this.hitDetectionInstructions.push([Na.DRAW_IMAGE,c,C,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[O,O],NaN,this.declutterMode_,this.declutterImageWithText_,R,V,L,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ao:this.fillKey_,this.textOffsetX_,this.textOffsetY_,v]),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,i=this.textFillState_,n=this.strokeKey_;e&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||D0,justify:t.justify,textBaseline:t.textBaseline||tx,scale:t.scale});const r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}drawChars_(e,t){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,r=this.textKey_,l=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,h=Ux[n.textBaseline],g=this.textOffsetY_*c,b=this.text_,v=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([Na.DRAW_CHARS,e,t,h,n.overflow,l,n.maxAngle,c,g,s,v*c,b,r,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Na.DRAW_CHARS,e,t,h,n.overflow,l&&Ao,n.maxAngle,c,g,s,v*c,b,r,1/c,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let i,n,s;if(!e)this.text_="";else{const r=e.getFill();r?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=Uu(r.getColor()||Ao)):(n=null,this.textFillState_=n);const l=e.getStroke();if(!l)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const L=l.getLineDash(),R=l.getLineDashOffset(),G=l.getWidth(),O=l.getMiterLimit();s.lineCap=l.getLineCap()||Fp,s.lineDash=L?L.slice():rd,s.lineDashOffset=R===void 0?sd:R,s.lineJoin=l.getLineJoin()||Np,s.lineWidth=G===void 0?V0:G,s.miterLimit=O===void 0?F0:O,s.strokeStyle=Uu(l.getColor()||N0)}i=this.textState_;const c=e.getFont()||E7;sY(c);const h=e.getScaleArray();i.overflow=e.getOverflow(),i.font=c,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||tx,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||H_,i.scale=h===void 0?[1,1]:h;const g=e.getOffsetX(),b=e.getOffsetY(),v=e.getRotateWithView(),C=e.getKeepUpright(),S=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=g===void 0?0:g,this.textOffsetY_=b===void 0?0:b,this.textRotateWithView_=v===void 0?!1:v,this.textKeepUpright_=C===void 0?!0:C,this.textRotation_=S===void 0?0:S,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:Ga(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+Ga(n.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const ehe={Circle:U9,Default:k1,Image:Yde,LineString:qde,Polygon:U9,Text:$de};class the{constructor(e,t,i,n){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const i=this.buildersByZIndex_[t];for(const n in i){const s=i[n].finish();e[t][n]=s}}return e}getBuilder(e,t){const i=e!==void 0?e.toString():"0";let n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);let s=n[t];if(s===void 0){const r=ehe[t];s=new r(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[t]=s}return s}}const wP=the;function ahe(a,e,t,i,n,s,r,l,c,h,g,b,v=!0){let C=a[e],S=a[e+1],L=0,R=0,G=0,O=0;function V(){L=C,R=S,e+=i,C=a[e],S=a[e+1],O+=G,G=Math.sqrt((C-L)*(C-L)+(S-R)*(S-R))}do V();while(e<t-i&&O+G<s);let B=G===0?0:(s-O)/G;const z=jo(L,C,B),j=jo(R,S,B),re=e-i,ne=O,te=s+l*c(h,n,g);for(;e<t-i&&O+G<te;)V();B=G===0?0:(te-O)/G;const le=jo(L,C,B),ue=jo(R,S,B);let fe=!1;if(v)if(b){const ke=[z,j,le,ue];MT(ke,0,4,2,b,ke,ke),fe=ke[0]>ke[2]}else fe=z>le;const be=Math.PI,Pe=[],Be=re+i===e;e=re,G=0,O=ne,C=a[e],S=a[e+1];let Me;if(Be){V(),Me=Math.atan2(S-R,C-L),fe&&(Me+=Me>0?-be:be);const ke=(le+z)/2,Je=(ue+j)/2;return Pe[0]=[ke,Je,(te-s)/2,Me,n],Pe}n=n.replace(/\n/g," ");for(let ke=0,Je=n.length;ke<Je;){V();let ut=Math.atan2(S-R,C-L);if(fe&&(ut+=ut>0?-be:be),Me!==void 0){let da=ut-Me;if(da+=da>be?-2*be:da<-be?2*be:0,Math.abs(da)>r)return null}Me=ut;const ht=ke;let Dt=0;for(;ke<Je;++ke){const da=fe?Je-ke-1:ke,Ji=l*c(h,n[da],g);if(e+i<t&&O+G<s+Dt+Ji/2)break;Dt+=Ji}if(ke===ht)continue;const We=fe?n.substring(Je-ht,Je-ke):n.substring(ht,ke);B=G===0?0:(s+Dt/2-O)/G;const oa=jo(L,C,B),li=jo(R,S,B);Pe.push([oa,li,Dt/2,ut,We]),s+=Dt}return Pe}const Fg=nl(),Jd=[],Zc=[],zc=[],Qd=[];function X9(a){return a[3].declutterBox}const H9=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function vA(a,e){return e==="start"?e=H9.test(a)?"right":"left":e==="end"&&(e=H9.test(a)?"left":"right"),Ux[e]}function ihe(a,e,t){return t>0&&a.push(`
`,""),a.push(e,""),a}function nhe(a,e,t){return t%2===0&&(a+=e),a}class rhe{constructor(e,t,i,n,s){this.overlaps=i,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Wo(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new $3:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,i,n){const s=e+t+i+n;if(this.labels_[s])return this.labels_[s];const r=n?this.strokeStates[n]:null,l=i?this.fillStates[i]:null,c=this.textStates[t],h=this.pixelRatio,g=[c.scale[0]*h,c.scale[1]*h],b=c.justify?Ux[c.justify]:vA(Array.isArray(e)?e[0]:e,c.textAlign||D0),v=n&&r.lineWidth?r.lineWidth:0,C=Array.isArray(e)?e:String(e).split(`
`).reduce(ihe,[]),{width:S,height:L,widths:R,heights:G,lineWidths:O}=lY(c,C),V=S+v,B=[],z=(V+2)*g[0],j=(L+v)*g[1],re={width:z<0?Math.floor(z):Math.ceil(z),height:j<0?Math.floor(j):Math.ceil(j),contextInstructions:B};(g[0]!=1||g[1]!=1)&&B.push("scale",g),n&&(B.push("strokeStyle",r.strokeStyle),B.push("lineWidth",v),B.push("lineCap",r.lineCap),B.push("lineJoin",r.lineJoin),B.push("miterLimit",r.miterLimit),B.push("setLineDash",[r.lineDash]),B.push("lineDashOffset",r.lineDashOffset)),i&&B.push("fillStyle",l.fillStyle),B.push("textBaseline","middle"),B.push("textAlign","center");const ne=.5-b;let te=b*V+ne*v;const le=[],ue=[];let fe=0,be=0,Pe=0,Be=0,Me;for(let ke=0,Je=C.length;ke<Je;ke+=2){const ut=C[ke];if(ut===`
`){be+=fe,fe=0,te=b*V+ne*v,++Be;continue}const ht=C[ke+1]||c.font;ht!==Me&&(n&&le.push("font",ht),i&&ue.push("font",ht),Me=ht),fe=Math.max(fe,G[Pe]);const Dt=[ut,te+ne*R[Pe]+b*(R[Pe]-O[Be]),.5*(v+fe)+be];te+=R[Pe],n&&le.push("strokeText",Dt),i&&ue.push("fillText",Dt),++Pe}return Array.prototype.push.apply(B,le),Array.prototype.push.apply(B,ue),this.labels_[s]=re,re}replayTextBackground_(e,t,i,n,s,r,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,n),e.lineTo.apply(e,s),e.lineTo.apply(e,t),r&&(this.alignAndScaleFill_=r[2],e.fillStyle=r[1],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}calculateImageOrLabelDimensions_(e,t,i,n,s,r,l,c,h,g,b,v,C,S,L,R){l*=v[0],c*=v[1];let G=i-l,O=n-c;const V=s+h>e?e-h:s,B=r+g>t?t-g:r,z=S[3]+V*v[0]+S[1],j=S[0]+B*v[1]+S[2],re=G-S[3],ne=O-S[0];(L||b!==0)&&(Jd[0]=re,Qd[0]=re,Jd[1]=ne,Zc[1]=ne,Zc[0]=re+z,zc[0]=Zc[0],zc[1]=ne+j,Qd[1]=zc[1]);let te;return b!==0?(te=nu(Wo(),i,n,1,1,b,-i,-n),br(te,Jd),br(te,Zc),br(te,zc),br(te,Qd),ic(Math.min(Jd[0],Zc[0],zc[0],Qd[0]),Math.min(Jd[1],Zc[1],zc[1],Qd[1]),Math.max(Jd[0],Zc[0],zc[0],Qd[0]),Math.max(Jd[1],Zc[1],zc[1],Qd[1]),Fg)):ic(Math.min(re,re+z),Math.min(ne,ne+j),Math.max(re,re+z),Math.max(ne,ne+j),Fg),C&&(G=Math.round(G),O=Math.round(O)),{drawImageX:G,drawImageY:O,drawImageW:V,drawImageH:B,originX:h,originY:g,declutterBox:{minX:Fg[0],minY:Fg[1],maxX:Fg[2],maxY:Fg[3],value:R},canvasTransform:te,scale:v}}replayImageOrLabel_(e,t,i,n,s,r,l){const c=!!(r||l),h=n.declutterBox,g=l?l[2]*n.scale[0]/2:0;return h.minX-g<=t[0]&&h.maxX+g>=0&&h.minY-g<=t[1]&&h.maxY+g>=0&&(c&&this.replayTextBackground_(e,Jd,Zc,zc,Qd,r,l),uY(e,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const i=br(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(i[0]%n,i[1]%n),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,i,n){const s=this.textStates[t],r=this.createLabel(e,t,n,i),l=this.strokeStates[i],c=this.pixelRatio,h=vA(Array.isArray(e)?e[0]:e,s.textAlign||D0),g=Ux[s.textBaseline||tx],b=l&&l.lineWidth?l.lineWidth:0,v=r.width/c-2*s.scale[0],C=h*v+2*(.5-h)*b,S=g*r.height/c+2*(.5-g)*b;return{label:r,anchorX:C,anchorY:S}}execute_(e,t,i,n,s,r,l,c){const h=this.zIndexContext_;let g;this.pixelCoordinates_&&vd(i,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=nd(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),UU(this.renderedTransform_,i));let b=0;const v=n.length;let C=0,S,L,R,G,O,V,B,z,j,re,ne,te,le,ue=0,fe=0;const be=this.coordinateCache_,Pe=this.viewRotation_,Be=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,Me={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Pe},ke=this.instructions!=n||this.overlaps?0:200;let Je,ut,ht,Dt;for(;b<v;){const We=n[b];switch(We[0]){case Na.BEGIN_GEOMETRY:Je=We[1],Dt=We[3],Je.getGeometry()?l!==void 0&&!xr(l,Dt.getExtent())?b=We[2]+1:++b:b=We[2],h&&(h.zIndex=We[4]);break;case Na.BEGIN_PATH:ue>ke&&(this.fill_(e),ue=0),fe>ke&&(e.stroke(),fe=0),!ue&&!fe&&(e.beginPath(),O=NaN,V=NaN),++b;break;case Na.CIRCLE:C=We[1];const li=g[C],da=g[C+1],Ji=g[C+2],sa=g[C+3],Ni=Ji-li,ka=sa-da,bi=Math.sqrt(Ni*Ni+ka*ka);e.moveTo(li+bi,da),e.arc(li,da,bi,0,2*Math.PI,!0),++b;break;case Na.CLOSE_PATH:e.closePath(),++b;break;case Na.CUSTOM:C=We[1],S=We[2];const cr=We[3],On=We[4],pe=We[5];Me.geometry=cr,Me.feature=Je,b in be||(be[b]=[]);const Ee=be[b];pe?pe(g,C,S,2,Ee):(Ee[0]=g[C],Ee[1]=g[C+1],Ee.length=2),h&&(h.zIndex=We[6]),On(Ee,Me),++b;break;case Na.DRAW_IMAGE:C=We[1],S=We[2],j=We[3],L=We[4],R=We[5];let ze=We[6];const et=We[7],lt=We[8],ot=We[9],Tt=We[10];let ft=We[11];const vt=We[12];let mt=We[13];G=We[14]||"declutter";const Ot=We[15];if(!j&&We.length>=20){re=We[19],ne=We[20],te=We[21],le=We[22];const Ja=this.drawLabelWithPointPlacement_(re,ne,te,le);j=Ja.label,We[3]=j;const D=We[23];L=(Ja.anchorX-D)*this.pixelRatio,We[4]=L;const H=We[24];R=(Ja.anchorY-H)*this.pixelRatio,We[5]=R,ze=j.height,We[6]=ze,mt=j.width,We[13]=mt}let Lt;We.length>25&&(Lt=We[25]);let qt,Qt,Ea;We.length>17?(qt=We[16],Qt=We[17],Ea=We[18]):(qt=H_,Qt=null,Ea=null),Tt&&Be?ft+=Pe:!Tt&&!Be&&(ft-=Pe);let si=0;for(;C<S;C+=2){if(Lt&&Lt[si++]<mt/this.pixelRatio)continue;const Ja=this.calculateImageOrLabelDimensions_(j.width,j.height,g[C],g[C+1],mt,ze,L,R,lt,ot,ft,vt,s,qt,!!Qt||!!Ea,Je),D=[e,t,j,Ja,et,Qt,Ea];if(c){let H,K,ae;if(Ot){const ve=S-C;if(!Ot[ve]){Ot[ve]={args:D,declutterMode:G};continue}const J=Ot[ve];H=J.args,K=J.declutterMode,delete Ot[ve],ae=X9(H)}let oe,Ce;if(H&&(K!=="declutter"||!c.collides(ae))&&(oe=!0),(G!=="declutter"||!c.collides(Ja.declutterBox))&&(Ce=!0),K==="declutter"&&G==="declutter"){const ve=oe&&Ce;oe=ve,Ce=ve}oe&&(K!=="none"&&c.insert(ae),this.replayImageOrLabel_.apply(this,H)),Ce&&(G!=="none"&&c.insert(Ja.declutterBox),this.replayImageOrLabel_.apply(this,D))}else this.replayImageOrLabel_.apply(this,D)}++b;break;case Na.DRAW_CHARS:const ni=We[1],pn=We[2],Di=We[3],Pn=We[4];le=We[5];const fn=We[6],dr=We[7],Ir=We[8];te=We[9];const wi=We[10];re=We[11],Array.isArray(re)&&(re=re.reduce(nhe,"")),ne=We[12];const hn=[We[13],We[13]];G=We[14]||"declutter";const Vs=We[15],oo=this.textStates[ne],ns=oo.font,Tn=[oo.scale[0]*dr,oo.scale[1]*dr];let Or;ns in this.widths_?Or=this.widths_[ns]:(Or={},this.widths_[ns]=Or);const Bo=J3(g,ni,pn,2),nn=Math.abs(Tn[0])*UL(ns,re,Or);if(Pn||nn<=Bo){const Ja=this.textStates[ne].textAlign,D=(Bo-nn)*vA(re,Ja),H=ahe(g,ni,pn,2,re,D,fn,Math.abs(Tn[0]),UL,ns,Or,Be?0:this.viewRotation_,Vs);e:if(H){const K=[];let ae,oe,Ce,ve,J;if(te)for(ae=0,oe=H.length;ae<oe;++ae){J=H[ae],Ce=J[4],ve=this.createLabel(Ce,ne,"",te),L=J[2]+(Tn[0]<0?-wi:wi),R=Di*ve.height+(.5-Di)*2*wi*Tn[1]/Tn[0]-Ir;const _e=this.calculateImageOrLabelDimensions_(ve.width,ve.height,J[0],J[1],ve.width,ve.height,L,R,0,0,J[3],hn,!1,H_,!1,Je);if(c&&G==="declutter"&&c.collides(_e.declutterBox))break e;K.push([e,t,ve,_e,1,null,null])}if(le)for(ae=0,oe=H.length;ae<oe;++ae){J=H[ae],Ce=J[4],ve=this.createLabel(Ce,ne,le,""),L=J[2],R=Di*ve.height-Ir;const _e=this.calculateImageOrLabelDimensions_(ve.width,ve.height,J[0],J[1],ve.width,ve.height,L,R,0,0,J[3],hn,!1,H_,!1,Je);if(c&&G==="declutter"&&c.collides(_e.declutterBox))break e;K.push([e,t,ve,_e,1,null,null])}c&&G!=="none"&&c.load(K.map(X9));for(let _e=0,Re=K.length;_e<Re;++_e)this.replayImageOrLabel_.apply(this,K[_e])}}++b;break;case Na.END_GEOMETRY:if(r!==void 0){Je=We[1];const Ja=r(Je,Dt,G);if(Ja)return Ja}++b;break;case Na.FILL:ke?ue++:this.fill_(e),++b;break;case Na.MOVE_TO_LINE_TO:for(C=We[1],S=We[2],ut=g[C],ht=g[C+1],e.moveTo(ut,ht),O=ut+.5|0,V=ht+.5|0,C+=2;C<S;C+=2)ut=g[C],ht=g[C+1],B=ut+.5|0,z=ht+.5|0,(C==S-2||B!==O||z!==V)&&(e.lineTo(ut,ht),O=B,V=z);++b;break;case Na.SET_FILL_STYLE:this.alignAndScaleFill_=We[2],ue&&(this.fill_(e),ue=0,fe&&(e.stroke(),fe=0)),e.fillStyle=We[1],++b;break;case Na.SET_STROKE_STYLE:fe&&(e.stroke(),fe=0),this.setStrokeStyle_(e,We),++b;break;case Na.STROKE:ke?fe++:e.stroke(),++b;break;default:++b;break}}ue&&this.fill_(e),fe&&e.stroke()}execute(e,t,i,n,s,r){this.viewRotation_=n,this.execute_(e,t,i,this.instructions,s,void 0,void 0,r)}executeHitDetection(e,t,i,n,s){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,n,s)}}const she=rhe,op=["Polygon","Circle","LineString","Image","Text","Default"],Xx=["Image","Text"],ohe=op.filter(a=>!Xx.includes(a));class lhe{constructor(e,t,i,n,s,r,l){this.maxExtent_=e,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=t,this.renderBuffer_=r,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Wo(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,l)}clip(e,t){const i=this.getClipCoords(t);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,t){for(const i in e){let n=this.executorsByZIndex_[i];n===void 0&&(n={},this.executorsByZIndex_[i]=n);const s=e[i];for(const r in s){const l=s[r];n[r]=new she(this.resolution_,this.pixelRatio_,this.overlaps_,l,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const i=this.executorsByZIndex_[t];for(let n=0,s=e.length;n<s;++n)if(e[n]in i)return!0}return!1}forEachFeatureAtCoordinate(e,t,i,n,s,r){n=Math.round(n);const l=n*2+1,c=nu(this.hitDetectionTransform_,n+.5,n+.5,1/t,-1/t,-i,-e[0],-e[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=kr(l,l));const g=this.hitDetectionContext_;g.canvas.width!==l||g.canvas.height!==l?(g.canvas.width=l,g.canvas.height=l):h||g.clearRect(0,0,l,l);let b;this.renderBuffer_!==void 0&&(b=nl(),n0(b,e),Eh(b,t*(this.renderBuffer_+n),b));const v=uhe(n);let C;function S(z,j,re){const ne=g.getImageData(0,0,l,l).data;for(let te=0,le=v.length;te<le;te++)if(ne[v[te]]>0){if(!r||re==="none"||C!=="Image"&&C!=="Text"||r.includes(z)){const ue=(v[te]-3)/4,fe=n-ue%l,be=n-(ue/l|0),Pe=s(z,j,fe*fe+be*be);if(Pe)return Pe}g.clearRect(0,0,l,l);break}}const L=Object.keys(this.executorsByZIndex_).map(Number);L.sort(ju);let R,G,O,V,B;for(R=L.length-1;R>=0;--R){const z=L[R].toString();for(O=this.executorsByZIndex_[z],G=op.length-1;G>=0;--G)if(C=op[G],V=O[C],V!==void 0&&(B=V.executeHitDetection(g,c,i,S,b),B))return B}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const i=t[0],n=t[1],s=t[2],r=t[3],l=[i,n,i,r,s,r,s,n];return nd(l,0,8,2,e,l),l}isEmpty(){return om(this.executorsByZIndex_)}execute(e,t,i,n,s,r,l){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(l?wU:ju),r=r||op;const h=op.length;for(let g=0,b=c.length;g<b;++g){const v=c[g].toString(),C=this.executorsByZIndex_[v];for(let S=0,L=r.length;S<L;++S){const R=r[S],G=C[R];if(G!==void 0){const O=l===null?void 0:G.getZIndexContext(),V=O?O.getContext():e,B=this.maxExtent_&&R!=="Image"&&R!=="Text";if(B&&(V.save(),this.clip(V,i)),!O||R==="Text"||R==="Image"?G.execute(V,t,i,n,s,l):O.pushFunction(z=>G.execute(z,t,i,n,s,l)),B&&V.restore(),O){O.offset();const z=c[g]*h+S;this.deferredZIndexContexts_[z]||(this.deferredZIndexContexts_[z]=[]),this.deferredZIndexContexts_[z].push(O)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ju);for(let i=0,n=t.length;i<n;++i)e[t[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),e[t[i]].length=0}}const xA={};function uhe(a){if(xA[a]!==void 0)return xA[a];const e=a*2+1,t=a*a,i=new Array(t+1);for(let s=0;s<=a;++s)for(let r=0;r<=a;++r){const l=s*s+r*r;if(l>t)break;let c=i[l];c||(c=[],i[l]=c),c.push(((a+s)*e+(a+r))*4+3),s>0&&c.push(((a-s)*e+(a+r))*4+3),r>0&&(c.push(((a+s)*e+(a-r))*4+3),s>0&&c.push(((a-s)*e+(a-r))*4+3))}const n=[];for(let s=0,r=i.length;s<r;++s)i[s]&&n.push(...i[s]);return xA[a]=n,n}const IP=lhe;class che extends xP{constructor(e,t,i,n,s,r,l){super(),this.context_=e,this.pixelRatio_=t,this.extent_=i,this.transform_=n,this.transformRotation_=n?$p(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=r,this.userTransform_=l,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Wo()}drawImages_(e,t,i,n){if(!this.image_)return;const s=nd(e,t,i,n,this.transform_,this.pixelCoordinates_),r=this.context_,l=this.tmpLocalTransform_,c=r.globalAlpha;this.imageOpacity_!=1&&(r.globalAlpha=c*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let g=0,b=s.length;g<b;g+=2){const v=s[g]-this.imageAnchorX_,C=s[g+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const S=v+this.imageAnchorX_,L=C+this.imageAnchorY_;nu(l,S,L,1,1,h,-S,-L),r.save(),r.transform.apply(r,l),r.translate(S,L),r.scale(this.imageScale_[0],this.imageScale_[1]),r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),r.restore()}else r.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,v,C,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(r.globalAlpha=c)}drawText_(e,t,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=nd(e,t,i,n,this.transform_,this.pixelCoordinates_),r=this.context_;let l=this.textRotation_;for(this.transformRotation_===0&&(l-=this.viewRotation_),this.textRotateWithView_&&(l+=this.viewRotation_);t<i;t+=n){const c=s[t]+this.textOffsetX_,h=s[t+1]+this.textOffsetY_;l!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(r.save(),r.translate(c-this.textOffsetX_,h-this.textOffsetY_),r.rotate(l),r.translate(this.textOffsetX_,this.textOffsetY_),r.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&r.strokeText(this.text_,0,0),this.textFillState_&&r.fillText(this.text_,0,0),r.restore()):(this.textStrokeState_&&r.strokeText(this.text_,c,h),this.textFillState_&&r.fillText(this.text_,c,h))}}moveToLineTo_(e,t,i,n,s){const r=this.context_,l=nd(e,t,i,n,this.transform_,this.pixelCoordinates_);r.moveTo(l[0],l[1]);let c=l.length;s&&(c-=2);for(let h=2;h<c;h+=2)r.lineTo(l[h],l[h+1]);return s&&r.closePath(),i}drawRings_(e,t,i,n){for(let s=0,r=i.length;s<r;++s)t=this.moveToLineTo_(e,t,i[s],n,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!xr(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=tX(e,this.transform_,this.pixelCoordinates_),i=t[2]-t[0],n=t[3]-t[1],s=Math.sqrt(i*i+n*n),r=this.context_;r.beginPath(),r.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const i=t.getGeometryFunction()(e);i&&(this.setStyle(t),this.drawGeometry(i))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let i=0,n=t.length;i<n;++i)this.drawGeometry(t[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(t,0,t.length,i),this.text_!==""&&this.drawText_(t,0,t.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!xr(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(xr(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=e.getFlatCoordinates();let s=0;const r=e.getEnds(),l=e.getStride();i.beginPath();for(let c=0,h=r.length;c<h;++c)s=this.moveToLineTo_(n,s,r[c],l,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!xr(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!xr(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,i=e.getOrientedFlatCoordinates();let n=0;const s=e.getEndss(),r=e.getStride();t.beginPath();for(let l=0,c=s.length;l<c;++l){const h=s[l];n=this.drawRings_(i,n,h,r)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,t.lineCap=e.lineCap),vd(i.lineDash,e.lineDash)||t.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,i=this.contextTextState_,n=e.textAlign?e.textAlign:D0;i?(i.font!=e.font&&(i.font=e.font,t.font=e.font),i.textAlign!=n&&(i.textAlign=n,t.textAlign=n),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=n,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:n,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:Uu(i||Ao)}}if(!t)this.strokeState_=null;else{const i=t.getColor(),n=t.getLineCap(),s=t.getLineDash(),r=t.getLineDashOffset(),l=t.getLineJoin(),c=t.getWidth(),h=t.getMiterLimit(),g=s||rd;this.strokeState_={lineCap:n!==void 0?n:Fp,lineDash:this.pixelRatio_===1?g:g.map(b=>b*this.pixelRatio_),lineDashOffset:(r||sd)*this.pixelRatio_,lineJoin:l!==void 0?l:Np,lineWidth:(c!==void 0?c:V0)*this.pixelRatio_,miterLimit:h!==void 0?h:F0,strokeStyle:Uu(i||N0)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),n=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=t[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const r=e.getScaleArray();this.imageScale_=[r[0]*this.pixelRatio_/i,r[1]*this.pixelRatio_/i],this.imageWidth_=t[0]*i}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const C=t.getColor();this.textFillState_={fillStyle:Uu(C||Ao)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const C=i.getColor(),S=i.getLineCap(),L=i.getLineDash(),R=i.getLineDashOffset(),G=i.getLineJoin(),O=i.getWidth(),V=i.getMiterLimit();this.textStrokeState_={lineCap:S!==void 0?S:Fp,lineDash:L||rd,lineDashOffset:R||sd,lineJoin:G!==void 0?G:Np,lineWidth:O!==void 0?O:V0,miterLimit:V!==void 0?V:F0,strokeStyle:Uu(C||N0)}}const n=e.getFont(),s=e.getOffsetX(),r=e.getOffsetY(),l=e.getRotateWithView(),c=e.getRotation(),h=e.getScaleArray(),g=e.getText(),b=e.getTextAlign(),v=e.getTextBaseline();this.textState_={font:n!==void 0?n:E7,textAlign:b!==void 0?b:D0,textBaseline:v!==void 0?v:tx},this.text_=g!==void 0?Array.isArray(g)?g.reduce((C,S,L)=>C+=L%2?" ":S,""):g:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=r!==void 0?this.pixelRatio_*r:0,this.textRotateWithView_=l!==void 0?l:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const CP=che,Jo=.5;function AP(a,e,t,i,n,s,r,l,c){const h=c?Mw(n):n,g=a[0]*Jo,b=a[1]*Jo,v=kr(g,b);v.imageSmoothingEnabled=!1;const C=v.canvas,S=new CP(v,Jo,n,null,r,l,c?Ew(yU(),c):null),L=t.length,R=Math.floor((256*256*256-1)/L),G={};for(let V=1;V<=L;++V){const B=t[V-1],z=B.getStyleFunction()||i;if(!z)continue;let j=z(B,s);if(!j)continue;Array.isArray(j)||(j=[j]);const ne=(V*R).toString(16).padStart(7,"#00000");for(let te=0,le=j.length;te<le;++te){const ue=j[te],fe=ue.getGeometryFunction()(B);if(!fe||!xr(h,fe.getExtent()))continue;const be=ue.clone(),Pe=be.getFill();Pe&&Pe.setColor(ne);const Be=be.getStroke();Be&&(Be.setColor(ne),Be.setLineDash(null)),be.setText(void 0);const Me=ue.getImage();if(Me){const ht=Me.getImageSize();if(!ht)continue;const Dt=kr(ht[0],ht[1],void 0,{alpha:!1}),We=Dt.canvas;Dt.fillStyle=ne,Dt.fillRect(0,0,We.width,We.height),be.setImage(new rc({img:We,anchor:Me.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Me.getOrigin(),opacity:1,size:Me.getSize(),scale:Me.getScale(),rotation:Me.getRotation(),rotateWithView:Me.getRotateWithView()}))}const ke=be.getZIndex()||0;let Je=G[ke];Je||(Je={},G[ke]=Je,Je.Polygon=[],Je.Circle=[],Je.LineString=[],Je.Point=[]);const ut=fe.getType();if(ut==="GeometryCollection"){const ht=fe.getGeometriesArrayRecursive();for(let Dt=0,We=ht.length;Dt<We;++Dt){const oa=ht[Dt];Je[oa.getType().replace("Multi","")].push(oa,be)}}else Je[ut.replace("Multi","")].push(fe,be)}}const O=Object.keys(G).map(Number).sort(ju);for(let V=0,B=O.length;V<B;++V){const z=G[O[V]];for(const j in z){const re=z[j];for(let ne=0,te=re.length;ne<te;ne+=2){S.setStyle(re[ne+1]);for(let le=0,ue=e.length;le<ue;++le)S.setTransform(e[le]),S.drawGeometry(re[ne])}}}return v.getImageData(0,0,C.width,C.height)}function SP(a,e,t){const i=[];if(t){const n=Math.floor(Math.round(a[0])*Jo),s=Math.floor(Math.round(a[1])*Jo),r=(Sn(n,0,t.width-1)+Sn(s,0,t.height-1)*t.width)*4,l=t.data[r],c=t.data[r+1],g=t.data[r+2]+256*(c+256*l),b=Math.floor((256*256*256-1)/e.length);g&&g%b===0&&i.push(e[g/b-1])}return i}const dhe=.5,TP={Point:bhe,LineString:phe,Polygon:xhe,MultiPoint:vhe,MultiLineString:fhe,MultiPolygon:yhe,GeometryCollection:ghe,Circle:_he};function hhe(a,e){return parseInt(Ga(a),10)-parseInt(Ga(e),10)}function I4(a,e){const t=EP(a,e);return t*t}function EP(a,e){return dhe*a/e}function _he(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(s||r){const c=a.getBuilder(t.getZIndex(),"Circle");c.setFillStrokeStyle(s,r),c.drawCircle(e,i,n)}const l=t.getText();if(l&&l.getText()){const c=a.getBuilder(t.getZIndex(),"Text");c.setTextStyle(l),c.drawText(e,i)}}function Hx(a,e,t,i,n,s,r,l){const c=[],h=t.getImage();if(h){let v=!0;const C=h.getImageState();C==la.LOADED||C==la.ERROR?v=!1:C==la.IDLE&&h.load(),v&&c.push(h.ready())}const g=t.getFill();g&&g.loading()&&c.push(g.ready());const b=c.length>0;return b&&Promise.all(c).then(()=>n(null)),mhe(a,e,t,i,s,r,l),b}function mhe(a,e,t,i,n,s,r){const l=t.getGeometryFunction()(e);if(!l)return;const c=l.simplifyTransformed(i,n);if(t.getRenderer())MP(a,c,t,e,r);else{const g=TP[c.getType()];g(a,c,t,e,r,s)}}function MP(a,e,t,i,n){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let l=0,c=r.length;l<c;++l)MP(a,r[l],t,i,n);return}a.getBuilder(t.getZIndex(),"Default").drawCustom(e,i,t.getRenderer(),t.getHitDetectionRenderer(),n)}function ghe(a,e,t,i,n,s){const r=e.getGeometriesArray();let l,c;for(l=0,c=r.length;l<c;++l){const h=TP[r[l].getType()];h(a,r[l],t,i,n,s)}}function phe(a,e,t,i,n){const s=t.getStroke();if(s){const l=a.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawLineString(e,i,n)}const r=t.getText();if(r&&r.getText()){const l=a.getBuilder(t.getZIndex(),"Text");l.setTextStyle(r),l.drawText(e,i,n)}}function fhe(a,e,t,i,n){const s=t.getStroke();if(s){const l=a.getBuilder(t.getZIndex(),"LineString");l.setFillStrokeStyle(null,s),l.drawMultiLineString(e,i,n)}const r=t.getText();if(r&&r.getText()){const l=a.getBuilder(t.getZIndex(),"Text");l.setTextStyle(r),l.drawText(e,i,n)}}function yhe(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(r||s){const c=a.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,r),c.drawMultiPolygon(e,i,n)}const l=t.getText();if(l&&l.getText()){const c=a.getBuilder(t.getZIndex(),"Text");c.setTextStyle(l),c.drawText(e,i,n)}}function bhe(a,e,t,i,n,s){const r=t.getImage(),l=t.getText(),c=l&&l.getText(),h=s&&r&&c?{}:void 0;if(r){if(r.getImageState()!=la.LOADED)return;const g=a.getBuilder(t.getZIndex(),"Image");g.setImageStyle(r,h),g.drawPoint(e,i,n)}if(c){const g=a.getBuilder(t.getZIndex(),"Text");g.setTextStyle(l,h),g.drawText(e,i,n)}}function vhe(a,e,t,i,n,s){const r=t.getImage(),l=r&&r.getOpacity()!==0,c=t.getText(),h=c&&c.getText(),g=s&&l&&h?{}:void 0;if(l){if(r.getImageState()!=la.LOADED)return;const b=a.getBuilder(t.getZIndex(),"Image");b.setImageStyle(r,g),b.drawMultiPoint(e,i,n)}if(h){const b=a.getBuilder(t.getZIndex(),"Text");b.setTextStyle(c,g),b.drawText(e,i,n)}}function xhe(a,e,t,i,n){const s=t.getFill(),r=t.getStroke();if(s||r){const c=a.getBuilder(t.getZIndex(),"Polygon");c.setFillStrokeStyle(s,r),c.drawPolygon(e,i,n)}const l=t.getText();if(l&&l.getText()){const c=a.getBuilder(t.getZIndex(),"Text");c.setTextStyle(l),c.drawText(e,i,n)}}class whe extends e5{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=nl(),this.wrappedRenderedExtent_=nl(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,i){const n=t.extent,s=t.viewState,r=s.center,l=s.resolution,c=s.projection,h=s.rotation,g=c.getExtent(),b=this.getLayer().getSource(),v=this.getLayer().getDeclutter(),C=t.pixelRatio,S=t.viewHints,L=!(S[Vn.ANIMATING]||S[Vn.INTERACTING]),R=this.context,G=Math.round(fi(n)/l*C),O=Math.round(ur(n)/l*C),V=b.getWrapX()&&c.canWrapX(),B=V?fi(g):null,z=V?Math.ceil((n[2]-g[2])/B)+1:1;let j=V?Math.floor((n[0]-g[0])/B):0;do{let re=this.getRenderTransform(r,l,0,C,G,O,j*B);t.declutter&&(re=re.slice(0)),e.execute(R,[R.canvas.width,R.canvas.height],re,h,L,i===void 0?op:i?Xx:ohe,i?v&&t.declutter[v]:void 0)}while(++j<z)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=kr(this.context.canvas.width,this.context.canvas.height,O9))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,Pw(this.context),O9.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;const n=e.viewState;this.prepareContainer(e,t);const s=this.context,r=this.replayGroup_;let l=r&&!r.isEmpty();if(!l&&!(this.getLayer().hasListener(Ro.PRERENDER)||this.getLayer().hasListener(Ro.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,e),n.projection,this.clipped_=!1,l&&i.extent&&this.clipping){const c=yl(i.extent);l=xr(c,e.extent),this.clipped_=l&&!zu(c,e.extent),this.clipped_&&this.clipUnrotated(s,e,c)}return l&&this.renderWorlds(r,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&s.restore(),this.postRender(s,e),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),n=this.renderedCenter_,s=this.renderedResolution_,r=this.renderedRotation_,l=this.renderedProjection_,c=this.wrappedRenderedExtent_,h=this.getLayer(),g=[],b=i[0]*Jo,v=i[1]*Jo;g.push(this.getRenderTransform(n,s,r,Jo,b,v,0).slice());const C=h.getSource(),S=l.getExtent();if(C.getWrapX()&&l.canWrapX()&&!zu(S,c)){let L=c[0];const R=fi(S);let G=0,O;for(;L<S[0];)--G,O=R*G,g.push(this.getRenderTransform(n,s,r,Jo,b,v,O).slice()),L+=R;for(G=0,L=c[2];L>S[2];)++G,O=R*G,g.push(this.getRenderTransform(n,s,r,Jo,b,v,O).slice()),L-=R}this.hitDetectionImageData_=AP(i,g,this.renderedFeatures_,h.getStyleFunction(),c,s,r,I4(s,this.renderedPixelRatio_),null)}t(SP(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,i,n,s){var v,C;if(!this.replayGroup_)return;const r=t.viewState.resolution,l=t.viewState.rotation,c=this.getLayer(),h={},g=function(S,L,R){const G=Ga(S),O=h[G];if(O){if(O!==!0&&R<O.distanceSq){if(R===0)return h[G]=!0,s.splice(s.lastIndexOf(O),1),n(S,c,L);O.geometry=L,O.distanceSq=R}}else{if(R===0)return h[G]=!0,n(S,c,L);s.push(h[G]={feature:S,layer:c,geometry:L,distanceSq:R,callback:n})}},b=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,r,l,i,g,b?(C=(v=t.declutter)==null?void 0:v[b])==null?void 0:C.all().map(S=>S.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),i=t.getSource();if(!i)return!1;const n=e.viewHints[Vn.ANIMATING],s=e.viewHints[Vn.INTERACTING],r=t.getUpdateWhileAnimating(),l=t.getUpdateWhileInteracting();if(this.ready&&!r&&n||!l&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=e.extent,h=e.viewState,g=h.projection,b=h.resolution,v=e.pixelRatio,C=t.getRevision(),S=t.getRenderBuffer();let L=t.getRenderOrder();L===void 0&&(L=hhe);const R=h.center.slice(),G=Eh(c,S*b),O=G.slice(),V=[G.slice()],B=g.getExtent();if(i.getWrapX()&&g.canWrapX()&&!zu(B,e.extent)){const Pe=fi(B),Be=Math.max(fi(G)/2,Pe);G[0]=B[0]-Be,G[2]=B[2]+Be,bT(R,g);const Me=Ek(V[0],g);Me[0]<B[0]&&Me[2]<B[2]?V.push([Me[0]+Pe,Me[1],Me[2]+Pe,Me[3]]):Me[0]>B[0]&&Me[2]>B[2]&&V.push([Me[0]-Pe,Me[1],Me[2]-Pe,Me[3]])}if(this.ready&&this.renderedResolution_==b&&this.renderedRevision_==C&&this.renderedRenderOrder_==L&&this.renderedFrameDeclutter_===!!e.declutter&&zu(this.wrappedRenderedExtent_,G))return vd(this.renderedExtent_,O)||(this.hitDetectionImageData_=null,this.renderedExtent_=O),this.renderedCenter_=R,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const z=new wP(EP(b,v),G,b,v);let j;for(let Pe=0,Be=V.length;Pe<Be;++Pe)i.loadFeatures(V[Pe],b,g);const re=I4(b,v);let ne=!0;const te=(Pe,Be)=>{let Me;const ke=Pe.getStyleFunction()||t.getStyleFunction();if(ke&&(Me=ke(Pe,b)),Me){const Je=this.renderFeature(Pe,re,Me,z,j,this.getLayer().getDeclutter(),Be);ne=ne&&!Je}},le=Mw(G),ue=i.getFeaturesInExtent(le);L&&ue.sort(L);for(let Pe=0,Be=ue.length;Pe<Be;++Pe)te(ue[Pe],Pe);this.renderedFeatures_=ue,this.ready=ne;const fe=z.finish(),be=new IP(G,b,v,i.getOverlaps(),fe,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=b,this.renderedRevision_=C,this.renderedRenderOrder_=L,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=O,this.wrappedRenderedExtent_=G,this.renderedCenter_=R,this.renderedProjection_=g,this.renderedPixelRatio_=v,this.replayGroup_=be,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,i,n,s,r,l){if(!i)return!1;let c=!1;if(Array.isArray(i))for(let h=0,g=i.length;h<g;++h)c=Hx(n,e,i[h],t,this.boundHandleStyleImageChange_,s,r,l)||c;else c=Hx(n,e,i,t,this.boundHandleStyleImageChange_,s,r,l);return c}}const Ihe=whe;class Che extends c3{constructor(e){super(e)}createRenderer(){return new Ihe(this)}}const El=Che;let Ahe=!1;function She(a,e,t,i,n,s,r){const l=new XMLHttpRequest;l.open("GET",typeof a=="function"?a(t,i,n):a,!0),e.getType()=="arraybuffer"&&(l.responseType="arraybuffer"),l.withCredentials=Ahe,l.onload=function(c){if(!l.status||l.status>=200&&l.status<300){const h=e.getType();try{let g;h=="text"||h=="json"?g=l.responseText:h=="xml"?g=l.responseXML||l.responseText:h=="arraybuffer"&&(g=l.response),g?s(e.readFeatures(g,{extent:t,featureProjection:n}),e.readProjection(g)):r()}catch{r()}}else r()},l.onerror=r,l.send()}function Y9(a,e){return function(t,i,n,s,r){She(a,e,t,i,n,(l,c)=>{this.addFeatures(l),s!==void 0&&s(l)},()=>{this.changed(),r!==void 0&&r()})}}function The(a,e){return[[-1/0,-1/0,1/0,1/0]]}class o5 extends lu{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new o5(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(dn(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=La(e,Ba.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?Ehe(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Ehe(a){if(typeof a=="function")return a;let e;return Array.isArray(a)?e=a:(ji(typeof a.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[a]),function(){return e}}const Jn=o5,K9=Wo();class jp{constructor(e,t,i,n,s,r){this.styleFunction,this.extent_,this.id_=r,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?i0(this.flatCoordinates_):mT(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=iu(this.getExtent());this.flatInteriorPoints_=PT(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=_X(this.flatCoordinates_,this.ends_),t=QO(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=n7(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Gx(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const i=this.ends_;for(let n=0,s=i.length;n<s;++n){const r=i[n],l=Gx(e,t,r,2,.5);Vi(this.flatMidpoints_,l),t=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Li(e);const t=e.getExtent(),i=e.getWorldExtent();if(t&&i){const n=ur(i)/ur(t);nu(K9,i[0],i[3],n,-n,0,0,0),nd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,K9,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new jp(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Vk((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const i=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":i.length=Gw(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),n=[i.length];break;case"MultiLineString":n=[],i.length=a7(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,n);break;case"Polygon":n=[],i.length=GT(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,n);break}return n&&(this.simplifiedGeometry_=new jp(this.type_,i,n,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}jp.prototype.getFlatCoordinates=jp.prototype.getOrientedFlatCoordinates;const sh=jp;class Mhe{constructor(e){this.rbush_=new b7(e),this.items_={}}insert(e,t){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(i),this.items_[Ga(t)]=i}load(e,t){const i=new Array(t.length);for(let n=0,s=t.length;n<s;n++){const r=e[n],l=t[n],c={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:l};i[n]=c,this.items_[Ga(l)]=c}this.rbush_.load(i)}remove(e){const t=Ga(e),i=this.items_[t];return delete this.items_[t],this.rbush_.remove(i)!==null}update(e,t){const i=this.items_[Ga(t)],n=[i.minX,i.minY,i.maxX,i.maxY];rm(n,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(n){return n.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let i;for(let n=0,s=e.length;n<s;n++)if(i=t(e[n]),i)return i;return i}isEmpty(){return om(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return ic(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}const C4=Mhe,wo={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class $d extends sl{constructor(e,t,i){super(e),this.feature=t,this.features=i}}class Lhe extends t5{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=P0,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(ji(this.format_,"`format` must be set when `url` is set"),this.loader_=Y9(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:The;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new C4:null,this.loadedExtentsRtree_=new C4,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,n;Array.isArray(e.features)?n=e.features:e.features&&(i=e.features,n=i.getArray()),!t&&i===void 0&&(i=new $o(n)),n!==void 0&&this.addFeaturesInternal(n),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=Ga(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const i=e.getGeometry();if(i){const n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new $d(wo.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof sh||(this.featureChangeKeys_[e]=[La(t,Ba.CHANGE,this.handleFeatureChange_,this),La(t,dm.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let i=!0;if(t.getId()!==void 0){const n=String(t.getId());if(!(n in this.idIndex_))this.idIndex_[n]=t;else if(t instanceof sh){const s=this.idIndex_[n];s instanceof sh?Array.isArray(s)?s.push(t):this.idIndex_[n]=[s,t]:i=!1}else i=!1}return i&&(ji(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],i=[],n=[];for(let s=0,r=e.length;s<r;s++){const l=e[s],c=Ga(l);this.addToIndex_(c,l)&&i.push(l)}for(let s=0,r=i.length;s<r;s++){const l=i[s],c=Ga(l);this.setupChangeEvents_(c,l);const h=l.getGeometry();if(h){const g=h.getExtent();t.push(g),n.push(l)}else this.nullGeometryFeatures_[c]=l}if(this.featuresRtree_&&this.featuresRtree_.load(t,n),this.hasListener(wo.ADDFEATURE))for(let s=0,r=i.length;s<r;s++)this.dispatchEvent(new $d(wo.ADDFEATURE,i[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(wo.ADDFEATURE,function(i){t||(t=!0,e.push(i.feature),t=!1)}),this.addEventListener(wo.REMOVEFEATURE,function(i){t||(t=!0,e.remove(i.feature),t=!1)}),e.addEventListener(Rr.ADD,i=>{t||(t=!0,this.addFeature(i.element),t=!1)}),e.addEventListener(Rr.REMOVE,i=>{t||(t=!0,this.removeFeature(i.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(dn);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new $d(wo.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(n){const s=n.getGeometry();if(s instanceof sh||s.intersectsCoordinate(e))return t(n)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(i){const n=i.getGeometry();if(n instanceof sh||n.intersectsExtent(e)){const s=t(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),om(this.nullGeometryFeatures_)||Vi(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){t.push(i)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const n=Mk(e,t);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const i=e[0],n=e[1];let s=null;const r=[NaN,NaN];let l=1/0;const c=[-1/0,-1/0,1/0,1/0];return t=t||Mh,this.featuresRtree_.forEachInExtent(c,function(h){if(t(h)){const g=h.getGeometry(),b=l;if(l=g instanceof sh?0:g.closestPointXY(i,n,r,l),l<b){s=h;const v=Math.sqrt(l);c[0]=i-v,c[1]=n-v,c[2]=i+v,c[3]=n+v}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,i=Ga(t),n=t.getGeometry();if(!n)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[i]=t);else{const r=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(r,t)):this.featuresRtree_&&this.featuresRtree_.update(r,t)}const s=t.getId();if(s!==void 0){const r=s.toString();this.idIndex_[r]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[r]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[i]=t;this.changed(),this.dispatchEvent(new $d(wo.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:Ga(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&om(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,i){const n=this.loadedExtentsRtree_,s=this.strategy_(e,t,i);for(let r=0,l=s.length;r<l;++r){const c=s[r];n.forEachInExtent(c,function(g){return zu(g.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new $d(wo.FEATURESLOADSTART)),this.loader_.call(this,c,t,i,g=>{--this.loadingExtentsCount_,this.dispatchEvent(new $d(wo.FEATURESLOADEND,void 0,g))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new $d(wo.FEATURESLOADERROR))}),n.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,i=t.forEachInExtent(e,function(n){if(rm(n.extent,e))return n});i&&t.remove(i)}removeFeatures(e){let t=!1;for(let i=0,n=e.length;i<n;++i)t=this.removeFeatureInternal(e[i])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=Ga(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const i=this.featureChangeKeys_[t];i==null||i.forEach(dn),delete this.featureChangeKeys_[t];const n=e.getId();if(n!==void 0){const s=n.toString(),r=this.idIndex_[s];r===e?delete this.idIndex_[s]:Array.isArray(r)&&(r.splice(r.indexOf(e),1),r.length===1&&(this.idIndex_[s]=r[0]))}return delete this.uidIndex_[t],this.hasListener(wo.REMOVEFEATURE)&&this.dispatchEvent(new $d(wo.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){ji(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(Y9(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const Cd=Lhe;function Rhe(){return new Qn({image:khe})}const khe=new uu({radius:4,fill:new bs({color:"white"}),stroke:new Vr({color:"white",width:1})}),Whe=1002,Ghe="featurePositionLayer";class Ohe extends El{constructor(t){const i=new Cd({features:[],useSpatialIndex:!1});super({...t,source:i});_a(this,"geoMarker")}moveGeoMarker(t,i){var n,s,r;(n=this.geoMarker)!=null&&n.getGeometry()||this.createGeoMarker(),(r=(s=this.geoMarker)==null?void 0:s.getGeometry())==null||r.setCoordinates([t,i])}createGeoMarker(){var t,i;this.geoMarker=new Jn({geometry:new Zr([0,0])}),(t=this.getSource())==null||t.clear(),(i=this.getSource())==null||i.addFeature(this.geoMarker)}removeGeoMarker(){var t;(t=this.getSource())==null||t.clear(),this.geoMarker=void 0}}class Phe{createOlLayer(){const e=Rhe(),t=new Ohe({declutter:!0,zIndex:Whe,style:e,updateWhileAnimating:!0,updateWhileInteracting:!0});return t.set("cyLayerType",Ghe),t}}const Bhe=new Phe,Fhe=1e3,Nhe="featureLayer";class Dhe{createOlLayer(){const e=new El({source:new Cd({features:[]}),zIndex:Fhe});return e.set("cyLayerType",Nhe),e}}const Vhe=new Dhe;class Zhe{createOlLayer(e,t){let i;if(t&&(i=Ode.createOlLayer(e,t)),!i)switch(e.type){case"position":return this.createOlLayerFeaturePosition(e);case cd.WMS:i=dP.createOlLayer(e);break;case cd.WMTS:case cd.BG_WMTS:i=bP.createOlLayer(e);break;case j_.LAYER_OFFLINE_TILE:case j_.LAYER_OFFLINE_BG_VECTOR:i=zde.createOlLayer(e);break;default:throw new Error(`Unrecognized layer type: ${e.type}`)}return this.setOlProps(e,i),i}createOlLayerDrawnFeatures(){return Vhe.createOlLayer()}createOlLayerFeaturePosition(e){const t=Bhe.createOlLayer();return t.set(Fx,e.id),t.set(y4,e.name),t}setOlProps(e,t){t.set(Fx,e.id),t.set(y4,e.name),t.set(eP,e.name),t.set(Nx,e.metadata),t.set(pce,e.id),t.set(fce,al().getLayerCurrentTime(e)),t.set(yce,e.time),t.setOpacity(e.opacity)}}const p2=new Zhe;class zhe{setLayerTime(e,t){const i=e.getSource();i instanceof zx&&dP.setLayerTime(i,t),i instanceof s1&&bP.setLayerTime(e,i,t)}}const Uhe=new zhe,Rv=-200;function l5(){function a(S,L){if(!L)return;const R=g(L);S.addLayer(R)}function e(S,L){if(!L)return;const R=p2.createOlLayer(L);return S.addLayer(R),R}function t(S,L){return S.getLayers().getArray().find(R=>R.get("id")===L)}function i(S,L){const R=t(S,L);R&&S.removeLayer(R)}function n(S,L){const R=S.getLayers().getArray();L.forEach((G,O)=>{const V=R.find(B=>B.get("id")===G.id);V==null||V.setZIndex(O+1)})}function s(S,L,R){const G=S.getLayers().getArray().find(O=>O.get("id")===L);G&&G.setOpacity(R)}function r(S,L){const R=al(),G=t(S,L.id),O=R.getLayerCurrentTime(L);O&&G&&Uhe.setLayerTime(G,O)}function l(S){qg.delete(S)}function c(S){return qg.has(S.id)}function h(S,L){qg.set(S,L)}function g(S){const L=S.id,R=qg.get(L);if(R)return R;{const G=p2.createOlLayer(S);return h(L,G),G}}function b(S){return S&&qg.get(S.id)||null}function v(S,L){const G=S.getLayers().getArray().find(O=>O.getZIndex()===Rv);G&&L(G)}function C(S,L,R){var z;const G=S.getLayers(),O=G.getArray().findIndex(j=>j.getZIndex()===Rv),V=(z=G.getArray()[O])==null?void 0:z.get("id");let B;L&&(c(L)?B=b(L):(B=p2.createOlLayer(L,R),h(L.id,B))),O>=0?B?(B.setZIndex(Rv),G.setAt(O,B)):G.removeAt(O):B&&(B.setZIndex(Rv),S.addLayer(B)),V&&V!==(L==null?void 0:L.id)&&$O.restore(!0)}return{addLayer:a,addFeatureLayer:e,findLayer:t,removeLayer:i,removeFromCache:l,reorderLayers:n,setLayerOpacity:s,setLayerTime:r,getLayerFromCache:b,setBgLayer:C,applyOnBgLayer:v}}const LP=rl("profile-position",()=>{const a=Qe(void 0),e=Qe(void 0);function t(i,n){a.value=i,e.value=n}return{x:a,y:e,setPosition:t}},{}),RP="lux-feat-position";let bo;function Xhe(a,e=!0){const t=l5(),i=LP(),n=ro(),{drawStateActive:s,editStateActive:r}=Zt(n),{x:l,y:c}=Zt(i),h=Wi(a),g=Wi(void 0),b=Qe(!0),v=new is([0,0]),C=Qe(!0),S=sO(j=>z(j),15);let L,R;tr(()=>{L=zi().getOlMap(),G(),V()}),Ds(()=>B()),Kt(()=>YD(e),j=>{C.value=j??!0,j||bo==null||bo.removeGeoMarker()}),Kt(h,j=>{j&&O(j)}),Kt([l,c],([j,re])=>{C.value&&!s.value&&j&&re&&b.value?bo==null||bo.moveGeoMarker(j,re):bo==null||bo.removeGeoMarker()});function G(){if(bo)return;const j={id:RP,type:"position"};bo=t.addFeatureLayer(L,j)}function O(j){const re=j==null?void 0:j.map(ne=>{const te=Ns([ne.x,ne.y],cu,L.getView().getProjection());return new Zr(te).getCoordinates().concat(ne.dist)});v.setCoordinates(re)}function V(){R===void 0&&(R=La(L,"pointermove",S))}function B(){R&&(dn(R),R=void 0,bo==null||bo.removeGeoMarker())}function z(j){if(j.dragging||s.value||!C.value)return;let re,ne;const te=L.getEventCoordinate(j.originalEvent),le=v.getClosestPoint(te),ue=le[0]-te[0],fe=le[1]-te[1],be=ue*ue+fe*fe,Pe=L.getView().getResolution();be/(Pe*Pe)<64?(g.value=le[2],b.value=r.value!=="editLine",re=le[0],ne=le[1]):(g.value=-1,b.value=!0,re=void 0,ne=void 0),i.setPosition(re,ne)}return{profileData:h,highlightDistance:g}}const Yx=function(a,e){let t=0,i=[];a.getType()==="Polygon"?i=a.getCoordinates()[0]:a.getType()==="LineString"&&(i=a.getCoordinates());for(let n=0,s=i.length-1;n<s;++n){const r=Ns(i[n],e,Dp),l=Ns(i[n+1],e,Dp);t+=X2(r,l)}return t},kP=function(a){return Math.abs(Fk(a))},Hhe=function(a,e){const t=o1(a,e);return 2*Math.PI*t},Yhe=function(a,e){return Math.PI*Math.pow(o1(a,e),2)},o1=function(a,e){const t=a.getLastCoordinate(),i=a.getCenter();return i!==null&&t!==null?Yx(new is([i,t]),e):0},u5=function(a,e,t){const i=a.getCenter(),n=t.getView().getProjection(),s=t.getView().getResolution()||0,r=yS(n,s,i),l=s/r;e=e/Gp.m*l,a.setRadius(e)};function WP(a){const e=a.getGeometry();return a.featureType==="drawnCircle"&&(e==null?void 0:e.getType())==="Circle"&&a.setGeometry(u7(e,64)),a}function Khe(a){const e=zi().getOlMap(),t=a.getGeometry();if(a.featureType==="drawnCircle"&&(t==null?void 0:t.getType())==="Polygon"){const i=t.getExtent(),n=[(i[0]+i[2])/2,(i[1]+i[3])/2],s=t.getCoordinates()[0];let r=0;s.forEach(c=>{const h=X2(Pp(n),Pp(c));h>r&&(r=h)});const l=new JO(n);u5(l,r,e),a.setGeometry(l)}return a}function GP(a){const e=a.getGeometry().getCoordinates().reverse(),t=new is(e);a.setGeometry(t)}function qhe(a,e){const t=a.canvas;e=e||{};const i=e.pixelRatio||Uk,n=e.size;n&&(t.width=n[0]*i,t.height=n[1]*i,t.style.width=n[0]+"px",t.style.height=n[1]+"px");const s=[0,0,t.width,t.height],r=n2(Wo(),i,i);return new CP(a,i,s,r,0)}function kv(a,e){return br(a.inversePixelTransform,e.slice(0))}const Es={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class jhe extends lu{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+AX,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Es.ELEMENT,this.handleElementChanged),this.addChangeListener(Es.MAP,this.handleMapChanged),this.addChangeListener(Es.OFFSET,this.handleOffsetChanged),this.addChangeListener(Es.POSITION,this.handlePositionChanged),this.addChangeListener(Es.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Es.ELEMENT)}getId(){return this.id}getMap(){return this.get(Es.MAP)||null}getOffset(){return this.get(Es.OFFSET)}getPosition(){return this.get(Es.POSITION)}getPositioning(){return this.get(Es.POSITIONING)}handleElementChanged(){c7(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),dn(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=La(e,Kc.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Es.ELEMENT,e)}setMap(e){this.set(Es.MAP,e)}setOffset(e){this.set(Es.OFFSET,e)}setPosition(e){this.set(Es.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Es.POSITION))return;const i=this.getRect(t.getTargetElement(),t.getSize()),n=this.getElement(),s=this.getRect(n,[TX(n),EX(n)]);e=e||{};const r=e.margin===void 0?20:e.margin;if(!zu(i,s)){const l=s[0]-i[0],c=i[2]-s[2],h=s[1]-i[1],g=i[3]-s[3],b=[0,0];if(l<0?b[0]=l-r:c<0&&(b[0]=Math.abs(c)+r),h<0?b[1]=h-r:g<0&&(b[1]=Math.abs(g)+r),b[0]!==0||b[1]!==0){const v=t.getView().getCenterInternal(),C=t.getPixelFromCoordinateInternal(v);if(!C)return;const S=[C[0]+b[0],C[1]+b[1]],L=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(S),duration:L.duration,easing:L.easing})}}}getRect(e,t){const i=e.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+t[0],s+t[1]]}setPositioning(e){this.set(Es.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(t),n=e.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(e,t){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const r=Math.round(e[0]+n[0])+"px",l=Math.round(e[1]+n[1])+"px";let c="0%",h="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?c="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(c="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?h="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(h="-50%");const g=`translate(${c}, ${h}) translate(${r}, ${l})`;this.rendered.transform_!=g&&(this.rendered.transform_=g,i.transform=g)}getOptions(){return this.options}}const OP=jhe;class c5{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Jn,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let i=t.dataProjection?Li(t.dataProjection):this.readProjection(e);t.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Li(i),i.setWorldExtent(t.extent)),t={dataProjection:i,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return Aa()}readFeature(e,t){return Aa()}readFeatures(e,t){return Aa()}readGeometry(e,t){return Aa()}readProjection(e){return Aa()}writeFeature(e,t){return Aa()}writeFeatures(e,t){return Aa()}writeGeometry(e,t){return Aa()}}function Ml(a,e,t){const i=t?Li(t.featureProjection):null,n=t?Li(t.dataProjection):null;let s=a;if(i&&n&&!yp(i,n)){e&&(s=a.clone());const r=e?i:n,l=e?n:i;r.getUnits()==="tile-pixels"?s.transform(r,l):s.applyTransform(um(r,l))}if(e&&t&&t.decimals!==void 0){const r=Math.pow(10,t.decimals),l=function(c){for(let h=0,g=c.length;h<g;++h)c[h]=Math.round(c[h]*r)/r;return c};s===a&&(s=a.clone()),s.applyTransform(l)}return s}const Jhe={Point:Zr,LineString:is,Polygon:nc,MultiPoint:bm,MultiLineString:zh,MultiPolygon:L1};function Qhe(a,e,t){return Array.isArray(e[0])?(l7(a,0,e,t)||(a=a.slice(),IS(a,0,e,t)),a):(FT(a,0,e,t)||(a=a.slice(),J2(a,0,e,t)),a)}function PP(a,e){var s;const t=a.geometry;if(!t)return[];if(Array.isArray(t))return t.map(r=>PP({...a,geometry:r})).flat();const i=t.type==="MultiPolygon"?"Polygon":t.type;if(i==="GeometryCollection"||i==="Circle")throw new Error("Unsupported geometry type: "+i);const n=t.layout.length;return Ml(new sh(i,i==="Polygon"?Qhe(t.flatCoordinates,t.ends,n):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),n,a.properties||{},a.id).enableSimplifyTransformed(),!1,e)}function d5(a,e){if(!a)return null;if(Array.isArray(a)){const i=a.map(n=>d5(n,e));return new ld(i)}const t=Jhe[a.type];return Ml(new t(a.flatCoordinates,a.layout||"XY",a.ends),!1,e)}class $he extends c5{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Wv(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Wv(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return Aa()}readFeaturesFromObject(e,t){return Aa()}readGeometry(e,t){return this.readGeometryFromObject(Wv(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return Aa()}readProjection(e){return this.readProjectionFromObject(Wv(e))}readProjectionFromObject(e){return Aa()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return Aa()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return Aa()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return Aa()}}function Wv(a){if(typeof a=="string"){const e=JSON.parse(a);return e||null}return a!==null?a:null}const e_e=$he;class t_e extends e_e{constructor(e){e=e||{},super(),this.dataProjection=Li(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Li(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let i=null;e.type==="Feature"?i=e:i={type:"Feature",geometry:e,properties:null};const n=h5(i.geometry);if(this.featureClass===sh)return PP({geometry:n,id:i.id,properties:i.properties},t);const s=new Jn;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&i.geometry_name&&s.setGeometryName(i.geometry_name),s.setGeometry(d5(n,t)),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(e,t){const i=e;let n=null;if(i.type==="FeatureCollection"){const s=e;n=[];const r=s.features;for(let l=0,c=r.length;l<c;++l){const h=this.readFeatureFromObject(r[l],t);h&&n.push(h)}}else n=[this.readFeatureFromObject(e,t)];return n.flat()}readGeometryFromObject(e,t){return a_e(e,t)}readProjectionFromObject(e){const t=e.crs;let i;if(t)if(t.type=="name")i=Li(t.properties.name);else if(t.type==="EPSG")i=Li("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else i=this.dataProjection;return i}writeFeatureObject(e,t){t=this.adaptOptions(t);const i={type:"Feature",geometry:null,properties:null},n=e.getId();if(n!==void 0&&(i.id=n),!e.hasProperties())return i;const s=e.getProperties(),r=e.getGeometry();return r&&(i.geometry=A4(r,t),delete s[e.getGeometryName()]),om(s)||(i.properties=s),i}writeFeaturesObject(e,t){t=this.adaptOptions(t);const i=[];for(let n=0,s=e.length;n<s;++n)i.push(this.writeFeatureObject(e[n],t));return{type:"FeatureCollection",features:i}}writeGeometryObject(e,t){return A4(e,this.adaptOptions(t))}}function h5(a,e){if(!a)return null;let t;switch(a.type){case"Point":{t=n_e(a);break}case"LineString":{t=r_e(a);break}case"Polygon":{t=u_e(a);break}case"MultiPoint":{t=o_e(a);break}case"MultiLineString":{t=s_e(a);break}case"MultiPolygon":{t=l_e(a);break}case"GeometryCollection":{t=i_e(a);break}default:throw new Error("Unsupported GeoJSON type: "+a.type)}return t}function a_e(a,e){const t=h5(a);return d5(t,e)}function i_e(a,e){return a.geometries.map(function(i){return h5(i)})}function n_e(a){const e=a.coordinates;return{type:"Point",flatCoordinates:e,layout:wm(e.length)}}function r_e(a){var i;const e=a.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:wm(((i=e[0])==null?void 0:i.length)||2)}}function s_e(a){var s,r;const e=a.coordinates,t=((r=(s=e[0])==null?void 0:s[0])==null?void 0:r.length)||2,i=[],n=m1(i,0,e,t);return{type:"MultiLineString",flatCoordinates:i,ends:n,layout:wm(t)}}function o_e(a){var t;const e=a.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:wm(((t=e[0])==null?void 0:t.length)||2)}}function l_e(a){var s,r;const e=a.coordinates,t=[],i=((r=(s=e[0])==null?void 0:s[0])==null?void 0:r[0].length)||2,n=t7(t,0,e,i);return{type:"MultiPolygon",flatCoordinates:t,ends:n,layout:wm(i)}}function u_e(a){var s,r;const e=a.coordinates,t=[],i=(r=(s=e[0])==null?void 0:s[0])==null?void 0:r.length,n=m1(t,0,e,i);return{type:"Polygon",flatCoordinates:t,ends:n,layout:wm(i)}}function A4(a,e){a=Ml(a,!0,e);const t=a.getType();let i;switch(t){case"Point":{i=g_e(a);break}case"LineString":{i=d_e(a);break}case"Polygon":{i=p_e(a,e);break}case"MultiPoint":{i=__e(a);break}case"MultiLineString":{i=h_e(a);break}case"MultiPolygon":{i=m_e(a,e);break}case"GeometryCollection":{i=c_e(a,e);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return i}function c_e(a,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:a.getGeometriesArray().map(function(i){return A4(i,e)})}}function d_e(a,e){return{type:"LineString",coordinates:a.getCoordinates()}}function h_e(a,e){return{type:"MultiLineString",coordinates:a.getCoordinates()}}function __e(a,e){return{type:"MultiPoint",coordinates:a.getCoordinates()}}function m_e(a,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:a.getCoordinates(t)}}function g_e(a,e){return{type:"Point",coordinates:a.getCoordinates()}}function p_e(a,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:a.getCoordinates(t)}}const Lm=t_e,f_e="same-origin";async function mf(a,e,t="GET",i){const n={},s={method:t,credentials:f_e,headers:n};let r=a;if(t==="GET"){const c=new URLSearchParams(e);r=`${a}?${c.toString()}`}else e instanceof FormData?s.body=e:i==="application/json"?(n["Content-Type"]="application/json",s.body=JSON.stringify(e)):(n["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",s.body=new URLSearchParams(e));const l=await fetch(r,s);if(!l.ok)throw new Error("Error while trying to call api");return l}const y_e="https://migration.geoportail.lu/profile.json";async function b_e(a,e,t="dhm",i=100){const n={geom:a,nbPoints:i+"",layers:t,id:e+""},s=await mf(y_e,n,"POST");if(!s.ok)throw new Error("Error while trying to get profile");return await s.json()}function v_e(a,e=1){if(!/^#[0-9A-Fa-f]{6}$/.test(a))throw new Error(`Invalid hex color string: ${a}`);const i=parseInt(a.slice(1,3),16),n=parseInt(a.slice(3,5),16),s=parseInt(a.slice(5,7),16);return[i,n,s,e]}function BP(a){const[e,t,i]=a;if(e!==(e&255)||t!==(t&255)||i!==(i&255))throw Error(`"(${e},${t},${i})" is not a valid RGB color`);const n=wA(e.toString(16)),s=wA(t.toString(16)),r=wA(i.toString(16));return`#${n}${s}${r}`}function wA(a){return a.length===1?`0${a}`:a}const x_e="https://migration.geoportail.lu/mymaps",w_e="https://migration.geoportail.lu/mymaps/symbol",I_e=x_e+"/getarrow";class Xh extends Jn{constructor(t,i){var e=(...args)=>{super(...args);_a(this,"id");_a(this,"label");_a(this,"description");_a(this,"display_order");_a(this,"editable");_a(this,"selected");_a(this,"map_id");_a(this,"saving");_a(this,"featureType");_a(this,"_featureStyle");_a(this,"map",zi().getOlMap());_a(this,"profileData")};t?(e(t.getGeometry()),this.label=t.label,this.featureType=t.featureType,this.map_id=t.map_id,this.description=t.description,this.display_order=t.display_order,this.editable=t.editable,this.selected=t.selected,this._featureStyle=t.featureStyle,this.id=t.id,this.saving=t.saving,this.setProperties(t.getProperties())):e(i)}clone(){const t=new Xh(this,this.hasProperties()?this.getProperties():void 0);t.setGeometryName(this.getGeometryName());const i=this.getGeometry();i&&t.setGeometry(i.clone());const n=this.getStyle();return n&&t.setStyle(n),t.id=Vw(),t}static clone(t){return t.clone()}get featureStyle(){return this._featureStyle}set featureStyle(t){this._featureStyle=t,this.changed()}fit(){var n;const t=this.map.getSize(),i=(n=this.getGeometry())==null?void 0:n.getExtent();this.map.getView().fit(i,{size:t})}async getProfile(){const t=this.getGeometry();if(!((t==null?void 0:t.getType())!=="LineString"&&(t==null?void 0:t.getType())!=="MultiLineString")){if(this.profileData===void 0){const i={dataProjection:cu,featureProjection:tm},n=new Lm().writeGeometry(this.getGeometry(),i),s=await b_e(n,this.id);let r=0,l=0,c=0,h;this.profileData=s.profile.map(g=>{const b={...g,cumulativeElevation:0,elevationGain:0,elevationLoss:0},v=b.values.dhm;if(h!==void 0){const C=v-h;c=c+C,C>0?r=r+C:l=l+C}return b.cumulativeElevation=c,b.elevationGain=r,b.elevationLoss=l,h=v,b})}return this.profileData}}toProperties(){return{angle:this.featureStyle.angle,color:this.featureStyle.color,description:this.description,stroke:this.featureStyle.stroke,isLabel:this.featureType==="drawnLabel",linestyle:this.featureStyle.linestyle,name:this.label,opacity:this.featureStyle.opacity,showOrientation:this.featureStyle.showOrientation,shape:this.featureStyle.shape,size:this.featureStyle.size,isCircle:this.featureType==="drawnCircle",symbolId:this.featureStyle.symbolId,symboltype:this.featureStyle.symboltype}}getStyleFunction(){const t=[],i=new Qn({image:new uh({radius:6,points:4,angle:Math.PI/4,fill:new bs({color:[255,255,255,.5]}),stroke:new Vr({color:[0,0,0,1]})}),geometry:function(l){const c=l.getGeometry();let h;return c instanceof is?(h=c.getCoordinates(),new bm(h)):c instanceof nc?(h=c.getCoordinates()[0],new bm(h)):c}}),n=new bs,s=I_e,r=this.map;return function(l,c){var B,z;c===void 0&&(c=l,l=this),t.length=0,l.editable&&l.selected&&t.push(i);let h=l.display_order;h===void 0&&(h=0);const g=l.featureStyle.color||"#FF0000",b=v_e(g,1);let v=l.featureStyle.opacity;v===void 0&&(v=1);const C=b.slice();if(C[3]=v,n.setColor(C),((B=l.getGeometry())==null?void 0:B.getType())==="LineString"&&l.featureStyle.showOrientation){let j,re,ne=l.featureStyle.arrowcolor;ne==null&&(ne=g),(z=l.getGeometry())==null||z.forEachSegment(function(te,le){const ue=new Zr([(te[0]+le[0])/2,(te[1]+le[1])/2]),fe=le[0]-te[0],be=le[1]-te[1];if(j!=null){const Pe=r.getPixelFromCoordinate(ue.getCoordinates()),Be=r.getPixelFromCoordinate(j.getCoordinates()),Me=Be[0]-Pe[0],ke=Be[1]-Pe[1];re=Math.sqrt(Me*Me+ke*ke)}if(!j||re>600){const Pe=s,Be=Math.PI/2-Math.atan2(be,fe);t.push(new Qn({geometry:ue,zIndex:h,image:new rc({color:ne,rotation:Be,src:Pe})})),j=ue}})}let S;if(l.featureStyle.linestyle)switch(l.featureStyle.linestyle){case"dashed":S=[10,10];break;case"dotted":S=[1,6];break}let L,R=l.featureStyle.stroke;R>0&&(!l.editable&&l.selected&&(R=R+3),L=new Vr({color:b,width:R,lineDash:S}));let G=l.featureStyle.size;!l.editable&&l.selected&&(G=G+3);const O={fill:n,stroke:new Vr({color:b,width:G/7}),radius:G};let V=null;if(l.featureStyle.symbolId){const j={...O,src:w_e+"/"+l.featureStyle.symbolId+"?scale="+G,scale:1,rotation:l.featureStyle.angle};V=new rc(j)}else{const j=l.featureStyle.shape;j==="circle"?V=new uu(O):j==="square"?(Object.assign(O,{points:4,angle:Math.PI/4,rotation:l.featureStyle.angle}),V=new uh(O)):j==="triangle"?(Object.assign(O,{points:3,angle:0,rotation:l.featureStyle.angle}),V=new uh(O)):j==="star"?(Object.assign(O,{points:5,angle:Math.PI/4,rotation:l.featureStyle.angle,radius2:G}),V=new uh(O)):j==="cross"&&(Object.assign(O,{points:4,angle:0,rotation:l.featureStyle.angle,radius2:0}),V=new uh(O))}return l.featureType==="drawnLabel"?[new Qn({text:new g1({text:l.label,textAlign:"left",font:"normal "+G+"px Sans-serif",rotation:l.featureStyle.angle,fill:new bs({color:b}),stroke:new Vr({color:[255,255,255],width:2})})})]:(V&&t.push(new Qn({image:V,fill:n,stroke:L,zIndex:h})),t)}}}class iI{constructor(e){_a(this,"encodeOptions");this.encodeOptions={dataProjection:Dp,featureProjection:e.getView().getProjection()}}download(e,t,i="txt",n="text/plain"){const s=`${h9(e)}.${h9(i)}`;lre(s,t,n)}exploseFeatures(e){const t=[];return(Array.isArray(e)?e:[e]).forEach(i=>{var n;switch((n=i.getGeometry())==null?void 0:n.getType()){case"GeometryCollection":{i.getGeometry().getGeometriesArray().forEach(r=>t.push(this.cloneFeatureWithGeom(i,r)));break}case"MultiLineString":{i.getGeometry().getLineStrings().forEach(r=>t.push(this.cloneFeatureWithGeom(i,r)));break}case"Circle":{const s=new Xh(i);t.push(WP(s));break}default:t.push(i);break}}),t}cloneFeatureWithGeom(e,t){const i=e.clone();return i.setGeometry(t),i}}class C_e extends c5{constructor(){super(),this.xmlSerializer_=Sie()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const i=Ku(e);return this.readFeatureFromDocument(i,t)}return Yu(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const i=this.readFeaturesFromDocument(e,t);return i.length>0?i[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const i=Ku(e);return this.readFeaturesFromDocument(i,t)}return Yu(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const i=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&Vi(i,this.readFeaturesFromNode(n,t));return i}readFeaturesFromNode(e,t){return Aa()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const i=Ku(e);return this.readGeometryFromDocument(i,t)}return Yu(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=Ku(e);return this.readProjectionFromDocument(t)}return Yu(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const i=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const i=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const i=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(e,t){return null}}const FP=C_e,Wn=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],A_e="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",S_e={rte:NP,trk:DP,wpt:VP},T_e=pt(Wn,{rte:Mo(NP),trk:Mo(DP),wpt:Mo(VP)}),E_e=pt(Wn,{text:Ve(Yt,"linkText"),type:Ve(Yt,"linkType")}),M_e=pt(Wn,{name:Ve(Yt),email:ame,link:W1}),L_e=pt(Wn,{name:Ve(Yt),desc:Ve(Yt),author:Ve($_e),copyright:Ve(eme),link:W1,time:Ve(Jw),keywords:Ve(Yt),bounds:tme,extensions:nI}),R_e=pt(Wn,{year:Ve(el),license:Ve(Yt)}),k_e=pt(Wn,{rte:Mt(sme),trk:Mt(ome),wpt:Mt(ume)});let W_e=class extends FP{constructor(e){super(),e=e||{},this.dataProjection=Li("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,i=e.length;t<i;++t){const n=e[t];if(this.readExtensions_){const s=n.get("extensionsNode_")||null;this.readExtensions_(n,s)}n.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(Ku(e)):Yu(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const i=this.readMetadataFromNode(t);if(i)return i}return null}readMetadataFromNode(e){if(!Wn.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(Wn.includes(t.namespaceURI)&&t.localName==="metadata")return ma({},L_e,t,[]);return null}readFeatureFromNode(e,t){if(!Wn.includes(e.namespaceURI))return null;const i=S_e[e.localName];if(!i)return null;const n=i(e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_([n]),n):null}readFeaturesFromNode(e,t){if(!Wn.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const i=ma([],T_e,e,[this.getReadOptions(e,t)]);return i?(this.handleReadExtensions_(i),i):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=md("http://www.topografix.com/GPX/1/1","gpx"),n="http://www.w3.org/2000/xmlns/";return i.setAttributeNS(n,"xmlns:xsi",px),i.setAttributeNS(px,"xsi:schemaLocation",A_e),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),xn({node:i},k_e,Q_e,e,[t]),i}};const G_e=pt(Wn,{name:Ve(Yt),cmt:Ve(Yt),desc:Ve(Yt),src:Ve(Yt),link:W1,number:Ve(el),extensions:nI,type:Ve(Yt),rtept:ime}),O_e=pt(Wn,{ele:Ve(Fi),time:Ve(Jw)}),P_e=pt(Wn,{name:Ve(Yt),cmt:Ve(Yt),desc:Ve(Yt),src:Ve(Yt),link:W1,number:Ve(el),type:Ve(Yt),extensions:nI,trkseg:rme}),B_e=pt(Wn,{trkpt:nme}),F_e=pt(Wn,{ele:Ve(Fi),time:Ve(Jw)}),N_e=pt(Wn,{ele:Ve(Fi),time:Ve(Jw),magvar:Ve(Fi),geoidheight:Ve(Fi),name:Ve(Yt),cmt:Ve(Yt),desc:Ve(Yt),src:Ve(Yt),link:W1,sym:Ve(Yt),type:Ve(Yt),fix:Ve(Yt),sat:Ve(el),hdop:Ve(Fi),vdop:Ve(Fi),pdop:Ve(Fi),ageofdgpsdata:Ve(Fi),dgpsid:Ve(el),extensions:nI}),D_e=["text","type"],V_e=pt(Wn,{text:Mt(Zi),type:Mt(Zi)}),Z_e=pt(Wn,["name","cmt","desc","src","link","number","type","rtept"]),z_e=pt(Wn,{name:Mt(Zi),cmt:Mt(Zi),desc:Mt(Zi),src:Mt(Zi),link:Mt(g5),number:Mt(fx),type:Mt(Zi),rtept:qG(Mt(p5))}),U_e=pt(Wn,["ele","time"]),X_e=pt(Wn,["name","cmt","desc","src","link","number","type","trkseg"]),H_e=pt(Wn,{name:Mt(Zi),cmt:Mt(Zi),desc:Mt(Zi),src:Mt(Zi),link:Mt(g5),number:Mt(fx),type:Mt(Zi),trkseg:qG(Mt(lme))}),Y_e=hu("trkpt"),K_e=pt(Wn,{trkpt:Mt(p5)}),q_e=pt(Wn,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),j_e=pt(Wn,{ele:Mt(Io),time:Mt(Wie),magvar:Mt(Io),geoidheight:Mt(Io),name:Mt(Zi),cmt:Mt(Zi),desc:Mt(Zi),src:Mt(Zi),link:Mt(g5),sym:Mt(Zi),type:Mt(Zi),fix:Mt(Zi),sat:Mt(fx),hdop:Mt(Io),vdop:Mt(Io),pdop:Mt(Io),ageofdgpsdata:Mt(Io),dgpsid:Mt(fx)}),J_e={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Q_e(a,e,t){const i=a.getGeometry();if(i){const n=J_e[i.getType()];if(n){const s=e[e.length-1].node;return md(s.namespaceURI,n)}}}function _5(a,e,t,i){return a.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in i?(a.push(i.ele),delete i.ele,e.hasZ=!0):a.push(0),"time"in i?(a.push(i.time),delete i.time,e.hasM=!0):a.push(0),a}function m5(a,e,t){let i="XY",n=2;if(a.hasZ&&a.hasM?(i="XYZM",n=4):a.hasZ?(i="XYZ",n=3):a.hasM&&(i="XYM",n=3),n!==4){for(let s=0,r=e.length/4;s<r;s++)e[s*n]=e[s*4],e[s*n+1]=e[s*4+1],a.hasZ&&(e[s*n+2]=e[s*4+2]),a.hasM&&(e[s*n+2]=e[s*4+3]);if(e.length=e.length/4*n,t)for(let s=0,r=t.length;s<r;s++)t[s]=t[s]/4*n}return i}function $_e(a,e){const t=ma({},M_e,a,e);if(t)return t}function eme(a,e){const t=ma({},R_e,a,e);if(t){const i=a.getAttribute("author");return i!==null&&(t.author=i),t}}function tme(a,e){const t=e[e.length-1],i=a.getAttribute("minlat"),n=a.getAttribute("minlon"),s=a.getAttribute("maxlat"),r=a.getAttribute("maxlon");n!==null&&i!==null&&r!==null&&s!==null&&(t.bounds=[[parseFloat(n),parseFloat(i)],[parseFloat(r),parseFloat(s)]])}function ame(a,e){const t=e[e.length-1],i=a.getAttribute("id"),n=a.getAttribute("domain");i!==null&&n!==null&&(t.email=`${i}@${n}`)}function W1(a,e){const t=e[e.length-1],i=a.getAttribute("href");i!==null&&(t.link=i),Zh(E_e,a,e)}function nI(a,e){const t=e[e.length-1];t.extensionsNode_=a}function ime(a,e){const t=ma({},O_e,a,e);if(t){const i=e[e.length-1],n=i.flatCoordinates,s=i.layoutOptions;_5(n,s,a,t)}}function nme(a,e){const t=ma({},F_e,a,e);if(t){const i=e[e.length-1],n=i.flatCoordinates,s=i.layoutOptions;_5(n,s,a,t)}}function rme(a,e){const t=e[e.length-1];Zh(B_e,a,e);const i=t.flatCoordinates;t.ends.push(i.length)}function NP(a,e){const t=e[0],i=ma({flatCoordinates:[],layoutOptions:{}},G_e,a,e);if(!i)return;const n=i.flatCoordinates;delete i.flatCoordinates;const s=i.layoutOptions;delete i.layoutOptions;const r=m5(s,n),l=new is(n,r);Ml(l,!1,t);const c=new Jn(l);return c.setProperties(i,!0),c}function DP(a,e){const t=e[0],i=ma({flatCoordinates:[],ends:[],layoutOptions:{}},P_e,a,e);if(!i)return;const n=i.flatCoordinates;delete i.flatCoordinates;const s=i.ends;delete i.ends;const r=i.layoutOptions;delete i.layoutOptions;const l=m5(r,n,s),c=new zh(n,l,s);Ml(c,!1,t);const h=new Jn(c);return h.setProperties(i,!0),h}function VP(a,e){const t=e[0],i=ma({},N_e,a,e);if(!i)return;const n={},s=_5([],n,a,i),r=m5(n,s),l=new Zr(s,r);Ml(l,!1,t);const c=new Jn(l);return c.setProperties(i,!0),c}function g5(a,e,t){a.setAttribute("href",e);const n=t[t.length-1].properties,s=[n.linkText,n.linkType];xn({node:a},V_e,Fs,s,t,D_e)}function p5(a,e,t){const i=t[t.length-1],s=i.node.namespaceURI,r=i.properties;switch(a.setAttributeNS(null,"lat",String(e[1])),a.setAttributeNS(null,"lon",String(e[0])),i.geometryLayout){case"XYZM":e[3]!==0&&(r.time=e[3]);case"XYZ":e[2]!==0&&(r.ele=e[2]);break;case"XYM":e[2]!==0&&(r.time=e[2]);break}const c=a.nodeName=="rtept"?U_e[s]:q_e[s],h=Go(r,c);xn({node:a,properties:r},j_e,Fs,h,t,c)}function sme(a,e,t){const i=t[0],n=e.getProperties(),s={node:a};s.properties=n;const r=e.getGeometry();if(r.getType()=="LineString"){const g=Ml(r,!0,i);s.geometryLayout=g.getLayout(),n.rtept=g.getCoordinates()}const l=t[t.length-1].node,c=Z_e[l.namespaceURI],h=Go(n,c);xn(s,z_e,Fs,h,t,c)}function ome(a,e,t){const i=t[0],n=e.getProperties(),s={node:a};s.properties=n;const r=e.getGeometry();if(r.getType()=="MultiLineString"){const g=Ml(r,!0,i);n.trkseg=g.getLineStrings()}const l=t[t.length-1].node,c=X_e[l.namespaceURI],h=Go(n,c);xn(s,H_e,Fs,h,t,c)}function lme(a,e,t){const i={node:a};i.geometryLayout=e.getLayout(),i.properties={},xn(i,K_e,Y_e,e.getCoordinates(),t)}function ume(a,e,t){const i=t[0],n=t[t.length-1];n.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const r=Ml(s,!0,i);n.geometryLayout=r.getLayout(),p5(a,r.getCoordinates(),t)}}const cme=W_e;class dme extends cme{writeFeaturesNode(e,t){const i=super.writeFeaturesNode(e,t);if("metadata"in t&&"name"in t.metadata){const n="http://www.topografix.com/GPX/1/1",s=md(n,"metadata"),r=md(n,"name");Zi(r,t.metadata.name),s.appendChild(r),i.childNodes.length>0?i.insertBefore(s,i.childNodes[0]):i.appendChild(s)}return i}}class hme extends iI{export(e,t,i=!1){const n=this.prepareFeatures(e,i),s=this.generateContent(n,t);this.download(t,s,"gpx","application/gpx")}prepareFeatures(e,t=!1){e.forEach(n=>{const s=n.getProperties();"feature_name"in s&&n.set("name",s.feature_name,!0)});let i=this.exploseFeatures(e);return t?i=this.changeLineToMultiline(i):i=this.changeMultilineToLine(i),i=this.changePolygonToLine(i),i}generateContent(e,t){return new dme().writeFeatures(this.orderFeaturesForGpx(e),{...this.encodeOptions,metadata:{name:t}})}changePolygonToLine(e){return e.map(t=>{var n;const i=t.getGeometry();if((i==null?void 0:i.getType())==="Polygon"){const r=((n=t.getGeometry().getLinearRing(0))==null?void 0:n.getCoordinates())||[],l=new is(r);return this.cloneFeatureWithGeom(t,l)}return t})}changeMultilineToLine(e){return e.reduce((t,i)=>{const n=i.getGeometry();return(n==null?void 0:n.getType())==="MultiLineString"?n.getLineStrings().forEach(r=>t.push(this.cloneFeatureWithGeom(i,r))):t.push(i),t},[])}changeLineToMultiline(e){return e.map(t=>{const i=t.getGeometry();return(i==null?void 0:i.getType())==="LineString"?this.cloneFeatureWithGeom(t,new zh([i.getCoordinates()])):t})}orderFeaturesForGpx(e){const t=[],i=[],n=[];return e.forEach(s=>{var l;switch((l=s.getGeometry())==null?void 0:l.getType()){case"Point":t.push(s);break;case"LineString":i.push(s);break;default:n.push(s);break}}),[...t,...i,...n]}}const Ad=["http://www.google.com/kml/ext/2.2"],pa=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],_me="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",q9={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},mme=pt(pa,{ExtendedData:aB,Region:iB,MultiGeometry:Ve($P,"geometry"),LineString:Ve(JP,"geometry"),LinearRing:Ve(QP,"geometry"),Point:Ve(eB,"geometry"),Polygon:Ve(tB,"geometry"),Style:Ve(b5),StyleMap:Jme,address:Ve(Yt),description:Ve(Yt),name:Ve(Yt),open:Ve(kh),phoneNumber:Ve(Yt),styleUrl:Ve(HP),visibility:Ve(kh)},pt(Ad,{MultiTrack:Ve(Fme,"geometry"),Track:Ve(jP,"geometry")})),gme=pt(pa,{ExtendedData:aB,Region:iB,Link:uge,address:Ve(Yt),description:Ve(Yt),name:Ve(Yt),open:Ve(kh),phoneNumber:Ve(Yt),visibility:Ve(kh)}),pme=pt(pa,{href:Ve(XP)}),fme=pt(pa,{Altitude:Ve(Fi),Longitude:Ve(Fi),Latitude:Ve(Fi),Tilt:Ve(Fi),AltitudeMode:Ve(Yt),Heading:Ve(Fi),Roll:Ve(Fi)}),ZP=pt(pa,{LatLonAltBox:age,Lod:nge}),yme=pt(pa,["Document","Placemark"]),bme=pt(pa,{Document:Mt(fge),Placemark:Mt(sB)});let Tp,f2=null,S4,m0,g0,p0,Kx,T4=null,f5,E4=null,M4,Q_=null,j9=null,L4=null;function qx(a){return 32/Math.min(a[0],a[1])}function vme(){Tp=[255,255,255,1],f2=new bs({color:Tp}),S4=[20,2],m0="pixels",g0="pixels",p0=[64,64],Kx="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",T4=new rc({anchor:S4,anchorOrigin:"bottom-left",anchorXUnits:m0,anchorYUnits:g0,crossOrigin:"anonymous",rotation:0,scale:qx(p0),size:p0,src:Kx}),f5="NO_IMAGE",E4=new Vr({color:Tp,width:1}),M4=new Vr({color:[51,51,51,1],width:2}),Q_=new g1({font:"bold 16px Helvetica",fill:f2,stroke:M4,scale:.8}),j9=new Qn({fill:f2,image:T4,text:Q_,stroke:E4,zIndex:0}),L4=[j9]}let Gv;function xme(a){return a}class wme extends FP{constructor(e){super(),e=e||{},L4||vme(),this.dataProjection=Li("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:L4,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:xme,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const i=pt(pa,{Document:i9(this.readDocumentOrFolder_,this),Folder:i9(this.readDocumentOrFolder_,this),Placemark:Mo(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),n=ma([],i,e,t,this);if(n)return n}readPlacemark_(e,t){const i=ma({geometry:null},mme,e,t,this);if(!i)return;const n=new Jn,s=e.getAttribute("id");s!==null&&n.setId(s);const r=t[0],l=i.geometry;if(l&&Ml(l,!1,r),n.setGeometry(l),delete i.geometry,this.extractStyles_){const c=i.Style,h=i.styleUrl,g=Cme(c,h,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(g)}return delete i.Style,n.setProperties(i,!0),n}readSharedStyle_(e,t){const i=e.getAttribute("id");if(i!==null){const n=b5.call(this,e,t);if(n){let s,r=e.baseURI;(!r||r=="about:blank")&&(r=window.location.href),r?s=new URL("#"+i,r).href:s="#"+i,this.sharedStyles_[s]=n}}}readSharedStyleMap_(e,t){const i=e.getAttribute("id");if(i===null)return;const n=KP.call(this,e,t);if(!n)return;let s,r=e.baseURI;(!r||r=="about:blank")&&(r=window.location.href),r?s=new URL("#"+i,r).href:s="#"+i,this.sharedStyles_[s]=n}readFeatureFromNode(e,t){if(!pa.includes(e.namespaceURI))return null;const i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i||null}readFeaturesFromNode(e,t){if(!pa.includes(e.namespaceURI))return[];let i;const n=e.localName;if(n=="Document"||n=="Folder")return i=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),i||[];if(n=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(n=="kml"){i=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const r=this.readFeaturesFromNode(s,t);r&&Vi(i,r)}return i}return[]}readName(e){if(e){if(typeof e=="string"){const t=Ku(e);return this.readNameFromDocument(t)}return Yu(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const i=this.readNameFromNode(t);if(i)return i}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(pa.includes(t.namespaceURI)&&t.localName=="name")return Yt(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const i=t.localName;if(pa.includes(t.namespaceURI)&&(i=="Document"||i=="Folder"||i=="Placemark"||i=="kml")){const n=this.readNameFromNode(t);if(n)return n}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const i=Ku(e);Vi(t,this.readNetworkLinksFromDocument(i))}else Yu(e)?Vi(t,this.readNetworkLinksFromDocument(e)):Vi(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Vi(t,this.readNetworkLinksFromNode(i));return t}readNetworkLinksFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(pa.includes(i.namespaceURI)&&i.localName=="NetworkLink"){const n=ma({},gme,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;pa.includes(i.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Vi(t,this.readNetworkLinksFromNode(i))}return t}readRegion(e){const t=[];if(typeof e=="string"){const i=Ku(e);Vi(t,this.readRegionFromDocument(i))}else Yu(e)?Vi(t,this.readRegionFromDocument(e)):Vi(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Vi(t,this.readRegionFromNode(i));return t}readRegionFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(pa.includes(i.namespaceURI)&&i.localName=="Region"){const n=ma({},ZP,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;pa.includes(i.namespaceURI)&&(n=="Document"||n=="Folder"||n=="kml")&&Vi(t,this.readRegionFromNode(i))}return t}readCamera(e){const t=[];if(typeof e=="string"){const i=Ku(e);Vi(t,this.readCameraFromDocument(i))}else Yu(e)?Vi(t,this.readCameraFromDocument(e)):Vi(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let i=e.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&Vi(t,this.readCameraFromNode(i));return t}readCameraFromNode(e){const t=[];for(let i=e.firstElementChild;i;i=i.nextElementSibling)if(pa.includes(i.namespaceURI)&&i.localName==="Camera"){const n=ma({},fme,i,[]);t.push(n)}for(let i=e.firstElementChild;i;i=i.nextElementSibling){const n=i.localName;pa.includes(i.namespaceURI)&&(n==="Document"||n==="Folder"||n==="Placemark"||n==="kml")&&Vi(t,this.readCameraFromNode(i))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const i=md(pa[4],"kml"),n="http://www.w3.org/2000/xmlns/";i.setAttributeNS(n,"xmlns:gx",Ad[0]),i.setAttributeNS(n,"xmlns:xsi",px),i.setAttributeNS(px,"xsi:schemaLocation",_me);const s={node:i},r={};e.length>1?r.Document=e:e.length==1&&(r.Placemark=e[0]);const l=yme[i.namespaceURI],c=Go(r,l);return xn(s,bme,Fs,c,[t],l,this),i}}function Ime(a,e){const t=[0,0];let i="start";const n=a.getImage();if(n){const l=n.getSize();if(l&&l.length==2){const c=n.getScaleArray(),h=n.getAnchor();t[0]=c[0]*(l[0]-h[0]),t[1]=c[1]*(l[1]/2-h[1]),i="left"}}let s=a.getText();return s?(s=s.clone(),s.setFont(s.getFont()||Q_.getFont()),s.setScale(s.getScale()||Q_.getScale()),s.setFill(s.getFill()||Q_.getFill()),s.setStroke(s.getStroke()||M4)):s=Q_.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(i),new Qn({image:n,text:s})}function Cme(a,e,t,i,n){return function(s,r){let l=n,c="",h=[];if(l){const b=s.getGeometry();if(b)if(b instanceof ld)h=b.getGeometriesArrayRecursive().filter(function(v){const C=v.getType();return C==="Point"||C==="MultiPoint"}),l=h.length>0;else{const v=b.getType();l=v==="Point"||v==="MultiPoint"}}l&&(c=s.get("name"),l=l&&!!c,l&&/&[^&]+;/.test(c)&&(Gv||(Gv=document.createElement("textarea")),Gv.innerHTML=c,c=Gv.value));let g=t;if(a?g=a:e&&(g=zP(e,t,i)),l){const b=Ime(g[0],c);if(h.length>0){b.setGeometry(new ld(h));const v=new Qn({geometry:g[0].getGeometry(),image:null,fill:g[0].getFill(),stroke:g[0].getStroke(),text:null});return[b,v].concat(g.slice(1))}return b}return g}}function zP(a,e,t){return Array.isArray(a)?a:typeof a=="string"?zP(t[a],e,t):e}function rI(a){const e=du(a,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const i=t[1];return[parseInt(i.substr(6,2),16),parseInt(i.substr(4,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(0,2),16)/255]}}function UP(a){let e=du(a,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let n;for(;n=i.exec(e);){const s=parseFloat(n[1]),r=parseFloat(n[2]),l=n[3]?parseFloat(n[3]):0;t.push(s,r,l),e=e.substr(n[0].length)}if(e==="")return t}function XP(a){const e=du(a,!1).trim();let t=a.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function HP(a){const e=du(a,!1).trim().replace(/^(?!.*#)/,"#");let t=a.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function Ame(a){const e=a.getAttribute("xunits"),t=a.getAttribute("yunits");let i;return e!=="insetPixels"?t!=="insetPixels"?i="bottom-left":i="top-left":t!=="insetPixels"?i="bottom-right":i="top-right",{x:parseFloat(a.getAttribute("x")),xunits:q9[e],y:parseFloat(a.getAttribute("y")),yunits:q9[t],origin:i}}function YP(a){return Fi(a)}const Sme=pt(pa,{Pair:jme});function KP(a,e){return ma(void 0,Sme,a,e,this)}const Tme=pt(pa,{Icon:Ve(Vme),color:Ve(rI),heading:Ve(Fi),hotSpot:Ve(Ame),scale:Ve(YP)});function Eme(a,e){const t=ma({},Tme,a,e);if(!t)return;const i=e[e.length-1],n="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(n).length>0;let r;const l=n.href;l?r=l:s&&(r=Kx);let c,h,g,b="bottom-left";const v=t.hotSpot;v?(c=[v.x,v.y],h=v.xunits,g=v.yunits,b=v.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(r.includes("pushpin")?(c=S4,h=m0,g=g0):r.includes("arrow-reverse")?(c=[54,42],h=m0,g=g0):r.includes("paddle")&&(c=[32,1],h=m0,g=g0));let C;const S=n.x,L=n.y;S!==void 0&&L!==void 0&&(C=[S,L]);let R;const G=n.w,O=n.h;G!==void 0&&O!==void 0&&(R=[G,O]);let V;const B=t.heading;B!==void 0&&(V=tl(B));const z=t.scale,j=t.color;if(s){r==Kx&&(R=p0);const re=new rc({anchor:c,anchorOrigin:b,anchorXUnits:h,anchorYUnits:g,crossOrigin:this.crossOrigin_,offset:C,offsetOrigin:"bottom-left",rotation:V,scale:z,size:R,src:this.iconUrlFunction_(r),color:j}),ne=re.getScaleArray()[0],te=re.getSize();if(te===null){const le=re.getImageState();if(le===la.IDLE||le===la.LOADING){const ue=function(){const fe=re.getImageState();if(!(fe===la.IDLE||fe===la.LOADING)){const be=re.getSize();if(be&&be.length==2){const Pe=qx(be);re.setScale(ne*Pe)}re.unlistenImageChange(ue)}};re.listenImageChange(ue),le===la.IDLE&&re.load()}}else if(te.length==2){const le=qx(te);re.setScale(ne*le)}i.imageStyle=re}else i.imageStyle=f5}const Mme=pt(pa,{color:Ve(rI),scale:Ve(YP)});function Lme(a,e){const t=ma({},Mme,a,e);if(!t)return;const i=e[e.length-1],n=new g1({fill:new bs({color:"color"in t?t.color:Tp}),scale:t.scale});i.textStyle=n}const Rme=pt(pa,{color:Ve(rI),width:Ve(Fi)});function kme(a,e){const t=ma({},Rme,a,e);if(!t)return;const i=e[e.length-1],n=new Vr({color:"color"in t?t.color:Tp,width:"width"in t?t.width:1});i.strokeStyle=n}const Wme=pt(pa,{color:Ve(rI),fill:Ve(kh),outline:Ve(kh)});function Gme(a,e){const t=ma({},Wme,a,e);if(!t)return;const i=e[e.length-1],n=new bs({color:"color"in t?t.color:Tp});i.fillStyle=n;const s=t.fill;s!==void 0&&(i.fill=s);const r=t.outline;r!==void 0&&(i.outline=r)}const Ome=pt(pa,{coordinates:B3(UP)});function qP(a,e){return ma(null,Ome,a,e)}function Pme(a,e){const i=e[e.length-1].coordinates,n=du(a,!1),r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(r){const l=parseFloat(r[1]),c=parseFloat(r[2]),h=parseFloat(r[3]);i.push([l,c,h])}else i.push([])}const Bme=pt(Ad,{Track:Mo(jP)});function Fme(a,e){const t=ma([],Bme,a,e);if(t)return new zh(t)}const Nme=pt(pa,{when:cge},pt(Ad,{coord:Pme}));function jP(a,e){const t=ma({coordinates:[],whens:[]},Nme,a,e);if(!t)return;const i=[],n=t.coordinates,s=t.whens;for(let r=0,l=Math.min(n.length,s.length);r<l;++r)n[r].length==3&&i.push(n[r][0],n[r][1],n[r][2],s[r]);return new is(i,"XYZM")}const Dme=pt(pa,{href:Ve(XP)},pt(Ad,{x:Ve(Fi),y:Ve(Fi),w:Ve(Fi),h:Ve(Fi)}));function Vme(a,e){const t=ma({},Dme,a,e);return t||null}const Zme=pt(pa,{coordinates:B3(UP)});function y5(a,e){return ma(null,Zme,a,e)}const sI=pt(pa,{extrude:Ve(kh),tessellate:Ve(kh),altitudeMode:Ve(Yt)});function JP(a,e){const t=ma({},sI,a,e),i=y5(a,e);if(i){const n=new is(i,"XYZ");return n.setProperties(t,!0),n}}function QP(a,e){const t=ma({},sI,a,e),i=y5(a,e);if(i){const n=new nc(i,"XYZ",[i.length]);return n.setProperties(t,!0),n}}const zme=pt(pa,{LineString:Mo(JP),LinearRing:Mo(QP),MultiGeometry:Mo($P),Point:Mo(eB),Polygon:Mo(tB)});function $P(a,e){const t=ma([],zme,a,e);if(!t)return null;if(t.length===0)return new ld(t);let i,n=!0;const s=t[0].getType();let r;for(let l=1,c=t.length;l<c;++l)if(r=t[l],r.getType()!=s){n=!1;break}if(n){let l,c;if(s=="Point"){const h=t[0];l=h.getLayout(),c=h.getFlatCoordinates();for(let g=1,b=t.length;g<b;++g)r=t[g],Vi(c,r.getFlatCoordinates());i=new bm(c,l),IA(i,t)}else if(s=="LineString")i=new zh(t),IA(i,t);else if(s=="Polygon")i=new L1(t),IA(i,t);else if(s=="GeometryCollection"||s.startsWith("Multi"))i=new ld(t);else throw new Error("Unknown geometry type found")}else i=new ld(t);return i}function eB(a,e){const t=ma({},sI,a,e),i=y5(a,e);if(i){const n=new Zr(i,"XYZ");return n.setProperties(t,!0),n}}const Ume=pt(pa,{innerBoundaryIs:sge,outerBoundaryIs:lge});function tB(a,e){const t=ma({},sI,a,e),i=ma([null],Ume,a,e);if(i&&i[0]){const n=i[0],s=[n.length];for(let l=1,c=i.length;l<c;++l)Vi(n,i[l]),s.push(n.length);const r=new nc(n,"XYZ",s);return r.setProperties(t,!0),r}}const Xme=pt(pa,{IconStyle:Eme,LabelStyle:Lme,LineStyle:kme,PolyStyle:Gme});function b5(a,e){const t=ma({},Xme,a,e,this);if(!t)return null;let i="fillStyle"in t?t.fillStyle:f2;const n=t.fill;n!==void 0&&!n&&(i=null);let s;"imageStyle"in t?t.imageStyle!=f5&&(s=t.imageStyle):s=T4;const r="textStyle"in t?t.textStyle:Q_,l="strokeStyle"in t?t.strokeStyle:E4,c=t.outline;return c!==void 0&&!c?[new Qn({geometry:function(h){const g=h.getGeometry(),b=g.getType();if(b==="GeometryCollection"){const v=g;return new ld(v.getGeometriesArrayRecursive().filter(function(C){const S=C.getType();return S!=="Polygon"&&S!=="MultiPolygon"}))}if(b!=="Polygon"&&b!=="MultiPolygon")return g},fill:i,image:s,stroke:l,text:r,zIndex:void 0}),new Qn({geometry:function(h){const g=h.getGeometry(),b=g.getType();if(b==="GeometryCollection"){const v=g;return new ld(v.getGeometriesArrayRecursive().filter(function(C){const S=C.getType();return S==="Polygon"||S==="MultiPolygon"}))}if(b==="Polygon"||b==="MultiPolygon")return g},fill:i,stroke:null,zIndex:void 0})]:[new Qn({fill:i,image:s,stroke:l,text:r,zIndex:void 0})]}function IA(a,e){const t=e.length,i=new Array(e.length),n=new Array(e.length),s=new Array(e.length);let r,l,c;r=!1,l=!1,c=!1;for(let h=0;h<t;++h){const g=e[h];i[h]=g.get("extrude"),n[h]=g.get("tessellate"),s[h]=g.get("altitudeMode"),r=r||i[h]!==void 0,l=l||n[h]!==void 0,c=c||s[h]}r&&a.set("extrude",i),l&&a.set("tessellate",n),c&&a.set("altitudeMode",s)}const Hme=pt(pa,{displayName:Ve(Yt),value:Ve(Yt)});function Yme(a,e){const t=a.getAttribute("name");Zh(Hme,a,e);const i=e[e.length-1];t&&i.displayName?i[t]={value:i.value,displayName:i.displayName,toString:function(){return i.value}}:t!==null?i[t]=i.value:i.displayName!==null&&(i[i.displayName]=i.value),delete i.value}const Kme=pt(pa,{Data:Yme,SchemaData:$me});function aB(a,e){Zh(Kme,a,e)}function iB(a,e){Zh(ZP,a,e)}const qme=pt(pa,{Style:Ve(b5),key:Ve(Yt),styleUrl:Ve(HP)});function jme(a,e){const t=ma({},qme,a,e,this);if(!t)return;const i=t.key;if(i&&i=="normal"){const n=t.styleUrl;n&&(e[e.length-1]=n);const s=t.Style;s&&(e[e.length-1]=s)}}function Jme(a,e){const t=KP.call(this,a,e);if(!t)return;const i=e[e.length-1];if(Array.isArray(t))i.Style=t;else if(typeof t=="string")i.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const Qme=pt(pa,{SimpleData:ege});function $me(a,e){Zh(Qme,a,e)}function ege(a,e){const t=a.getAttribute("name");if(t!==null){const i=Yt(a),n=e[e.length-1];n[t]=i}}const tge=pt(pa,{altitudeMode:Ve(Yt),minAltitude:Ve(Fi),maxAltitude:Ve(Fi),north:Ve(Fi),south:Ve(Fi),east:Ve(Fi),west:Ve(Fi)});function age(a,e){const t=ma({},tge,a,e);if(!t)return;const i=e[e.length-1],n=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];i.extent=n,i.altitudeMode=t.altitudeMode,i.minAltitude=parseFloat(t.minAltitude),i.maxAltitude=parseFloat(t.maxAltitude)}const ige=pt(pa,{minLodPixels:Ve(Fi),maxLodPixels:Ve(Fi),minFadeExtent:Ve(Fi),maxFadeExtent:Ve(Fi)});function nge(a,e){const t=ma({},ige,a,e);if(!t)return;const i=e[e.length-1];i.minLodPixels=parseFloat(t.minLodPixels),i.maxLodPixels=parseFloat(t.maxLodPixels),i.minFadeExtent=parseFloat(t.minFadeExtent),i.maxFadeExtent=parseFloat(t.maxFadeExtent)}const rge=pt(pa,{LinearRing:Mo(qP)});function sge(a,e){const t=ma([],rge,a,e);t.length>0&&e[e.length-1].push(...t)}const oge=pt(pa,{LinearRing:B3(qP)});function lge(a,e){const t=ma(void 0,oge,a,e);if(t){const i=e[e.length-1];i[0]=t}}function uge(a,e){Zh(pme,a,e)}function cge(a,e){const i=e[e.length-1].whens,n=du(a,!1),s=Date.parse(n);i.push(isNaN(s)?0:s)}function oI(a,e){const t=Cl(e),n=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const r=Math.floor(n[s]).toString(16);n[s]=r.length==1?"0"+r:r}Zi(a,n.join(""))}function dge(a,e,t){const i=t[t.length-1],n=i.layout,s=i.stride;let r;if(n=="XY"||n=="XYM")r=2;else if(n=="XYZ"||n=="XYZM")r=3;else throw new Error("Invalid geometry layout");const l=e.length;let c="";if(l>0){c+=e[0];for(let h=1;h<r;++h)c+=","+e[h];for(let h=s;h<l;h+=s){c+=" "+e[h];for(let g=1;g<r;++g)c+=","+e[h+g]}}Zi(a,c)}const y2=pt(pa,{Data:Mt(hge),value:Mt(mge),displayName:Mt(_ge)});function hge(a,e,t){a.setAttribute("name",e.name);const i={node:a},n=e.value;typeof n=="object"?(n!==null&&n.displayName&&xn(i,y2,Fs,[n.displayName],t,["displayName"]),n!==null&&n.value&&xn(i,y2,Fs,[n.value],t,["value"])):xn(i,y2,Fs,[n],t,["value"])}function _ge(a,e){Zi(a,e)}function mge(a,e){Zi(a,e)}const gge=pt(pa,{Placemark:Mt(sB)}),pge=function(a,e,t){const i=e[e.length-1].node;return md(i.namespaceURI,"Placemark")};function fge(a,e,t){xn({node:a},gge,pge,e,t,void 0,this)}const yge=hu("Data");function bge(a,e,t){const i={node:a},n=e.names,s=e.values,r=n.length;for(let l=0;l<r;l++)xn(i,y2,yge,[{name:n[l],value:s[l]}],t)}const J9=pt(pa,["href"],pt(Ad,["x","y","w","h"])),Q9=pt(pa,{href:Mt(Zi)},pt(Ad,{x:Mt(Io),y:Mt(Io),w:Mt(Io),h:Mt(Io)})),vge=function(a,e,t){return md(Ad[0],"gx:"+t)};function xge(a,e,t){const i={node:a},n=t[t.length-1].node;let s=J9[n.namespaceURI],r=Go(e,s);xn(i,Q9,Fs,r,t,s),s=J9[Ad[0]],r=Go(e,s),xn(i,Q9,vge,r,t,s)}const wge=pt(pa,["scale","heading","Icon","color","hotSpot"]),Ige=pt(pa,{Icon:Mt(xge),color:Mt(oI),heading:Mt(Io),hotSpot:Mt(jge),scale:Mt(lB)});function Cge(a,e,t){const i={node:a},n={},s=e.getSrc(),r=e.getSize(),l=e.getImageSize(),c={href:s};if(r){c.w=r[0],c.h=r[1];const R=e.getAnchor(),G=e.getOrigin();if(G&&l&&G[0]!==0&&G[1]!==r[1]&&(c.x=G[0],c.y=l[1]-(G[1]+r[1])),R&&(R[0]!==r[0]/2||R[1]!==r[1]/2)){const O={x:R[0],xunits:"pixels",y:r[1]-R[1],yunits:"pixels"};n.hotSpot=O}}n.Icon=c;let h=e.getScaleArray()[0],g=r;if(g===null&&(g=p0),g.length==2){const R=qx(g);h=h/R}h!==1&&(n.scale=h);const b=e.getRotation();b!==0&&(n.heading=b);const v=e.getColor();v&&(n.color=v);const C=t[t.length-1].node,S=wge[C.namespaceURI],L=Go(n,S);xn(i,Ige,Fs,L,t,S)}const Age=pt(pa,["color","scale"]),Sge=pt(pa,{color:Mt(oI),scale:Mt(lB)});function Tge(a,e,t){const i={node:a},n={},s=e.getFill();s&&(n.color=s.getColor());const r=e.getScale();r&&r!==1&&(n.scale=r);const l=t[t.length-1].node,c=Age[l.namespaceURI],h=Go(n,c);xn(i,Sge,Fs,h,t,c)}const Ege=pt(pa,["color","width"]),Mge=pt(pa,{color:Mt(oI),width:Mt(Io)});function Lge(a,e,t){const i={node:a},n={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,r=Ege[s.namespaceURI],l=Go(n,r);xn(i,Mge,Fs,l,t,r)}const Rge={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},nB=function(a,e,t){if(a){const i=e[e.length-1].node;return md(i.namespaceURI,Rge[a.getType()])}},kge=hu("Point"),Wge=hu("LineString"),Gge=hu("LinearRing"),Oge=hu("Polygon"),Pge=pt(pa,{LineString:Mt(Ep),Point:Mt(Ep),Polygon:Mt(oB),GeometryCollection:Mt(rB)});function rB(a,e,t){const i={node:a},n=e.getType();let s=[],r;if(n==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(l){const c=l.getType();if(c==="MultiPoint")s=s.concat(l.getPoints());else if(c==="MultiLineString")s=s.concat(l.getLineStrings());else if(c==="MultiPolygon")s=s.concat(l.getPolygons());else if(c==="Point"||c==="LineString"||c==="Polygon")s.push(l);else throw new Error("Unknown geometry type")}),r=nB;else if(n==="MultiPoint")s=e.getPoints(),r=kge;else if(n==="MultiLineString")s=e.getLineStrings(),r=Wge;else if(n==="MultiPolygon")s=e.getPolygons(),r=Oge;else throw new Error("Unknown geometry type");xn(i,Pge,r,s,t)}const Bge=pt(pa,{LinearRing:Mt(Ep)});function $9(a,e,t){xn({node:a},Bge,Gge,[e],t)}const CA=pt(pa,{ExtendedData:Mt(bge),MultiGeometry:Mt(rB),LineString:Mt(Ep),LinearRing:Mt(Ep),Point:Mt(Ep),Polygon:Mt(oB),Style:Mt(qge),address:Mt(Zi),description:Mt(Zi),name:Mt(Zi),open:Mt(Up),phoneNumber:Mt(Zi),styleUrl:Mt(Zi),visibility:Mt(Up)}),Fge=pt(pa,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),Nge=hu("ExtendedData");function sB(a,e,t){const i={node:a};e.getId()&&a.setAttribute("id",e.getId());const n=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const r=Object.keys(n||{}).sort().filter(function(C){return!s[C]}),l=e.getStyleFunction();if(l){const C=l(e,0);if(C){const S=Array.isArray(C)?C:[C];let L=S;if(e.getGeometry()&&(L=S.filter(function(R){const G=R.getGeometryFunction()(e);if(G){const O=G.getType();return O==="GeometryCollection"?G.getGeometriesArrayRecursive().filter(function(V){const B=V.getType();return B==="Point"||B==="MultiPoint"}).length:O==="Point"||O==="MultiPoint"}})),this.writeStyles_){let R=S,G=S;e.getGeometry()&&(R=S.filter(function(O){const V=O.getGeometryFunction()(e);if(V){const B=V.getType();return B==="GeometryCollection"?V.getGeometriesArrayRecursive().filter(function(z){const j=z.getType();return j==="LineString"||j==="MultiLineString"}).length:B==="LineString"||B==="MultiLineString"}}),G=S.filter(function(O){const V=O.getGeometryFunction()(e);if(V){const B=V.getType();return B==="GeometryCollection"?V.getGeometriesArrayRecursive().filter(function(z){const j=z.getType();return j==="Polygon"||j==="MultiPolygon"}).length:B==="Polygon"||B==="MultiPolygon"}})),n.Style={pointStyles:L,lineStyles:R,polyStyles:G}}if(L.length&&n.name===void 0){const R=L[0].getText();R&&(n.name=R.getText())}}}const c=t[t.length-1].node,h=Fge[c.namespaceURI],g=Go(n,h);if(xn(i,CA,Fs,g,t,h),r.length>0){const C=Go(n,r);xn(i,CA,Nge,[{names:r,values:C}],t)}const b=t[0];let v=e.getGeometry();v&&(v=Ml(v,!0,b)),xn(i,CA,nB,[v],t)}const Dge=pt(pa,["extrude","tessellate","altitudeMode","coordinates"]),Vge=pt(pa,{extrude:Mt(Up),tessellate:Mt(Up),altitudeMode:Mt(Zi),coordinates:Mt(dge)});function Ep(a,e,t){const i=e.getFlatCoordinates(),n={node:a};n.layout=e.getLayout(),n.stride=e.getStride();const s=e.getProperties();s.coordinates=i;const r=t[t.length-1].node,l=Dge[r.namespaceURI],c=Go(s,l);xn(n,Vge,Fs,c,t,l)}const Zge=pt(pa,["color","fill","outline"]),e8=pt(pa,{outerBoundaryIs:Mt($9),innerBoundaryIs:Mt($9)}),zge=hu("innerBoundaryIs"),Uge=hu("outerBoundaryIs");function oB(a,e,t){const i=e.getLinearRings(),n=i.shift(),s={node:a};xn(s,e8,zge,i,t),xn(s,e8,Uge,[n],t)}const Xge=pt(pa,{color:Mt(oI),fill:Mt(Up),outline:Mt(Up)});function Hge(a,e,t){const i={node:a},n=e.getFill(),s=e.getStroke(),r={color:n?n.getColor():void 0,fill:n?void 0:!1,outline:s?void 0:!1},l=t[t.length-1].node,c=Zge[l.namespaceURI],h=Go(r,c);xn(i,Xge,Fs,h,t,c)}function lB(a,e){Io(a,Math.round(e*1e6)/1e6)}const Yge=pt(pa,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Kge=pt(pa,{IconStyle:Mt(Cge),LabelStyle:Mt(Tge),LineStyle:Mt(Lge),PolyStyle:Mt(Hge)});function qge(a,e,t){const i={node:a},n={};if(e.pointStyles.length){const c=e.pointStyles[0].getText();c&&(n.LabelStyle=c);const h=e.pointStyles[0].getImage();h&&typeof h.getSrc=="function"&&(n.IconStyle=h)}if(e.lineStyles.length){const c=e.lineStyles[0].getStroke();c&&(n.LineStyle=c)}if(e.polyStyles.length){const c=e.polyStyles[0].getStroke();c&&!n.LineStyle&&(n.LineStyle=c),n.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,r=Yge[s.namespaceURI],l=Go(n,r);xn(i,Kge,Fs,l,t,r)}function jge(a,e){a.setAttribute("x",String(e.x)),a.setAttribute("y",String(e.y)),a.setAttribute("xunits",e.xunits),a.setAttribute("yunits",e.yunits)}const Jge=wme;class Qge extends iI{export(e,t){const i=this.generateContent(e);this.download(t,i,"kml","application/vnd.google-earth.kml+xml")}generateContent(e){return new Jge().writeFeatures(this.exploseFeatures(e),this.encodeOptions)}}const $ge="https://migration.geoportail.lu/mymaps/exportgpxkml";class epe extends iI{constructor(e){super(e),this.encodeOptions.dataProjection=cu}async export(e,t){const i=this.generateContent(e),n=$ge,s=new URLSearchParams({format:"shape",name:t,doc:i}),r=await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(!r.ok)throw new Error("Error while requesting shapefile");const l=await r.blob();this.download(t,l,"zip","application/octet-stream")}generateContent(e){return new Lm().writeFeatures(this.exploseFeatures(e),this.encodeOptions)}async fetchFileContent(e,t){return await(await fetch("mymaps/exportgpxkml",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:JSON.stringify({doc:e,format:"shape",name:t})})).blob()}}class tpe extends iI{async export(e,t){const i=await this.generateContent(e);this.download(t,i,"csv","application/csv")}async generateContent(e){const t=await e.getProfile();return t?this.getCsvContent(t):""}getCsvContent(e){const t=`dist,MNT,y,x,lon,lat
`;return e.reduce((i,n)=>i+this.getCsvContentRow(n),t)}getCsvContentRow(e){const t=Pp([e.x,e.y],cu);return`${e.dist},${e.values.dhm},${e.x},${e.y},${t[0]},${t[1]}
`}}class ape{export(e,t,i,n,s=!1){var r;(r=this.getExporter(e,t))==null||r.export(i,n,s)}getExporter(e,t){switch(t){case"gpx":return new hme(e);case"kml":return new Qge(e);case"shapefile":return new epe(e);case"csv":return new tpe(e)}}}const v5=new ape,ipe={"data-cy":"featItemProfile",class:"lux-profile relative"},npe={class:"flex justify-between w-full px-1 gap-3 whitespace-nowrap"},rpe={class:"grow cursor-default","data-cy":"featItemProfileCumul"},spe=["aria-label"],ope={key:0,class:"no-print w-full absolute mt-2 text-center"},lpe={class:"text-gray-700 rounded p-2 bg-[rgba(120,120,120,0.5)]"},upe="mnt",x5=bt({__name:"feature-elevation-profile",props:{feature:{},enableExportCSV:{type:Boolean,default:!0},activatePositioning:{type:Boolean,default:!0}},emits:["close"],setup(a){const e=a,t=Xhe(void 0,()=>e.activatePositioning),i=LP(),{t:n}=ya(),s=Ft(()=>{var G,O,V;return(V=(O=(G=ok())==null?void 0:G.vnode)==null?void 0:O.props)==null?void 0:V.onClose}),r=Wi(void 0),l=Ft(()=>{var G;return((G=r.value)==null?void 0:G.length)||0}),c=Ft(()=>r.value&&r.value[l.value-1]),h=Ft(()=>{var G;return(G=c.value)==null?void 0:G.elevationGain}),g=Ft(()=>{var G;return(G=c.value)==null?void 0:G.elevationLoss}),b=Ft(()=>{var G;return(G=c.value)==null?void 0:G.cumulativeElevation}),v=Ft(()=>e.feature&&!r.value),C=Ft(()=>!e.feature);tr(()=>{e.feature&&e.feature.getProfile().then(G=>r.value=G)}),Ds(()=>{i.setPosition(void 0,void 0)}),er(()=>{var G;e.feature&&!e.feature.profileData?(r.value=void 0,(G=e.feature)==null||G.getProfile().then(O=>r.value=O)):r.value=void 0}),Kt(r,G=>t.profileData.value=G);function S(){var G;e.feature&&v5.export((G=e.feature)==null?void 0:G.map,"csv",e.feature,e.feature.label||upe)}function L(G){var V;const O=Ns([G.x,G.y],cu,(V=e.feature)==null?void 0:V.map.getView().getProjection());i.setPosition(O[0],O[1])}function R(){i.setPosition(void 0,void 0)}return(G,O)=>{const V=Fh("format-measure");return se(),Ie("div",ipe,[q("div",npe,[q("div",rpe,[r.value?(se(),Ie(ua,{key:0},[q("span",null,[O[2]||(O[2]=wr(" Δ+")),Mi(q("span",null,null,512),[[V,h.value,void 0,{elevation:!0}]])]),q("span",null,[O[3]||(O[3]=wr(" Δ")),Mi(q("span",null,null,512),[[V,g.value,void 0,{elevation:!0}]])]),q("span",null,[O[4]||(O[4]=wr(" Δ")),Mi(q("span",null,null,512),[[V,b.value,void 0,{elevation:!0}]])])],64)):je("",!0)]),G.enableExportCSV&&r.value?(se(),Ie("button",{key:0,"data-cy":"featItemProfileCSV",class:"profile-export no-print text-secondary hover:underline",onClick:O[0]||(O[0]=()=>S())},Fe(X(n)("Export csv")),1)):je("",!0),s.value?(se(),Ie("button",{key:1,"aria-label":X(n)("Close"),class:"fa-solid fa-close text-secondary hover:text-tertiary",onClick:O[1]||(O[1]=B=>G.$emit("close"))},null,8,spe)):je("",!0)]),v.value||C.value?(se(),Ie("div",ope,[q("span",lpe,Fe(v.value?X(n)("Please wait, the profile is loading."):C.value?X(n)("Draw a line on the map to display an elevation profile."):""),1)])):je("",!0),dt(rce,{profileData:r.value,class:"w-full",highlightDistance:X(t).highlightDistance.value,"onHover:profile":L,"onOut:profile":R},null,8,["profileData","highlightDistance"])])}}}),cpe={"data-cy":"toolbarMeasure"},dpe={key:0,class:"absolute bottom-full top-auto z-20 flex flex-row justify-start"},hpe={key:1,class:"absolute bottom-full top-auto z-20 flex flex-row justify-start divide-y-0 divide-x divide-gray-400 divide-solid box-content border-y-0 border-x border-gray-400"},_pe=bt({__name:"toolbar-measure",setup(a){const{t:e}=ya(),t=Qe(!1),i=[{label:e("Length"),active:!1,onClick:()=>alert("TODO Length")},{label:e("Surface"),active:!1,onClick:()=>alert("TODO Surface")},{label:e("Azimut"),active:!1,onClick:()=>alert("TODO Azimut")},{label:e("Profile"),active:!1,onClick:()=>t.value=!0},{label:e("Profil Lidar"),active:!1,onClick:()=>alert("TODO Profil Lidar")},{label:e("Reset"),active:!1,onClick:()=>alert("TODO Reset")}];function n(){t.value=!1}return(s,r)=>(se(),Ie("div",cpe,[t.value?(se(),Ie("div",dpe,[dt(x5,{class:"w-[450px]",onClose:n,feature:void 0})])):(se(),Ie("ul",hpe,[(se(),Ie(ua,null,Gn(i,(l,c)=>q("li",{key:c},[dt(Kg,{label:l.label,active:l.active,onClick:l.onClick},null,8,["label","active","onClick"])])),64))]))]))}});class mpe{constructor(e){_a(this,"printExtent");this.setPrintExtent(e||[0,0,1/0,1/0])}getPrintExtent(){return this.printExtent}setPrintExtent(e){this.printExtent=e}layerFilter(e){return!0}geometryFilter(e){return!0}feature(e,t){}line(e,t,i,n){}point(e,t,i,n){}text(e,t,i,n){}wmtsLayer(e,t,i){}wmsLayer(e,t,i){}}const uB={WMTS_PIXEL_SIZE:28e-5,DOTS_PER_INCH:72,METERS_PER_INCH:.0254,CIRCLE_TO_POLYGON_SIDES:64};function AA(a){return a.length===1?`0${a}`:a}function SA(a){const e=a[0],t=a[1],i=a[2];if(e!==(e&255)||t!==(t&255)||i!==(i&255))throw new Error(`"(${e},${t},${i})" is not a valid RGB color`);const n=AA(e.toString(16)),s=AA(t.toString(16)),r=AA(i.toString(16));return`#${n}${s}${r}`}function gpe(a){const e=a.getProjection(),t=a.getTileGrid();console.assert(t instanceof i5);const i=t.getMatrixIds(),n=[],s=e.getMetersPerUnit();console.assert(!!s);for(let r=0;r<i.length;r++){const l=t.getFullTileRange(r),c=t.getResolution(r)*s;n.push({identifier:i[r],scaleDenominator:c/uB.WMTS_PIXEL_SIZE,tileSize:Ps(t.getTileSize(r)),topLeftCorner:t.getOrigin(r),matrixSize:[l.maxX-l.minX+1,l.maxY-l.minY+1]})}return n}const Ov=document.createElement("canvas");function ppe(a,e){const t=Ov.getContext("2d");return Ov.width=a.width,Ov.height=a.height,t.globalAlpha=e,t.drawImage(a,0,0),Ov}function fpe(a){const e=document.createElement("a");return e.href=encodeURI(a),decodeURI(e.href)}function ype(a){const e=a.getUrls();return console.assert(e.length>0),fpe(e[0])}function bpe(a,e,t,i,n,s){e&&a.forEach(r=>{const l=r.getGeometry();if(!l)return;const c=l.clone();c.applyTransform((g,b,v)=>nd(g,0,g.length,v||2,i,b));const h=e(r,t);h&&(Array.isArray(h)?h.forEach(g=>{n.setStyle(g),n.drawGeometry(c)}):(n.setStyle(h),n.drawGeometry(c)),s&&s(n,c))})}function vpe(a,e,t){const i=Wo(),n=iu(a);return nu(i,t[0]/2,t[1]/2,1/e,-1/e,0,-n[0],-n[1]),i}class xpe extends s5{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:wde({extent:n5(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const wpe=xpe,Ipe='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Cpe extends wpe{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[Ipe];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",n=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:n,wrapX:e.wrapX,zDirection:e.zDirection})}}const Ape=Cpe,Spe={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},t8={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class Tpe extends pP{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Wo(),this.tileClipContexts_=null}drawTile(e,t,i,n,s,r,l,c){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,i,n,s,r,l,c)}getTile(e,t,i,n){const s=this.getOrCreateTile(e,t,i,n);if(!s)return null;const l=n.viewState.resolution,c=n.viewHints;return(!(c[Vn.ANIMATING]||c[Vn.INTERACTING])||!s.wantedResolution)&&(s.wantedResolution=l),s}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,i){const n=this.getLayer(),s=n.getRevision(),r=n.getRenderOrder()||null,l=e.wantedResolution,c=e.getReplayState(n);if(!c.dirty&&c.renderedResolution===l&&c.renderedRevision==s&&c.renderedRenderOrder==r)return;const h=n.getSource(),g=!!n.getDeclutter(),b=h.getTileGrid(),C=h.getTileGridForProjection(i).getTileCoordExtent(e.wrappedTileCoord),S=h.getSourceTiles(t,i,e),L=Ga(n);delete e.hitDetectionImageData[L],e.executorGroups[L]=[],c.dirty=!1;for(let R=0,G=S.length;R<G;++R){const O=S[R];if(O.getState()!=Ca.LOADED)continue;const V=O.tileCoord,B=b.getTileCoordExtent(V),z=qu(C,B),j=Eh(z,n.getRenderBuffer()*l,this.tempExtent),re=rm(B,z)?null:j,ne=new wP(0,z,l,t),te=I4(l,t),le=function(Be,Me){let ke;const Je=Be.getStyleFunction()||n.getStyleFunction();if(Je&&(ke=Je(Be,l)),ke){const ut=this.renderFeature(Be,te,ke,ne,g,Me);c.dirty=c.dirty||ut}},ue=O.getFeatures();r&&r!==c.renderedRenderOrder&&ue.sort(r);for(let Be=0,Me=ue.length;Be<Me;++Be){const ke=ue[Be];(!re||xr(re,ke.getGeometry().getExtent()))&&le.call(this,ke,Be)}const fe=ne.finish(),be=n.getRenderMode()!=="vector"&&g&&S.length===1?null:z,Pe=new IP(be,l,t,h.getOverlaps(),fe,n.getRenderBuffer(),!0);e.executorGroups[L].push(Pe)}c.renderedRevision=s,c.renderedRenderOrder=r,c.renderedResolution=l}forEachFeatureAtCoordinate(e,t,i,n,s){var V,B;const r=t.viewState.resolution,l=t.viewState.rotation;i=i??0;const c=this.getLayer(),g=c.getSource().getTileGridForProjection(t.viewState.projection),b=_s([e]);Eh(b,r*i,b);const v={},C=function(z,j,re){let ne=z.getId();ne===void 0&&(ne=Ga(z));const te=v[ne];if(te){if(te!==!0&&re<te.distanceSq){if(re===0)return v[ne]=!0,s.splice(s.lastIndexOf(te),1),n(z,c,j);te.geometry=j,te.distanceSq=re}}else{if(re===0)return v[ne]=!0,n(z,c,j);s.push(v[ne]={feature:z,layer:c,geometry:j,distanceSq:re,callback:n})}},S=this.renderedTiles,L=Ga(c),R=c.getDeclutter(),G=R?(B=(V=t.declutter)==null?void 0:V[R])==null?void 0:B.all().map(z=>z.value):null;let O;e:for(let z=0,j=S.length;z<j;++z){const re=S[z],ne=g.getTileCoordExtent(re.wrappedTileCoord);if(!xr(ne,b))continue;const te=re.executorGroups[L];for(let le=0,ue=te.length;le<ue;++le)if(O=te[le].forEachFeatureAtCoordinate(e,r,l,i,C,G),O)break e}return O}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,i)=>{const n=this.getLayer(),s=n.getSource(),r=this.renderedProjection,l=r.getExtent(),c=this.renderedResolution,h=s.getTileGridForProjection(r),g=br(this.renderedPixelToCoordinateTransform_,e.slice()),b=h.getTileCoordForCoordAndResolution(g,c).toString(),v=this.renderedTiles.find(V=>V.tileCoord.toString()===b&&V.getState()===Ca.LOADED);if(!v||v.loadingSourceTiles>0){t([]);return}s.getWrapX()&&r.canWrapX()&&!zu(l,h.getTileCoordExtent(v.tileCoord))&&bT(g,r);const C=Ga(n),S=h.getTileCoordExtent(v.wrappedTileCoord),L=bd(S),R=[(g[0]-L[0])/c,(L[1]-g[1])/c],G=v.getSourceTiles().reduce((V,B)=>V.concat(B.getFeatures()),[]);let O=v.hitDetectionImageData[C];if(!O){const V=Ps(h.getTileSize(h.getZForResolution(c,s.zDirection))),B=this.renderedRotation_,z=[this.getRenderTransform(h.getTileCoordCenter(v.wrappedTileCoord),c,0,Jo,V[0]*Jo,V[1]*Jo,0)];O=AP(V,z,G,n.getStyleFunction(),h.getTileCoordExtent(v.wrappedTileCoord),v.getReplayState(n).renderedResolution,B),v.hitDetectionImageData[C]=O}t(SP(R,G,O))})}getFeaturesInExtent(e){const t=[],i=this.getTileCache();if(i.getCount()===0)return t;const s=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),r=s.getZForResolution(this.renderedResolution),l={};return i.forEach(c=>{if(c.tileCoord[0]!==r||c.getState()!==Ca.LOADED)return;const h=c.getSourceTiles();for(let g=0,b=h.length;g<b;++g){const v=h[g],C=v.getKey();if(C in l)continue;l[C]=!0;const S=v.tileCoord;if(xr(e,s.getTileCoordExtent(S))){const L=v.getFeatures();if(L)for(let R=0,G=L.length;R<G;++R){const O=L[R],V=O.getGeometry();xr(e,V.getExtent())&&t.push(O)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){var v;const i=this.context,n=i.globalAlpha;i.globalAlpha=t.opacity;const s=e.viewHints,r=!(s[Vn.ANIMATING]||s[Vn.INTERACTING]),l=[this.context.canvas.width,this.context.canvas.height],c=this.getLayer().getDeclutter(),h=c?(v=e.declutter)==null?void 0:v[c]:void 0,g=Ga(this.getLayer()),b=this.renderedTiles;for(let C=0,S=b.length;C<S;++C){const L=b[C],R=L.executorGroups[g];if(R)for(let G=R.length-1;G>=0;--G)R[G].execute(this.context,l,this.getTileRenderTransform(L,e),e.viewState.rotation,r,Xx,h)}i.globalAlpha=n}renderDeferredInternal(e){const t=this.renderedTiles,i=Ga(this.getLayer()),n=t.reduce((c,h,g)=>(h.executorGroups[i].forEach(b=>c.push({executorGroup:b,index:g})),c),[]),s=n.map(({executorGroup:c})=>c.getDeferredZIndexContexts()),r={};for(let c=0,h=n.length;c<h;++c){const g=n[c].executorGroup.getDeferredZIndexContexts();for(const b in g)r[b]=!0}Object.keys(r).map(Number).sort(ju).forEach(c=>{s.forEach((h,g)=>{h[c]&&(h[c].forEach(b=>{const{executorGroup:v,index:C}=n[g],S=v.getRenderedContext(),L=S.globalAlpha;S.globalAlpha=this.renderedOpacity_;const R=this.tileClipContexts_[C];R&&R.draw(S),b.draw(S),R&&S.restore(),S.globalAlpha=L,b.clear()}),h[c].length=0)})})}getTileRenderTransform(e,t){const i=t.pixelRatio,n=t.viewState,s=n.center,r=n.resolution,l=n.rotation,c=t.size,h=Math.round(c[0]*i),g=Math.round(c[1]*i),v=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),C=e.tileCoord,S=v.getTileCoordExtent(e.wrappedTileCoord),L=v.getTileCoordExtent(C,this.tempExtent)[0]-S[0];return TT(n2(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(s,r,l,i,h,g,L))}postRender(e,t){var z;const i=t.viewHints,n=!(i[Vn.ANIMATING]||i[Vn.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const s=this.getLayer(),r=s.getRenderMode(),l=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const c=s.getDeclutter(),h=c?t8[r].filter(j=>!Xx.includes(j)):t8[r],g=t.viewState,b=g.rotation,v=s.getSource(),S=v.getTileGridForProjection(g.projection).getZForResolution(g.resolution,v.zDirection),L=this.renderedTiles,R=[],G=[],O=[],V=Ga(s);let B=!0;for(let j=L.length-1;j>=0;--j){const re=L[j];B=B&&!re.getReplayState(s).dirty;const ne=re.executorGroups[V].filter(Be=>Be.hasExecutors(h));if(ne.length===0)continue;const te=this.getTileRenderTransform(re,t),le=re.tileCoord[0];let ue=!1;const fe=ne[0].getClipCoords(te);let be=e,Pe;if(fe){Pe=new $3,be=Pe.getContext();for(let Be=0,Me=R.length;Be<Me;++Be)if(S!==le&&le<G[Be]){const ke=R[Be];xr([fe[0],fe[3],fe[4],fe[7]],[ke[0],ke[3],ke[4],ke[7]])&&(ue||(be.save(),ue=!0),be.beginPath(),be.moveTo(fe[0],fe[1]),be.lineTo(fe[2],fe[3]),be.lineTo(fe[4],fe[5]),be.lineTo(fe[6],fe[7]),be.moveTo(ke[6],ke[7]),be.lineTo(ke[4],ke[5]),be.lineTo(ke[2],ke[3]),be.lineTo(ke[0],ke[1]),be.clip())}R.push(fe),G.push(le)}for(let Be=0,Me=ne.length;Be<Me;++Be)ne[Be].execute(e,[e.canvas.width,e.canvas.height],te,b,n,h,(z=t.declutter)==null?void 0:z[c]);ue&&(be===e?be.restore():O[j]=Pe)}e.globalAlpha=l,this.ready=B,this.tileClipContexts_=O,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,i,n,s,r){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let c=0,h=i.length;c<h;++c)l=Hx(n,e,i[c],t,this.boundHandleStyleImageChange_,void 0,s,r)||l;else l=Hx(n,e,i,t,this.boundHandleStyleImageChange_,void 0,s,r);return l}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const i=e.getReplayState(t),n=t.getRevision(),s=e.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==n}renderTileImage_(e,t){const i=this.getLayer(),n=e.getReplayState(i),s=i.getRevision(),r=e.executorGroups[Ga(i)];n.renderedTileRevision=s;const l=e.wrappedTileCoord,c=l[0],h=i.getSource();let g=t.pixelRatio;const v=t.viewState.projection,C=h.getTileGridForProjection(v),S=C.getResolution(e.tileCoord[0]),L=t.pixelRatio/e.wantedResolution*S,R=C.getResolution(c),G=e.getContext();g=Math.round(Math.max(g,L/g));const O=h.getTilePixelSize(c,g,v);G.canvas.width=O[0],G.canvas.height=O[1];const V=g/L;if(V!==1){const re=EL(this.tmpTransform_);n2(re,V,V),G.setTransform.apply(G,re)}const B=C.getTileCoordExtent(l,this.tempExtent),z=L/R,j=EL(this.tmpTransform_);n2(j,z,-z),XU(j,-B[0],-B[3]);for(let re=0,ne=r.length;re<ne;++re)r[re].execute(G,[G.canvas.width*V,G.canvas.height*V],j,0,!0,Spe[i.getRenderMode()],null);n.renderedTileResolution=e.wantedResolution}}const Epe=Tpe;class Mpe extends c3{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const i=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=i;const n=e.renderMode||"hybrid";ji(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new Epe(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(ph.PRELOAD)}getUseInterimTilesOnError(){return this.get(ph.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(ph.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(ph.USE_INTERIM_TILES_ON_ERROR,e)}}const Lpe=Mpe;class Rpe extends c5{constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(Pv(e),this.adaptOptions(t))}readFeatureFromText(e,t){return Aa()}readFeatures(e,t){return this.readFeaturesFromText(Pv(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return Aa()}readGeometry(e,t){return this.readGeometryFromText(Pv(e),this.adaptOptions(t))}readGeometryFromText(e,t){return Aa()}readProjection(e){return this.readProjectionFromText(Pv(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return Aa()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return Aa()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return Aa()}}function Pv(a){return typeof a=="string"?a:""}const kpe=Rpe,jc={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"},cB=Object.freeze({LineString:jc.LINE_STRING,Point:jc.POINT,Polygon:jc.POLYGON,MultiLineString:jc.LINE_STRING,MultiPoint:jc.POINT,MultiPolygon:jc.POLYGON});function Wpe(a){return a in cB}const b2="_mfp_style",Gpe=a=>{const e=a.geometry;return e&&e.type==="Point"?0:1},TA=a=>{const e=Array.isArray(a)?a.join(","):a;return`[${b2} = '${e}']`};class dB{constructor(e,t){_a(this,"layerState_");_a(this,"layer_");_a(this,"customizer_");_a(this,"geojsonFormat",new Lm);_a(this,"deepIds_",new Map);_a(this,"lastDeepId_",0);this.layerState_=e,this.layer_=this.layerState_.layer,this.customizer_=t}encodeVectorLayer(e){const t=this.layer_.getSource();if(!t)return null;console.assert(t instanceof Cd);const i=t.getFeaturesInExtent(this.customizer_.getPrintExtent()),n=[],s={version:2};return i.forEach(l=>this.encodeFeature(l,e,n,s)),n.length<=0||Object.keys(s).length<=1?null:(n.sort((l,c)=>{const h=Gpe;return h(c)-h(l)}),{geoJson:{type:"FeatureCollection",features:n},opacity:this.layerState_.opacity,style:s,type:"geojson",name:this.layer_.get("name")})}encodeFeature(e,t,i,n){let s=null;const r=e.getStyleFunction()||this.layer_.getStyleFunction();r&&(s=r(e,t)),e.getGeometry().getType()==="Circle"&&(e=this.featureCircleAsPolygon(e));const l=this.geojsonFormat.writeFeatureObject(e);let c=s!==null&&!Array.isArray(s)?[s]:s;if(!c||(c=c.filter(g=>!!g),c.length===0))return;console.assert(Array.isArray(c));let h=!1;c.forEach(g=>{let b=g.getGeometry(),v;if(typeof b=="function"&&(b=b(e)),b&&typeof b=="object"){const C=e.clone();C.setGeometry(b),v=this.geojsonFormat.writeFeatureObject(C),i.push(v)}else{if(v=l,b=e.getGeometry(),!b||!this.customizer_.geometryFilter(b))return;h||(i.push(v),h=!0)}this.addVectorStyle(n,v,g)})}getDeepStyleUid(e){const t=[e];let i="";for(;t.length;){const s=t.pop();i+="_k"+Ga(s);for(const[r,l]of Object.entries(s))l!=null&&(["number","string","boolean"].includes(typeof l)?i+=`_${r}:${l}`:t.push(l))}if(this.deepIds_.has(i))return this.deepIds_.get(i).toString();const n=++this.lastDeepId_;return this.deepIds_.set(i,n),n.toString()}addVectorStyle(e,t,i){const n=this.getDeepStyleUid(i),s=TA(n);let r;if(s in e)r=!0;else{const l=this.encodeVectorStyle(t,i);r=l&&l.symbolizers.length!==0,r&&(e[s]=l)}if(r){t.properties||(t.properties={}),this.customizer_.feature(this.layerState_,t);const l=t.properties[b2];if(l){const c=[...l.split(","),n];e[TA(c)]={symbolizers:[...e[TA(l)].symbolizers,...e[s].symbolizers]},t.properties[b2]=c.join(",")}else t.properties[b2]=n}}encodeVectorStyle(e,t){const i=e.geometry.type;if(!Wpe(i))return console.warn("Unsupported geometry type: ",i),null;const n=cB[i],s={symbolizers:[]},r=t.getFill(),l=t.getImage(),c=t.getStroke(),h=t.getText();return n===jc.POLYGON?r!==null&&this.encodeVectorStylePolygon(e,s.symbolizers,r,c):n===jc.LINE_STRING?c!==null&&this.encodeVectorStyleLine(e,s.symbolizers,c):n===jc.POINT&&l!==null&&this.encodeVectorStylePoint(e,s.symbolizers,l),h!==null&&this.encodeVectorStyleText(e,s.symbolizers,h),s}encodeVectorStyleFill(e,t,i){let n=i.getColor();n!==null&&(console.assert(typeof n=="string"||Array.isArray(n)),n=Cl(n),console.assert(Array.isArray(n),"only supporting fill colors"),t.fillColor=SA(n),t.fillOpacity=n[3])}encodeVectorStyleLine(e,t,i){const n={type:"line"};this.encodeVectorStyleStroke(e,n,i),this.customizer_.line(this.layerState_,e,n,i),t.push(n)}encodeVectorStylePoint(e,t,i){let n;i instanceof uu?n=this.encodeVectorStylePointStyleCircle(e,i):i instanceof rc&&(n=this.encodeVectorStylePointStyleIcon(e,i)),n&&(this.customizer_.point(this.layerState_,e,n,i),t.push(n))}encodeVectorStylePointStyleCircle(e,t){const i={type:"point"};i.pointRadius=t.getRadius();const n=t.getScale();n&&(Array.isArray(n)?i.pointRadius*=(n[0]+n[1])/2:i.pointRadius*=n);const s=t.getFill();let r=t.getStroke();return s!==null&&(this.encodeVectorStyleFill(e,i,s),r||(r=new Vr({color:s.getColor()}))),r!==null&&this.encodeVectorStyleStroke(e,i,r),i}encodeVectorStylePointStyleIcon(e,t){const i=t.getSrc();if(i===void 0)return;const n={type:"point",externalGraphic:i},s=t.getOpacity();s!==null&&(n.graphicOpacity=s);const r=t.getSize();if(r!==null){let c=t.getScale();Array.isArray(c)&&(c=(c[0]+c[1])/2),isNaN(c)&&(c=1);const h=r[0]*c,g=r[1]*c;n.graphicWidth=g,this.addGraphicOffset_(n,t,h,g)}let l=t.getRotation();return isNaN(l)&&(l=0),n.rotation=sm(l),n}addGraphicOffset_(e,t,i,n){if(this.hasDefaultAnchor_(t))return;const s=t.getAnchor(),r=i/2-s[0],l=n/2-s[1];e.graphicXOffset=r,e.graphicYOffset=l}hasDefaultAnchor_(e){const t=e,i=t.anchor_[0]===.5&&t.anchor_[1]===.5,n=t.anchorOrigin_==="top-left",s=t.anchorXUnits_==="fraction",r=t.anchorYUnits_==="fraction";return i&&n&&s&&r}encodeVectorStylePolygon(e,t,i,n){const s={type:"polygon"};this.encodeVectorStyleFill(e,s,i),n!==null&&this.encodeVectorStyleStroke(e,s,n),t.push(s)}encodeVectorStyleStroke(e,t,i){const n=i.getColor();if(n!==null){console.assert(typeof n=="string"||Array.isArray(n));const h=Cl(n);console.assert(Array.isArray(h),"only supporting stroke colors"),t.strokeColor=SA(h),t.strokeOpacity=h[3]}const s=i.getLineDash();s!==null&&(t.strokeDashstyle=s.join(" "));const r=i.getWidth();r!==void 0&&(t.strokeWidth=r);const l=i.getLineCap();l&&(t.strokeLinecap=l);const c=i.getLineJoin();c&&(t.strokeLinejoin=c)}encodeVectorStyleText(e,t,i){if(i.getText()){const s=zT(i.getFont()||"12px sans-serif"),r={type:"text",label:i.getText(),fontFamily:(s==null?void 0:s.family)??"sans-serif",fontSize:(s==null?void 0:s.size)??"12px",fontStyle:(s==null?void 0:s.style)??"normal",fontWeight:(s==null?void 0:s.weight)??"normal",labelXOffset:i.getOffsetX(),labelYOffset:-i.getOffsetY(),labelAlign:"cm"},l=i.getFill();l!==null&&(this.encodeVectorStyleFill(e,r,l),r.fontColor=r.fillColor);const c=i.getStroke();if(c!==null){const h=c.getColor();if(h){console.assert(typeof h=="string"||Array.isArray(h));const b=Cl(h);console.assert(Array.isArray(b),"only supporting stroke colors"),r.haloColor=SA(b),r.haloOpacity=b[3]}const g=c.getWidth();g!==void 0&&(r.haloRadius=g)}this.customizer_.text(this.layerState_,e,r,i),t.push(r)}}featureCircleAsPolygon(e){return new Jn({...e.getProperties(),geometry:u7(e.getGeometry(),uB.CIRCLE_TO_POLYGON_SIDES)})}}class Ope{constructor(e){_a(this,"url");_a(this,"scratchCanvas",document.createElement("canvas"));this.url=e}async encodeMap(e){const t=e.map.getView(),i=t.getCenter(),n=t.getProjection().getCode(),s=sm(t.getRotation()),r=e.map.getLayerGroup(),l=await this.encodeLayerGroup(r,e.printResolution,e.customizer);return{center:i,dpi:e.dpi,projection:n,rotation:s,scale:e.scale,layers:l}}async encodeLayerGroup(e,t,i){const n=e.getLayerStatesArray().filter(i.layerFilter).sort((r,l)=>(r.zIndex||0)-(l.zIndex||0)).reverse(),s=[];for(const r of n){const l=await this.encodeLayerState(r,t,i);l&&(Array.isArray(l)?s.push(...l):s.push(l))}return s}async encodeLayerState(e,t,i){if(!e.visible||t<e.minResolution||t>=e.maxResolution)return null;const n=e.layer;if(n instanceof _0)return this.encodeImageLayerState(e,i);if(n instanceof El){const s=new dB(e,i).encodeVectorLayer(t),r=e.layer.get("renderAsSvg");return r!==void 0&&(s.renderAsSvg=r),s}return n instanceof sp?this.encodeTileLayerState(e,i):n instanceof Lpe?await this.encodeMVTLayerState(e,t,i):null}encodeImageLayerState(e,t){const i=e.layer;return i instanceof _0||console.assert(i instanceof _0),i.getSource()instanceof zx?this.encodeImageWmsLayerState(e,t):null}encodeImageWmsLayerState(e,t){const n=e.layer.getSource();console.assert(n instanceof zx);const s=n.getUrl();return s!==void 0?this.encodeWmsLayerState(e,s,n.getParams(),t):null}encodeWmsLayerState(e,t,i,n){var l;const s=e.layer,r={...i};return["SERVICE","REQUEST","FORMAT","LAYERS","VERSION","STYLES"].forEach(c=>delete r[c]),{name:s.get("name"),baseURL:t,imageFormat:i.FORMAT,layers:i.LAYERS.split(","),customParams:r,serverType:"mapserver",type:"wms",opacity:s.getOpacity(),version:i.VERSION,useNativeAngle:!0,styles:((l=i.STYLES)==null?void 0:l.split(","))??[""]}}encodeTileLayerState(e,t){const i=e.layer;console.assert(i instanceof sp);const n=i.getSource();return n instanceof s1?this.encodeTileWmtsLayerState(e,t):n instanceof w4?this.encodeTileWmsLayerState(e,t):n instanceof Ape?this.encodeOSMLayerState(e,t):null}encodeTileWmsLayerState(e,t){const i=e.layer;console.assert(i instanceof sp);const n=i.getSource();console.assert(n instanceof w4);const s=n.getUrls();console.assert(!!s);const r=this.encodeWmsLayerState(e,s[0],n.getParams(),t);return t.wmsLayer(e,r,n),r}encodeOSMLayerState(e,t){const i=e.layer;return{type:"osm",baseURL:i.getSource().getUrls()[0],opacity:e.opacity,name:i.get("name")}}encodeTileWmtsLayerState(e,t){const i=e.layer;console.assert(i instanceof sp);const n=i.getSource();console.assert(n instanceof s1);const s=n.getDimensions(),r=Object.keys(s),l={type:"wmts",baseURL:ype(n),dimensions:r,dimensionParams:s,imageFormat:n.getFormat(),name:i.get("name"),layer:n.getLayer(),matrices:gpe(n),matrixSet:n.getMatrixSet(),opacity:e.opacity,requestEncoding:n.getRequestEncoding(),style:n.getStyle(),version:n.getVersion()};return t.wmtsLayer(e,l,n),l}async encodeMVTLayerState(e,t,i){const n=e.layer,{MVTEncoder:s}=await U8(()=>import("./main-5773d873.js"),[]),r=new s,l=i.getPrintExtent(),c=fi(l)/t,h=ur(l)/t,g=[c,h],b={layer:n,printExtent:i.getPrintExtent(),tileResolution:t,styleResolution:t,canvasSize:g};return(await r.encodeMVTLayer(b)).filter(C=>C.baseURL.length>6).map(C=>Object.assign({type:"image",name:n.get("name"),opacity:1,imageFormat:"image/png"},C))}async encodeAsImageLayer(e,t,i,n){const s=e.layer,r=i.getPrintExtent(),l=fi(r)/t,c=ur(r)/t,h=[l,c],g=qhe(this.scratchCanvas.getContext("2d"),{size:h,pixelRatio:1}),b=vpe(r,t,h),v=s.getSource().getFeatures(),C=s.getStyleFunction();return bpe(v,C,t,b,g,n),{type:"image",extent:r,imageFormat:"image/png",opacity:1,name:s.get("name"),baseURL:ppe(this.scratchCanvas,s.getOpacity()).toDataURL("PNG")}}}const R4=39.37,k4=72;class Ppe extends Sm{constructor(e={}){super(e),this.context_=kr(),this.context_.canvas.style.opacity="0.5",this.context_.canvas.style.position="absolute",this.size=void 0,this.rotation=void 0,this.scale=void 0}render(e){const t=this.context_.canvas.width=e.size[0],i=this.context_.canvas.height=e.size[1],n=[t/2,i/2];this.context_.beginPath(),this.context_.moveTo(0,0),this.context_.lineTo(t,0),this.context_.lineTo(t,i),this.context_.lineTo(0,i),this.context_.lineTo(0,0),this.context_.closePath();const s=this.getSize();if(!s)return;const r=s[1],l=s[0],c=this.getScale();if(!c)return;const h=e.viewState.resolution,g=l/k4/R4*c/h/2,b=r/k4/R4*c/h/2,v=this.getRotation()!==void 0?tl(this.getRotation()):0,C=Math.sqrt(Math.pow(g,2)+Math.pow(b,2)),S=Math.atan(b/g)-v,L=Math.atan(g/b)-v,R=n[0]-Math.cos(S)*C,G=n[1]+Math.sin(S)*C,O=n[0]+Math.sin(L)*C,V=n[1]+Math.cos(L)*C,B=n[0]+Math.cos(S)*C,z=n[1]-Math.sin(S)*C,j=n[0]-Math.sin(L)*C,re=n[1]-Math.cos(L)*C;return this.context_.moveTo(R,G),this.context_.lineTo(O,V),this.context_.lineTo(B,z),this.context_.lineTo(j,re),this.context_.lineTo(R,G),this.context_.closePath(),this.context_.fillStyle="#000",this.context_.fill(),this.context_.canvas}getSize(){return this.size}getScale(){return this.scale}getRotation(){return this.rotation}setSize(e){this.size=e}setScale(e){this.scale=e}setRotation(e){this.rotation=e}}const Bpe=bt({__name:"notification-item",props:{notification:{}},emits:["close"],setup(a){const e=a,t=Wi(!0);function i(n,s){setTimeout(()=>{t.value=!1},e.notification.duration),s()}return(n,s)=>{const r=Fh("dompurify-html");return se(),xa(hT,{name:"fade-out",appear:"","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"transform opacity-0",onEnter:i,onAfterLeave:s[0]||(s[0]=l=>n.$emit("close"))},{default:Ha(()=>[t.value?Mi((se(),Ie("div",{key:0,"data-cy":"notification",class:ti(["lux-alert",`lux-${e.notification.type}`]),role:"alert"},null,2)),[[r,e.notification.message]]):je("",!0)]),_:1})}}}),Fpe={key:0,class:"lux-notifications fixed w-[500px] top-10 left-1/2 ml-[-250px] z-50","data-cy":"alertNotifications"},Npe=bt({__name:"alert-notifications",setup(a){const e=oc(),{notifications:t}=Zt(e);function i(n){e.removeNotification(n)}return(n,s)=>(se(),xa(mw,{to:"body"},[X(t).length?(se(),Ie("div",Fpe,[(se(!0),Ie(ua,null,Gn(X(t),(r,l)=>(se(),xa(Bpe,{key:l,notification:r,onClose:()=>i(r.uuid)},null,8,["notification","onClose"]))),128))])):je("",!0)]))}}),jx={name:"blank",id:0};function hB(){const a=yi(),{mapId:e}=Zt(a),t=od(),i=mn(),n=al(),s=Ft(()=>{var b;if(!e.value){const v=(b=ps().theme)==null?void 0:b.name;if(v)return ud().bg_layer_theme_defaults[v]||c()}return c()});function r(b){const v=t.findBgLayerById(b);l(v||null)}function l(b){if(b){if(b.type===cd.WMTS||b.type===cd.BG_WMTS)b.type="BG WMTS";else throw new Error(`Only WMTS and MVT BG layers are currently implemented (not ${b.type} for ${b.name})`);n.handleExclusionLayers(b),i.setBgLayer(n.initLayer(b))}else i.setBgLayer(null)}function c(){var b;return((b=g().find(v=>v.is_default))==null?void 0:b.id)||jx.id}function h(){return jx.id}function g(){return ud().bg_layers}return{setBgLayer:r,setMapBackground:l,getBgLayersFromConfig:g,getNullId:h,getDefaultSelectedId:c,defaultSelectedBgId:s}}const Dpe=["title"],a8=bt({__name:"background-selector-item",props:{bgTitle:{type:String,default:""},bgName:{type:String,default:""}},setup(a){const{t:e}=ya(),t=a,i=Ft(()=>{const s=e(t.bgTitle),r=t.bgTitle.length>0,l=e(t.bgName);return`${s}${r?" - ":""}${l}`}),n=Ft(()=>`h-full w-full rounded-sm lux-bg-sel-icon
        lux-bg-sel-${t.bgName}
        bg-${t.bgName}_sm
        md:bg-${t.bgName}
        hd:bg-${t.bgName}_sm_hi
        hd_md:bg-${t.bgName}_hi`);return(s,r)=>(se(),Ie("button",{title:i.value,class:ti(n.value)},null,10,Dpe))}}),Vpe={key:0,class:"flex flex-row-reverse"},i8=bt({__name:"background-selector",props:{isOpen:{type:Boolean,default:!1}},setup(a){const{t:e,i18next:t}=ya(),i=hB(),n=mn(),s=ps(),{bgLayer:r,is3dMesh:l}=Zt(n),h=Qe(a.isOpen),g=Qe(!1),b=Qe([]),v=Ft(()=>{var R;return((R=r.value)==null?void 0:R.id)??i.getNullId()}),C=Ft(()=>{var R,G;return(G=(R=b.value)==null?void 0:R.find(O=>O.id===v.value))==null?void 0:G.name});Kt(()=>s.bgLayers,R=>{b.value=ud().bg_layers.map(G=>Object.assign({id:G.id},R.find(O=>G.id===O.id),{name:G.icon_id}))},{immediate:!0}),Kt(()=>n.bgLayer,(R,G)=>{const O=n.layers;G===void 0&&R===null&&(O==null?void 0:O.length)===0&&(i.setBgLayer(i.defaultSelectedBgId.value),R===null&&(g.value=!0))}),Kt([g,()=>t.isInitialized],([R,G])=>{R&&G&&oc().addNotification(e("Aucune couche n'étant définie pour cette carte, une couche de fond a automatiquement été ajoutée."))});function S(R){i.setBgLayer(R.id),h.value=!1}function L(){h.value=!h.value}return(R,G)=>X(l)?je("",!0):(se(),Ie("div",Vpe,[q("div",{"data-cy":"selectedBg",class:ti(["lux-bg-sel border border-black",h.value===!0?"hidden":"block"])},[dt(a8,{"aria-expanded":h.value,"bg-title":"Select BG layer","bg-name":C.value,onClick:L},null,8,["aria-expanded","bg-name"])],2),q("div",{"data-cy":"available-bgs",class:ti(h.value===!0?"flex flex-col md:flex-row":"hidden")},[(se(!0),Ie(ua,null,Gn(b.value,O=>(se(),Ie("div",{key:O.id,class:ti(["lux-bg-sel hover:bg-cyan-600",O.id===v.value?"border-red-500 border-2":"border-black border"])},[dt(a8,{"bg-name":O.name,onClick:V=>S(O)},null,8,["bg-name","onClick"])],2))),128))],2)]))}}),pd=rl("info",()=>{const a=Qe(void 0),e=Qe(void 0),t=Qe(!1),i=Qe(!1),n=Qe(!0),s=Qe(!1),r=Qe(!1),l=Qe(void 0),c=Qe(void 0);return{locationInfoCoords:a,locationInfoInfos:e,hidePointer:t,isStreetviewActive:i,noDataAtLocation:n,streetViewLoading:s,panoPositionChanging:r,svFeature:l,routingFeatureTemp:c}}),Zpe=1501,zpe="infoFeatureLayer";function Upe(){const a=zi().getOlMap();let e,t=null;const{infoOpen:i}=Zt(yi()),{locationInfoCoords:n,hidePointer:s}=Zt(pd()),{clearContent:r}=pm(),l=new El({source:new Cd({features:[]}),zIndex:Zpe});l.set("cyLayerType",zpe),g(l),a.addLayer(l),Kt(i,b=>{b||(n.value=void 0)}),Kt([n,s],([b,v])=>{var C,S;if((C=l.getSource())==null||C.clear(),b&&!v){i.value=!0;const L=new Jn(new Zr(b));(S=l.getSource())==null||S.addFeature(L)}},{immediate:!0}),a.getViewport().addEventListener("contextmenu",b=>b.preventDefault()),La(a,"pointerdown",b=>h(b));function c(b){return a.getEventCoordinate(b.originalEvent)}function h(b){t=b.pixel,b.originalEvent.button===2?(n.value=c(b),r()):b.originalEvent.pointerType==="touch"&&(window.clearTimeout(e),e=window.setTimeout(()=>{n.value=c(b),r()}))}La(a,"pointerup",b=>{t&&b.originalEvent.button===0&&(s.value||(n.value=void 0)),window.clearTimeout(e),t=null}),La(a,"pointermove",b=>{if(t!==null){const v=b.pixel,C=Math.abs(t[0]-v[0]),S=Math.abs(t[1]-v[1]);C+S>6&&(window.clearTimeout(e),t=null)}});function g(b){const v=new bs({color:[255,255,0,.6]}),C=new Vr({color:[255,155,55,1],width:3}),S=new uu({radius:10,fill:v,stroke:C});b.setStyle([new Qn({image:S})])}}const Xpe="https://migration.geoportail.lu/raster",Hpe="EPSG:3857",Ype="EPSG:2169",w5=async a=>{const e=Ns(a,Hpe,Ype);try{const t=await fetch(`${Xpe}?lon=${e[0]}&lat=${e[1]}`);if(!t.ok)throw new Error("Network response was not ok");return(await t.json()).dhm}catch{return null}},Kpe=are(w5,300),qpe={"EPSG:2169":"Luref","EPSG:4326":"Lon/Lat WGS84","EPSG:4326:DMS":"Lon/Lat WGS84 DMS","EPSG:4326:DMm":"Lon/Lat WGS84 DM","EPSG:3263*":"WGS84 UTM"},jpe=[46602,53725,106944,141219];async function Jpe(a,e){const t=Ns(a,e,cu),[i,n,s]=(await Promise.allSettled([$pe(a),w5(a),efe(t)])).map(r=>r.status==="fulfilled"?r.value:void 0);return{shortUrl:i,elevation:n,address:s,clickCoordinateLuref:t,isInBoxOfLidar:Qpe(t)}}function Qpe(a){return hd(jpe,a)}async function $pe(a){return(await Ah.getShortUrl(a)).short_url.replace("http://g-o.lu/migration/","https://migration.geoportail.lu/s/")}async function efe(a){return(await(await fetch(`https://migration.geoportail.lu/geocode/reverse?easting=${a[0]}&northing=${a[1]}`)).json()).results[0]}const Bv={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Fv extends sl{constructor(e,t){super(e),this.feature=t}}function tfe(a,e){const t=[];for(let i=0;i<e.length;++i){const s=e[i].getGeometry();_B(a,s,t)}return t}function Nv(a,e){return ad(a[0],a[1],e[0],e[1])}function lp(a,e){const t=a.length;return e<0?a[e+t]:e>=t?a[e-t]:a[e]}function Dv(a,e,t){let i,n;e<t?(i=e,n=t):(i=t,n=e);const s=Math.ceil(i),r=Math.floor(n);if(s>r){const c=up(a,i),h=up(a,n);return Nv(c,h)}let l=0;if(i<s){const c=up(a,i),h=lp(a,s);l+=Nv(c,h)}if(r<n){const c=lp(a,r),h=up(a,n);l+=Nv(c,h)}for(let c=s;c<r-1;++c){const h=lp(a,c),g=lp(a,c+1);l+=Nv(h,g)}return l}function _B(a,e,t){if(e instanceof is){Vv(a,e.getCoordinates(),!1,t);return}if(e instanceof zh){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n)Vv(a,i[n],!1,t);return}if(e instanceof nc){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n)Vv(a,i[n],!0,t);return}if(e instanceof L1){const i=e.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,c=r.length;l<c;++l)Vv(a,r[l],!0,t)}return}if(e instanceof ld){const i=e.getGeometries();for(let n=0;n<i.length;++n)_B(a,i[n],t);return}}const EA={index:-1,endIndex:NaN};function afe(a,e,t,i){const n=a[0],s=a[1];let r=1/0,l=-1,c=NaN;for(let b=0;b<e.targets.length;++b){const v=e.targets[b],C=v.coordinates;let S=1/0,L;for(let R=0;R<C.length-1;++R){const G=C[R],O=C[R+1],V=mB(n,s,G,O);V.squaredDistance<S&&(S=V.squaredDistance,L=R+V.along)}S<r&&(r=S,v.ring&&e.targetIndex===b&&(v.endIndex>v.startIndex?L<v.startIndex&&(L+=C.length):v.endIndex<v.startIndex&&L>v.startIndex&&(L-=C.length)),c=L,l=b)}const h=e.targets[l];let g=h.ring;if(e.targetIndex===l&&g){const b=up(h.coordinates,c),v=t.getPixelFromCoordinate(b);Z2(v,e.startPx)>i&&(g=!1)}if(g){const b=h.coordinates,v=b.length,C=h.startIndex,S=c;if(C<S){const L=Dv(b,C,S);Dv(b,C,S-v)<L&&(c-=v)}else{const L=Dv(b,C,S);Dv(b,C,S+v)<L&&(c+=v)}}return EA.index=l,EA.endIndex=c,EA}function Vv(a,e,t,i){const n=a[0],s=a[1];for(let r=0,l=e.length-1;r<l;++r){const c=e[r],h=e[r+1],g=mB(n,s,c,h);if(g.squaredDistance===0){const b=r+g.along;i.push({coordinates:e,ring:t,startIndex:b,endIndex:b});return}}}const MA={along:0,squaredDistance:0};function mB(a,e,t,i){const n=t[0],s=t[1],r=i[0],l=i[1],c=r-n,h=l-s;let g=0,b=n,v=s;return(c!==0||h!==0)&&(g=Sn(((a-n)*c+(e-s)*h)/(c*c+h*h),0,1),b+=c*g,v+=h*g),MA.along=g,MA.squaredDistance=$p(ad(a,e,b,v),10),MA}function up(a,e){const t=a.length;let i=Math.floor(e);const n=e-i;i>=t?i-=t:i<0&&(i+=t);let s=i+1;s>=t&&(s-=t);const r=a[i],l=r[0],c=r[1],h=a[s],g=h[0]-l,b=h[1]-c;return[l+g*n,c+b*n]}class ife extends Am{constructor(e){const t=e;t.stopDown||(t.stopDown=tf),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=rfe(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Mh,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const n=this.mode_;if(n==="Circle")i=(s,r,l)=>{const c=r||new JO([NaN,NaN]),h=jn(s[0]),g=Wp(h,jn(s[s.length-1]));return c.setCenterAndRadius(h,Math.sqrt(g),this.geometryLayout_),c};else{let s;n==="Point"?s=Zr:n==="LineString"?s=is:n==="Polygon"&&(s=nc),i=(r,l,c)=>(l?n==="Polygon"?r[0].length?l.setCoordinates([r[0].concat([r[0][0]])],this.geometryLayout_):l.setCoordinates([],this.geometryLayout_):l.setCoordinates(r,this.geometryLayout_):l=new s(r,this.geometryLayout_),l)}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new El({source:new Cd({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:nfe(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:Bw,this.freehandCondition_,e.freehand?this.freehandCondition_=ex:this.freehandCondition_=e.freehandCondition?e.freehandCondition:HT,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(AS.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=ex:t=e:t=TS,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===Ba.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===Ti.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Ti.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Ti.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===Ti.POINTERDOWN?i=!1:t&&this.getPointerCount()<2?(i=e.type===Ti.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===Ti.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===Ti.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Yc(Ti.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),i=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),n=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=_s([i,n]),r=this.traceSource_.getFeaturesInExtent(s);if(r.length===0)return;const l=tfe(e.coordinate,r);l.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:l,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const i=e.startIndex<=e.endIndex,n=e.startIndex<=t;i===n?i&&t>e.endIndex||!i&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(i&&t<e.endIndex||!i&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let i=0;if(e<t){const n=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),i=s-n+1}else{const n=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),i=n-s+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,t,i){if(t===i)return;const n=[];if(t<i){const s=Math.ceil(t);let r=Math.floor(i);r===i&&(r-=1);for(let l=s;l<=r;++l)n.push(lp(e.coordinates,l))}else{const s=Math.floor(t);let r=Math.ceil(i);r===i&&(r+=1);for(let l=s;l>=r;--l)n.push(lp(e.coordinates,l))}n.length&&this.appendCoordinates(n)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&Z2(t.startPx,e.pixel)<this.snapTolerance_)return;const i=afe(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==i.index){if(t.targetIndex!==-1){const c=t.targets[t.targetIndex];this.removeTracedCoordinates_(c.startIndex,c.endIndex)}const l=t.targets[i.index];this.addTracedCoordinates_(l,l.startIndex,i.endIndex)}else{const l=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(l,i.endIndex)}t.targetIndex=i.index;const n=t.targets[t.targetIndex];n.endIndex=i.endIndex;const s=up(n.coordinates,n.endIndex),r=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(r[0]),Math.round(r[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(e.coordinate),!n&&this.freehand_?this.finishDrawing():!this.freehand_&&(!n||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,i=e.pixel,n=t[0]-i[0],s=t[1]-i[1],r=n*n+s*s;if(this.shouldHandle_=this.freehand_?r>this.squaredClickTolerance_:r<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let i=!1;if(this.sketchFeature_){let n=!1,s=[this.finishCoordinate_];const r=this.mode_;if(r==="Point")i=!0;else if(r==="Circle")i=this.sketchCoords_.length===2;else if(r==="LineString")n=!t&&this.sketchCoords_.length>this.minPoints_;else if(r==="Polygon"){const l=this.sketchCoords_;n=l[0].length>this.minPoints_,s=[l[0][0],l[0][l[0].length-2]],t?s=[l[0][0]]:s=[l[0][0],l[0][l[0].length-2]]}if(n){const l=this.getMap();for(let c=0,h=s.length;c<h;c++){const g=s[c],b=l.getPixelFromCoordinate(g),v=e[0]-b[0],C=e[1]-b[1],S=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(v*v+C*C)<=S,i){this.finishCoordinate_=g;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Jn(new Zr(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Jn);const t=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),i.changed()):(i=new is(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const t=this.getMap().getView().getProjection(),i=q2(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Jn(new is(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Jn,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Fv(Bv.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),i=this.sketchFeature_.getGeometry(),n=t.getView().getProjection(),s=q2(this.geometryLayout_);let r,l;for(;e.length<s;)e.push(0);this.mode_==="Point"?l=this.sketchCoords_:this.mode_==="Polygon"?(r=this.sketchCoords_[0],l=r[r.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(r=this.sketchCoords_,l=r[r.length-1]),l[0]=e[0],l[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,s;const r=this.mode_;return r==="LineString"||r==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),this.geometryFunction_(s,t,i)):r==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():n=!0),s.push(e.slice()),n&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),n?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let s=0;s<e;++s){let r;if(n==="LineString"||n==="Circle"){if(r=this.sketchCoords_,r.splice(-2,1),r.length>=2){this.finishCoordinate_=r[r.length-2].slice();const l=this.finishCoordinate_.slice();r[r.length-1]=l,this.createOrUpdateSketchPoint_(l)}this.geometryFunction_(r,t,i),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(n==="Polygon"){r=this.sketchCoords_[0],r.splice(-2,1);const l=this.sketchLine_.getGeometry();if(r.length>=2){const c=r[r.length-2].slice();r[r.length-1]=c,this.createOrUpdateSketchPoint_(c)}l.setCoordinates(r),this.geometryFunction_(this.sketchCoords_,t,i)}if(r.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const i=e.getGeometry(),n=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,i,n)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,i,n),t=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new bm([t])):this.type_==="MultiLineString"?e.setGeometry(new zh([t])):this.type_==="MultiPolygon"&&e.setGeometry(new L1([t])),this.dispatchEvent(new Fv(Bv.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new Fv(Bv.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let n;if(t==="LineString"||t==="Circle")n=this.sketchCoords_;else if(t==="Polygon")n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&n.shift(),n.pop();for(let r=0;r<e.length;r++)this.addToDrawing_(e[r]);const s=e[e.length-1];this.sketchFeature_=this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new Jn(new Zr(n)),this.updateSketchFeatures_(),this.dispatchEvent(new Fv(Bv.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function nfe(){const a=o3();return function(e,t){return a[e.getGeometry().getType()]}}function rfe(a){switch(a){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+a)}}const sfe=ife,n8=0,f0=1,r8=[0,0,0,0],Mp=[],LA={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class RA extends sl{constructor(e,t,i){super(e),this.features=t,this.mapBrowserEvent=i}}class ofe extends Am{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:p7,this.defaultDeleteCondition_=function(i){return ZX(i)&&XT(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:ex,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new C4,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new El({source:new Cd({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:ufe(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new $o(this.source_.getFeatures()),this.source_.addEventListener(wo.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(wo.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Rr.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Rr.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const n=this.SEGMENT_WRITERS_[t.getType()];n&&n(e,t)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(i.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(Ba.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new $o;const i=this.featuresBeingModified_.getArray();for(let n=0,s=t.length;n<s;++n){const r=t[n].feature;r&&!i.includes(r)&&this.featuresBeingModified_.push(r)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new RA(LA.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(Ba.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,i=[];t.forEach(function(n){e===n.feature&&i.push(n)});for(let n=i.length-1;n>=0;--n){const s=i[n];for(let r=this.dragSegments_.length-1;r>=0;--r)this.dragSegments_[r][0]===s&&this.dragSegments_.splice(r,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const i=t.getCoordinates(),n={feature:e,geometry:t,segment:[i,i]};this.rBush_.insert(t.getExtent(),n)}writeMultiPointGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n],l={feature:e,geometry:t,depth:[n],index:n,segment:[r,r]};this.rBush_.insert(t.getExtent(),l)}}writeLineStringGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length-1;n<s;++n){const r=i.slice(n,n+2),l={feature:e,geometry:t,index:n,segment:r};this.rBush_.insert(_s(r),l)}}writeMultiLineStringGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,c=r.length-1;l<c;++l){const h=r.slice(l,l+2),g={feature:e,geometry:t,depth:[n],index:l,segment:h};this.rBush_.insert(_s(h),g)}}}writePolygonGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,c=r.length-1;l<c;++l){const h=r.slice(l,l+2),g={feature:e,geometry:t,depth:[n],index:l,segment:h};this.rBush_.insert(_s(h),g)}}}writeMultiPolygonGeometry_(e,t){const i=t.getCoordinates();for(let n=0,s=i.length;n<s;++n){const r=i[n];for(let l=0,c=r.length;l<c;++l){const h=r[l];for(let g=0,b=h.length-1;g<b;++g){const v=h.slice(g,g+2),C={feature:e,geometry:t,depth:[l,n],index:g,segment:v};this.rBush_.insert(_s(v),C)}}}}writeCircleGeometry_(e,t){const i=t.getCenter(),n={feature:e,geometry:t,index:n8,segment:[i,i]},s={feature:e,geometry:t,index:f0,segment:[i,i]},r=[n,s];n.featureSegments=r,s.featureSegments=r,this.rBush_.insert(i0(i),n);let l=t;this.rBush_.insert(l.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const i=t.getGeometriesArray();for(let n=0;n<i.length;++n){const s=i[n],r=this.SEGMENT_WRITERS_[s.getType()];r(e,s)}}createOrUpdateVertexFeature_(e,t,i,n){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new Jn(new Zr(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",t),s.set("geometries",i),s.set("existing",n),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==Ti.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=Ti.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==Ti.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const t=this.vertexFeature_;if(!t)return;this.getMap().getView().getProjection();const i=[],n=t.getGeometry().getCoordinates(),s=_s([n]),r=this.rBush_.getInExtent(s),l={};r.sort(lfe);for(let c=0,h=r.length;c<h;++c){const g=r[c],b=g.segment;let v=Ga(g.geometry);const C=g.depth;if(C&&(v+="-"+C.join("-")),l[v]||(l[v]=new Array(2)),g.geometry.getType()==="Circle"&&g.index===f0){const S=o8(e,g);js(S,n)&&!l[v][0]&&(this.dragSegments_.push([g,0]),l[v][0]=g);continue}if(js(b[0],n)&&!l[v][0]){this.dragSegments_.push([g,0]),l[v][0]=g;continue}if(js(b[1],n)&&!l[v][1]){if(l[v][0]&&l[v][0].index===0){let S=g.geometry.getCoordinates();switch(g.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":S=S[C[1]];case"Polygon":if(g.index!==S[C[0]].length-2)continue;break}}this.dragSegments_.push([g,1]),l[v][1]=g;continue}Ga(b)in this.vertexSegments_&&!l[v][0]&&!l[v][1]&&i.push(g)}return i}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([s])=>s));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],n=[];for(let s=0,r=this.dragSegments_.length;s<r;++s){const l=this.dragSegments_[s],c=l[0],h=c.feature;i.includes(h)||i.push(h);const g=c.geometry;n.includes(g)||n.push(g);const b=c.depth;let v;const C=c.segment,S=l[1];for(;t.length<g.getStride();)t.push(C[S][t.length]);switch(g.getType()){case"Point":v=t,C[0]=t,C[1]=t;break;case"MultiPoint":v=g.getCoordinates(),v[c.index]=t,C[0]=t,C[1]=t;break;case"LineString":v=g.getCoordinates(),v[c.index+S]=t,C[S]=t;break;case"MultiLineString":v=g.getCoordinates(),v[b[0]][c.index+S]=t,C[S]=t;break;case"Polygon":v=g.getCoordinates(),v[b[0]][c.index+S]=t,C[S]=t;break;case"MultiPolygon":v=g.getCoordinates(),v[b[1]][b[0]][c.index+S]=t,C[S]=t;break;case"Circle":const L=g;if(C[0]=t,C[1]=t,c.index===n8)this.changingFeature_=!0,L.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let R=Z2(jn(L.getCenter()),jn(t));L.setRadius(R),this.changingFeature_=!1}break}v&&this.setGeometryCoordinates_(g,v)}this.createOrUpdateVertexFeature_(t,i,n,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,i=this.findInsertVerticesAndUpdateDragSegments_(t);if(i!=null&&i.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,i),this.vertexFeature_)){const n=this.vertexFeature_.getGeometry().getCoordinates();for(let s=i.length-1;s>=0;--s)this.insertVertex_(i[s],n);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const i=this.dragSegments_[t][0],n=i.geometry;if(n.getType()==="Circle"){const s=n,r=s.getCenter(),l=i.featureSegments[0],c=i.featureSegments[1];l.segment[0]=r,l.segment[1]=r,c.segment[0]=r,c.segment[1]=r,this.rBush_.update(i0(r),l);let h=s;this.rBush_.update(h.getExtent(),c)}else this.rBush_.update(_s(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new RA(LA.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const t=this.getMap(),i=t.getPixelFromCoordinate(e);t.getView().getProjection();const n=function(l,c){return s8(e,l)-s8(e,c)};let s,r;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?c=>c===this.hitDetection_:void 0;t.forEachFeatureAtPixel(i,(c,h,g)=>{g&&g.getType()==="Point"&&(g=new Zr(cm(g.getCoordinates())));const b=g||c.getGeometry();if(b&&b.getType()==="Point"&&c instanceof Jn&&this.features_.getArray().includes(c)){r=b;const v=c.getGeometry().getFlatCoordinates().slice(0,2);s=[{feature:c,geometry:r,segment:[v,v]}]}return!0},{layerFilter:l})}if(!s){const l=yl(i0(e,r8)),c=t.getView().getResolution()*this.pixelTolerance_,h=Mw(Eh(l,c,r8));s=this.rBush_.getInExtent(h)}if(s&&s.length>0){const l=s.sort(n)[0],c=l.segment;let h=o8(e,l);const g=t.getPixelFromCoordinate(h);let b=Z2(i,g);if(r||b<=this.pixelTolerance_){const v={};if(v[Ga(c)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-e[0],this.delta_[1]=h[1]-e[1]),l.geometry.getType()==="Circle"&&l.index===f0)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry],this.snappedToVertex_);else{const C=t.getPixelFromCoordinate(c[0]),S=t.getPixelFromCoordinate(c[1]),L=Wp(g,C),R=Wp(g,S);if(b=Math.sqrt(Math.min(L,R)),this.snappedToVertex_=b<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(h=L>R?c[1]:c[0]),this.createOrUpdateVertexFeature_(h,[l.feature],[l.geometry],this.snappedToVertex_);const G={};G[Ga(l.geometry)]=!0;for(let O=1,V=s.length;O<V;++O){const B=s[O].segment;if(js(c[0],B[0])&&js(c[1],B[1])||js(c[0],B[1])&&js(c[1],B[0])){const z=Ga(s[O].geometry);z in G||(G[z]=!0,v[Ga(B)]=!0)}else break}}this.vertexSegments_=v;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const i=e.segment,n=e.feature,s=e.geometry,r=e.depth,l=e.index;let c;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":c=s.getCoordinates(),c[r[0]].splice(l+1,0,t);break;case"Polygon":c=s.getCoordinates(),c[r[0]].splice(l+1,0,t);break;case"MultiPolygon":c=s.getCoordinates(),c[r[1]][r[0]].splice(l+1,0,t);break;case"LineString":c=s.getCoordinates(),c.splice(l+1,0,t);break;default:return!1}this.setGeometryCoordinates_(s,c);const h=this.rBush_;h.remove(e),this.updateSegmentIndices_(s,l,r,1);const g={segment:[i[0],t],feature:n,geometry:s,depth:r,index:l};h.insert(_s(g.segment),g),this.dragSegments_.push([g,1]);const b={segment:[t,i[1]],feature:n,geometry:s,depth:r,index:l+1};return h.insert(_s(b.segment),b),this.dragSegments_.push([b,0]),!0}updatePointer_(e){var t;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates()}getPoint(){var t;const e=(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates();return e?cm(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(_s([e])).some(({segment:i})=>js(i[0],e)||js(i[1],e))}removePoint(e){if(e&&(e=jn(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=Ti.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([n])=>n));const i=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new RA(LA.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,i}return!1}removeVertex_(){const e=this.dragSegments_,t={};let i=!1,n,s,r,l,c,h,g,b,v,C,S;for(c=e.length-1;c>=0;--c)r=e[c],C=r[0],S=Ga(C.feature),C.depth&&(S+="-"+C.depth.join("-")),S in t||(t[S]={}),r[1]===0?(t[S].right=C,t[S].index=C.index):r[1]==1&&(t[S].left=C,t[S].index=C.index+1);for(S in t){switch(v=t[S].right,g=t[S].left,h=t[S].index,b=h-1,g!==void 0?C=g:C=v,b<0&&(b=0),l=C.geometry,s=l.getCoordinates(),n=s,i=!1,l.getType()){case"MultiLineString":s[C.depth[0]].length>2&&(s[C.depth[0]].splice(h,1),i=!0);break;case"LineString":s.length>2&&(s.splice(h,1),i=!0);break;case"MultiPolygon":n=n[C.depth[1]];case"Polygon":n=n[C.depth[0]],n.length>4&&(h==n.length-1&&(h=0),n.splice(h,1),i=!0,h===0&&(n.pop(),n.push(n[0]),b=n.length-1));break}if(i){this.setGeometryCoordinates_(l,s);const L=[];if(g!==void 0&&(this.rBush_.remove(g),L.push(g.segment[0])),v!==void 0&&(this.rBush_.remove(v),L.push(v.segment[1])),g!==void 0&&v!==void 0){const R={depth:C.depth,feature:C.feature,geometry:C.geometry,index:b,segment:L};this.rBush_.insert(_s(R.segment),R)}this.updateSegmentIndices_(l,h,C.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(i=>i.getType()==="Circle"||i.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(_s([e])).some(({segment:i})=>!(js(i[0],e)||js(i[1],e)))}insertPoint(e){var n;const t=e?jn(e,this.getMap().getView().getProjection()):(n=this.vertexFeature_)==null?void 0:n.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((s,r)=>s||this.insertVertex_(r,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,i,n){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(i===void 0||s.depth===void 0||vd(s.depth,i))&&s.index>t&&(s.index+=n)})}}function lfe(a,e){return a.index-e.index}function s8(a,e,t){const i=e.geometry;if(i.getType()==="Circle"){let s=i;if(e.index===f0){const r=Wp(s.getCenter(),jn(a)),l=Math.sqrt(r)-s.getRadius();return l*l}}const n=jn(a);return Mp[0]=jn(e.segment[0]),Mp[1]=jn(e.segment[1]),Zz(n,Mp)}function o8(a,e,t){const i=e.geometry;if(i.getType()==="Circle"&&e.index===f0)return cm(i.getClosestPoint(jn(a)));const n=jn(a);return Mp[0]=jn(e.segment[0]),Mp[1]=jn(e.segment[1]),cm(Lk(n,Mp))}function ufe(){const a=o3();return function(e,t){return a.Point}}const cfe=ofe,dfe={SELECT:"select"};class hfe extends sl{constructor(e,t,i,n){super(e),this.selected=t,this.deselected=i,this.mapBrowserEvent=n}}const Zv={};class I5 extends nf{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:XT,this.addCondition_=e.addCondition?e.addCondition:TS,this.removeCondition_=e.removeCondition?e.removeCondition:TS,this.toggleCondition_=e.toggleCondition?e.toggleCondition:HT,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Mh,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:_fe(),this.features_=e.features||new $o;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const i=e.layers;t=function(n){return i.includes(n)}}else t=Mh;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[Ga(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[Ga(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Rr.ADD,this.boundAddFeature_),this.features_.addEventListener(Rr.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Rr.ADD,this.boundAddFeature_),this.features_.removeEventListener(Rr.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const i=this.getMap().getAllLayers().find(function(n){if(n instanceof El&&n.getSource()&&n.getSource().hasFeature(t))return n});i&&this.addFeatureLayerAssociation_(t,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=Ga(e);t in Zv||(Zv[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let n=t.length-1;n>=0;--n){const s=t[n];if(s!==this&&s instanceof I5&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const i=Ga(e);e.setStyle(Zv[i]),delete Zv[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[Ga(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),i=this.removeCondition_(e),n=this.toggleCondition_(e),s=!t&&!i&&!n,r=e.map,l=this.getFeatures(),c=[],h=[];if(s){ef(this.featureLayerAssociation_),r.forEachFeatureAtPixel(e.pixel,(g,b)=>{if(!(!(g instanceof Jn)||!this.filter_(g,b)))return this.addFeatureLayerAssociation_(g,b),h.push(g),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let g=l.getLength()-1;g>=0;--g){const b=l.item(g),v=h.indexOf(b);v>-1?h.splice(v,1):(l.remove(b),c.push(b))}h.length!==0&&l.extend(h)}else{r.forEachFeatureAtPixel(e.pixel,(g,b)=>{if(!(!(g instanceof Jn)||!this.filter_(g,b)))return(t||n)&&!l.getArray().includes(g)?(this.addFeatureLayerAssociation_(g,b),h.push(g)):(i||n)&&l.getArray().includes(g)&&(c.push(g),this.removeFeatureLayerAssociation_(g)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let g=c.length-1;g>=0;--g)l.remove(c[g]);l.extend(h)}return(h.length>0||c.length>0)&&this.dispatchEvent(new hfe(dfe.SELECT,h,c,e)),!0}}function _fe(){const a=o3();return Vi(a.Polygon,a.LineString),Vi(a.GeometryCollection,a.LineString),function(e){return e.getGeometry()?a[e.getGeometry().getType()]:null}}const mfe=I5;async function gfe(){return await new Promise(a=>{if(window.hasOwnProperty("google"))a("loaded");else{const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyCObzX7dJqeGm5Wv2VwS4JzNyEtLsOgWX8",e.onload=function(){a("loaded")},document.getElementsByTagName("head")[0].appendChild(e)}})}const pfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACVxJREFUeNrsne9vFEUYx+e2XIG2pHcgBFrFMyrBYEIRor4hFnxplB8vfCn0pb4p/AGm9q1v6j9gWl6Y6AtpjRhDorTqC0wIWhAhISFeMRYFhCvQa+F6XZ+nt3vObXf3dm9/zOzs8002bEt7O53PfJ95Zm5mjjESiZQeZUQ8VNd1Yc+WUHomE39VrElbo5MNuqgHCwGPLZxcL87toh2/LPj5MkBPl+M516cZfkXkw4VWOsBfNkK+ljLoSyLdziRxG7b89Snq76sAfUl0IYSDx5YPwopYmxLwCzIUQor+FeA/AfjtKejvH2P3RuBXOyGvcoiHa1GWwkgDHpxQBddjxXQpCv6B6IROVscj/EcAv0vBkL+A3ZlMBZKxgktwbVUsxN+XrVDSgQdnLILrH8FtzuuvCCqq17D9rywJneyOR90zwGcTDr4M0B/KWMFSgjdm9G7DbUFS13t1+y1Z+x9pkyiA/wDgz3sc4skIfla2hC4R4A3NwLXJYzkzEkGfB+izMles1OBxThtcfxNudyYM/FXZhxrSj5cB/t8A/xm43SgBeC/QZ6DMJQIfjq7A9YaHLD8jGHwZrhtJqNBEgAcHLRghf5dA8F7cfhHKWiHw4cK/CvCfa5LliwT/p+wJXSLBGzoP11FBrncD/8QoGyPw0bj+Hrj+Mty+GjP4Zm6/IPOYXQXHoy7B1QdXd0zwm0G/CdAvJa0SEwceKvkxuP4s3L4Xo+vd4E8l0DzJfN8b4M8A/GtwuzcG+G7Qv4Oy/EPg49U3BviOCMG7Qce3W79PauUlFrwxtv8Cbj8Q5PjPE2yaZC9xAvjTRsjfFxF8J+jfwrOvE3ix+swI+Z0hg3eCjm8Vjye90hIPHpx3G1z/Jdy+H7LrncB/DM+cJ/BywB8H+Afh9pWIH/UjPOu8EnXGFBGA78G+N8JH4Nq5d5M0H6+84w3XzwL8T+F2MKJHjKgCXSnHc87HsfXLIb/sFYD+pkr1pCL4/fDP2ZBf9jUA/xsjSQ9/RA9PQ1SjyQGfg+uPEKDja+RUrKOMwvD74Z9J8+tSRWfTc9WVa67SOETvzmZYX3cb639qVa57AEL8FIFPmCbvVCa/mq30T9yqsGLZ2/Y1bADHnm1n+zetGduXXzOgat2oCf70/cPGsK4/4CtNwDXMjuanCbzcwHFlzogTcAzl6Ohce+OfXZxfrncDDhqD6yQ0gBKBlw/6CQN6g45vb2eHerLs8LbmG28xD8Bu4dTMEzZ1d9XBVAj9CMCfSj14PKNO1JGcFuijyJj/1kcvrWODz69luax9+T658bgeAeyEOcHJywsrDcGiAYA/JkHyGqjugx4siGeVZYxDCqWAjiB/PbiBDe1c5wgd9cOdJTtX11Xo0Nj4650rl+V1RuGZx0UCxzoPatqgjrf+fu1k4riigAU6hvXRvR2eQnr+zFy9kXj5+QM/PbLmALE5nzNWQ8UGOUwp7KNEM7FFgVqf7hv6SqpuhG8E6WWYh46f3N9l7RZGjWQyLneH6qYoz5A1G0D4jeD/7N03dBSM7Vc1ghbhj0NZclHADiOciwJv2whCer0Rvk/3A93M3E1hBu9VCN/S5xfgOhES8MhhiwDPdwNaoChw+n4/P073A93O4V7DPZ/0DcGIgdMglKkQ0N1aFOFcFvDWRqC12AiG+CGb03DMS5g35Zbd2+kEDBO5ef0c87n4g4OtiZpLkeGceLMRNG8Atb697nYcp/uVHWS7xtBMgy80PPt4C+4WKpk+IMBLFDjGJ3Ru43SnMF+q6J6/7yacCcSwX3d97f0BN9hSAJcRvLVcbWYj4OvbvMFpWL9yc7bX7N4Kn9Mhm1DeJmsdy/6RIGYUaNt0ppRn3IGHXube/cBtJdxbGl+frO62U2JW2ZarbI95b7NgouUwH8TxlnL0sQR9tk5iClpZ1nfzQ6oww3wQ+PyoYsPXc7sJfMjSudOsC51aS44Po3HYTeqYquosMevzUvGZbxfuLLKeJ/dYT5Ofuz4LEPcW0lAl6QD/YnaRfbj0S/PuRFvPvB+YnWyl4oP+crkc6+xsPrX7dG8PS4uSk4VmVk6yXtF0qer797u2bGv6M/ne7b5fl5/nb8uwEoEPu0/KZIp2le1VzaC2Z7Osr2ejr9fE4SFflodvd18i8KEm9Gy5/E73ubrj56q+p1gRaqV9veP/d3qICFZZ5v2nWO0TsnUCHwJw/JgSXGJkLOeaDjLmduvDW+nfLcO/aaOcCL8qeyOQETxWXtUEbvm/U/WbGf8niDqF+zIMbnp9grcu6ODLho2UawRSNgBNRne7/NwEH2b99vVO4R6hB3ynr+i028ZoALpsDUATDFu3hHJ3Hc1jgjdmfonr3v1qR8+WwGEegQ9fa/iY2OFmvyNbFNAEultvcXnwMO86v3293bBuR+8WfwUA6Fy0KfKRyIssjUAX0QjiBO/P3R5dP3Cx7CvDx7Be5iYsl/JbWTbr/S1e7GJwF05DQwywp05UV6DF4G49gLuddJLV9rLVNzt4hY99OZ/I7Sr0en4oDiOP/DzfOIQLaVMFFwViiQBahO7WjT8m/FevOewID8QPfL5P99q/2zyjoQxhymwEUXYDWkTujj5W1XatDljBeMn0zXCPYX5zR7un8G4D/UDU26ZN40QRBTTp3e0Of8wKf8+5h9Y+2DHcNwvzCBpHDg7QYz0sIewooMb++Nru1VH+W7gsCpdAO63N+734Fytsztu+a2dOzliyd2HQI2lITBXV1tzjqdIF/tu4TAvh48JIt7V6CBtDOk7DOqzPm2K1gxGUOBVDtaNQcOkT7mXDnS22y6BWjkKxzNKhq11yg6IxZBtTqapUPfyoaQPwoKIxWTSh0tk3aoNvbAS4CQM3O/QZl2sCz2rvAJ5S8aSrdIE3hx7GnjVcAm1dDdvRxmbuvtWNDq9KcaYPgQ8VvJdtteb8ufLSUgI9Q0ZIIXg/QEM8tYPAC3a7XycT+JT+jWLP7YtJqdhJw/zPbWdYQlbLkuPD7a+VD/dpSe7ibDQEPmFJXaqksuODQlc6ySPwKe3rlQQfYv9M4CnJI/CU1BF4Zft25ZM8Ap/Svl6pKVvDmepPtJPj43OmauGesvqUhntlwMfhSJVcr5EjqY8nt6eocWnk9nSGe0ruUur6xINPw/o4Ai+JA1VobBq5nUYQJBKJRCKRSCQSiUQikUgkEolEIpFIJBKJRApd/wkwAAHhnfmUwUh3AAAAAElFTkSuQmCC",ffe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACR9JREFUeNrsne9vFEUYx+e2vQNaau9UGmkRzyhE9AUlGMMLScD4jiiFxMT4xvJeU/gDCPYvAN/pG1te+oYWxXcGC/gCY9DWaPwRtIcBVCBwZ+GA3l3X5+ntnnPL7u3u7a+Z2eebTLqW9m46n/k+88zczMgYiUQikUgkEolEIpFIJFmUSboCuq4LUY9YGz2T0ZOuQ68AjZA2+LoIlegVqDG0FMBfEcHtwoA3XL8Cj1nFnb5CY7z9eN8rUBQKW8vQwYUBL1ojN6DkFAz5dZGgCwcexz/QQ3jsVyzEL4tWKeHCKsBvAPw6PK4VeMjyk6AtiZLQCQ3e0H0o66D0SA7+IUCvidjAQoI3Qv4SPG4QELxX6Dim3xV1/BE2gwb4ywC/Co+PSer42zhsEfjuVIEy6KGeojn+PkBfErlhhQaPUyBw/Q14fFaQkO8FOrr8huhTDeEXSwB+FeCX4XFIEvBXRU3opAJv6G8j0VsjOPh/AfpNGRpUCvDG3H4RHrcnCN4NOq49LEpiJHnWxQF+BeD/A4/PJATfDfwvUMcHBD4a/QHlaSh9McN3g34LoP8pU0NKBR6TJnD9AjzujdnxncDjOvyCZAaS7yNQTJ6M8f5FQRz/K9TpHoGPR+iwLazzql4mBugY4hdkbEApwRvLuefh8a2EHX9OUuPIu9sF4F8F+D/C4ysJOf68LHN2pcAbugBlFEohIvBO0K8D9AsyN5zU4HHeDK6fgcf3I3K9E/gZyQ0j/8ZGgH8Z4M/D46shw3eCfhre8xqBF0OfQtnN7PfqhQl+EaB/pkKDKbObFVy/C74cjRj8ewB+UYX2UmYPOwC5aIT83RG9xSeqQFfK8YbrB+DLF1AGAv6Nuk0Wv0+ltlLurBrAfx2+fBzyy74D4L9RqZ2UO64EgL4E+F/DY1gO/Ug16Eo63nA9btC8DCUf8KVKUF7GvQCMJA38MT249qjaPhnF4eMK2xg+l2s6m680Vkul1p67DWYzbHSwh+15sm3kOwFOP6Jq2/SqDH7vhbsfAtCx2b9qrFT1dlgVO8Dbm3LlS+X6SZXbRk3Hn7qDLp+AEjRUz0KZZAcL8wRebOD4Sd1xJ+AYytHR+Vz7n126t9IaBhw0DeUIdIAygRcP+mEDepvGN+fY/uEsG9vofssK5gE4LJy8sszmbtUf+WcoBwD+XOrB421VeH+NANCnkDH/rQ+2rWUTz61h+ax9/U78/rAVAWzncZATHPnh/mpHsOgQwJ8WIHEN1PZa0I4DFcgY15UJAR1Bfv/aADv2wlpH6KhzN+t2rm6p2KexmV39q8XyOlPwnuNJAsc2D2raoI63/n7zwrq4ooAFOob1qZ19rr+GIb1wptLqJF5+HmYI1hwgNudzxmpr2CA3bWgh1zETWxRojum+oa+m6kb4RpBepnno+K92r7cOC1NGMhmXu0N1kxZhvc0OEH4n+D979w0ddfp67ZFO0CX8GahLPgrYYYTzpMDbdoKQXu84P6b7gW5m7qYwg/cqhG8Z84tQDocEPHLYSYDnhwEtUBQ4dWcPP0/3A93O4V7DPZ/0HdvWdiHXBNSpGNDdWhThXBTw1k6gddkJjvFTNqfpmJcwb6pTdm+nwzBN5Nb186y5SujX3RpL8P7epMDbdQL3DtAc21tux3m6X9lBtusMbpp4vu29x7twd6ISAbyfKPAun9B1mqc7hflyTff8/U7ClUAM+y3XNz8f6ARbqNu5RQJvrVeP2Qn49jYfcBnWrzo522t2b4XPab9NKO8RtY1FBW+NAj1PnCkXjCzartG7SuyChntL5xsV1d12kubz+GqD7TCfLRsmAoX5II631GNUAiNJ4/iWaiv6dn5KFWaYDwKfn1UMfF7ZTuBDls5tnCz2a105PozOYbeoY6qhs7ws7an01itT3958wIaXb7Nhl5/77TpA3FlMQ5OkA/yW7AN2tP6d+3CirePzR6WlpeGPzOfzrL/ffWl308gwS4vkyUIz7Ir5PF/2fxv4+qGNrj9TGNns+3X5df6eDCsT+LDHpEymZNfYXuUGNZfNstHhx329Jk4P+bosvTG4QOBDTejZSvXNwbMtx1cavpdYEWott87x3/s9RASrLOv+c6z5f6XQCXwIwPHOetxiZGznmg8y5+40hnczvlumf/NGPRF+Q/ROICJ4bLyGCdzyb63TLX42ULiF+ypMbkZ8grdu6ODrhp2U6wRCdgBNRHd3+LlZPsz6Heudwj1CD/hJX8nptI3RAXTROoCWMGzdEso762ABE7xp8z9x37tfbR0eChzmEfjkz203lE+6/Y5oUUBL0N16l9uDJ3nX+R3r7aZ1W0eG/FUAoHPRpsRHIi+ydAI9iU4QJ3h/7vbo+kOXqr4yfAzrVW7Bsl54imWz3j/ixSEGT+G0dcQAZ+qSGgq0GNytB3C3k/DcetkMu3jYwSt8HMv5RO6l4ojnN8Vp5IGL99qncCEdquCiQCwRQIvQ3brxx4T/6k2HHeCB+IHPj+lex3eb92irQ5gyO0GUw4AWkbujj1XNU6uHrGC8ZPpmuMcwv6Ev5ym820DfG/WxadM4UUQBTXh3d4Y/bYW/4+ySdQx2DPduYR5B48zBAXqslyWEHQXUOB/fPL06xX8Lt0XhFminvXk/la6x4oaC7ad25uKMJXtPDHokHYmpouaee7zsqMh/G7dpIXzcGNlprx7CxpCOy7AO+/PmWPNiBCVuxVDtKhTc+oRn2fBki+02qNWrUCyrdOjqDrlByZiyTavUVKpefuTaATyoZCwWzap0943a4Ns7AR7CwMMOo0bpmMCz5ieAJ1W86Spd4M2ph3FmDbdAW3fD9vWwK7f2DaLDG0Lc6UPgQwXv5VituX6uvLSUQM+QEVII3g/QEG/tIPAJu92vkwl8Sv/GZO/ti0mpOEnD/K9tZ5gku2XJ8eGO18qH+7Qkd3F2GgIvWVKXKqns+KDQlU7yCHxKx3olwYc4PhN4SvIIPCV1BF7ZsV35JI/Ap3SsV2rJ1nCm+gvt5Pj4nKlauKesPqXhXhnwcThSJddr5Ega48ntKepcGrk9neGekruUul568GnYH0fgBXGgCp1NI7fTDIJEIpFIJBKJRCKRSCQSiUQikUgkEolEIpFIoes/AQYAq9k65sP/+QUAAAAASUVORK5CYII=",yfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACL1JREFUeNrsndtvFFUcx89Mu6W0YHdVGmgJWSOiRCNFXnxQAW8vRgETE9+EJ30rPPhosK9GA/9BS+KDiQnUSOKLwaImmuClmigJCcnWCxAhdAu2XLbb8ffrzKxnDzOzZ3ZuZ878vslwlu3udOZ8zvd3LnPOKWMkEolEIpFIJBKJRCKRSCQSiUQikUgkEolESlCGihdlWVaYa8vqHiypizMMi8CHg4/XZip6D7IwmwCeHN8F/B5F4VuS0Fco1Hcf8tcoBl8W+l2q46O7fq1C92FJ/HxJ1bo9N+Ad+Gsd5+fB8YsAvUGt+vjgVyDpVRz8HYB+g7pz8YIvQTKc8f0EQV+G46rKDbpcgnfglyGpZHRPnUL8ZYB+Oy95mSvwDvxqQH1vZOT2eYD+T57yMY/g+yF5VCHHY7ftAoBvEvjk4Y9CsjngnowEoPuB/x2g38xbHuYSvAN/FyTrUgLv12D7C6BfzGP+5Rn8ekieSem+vNx+C45vAfwygU8f/lZIdiR8b34h/ixAv5bXvMs1eAf+S5BsTBn8eYD+Q57zTQfwGPLf8OniGQlAx5G5T1V/CKM9eAf+U5C8kBL4TwD6n3nPs14dwAOInwD+k/DyoYTBf6cDdG0c77geh3LfZfc+wjVign4djg8B/C0Crx78FyF5MyHwHwD0C7rkVa9O4AHMlwAf+/ZPRIQvQj+tE3TtHO+4fhCSj1n7qF4U8FfgeAfALxJ49eE/B8lHXd6r6Pa3sfGoWx716ggeQH0N8M/By5cjnmpSR+jaOt5x/X2QzMIx1OUp/oBjd16mUpHa4e+Do9nlsVvnvDEKAP8UJPvrDYvNLjRXj4VGezU+VDLY2FAP2/Ngq+Y7Dk4/onO+9GpN/eT82OgXN+p9JmO1Jbk5kFgAoJAswHer7PVKjRyfL+D74d9xOPZEPNM0HBNQAGYJvOIOh3+P+QHHUI6OLve133ZtcaVVDfhoCo4jUADqBF496Icd6G06uKWP7Rspsf2bSh1Pge2A6csNdmLuLpu5ds/EGoR+AODPFB48LmpUYhnwyflJZMy/9f72fjb+8BpWLnlf3/GLd1oRwEvYJjjy663VgiDoEMCfUqDRGinvzagFB9exO6talYCOIH9+fj07+li/L3TU2avLXq5uqTpgslNPD64ewnkm4XcezBK4s3eAkaXjxe/bW1mkFQUE6BjWJ3cNSIX0yumFViGR+fzeb/4V2wCpOZ8zVlvGRlmRa8Z8jUZqUcCu00NDX22qO+EbQcp089DxXz27TqwWJp3GZFrujtVNZoLX7RaA+AvB/6330NBRn11q3FMIuoR/Cq6lnATsOMJ5VuA9C0FM5zvG1+lhoLstd1fYgpcVwhfq/Coch2MCnjjsLMDz1YAZKQqcnN/D99PDQPdyuGy45xt9R7f382+Nr47yRXO3yZJZAaQEeLEQmF0WgqN8l82vOyYT5l0Fte69dBi6idy4fpnZo4Rh3W06+Z9Jfzgr8F6FoHMBsOv2ltuxnx5WXpC9CkMnjW9t+90Hu3B3plIBfJgo8BbfoAvqp/uF+XrDkn4/SDgSiGG/5Xr7+UAQbCWAqwhevK4etxDw+e2+wGHYsApytmzrXoTPaZ9HKO9RNY9VBS9GgZ4HTtcrTivaK9O7athFDfdC4RtT1d1eys3z+KUm2+m+5hpWkcN8FMcL1zGWAyPlxvEtNVasHXyXKs4wHwU+36tY//nCDgIfsyy722SDHzS7cnwchcNrUMdV02LlvOSn3lOvHJ27epuN3L3ORjp87sIlgLirWoQsKQb4R0q32XvLnafHN8y1fPtRa5lFuMlyucwGBzsP7W4eHWFFUX5aoQabc1/P1sNvKbdueFPHz1RGt4Q+Lz/O32OwOoGPu04yjJpXZsuqE9S+UomNjdwf6pzYPeSv5earQ78Q+Fgb9Gxl6bWhMy3HLzRDD7Ei1Eaf/7b3gxIRQZQw7j/D7P3wLAIfA3DcDRqnGDnTuWaj9LmD6vBu6neh+zfrXCfCb6peCFQEj5nXdIELPzvRejEXftMpv3C/BJ2b0ZDgxQkd/LVhIeUKgZIFwFTR3QGfm+bDbNi63i/cI/SIT/pqfqttnAJgqVYAzIxhW0IoD5a9lm3K/S/Oew+rbSPDkcM8Ap8437Y1/USn76gWBcwM3W11OT14gndd2Lreq1u3bXQ43AUAdC7a1PhIJCOhEFhZFII0wYdzt6TrD/24FKqFj2F9iRuwXK5sZKWS/CNerGJwFU5bQYywpi6rqsBMwd1WBHf7Cdeu192wi4sdZOFjXc435B6vjkr/UuxGHvh+sb0LF9OiCi4KpBIBzATdbTk3E//ZbYcd4IGEgc/X6bL1u8fvaLuGOOUWgiSrATMhdycfq+xVq4dEMDItfTfcY5jfMNAnFd49oO9Netm0a5wkooCpvLuD4U+J8HeeuSnWwb7hvlOYR9DYc/CBnupmCXFHAT3Wx9urVyf5t3BaFE6B9pub91vtb1bdUPF8aucOzgit98ygJ1KQmC6y59zjRkdV/m2cpoXwcWJk0Fw9hI0hHYdhfebnzTB7YwQtdsXQbSsUnPqEa9lwZYvnNKjVrVCEUTp0dUDboOZ02aZ0yipdNz/qWAAkVHMGi6Z12vtGb/DthQAXYeBihzHnCGzAM/sJ4Akdd7oqFni36+GsWcMp0OJs2IEeNnftlSF0eFOJPX0IfKzgZZbVWnn5a9AEXg66ITtmkbe/EUvgJcK85MdXYn6uQOAzgo5JmN0TChHuDXK7p7Rv5BUFfOiv6R7uDc2hd72hkO7hnsAX1PU6/00axqI9dibwBXQ737Uj8AVo1BXG9Qa5vZiNPAJfUNfr+LdlozbqCDy5Xd9Gno7gk1groJ3rDc2gJ3ZPBF79MJ/Y6XUK9wS+oK43NIKexv1o43qD3E7gye0FCvcGub2YrifwBXW9oQH01O+DwBfQ7bqEe4PcTn16EolEIpFIJBKJRCKRSCQSiUQikUgkEolEIsWu/wQYAFI1RGtTz7nqAAAAAElFTkSuQmCC",bfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACGZJREFUeNrsnV1vFFUYx8/MsqW0YLcIBFqDNSiReMESEoMXJsULb4zycmdiAnyClg9Aai+9wm/Q8gEsBbkkWKMXJAZbTYyRaNwaXkyo0Aos0HY7Pk9nZj17mLez83rOPP9k0mW7nZ05v+f/nJc558AYiUQikUgkEolEIpFIJBKJRCKRSCQSiUQikVKUofoNWJaVyz0YhmGpXG4mxX538ab6DZgEoSu3MwKfd12lAQQCr4brLQJfQtfrkmGocVdCt+sG3iK3lxA8NfIky0s5W1tWXvdj6RR4WxQN2EoO8K2A9zfI8dm43gwIWiOF+7J8wON76yoO3yrpeCjoDWeMfktGbRc/R79Qdcxe1VSPWoVjq0/aT9L1fm5fBejr1LjLJ+Vj4O7KAXwLjiWVn9Cp7HhM+esAv+kD30zR7XdUfyyrNHgH/r8AvwYvX0nB9V7g78N3rqpebsqDd3QXjp1w9CbserFR9xCg/6NDgWkz3AWu3w4/3kv4/ni3P4PjpsoNOh0djyn/CcD/E17WE4Ivpvh5XaBrBd6B/zvAfx1evhETvAj9Fpx7Saey0gq8o+/hOADHQIxGHt+o+wugz+tWSFo+0gLX74Uf4wk4Huv1LwD8c93KSEfHY8r/G+Bfh5efdgnfBa8ldG3BO/CvA/x3nZZ+N+CvwDlua1s+TGM5XbyrcOyQuFeE/htA/0znstF+2grAPwY/vpL4kxU4PgTwdwi8+vAvLK9ZE/MrLbaw3GLwuuP3tarB6rUKO75rs+Y7DdCv6l4meoOfeYSDOWfgOAnHSMS/WoDjEhyz7PRgg8CrBRxBj8ExGvNMs3BMQgAsEPjiO/yiH/BRSOX1gQqr9XTeduPpBlvAamCl5XfmaTjOQwAsE/jiQR93oHfo7P4edmKoyk7uq4aeAuv+2ftr7NLiKptbemlYHqGfAvhzpQePU50LMa145tEUMubf+vxQLxs7sHWz4ealL/940c4AXmo0N9j5n59tBoKgcwB/ugAN1lhlH/d5tYGTHkPmumcKHUHOf7CDTbzd6wsd9e2DdS9XtzXSZ7LLx/o3D+E8U/CdZ/ME7kw0NfJ0vOEx+JFdFhCgY1qfOtoXKaUPXltpB0mUzx//7onYBsjM+ZyxOgo2zvSvpKchG5llAbtOl4a+2VR30jeCxJQeJnT8N+9vF6uFKacxmZW7E3VTmmvn3ABIPgj+b71LQ0ddubf2UhB0Cf8yXEstDdhJpPO8wHsGQULnu8jX6TLQ3Za7K2zBRxXCF+p8HBQaTwh46rDzAM9XA2asLDDzaJTvp8tA93J41HTPN/omDnXM6RyDaxqJ6W6TpbP0qxDgxSAwuwyCCb7L5tcdi5LmXQW17r00Dt3E0V3tJ9o1Zo8SyrrbdMo/l/5wEdbHu0EQHgB23d52O/bTZeUF2SsYwjT2Zsd3n+3C3bmqSBsjRMkCZ/gGXVA/3S/Ni0/mgt4PEo4EYtpvu95+PhAEuxDAiwhevK6KGwR8ebsvcBhWVkHOjtq6F+FzOuGRyitFLeOib4XiZoHKq9eWBxn3aDXK2LsM3G7SvRB89aK620vKzLlrttgR9zXXsIqd5uM4XriOOlNoTyFlLnRtwzrMd6mSTPNx4PO9ih1frxwm8AnLsrtNNvh+syvHJxEcXoM6rloWq6lSntpOr+b1w4PnbGj1IRsK+dztewDx6EgZiqQc4N+qPmcX1n8Mr07MbSz61Dy1VYotTWu1GuvvDx/afW14iJVF6rRCDbbovsYp0rLavmdf6GcGh/dLn5cf568YbJnAJ10nGUbDq7CjKgxqT7XK6kM7pc6J3UP+Wh5/PPATgU+0Qc82mp8M3Gg7fqUlPcSKUNd6tvn+vj9CRhAljPvPMXvrFIvAJwAcNzPEKUbOdK6FOH3uoDq8m/pd6P4tONeJ8FtFD4IigsfCa7nAhd9dar9YlN94yi/dN6FzMywJXpzQwV8bBikXBIUMALOI7g743CyfZmXrer90j9BjPulr+K22cQLAKloAmDnDtoRUHix7Ldu0+0+c9y6rg0N7Yqd5BD75a8d+CZNhf1O0LGDm6G6ry+nBk7zrZOt6r27dweE9chcA0Lls0+AzURQJQWDlEQRZgpdzd0TXn7vVlGrhY1pvcgOW64N7WbUa/REvVjG4CqcjEGOsqcurKjAzcLcVw91+Os/stWztxQ5R4WNdzjfk3hkZjvyl2I08dfNpZxcuoUUVXBbIJAOYKbrbcm4m+bPbDjvFA5GBz9fpUet3j+/ouIYk5QZBmtWAmZK7089V9qrVcyKYKC19N91jmt/d1xMpvXtAP572smnXOGlkAbPw7g6GPy3CP3LjsVgH+6b7sDSPoLHn4AM9080Sks4CeqyPt1evTvFv4bQonALtNzfvl8ZdNrJ70POpnTs4I7Tec4OeSiAxXWTPub/MhAfqOE0L4ePEyKC5eggbUzoOw/rMz5tj9sYIWuyKodtWKDj1Cdey4coWz2lQm1uhCKN06OqAtkHD6bJN61RUum5+FBoAEdRwBotmddr7Rm/wnUGAizBwsUOdvbyXvVc6t7c703Cnq3KBd7sezpo1nAItzobtq7DFpY8G0OGtsvwftWUCH2VZrTt+rr3MkkA3yAglBC8DNMFdOwh8zm6XdTKBL+k95rtvX0YqxUoaJj+2bTBFZsuS45Otr7VP92Vp3GUZNAResUZdqaSz4+NC17qRR+BLWtdrCT7B+pnAUyOPwFOjjsBrW7dr38gj8CWt67UasnWcqf9AOzk+O2fqlu6pVV/SdK8N+CwcqZPrTXIk1fHk9hIFl0luL2e6p8ZdSV2vPPgyzI8j8AVxoA7BZpLbqQdBIpFIJBKJRCKRSCQSiUQikUgkEolEIpFIpMT1nwADAMyDqFmN8AVAAAAAAElFTkSuQmCC",vfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACVRJREFUeNrsnU9sFFUcx99M3VJaSHcFKrQEmogowYQSPHAxKXhTkT9evAnxbAoHPRhNaWK8eADjwWOLxugJqhLjCdt4IUGgmKDR+GcJCkYauqVQoNvt+Pvtzixvp7O7Mzv/3p/fNxlmWtqd1/d539/7M++9YYxEIukjI+kbWpaVyn0Fl2UYhhbgTWL9KEu0AG/DNwh+VUsA3VI+1HOuf4yYl51e0qKOd7k+ozn4YhpuT72RBfARfJvG0Etp3Txt8Hj/Dg3r+xJAf6BVd84DPjq+U7NW/DyAX9IavA1/JZxWaAL+PkB/mHYiRAGP6chqUN8vAvSCCAkRZgQN4LfD6XHFwU8D+EUCvxz+GjitVBT6HYB+R5TEiAYeW/d9Cob8hwD9pkgJEu5hCcDvgtMGxcBfF6FBJzR4G/5GOK1WBPotgD4tWqJEHS/HsNitQMhfgGNGxIQJ+1wcXI/duy2Sg/8V3D4nYsKEfUKG/V2Af1fiLt4NUaEL7Xjb9VgwdzP5HuHiOPyPovTZpQNvw++B007JwF8A6LdFTqDwToIM/A/gYyaulwT6n6JDl8Lxtuvxuf2LcLRL0Ir/FsAXCXy0fftBwZM5AdD/liE/pWk0YYYCfOwTizqql5cFulSOt12Po3mvMfGe3eNw7KeiDcsq4Xjb9XMA/yJcviBY0r6TCbp04G34lwD+s3C5WZAk4ejc79LlI5NQAD4HpzdZ+s/u78PxMYCfkS0PpVzUgBkN8Cfh8pAAIX5GxjyUdjULZPgkwH8OLp9OMcRPSpt/TGIB+LVw+gCOroRvfQ+Od0R8zq68423XTwP8r+HyjYRv/YXM0KV3POf8D+G0I6HbXQHob8meZ6qAxwc4YyyZ6VqvAvh/Zc8zJZYqIwiA/xlcvh3zrT5RAboyjuec/zmrTNyIQz8D9H2q5JVq4LfD6VxMH78XwF9VJa+U2pUCwQD8j+Dy3Yg/+n2VoCsrgH/Zik6XKUflAT8QIfhBFfPIUBj+cTgNO18Xihabmi2Vj9li7bYz3RmDDXS3scG1y2q+kxDijxF4yXT+9uJfX15f6B+/WWT5eX8bUGABeH1zO3v5iUx+yypzpyjr2Qm8H52eOQD/DrHwc/TG4Rhhh3JTBF5s4APw74l6wDGUo6Oz7bV/dv7eUrUaqKMxOI5BASgQePGgH7Wh1+jwpna2vzfDDmxovqUetgOwWjh1bYFNTC9bBIPQDwL8Ce3B4w6VSe/BWgf6KDLmv3V8WwcbenIFy2a803fyj4fVCOAlbBMc++l+uSC4dATgjwnQeA2V92H3lzNw4yJ7i1IhoCPIy3tXs+FnOupCR03eWvRydVX9nSY7s7urfLg+ZxTueThN4PZmUUaajnf/fmVP8qSigAs6hvXRXc23zMOQnjs7Wy0kfn5+zw933W2AxJzPGasmY8Nshxr1jpJGYlGgUqcHhl5uqtvhG0H66eah479/fpW7Whi1G5NJuTtSN8W5lahTAKIvBI9a74Gho766UVxWCFqEfwbSko0DdhThPC3wnoUgos87wdfpQaA7LXdH2IL3K4TvqvP74TgaEfDYYacBnq8GzFBR4PTMIN9PDwLdy+F+wz3f6Bve1sF/awjS1B/S3WYc4VwU8O5CYLZYCIb5Llu97pifMO+oUeveS0ehm8iN62dZZZQwqLtNO/9T6Q+LsF24UwiaF4BK3V51O/bTg8oLsldhaKahLTX3PtyCu1OVSPvE+4kCr/MNukb99HphvlC0fH+/kXAkEMN+1fWV5wONYAsBXETw7nS1OYWAz2/nAodhg6qRs/227t3wOe33COVtouax6G+GcKJA25qzhZzdivbK9JYadmHDvavwDYjqbi9JM+duvvRo5yuPCRMth/kwjnelY4BJ9IoVaRJaXLJ28F2qKMN8GPh8r2L1N7M7CHzEsirdpgr4LrMlx0dROLwGdRyVLJaVJT+1eOnfhVsPWO/Cbdbb5Od+uwEQd/XrkCV6gH8q84C9t3ipeXViruTbj0pLi/e9ZbNZ1tXVfGh3Y18v00XytEINds25nioEf0Hjqp7m2+Pl+jYF/lx+nL/NYAUCH3WdZBh5r8z2q2ZQ2zMZNtAbbId07B7yaZnb132FwEfaoGdL8690VxdD4hO1oEOsCLXYXn+TrK6e4Btmusb9JzCddnoJfFjg+CpOnGJkT+eaCtPnblSHt1K/u7p/U3Y6EX5J9EIgIvjyO9Ud4K7/O1W9CDCBolm4n4fOTV9A8O4JHXzasJByhUDIAmCK6O4GPzfOh9mgdX29cI/QQz7py9dbbWMXAEu0AmCmDNtyhfLGOpTDBt6Y8yXOew+qrb09ocM8Ah/5peYt4CPNfke0KGCm6G6rxenBI7zrgtb1Xt26rX09wRIA0Llok+cjkR+5CoGVRiFIEnwwd/t0/ZGL84Fa+BjW57kBy8XcepbJ+H/Ei1UMrsKpKYgh1tSlVRWYCbjbCuHuesI16wUn7OJiB7/wsS7nG3Lb+/t83xS7kQfP36vtwkW0qIKLAolEADNGd1v2HxP9p1ccdpAHEgQ+X6f7rd897lGThijlFII4qwEzJnfHH6sqq1aPuMH4aek74R7D/LrO5u83wvDuAX1P3MumHePEEQVM4d3dGP6YG/7Oc3PuOrhuuG8W5hE09hzqQE90s4Soo4Aa6+Mrq1dH+W/htCicAl1vbt7V/D+sf13O86mdMzjjar2nBj2WgsRUUWXO/RnmeqCO07QQPk6MbDRXD2FjSMdh2Drz8yZYZWMEJXbFUG0rFJz6hGvZcGWL5zSo8lYorlE6dHWDtkHe7rKNqZRVqm5+1LQA+FDeHiwaV2nvG7XB1xYCXISBix0G7KNhA55VngCeUnGnK73AO10Pe80aToF2z4btbGPXpl/qRoeXhNjTh8BHCt7Pslpn/JzAKwLd8DtmgXMBCLxiYd7njy9F/FyBwKcEHU9Bdk/QItwb5HZPKd/I0wV84F9TPdwbikNveUMh1cM9gdfU9Sq/oYKxcI+dCbyGbue7dgReg0adNq43yO16NvIIvKauNxSEHrZRR+DJ7eo28lQEH8daAeVcr9rbpGP7mwi8+GE+to9XKdwTeE1dbygEPYm/RxnXG+R2Ak9u1yjcG+R2PV1P4DV1vaEA9MT/DgKvodtVCfcGuZ369CQSiUQikUgkEolEIpFIJBKJRCKRSCQSiUSKXP8LMAAgIM/5WinRSgAAAABJRU5ErkJggg==",xfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACQJJREFUeNrsne1vFEUcx2f2egVasFeFBlokTUAi4QVFYuILjaCJLzTKQ3xveW9S8L3B/gX4H1ASE19JayT6SmiiicYn6gOSkIBXH5BIoVcejpbjuv5+d7vH3LK3t3s7ezsz+/smkx7l7jo7n/n+5mFnZhkjkUjZEdchk7Zta5NXzrlN4OWCt3TIKoGXD9/SIL+rBF4+eMxrTvEw/5Da+GTg5xXOcxXAVwl8MuB74EePotlb0SXM6wge89unqNuXaTiXLPy18COvWLaWAXyFwCcf7tcrNoRb0q0ctQPvwC8o1NbfB/D3CHx3wK+DHwOKZOeGTr153cHjZM5mlv5sHrbtCzqWoZbgHfgbFWjrFwD8XQLfXfBr4MfTKV4DDuGu6lp+PbpmHAp9BeBj27oupSzcZhqrh+mtEqQNKbgeZ+gWCXx6QtflUriO2xBxHhD49MJ9FcL9HXg51EXXa+92ExyPug5paxfBV6DC/Ufg03f9XXA9ht0nuuT2GwaYxQjHo/6CNNYF1yP4Pwm8WuEeZ/HWJAy9BBHmNoFXJ9xXINxju7sjYfBXDDGKMY5HXYa0O8FwvwLpbwKvnutvgutvOj38JNx+Vfexu6mOd12/Q7Lr3XV0v5pUUEaBB0deBNe/Di/Xyu48mjB2N9nxqN8hvSjR9ej4H0wrJBPBfwPpNUngEXoZ0iUCr364vwXhHidZnpX0lRfgO+8TeD30HaTnJLgeHX/exALihoLHFTofsXhLsxD6H+D290wsH1Mdj/oa0pEYlRvBf2Fq4ZjseFyF+0mMr8D7/G/rupgys44HYNcBPvbGn+/wK740FbrpoR71OaQDHX72Y5MLhhsOHkM+TuNG3XXzG7j9VZPLxXTHo2YgvRvxM6cYSXvHj9rRtOhsyiQZAH86AvhMuJ1nBPyhUsWenluqMkxLleYTSwbynI0N5Nj+jbWWby+073MEXmedWcQFmO9AOgRpNOSnEPrpWt/gyGCRwOsFHEFPQNovoWM4CRVgjsCr7/CTrYBjKMeQXuhtvuzivVXmNgMtNAXpOFSAEoFXD/oxB3qTxrf1soPDeXZoS/vzkqAfwGb+rbDT8w/Y7MJjZxUi9MMAfzbz4PGMWegIqQAde+Lj4q8+2LWWTWxfwwp5//x9eGWlEQH8VCyvsuO/3K9VBI+OAvwpBTqssco+Lnj383ZqFcADHUGe2tfXEqirw9/eYy9v6mHHtgfvwUDwR38s16KBCvDFk7zjHKgoC3zjV06GUoGOYR2hhwnpg2eXapXjwisbQr3/wFd3vX2ArsF3YD/GKw542YcHYcY4Vgghs0m26ZGhuy6ujdsAJIb0dsLm4vxL671R5JTTmUwUuGMuLrs/luSpUW4FkF8JHvXeI0NHfXqt8lgl6BD+NOSlkARsAXgi6tZxYVy4GBk66W3Tw8rtubvCHnxYIfzpF/rFDiNOCh2TBDxx2GmAF5sBK1YUOLO4XxynR4Hu5/Cw4b5Bus9iJ3Y17deYgDyNxnS3lUQ4VwW8txJYHVaCE+KQrV3vPSjMu/IZswcKRwLOvH4tELD6LGFUd1tO+acyHFLhOS9uJWhfAepte8PtE9ujb4f3g+xXGdppYkfT3x7vwN2pSqUH/ISJAu+IHbpWkzNBYd4zHg/8fZBwJhDDfsP19fsDQbCVeqaOqk92wnzl3Eoglrf7AqdhoyrI2WF79174gg76hPKcqmWs+iO93CiQe+psaZAJt1bDzL1HgdtJuPdUvjFV3e0nbdbclatsr/ta6FjFDvNxHO/JxxjT49l4Wji+ocqqvUccUskM83Hgi6OKDZ8t7SHwkmXXh0118P1WR46XUTn8JnVcVW2mzSLNLCyvZt/fWGbDD26x4Tbvu3wNIO4bzUKRZAP8M/ll9v7Dn9o3J9Y6Fn5pnt6ysnCRhUKB9fe3n9rdOjLMsiJ9eqGczbuv50rRn/2zfmhL2/cMjmyL/L3iPH+OsxKBl90mcV70K+ywage1N59nY8NPRvpOHB6Kebnz5sDPBF5qh56tlt8aONdw/FI18hQrQq30tn6KSX+IiOCVZ95/FvPJHp2LR+DjAOec157J7iznmosz5g5qwztp3z3Dvzknnwi/qnolUBE8Fl7VBe75v9ONF/PRTxdtFe7LMLgZiQjeu6BDzBtWUqESKFkBLBXdHfC+GTHMRm3rW4V7hB7zTl+x1W4bpwLYqlUAK2XYtieUB6u+l23K/Seue4+qncNDscM8Ap+81PTU8Ml2n1EtClgputvucHnwpOi6qG2937Bu58hQtAwAdCHaFMVIFEaeSmCnUQm6CT6au0O63mezQ6AwrJeFCcuHg5tZPh/+Fi82MbgLp6kixthTl1ZTYHXB3XYMd7fScVbfy9bY7BAWPrblYkdu9+hI6D+Kw0jcgdM0hJO0qUKIAl2JAFaC7radi5H/7XWHHRaBRIEvtulh23efv9GUB5lyK0GSzYCVkLuTj1X1XatHvWDC9PTdcI9hflNfb6jw7gP9QNLbpl3jJBEFLOXdHQx/ygt/77k73ja4ZbhvF+YRNI4cWkDv6mEJsqOAGfvjzyyOM88RZbgsCpdAt1qbd7H4DxvdNOh7186dnPH03lODnkhFYqaovuZ+mnluqOMyLYSPCyOD1uohbAzpOA3bYn3eLKsfjGDEqRimHYWCS59wLxvubPFdBlU7CsUzS4euDugbFJ0h25RJRWXq4UdtK0AIFZ3JohmTzr4xG3xzJcBNGLjZYcxJgR145h53ZuBJV9kC7w49nD1ruATauxq2L8fmF94YQIdXlTjTh8BLBR9mW607f07gDYHOw85Z4FoAAm9YmA/59lXJ9xUIfErQ8UeU0xMyEe45ud1XxnfysgI+8sdMD/fccOgdHyhkergn8Bl1vckPHGQs3m1nAp9Bt4tDOwKfgU5dZlzPye3Z7OQR+Iy6nhsIPW6njsCT283t5JkIPom9Asa5nhsGPbFrIvDqh/nEvt6kcE/gM+p6bhD0blyPMa7n5HYCT27PULjn5PZsup7AZ9T13ADoXb8OAp9Bt5sS7jm5ncb0JBKJRCKRSCQSiUQikUgkEolEIpFIJBKJRJKu/wUYAE/SbDaNtIpTAAAAAElFTkSuQmCC",wfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACNpJREFUeNrsnWtvVEUYx+ecZUtpwW65KS1iI0hEX1BCTHyjAaLxhQrULwB8ANPyAQz2E+B7jS1fAGrE+Epa4xsSI1QTITFilhhQLPTCZaFsd4/Ps+ecZXY41z23OXOefzLuWnbPzs5v/s9czsxsiZEKqRIVAYEnEXgSgScReBKBJxF4Uh6l5SWjhmFIn1dN0wwCHz94fNAlzmITwJPjE4JfkjTPBkBvUKhPDjw6fp2EWVsD8E0Cnyz89ZLlG9ug1TyF+byCL8NDj0RZegrQ69SrT6d3v1GivD/MW5jPJXgLfj88rM/we9jDNgzxj2gcn27vfosE4BcB/BqBTxf+ZnjYkMH34N1+N6/ll2fwvfDwYoaOXwDwNQKfDfyXrbY+bcfjuL2a57Jbx/KtB5BeSLEit9v2nJdbvh1vuf4NroefBnjszF3L2xStao5HrUDamSL4xbxDVwX8HUivWN9FSxi6/XmMwGfdVsE4GsI9un44Ydcj+FvweU8IvDz6C9LuBPsuttv/VaS81AAPLnwMrr9nuV5LyO3/wefcI/Dy6U9IexJ0/N8KlZU64MGNd8D1eMNka8zwEfp9uP4NAi+vrkH6IAHHzytWTmqBB1deA9cfgacDMcJ/DOkqgZdfVyB9FBN4DPPXoUKtEnj5he48ysxbtloM4GcVLCP1wFtDO2yT34/YyUPoV+B6iwQ+P/oB0lgM4GcVLR81wYNLF8D1l+HpexHA38DOIoHPn2Y513ej7xQum/zfj/eM1YbxJTy81cVbccLmXZXLRmXHo76HdKSL932teLmo7XjL9Tiu3xXyba+C4+8zUq7BfwqpHiJ9RaWmBvgKpCUjuEaKUC5aQeCfXa4bE/MrDYZppd55cMVAWWOjAyV2aOu6OQjxhwl83nV+aRT+ewLScUhBnYyzfucgzbBPBqsEPl/AEfQ4pEMRrzQDaRIqwDyBl9/hZ92AQyhvhfRKT+fXrj5qMrsZcNE0pNNQAZYJvHzQJyzoHTq5q4cdGyqz4zvKvpeAfgCb+afOzt18yubuPrcJFqGPAfy5woPHk6ikOALk/NIUMub/9Pm+Xja+ez2rlJ3z98WN1XYEcFK11mSnf3vcqgiCTgH8aQk6rJHKPurxYRqeUGEdRSYFdAR59cgmdub1XlfoqB8X1pxc3dZIn84uvN3fSsJ1puAzT2YJ3DoVRMvS8eL7WzUgtSggQMewPnWwL1BIH7y40q4kQV5/+KeHYh8gNedzxuoo2CgHKsZ9YKCWWhQw2/TQ0FtddSt8I0gM6X5Cx8++s1FsFqaszmRa7o7VTUmeFGlXgPgrwbPee2joqG9u15+rBF3CvwB5qSQBO45wnhV4x0oQ0/XO8m16GOh2z90W9uCDCuELbT5OCk3EBDxx2FmA55sBPVIUOL90iB+nh4Hu5PCg4Z7v9J3Z18v/aRzyNBLR3XoS4VwW8GIl0LusBGf4IZvbcCxImLfl1bt30gQME3EoaAcCZs4ShnW3bpV/JuNhGU6DtiuBfwUw2/a223GcHlZOkJ0qg5/G93R89sku3J2pZDoGPEgUOMF36LzG6W5hfrluBP67l3AmEMN+2/Xm/QEv2FIAlxG8mK+SXQn48raf4DRsWHk5O2jvXoTP6ZhDKC/JWsYyH/zPR4HSlovLg4y7tRpk7j0M3G7CvVD5RmV1t5Nys9iy1mAH7OdcxypymI/ieCEfozkwUm4c31a9aeznh1Rxhvko8PlRxaZvV/YT+JhlmMMmE3y/3pXj46gcTpM6thoGq+SlPFVfV9/SzwtP2NDTRTbk87o/bgPEgyNFKJJigH+t/IR9tnbFvznRN7DgS/PyLb0IX7JSqbD+fv+p3Z3DQ6woyk8vVGM37efzy+FPFN24fYfvawaHd4W+Lj/PX9LYMoGPu03ijgkPc1MlKNSecpmNDm0OdU0cHvJ5efDxwK8EPtYOPWvWjg5cajt+pRF6ihWh1ns2uP57f4CIIEqY95/DfLJnp2AS+CjA8ReecImRtZxrPsqY26sN76Z9F4Z/81Y+EX5D9kogI/jWz3XawIV/O9d+EmIBhV+4r8HgZjgkeHFBB583rKRcJZCyAugyutvjdTN8mA3b1ruFe4Qe8U5f1W23jVUBDNkqgJ4xbEMI5d4y97JN2/+L697Dau/Q9shhHoFPXu84vXzS7z2yRQE9Q3cbXS4PnuRdF7atdxrW7R3eHi4DAJ2LNlU+EgWRUAmMLCpBmuDDuTug60/9UgvVw8ewXuMmLNcGX2LlcvBbvNjE4C6cjooYYU9dVk2BnoK7jQjudtNpZu5la292CAof23K+I/fmyHDgD8Vh5NjlR51DuJg2VXBRIJUIoCfobsP6MvFf3XTYGA8kDHy+TQ/avjt8Rkce4pRdCZJsBvSE3J18rDJ3rZ4SwQTp6dvhHsP8tj7/XyTH8O4A/XDS26Zt4yQRBXTp3e0Nf1qEf+DSA7ENdg33fmEeQePIwQV6qoclxB0F1Ngfb+5eneL/hMuicAm029q836u32Mi2Qce7dvbkjNB7zwx6IhWJqSJzzf0FJtxQx2VaCB8XRnqt1UPYGNJxGtZlfd4cMw9GUOJUDNWOQsGlT7iXDXe2OC6Dah2FIszSoas9+gZVa8g2rVJRqXr4kW8FCKCqNVk0o9LZN2qD76wEuAkDNzuMWsmzA8/s484UPOmqWODtoYe1Zw2XQIurYftK7ObdDwfQ4Q0pzvQh8LGCD7Kt1p4/J/CKQNeCzlmo8BPhBF4I8wFf3oz5vgKBzwg6PoQ5PaEQ4V4jtztK+U5eUcCHfpvq4V71HyPq+kAh1cM9gS+o6zWFoTMW7bYzgS+g2/mhHYEvQKeuMK7XyO3F7OQR+IK6XlMQetROHYEnt6vbyVMRfBJ7BZRzvaYY9MS+E4GXP8wndnmVwj2BL6jrNYWgp/F9lHG9Rm4n8OT2AoV7jdxeTNcT+IK6XlMAeurfg8AX0O2qhHuN3E5jelKBVKIiIPAkAk8i8CQCTyLwJAJPIvAkAk8i8CQCTyLwJAJPIvCklPS/AAMAlvlZg3Y9pJwAAAAASUVORK5CYII=",Ife="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACFZJREFUeNrsnU1vG0UYx2fXcWiThtiFBJqgYgmoQAg1VTn0gtQiISEQtEXi3PQTpP0AUHLhWr5B0jtKg+iJQwlwASFaUwRIiAoHlBbom9M0bhLHXp4nu2vG0931jvd99vlLU7YhXq/n9/yfefHMlDESiUQikUgkEolEIpFIJBKJRCKRSCQSiUQiRSgtiw9tGAb/7El9BnwIQ9M0Ah8zfN16fi1B6O2s1t9AhrMVVn4hoQDG997OcqrPLHhwG5je0BKAj9Db+P4EPnnXa+T2HIEH1zXB9bvhUo8Rfgvfl8Anry0oIzGC31RhOKcK+IGYXN+CskHg05Hu25DuH8JlOeJOHrbtjSwP4VRzPOo+lKcidjyCX1OkvtQAb7m+AZd7I4R/R4VOnWqOR/0LZYJFM5uHbq8rVFfqgAc3boLrH8DlWATg78L91wh8enUTyv4IwP+tWD2pBR5ceRdcvx6y69fhvv8Q+PRrBcqzIYK/qmAdqQce3HkdXH8ELh8PAT5O1vxF4LOjKpS3QgBfhUDaIvDZ0XXrs+0OeJ9fFK0fNcGDSzcg3V+ByzcDuP47uE+dwGdPX0N5PwD4LxSuG3XBg1sfguuxR36sD/g/wevvEPjs6lMoJ/oAv6B4vagNHidewPW/w+WrEvBX4HXXCHz2NQflDYnf/zgHdZLddfUyAtcvwX9e8fGrf4LbDzGSMuBPQWn5KB/mpU60vHzQO5vtP67db1Wqqy222uxeEj9a1NjUaIEdfXKgrPLYPT/gF+5NwZ+nrJ59xeercLr3ApRF9l65RuCzBRxBz0A5GvBOi1BmIQCqBD79Dj/vBhxS+U5KLw12f+zaepthE4DFRfNQzkIA1Al8+qCfsaB3aXr/IDs+UWQn9hV73qIObf/izSa7sLzFlm4/sksKoZ8E+Eu5B4/71FOxP3zhHo7Vp/kfffTSLjbz3GOsVHR+vk+ub3YygJNqjTY7e+3hTiAIOg3w51MwUglU93rQwMEdq9ZBBamAjiCvvj7Czr24yxU66qtb206u7qgypLOLR4Z3inCfOXjP6SSBW7uEtSQdL77ePKoiriwgQMe0Pnd4yFdKL19a7QSJn98/9s0DsQ8Qm/M5Y3VVbJCt2nrIz6jFlgXMNl0a+k5X3UrfCBJTei+h4798bY/YLMxZncm43B2qm/QIn9sOgPCD4P/euzR01Gc3mo8EQZ/wL8KzlKKAHUY6Twq8YxCEdL/zfJsuA93uudvCHrxfIXyhzcdJoTMhAY8cdhLg+WZAD5QFFu4d5cfpMtCdHO433fOdvnMwYuA0A89UCeju2A9yihO8GAR6n0Fwjh+yuQ3H/KR5W169eyedgWEiDgXtRMDMWUJZd+ss3pM8UgHeKQh6B4DZtnfcjuN0WTlBdgqGXpp5vuu9p/twd6JKA3iZLHCK79B5jdPd0ny9afj+uZdwJhDTfsf15vcDXrBTATyN4MXnKthBwNe3fYHTsLLycrbf3r0In9Nxh1ReSGsdpxW8mAUKT1yqlxn31aqfuXcZuP2keyH4ptLqbidlZs1do8U6S6K4jlXgNB/E8cJzTGXASJlxfEfNtnGQH1KFmeaDwOdHFSOfrx4k8CHLMIdNJvhhvS/HhxEcTpM6tloGK2WlPvOwvJp9f2uDTWzd3Tkgx0u/3QCIhyt5qJJ8gH+huME+2L7SuznRdzP/S/OyLT0PH7JUKrHh4d5Tu89MTrC8KDu9UI0t29fVekv69XvG9/X8nfLkfun78vP8BS07R6JlBvyAptWcKtuvekEdLBbZ1MReqXvi8JB/lrV3Rn8k8KF26Fm78e7o5Y7jV1vSU6wItTnofkDGsI+MIEqY91/C57Sel8AHBY7HleISI2s5VzXImNurDe+nfReGf1XrORF+K+1BkEbwWHktG7jw/y50LpblzyRyS/cNGNxMSoIXF3Twz4ZBygVBKgNAT6O7PX5vkU+zsm29W7pH6AG/6au57baxAsBIWwDoCcM2hFTuLXMv27z9V1z3LqsDE+OB0zwCn/21698rmO31mrRlAT1Bdxt9Lg+e5V0n29Y7DesOTI7LPQBA57JNjc9EfiQEgZFEEMQJXs7dPl1/+oeGVA8f03qDm7DcLj/NikX/X/FiE4O7cLoCMcCeuqSaAj0GdxsB3O2ms8w6P97e7OAXPrblfEfu5cqk7zfFYeTJb9e7h3AhbargskAsGUCP0N2G9WHCv7vpsJM8EBn4fJvut313eI+uZwhTdhBE2QzoEbk7+lxl7lo9LYLx09O30z2m+bGhQV/p3QH6sai3TdvGiSIL6Kl3tzf8eRH+octrYhvsmu57pXkEjSMHF+ixHpYQdhZQY3+8uXt1jv8RLovCJdBua/N+rq2wyljZ8Vs7e3JG6L0nBj2SQGKqyFxzf5EJX6jjMi2EjwsjvdbqIWxM6TgN67I+b4mZByMocSqGakeh4NIn3MuGO1scl0HtHIUizNKhqz36BjVryDavUlWpevhRzwDwoZo1WbSo0tk3aoPvDgLchIGbHaas4tmBZ/ZxZwqedJUv8PbQw9qzhkugxdWwQwW2fPvtUXR4KxVn+hD4UMH72VZrqPKPBsc5gZNm6BoZIYfgZYCGeGoHgU/Y7bJOJvA5/YzJntsXk3Kxk4bJz21rLCOrZcnx4bbXyqf7vHTu4gwaAp+xTl2upLLjg0JXupNH4HPa1isJPsT2mcBTJ4/AU6eOwCvbtivfySPwOW3rlZqytZyp/kQ7OT4+Z6qW7qlXn9N0rwz4OBypkut1ciS18eT2HAWXTm7PZ7qnzl1OXZ958HlYH0fgU+JAFYJNJ7fTCIJEIpFIJBKJRCKRSCQSiUQikUgkEolEIpFIoes/AQYApGLE962DTScAAAAASUVORK5CYII=",Cfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACBpJREFUeNrsnV1vFFUYx8+Zdgu0kG7REmkNaaKgxAtK8IIbEzDeGKOAN17S3nll4QMY7CfAb9D21ou2Bq5r1Wg0iq4YYkJi3JoAiSC01K6F7XY8z87MevYwb2dnZmf2Oc8/GbpsZ2fnzO/5P+dlzpkyRiKRSCQSiUQikUgkEolEIpFIJBKJRCKRSKQMxXu9ALZt51IGzrlN4M0Dbwvw5PicwXe9HL3udhTg83A9gTfT9T2f5tGA76brMbidwBvqdmzgMy8PFrejAt8N1xN4Mx2PJs1jrOOtDMvUIMcXF3zJLVPa5QLgTwl8ceHvET/6XeenKYD+BNO1wgYegA+n7Hpw+boAv0vgiw0fwA+mWLYtAX0D23XCCB5S/ZGU0j24fU2A38F2nfrRRbKAJOBDfXwwhcB+iBE6SsdLjbyTKbj+BrZGHVrHu65/IuBvipfjCQ5zFyt0tOBd/SG24wmy2jeIrw1e8MKtNeH6v8TLVzr4+G3x+S0C37uqiO10B66vIL8uuMEL1z4WroeU/7pOg05sGwS+97Uitrc19v8e0104Y8ELiH8L198UL9+KsfuvYvvTADMwbkIhBfjD4se1GLt+KALlRxOuSb8R0c35PQH/K/Hyg5DdvhXbT8wQ9ZtS0M/u1BdG9/CPKusNtl5vv61eLnH2eMe+deXVvbYp1wN3ql98NCn+vSi282Kb0OjKLYhtmb0/UiXwvQUcQM+I7UzCIy2LbVYEQIXAF9/hV4OAn3m+n00O97HyQHuxq1u7rLLRaG4BmhfbZREA6wS+eNAvudDbNHVkgJ0bK7Hzh0uRh4C6f/lenS2sPWWrD565GwvQLwj4q8aDhynNhRjsWHw0B4zltz45vpfNvLSn2XDz06e/P2llAD9Va7vs8s1/m4GgaFrAny9AFzXRtU96v5rD7FZ3TnshoAPIn988wEQLPRA66Mv7O36ubmli0GJLp4eam3KcOfGdU3kCd2cU8zwdr37edvvNuUCHtD53ajBWSh+5vtEKkjj7n/36H7UN0DXnS8biyviEnZfj/QKpO1nAqdO1oTeb6m76BpCQ0qMEjv/ijf1qtTDnNia75e5U3WRleN5eAKQfBP+33rWhgz6/W38mCDqEvyTOpZwF7DTSeV7gfYMgpeNdlet0Hehey90TtODjCuArdT4MCl1KCXjmsPMAL1cDVqIssPjojNxP14Hu5/C46V5u9F0RPQZJM+KcJhK622LZLP0qBHg1CKwOg+CK3GUL6o7FSfOewlr3frokuonQFfQSAXNGCXXdbbFsF3kWErxfEEQHgFO3t9wO/XRd+UH2C4Yozbzc9t1THbg7VxUBvE4WuCg36ML66UFpXr0zF/Z+mGAkENJ+y/XO/YEw2IUAXkTw6nn1eUEgX2/vBQzD6irM2XFb9yp8Sed8UnlfUa9xUcGrWaDvuevrI0y6tRpn7F0HbifpXgm+yaK62089MxGj1mguiWpKalglTvNJHK+cx2QPGKlnHN9Sfdc+IXep0kzzSeDLvYoD1zZOEPiUZTvdJgf8kNWR49MIDr9BHU8Nm5V75XoaMefuh/vbbOzpQzYWsd/tuwLiqQkTLokZ4I+WttnHO9ETaOvWPhZ/al5vyzKhkOVymQ0NRQ/tvjg+xkxR77RCOVvzXsMUaV3tP3Q4cp+R8SPax5XH+fs4WyfwaddJnFf9LnZcRUEdKJXY5NhBrWNC91A+l813h38h8Kk26Nlu7b3hlZbjNxraQ6wAtT6wL/D3QzEygipl3H8VztM9XwKfFDg8Xw6mGLnTuSpJ+txhdXgn9bvS/au45wnwG0UPgiKCh4vX8IArv1tovdCYQBGV7muiczOuCV6d0CGfGwSpFASFDACriO4O2W9ZTrO6dX1QugfoCe/0VYNW27gBYBctAKycYdtKKg+Xs5Zt3vsvzHvX1bGxQ4nTPACf/W1bfms26jNFywJWju62O5wePCu7Treu9+vWHRs/pHcCArqUbapyJoojJQjsPIKgm+D13B3T9dM3alotfEjrNWnAcmfkBVYqxb/FC1UMrMJpC8QEa+ryqgqsLrjbTuDuIF1mzlq21mKHuPChLpcbcq9NxH8GInQjL3y31d6FS2lRhZQFupIBrAzdbbuFSf/ojsMuyEB04Mt1etz63ec72s4hTXlBkGU1YGXk7uxzlbNqdVoFE6el76V7SPOjgwOx0rsP9LNZL5v2jJNFFrAK7+5w+PMq/JMrm2odHJjuo9I8gIaeQwD0rj4sIe0sgGN9vLN6dU5+C6ZFwRTooLl5t6p32MToiO9dO29wRmm95wY9k0BiWOTMuV9iyg11mKYF8GFiZNhcPYANKR2GYQPm560y58EIKJ6Kge1RKDD1CdaywcoW32lQzUehKKN04OqQtkHV7bLNY7pUWB9+FBkAMVR1B4uWMT37Bjf49iCARRiw2GHS3UIb8Mx73BnCJ12ZBd7rerhr1mAKtDobdrCPrT14Zxgc3jDhAcamgY+zrNbG9vfljAYv/d3ZOP3lBoFHluZj7r6L6W/IGgveXW6t8/QEI9I9J7f7Cn0jzxTw2h/Dnu45cugdP1AIe7on8Ia6niOGzliy284E3kC3y107Am9Ao84Y13Nyu5mNPAJvqOs5QuhJG3UEntyOt5GHEXwWawXQuZ4jg55ZmQh88dN8ZofHlO4JvKGu54igd6M8aFzPye0EntxuULrn5HYzXU/gDXU9RwC96+Ug8Aa6HUu65+R26tOTSCQSiUQikUgkEolEIpFIJBKJRCKRSCQSKXX9J8AACQLZIqSxzDsAAAAASUVORK5CYII=",Afe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACNNJREFUeNrsXc9zFEUU7p24ERKo7KKgJBS1VSCS4kCQixc1cLUQsMoqb8BfEDh4tDB/AXrxmnD1EGLBzSoMZalUqRhRC7XKclMo8iOQXUOWkM3u+F5mZu0dZ3and35197yvqmFYdnt6+3vf6/d6unsZIxAI2UFO5saZpil9G/2ansvJ3exnpLZK6DyVySfiNfdMHmjK3kDpiQfVg+hNlYiX3s2rpHh0m32KtHVdhUaqQnwDSl4RtTeJ+GiDPFOB9q6pMh6ponhEHUq/5MPROhEfveqbkqv+KQaiRHx8rnSTpG37R6WOVIp4UNSaPaEjW7tXVQnqVFU8ogZlm2RteqJaJ6pI/CqzZvJkyevroPanRHwyQR4qrCBJkx4qKB4lFY+oQtkuQTuaYIjLRHxyqq+D6h/DZTHlptxTVDjKKh5RgfJCym1YIuKTV/0yqB5n8wZTasJ9TC+J+PRc7f6U7r2ocscpTTwo7i6ofh9cbk741stw7woRny7uQnk54XveVr3TdCD+DyijLLkndyugdiJektTuPlzuSeiWv2ogFi0Uj/gRyoGE7vULES+P6h+D6nHqdCTmW91SOYXTUfGIb6HsTcCzMCJeLtXfBtXjk7u4Ht4swD3uE/Fy4kso78RU9086dZRuxN+y/x6IuN6HoPYbRLy87v4JuPuv4PJYDJ6EEfFy42so70ZY34pdJxEvueoXQfXX4fJoRFVehzprRLwauBahu/9Exw7SknhQ6E1QPU6tvhKyqhtQ1z0iXi18BuX1kHXM6No5OY2Jx42W6PJ39fjxP0Htb+jaNzorHnEZyns9fvZjnTtGd8UPMWtSR3QaF1fXjILiq4ygLPlTpjguUM+pT3ypB+JLuveL7mM8pnZlIHKuUjfH56sNhqVab9/GPpTPsbGhPjb+/EZ3zOJntO8Xrb/dzNIY/HkKygkogVS8rT9XfrRmfoQGwN4ulol4tQhHoiegjIesaRbKJBjAPBEvv8Iv+BGOrhxdeqG//WuXV5rMGQZ8MA3lHBhAhYiXj/SzNultOL27nx0fzrMTO7uflgZxAJv9u84uLqyxucV1rxTvJJA/l3ni8VgSKU5xnFmaQo75lz4Y3cQm9jzLCnnv9n34+9OWB/BCudZk524+2TAEF84A+dMSZCuh+t4Iazh43Kh9Lo0UpCOR3x/dys7v3+RLOuLag3UvVbdQGjDYpVcHN4qrnim45+k0CbePeM2lqXj35007hUqFdHTrU4e7r7pCl168Um0ZSZD3H/nisTsGSEz5nLByrlTVTEvxXoaUjBewxnRh0jdCddt9I5Ho0rsBFf/5a1vcw8KUHUwmpe5I1WTE2G7HAKI3gv+id2HSEZ/eqf/PCHok/xK0pRAH2VG487SI9zSCiOq7wI/pIqQ7kbsDjOCDAsl3jfk4KXQ2IsJjJzsN4vlhwAjlBWaWxvk8XYR0L4UHdfd80Hd+tO1wzQloUymkuo043LksxLuNwOjRCM7zKZtfOhbEzTvoFN174Sykifa8/oYjYNYsoai6Dbv/U8mH0yLeywi6G4A1trfUjnm6KLxI9jKGbpjY23bv0z2oO1XIQLyIFzjFB3Sd8nQ/N1+pm4Ff7wScCUS331K99XygE9lSEC4j8e529TlGwPe3c4HTsKLopOyg0b2bfA7HPVx5n6x9LCvxbi/Q99yVSpFxj1aDzL2LkNuLu3cZ35is6vaCMgsxag12yLnmAqvQbj6M4l3tGFNASMoovoV60zzIp1RRuvkw5PNZxdbL1YNEfMQwuZWypUGjJ8VHYRxekzoOGqY0J2rr4+rD4JsHq2x47REb7vK+3+4AiYdLWeiSbBD/Un6Vvb/e/VyDurGZBVyapzyMLHzJQqHABge7T+3uGhlmWYE6UWiOLTjX85WG8Oe37NjZ9T3Fkd3C9fLz/H05ViHiox6TuLXuIg9VgpLan8+zsWGx3zjC9JBvy/KxoR+I+EgDetasvTV0taX4akN4ihVJrff7H3I9GMAjuOGa959j1s+Hm0R8BITjjw/hEiN7Odd8mJy70xjey/juSv/m7XYi+Q3ZjUBG4rHzGg7hrv+72LpYED9Z1M/d1yC5GREk3r2gg28bGilnBFIagCGjuju8b5Z3s6JjvZ+7R9JDPukr++22sQ3AlM0AjJTJNl2uvDOsvWzTzj9x3bso9g3vCO3mkfDJW6v8S5PdPiObFzBSVLfZ4/LgSV51omO9V1q3b2SHWAOAdM7blHlPFAQuIzDTMIIkiRdTd0DVn/muJhTho1uvcROW68UXWT4f/BEvDjG4C6fNEEPsqUtrKDASULcZQt1+OMesvWytzQ5BycexnA/kDpSCH3GPaeTJ6yvtKVxEmyo4L5CIBzBiVLdpf5noa7cUdpInRIR8fkwPOr573KOtDVHCMYI4hwEjJnXH76usXatn3MQEifQdd49ufvtA998wQvfuQfqRuLdNO8KJwwsY0qu7M/nTbvIPXV12j8G+7r6bm0eiMXPwIT3RwxKi9gJ67I+3dq9O8S/hsihcAu23Nu/n8l+stL3o+dTOmZxxRe+pkR6LITFdYK25v8RcD9RxmRaSjwsjO63VQ7LRpeM0rM/6vDlmHYygxakYuh2FgkufcC8b7mzxXAa1cRSKa5YOVd0hNijbKdu0Tl2l6+FHXQ0gAMr2ZNGsTmff6E18uxHgJgzc7DBml44BPLOeAF7U8aSrbBHvpB72njVcAu1eDTvQxxYW3xxChTekONOHiI+U+CDbap35c+1hZIT0HAkhg8SLEBrhqR1EfMpqF1UyEZ/R75juuX0JIRM7aZj43HaOKbJalhQf7XitvbvPSnCXpNEQ8YoFdZmCzooPS7rWQR4Rn9GxXkviIxyfiXgK8oh4CuqIeG3Hdu2DPCI+o2O9VlO2tjL1n2gnxSenTN3cPUX1GXX32hCfhCJ1Ur1BiqQxntSeIeMySO3ZdPcU3GVU9coTn4X1cUS8JArUwdgMUjtlEAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCgUCIHP8KMAADkjHSt0v8dQAAAABJRU5ErkJggg==",Sfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACL9JREFUeNrsXU2PFEUYru5hFtiF7I4KkVnENQhCjGEIFy8m4NUo4MErcDAeF36Awf0F+A92OXph18jNBNcQowbEFWNQE8JsVBD52FlWZhdmZtt6p7vGmqJ7pmv6q7rqfZLScZ3p7unnfZ73reqqGkIQCIQ5sPJ64Y7jqHDtjmXl8xZuwMCNTj4Sbx7x63m9cUi8gTafa+LpTXe8PJ/V3W/lWTF5Vzzk10JG524i8dkBVLcxi9xOHWcdic/W7uGljWo3S/FM9UUk3jzimyl/jxZ1mhYSn73dNz27T+u7NDQQixaKZ2RsSulcT5F4dbBKWyklm19F4lXoyLuDOKB4K4Xvs8YeDkGPAolXR/XPJXyOOos3VLwCovfUvppCt67uqR2tXoGqnnhV/SPiDt8mNYRbIzkfn9fR6pnqV2jbntA5Huli89oQz6keVLkzodM81MXmdSvuAPeJO25fTID0pi5q1414ZvdA0ksxH/uBTmrXinjB7vfEfPi/NXNG7awemL9N4n1Gv+R14xwkXm3AWPpd2l6O6XiLutm8dsRzdv8nba/FdNi7GopDS8UD87do2xzDsZa9noKDxOdD9U9isvvrJOfTqE1SPFP9Tdr2RzzOz5reH62J/5W2DyL23e/k/fGrUcR7dv/Ay8+DDub8oWNu113xDFdo2xfB5pH4HKoe5txfoy8/GuDjj2m7qmNRZ4ri/yHucOtuyc99o/l90Z54sOobtL0h+bnvdS3qOo6oe2RTu4cc/5nkxyq6E6+74gG/EbkJGl/qXNQZQ7xX5F2mLz8M+ZF5nYs6Y6zes/sD9F/fhnx7mRJfIwgtiId2y+mPOVPuiW3Cl/Ss++swNm8K8ZYpX/TqUvPYStOZXVhukeVGd+02WrRIZbRADr+w4RUaJFUkPu+4sFSh/zxB2zHaJkJ+aoG287TNkfdLVSQ+X4QD0ZO0HY54JMj5UzQAFpB49RV+LohwauVtSx8b6v7a1cfrBFIAtADM0HaGBkANiVeP9NMe6V04uWuIHC0XybEd/ddY1Gjun7vTIOcXn5L5+89scwOkH6fkzxtPPHSTlBjsuLA0DRzzf/pk/yYyuXsjGSv6X9+nN590HMAP1fo6OXN9tR0IAk5R8mdU6KJGufdRu3MwLGZ5M1uVIB2I/PHtreTsvk2BpLf7dveafqruYGLYJrNvjrSbcJxpes6TGY9JRN7RM6rixc87XL85ddLB1qcPDYey9NLF5U6QhHn/kcv/ijVAasrnhGUJ4xNOVor3C6R0XMDN6dKkt0t1z76BSLD0fgDFf/XWFjEtTHvFZFrqjlVNSY7csQCIPwj+r96lSQd8frvxTBAMSP4svZaxJMhOeoPmtIZsLe7LxIFzfE6XIZ1V7gxQwYcFkC/kfBgUOh0T4Vaau3GnOVbP0oAdyQUuLB3m++kypPspPKzd80Xf2f1dW+pN0muaiKhuOwk7V4V4MQjsAYPgLN9lC+qOhbF5hl7VvR9O024idAWZERB3lFBW3bZ3/zPpD6vwdI4FQf8AcHN7R+3QT5eFH8l+wdAPk692nfvkAOrOFCo9lg3jAif4gq5XPz3I5msNJ/TfewFGAsH2O6p3nw/0IlsJwlUkXryuAgsC/n6zFzAMK4teyg5b3YvkczjqY+UFVe+x6hMxmAsUnr9YKxHu0WqYsXcZcgexeyH4Kqqq2w+5mWxZb5GD7DVXWEW2+SiKF66jQnI0oyk3F9pYb0+Y7HSp4rT5KOTzvYqtXywfQOJjhuN2m1ziR+yBFB9HcPgN6jC0HDKWl/tpwoIKcuXeGik/fUjKfd73+21K4qEJE26JGcTvKa6Rj5vX+qcTezMJPzUv3zBievXY2BgZGek/tLtzvExMQX6qUMvdbw6wUJPfPXzL9h1931Ma3yV9XH6cv2CRGhIfd07i5rvLPFQJS+pQsUgqZbkfuIDuIX8tK++O/oTEx1rQk/X6e6OXOopfbkkPsQKpjaHgre9GQjiCCGHcf564PyvuIPExEA6/4QpTjLzpXAtR+ty9cvgg+V3o/i141wnkt1QPAhWJh5vXYoQL/+9858Wi/M+/Bdl9nXZuxiWJFyd08NcGQcoFgZIBYKuo7h7vm+NtVjbXB9k9kB7xSV81aLWNFwCOagFgZ0y2I1h5b7hr2WbYf8K8d1nsLW+PbPNA+NSNNf5PU/0+o5oL2Bmq2xlwevAUrzrZXO/Xrds7Lvf7RUA65zZV3onCQAgCJ4sgSJN4OXWHVP2pH+pSFT7Yep0bsGyWXiTFYvhHvJBiYBVOVyBGWFOXVSqwU1C3E0HdQThD3LVsncUOYcmHXM4Xcq9PjIc+KXQjj3/3uLsLF9OiCs4FUnEAO0F1O96Xif/orsKO84TIkM/n9LD53eccXdcQJ1gQJJkG7ITUnbxXuatWT4nEhKn0md2DzW8bHgpl7z6kH0l62TQTThIuYCuv7t7kz4jkH7y0IubgQLvvZ/NANPQcAkhPdbOEuF1Aj/Xx7urVaf5PMC0KpkAHzc37pfoXmdhW8n1qxwZnhOo9M9ITCSSiC9w597NEeKAO07SAfJgY2WuuHpANlg7DsAHz8+aJuzGCFrti6LYVCkx9grVssLLFdxpUeysUYZQOVN2jNqh6XbYZnW6Vrpsf9Q2AEKh6g0VzOu19ozfx3UEAizBgsUPFaz0LeMK2O9NwpyuziGddD2/NGkyBFmfDDhfI4v13RkHhLRM2MDaN+DDLatn4ufawDSHdQiEYSLwMoTHu2oHEZ6x2WSUj8YZ+x2z37UsJRqykIfJj2xbR/HdptFZ8hHytvd2bUtylGTRIfM6KOqOgs+Kjkq51kYfEG5rrtSQ+xvyMxGORh8RjUYfEa5vbtS/ykHhDc71WQ7aeMvUfaEfFp6dM3eweq3pD7V4b4tNQpE6qt1GRmONR7QYFl41qN9PusbgzVPW5J96E+XFIvCIK1CHYbFQ79iAQCAQCgUAgEAgEAoFAIBAIBAKBQCAQCAQCETv+E2AA7+Ttiwz0jN0AAAAASUVORK5CYII=",Tfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACKNJREFUeNrsnd1yFEUUx7tnswGyobIrBiVBKhQKRXlBkBu9oAzeWYoQL70BniDwABbmCfAFLMILhKhcY6rwgtJCoohUYWFttASVjyQVCIHNZuyTmV56h9n52JnZ6T19/lVdJGFndmZ+/T/dp7e7lzESiUQikUgkEolEIpFI3SLezRdv23Zu98A5twl8vvCtPN6WwOsBvtPw6wQ+f/BwD8UOu71Gbbwe8Dd18F7qBF4f8L0ddP2qAF8n8HqAL4h/Sh0K88uUzunTxoMGRClk/HbPRHlC6Zxe4LeKsiXjt1ty4YPzyfE5g5f3sVmUbRm+1boo9zC4HVMbL+/jjQxz+seiPMQCvofhkO1W4uduyM+kN6+8F3XuNHM9QN+V0VvcxOJ2TI6XWnZDfdr3tYjJ7djAy3AP6dZgBhWKdXtPHiV4gOL28CHl2pmR4wm8xq6HnjcM5KQ1hPufKGuYwjxG8FILKXbyHmIL8+jAK+H+vih7UzrtvxidgdHxQP6uG+57E57rT1Fq2MI8SvCK6/8RZV/C00EFsrGFecxtPJD/S5TRhOeZR/p8UIO/w5zBnM1tnuO2KM+wjNQZAd4N97br2HfaPM0fGNt27I5XXXu4zWNvEfjudD2Y/oYb7vtiHn5dlBWMnTpTHA+O/U2UsZjH3UD+XIwAPyfKxzGPu4a1U2cEeLeTd9X9tT/iYd8zZ7YNOR6B66+JcjTi63/A3KkzBrzbybsifvwsRphH7wbOTLC8s7Dyd+bMvQ/Sr6Icwd6+GyMYyxHlK1FqIWWCnhY++ON2uHab8jy4KTda+maxcum90qO5pTpbqjVH8oEiZ/v6rfkPXyvuNiXM4wY/vQCfzp0Q5bgoIxGPgrz/gigz7NNKlcB3F3AADe31WMIzzYgyKSrAHIHX3+HnWgEfe7WHjQ4UWLm3+barT9YZNAFQWmhKlDOiAiwSeP2gn3ahN+nkrl52bKjIju8In3S7KNr+mXs1dmH+OZt9sPbSf4syLuDPGg8e0iQtBjumF84DY/VPX+zfzCb2bGLlov/1fXnnWSMC+Km6ss7O/PJ0oyJ4dErAn9IhRU3y7JOCl8fnNy/NAx1Anj/U1xKo1PjVJ+z9wR52es+m4EZegD91bWUjGugAX93bL0kGkhb4xp/cC8oFOoR1gB4lpFcuLW1UjusfbI30+iNXHnv7AB2D78J+iVcS8GmvJYcLg8Fxrlxslm16bOjSxRt5mwAJIT1M0Fx8d7jfG0XOu53JTIG75uJp98ey3BhQVoD0K8GL3nts6KCv79ZeqgRtwr8orqWcBWwFeCbq1I6QXLmZNHTO26ZHley5S0EPPqoA/sV3S2qHEQaFTqcEPHPYeYBXmwErURSYXhhT8/Q40P0cHjXcN0j3Wezs/qYZ2xPimkYSutvKIpzrAt5bCaw2K8FZNWUL670HhXkpn5w9UJAJQCooAwFzRgnjulvuwZtLOpQXeL9KEF4BnLa94faJkFTMT36Q/SpDmCbebHrvk224O1fpAD5OFDihduhaDc4EhXlPPh749yDBSCCE/Ybrnc8HgmBrAVxH8N7rKshKoD5v+QMMw8ZVkLOj9u698BUd8wnlBV2fsa7gvVGgsO3SYoUpH61GGXuPA7edcO+pfKO6uttPXTPZcqXODsqflY5V4jCfxPGe6xjtAiN1jeMbqq3bB9SUKs0wnwS+mlVs/XbpAIFPWbaTNjngS1Zbjk+jcvgN6kjVbVbuludpwoIK9uP9VTb0/BEbCnnd7bsC4qEREx6JGeDfKq6yz9d+Cm9OrC0s+tS87pZlwk2Wy2VWKoUP7e4cHmKmqHt6ofzFfjRzi/G/EqZ/+47Q11SG42+Np47zF3j37IDZNeB7OK/6PeyoCoPaWyyy0aFXYp0T0kP1WpaPDvxM4FPt0LP1lU8GLjccv1SPPcQKUGu9rb+5pBQhInjlGfefZc63WNgEPgXgnHMock7fXJKcO6gNb6d996R/c+51Avy67pVAR/Dw8OoSuOf/LjR+iDGBIizcr4jkZjgmeO+EDvXaoJIqlUDLCmDp6O6A182oYTZuW98q3AP0hJ/0VVuttnErgK1bBbByhm17QnmwnLVsU/JXmPceV3uHticO8wB88taq+qfJsGN0iwJWju5u96u4J1XXxW3r/dK6vcPb412AgK5Em6oaiaLIUwnsPCpBJ8HHc3dE1/ssdggUhPUVZcByrfI6Kxajf8QLTQyswmmqiAnW1OXVFFgdcLedwN2tdIa5XxciFztEhQ9tudqRe3tkOPKbQhoJK3CaUriUFlUoUaAjEcDK0N22ezPpn91x2LgKJA58tU2P2r77vEfTNaQpWQmybAasjNydfaxyVq2e8oKJ0tOX4R7C/GBf+HcZQHj3gX4k62XT0jhZRAFLe3cHw5/ywj94ednbBrcM92FhHkBD5tACekc3S0g7CuBYHz+9cJLBWjZFMC0KpkC3mpt3s/o3Gxms+H5qJwdnPL333KBnUpEYFjlz7i8yzwfqME0L4MPEyKC5egAbQjoMw7aYnzfLnI0RUOyKgW0rFJj6BGvZYGWL7zSoja1QPKN04OqAvkHVTdmmMD0qrJsfhVaACKq6g0UzmPa+wQ2+uRLAIgxY7DDKwr+cCMK5s90Zwp2uzAIvUw93zRpMgfbOhu0rsPkHHw2Aw+smbGBsGvgoy2rl+DmBRwKdRx2zgLkABB5ZmI/48nUT9rPlBkCHf+LsnmBEuOfkdl+h7+SZAj72YdjDPUcOve0NhbCHewJvqOs5YuiMJfvYmcAb6HY1tSPwBnTqjHE9J7eb2ckj8Ia6niOEnrRTR+DJ7Xg7eRjBZ7FWAJ3rOTLomd0Tgdc/zGd2ekzhnsAb6nqOCHon7geN6zm5ncCT2w0K95zcbqbrCbyhrucIoHf8Pgi8gW7HEu45uZ1yehKJRCKRSCQSiUQikUgkEolEIpFIJBKJRCKlrv8FGAD3ATtB8UJeEwAAAABJRU5ErkJggg==",Efe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACFRJREFUeNrsXe1uVEUYnnPKFmghu1VppFXSRCEYQyjBGP+YgH+NAnoBwBUULkCxV4B30OIFQBX+mWCNxpgoWkGjITFuMWLkw+5aKC3b7XHenjPL7HC+Zs/nvvM+yUjdnj179jzv87zvzJmZMkYgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAiEDGH1+xdwHMfK8bs4nRtnWU4/37ctyALZzvj8bTUAiPgCRe+p3cmY+A1J7YyILzpXcRK43efxnR5jskYsVi9UD1a8NaPzo7F5NMRLqt/w7N7OSu0YbB5jcSfIT1v1jzCpHRvxwu7XeKumHEhrmNSOinjJ7lteAFRSOvUyQldEZ/VC9ZCTh1M65yo2m8ea44VKd6dwHqjkH2CzeXTES3a/6lX2SYu8u+zJ4BAR3yd2v5xCkdfEaPMoiZdUf4e3vQlOtc7bfSAdm81jzvGOp3gnQZG3yBADM/GWp9hdPZ7jjucgDhHfX3YPhP3B22s9nAIGbP7EmNuxK17gvtcl0y3y6liLOvTEg0V7s3Nu8na0B+JRFnWmKB4Ue523YxrvgQcyvyG/L0YQv8Rbg7cXY77nBuaizgjipT7997wdiPm2nzHn9s69wf4FvTwP4/afxDgcxuXfh4IQc343wepFkfeP1y/fF3H419iLOmOIl3L957y9HnHcNybYvBFW79k9/DPB27WQw+CBzF6u9rYJ98QIxXtF3i3mjr8fDDjsM1PUbpLVsx2Xm9XzB7bfeNh2DjVb3fxWKxb7r+Xc+nD/NmOIx231F5cm+X9P8nbcs/o4WODtAm9z7L2ROhHfX4QD0VO8HUl4pjnepnkALBDx5Vf4+SDCjzy3hU1WB1htsPtr1x9usIVme7MFYJa3szwAGkR8+Ug/45HehVN7BtmxsQo7vjt6tnWD5/65v1vswuJjNn9v/alf83aCkz9vPPHQTSrFYMfFpRngWH7po1e2samXtrJaxf/6Pv59reMAfqivbLCz1x9tBoKC05z82TJ0UZPc+6RrzGBYzFJWqxZKOhD541s72bn92wJJB3x5d91P1R1MDNns0hvDm005zwz/zFNFEu4NQ1tFKl59vyP6zUWQDrY+c3golqWPXGl2giTO8Ue/eqDWALkpXxKWpYxPOEUp3i+Q8nEBN6drk75Zqnv2DUSCpUcBFP/FmzvUtDDjFZN5qTtVNWW5g4QIgPSD4En1rk064NPbraeCoEfyL/FrqWVBdhp2XhTxvkGQ0vnOyzldh3RRuQtABR8XQL6S82FQ6ExKhGdOdhHEy2nATuQCF5eOyP10HdL9FB7X7uWi7xzvMUiY4tc0kVDddhZ2Xhbi1SCwewyCc3KXLag7FsfmBcKqez+c4d1E6AoKI2DuKKGuusXOHYX0h4si3i8IogPAze0dtUM/XRd+JPsFQxSmXu767FM9qLtQlIF4HRc4KRd0Yf30IJtvtJzYr4cBRgLB9juqd58PhJFdCsLLSLx6XQMiCOT7LX6AYVhdhCk7bnWvki/hmI+VD5T1HpeVeNUFBp690hhh0qPVOGPvOuT2YvdK8E2WVd1+6JuJGCttdkj8LBVWiW0+ieKV65jsAyH1jeI7aG04B+UuVZo2n4R8uVex83LzIBGfMhy32+QSP2z3pPg0gsNvUEeg7bBav9xPI+bcfXd3lY09/peNRRx38zYn8fCECbfEDOL3VlbZB+s/RKcTezuLPzWvv2Gb8CVrtRobHo4e2n1hfIyZgv6pQq0ne9IsNPTXPOwYjd72bmR8j/Z55XH+AYs1iPi0c5Jl1f1udlxEkTpYqbDJsWe0zgndQ/lalt+p/kTEp1rQs42Vd6tXO4pvtrWHWIHU1uD2wN8Pj+pvhKmM+88zd8Njh4hPgXDLsqCJFawLSfrcYTm8l/yudP8WvOsE8ttlD4IyEg83ry0IV353ofPDov5fCgmy+xXeuRnXJF6d0CFfGwSpFASlDAC7jOoOOW5OtlndXB9k90B6wid99aDVNl4AOGULALtgsh3FysPhrmWbFf8L8951sW9sNLHNA+HTv67KL01HvadsLmAXqG6nx+nB07LqdHO9X7du3/io3gVw0iW3qctOFAdKEDhFBEGexOupO6bqT19b0arwwdZXpAHL9ZHnWaUS/xEvpBhYhdMViAnW1BWVCuwc1O0kUHcQzjJ3LVtnsUNc8iGXy4XcqxPjsT8UupEnvn3Y3YVLaVGF5AK5OICdobod78ukf3ZXYSdkQnTIl3N63Pzu8xld15AmRBBkmQbsjNSdvVe5q1ZPq8TEqfSF3YPN7xoajGXvPqQfzXrZtBBOFi5gl17d4eTPquQfurqs5uBAu4+yeSAaeg4BpOe6WULaLoBjfby7enVGfgmmRcEU6KC5eb/U/2ITu0Z8n9qJwRmlei+M9EwCiWGBO+f+ElMeqMM0LSAfJkaGzdUDssHSYRg2YH7ePHM3RkCxKwa2rVBg6hOsZYOVLb7ToDa3QlFG6UDVIbVB3euyzWK6VVg3P4oMgBioe4NFc5j2vsFNfHcQwCIMWOww6bXQAp6J7c4Q7nRlFvGi6+GtWYMp0Ops2KEBtnjv7SoovG3CBsamER9nWa0YP0cP2xDSLRKCgcTrEJrirh1EfMFq11UyEW/odyx2376cYNJfqNBNDQ6pAX9RZ5zdm1Lc5Rk0RHyfFXVGAbPik5KOusgj4g3N9SiJTzE/E/FU5BHxVNQR8WhzO/oij4g3NNejGrL1lGnMX4skxeegTGx2T1W9oXaPhvg8FIlJ9TYpknI8qd2g4LJJ7WbaPRV3hqq+74k3YX4cEV8SBWIINpvUTj0IAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIKSO/wUYAGgjrA0dN9CPAAAAAElFTkSuQmCC",Mfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACBdJREFUeNrsXV1vG0UUnV3XSZq0ig00oglUFoWqwEMT9aUSQqQ88tE2/IGmvyDND4CQX1AeeOIlyTNSEtQ+t0FICAkBoQhVIBUcoZaPliahrZM2sYe58aw7nu56Z7xr7+7MPdJQY3vX6z33nHtnPDMhBIFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAIBAdhJP1L0ApTeQ7OI5Ds3zfXIz99uIt61/ARRLaUjtB4pPOVQaQgMRnQ/UUibdQ9aY4DBZ3FqrdNOIpqt1C4rHIs9vqaUbP3XXsMzSgnZiCGsiumegoRhEP5FDaEGaORB+SrnLyqWnKMFHxVCA8H/FcOybavJHEC6oHtfZEONWup3YTC0dTc3wjNzP0tnmORyZX9SYT73CrLrZ5jn+4g1AkPlt2D4Q9YO1FXujp4D/uGBQVn12AZQ9pHnPL1KLOeOLBovnsnDusvaRZ1K2bWtTZonhQ7H3+PQcUjylb4IJWEA+y/YO1U4rH/G5yUWcF8UKfHoh/R+GQDdbumZzbbSruPLv/i7XXQt77NXeIGhJvRpEHD2+y9lbI238xvaizSfGe6q/zAi+oyPuJtX9tsHmbiAfrfsjaDdbeC3jPZzYUdQ0nJLZInlKXV/af+7y8ydob8C8jvoaKNwgHLm8O1ijp++h4b+9WlRTE17aq9O9Pf3s8VjkzeM2W+2G24hfXR9l/z7N2jrWS4lGrrC2wtkw+KJaR+GwRDkRPsTYe8UzLrM2yAFhF4tOv8EtBhI8/t4+MDuZIoaf5a5cf1sjqZnWvBWCetWkWABtIfPpIv8hJb8LkkR5ydjhPzh0On4W1sUPJ8p87ZGHtMVm5u/vUy6xNMPJXrCceBkZSMdixuD4HHItPffxqH5k62ksKef/r++Tmo4YD+KFcqZHp61t7gSDhAiN/PgW9lEj3PuoUZBgWc4SZrYmTDkT+8PZBMnO8L5B0wJd3dv1U3UCp3yVLpwb2mnSeOfaZk0kSzn9udpJUvHw85YMgiZAOtj53sl/J0otXNhtBovL+0189kGuArilfEFbTjY0y2BT3Shqnay5Qz+napO+V6ty+gUiw9DCA4q+9eUBOC3O8mOyWumNVUyeXUHkBEH8QPKnetUkHfHF756kgaJP8JXYthU6QHYedJ0W8bxDEdL5LYk7XId2r3D1ABa8KIF/K+TAodDEmwjtOdhLEi2nAjeQCi+vjYj9dh3Q/havavVj0zbAeg4Apdk2liOp2O2HnaSFeDgK3zSCYEbtsQd0xFZv30Kq698NF1k2ErqBnBKQ+Sqirbpff/0T6w2lYJu0FQXgA1HN7Q+3QT9eFH8l+wRCGqZebPnuyDXUnijStj1dxgfNiQdeqnx5k85DjVZ9vBRgJBNtvqL7++0ArslNBeBqJl68r5wWBeL+9BzAMq4tWylat7mXyBZz1sfJcWu9x2nfE8Fwg9+yVjSIRflpVGXvXIbcdu5eCbzSt6vZDZiZiVKpkzHssFFaRbT6K4qXrGCUZ2lomMxe6U6MnxC5VnDYfhXyxV3Hw8uYJJD5mUPJkulRpwG1L8XEEh9+gjocqJYWs3E8r5tx9e2ebDD++R4ZD3vfrbUbiyZINt8QO4l/Jb5MPd78PTyfufqI+NS/bsGJL00KhQAYGwod2XxgZJrYgO1WoQ9a8x6sbVe3jDwwdDn1PceSI9nnFcf6cQzaQ+LhzkuOU/W62KsJI7cnnyejwM1rnhO6heC333x/8EYmPtaAntcqZwasNxW9WtYdYgdSdnv2Brw8oOIIMadx/hWRo3xw37YTDkiaYYsSnc61G6XO3yuHt5Hep+7fKrxPIr6Y9CNJIPNy8qke49NpC44HGBIowu6+wzs2IJvHyhA7x2iBIhSBIZQC4aVR3i/ctizarm+uD7B5Ij/hLXzlotQ0PAJq2AHATJptKVt4a9bVs897/wrx3XRwbHops80D47I1t8anZsGPS5gJuguqmbU4PnhVVp5vr/bp1x0b0tsED0gW3KYtOpAIpCBLZHbubxOupW1H1F76raFX4YOsVYcByt/g8yefVf+KFFAOrcJoCMcKauqRSgdsFddMI6g7CNKmvZWssdlAlH3K5WMi9XhpR/lDoRk5887C5CxfTogrBBbriAG4H1U35l4n/7HWFTYiE6JAv5nTV/O7zGU3XECe8IOhkGnA7pO7Oe1V91eoFmRiVSt+ze7D5Q/3hW9qDvfuQfrrTy6Y94XTCBdzUq7s1+fMy+WNX78s5ONDuw2weiIaeQwDpXd0sIW4XMGN9fH316pz4FEyLginQQXPzfi7fIqVDRd9f7bzBGal6T4z0jgQSMQX1OfdLRPpBHaZpAfkwMbLVXD0gGywdhmED5uetkPrGCEbsimHaVigw9QnWssHKFt9pUHtboUijdKDqFrVBmXfZ5k26VaZufhQaAAoo88GiZZP2vjGb+OYggEUYsNhhlLeWBTzxtjszcKcru4j3uh58zRpMgZZnw/bnyNrddwdB4VVb/katTcSrLKultmxp6lpCuoNCsJB4HUJj3LUDiU9Y7bpKRuIt/Y7J7tvXJdj0Fyp0UwNFNZhf1Fln97YUd90MGiQ+Y0WdVTBZ8VFJN7rIQ+ItzfVGEh9jfkbischD4rGoQ+KNze3GF3lIvKW53qghW65MK/42LCq+S8o0ze6xqrfU7o0hvhuKNEn1LioSczyq3aLgclHtdto9FneWqj7zxNswPw6JT4kCTQg2F9WOPQgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEAoFAxI7/BRgAfI6LD5gJ800AAAAASUVORK5CYII=",Lfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACJ1JREFUeNrsXV1vVEUYnnOWLdBSuytCpDVkE5RINKGEGy40AS+M0SjghfGO9oLrwg8w2F+A/6Dl2gRK5MLEBKomxkiQakIQE3QbpX6A7ZbCWrrdPc6755x1djhnz5k9X3Nm3icZWrZ7Pnae93lm3jkzswWC0BIFrAI9sSWPN21ZFvwwZLkdwzCQ+BRhIOmaEQ+VLYnqLbR6fVWPxKeMVsb3DzaPis/I7o0MVd9ExWer+oGMrr2BxGcHUJ2Zkc23kPjs7L7l9O4LqHa9FA9o0LI15WvWkXg5iE/zc7So06DiJbD7JrX7NDt5jzGPlwfrtAymdK0nSLw8gDZ3d0o2X0fi5bH7TWr3kNptS/hSq4oIRRnFA9ZoGU74Go+QePnwkJZKws7yEImXz+43qN1DajeU0CWWFRKJUop3U61yQueuIfHy4i9a9iV07gdIvLx2v0btfjOBnP5PyByQeLnxDy3PxnzO+6pVkorEL9LyasznXELi5bf7Fad3H1dOv6jCQxkdFO8q9GBM5/pNxQpSlfg7tBxBm9eMeGrNf1O7hyd2pajpoUqjdTooHvALLa9FPMctVStHZeIXaHkz4jluI/H5s/t71O7h2fnOfjt19BzLSHw+UaVlb5/HXle5YlQn/iYtb/V57PdIfH7t/jvLnni/Q/DQu5AZIPH5xg1a3hY85ifVK0UH4r+h5QPBYz5H4vNv99eceffPhDzkd3rMHSReDXxFy4cC7yVIvBr4gpbTId/7KUGoA2r38Lg2CL/qUh+mRtzPxfQetPpc5XS15uW1TWtiYbVJVhvdW9eMFA0yPlIgR5/bckGX+lB716iLK+P031O0nCDhF1vAw50LbfW/X64i8fkiHIieouVoDM3DNA2ABSRefoWf9yOcWnnb0ksD3R+7+rhFoAmA4oNZWs7SAKgh8fKRfsYhvQsTewfI8dEiObGnGHiKGm375/5okAuLG2T+wVPT6IH0k5T8ee2Jh+cfUuzlenFlBjhmX/r4wDYytW8rKRW97++Tu086DuCFar1Fzv74bzsQOExS8mclSE8j1X3UdM6ATQadnaekIB2IvPnGMDn38jZf0gFf3t/0UnUHlUGTXDoy1C7ceWboNSeyJDyOjR2jKp4/3t5ZOC0X4EgHW585HLx6Ciy9fGW1EyRh3n/s60d8HyA15TPC6qrYKFuqxj2AY6TmAnabLkx6u6vu2DcQCZYeBFD8tdd38M3CjNOZTEvdsaopyZE7NwDiD4L/e+/CpAMuLzWeCoI+yb9E76WUBNlJ79Ob1pCtwXyYOHCebdNFSHd77i6gBx8WQD7X5sOg0JmYCDfS3JQ5zbF6txkwI7nAxZWjbJ4uQrqXwsPaPdvpO3ega4+lKXpPlYjqNpOwc1mI54PA7DMIzrEpm186FsbmXfTq3XvhDE0TIRV0jYDYo4Si6jad+s8kH5bh6ZwbBMEBYLftHbVDni4KL5K9giEIUy92XXuiD3VnCpkey4ZxgVNsh65Xnu5n87WGFfr1XoCRQLD9jurt5wO9yJaCcBmJ5++r4AYBW9/uLzAMK4peyg7bu+fJZ3Dcw8oLstax7BMxXBco7LxSKxPm0WqYsXcRcvuxey74xmVVtxdyMxGj3iSH3N+ZjlVkm4+ieO4+xkmOZjTl5kYbLesgm1LFafNRyGeziuHPVg8i8THDYjY5qAyZfSk+juDwGtRx0bRIKS/1qcWcu+v318noxjIZDXjfz0uUxMMVHapED+JfKq6TjzaDF782zO0k4X2Q0erTRKlUIkNDwUO7L4yNEl2Qn16o0d64sI2FmviXPO7YvSfwPeUx8T0U2HH+gpGfjY5zQ/wWw6h6VXZYBJE6UCyS8VGxnVAhPWTvZe3dkR+Q+Fg79KRVf2/kakfxq03hIVYgtTGw3ffvQyEcgQc37j9P7K88tZD4GAiHb5OEKUbOdK6FKDl3rza8n/adS/8WnPsE8puyB4GMxEPlNV3Cub91ljiJTKAIsvs6TW7GBInnJ3Sw9wZBygSBlAFgyqjuHu+bY21WtK33s3sgPeKTvqrfahsnACzZAsDMmGyLs/LesNeyzbr/hXnvotg/ujuyzQPh07fX2Zemg46RzQXMDNVt9Tk9eJpVnWhb75XW7R8T+65CIJ1xmyoRXF7NBYGVRRCkSbyYukOqfvJGXaiHD7ZeZwYsN8vPk2Ix/CNeaGJgFU5XIEZYU5dVU2CmoG4rgrr9cJY43wrlLnYISz605WxH7pXKWOiLQhp58tvH3SlcTIsqGBdIxQHMBNVtOR8m/rPbCjvJEiJCPtumh23fPa7RdQ9xwg2CJJsBMyF1J+9V9qrVSZ6YMD191+7B5ncNBn/7ONi7B+nHkl427QonCRcwpVd3b/JnefIPXV3j22Bfuw+yeSAaMgcf0lPdLCFuF1Bjfby9enWGfQmmRcEUaL+5ebeq90hlV9nzqZ07OMP13jMjPZFAIqrAnnN/iXAP1GGaFpAPEyN7zdUDssHSYRjWZ37ePLE3RlBiVwzVtkKBqU+wlg1WtnhOg2pvhcKN0oGqe/QNqk7KNqtSVam6+VFgAIRA1RksmlNp7xu1ie8OAliEAYsdxp3SswNP3O3OFNzpSi/i3dTDWbMGU6D52bCDBbL44J0RUHhTij19kPhYiQ+zrNYdP1cepiakGygEDYkXITTGXTuQ+IzVLqpkJF7Tz5jtvn0pQZdty0WZNEhOZsui4uNtr5W3e52+oSKtoEHic9ap0woqKz4q6Up38pB4Tdt6JYmPsX1G4rGTh8Rjpw6JV7ZtV76Th8Rr2tYrNWTrKFP9gXZUfHrKVM3usVevqd0rQ3wailRJ9SYqEtt4VLtGwWWi2vW0e+zcaar63BOvw/w4JF4SBaoQbCaqXU+7z/WQrbPODb2+DxSwCpB4BBKPQOIRSDwCiUcg8QgkHoHEI5B4BBKPQOIRSDwCiUekhP8EGABiGM8vAae5iAAAAABJRU5ErkJggg==",Rfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACHtJREFUeNrsXVtvE0cUnl3jAElQnFJQSSoUqS0q6gNBvPSlEvS1Kpf+AeAPNPDeikbqO/0HCX8AUsEzpOpL1aptQOpFVSuZXqAqaeMQMEljezon3nHHw15mvGvves75pEHG8a539zvfuczNjBEIBDzwXL45znmae+Se5+7j2YXAsNOwx4l4fF6Nu/xQSPFIgUHxfk8W43kNIn540eqReE6KH2Y/L7JykdmXeji0ScQ7UNWJZkt+g4h3A7bEe0Q8zvskV+8Amj3cJyV3GO/T9VIOBfGCxC2R2dvc5zYpYRhSds5NErGSRT3fMDmnMChOxA9HnN9t+NkNDDmAC8Rzg/ILevDKGYYPcvUFiOFy3D1J8SOGp6xTjHdH9ZsWxLcwlHpOEG+g+pYF8U9dd/OYkruaYXL3DIPaXSM+yd17BgneBga1O0W8gbuHOL+PEjs3XX2c6rcM3H0Lg5vHFOMl8XsSPvMIg5t3jnjF3XsRCV4S8Y2IY50brXNR8VHuHkjdm3DsKgY37yTxMUnebwmKr0WR7uKKGldjfJTqvRjV/4ko30FH/Jpo+yOO+TvCg3AifrjcfRj5T2IU38AQ2zGWc4DHoo1F/O1nIt4N1fOQmTS/izYaccgzDEkdFsXr7n4zRvFVSu7cJf5ehOIfYknqUBAfUdPDG/pgzTqW2C7hM/chVS/br6KNa62qfYYWVDiS5KlvrQZkq9jCktRhK+fUWP9XiKv/EpObx0Q8jLPLFbPfs+c7cR5jSeowxXg5ls5jyra7mNSOSfFs/Ob6RIuz49stfuyD17sH6T7+cfP9su/drZ+euIPlebidxVxfmxX/nhftrGgzhketiHZNtCX23mSViB8uwoHoOdFOpjzTkmjzwgBWiPjiK/xqFOEnX9zFZidKrDLSfdvVpy22st7caRFYFO2yMIAaEV880i8FpHfhwuERdmaqzM4eSl4zWdvmbOnhNrt2/1+2vPrcKC2Qfk6Qv4yeeOgYKURnx/W1BeBYfeujo3vY3Cu7WaUcfn2f/LLV8QBhqNZb7PK9ZzuGoOGiIH8x946JlM8+bTkH3WKewWrVgZEORH779j52RWTuUaQDPnvUCFN1BzOjPrvx5thO086zIL7zQp6EB8PNXp6K14/nSt08cNLBrS+cGDVy6ZO31jtGYvL5U58/0XOAgSlfEZan9U/wvBQfZkiD8QLtmG5N+k6qHrhvIBJcehJA8XfeGtfDwkKQTA5K3ZmqqZ89d9IAsjeC/7N3a9IBnz7Yfs4IeiT/hriWSj/IzsKd50V8qBFkdL6raky3IV1m7hKQwZsCyNdiPnQKXcqI8L6TnQfxahjwU3mB62sn1TrdhvQwhZu6ezXpu3K0q8t3TlzTTEp1+2zAe+vnNUgDN+j3aARX1JItqhwzcfMScdl9GC6JMhFKQekIWLuX0FbdfvD8c6mHizA6J40g2QDasb2jdqjTbRFGcpgxJGHu1a7vvtCDunNFkYZlTbzAeTWhi6vTo9w8xHjT9+MAPYHg9juqb48PxJFdCMKLSLx+XSVpBOrzli+gG9YWcco2ze518hWcCXHlpaI+46JPxJBeoLT/Vm2SKUOrJn3vNuT24u4145stqrrDMDQTMepNdly+VhKr1G4+jeK165hlQzSjaWguFGbOqCVVlm4+DflqVbHv5voxIj5j8HbZ1CZ+zO9J8VkYR1injkSTs8qwPE8Uc+6+erTJpv79h00lfO6nB4LEEzMYHgkO4l8rb7IPG98khxN/LzOfmjfcQDG9ulKpsLGx5K7dl6enGBYMTxbqsfvy9UrN/keixg8eSvzM5PRh6/Oq/fwlj9WI+KxjkudVwx62KZJIHSmX2ezUC1bnhPJQvZaNdyfuEvGZJvSsVT89cbuj+PWmdRcrkLo9Er3N3ZiBR9Ch9fsvs/ZSLU7EZ0C453nQ5ArWlTQ1d1wM7yW+a+XfSnCdQH6z6EZQROLh4TUl4drfrnVeWEygSHL3dVHcTFsSr0/oUK8NjFQxgkIagF9Edcd8bkl1s7axPsrdA+kpR/qqUattAgPgRTMAP2eyuebK49Fey7Yo/wvz3m1xZOpgajcPhM//sKm+NZ90TNG8gJ+junmP04PnVdXZxvqwsu7I9EG7CxCkK96mqnoiE2hGwPMwgkESb6duQ9Vf/LpuleGDW68rHZaNyZdYuWw+xAshBlbhdBliijV1eYUCfwDq5inUHYXLLNhtWi52MCUfYrmayL0xM238pVBGnvviaXcJl9GiCsULDMQD+H1UNw9uJvuztxV2TiXEhnw1ppvG95Dv6LqGLCGNoJ9hwO+Tuvvvq9qrVi/qxJhk+tLdg5s/MJr8c3Tg3kNIP9XvZdNSOP3wAn7h1R1P/qJO/vHbG3oMjnT3SW4eiIbKIYL0gW6WkLUXcGN9fHv16oL6FkyLginQUXPzvqv+wWYOTIaO2snOGS17z430vhgScwXtOfc3mDagDtO0gHyYGBk3Vw/IBpcO3bAR8/OWWXtjBCd2xXBtKxSY+gRr2WBlS+g0qJ2tULReOlB1TG5QDUq2RZcelaubHyUagAGqQWfRkkt737hNfLcRwCIMWOwwG7TYBJ7J7c4c3OkKF/Gy9AjWrMEUaH027GiJ3V99ZwIU3sSwgTE24k2W1cr+c+fhIyHdIyEgJN6G0Ax37SDic1a7rZKJeKT3mO++fQMCpl+osA0NnNTgflKHzt1jSe4GaTRE/JAldajgsuLTku50kkfEI431ThKfYXwm4inJI+IpqSPinY3tzid5RDzSWO9Ul22gTDQ/E0qKH4AyXXP3lNUjdffOED8IRbqkep8USTGe1I7IuHxSO053T8kdUtUPPfEY5scR8QVRoAvG5pPaqYIgEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEQub4T4ABAEMis7ec/iolAAAAAElFTkSuQmCC",kfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACEpJREFUeNrsnU1vG0UYx2fXddrmBTtAIpqgKhJQUXFoql64ILVcEX3hCzT5AqS9g0o+QTlxTfoF2qD23AZxQUKAi4QQiCJH0BTRqklI6zZx7GWe7K47nu7LjHft3Z3n+UtTuY53vbu/521mZ9aMkUgkEolEIpFIJBKJRCqKLNNP0HGcns7RsizH5OtygAw82F5MvyAYwNs9gG8ReHPgE3gCT6EeC/iSZmHHCHzx1dYEv4fBEwoPXrG7VtbbZfw+i97dwxLqweuHFD+7g6EGMAG8o9hdK2vsz/gaoPDgAQIPzWmea5tyvDle39Tw+OcYunpGgFf0+oMKu2qpfBeBL46eKhZ32xi83TTwceHeVjjfNgZvNwq8QriHPD+SNNQT+OJ5PfTPD8Vs/wxDmMeU433Fgd/BEOaNAy+E+yBKGwrg/wvZ1ri7dSZ6fFi4h5svhyO2e4IlzBsJPqLI24gBvxEG3cTbtKbm+DCvB6+eiAjzaIQNPLw3rNOHN3W2rZHgvXAfBP8Bb8dDNvsbQ27H2p2DAi9sEGeXwJvh9UEzaf7hbTRkk/sYijosHi+H+8ch4OvIIh868A9DwDtYijpftsknFxKq//Dgi+03LLkdU3HnSAYO3bZXpM80pcjQJvBmFHlyPh+TPnYPS1GHrTsn5vp/eatIf1/HFOYxgRdX0zwIAP8XlqIOnXi4t3kreU1UTXjfxnI90Izcjd7cqrQddrLZdk589u6L2/KPd53qV3/ufFq2rbuNs5U7WK6H2VXM9Y1Z/u9F3s7zNqO4VY23a7ytsE/G6wS+WMAB9AJvpxPuaYW3RW4ANQKffw+/Ggb89OsH2GylxKpD3addf9pmta3WfgvRMm+XuQFsEvj8Qb/kQe/S3NEhdm6qzM4fiV9Btdl02MqDJru2tstWH720TB6gX+DwV9GDh4GRXAx2XN9YAsbiW18cP8QW3jrIquXg4/vy3k4nAgSp3mizyz8/2zcESfMc/nIOeimJrn3S7gsMi1mKq1UHAh1A/vThGLvCK/cw6KBvHu4FeXVHM8M2u/H+yH6T9rPEv3MuS+De7WYrS4+Xt3e8QZBMoENYXzo1rBTSx29tdYxE5fNnvn0i1wAD83zBsboubJLBprQHLKyBRQE3p2tD3y/VvfANICGkxwk8/s4Ho3JaWPKKyUF5d6re1M+RKt8A0jeCF9W7NnTQ1+vNl4ygR/g3+LFU+wE7jXCeFfhAI0hpf1fFnK4D3a/cfUEFryqAL+V8GBS6lBLwvsPOAryYBuxEUeD6xmmxn64DPcjDVcO9WPRdOd61EmuBH9NMQu+2+xHO8wJeNgK7RyO4InbZwrpjKmHeV1R1H6RLvJsIXUE/EDB3lFDXu23W23N2Cw0+yAjiDcDN7R1vh366roIgBxlDnBbe7vruuR68O1Pl6TakShS4KBZ0Uf30sDAPOV71/SjBSCCE/Y7Xu/cHomDnAngewcvHVfKNQLze/gsYhtVVlGerVvcyfEHnAkJ5Ka/XOO8TD/woUHrt1uY4E26tqoy968DtJdxLxjebV+8OUmEmYjRa7KT/WiisEof5JB4vHccsK9B09cIcKMycEbtUaYb5JPDFXsXYza0TBD5lOW63yQU/Yvfk8WkYR9Cgjq+Ww6pFuZ4o5tx9//A5m9p9zKZiPvf7Ood4agbDJcEB/p3yc/b53o/x6cQ+zNSn5hVbKKYTV6tVNjISP7T75vQUw6LiVKEWW/Nf1zb1H0A5Onkk9jPj00e19yuO85cstkng085JllUPutiqioM6VC6z2alXtfYJ3UPxWLY/rtwl8KkW9KzdOFu53fH4rZb2ECtAbQ6FP+1sRCEiyJLG/VeZu1TLIfApALcsC5q/grWWpM8dlcN7ye9S96/mHSfAb+XdCPIIHi5eywcu/e1a54XGBIq4cN/gnZtpTfDyhA7x2MBIBSPIpQHYefTuiM+tiGFWN9eHhXuAnvBOXz1stY1nAE7eDMDOGLYjhfJouWvZlv3/wrx3XR2bmkwc5gH44q9dP12zGLdN3qKAnaF3Oz1OD14UvU431wd1645NT+odAIcuRJu6GIlUJBmBk4URDBK8nncrev38Dw2tCh/CekMYsNwbf4OVy+q3eCHFwCqcLkNMsKYuq1RgD8C7nQTeHabLzF3L1lnsoAofcrlYyL03M638pdCNvPDd0+4uXEqLKoQoMJAIYPfRux3vZNLfu+thF0QgOvDFnK6a3wO+o+sY0pRvBP1MA3afvLv/scpdtTovg1Gp9P1wD2F+Yjj+V8kgvAdAP9PvZdO+4/QjCti59+5o+Msy/JO3t+UcHBru48I8gIaeQwj0gT4sIe0oYMb6eHf16pL4FkyLginQYXPzfqnfZzMT44F37fzBGal6zwx6XwyJmSJ3zv0NJt1Qh2laAB8mRkbN1QPYENJhGDZkft4qcx+MYMRTMUx7FApMfYK1bLCyJXAa1P6jUKRROvDqiNqg7nXZlk26VKY+/CjWABRU9waLVkx69o3Z4LuNABZhwGKHWa9FFvDMf9yZgU+6wgXe73p4a9ZgCrQ8G3a4xNYefVQBD29heIAxNvAqy2r98XPjZSOBbpEjIASvAzTFp3YQ+Iy9XdeTCTzSc8z2uX0DEqZfqNBNDfQrVAiKOnThHs0vMgzQaAh8wYo6VDLZ45NCN7rII/BIc72R4FPMzwSeijwCT0UdgTc2txtf5BF4pLneqCFbzzPpt2ERerzVZ6Mi8AhlEfj8hvnCfweBpwKMwOfIEy0Cj9TbTQn3VNwh9frCg8cwP47A58QDTTA2m7ydehAkEolEIpFIJBKJRCKRSCQSiUQikUgkEolESl3/CzAAtePBYBnUpcwAAAAASUVORK5CYII=",Wfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACCRJREFUeNrsXd1uE0cUnl1jA0mQ7bREJamQ1R9U1AsScdObStDbqvz0BYDbXjTwABXNE9A3SPICSSq4hlS9qVS1DUiFqmolowq4gDYJFJPEsad77F13POzPrPd/zvmkRcGx17v7ne87Z2bPbBgjEAgEAoFAIBAIBAKBQCAQCAQCgUAgEAgEQoIwin4CnHMjgfPkgTs0DF7k63YAUYCrkt+NIzCI+BREr0Aq/N6Mi3hL7YyIz1rKFgmW3cd5rm0MFqiL1auovhSThXMivjiq7yie6z4Gm8dU3DE7x5ciEs91uRg6ER9k90B8JWAfOxjUrhXxCnbfVSAeRWGno9X7qZ4rEM8x2Dy2HA9qPhTwnl0MNq8d8YLdGx6F22Gfj7cC3IKIL6jd7wYofgeLzWtJfECRB6o/4vG7R16k62bzOud4L9XDRM4YI6AjvuVD/AsPB+FEfLHs3o18yOMTHh/bxJDbMQ7nAK98iN8j4vVQPXfpzvnLg/gmlqIOi+Ld7L7sMp43GDJgJB5y+ZT02t9YijoUxHuM6aGyr0mvPcGS2zEVd0CiKQ3bqi6FnegMXSJejyJPfOm+i+LvYSnqsA3nxFwvW/1zbDaPiXiwbqft6jdrqwu/e4CpqHNgYjhJ27pFQh/aqoftD2xqx6R4NnFzu9rlbK7d5ae+eOfg5GTF6AX9/eeduZXH7S/LpnG3da56B8v10LuKWdmctf69ZG0XrK2h+KkNa1u2tjX2eb1JxBeLcCB63trORNzTmrUtWAGwQcTnX+E3vAg/8+YBNlstsVpl+LSbL7tsY7vT2zywZG3XrADYIuLzR/pVm/QhXD5eYeeny+zCsXLgLrbanK09abPlh3ts/dlrayuA9IsW+evoiYeJkVxMdqxsLgLH4ktfnzzE5t89yGpl9+P75s/dgQO4odnqsmv3XvUCQcIVi/ylzCcmIl77qMM5mBYzFFerpkI6EPnLJ0fY9Q8OeZIO+O7pvpuqB2iMmWz1o/HeJu1n0frOy1kSbt9uNrJUvPx5LoybUycdbH3xdHBLHVh6/db2IEhU3n/2+3/lGiA15QvCMqT5CZ6V4t0CKR0X6Of00KT3SnXbvoFIsPQggOLvfDwhp4VFu5hMS92xqinJmTsnAOIPgv+r99CkA7593H4tCEYkf9U6lloSZMdh51kR7xoEMe3vhpjTw5DuVO4OoIJXBZAv5XyYFLoaE+GJk50F8WIaMCO5wMrmGXGcHoZ0N4Wr2r1Y9F0/ObQgZ946pkZEdZtJ2HleiJeDwBwxCK6LQzav4ZiKzTvwq+7dcNUaJsJQ0DEC1p8lDKtu077+mYyH83B3zgmC4ADo5/aB2mGcHhZuJLsFQxDm3xv67ssjqDtT5Om2rIoLXBILOr9xupfNQ45Xfd0PMBMItj9Qff/+gB/ZuSA8j8TLx1VygkC83s4PMA0bFn7KVq3uZfIFnHex8lJer3HeGzEcFyi9cWurzoRbqypz72HIHcXupeCbzau63VCYRoxWh805PwuFVWSbj6J46ThmWYE6mgpzoNA5Iw6p4rT5KOSLo4ojN7dPEfExgwudsY1xcyTFxxEcbpM6Djqc1YpyPVH03P34dIdN7/3DpgPe9/tji8TTDQyXBAfx75d32Ff7PwenE/MwU2/NKzZQtFfXajU2Ph48tfv2zDTDguJUoUavF76Hja1O6M9PTB0LfE995njo/Yrz/CWDbRHxceckw2i6XWxVBJFaKZfZ7PRkqH3C8FA8lhefVe8S8bEW9KzbOle9PVD8dif0FCuQ2q54P99wXMERZEjz/uusv1SLE/ExEG4YBmzOCtaNKGNuvxw+Sn6Xhn8b9nEC+Z28B0EeiYeL13EIl363PPghRANFkN23rMHNTEji5YYO8dggSIUgyGUAmHlUt8/71kSbDZvrveweSI94p6/ptdrGDgCetwAwMyabS1buj/5atiXnv9D3HhYnpqci2zwQvvBg6NG3C0GfyZsLmBmqm4/YHrwgqi5srncb1p2YmQp3ABbpgts0RSdSgRQEPIsgSJP4cOpWVP2Vn1qhKnyw9ZYwYblff4uVy+q3eCHFwCqcoUCMsKYuq1RgpqBuHkHdXrjG+mvZBosdVMmHXC4Wch82ZpS/FIaRF394OTyEi2lRheACqTiAmaC6uX0y8e+9r7CLIiFhyBdzump+d/mOoWOIE04QJJkGzITUnbxX9VetXpGJUan0HbsHmz86Vgl8P9i7C+lnk1427QgnCRcwc69uf/KXZPLnbr+Qc7Cn3QfZPBANIwcP0lN9WELcLqDH+vj+6tVF8SVoi4IWaK/evF+bj1jjaN31rp0zOSNV75mRnkggMV3Q77lfZdINdWjTAvKhMdKvVw/IBkuHaViP/rx11n8wghZPxdDtUSjQ+gRr2WBli2sbVO9RKNIsHajapzZo2kO2JZ0ula4PPwoMAAU07cmiNZ2efaM38cNBAIswYLHDrL35FvDMedyZhk+6wkW8M/Sw16xBC7TcDTtWYg+ffVoFhXcwPMAYG/Eqy2qd+XPtYSIh3SAhICQ+DKExPrWDiM9Y7WGVTMQjPcdsn9uXEjD9hYqwqYGTGvQv6tDZPZbiLs2gIeILVtShgs6Kj0q61kUeEY8012tJfIz5mYinIo+Ip6KOiNc2t2tf5BHxSHO9VlO2tjLR/JlQUnwKytTN7qmqR2r32hCfhiJ1Ur1JiqQcT2pHFFwmqR2n3VNxh1T1hSceQ38cEZ8TBeoQbCapnUYQBAKBQCAQCAQCgUAgEAgEAoFAIBAIBAKBQIgd/wkwAJojlsInQDPqAAAAAElFTkSuQmCC",Gfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACCpJREFUeNrsnd1uG0UUx2fXcSBxItuFBOqgylKh4uOiiXrDDZByi2gTbrhs+gRpHwCVPEF5gyQvkAS13LaRuEFCgIOEkJBALqItqBGJVeKmSexljr3rjKcz++Hd9e7OnL+0rbvxOrv7O/8zZ8YzW0JQKBQKhUKhUCgUCoVCoVAoFAqFQqFQKBQKFaOMrF+AZVmJXINhGBaC1w+8RcGj4xMGP/TryLrblQCfhOsRvJ6uz3yaVwb8MF2vgtsRvKZuVw187NejituVAj8M1yN4PV2vTJrXDTzsNz0+oqWD25UDz6R7Q3KteZdD23Q7cXE7gs+A62XOLrgcCtCfy4JCpTSvJHgbvgz8JN1GJD97RrdDHdyuMnhZui/SbUxy2J7E8QhegXRftjeR/qLbkaCoa6t4j0ZUvChoj60ufT6wAey45LAjUQwRRTVC9BIUcBOC/Qey5IHgs+d6SzCS91wC/pmkbScIPqPNvSTdT3H7HmqW+bQED/tKXqlexUpeG/B2kcfvhmHZM9y+Q13adp2KO4vr2v0jAP+EywxtBK9Gkcfuesy18X/qVNTp1p1j23qo4AvkdNz+D93SvE7gIXXnmH836Hbefr2rU1GnFXjBSB6k+7P26we6uV0nx5OJO41i2yJzx23r4kIl/+G7k7nXYP83fx9/vtNovZ03jZ3mleJ9Xe6H2lXMxt4s/fMa3RboVvV5VI1u63TbIp+V6wg+W8AB9DLd5kN+0hbdVmgA1BB8+h1+WwZ8/tURMlvMkdJo/2XXD9qk1mh1NonW6HaTBsA+gk8f9Bs29D4tnRslVyt5snA27/kR+8cW2Xp8TNYfHJHt3Rem3wH0RQp/W3vwUCinYrBjY28VGLO7vnznZbJ8/iVSyovP76vfn/cygEj1Zpvc/PlZJxA4Xafw1xIfmAh578OCd45PbrSLgw4gVy+NS4E6WvzugHw0NUJu0OBwbeQp+Os/NDvZIA3w2SnkYcYcogLf1w8eWhBw0CGtA3Q/Kb18t9EJjp8+nvT1/svf/sfXAEODzww5G9z4xMDgzYjPsTPJEQJC8K1YHG16YOiOizv9NgoSUrqXoLm4/8EEn0VW7WIyVuDMxNFI3WTGeN5OAEQfBKfVe2DooK8fHb8QBAPC36TnUooDtstM4dSDFwZBRJ93m2/T/cqp3B1BBe9XAH/z/QJbMMKg0I2IgMcOOwnwbDNghsoCG3vzbD89CHSRw/2m+x7pcZPcoj0GRsv0nKoh3W3Gkc7TAp4PAnPAILjFdtm8qne3NO9I0Gd3FfQEoCvoJALSHSUM6m7Tvv+JdIeSAi8KAu8A6LbtPbcve3TFRBJBFgWDl5bf7PvdSwO4O1GlAXyQLHCNLehkgzNuaZ7rj7vudxOMBELa77m++/2AG+xUAE8jeP68ck4QsPfbeQHDsEHl5my/1T0Pn9FVQSrPpfUepxU8nwVyr9zdLxPmq1U/Y+9B4A6S7rngm02ru0XKzESMZovMOa+Zwip0mg/jeO48ZjNgpMw4vieYOcN2qaJM82Hgs72KyTuNiwg+YlnM6pdqwRzI8VEEh2hQx1HLIqWs3E8t5tx9/+SQVI7+JRWP9/32iEK8VNXhlugB/q38Ifni5Efv5sQcI/6n5mVbpg4XWSqVSKHgPbT7xkyF6KLsVKHG6fz32n4r8PET02c931OeORf4c9lx/pxB9hF81G2SYdRFN9uvvKCO5vNktnIm0GdC95A9l6efFncQfKQFPWk3rxTv9RzfaAUeYgWox6Nj0p8XfGQEXty4/zbpLtWyEHwEwOGpUzDFyJ7OVQvT53Zrwwdp37nuX80+T4DfSnsQpBE83LyWA5z72XrvRYAJFF7pvkk7NzMBwfMTOthzgyBlgiCVAWCm0d0u79ti02zQtl6W7gF6yG/66rLVNnYAWGkLADNh2BaXyt3VXcu25vwT5r0H1YXKdOg0D8BXfu17esqK1zFpywJmgu4e9FGhK6zrgrb1om7dhZnpYCdAoTPZps5mIj/igsBKIgiGCT6Yu326XrDYwVWQ1pvMgOVJ+XWSz/v/iheaGFiF0xeIIdbUJdUUmENwtxXC3TLdJN21bL3FDn7hQ1vOFnLvVWd8/1LoRsIKnL4uXESLKpgsMJQMYMbobsu+mOg/veuwRRZIEPhsm+63fRf8jr5ziFJOEMTZDJgxuTv+XNVdtXqdB+On0nfSPaT5qfFRX+ldAP1y3MumHePEkQXM1LvbHf4aD3/u3lO+DZame680D6Ch5yCBPtSHJUSdBdRYH7+xt0RgLRsjmBYFU6Blc/N+qT8k1amy8Fs7Z3CGq94Tgx5LIBFV1J1zv0m4L9RhmhbAh4mRbnP1ADakdBiGlczP2ybdByMo8VQM1R6FAlOfYC0brGwRToPqPAqFG6UDV7vUBnW7y7am0q1S9eFHngHgQ3V7sGhLpWffqA2+PwhgEQYsdpi1N9cCnjiPO1PwSVd6gXe6HvaaNZgCzc+GHc+RB7ufFMHhLR0eYKwbeD/Lai1V/9cpLcHb6+98jVnAXAAEr1ia9/n2tg5PsDY0gA5/BXl6ghbp3kC3C6V8kacL+MCHqZ7uDcWhD/xAIdXTPYLX1PWGwtAJCfe1M4LX0O1s1w7Ba1DUaeN6A92uZ5GH4DV1vaEg9LBFHYJHt6tb5KkIPo61Asq53lAMemzXhODTn+Zj+3iV0j2C19T1hkLQh3E9yrjeQLcjeHS7RuneQLfr6XoEr6nrDQWgD/06ELyGblcl3RvoduzTo1AoFAqFQqFQKBQKhUKhUCgUCoVCoVAoFCpy/S/AAP2n3JUi8RqLAAAAAElFTkSuQmCC",Ofe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAYAAADiI6WIAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAACDtJREFUeNrsnd1uG0UUx2c2cdImreIAqWiCqkillRAXddUbbhAttwja8gJtnyDpA6CSJyhvkPQFkiB6XSJxUwkBoQIhIVAdoC2iUZOQ1k3i2Msce9eMp/sx4921d8+cvzSJk3jt9f7OOXPO7MyEMRKJZI845g/num6Sz+hyzgl8QcHzhOBdAl9c8E6PhzcJfHHBOwnANwh8scEP93RhOD+g5K7Yyd2RHvv3fQJfbPjjPYb5PQJfbPBj4tuQ4WEH5PE4wI8YHrZHHo8D/JjhYTsCfJ3AFxv8qPg2aXjYpgB/SOCLD37KsJT7C/t1QQ/egz9r8PS6AP8I+zUZZnbIZASvbsMFsQV8Q7RRzefuEng8aopWYiQrPV63lq8ReDzaMwDfJPC4Qr0WeJHRvyDwWGpWzre9ej5OL6mPR8hfI8HbJfA4+/njlNjZB35fo5ZvEnic4ONm4zwl8Pi0rQG+TuDxCaAejcn+Nwk8vpLuT1HSHYmJCIzA4y3pwrz+bwKPV89EOxPyt00Cj1fPIzz+kMDj1b+ihc2z/43A4xXMpQubcbtH4PFqL8zjRdb/kMDjLekehCypemKZA1jn8SBYSanerNmx7SI4FoL/Q7RjSntIHo9fTz3YsvYJPH79ExDq7xN4/PqJvTqIs8tIyDM71624imy8DvZ4/PJWWXyt8JXtyufvHFH/Ni++rrNPJ9esKW2Rw66Ir9dEuyLarOZR66LdEW1VGEKVwBcLOICeE+1iwldaFW1BGMA6gc+/h98OA37xjWFWmRhi5ZHuj1190WTrO41WC9GSaDeFAWwT+PxBn/egd+n6qRF2ebrErpyMXzO5XXfZ6pM6u7NxwNY2X7lLC9CvYskDEoGHhDgXG/0uby0CY/lXkMDNnR5l5VLw+X3x+34nAgSpWmuymw9etgxB0Q0BfykH1Umia58UvH/84HZ6VqADyMULY6FAfV29/4J9MDXM5k9HT7UH8De+q7WiQR7gyztyJ9lyNS3wnV95JzQQ6BDWAbpOSJ+8u9Myjh8+PK71/EvfPFdzgL7Bl4Yaui5sEvBp36RpbRMOBpH5uEi7TzeG7ntxq24TICGkxwm6i6/fP6ZGkUUvmcwUuLT1eqrelOXdOd8A0jeC/7N3Y+igLx/XXzGCHuGveANDqcNOuNf+QMEHGkFKr3db7dN15WfuviCD1xXAX3lvXE4YYVBoPiXgmcMeBHi5G3ASRYHlrYtynW4CPcjDdcN9h/SYw251D/nOiXOaTejdThbhPC/gVSNwejSCW3LJFpe9R4V5XwE1e6SgEoBS0A8ErD1KaOrd/hZsAymH8jADxzeCeANo9+0db587PWr8ZkGQg4whTnNvd7339R68e6DK09QrnShwTU7owgZnosK8Uo9H/j5KMBIIYb/j9e37A1GwcwE8j+DV8xryjUC+3v4DGIY1VZRn62b3KnxJlwNC+VBer3HeJ1v6UWDo9bvbk0y6taoz9m4Ct5dwrxhfJa/eHaTCTMSoNdh5/7GUWCUO80k8XjmPCivQrOXCnGi96Z6TS6o0w3wS+HJVcfyrnXMEPmW57bKpDX7c6cnj0zCOoEEdXw2XlYtyPa2Yc/ft0z02ffCMTcc879fHAuKFWRsuiR3gz5T22GeH38d3J85Rpj81r9iyYglVuVxm4+PxQ7tvzUwzW1ScLJSzDf/x+nbD+PhjJ07GPmdy5pTx68rj/EO8OBsoFQb8MOfVoIutqzioI6USq0y/ZvSaUB7K57L78cSPBD7VhJ41a59M3Ot4/E7DeIgVoNZHwre5G9eICKqUcf811t4S1SXwKQDnnLf+j7s3nWs9Sc0d1Yf30r8r5d+6d54Av5F3I8gjeLh4DR+48rc7nQcb5v/lOyzc10RxM2MIXp3QIZ8bGKlkBLk0ACeP3h3xvFU5zJr29WHhHqAnvNNXDVtt4xmAmzcDcAYM21VCebTaa9mW/B9h3rupzk6fSBzmAfjCL12bZC3EHZO3KOAM0LvdHqcHL8heZ9rXB5V1Z2dOmJ2AgC5Fm6ociXSkGIE7CCPoJ3gz79b0+oDFDpGCsF6TBiwPJ99kpZL+LV7oYmAVTpchJlhTN6iuwOmDd7sJvDtMN5m327S/2EEXPvTlciL37uyM9ptCGQkrcLpKuJQWVUhRoC8RwMnQu13vw6T/6m0PuyoDMYEv9+m6/XvAe3SdQ5ryjSDLbsDJyLuzj1XtVas3VDA6mb4f7iHMT43F/zs6CO8B0C9lvWzad5wsooCTe++Ohr+kwj9/b1ftg0PDfVyYB9BQOYRA7+tmCWlHARzr45e3rjNYyyYJpkXBFOiwuXk/Vx+x2anJwLt2/uCMkr0PDHomhsSwqD3nfoUpN9RhmhbAh4mRUXP1ADaEdBiGDZmft8baGyOg2BUD21YoMPUJ1rLBypbAaVCtrVCUUTrw6ojcoOqVbEuYLhXWzY9iDUBDVW+waBXT3je4wXcbASzCgMUOFa9FJvDM3+4M4U5XdoH3Sw9vzRpMgVZnw44NsY3NjybAwxu52NOHwKcKXmdZrT9+TuCRQOe6YxYwF4DAIwvzmk9vpnxfgcAPCDp8M9k9wYpwz8nbA4U+ybMFvPFh2MM9Rw695w2FsId7Am+p13PE0BlLdtuZwFvo7XJpR+AtSOqs8XpO3m5nkkfgLfV6jhB60qSOwJO3403yMILPYq0AOq/nyKBn9pkIfP7DfGYvjyncE3hLvZ4jgt6Pz4PG6zl5O4Enb7co3HPydju9nsBb6vUcAfS+fw4Cb6G3Ywn3nLydanoSiUQikUgkEolEIpFIJBKJRCKRSCQSiUQipa7/BBgAYvLXIX7F9AUAAAAASUVORK5CYII=",Pfe={direction_sv_zl1_p0:pfe,direction_sv_zl1_p1:ffe,direction_sv_zl1_p2:yfe,direction_sv_zl1_p3:bfe,direction_sv_zl1:vfe,direction_sv_zl2_p0:xfe,direction_sv_zl2_p1:wfe,direction_sv_zl2_p2:Ife,direction_sv_zl2_p3:Cfe,direction_sv_zl2:Afe,direction_sv_zl3_p0:Sfe,direction_sv_zl3_p1:Tfe,direction_sv_zl3_p2:Efe,direction_sv_zl3_p3:Mfe,direction_sv_zl3:Lfe,direction_sv_zl4_p0:Rfe,direction_sv_zl4_p1:kfe,direction_sv_zl4_p2:Wfe,direction_sv_zl4_p3:Gfe,direction_sv_zl4:Ofe},Bfe=new Map(Object.entries(Pfe));class Ffe extends Jn{constructor(){super(...arguments);_a(this,"zoom");_a(this,"heading");_a(this,"pitch")}getStyleFunction(){return function(t){let i=t.zoom;i<1?i=1:i>4&&(i=4);const n=Math.abs(t.pitch);let s=0;n>=0&&n<=23?s=0:n>23&&n<=45&&(s=1),n>45&&n<=68&&(s=2),n>68&&(s=3);const r=`direction_sv_zl${i}_p${s}`;return[new Qn({image:new rc({src:Bfe.get(r),rotation:t.heading*Math.PI/180})})]}}}const Nfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAYCAYAAAH/g49WAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAbhJREFUeNpi/P//PwM6YIIxGNe9/w/CYA5Y5dp3/0E0jA0QQAzIHDgbWQBIf4DYgaQCJgEQQIzotsMtY2D4+D9IUAAmzoKuACjJiCYG1bD2XQO6VegYJA8QQIzYPI4NMKELoAQKLoUwN6F5CjN4YQ6HeQhZMROm7yAAXTEjOC7QFGELV4AAIsrXuCIBq1p8BmILJUIGYzUQzSAUzfjkMAwkpJgYS8EGkmIQIYNZyDUIR3LYABBADPgSP1ImWADEDsSoJZhsgDYvAFLxUK4h0EUXSMpUeAwDgfNAMQOyDMRiGFGGMhFpmCEQLyTGUCZiDAOFGxAnEGMoEzGGISURgoYyEWsYsYYykWIYMYYyghMtCYYRCiJYwUmyYTgMPQjyciK5hqF7H8h2AAgwouspEl0KqpkcyHEgSTUAmfGCUlNQ6lCyHUjAYVRzKMkOJCLEHgCxPrUcSrQDSY1KakU9qfUTyRZRrB+XA6md+Mk1D1tLnLa5ktSkAnMgrR1GrkNBVUkBkNNPL4eR6FBw1fQAh8MMoV0QmjkOVrVBm6oLsUhfQI5iUHUPagc/AGp4wDBAAOgOB6jDD4BoAGlo9P09koqFAAAAAElFTkSuQmCC";class zv extends Jn{constructor(e,t,i,n){super(e),this.heading=t,this.description=i,this.pano=n,this.setStyle(this.createStyleFunction())}createStyleFunction(){return function(e){return[new Qn({image:new rc({anchor:[.5,50],anchorXUnits:"fraction",anchorYUnits:"pixels",src:Nfe,rotation:e.heading*Math.PI/180})})]}}}const Dfe=1502,Vfe="svFeatureLayer",Zfe=90;function zfe(a){const{infoOpen:e}=Zt(yi()),{locationInfoCoords:t,hidePointer:i,isStreetviewActive:n,noDataAtLocation:s,streetViewLoading:r,panoPositionChanging:l,svFeature:c}=Zt(pd()),h=zi().getOlMap();let g=null,b=null,v=null,C=null,S=null;const L=new mfe({filter:te=>te instanceof zv});L.on("select",z);const R=new Zr([0,0]),G=new Ffe;G.setGeometry(R);const O=new El({source:new Cd({features:[]}),zIndex:Dfe});O.set("cyLayerType",Vfe),h.addLayer(O);function V(te){if(te&&v!==null&&!l.value){const le=Pp(te,h.getView().getProjection());b.getPanorama({location:{lat:le[1],lng:le[0]},radius:Zfe},B)}}function B(te,le){le===google.maps.StreetViewStatus.OK?(s.value=!1,E0(()=>{var ue;v.setPosition(((ue=te==null?void 0:te.location)==null?void 0:ue.latLng)||null),v.setVisible(!0)})):(s.value=!0,r.value=!1,c.value=void 0,v.setVisible(!1))}Kt(e,te=>{te?n.value&&t.value&&re(t.value):c.value=void 0}),Kt(t,te=>{te?n.value&&!l.value&&(r.value=!0,V(te)):(c.value=void 0,h.getViewport().style.cursor="")}),Kt([n,a],async([te,le])=>{te&&le?(r.value=!0,await gfe(),window.hasOwnProperty("google")&&(g=window.google.maps),b===null&&(b=new g.StreetViewService),v===null&&(v=new g.StreetViewPanorama(le,{pov:{heading:0,pitch:0},visible:!1,zoom:1})),C===null&&(C=g.event.addListener(v,"links_changed",()=>ne(!0))),S===null&&(S=g.event.addListener(v,"pov_changed",()=>ne(!1))),V(t.value)):(v!==null&&v.setVisible(!1),c.value=void 0,S&&(g.event.removeListener(S),S=null),C&&(g.event.removeListener(C),C=null))}),Kt(c,te=>{var le,ue;(le=O.getSource())==null||le.clear(),te?((ue=O.getSource())==null||ue.addFeature(te.compass),te.directions.forEach(fe=>{var be;return(be=O.getSource())==null?void 0:be.addFeature(fe)}),i.value=!0,h.addInteraction(L),h.on(["pointermove"],j),O.once("postrender",()=>{r.value=!1})):(h.un(["pointermove"],j),h.removeInteraction(L),i.value=!1)});function z(te){if(te.target.getFeatures().getLength()!==0){const le=te.target.getFeatures().getArray()[0];le.pano&&(te.target.getFeatures().clear(),v.setPano(le.pano))}}function j(te){if(n.value){const le=h.forEachFeatureAtPixel(te.pixel,function(ue){return ue instanceof zv});h.getViewport().style.cursor=le?"pointer":""}}function re(te){R.setCoordinates(te);const le=v.getPov();G.heading=le.heading,G.zoom=Math.floor(v.getZoom()),G.pitch=le.pitch,new zv(R,3,"5","5").heading;const fe=v.getLinks()||[];c.value={compass:G,directions:fe.map(be=>new zv(R,(be==null?void 0:be.heading)||0,(be==null?void 0:be.description)||"",be==null?void 0:be.pano))}}function ne(te){l.value=!0;const le=v.getPosition();if(le){const ue=[le.lng(),le.lat()],fe=pU(ue);re(fe),te&&(t.value=fe),t.value&&!hd(h.getView().calculateExtent(h.getSize()),fe)&&h.getView().setCenter(fe)}E0(()=>{l.value=!1})}}const Ufe={class:"grid"},Xfe={class:"grid col-start-1 row-start-1 before:content-streetview before:col-start-1 before:row-start-1","data-cy":"streetviewNoData"},Hfe={class:"col-start-1 row-start-1 text-white py-[15px]"},Yfe={"data-cy":"streetviewLoading",class:"col-start-1 row-start-1 lux-loader"},Kfe=bt({__name:"street-view",setup(a){const{t:e}=ya(),{isStreetviewActive:t,streetViewLoading:i,noDataAtLocation:n}=Zt(pd()),s=Qe(null);zfe(s);const r=zi().getOlMap();return Kt(i,l=>{l?r.getViewport().style.cursor="wait":r.getViewport().style.cursor=""}),(l,c)=>(se(),Ie("div",Ufe,[Mi(q("div",Xfe,[q("span",Hfe,Fe(X(e)("Il n'y a pas de panorama google disponible à cet endroit")),1)],512),[[xh,X(t)&&X(n)]]),Mi(q("div",Yfe,null,512),[[xh,X(i)]]),Mi(q("div",{ref_key:"streetviewDiv",ref:s,class:"h-[500px] col-start-1 row-start-1"},null,512),[[xh,X(t)&&!X(n)]])]))}}),C5=rl("print",()=>{const a=Qe(void 0),e=Qe(void 0);return{featureInfoPrintableRef:a,locationInfoPrintableRef:e}},{});function qfe(a){return a&&`https://migration.geoportail.lu/qr?url=${a}`}function jfe(a){return typeof a!==void 0?`https://migration.geoportail.lu/qr?url=https://migration.geoportail.lu/qr?map_id=${a}`:void 0}function l8(a){if(a)return a.startsWith("data:image")?a:(a.startsWith("/")&&"https://migration.geoportail.lu/".endsWith("/")&&(a="."+a),`https://migration.geoportail.lu/${a}`)}const Jfe={class:"flex flex-row"},Qfe={class:"no-print grow-[2] flex flex-col justify-end content-end"},$fe={id:"short_url_title",class:"text-3xl text-white"},eye=["value"],tye=["src"],aye={class:"mt-5 text-3xl text-white"},iye={class:"lux-info-table"},nye={style:{"text-align":"left"}},rye={style:{"text-align":"left"}},sye=["disabled"],oye={class:"flex flex-wrap mt-1 gap-x-1"},lye=["href"],uye=["href"],cye=["href"],dye={class:"create-itinerary-text"},hye={key:1},_ye={class:"create-itinerary-text"},mye={key:0,class:"grid before:content-streetview before:col-start-1 before:row-start-1"},gye={key:0,class:"col-start-1 row-start-1 text-center"},pye=bt({__name:"location-info",setup(a){const{t:e}=ya(),{locationInfoCoords:t,locationInfoInfos:i,isStreetviewActive:n,routingFeatureTemp:s}=Zt(pd()),{currentUser:r}=Zt(w1()),{addNotification:l}=oc(),c=zi().getOlMap(),h=Qe(),g=Qe(),b=Qe(),v=Qe(),C=Qe(),S=Qe({}),L=Qe(!1),R=Qe(!1),G=Qe("ACT"),O=Qe("base");Upe(),V(t.value),Kt(t,V);async function V(Me){Me&&(i.value=await Jpe(Me,c.getView().getProjection()),h.value=i.value.shortUrl,g.value=qfe(i.value.shortUrl),C.value=i.value.clickCoordinateLuref,S.value=Object.fromEntries(Object.entries(qpe).map(([ke,Je])=>[Je,XY(Me,c.getView().getProjection(),ke)])),b.value=i.value.elevation===null?"N/A":_3(i.value.elevation),v.value=i.value.address,R.value=i.value.isInBoxOfLidar)}Kt(r,Me=>{G.value=(Me==null?void 0:Me.role)||"anonymous",O.value=(Me==null?void 0:Me.role)||"base"});const{locationInfoPrintableRef:B}=Zt(C5()),z=Me=>B.value=Me,j=Ft(()=>G.value==="ACT"),re=Ft(()=>O.value==="etat"||O.value==="commune"||G.value==="MinTour"),ne=Ft(()=>!0),te=Ft(()=>C.value?`https://lidar.geoportail.lu?COORD_X=${C.value[0]}&COORD_Y=${C.value[1]}&COORD_Z=${parseInt(b.value||"0")}`:""),le=Ft(()=>C.value?`/getRapportForageVirtuel?x=${C.value[0]}&y=${C.value[1]}`:""),ue=Ft(()=>C.value?`http://streetsmart.cyclomedia.com/streetsmart?q=${C.value[0]};${C.value[1]}`:""),fe=Ft(()=>C.value?`https://oblique.geoportail.lu/publication/viewer?x=${C.value[0]}&y=${C.value[1]}&crs=2169`:"");function be(){if(!t.value)return;const Me=new Jn(new Zr(t.value));v.value&&v.value.distance<=100?Me.set("label",eR(v.value)):Me.set("label",S.value.Luref),s.value=Me}function Pe(){n.value=!n.value}async function Be(){L.value=!0;try{await ore(le.value,"")}catch{l(e("An error occurred while downloading forage."),su.ERROR)}finally{L.value=!1}}return Kt(L,Me=>{Me?c.getViewport().style.cursor="wait":c.getViewport().style.cursor=""}),(Me,ke)=>{var Je;return se(),Ie(ua,null,[q("div",{ref:z},[q("div",Jfe,[q("div",Qfe,[q("h3",$fe,Fe(X(e)("Short Url",{ns:"client"})),1),q("input",{"aria-labelledby":"short_url_title",onclick:"this.select();",class:"lux-input",type:"text",value:h.value,readonly:"true"},null,8,eye)]),g.value?(se(),Ie("img",{key:0,class:"mx-5 mt-5",src:g.value},null,8,tye)):je("",!0)]),q("div",null,[q("h3",aye,Fe(X(e)("Location Coordinates",{ns:"client"})),1),q("table",null,[q("tbody",iye,[(se(!0),Ie(ua,null,Gn(S.value,(ut,ht)=>(se(),Ie("tr",{key:ht},[q("th",null,Fe(X(e)(ht)),1),q("td",null,Fe(ut),1)]))),128)),q("tr",null,[q("th",null,Fe(X(e)("Elevation")),1),q("td",null,Fe(b.value),1)]),q("tr",null,[q("th",nye,Fe(X(e)("Adresse la plus proche")),1),q("td",null,Fe(X(eR)(v.value)),1)]),q("tr",null,[q("th",rye,Fe(X(e)("Distance approximative")),1),q("td",null,Fe(X(U0)(((Je=v.value)==null?void 0:Je.distance)||null,0)),1)])])])])]),q("div",null,[j.value?(se(),Ie("button",{key:0,disabled:L.value,class:"lux-btn mt-1",onClick:ke[0]||(ke[0]=ut=>Be())},Fe(X(e)("Rapport forage virtuel")),9,sye)):je("",!0),q("div",oye,[R.value?(se(),Ie("a",{key:0,class:"lux-btn whitespace-nowrap",href:te.value,target:"_geoportal_ext_lidar"},Fe(X(e)("Lien vers la démo lidar")),9,lye)):je("",!0),re.value?(se(),Ie("a",{key:1,class:"lux-btn whitespace-nowrap",href:ue.value,target:"_geoportal_ext_cyclomedia"},Fe(X(e)("Lien vers Cyclomédia")),9,uye)):je("",!0),ne.value?(se(),Ie("a",{key:2,class:"lux-btn whitespace-nowrap",href:fe.value,target:"_geoportal_ext_obliques"},Fe(X(e)("Images obliques")),9,cye)):je("",!0)]),q("div",null,[q("button",{class:"lux-btn mt-1",onClick:ke[1]||(ke[1]=ut=>be())},[q("span",dye,Fe(X(e)("Ajouter étape à mon itinéraire")),1)])]),X(n)?(se(),Ie("div",hye,[q("button",{"data-cy":"streetviewOff",class:"lux-btn mt-3",onClick:ke[2]||(ke[2]=ut=>Pe())},[q("span",_ye,Fe(X(e)("Désactiver Google Streetview")),1)])])):je("",!0)]),q("div",null,[Mi(dt(Kfe,null,null,512),[[xh,X(n)]]),X(n)?je("",!0):(se(),Ie("div",mye,[X(n)?je("",!0):(se(),Ie("div",gye,[q("button",{"data-cy":"streetviewOn",class:"lux-btn mt-3 no-print",onClick:ke[3]||(ke[3]=ut=>Pe())},Fe(X(e)("Activer Google Streetview")),1)]))]))])],64)}}}),A5=rl("metadata",()=>{const a=Wi();function e(i){a.value=i}function t(){a.value=void 0}return{metadataLayer:a,setMetadataLayer:e,clearMetadataLayer:t}},{}),fye={class:"bg-white shadow-modal rounded-lg overflow-hidden w-[700px]"},yye={class:"relative flex flex-row justify-center p-4 border-b-[1px]"},bye={class:"text-xl"},vye={key:0,class:"p-[15px] border-t-[1px]"},xye={class:"flex flex-row justify-end"},gB=bt({__name:"modal-dialog",props:{footer:{type:Boolean,default:!0},maxHeight:{type:Boolean,default:!1},title:String},emits:["close"],setup(a){const{t:e}=ya(),t=Qe();tr(()=>{t.value.focus()});const i=Wi(!0);function n(){i.value=!1}return(s,r)=>(se(),xa(mw,{to:"body"},[r[5]||(r[5]=q("div",{class:"fixed inset-0 bg-gray-900 opacity-40 z-[1050]"},null,-1)),dt(hT,{appear:"","enter-active-class":"duration-200 ease-out","enter-from-class":"transform opacity-0 -translate-y-60","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"transform opacity-0 -translate-y-60",onAfterLeave:r[3]||(r[3]=l=>s.$emit("close"))},{default:Ha(()=>[i.value?(se(),Ie("div",{key:0,role:"dialog",ref_key:"modal",ref:t,tabindex:"0",onKeydown:r[2]||(r[2]=Yl(Hl(l=>n(),["stop"]),["esc"])),class:"fixed inset-x-0 inset-y-8 flex items-start justify-center z-[1100] outline-none"},[q("div",fye,[q("div",yye,[q("h4",bye,Fe(a.title),1),q("button",{type:"button",class:"absolute right-2 top-1 text-slate-400 text-[24px]","data-dismiss":"modal","aria-label":"Close",onClick:r[0]||(r[0]=l=>n())},r[4]||(r[4]=[q("span",{"aria-hidden":"true"},"×",-1)]))]),q("div",{class:ti(["p-[15px] overflow-y-auto",a.maxHeight?"max-h-96":"max-h-full"])},[qa(s.$slots,"content")],2),a.footer?(se(),Ie("div",vye,[q("div",xye,[q("button",{type:"button",class:"lux-btn","data-dismiss":"modal",onClick:r[1]||(r[1]=l=>n())},Fe(X(e)("Close",{ns:"client"})),1)])])):je("",!0)])],544)):je("",!0)]),_:3})]))}});function wye(){const{t:a}=ya();return{translate:(t,i)=>{const s=new DOMParser().parseFromString(t,"text/html");return s.querySelectorAll("[translate]").forEach(l=>{var h;const c=(h=l.textContent)==null?void 0:h.trim();c&&(l.textContent=a(c,i),l.removeAttribute("translate"))}),new XMLSerializer().serializeToString(s)}}}const Iye={key:0,class:"lux-legend"},Cye={key:1},W4=bt({__name:"legend-item",props:{layer:{},displayEmptyLegend:{type:Boolean,default:!1}},emits:["hasLegend","removedLegend"],setup(a,{emit:e}){const{t,i18next:i}=ya(),{translate:n}=wye(),s=Qe(),r=a,l=e;Kt(()=>i.language,()=>c()),tr(()=>c()),Ds(()=>l("removedLegend"));async function c(){var h;s.value=await yx.getLayerMetadata(r.layer.id,i.language),l("hasLegend",!!((h=s.value)!=null&&h.hasLegend))}return(h,g)=>{var v,C,S;const b=Fh("dompurify-html");return s.value&&((v=s.value.legendHtml)!=null&&v.innerHTML)?(se(),Ie("div",Iye,[qa(h.$slots,"title"),Mi(q("div",null,null,512),[[b,X(n)((C=s.value.legendHtml)==null?void 0:C.innerHTML)]])])):!((S=s.value)!=null&&S.hasLegend)&&h.displayEmptyLegend?(se(),Ie("div",Cye,Fe(X(t)("The legend is not available for this layer")),1)):je("",!0)}}}),Aye={class:"font-bold"},Sye={class:"col-span-2"},Ay=bt({__name:"layer-metadata-item",props:{label:{},value:{}},setup(a){const e=a;return(t,i)=>(se(),Ie(ua,null,[q("span",Aye,Fe(e.label),1),q("span",Sye,Fe(e.value),1)],64))}}),Tye={"data-cy":"metadata",class:"grid gap-2 grid-cols-3 pt-3 text-[13px] font-arial break-words"},Eye={key:2,class:"col-span-3 grid gap-2 grid-cols-3"},Mye={class:"font-bold"},Lye={class:"col-span-2"},Rye=["title"],kye=["title"],Wye={key:4,class:"col-span-3"},Gye={class:"font-bold"},Oye={class:"col-span-2"},Pye=["href"],Bye={key:7,class:"col-span-3 grid gap-2 grid-cols-3"},Fye={class:"font-bold"},Nye={class:"col-span-2"},Dye={key:0},Vye={key:1},Zye={key:2},zye={key:3},Uye={key:4},Xye=["href"],Hye={key:8,class:"grid gap-2 grid-cols-3 col-span-3"},Yye={class:"font-bold"},Kye={class:"col-span-2"},qye=["href"],jye={key:9,class:"col-span-3"},kA=220,Jye=bt({__name:"layer-metadata",setup(a){const e=A5(),{metadataLayer:t}=Zt(e),{t:i,i18next:n}=ya(),s=Qe(),r=Qe(!0);Kt(t,async b=>{var v,C;s.value=b?await yx.getLayerMetadata(b.id,n.language):void 0,r.value=(((C=(v=s.value)==null?void 0:v.description)==null?void 0:C.length)||0)<kA}),Kt(()=>n.language,async b=>{t.value&&(s.value=await yx.getLayerMetadata(t.value.id,b))});const l=Ft(()=>{var b,v,C;return r.value?(b=s.value)==null?void 0:b.description:(C=(v=s.value)==null?void 0:v.description)==null?void 0:C.slice(0,kA)});function c(){r.value=!0}function h(){r.value=!1}function g(){e.clearMetadataLayer()}return(b,v)=>{const C=Fh("dompurify-html");return s.value?(se(),xa(gB,{key:0,footer:!1,"max-height":!0,title:X(i)(`${s.value.title}`,{ns:"client"}),onClose:g},{content:Ha(()=>{var S,L,R,G,O,V,B,z,j,re,ne,te,le,ue;return[q("div",Tye,[s.value.name?(se(),xa(Ay,{key:0,label:X(i)("Name"),value:s.value.name},null,8,["label","value"])):je("",!0),s.value.serviceDescription?(se(),xa(Ay,{key:1,label:X(i)("Description du Service"),value:s.value.serviceDescription},null,8,["label","value"])):je("",!0),s.value.description?(se(),Ie("div",Eye,[q("span",Mye,Fe(X(i)("Description")),1),q("span",Lye,[Mi(q("span",null,null,512),[[C,l.value]]),r.value?je("",!0):(se(),Ie("button",{key:0,title:X(i)("Display full description",{ns:"app"}),onClick:c,class:"text-secondary hover:underline"}," ... ",8,Rye)),r.value&&(((S=l.value)==null?void 0:S.length)||0)>kA?(se(),Ie("button",{key:1,title:X(i)("Hide full description",{ns:"app"}),onClick:h,class:"text-secondary hover:underline"}," - ",8,kye)):je("",!0)])])):je("",!0),s.value.legalConstraints?(se(),xa(Ay,{key:3,label:X(i)("Contrainte d'utilisation"),value:s.value.legalConstraints},null,8,["label","value"])):je("",!0),((L=s.value.link)==null?void 0:L.length)!==0?(se(),Ie("div",Wye,[(se(!0),Ie(ua,null,Gn(s.value.link,fe=>(se(),Ie("div",{class:"grid gap-2 grid-cols-3",key:fe},[q("span",Gye,Fe(X(i)("Url vers la resource")),1),q("span",Oye,[q("a",{class:"text-secondary hover:underline",target:"_blank",href:fe},Fe(fe),9,Pye)])]))),128))])):je("",!0),s.value.revisionDate?(se(),xa(Ay,{key:5,label:X(i)("Revision date"),value:X(zY)(s.value.revisionDate,X(n).language)},null,8,["label","value"])):je("",!0),s.value.keyword?(se(),xa(Ay,{key:6,label:X(i)("Keywords"),value:(R=s.value.keyword)==null?void 0:R.join(",")},null,8,["label","value"])):je("",!0),s.value.responsibleParty?(se(),Ie("div",Bye,[q("div",Fye,Fe(X(i)("Contact")),1),q("div",Nye,[(G=s.value.responsibleParty)!=null&&G.organisaton?(se(),Ie("p",Dye,Fe((O=s.value.responsibleParty)==null?void 0:O.organisaton),1)):je("",!0),(V=s.value.responsibleParty)!=null&&V.name?(se(),Ie("p",Vye,Fe((B=s.value.responsibleParty)==null?void 0:B.name),1)):je("",!0),(z=s.value.responsibleParty)!=null&&z.unknown?(se(),Ie("p",Zye,Fe((j=s.value.responsibleParty)==null?void 0:j.unknown),1)):je("",!0),(re=s.value.responsibleParty)!=null&&re.address?(se(),Ie("p",zye,Fe((ne=s.value.responsibleParty)==null?void 0:ne.address),1)):je("",!0),(te=s.value.responsibleParty)!=null&&te.email?(se(),Ie("p",Uye,[q("a",{class:"text-secondary hover:underline",href:"mailto:"+((le=s.value.responsibleParty)==null?void 0:le.email)},Fe((ue=s.value.responsibleParty)==null?void 0:ue.email),9,Xye)])):je("",!0)])])):je("",!0),s.value.metadataLink?(se(),Ie("div",Hye,[q("span",Yye,Fe(X(i)("Link to the metadata")),1),q("span",Kye,[q("a",{class:"text-secondary hover:underline",target:"_blank",href:s.value.metadataLink},Fe(X(i)("link")),9,qye)])])):je("",!0),s.value.isError?(se(),Ie("div",jye,Fe(X(i)("The metadata is right now not available")),1)):X(t)?(se(),xa(W4,{key:10,class:"mt-5 col-span-3",layer:X(t),displayEmptyLegend:!0},{title:Ha(()=>[q("h4",null,Fe(X(i)("Legend")),1)]),_:1},8,["layer"])):je("",!0)])]}),_:1},8,["title"])):je("",!0)}}}),Qye={class:"flex flex-row flex-wrap pl-2.5","data-cy":"themeGrid"},$ye=["onClick"],e0e={class:"text-2xl absolute top-5"},t0e=bt({__name:"theme-grid",props:{themes:{}},setup(a){const{t:e}=ya(),t=a;return(i,n)=>(se(),Ie("div",Qye,[(se(!0),Ie(ua,null,Gn(t.themes,s=>(se(),Ie("button",{class:ti(["relative shrink-0 h-[150px] w-1/2 px-2.5 text-start text-gray-100/40 uppercase hover:bg-[#ccc]",`bg-${s.name}-primary hover:text-${s.name}-primary`]),key:s.id,onClick:r=>i.$emit("setTheme",s.name)},[q("div",e0e,Fe(X(e)(`${s.name}`)),1),q("div",{class:ti(["text-6xl absolute bottom-1 after:font-icons",`after:content-${s.name}`])},null,2)],10,$ye))),128))]))}}),a0e=["aria-expanded"],i0e={class:"py-0.5"},n0e={class:"px-1 py-0.5 shrink-0 flex flex-row text-[12px] bg-secondary text-white"},r0e={class:"py-[3px]"},s0e={class:"flex flex-row flex-wrap ml-1 w-12"},o0e=bt({__name:"theme-selector-button",props:{themes:{},themeName:{},currentTheme:{},isOpen:{type:Boolean}},setup(a){const{t:e}=ya(),t=a,i=Ft(()=>{var n;return((n=t.themes)==null?void 0:n.slice(0,8))||[]});return(n,s)=>(se(),Ie("button",{class:"w-full flex flex-row justify-between bg-tertiary text-white px-2 py-1.5 uppercase cursor-pointer hover:bg-white hover:text-primary","aria-expanded":t.isOpen},[q("span",i0e,Fe(X(e)("Theme"))+": "+Fe(X(e)(`${t.themeName}`)),1),q("span",n0e,[q("span",r0e,Fe(X(e)("Changer")),1),q("span",s0e,[(se(!0),Ie(ua,null,Gn(i.value,r=>(se(),Ie("div",{class:ti(`h-2.5 w-2.5 m-px bg-${r.name}-primary`),key:r.id},null,2))),128))])])],8,a0e))}});class l0e{setCurrentThemeColors(e){const t=document.querySelector(":root");["primary","secondary","tertiary","quaternary"].forEach(n=>{const s=getComputedStyle(t).getPropertyValue(`--${e.replace(/\s/g,"_")}-${n}`);t.style.setProperty(`--color-${n}`,s)})}}const u0e=new l0e,c0e={key:0,class:"absolute inset-x-0 top-14 bottom-0 mt-1 bg-primary overflow-y-auto overflow-x-hidden"},d0e=bt({__name:"theme-selector",setup(a){const e=yi(),{setThemeGridOpen:t}=e,{themeGridOpen:i}=Zt(e),n=ps(),s=od(),{theme:r,themes:l,themeName:c}=Zt(n),h=Ft(()=>{var v;return((v=l.value)==null?void 0:v.filter(C=>{var S;return((S=C.metadata)==null?void 0:S.display_in_switcher)===!0}))||[]});Kt(c,v=>{v&&u0e.setCurrentThemeColors(v)},{immediate:!0});function g(){t(!i.value)}function b(v){s.setTheme(v),g()}return(v,C)=>(se(),Ie(ua,null,[dt(o0e,{"data-cy":"themeSelectorButton",onClick:g,themes:h.value,currentTheme:X(r),themeName:X(c),isOpen:X(i)},null,8,["themes","currentTheme","themeName","isOpen"]),X(i)?(se(),Ie("div",c0e,[dt(t0e,{onSetTheme:b,themes:h.value},null,8,["themes"])])):je("",!0)],64))}}),h0e=["aria-expanded"],_0e={class:"leading-6"},m0e={key:0},v2=bt({__name:"expandable-panel",props:{expanded:{type:Boolean},title:{}},emits:["togglePanel"],setup(a){return(e,t)=>(se(),Ie(ua,null,[q("button",{onClick:t[0]||(t[0]=i=>e.$emit("togglePanel")),class:"group w-full text-left flex px-2 py-1.5 uppercase bg-tertiary","aria-expanded":e.expanded},[q("span",{class:ti(["grow",e.expanded?"text-white":"text-secondary"])},Fe(e.title),3),q("span",_0e,[q("span",{class:ti(["fa fa-sharp fa-solid group-hover:text-white text-primary",e.expanded?"fa-caret-up":"fa-caret-down"])},null,2)])],8,h0e),dt(hT,{name:"slide"},{default:Ha(()=>[e.expanded?(se(),Ie("div",m0e,[qa(e.$slots,"default")])):je("",!0)]),_:3})],64))}});const g0e={class:"mb-px",key:"node.id"},p0e=["data-cy"],f0e=["aria-expanded","data-cy"],y0e={class:"grow"},b0e={class:"leading-6"},v0e=["data-cy"],x0e={key:1,class:"flex text-tertiary pr-2"},w0e=["data-cy"],I0e=["data-cy"],C0e={class:"ml-1 hover:underline"},G4=bt({__name:"layer-tree-node",props:{node:{}},emits:["toggleLayer","toggleParent"],setup(a,{emit:e}){const t=a,i=e,{t:n}=ya(),{setMetadataLayer:s}=A5(),r=!!t.node.children,l=t.node.depth===0,c=t.node.depth>=10,h=Ft(()=>n(t.node.name,{ns:"client"}));function g(v){i("toggleLayer",v)}function b(v){i("toggleParent",v)}return(v,C)=>{const S=V6("layer-tree-node",!0);return r?(se(),Ie("div",g0e,[v.node.depth===1?(se(),Ie("div",{key:0,"data-cy":`parentLayerLabel-${v.node.id}`},[dt(v2,{title:h.value,expanded:v.node.expanded,onTogglePanel:C[0]||(C[0]=L=>b(v.node))},null,8,["title","expanded"])],8,p0e)):v.node.depth>1&&!c?(se(),Ie("button",{key:1,class:ti(["w-full text-left flex px-2 py-1.5 pl-2",v.node.expanded?"text-tertiary":"bg-white text-primary"]),"aria-expanded":v.node.expanded,onClick:C[1]||(C[1]=L=>b(v.node)),"data-cy":`parentLayerLabel-${v.node.id}`},[q("div",y0e,Fe(h.value),1),q("div",b0e,[q("div",{class:ti(["fa-sharp fa-solid",v.node.expanded?"fa-minus":"fa-plus"])},null,2)])],10,f0e)):je("",!0),c?je("",!0):(se(),Ie("div",{key:2,class:ti(["bg-secondary",[{"pl-2":v.node.depth>1},{"lux-collapse":!l},{expanded:!l&&v.node.expanded}]]),"data-cy":`subLayerLabel-${v.node.id}`},[(se(!0),Ie(ua,null,Gn(v.node.children,L=>(se(),xa(S,{key:L.id,node:L,onToggleParent:C[2]||(C[2]=R=>b(R)),onToggleLayer:C[3]||(C[3]=R=>g(R))},null,8,["node"]))),128))],10,v0e))])):(se(),Ie("div",x0e,[q("button",{"data-cy":`layerMetadata-${v.node.id}`,class:"self-start before:text-[.85rem] before:transform before:translate-y-[.1rem] before:inline-block before:content-['\\f129'] fa-solid fa-fw fa-fh fa-info",onClick:C[4]||(C[4]=L=>X(s)(v.node))},null,8,w0e),q("button",{class:ti(["w-full text-left",{"font-bold":v.node.checked}]),onClick:C[5]||(C[5]=L=>g(v.node)),"data-cy":`layerLabel-${v.node.id}`},[q("i",{class:ti(["fa-solid",v.node.checked?"fa-check-square":"fa-square"])},null,2),q("span",C0e,Fe(h.value),1)],10,I0e)]))}}});function O4(a,e=0){const{name:t,id:i,children:n,metadata:s}=a;return{name:t,id:i,depth:e,children:n==null?void 0:n.map(r=>O4(r,e+1)),checked:!1,expanded:(s==null?void 0:s.is_expanded)||!1}}class A0e{toggleNode(e,t,i){var n;return(t==null?void 0:t.id)===e?{...t,[i]:!t[i]}:{...t,children:(n=t.children)==null?void 0:n.map(s=>this.toggleNode(e,s,i))}}updateLayers(e,t){const{id:i}=e;if(e.children)return{...e,children:e.children.map(n=>this.updateLayers(n,t))};{const n=!!(t!=null&&t.find(s=>s.id===i));return{...e,checked:n}}}}const Lp=new A0e,S0e={key:0,class:"mb-7"},T0e=bt({__name:"catalog-tree",setup(a){const e=mn(),t=ps(),i=al(),n=Wi(),s=Wi(),r=Ft(()=>!e.is3dActive||e.is3dActive&&!e.is3dMesh),{layerTrees_3d:l}=Zt(t);er(c);function c(){var b;if(t.theme&&e.layers){const v=n.value&&n.value.id===((b=t.theme)==null?void 0:b.id)?n.value:O4(t.theme);n.value=Lp.updateLayers(v,e.layers)}}er(()=>{if(l.value){const b=s.value?s.value:O4(l.value);s.value=Lp.updateLayers(b,e.layers3d)}});function h(b,v){const C=v?s:n;C.value=Lp.toggleNode(b.id,C.value,"expanded")}function g(b,v){i.toggleLayer(+b.id,!b.checked,v,!0)}return(b,v)=>(se(),Ie("div",null,[s.value&&X(e).is3dActive?(se(),Ie("div",S0e,[(se(),xa(G4,{node:s.value,key:s.value.id,onToggleParent:v[0]||(v[0]=C=>h(C,!0)),onToggleLayer:v[1]||(v[1]=C=>g(C,!0))},null,8,["node"]))])):je("",!0),n.value&&r.value?(se(),xa(G4,{node:n.value,key:n.value.id,onToggleParent:v[2]||(v[2]=C=>h(C,!1)),onToggleLayer:v[3]||(v[3]=C=>g(C,!1))},null,8,["node"])):je("",!0)]))}}),E0e=bt({__name:"catalog-tab",setup(a){const{themeGridOpen:e}=Zt(yi());return(t,i)=>(se(),Ie(ua,null,[dt(d0e),X(e)===!1?(se(),xa(T0e,{key:0,"data-cy":"catalog",class:"pt-5 absolute inset-x-2.5 bg-primary overflow-y-auto overflow-x-hidden"})):je("",!0)],64))}});/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function u8(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),t.push.apply(t,i)}return t}function cc(a){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?u8(Object(t),!0).forEach(function(i){M0e(a,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):u8(Object(t)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(t,i))})}return a}function x2(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?x2=function(e){return typeof e}:x2=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x2(a)}function M0e(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function fd(){return fd=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i])}return a},fd.apply(this,arguments)}function L0e(a,e){if(a==null)return{};var t={},i=Object.keys(a),n,s;for(s=0;s<i.length;s++)n=i[s],!(e.indexOf(n)>=0)&&(t[n]=a[n]);return t}function R0e(a,e){if(a==null)return{};var t=L0e(a,e),i,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(n=0;n<s.length;n++)i=s[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(a,i)&&(t[i]=a[i])}return t}var k0e="1.15.6";function dd(a){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(a)}var Sd=dd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),G1=dd(/Edge/i),c8=dd(/firefox/i),y0=dd(/safari/i)&&!dd(/chrome/i)&&!dd(/android/i),S5=dd(/iP(ad|od|hone)/i),pB=dd(/chrome/i)&&dd(/android/i),fB={capture:!1,passive:!1};function Ai(a,e,t){a.addEventListener(e,t,!Sd&&fB)}function xi(a,e,t){a.removeEventListener(e,t,!Sd&&fB)}function Jx(a,e){if(e){if(e[0]===">"&&(e=e.substring(1)),a)try{if(a.matches)return a.matches(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e)}catch{return!1}return!1}}function yB(a){return a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode}function Ul(a,e,t,i){if(a){t=t||document;do{if(e!=null&&(e[0]===">"?a.parentNode===t&&Jx(a,e):Jx(a,e))||i&&a===t)return a;if(a===t)break}while(a=yB(a))}return null}var d8=/\s+/g;function Ho(a,e,t){if(a&&e)if(a.classList)a.classList[t?"add":"remove"](e);else{var i=(" "+a.className+" ").replace(d8," ").replace(" "+e+" "," ");a.className=(i+(t?" "+e:"")).replace(d8," ")}}function Va(a,e,t){var i=a&&a.style;if(i){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(t=a.currentStyle),e===void 0?t:t[e];!(e in i)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),i[e]=t+(typeof t=="string"?"":"px")}}function Rp(a,e){var t="";if(typeof a=="string")t=a;else do{var i=Va(a,"transform");i&&i!=="none"&&(t=i+" "+t)}while(!e&&(a=a.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(t)}function bB(a,e,t){if(a){var i=a.getElementsByTagName(e),n=0,s=i.length;if(t)for(;n<s;n++)t(i[n],n);return i}return[]}function tc(){var a=document.scrollingElement;return a||document.documentElement}function Lr(a,e,t,i,n){if(!(!a.getBoundingClientRect&&a!==window)){var s,r,l,c,h,g,b;if(a!==window&&a.parentNode&&a!==tc()?(s=a.getBoundingClientRect(),r=s.top,l=s.left,c=s.bottom,h=s.right,g=s.height,b=s.width):(r=0,l=0,c=window.innerHeight,h=window.innerWidth,g=window.innerHeight,b=window.innerWidth),(e||t)&&a!==window&&(n=n||a.parentNode,!Sd))do if(n&&n.getBoundingClientRect&&(Va(n,"transform")!=="none"||t&&Va(n,"position")!=="static")){var v=n.getBoundingClientRect();r-=v.top+parseInt(Va(n,"border-top-width")),l-=v.left+parseInt(Va(n,"border-left-width")),c=r+s.height,h=l+s.width;break}while(n=n.parentNode);if(i&&a!==window){var C=Rp(n||a),S=C&&C.a,L=C&&C.d;C&&(r/=L,l/=S,b/=S,g/=L,c=r+g,h=l+b)}return{top:r,left:l,bottom:c,right:h,width:b,height:g}}}function h8(a,e,t){for(var i=yh(a,!0),n=Lr(a)[e];i;){var s=Lr(i)[t],r=void 0;if(t==="top"||t==="left"?r=n>=s:r=n<=s,!r)return i;if(i===tc())break;i=yh(i,!1)}return!1}function Jp(a,e,t,i){for(var n=0,s=0,r=a.children;s<r.length;){if(r[s].style.display!=="none"&&r[s]!==Za.ghost&&(i||r[s]!==Za.dragged)&&Ul(r[s],t.draggable,a,!1)){if(n===e)return r[s];n++}s++}return null}function T5(a,e){for(var t=a.lastElementChild;t&&(t===Za.ghost||Va(t,"display")==="none"||e&&!Jx(t,e));)t=t.previousElementSibling;return t||null}function fl(a,e){var t=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)a.nodeName.toUpperCase()!=="TEMPLATE"&&a!==Za.clone&&(!e||Jx(a,e))&&t++;return t}function _8(a){var e=0,t=0,i=tc();if(a)do{var n=Rp(a),s=n.a,r=n.d;e+=a.scrollLeft*s,t+=a.scrollTop*r}while(a!==i&&(a=a.parentNode));return[e,t]}function W0e(a,e){for(var t in a)if(a.hasOwnProperty(t)){for(var i in e)if(e.hasOwnProperty(i)&&e[i]===a[t][i])return Number(t)}return-1}function yh(a,e){if(!a||!a.getBoundingClientRect)return tc();var t=a,i=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var n=Va(t);if(t.clientWidth<t.scrollWidth&&(n.overflowX=="auto"||n.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(n.overflowY=="auto"||n.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return tc();if(i||e)return t;i=!0}}while(t=t.parentNode);return tc()}function G0e(a,e){if(a&&e)for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a}function WA(a,e){return Math.round(a.top)===Math.round(e.top)&&Math.round(a.left)===Math.round(e.left)&&Math.round(a.height)===Math.round(e.height)&&Math.round(a.width)===Math.round(e.width)}var b0;function vB(a,e){return function(){if(!b0){var t=arguments,i=this;t.length===1?a.call(i,t[0]):a.apply(i,t),b0=setTimeout(function(){b0=void 0},e)}}}function O0e(){clearTimeout(b0),b0=void 0}function xB(a,e,t){a.scrollLeft+=e,a.scrollTop+=t}function wB(a){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(a).cloneNode(!0):t?t(a).clone(!0)[0]:a.cloneNode(!0)}function IB(a,e,t){var i={};return Array.from(a.children).forEach(function(n){var s,r,l,c;if(!(!Ul(n,e.draggable,a,!1)||n.animated||n===t)){var h=Lr(n);i.left=Math.min((s=i.left)!==null&&s!==void 0?s:1/0,h.left),i.top=Math.min((r=i.top)!==null&&r!==void 0?r:1/0,h.top),i.right=Math.max((l=i.right)!==null&&l!==void 0?l:-1/0,h.right),i.bottom=Math.max((c=i.bottom)!==null&&c!==void 0?c:-1/0,h.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Lo="Sortable"+new Date().getTime();function P0e(){var a=[],e;return{captureAnimationState:function(){if(a=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(n){if(!(Va(n,"display")==="none"||n===Za.ghost)){a.push({target:n,rect:Lr(n)});var s=cc({},a[a.length-1].rect);if(n.thisAnimationDuration){var r=Rp(n,!0);r&&(s.top-=r.f,s.left-=r.e)}n.fromRect=s}})}},addAnimationState:function(i){a.push(i)},removeAnimationState:function(i){a.splice(W0e(a,{target:i}),1)},animateAll:function(i){var n=this;if(!this.options.animation){clearTimeout(e),typeof i=="function"&&i();return}var s=!1,r=0;a.forEach(function(l){var c=0,h=l.target,g=h.fromRect,b=Lr(h),v=h.prevFromRect,C=h.prevToRect,S=l.rect,L=Rp(h,!0);L&&(b.top-=L.f,b.left-=L.e),h.toRect=b,h.thisAnimationDuration&&WA(v,b)&&!WA(g,b)&&(S.top-b.top)/(S.left-b.left)===(g.top-b.top)/(g.left-b.left)&&(c=F0e(S,v,C,n.options)),WA(b,g)||(h.prevFromRect=g,h.prevToRect=b,c||(c=n.options.animation),n.animate(h,S,b,c)),c&&(s=!0,r=Math.max(r,c),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},c),h.thisAnimationDuration=c)}),clearTimeout(e),s?e=setTimeout(function(){typeof i=="function"&&i()},r):typeof i=="function"&&i(),a=[]},animate:function(i,n,s,r){if(r){Va(i,"transition",""),Va(i,"transform","");var l=Rp(this.el),c=l&&l.a,h=l&&l.d,g=(n.left-s.left)/(c||1),b=(n.top-s.top)/(h||1);i.animatingX=!!g,i.animatingY=!!b,Va(i,"transform","translate3d("+g+"px,"+b+"px,0)"),this.forRepaintDummy=B0e(i),Va(i,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),Va(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){Va(i,"transition",""),Va(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},r)}}}}function B0e(a){return a.offsetWidth}function F0e(a,e,t,i){return Math.sqrt(Math.pow(e.top-a.top,2)+Math.pow(e.left-a.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*i.animation}var Ng=[],GA={initializeByDefault:!0},O1={mount:function(e){for(var t in GA)GA.hasOwnProperty(t)&&!(t in e)&&(e[t]=GA[t]);Ng.forEach(function(i){if(i.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Ng.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=e+"Global";Ng.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][s]&&t[r.pluginName][s](cc({sortable:t},i)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](cc({sortable:t},i)))})},initializePlugins:function(e,t,i,n){Ng.forEach(function(l){var c=l.pluginName;if(!(!e.options[c]&&!l.initializeByDefault)){var h=new l(e,t,e.options);h.sortable=e,h.options=e.options,e[c]=h,fd(i,h.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var r=this.modifyOption(e,s,e.options[s]);typeof r<"u"&&(e.options[s]=r)}},getEventProperties:function(e,t){var i={};return Ng.forEach(function(n){typeof n.eventProperties=="function"&&fd(i,n.eventProperties.call(t[n.pluginName],e))}),i},modifyOption:function(e,t,i){var n;return Ng.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(n=s.optionListeners[t].call(e[s.pluginName],i))}),n}};function N0e(a){var e=a.sortable,t=a.rootEl,i=a.name,n=a.targetEl,s=a.cloneEl,r=a.toEl,l=a.fromEl,c=a.oldIndex,h=a.newIndex,g=a.oldDraggableIndex,b=a.newDraggableIndex,v=a.originalEvent,C=a.putSortable,S=a.extraEventProperties;if(e=e||t&&t[Lo],!!e){var L,R=e.options,G="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Sd&&!G1?L=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(L=document.createEvent("Event"),L.initEvent(i,!0,!0)),L.to=r||t,L.from=l||t,L.item=n||t,L.clone=s,L.oldIndex=c,L.newIndex=h,L.oldDraggableIndex=g,L.newDraggableIndex=b,L.originalEvent=v,L.pullMode=C?C.lastPutMode:void 0;var O=cc(cc({},S),O1.getEventProperties(i,e));for(var V in O)L[V]=O[V];t&&t.dispatchEvent(L),R[G]&&R[G].call(e,L)}}var D0e=["evt"],vo=function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=i.evt,s=R0e(i,D0e);O1.pluginEvent.bind(Za)(e,t,cc({dragEl:Vt,parentEl:sr,ghostEl:ii,rootEl:Dn,nextEl:V_,lastDownEl:w2,cloneEl:Kn,cloneHidden:dh,dragStarted:Xy,putSortable:hs,activeSortable:Za.active,originalEvent:n,oldIndex:cp,oldDraggableIndex:v0,newIndex:Yo,newDraggableIndex:oh,hideGhostForTarget:TB,unhideGhostForTarget:EB,cloneNowHidden:function(){dh=!0},cloneNowShown:function(){dh=!1},dispatchSortableEvent:function(l){Ks({sortable:t,name:l,originalEvent:n})}},s))};function Ks(a){N0e(cc({putSortable:hs,cloneEl:Kn,targetEl:Vt,rootEl:Dn,oldIndex:cp,oldDraggableIndex:v0,newIndex:Yo,newDraggableIndex:oh},a))}var Vt,sr,ii,Dn,V_,w2,Kn,dh,cp,Yo,v0,oh,Uv,hs,Jg=!1,Qx=!1,$x=[],W_,Zl,OA,PA,m8,g8,Xy,Dg,x0,w0=!1,Xv=!1,I2,Ms,BA=[],P4=!1,ew=[],lI=typeof document<"u",Hv=S5,p8=G1||Sd?"cssFloat":"float",V0e=lI&&!pB&&!S5&&"draggable"in document.createElement("div"),CB=function(){if(lI){if(Sd)return!1;var a=document.createElement("x");return a.style.cssText="pointer-events:auto",a.style.pointerEvents==="auto"}}(),AB=function(e,t){var i=Va(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=Jp(e,0,t),r=Jp(e,1,t),l=s&&Va(s),c=r&&Va(r),h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Lr(s).width,g=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Lr(r).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&l.float&&l.float!=="none"){var b=l.float==="left"?"left":"right";return r&&(c.clear==="both"||c.clear===b)?"vertical":"horizontal"}return s&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||h>=n&&i[p8]==="none"||r&&i[p8]==="none"&&h+g>n)?"vertical":"horizontal"},Z0e=function(e,t,i){var n=i?e.left:e.top,s=i?e.right:e.bottom,r=i?e.width:e.height,l=i?t.left:t.top,c=i?t.right:t.bottom,h=i?t.width:t.height;return n===l||s===c||n+r/2===l+h/2},z0e=function(e,t){var i;return $x.some(function(n){var s=n[Lo].options.emptyInsertThreshold;if(!(!s||T5(n))){var r=Lr(n),l=e>=r.left-s&&e<=r.right+s,c=t>=r.top-s&&t<=r.bottom+s;if(l&&c)return i=n}}),i},SB=function(e){function t(s,r){return function(l,c,h,g){var b=l.options.group.name&&c.options.group.name&&l.options.group.name===c.options.group.name;if(s==null&&(r||b))return!0;if(s==null||s===!1)return!1;if(r&&s==="clone")return s;if(typeof s=="function")return t(s(l,c,h,g),r)(l,c,h,g);var v=(r?l:c).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var i={},n=e.group;(!n||x2(n)!="object")&&(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},TB=function(){!CB&&ii&&Va(ii,"display","none")},EB=function(){!CB&&ii&&Va(ii,"display","")};lI&&!pB&&document.addEventListener("click",function(a){if(Qx)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),Qx=!1,!1},!0);var G_=function(e){if(Vt){e=e.touches?e.touches[0]:e;var t=z0e(e.clientX,e.clientY);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[Lo]._onDragOver(i)}}},U0e=function(e){Vt&&Vt.parentNode[Lo]._isOutsideThisEl(e.target)};function Za(a,e){if(!(a&&a.nodeType&&a.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a,this.options=e=fd({},e),a[Lo]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return AB(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(r,l){r.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Za.supportPointer!==!1&&"PointerEvent"in window&&(!y0||S5),emptyInsertThreshold:5};O1.initializePlugins(this,a,t);for(var i in t)!(i in e)&&(e[i]=t[i]);SB(e);for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));this.nativeDraggable=e.forceFallback?!1:V0e,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ai(a,"pointerdown",this._onTapStart):(Ai(a,"mousedown",this._onTapStart),Ai(a,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ai(a,"dragover",this),Ai(a,"dragenter",this)),$x.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),fd(this,P0e())}Za.prototype={constructor:Za,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Dg=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,Vt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,s=n.preventOnFilter,r=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,c=(l||e).target,h=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||c,g=n.filter;if(Q0e(i),!Vt&&!(/mousedown|pointerdown/.test(r)&&e.button!==0||n.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&y0&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=Ul(c,n.draggable,i,!1),!(c&&c.animated)&&w2!==c)){if(cp=fl(c),v0=fl(c,n.draggable),typeof g=="function"){if(g.call(this,e,c,this)){Ks({sortable:t,rootEl:h,name:"filter",targetEl:c,toEl:i,fromEl:i}),vo("filter",t,{evt:e}),s&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(b){if(b=Ul(h,b.trim(),i,!1),b)return Ks({sortable:t,rootEl:b,name:"filter",targetEl:c,fromEl:i,toEl:i}),vo("filter",t,{evt:e}),!0}),g)){s&&e.preventDefault();return}n.handle&&!Ul(h,n.handle,i,!1)||this._prepareDragStart(e,l,c)}}},_prepareDragStart:function(e,t,i){var n=this,s=n.el,r=n.options,l=s.ownerDocument,c;if(i&&!Vt&&i.parentNode===s){var h=Lr(i);if(Dn=s,Vt=i,sr=Vt.parentNode,V_=Vt.nextSibling,w2=i,Uv=r.group,Za.dragged=Vt,W_={target:Vt,clientX:(t||e).clientX,clientY:(t||e).clientY},m8=W_.clientX-h.left,g8=W_.clientY-h.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,Vt.style["will-change"]="all",c=function(){if(vo("delayEnded",n,{evt:e}),Za.eventCanceled){n._onDrop();return}n._disableDelayedDragEvents(),!c8&&n.nativeDraggable&&(Vt.draggable=!0),n._triggerDragStart(e,t),Ks({sortable:n,name:"choose",originalEvent:e}),Ho(Vt,r.chosenClass,!0)},r.ignore.split(",").forEach(function(g){bB(Vt,g.trim(),FA)}),Ai(l,"dragover",G_),Ai(l,"mousemove",G_),Ai(l,"touchmove",G_),r.supportPointer?(Ai(l,"pointerup",n._onDrop),!this.nativeDraggable&&Ai(l,"pointercancel",n._onDrop)):(Ai(l,"mouseup",n._onDrop),Ai(l,"touchend",n._onDrop),Ai(l,"touchcancel",n._onDrop)),c8&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Vt.draggable=!0),vo("delayStart",this,{evt:e}),r.delay&&(!r.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(G1||Sd))){if(Za.eventCanceled){this._onDrop();return}r.supportPointer?(Ai(l,"pointerup",n._disableDelayedDrag),Ai(l,"pointercancel",n._disableDelayedDrag)):(Ai(l,"mouseup",n._disableDelayedDrag),Ai(l,"touchend",n._disableDelayedDrag),Ai(l,"touchcancel",n._disableDelayedDrag)),Ai(l,"mousemove",n._delayedDragTouchMoveHandler),Ai(l,"touchmove",n._delayedDragTouchMoveHandler),r.supportPointer&&Ai(l,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(c,r.delay)}else c()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Vt&&FA(Vt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;xi(e,"mouseup",this._disableDelayedDrag),xi(e,"touchend",this._disableDelayedDrag),xi(e,"touchcancel",this._disableDelayedDrag),xi(e,"pointerup",this._disableDelayedDrag),xi(e,"pointercancel",this._disableDelayedDrag),xi(e,"mousemove",this._delayedDragTouchMoveHandler),xi(e,"touchmove",this._delayedDragTouchMoveHandler),xi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Ai(document,"pointermove",this._onTouchMove):t?Ai(document,"touchmove",this._onTouchMove):Ai(document,"mousemove",this._onTouchMove):(Ai(Vt,"dragend",this),Ai(Dn,"dragstart",this._onDragStart));try{document.selection?C2(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Jg=!1,Dn&&Vt){vo("dragStarted",this,{evt:t}),this.nativeDraggable&&Ai(document,"dragover",U0e);var i=this.options;!e&&Ho(Vt,i.dragClass,!1),Ho(Vt,i.ghostClass,!0),Za.active=this,e&&this._appendGhost(),Ks({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Zl){this._lastX=Zl.clientX,this._lastY=Zl.clientY,TB();for(var e=document.elementFromPoint(Zl.clientX,Zl.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Zl.clientX,Zl.clientY),e!==t);)t=e;if(Vt.parentNode[Lo]._isOutsideThisEl(e),t)do{if(t[Lo]){var i=void 0;if(i=t[Lo]._onDragOver({clientX:Zl.clientX,clientY:Zl.clientY,target:e,rootEl:t}),i&&!this.options.dragoverBubble)break}e=t}while(t=yB(t));EB()}},_onTouchMove:function(e){if(W_){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,s=e.touches?e.touches[0]:e,r=ii&&Rp(ii,!0),l=ii&&r&&r.a,c=ii&&r&&r.d,h=Hv&&Ms&&_8(Ms),g=(s.clientX-W_.clientX+n.x)/(l||1)+(h?h[0]-BA[0]:0)/(l||1),b=(s.clientY-W_.clientY+n.y)/(c||1)+(h?h[1]-BA[1]:0)/(c||1);if(!Za.active&&!Jg){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(ii){r?(r.e+=g-(OA||0),r.f+=b-(PA||0)):r={a:1,b:0,c:0,d:1,e:g,f:b};var v="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Va(ii,"webkitTransform",v),Va(ii,"mozTransform",v),Va(ii,"msTransform",v),Va(ii,"transform",v),OA=g,PA=b,Zl=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ii){var e=this.options.fallbackOnBody?document.body:Dn,t=Lr(Vt,!0,Hv,!0,e),i=this.options;if(Hv){for(Ms=e;Va(Ms,"position")==="static"&&Va(Ms,"transform")==="none"&&Ms!==document;)Ms=Ms.parentNode;Ms!==document.body&&Ms!==document.documentElement?(Ms===document&&(Ms=tc()),t.top+=Ms.scrollTop,t.left+=Ms.scrollLeft):Ms=tc(),BA=_8(Ms)}ii=Vt.cloneNode(!0),Ho(ii,i.ghostClass,!1),Ho(ii,i.fallbackClass,!0),Ho(ii,i.dragClass,!0),Va(ii,"transition",""),Va(ii,"transform",""),Va(ii,"box-sizing","border-box"),Va(ii,"margin",0),Va(ii,"top",t.top),Va(ii,"left",t.left),Va(ii,"width",t.width),Va(ii,"height",t.height),Va(ii,"opacity","0.8"),Va(ii,"position",Hv?"absolute":"fixed"),Va(ii,"zIndex","100000"),Va(ii,"pointerEvents","none"),Za.ghost=ii,e.appendChild(ii),Va(ii,"transform-origin",m8/parseInt(ii.style.width)*100+"% "+g8/parseInt(ii.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,s=i.options;if(vo("dragStart",this,{evt:e}),Za.eventCanceled){this._onDrop();return}vo("setupClone",this),Za.eventCanceled||(Kn=wB(Vt),Kn.removeAttribute("id"),Kn.draggable=!1,Kn.style["will-change"]="",this._hideClone(),Ho(Kn,this.options.chosenClass,!1),Za.clone=Kn),i.cloneId=C2(function(){vo("clone",i),!Za.eventCanceled&&(i.options.removeCloneOnHide||Dn.insertBefore(Kn,Vt),i._hideClone(),Ks({sortable:i,name:"clone"}))}),!t&&Ho(Vt,s.dragClass,!0),t?(Qx=!0,i._loopId=setInterval(i._emulateDragOver,50)):(xi(document,"mouseup",i._onDrop),xi(document,"touchend",i._onDrop),xi(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,Vt)),Ai(document,"drop",i),Va(Vt,"transform","translateZ(0)")),Jg=!0,i._dragStartId=C2(i._dragStarted.bind(i,t,e)),Ai(document,"selectstart",i),Xy=!0,window.getSelection().removeAllRanges(),y0&&Va(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,i=e.target,n,s,r,l=this.options,c=l.group,h=Za.active,g=Uv===c,b=l.sort,v=hs||h,C,S=this,L=!1;if(P4)return;function R(Je,ut){vo(Je,S,cc({evt:e,isOwner:g,axis:C?"vertical":"horizontal",revert:r,dragRect:n,targetRect:s,canSort:b,fromSortable:v,target:i,completed:O,onMove:function(Dt,We){return Yv(Dn,t,Vt,n,Dt,Lr(Dt),e,We)},changed:V},ut))}function G(){R("dragOverAnimationCapture"),S.captureAnimationState(),S!==v&&v.captureAnimationState()}function O(Je){return R("dragOverCompleted",{insertion:Je}),Je&&(g?h._hideClone():h._showClone(S),S!==v&&(Ho(Vt,hs?hs.options.ghostClass:h.options.ghostClass,!1),Ho(Vt,l.ghostClass,!0)),hs!==S&&S!==Za.active?hs=S:S===Za.active&&hs&&(hs=null),v===S&&(S._ignoreWhileAnimating=i),S.animateAll(function(){R("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(i===Vt&&!Vt.animated||i===t&&!i.animated)&&(Dg=null),!l.dragoverBubble&&!e.rootEl&&i!==document&&(Vt.parentNode[Lo]._isOutsideThisEl(e.target),!Je&&G_(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),L=!0}function V(){Yo=fl(Vt),oh=fl(Vt,l.draggable),Ks({sortable:S,name:"change",toEl:t,newIndex:Yo,newDraggableIndex:oh,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),i=Ul(i,l.draggable,t,!0),R("dragOver"),Za.eventCanceled)return L;if(Vt.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||S._ignoreWhileAnimating===i)return O(!1);if(Qx=!1,h&&!l.disabled&&(g?b||(r=sr!==Dn):hs===this||(this.lastPutMode=Uv.checkPull(this,h,Vt,e))&&c.checkPut(this,h,Vt,e))){if(C=this._getDirection(e,i)==="vertical",n=Lr(Vt),R("dragOverValid"),Za.eventCanceled)return L;if(r)return sr=Dn,G(),this._hideClone(),R("revert"),Za.eventCanceled||(V_?Dn.insertBefore(Vt,V_):Dn.appendChild(Vt)),O(!0);var B=T5(t,l.draggable);if(!B||K0e(e,C,this)&&!B.animated){if(B===Vt)return O(!1);if(B&&t===e.target&&(i=B),i&&(s=Lr(i)),Yv(Dn,t,Vt,n,i,s,e,!!i)!==!1)return G(),B&&B.nextSibling?t.insertBefore(Vt,B.nextSibling):t.appendChild(Vt),sr=t,V(),O(!0)}else if(B&&Y0e(e,C,this)){var z=Jp(t,0,l,!0);if(z===Vt)return O(!1);if(i=z,s=Lr(i),Yv(Dn,t,Vt,n,i,s,e,!1)!==!1)return G(),t.insertBefore(Vt,z),sr=t,V(),O(!0)}else if(i.parentNode===t){s=Lr(i);var j=0,re,ne=Vt.parentNode!==t,te=!Z0e(Vt.animated&&Vt.toRect||n,i.animated&&i.toRect||s,C),le=C?"top":"left",ue=h8(i,"top","top")||h8(Vt,"top","top"),fe=ue?ue.scrollTop:void 0;Dg!==i&&(re=s[le],w0=!1,Xv=!te&&l.invertSwap||ne),j=q0e(e,i,s,C,te?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,Xv,Dg===i);var be;if(j!==0){var Pe=fl(Vt);do Pe-=j,be=sr.children[Pe];while(be&&(Va(be,"display")==="none"||be===ii))}if(j===0||be===i)return O(!1);Dg=i,x0=j;var Be=i.nextElementSibling,Me=!1;Me=j===1;var ke=Yv(Dn,t,Vt,n,i,s,e,Me);if(ke!==!1)return(ke===1||ke===-1)&&(Me=ke===1),P4=!0,setTimeout(H0e,30),G(),Me&&!Be?t.appendChild(Vt):i.parentNode.insertBefore(Vt,Me?Be:i),ue&&xB(ue,0,fe-ue.scrollTop),sr=Vt.parentNode,re!==void 0&&!Xv&&(I2=Math.abs(re-Lr(i)[le])),V(),O(!0)}if(t.contains(Vt))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xi(document,"mousemove",this._onTouchMove),xi(document,"touchmove",this._onTouchMove),xi(document,"pointermove",this._onTouchMove),xi(document,"dragover",G_),xi(document,"mousemove",G_),xi(document,"touchmove",G_)},_offUpEvents:function(){var e=this.el.ownerDocument;xi(e,"mouseup",this._onDrop),xi(e,"touchend",this._onDrop),xi(e,"pointerup",this._onDrop),xi(e,"pointercancel",this._onDrop),xi(e,"touchcancel",this._onDrop),xi(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;if(Yo=fl(Vt),oh=fl(Vt,i.draggable),vo("drop",this,{evt:e}),sr=Vt&&Vt.parentNode,Yo=fl(Vt),oh=fl(Vt,i.draggable),Za.eventCanceled){this._nulling();return}Jg=!1,Xv=!1,w0=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),B4(this.cloneId),B4(this._dragStartId),this.nativeDraggable&&(xi(document,"drop",this),xi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),y0&&Va(document.body,"user-select",""),Va(Vt,"transform",""),e&&(Xy&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),ii&&ii.parentNode&&ii.parentNode.removeChild(ii),(Dn===sr||hs&&hs.lastPutMode!=="clone")&&Kn&&Kn.parentNode&&Kn.parentNode.removeChild(Kn),Vt&&(this.nativeDraggable&&xi(Vt,"dragend",this),FA(Vt),Vt.style["will-change"]="",Xy&&!Jg&&Ho(Vt,hs?hs.options.ghostClass:this.options.ghostClass,!1),Ho(Vt,this.options.chosenClass,!1),Ks({sortable:this,name:"unchoose",toEl:sr,newIndex:null,newDraggableIndex:null,originalEvent:e}),Dn!==sr?(Yo>=0&&(Ks({rootEl:sr,name:"add",toEl:sr,fromEl:Dn,originalEvent:e}),Ks({sortable:this,name:"remove",toEl:sr,originalEvent:e}),Ks({rootEl:sr,name:"sort",toEl:sr,fromEl:Dn,originalEvent:e}),Ks({sortable:this,name:"sort",toEl:sr,originalEvent:e})),hs&&hs.save()):Yo!==cp&&Yo>=0&&(Ks({sortable:this,name:"update",toEl:sr,originalEvent:e}),Ks({sortable:this,name:"sort",toEl:sr,originalEvent:e})),Za.active&&((Yo==null||Yo===-1)&&(Yo=cp,oh=v0),Ks({sortable:this,name:"end",toEl:sr,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){vo("nulling",this),Dn=Vt=sr=ii=V_=Kn=w2=dh=W_=Zl=Xy=Yo=oh=cp=v0=Dg=x0=hs=Uv=Za.dragged=Za.ghost=Za.clone=Za.active=null,ew.forEach(function(e){e.checked=!0}),ew.length=OA=PA=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Vt&&(this._onDragOver(e),X0e(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,i=this.el.children,n=0,s=i.length,r=this.options;n<s;n++)t=i[n],Ul(t,r.draggable,this.el,!1)&&e.push(t.getAttribute(r.dataIdAttr)||J0e(t));return e},sort:function(e,t){var i={},n=this.el;this.toArray().forEach(function(s,r){var l=n.children[r];Ul(l,this.options.draggable,n,!1)&&(i[s]=l)},this),t&&this.captureAnimationState(),e.forEach(function(s){i[s]&&(n.removeChild(i[s]),n.appendChild(i[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ul(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(t===void 0)return i[e];var n=O1.modifyOption(this,e,t);typeof n<"u"?i[e]=n:i[e]=t,e==="group"&&SB(i)},destroy:function(){vo("destroy",this);var e=this.el;e[Lo]=null,xi(e,"mousedown",this._onTapStart),xi(e,"touchstart",this._onTapStart),xi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(xi(e,"dragover",this),xi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),$x.splice($x.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!dh){if(vo("hideClone",this),Za.eventCanceled)return;Va(Kn,"display","none"),this.options.removeCloneOnHide&&Kn.parentNode&&Kn.parentNode.removeChild(Kn),dh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(dh){if(vo("showClone",this),Za.eventCanceled)return;Vt.parentNode==Dn&&!this.options.group.revertClone?Dn.insertBefore(Kn,Vt):V_?Dn.insertBefore(Kn,V_):Dn.appendChild(Kn),this.options.group.revertClone&&this.animate(Vt,Kn),Va(Kn,"display",""),dh=!1}}};function X0e(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault()}function Yv(a,e,t,i,n,s,r,l){var c,h=a[Lo],g=h.options.onMove,b;return window.CustomEvent&&!Sd&&!G1?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=e,c.from=a,c.dragged=t,c.draggedRect=i,c.related=n||e,c.relatedRect=s||Lr(e),c.willInsertAfter=l,c.originalEvent=r,a.dispatchEvent(c),g&&(b=g.call(h,c,r)),b}function FA(a){a.draggable=!1}function H0e(){P4=!1}function Y0e(a,e,t){var i=Lr(Jp(t.el,0,t.options,!0)),n=IB(t.el,t.options,ii),s=10;return e?a.clientX<n.left-s||a.clientY<i.top&&a.clientX<i.right:a.clientY<n.top-s||a.clientY<i.bottom&&a.clientX<i.left}function K0e(a,e,t){var i=Lr(T5(t.el,t.options.draggable)),n=IB(t.el,t.options,ii),s=10;return e?a.clientX>n.right+s||a.clientY>i.bottom&&a.clientX>i.left:a.clientY>n.bottom+s||a.clientX>i.right&&a.clientY>i.top}function q0e(a,e,t,i,n,s,r,l){var c=i?a.clientY:a.clientX,h=i?t.height:t.width,g=i?t.top:t.left,b=i?t.bottom:t.right,v=!1;if(!r){if(l&&I2<h*n){if(!w0&&(x0===1?c>g+h*s/2:c<b-h*s/2)&&(w0=!0),w0)v=!0;else if(x0===1?c<g+I2:c>b-I2)return-x0}else if(c>g+h*(1-n)/2&&c<b-h*(1-n)/2)return j0e(e)}return v=v||r,v&&(c<g+h*s/2||c>b-h*s/2)?c>g+h/2?1:-1:0}function j0e(a){return fl(Vt)<fl(a)?1:-1}function J0e(a){for(var e=a.tagName+a.className+a.src+a.href+a.textContent,t=e.length,i=0;t--;)i+=e.charCodeAt(t);return i.toString(36)}function Q0e(a){ew.length=0;for(var e=a.getElementsByTagName("input"),t=e.length;t--;){var i=e[t];i.checked&&ew.push(i)}}function C2(a){return setTimeout(a,0)}function B4(a){return clearTimeout(a)}lI&&Ai(document,"touchmove",function(a){(Za.active||Jg)&&a.cancelable&&a.preventDefault()});Za.utils={on:Ai,off:xi,css:Va,find:bB,is:function(e,t){return!!Ul(e,t,e,!1)},extend:G0e,throttle:vB,closest:Ul,toggleClass:Ho,clone:wB,index:fl,nextTick:C2,cancelNextTick:B4,detectDirection:AB,getChild:Jp,expando:Lo};Za.get=function(a){return a[Lo]};Za.mount=function(){for(var a=arguments.length,e=new Array(a),t=0;t<a;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(Za.utils=cc(cc({},Za.utils),i.utils)),O1.mount(i)})};Za.create=function(a,e){return new Za(a,e)};Za.version=k0e;var Er=[],Hy,F4,N4=!1,NA,DA,tw,Yy;function $0e(){function a(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return a.prototype={dragStarted:function(t){var i=t.originalEvent;this.sortable.nativeDraggable?Ai(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ai(document,"pointermove",this._handleFallbackAutoScroll):i.touches?Ai(document,"touchmove",this._handleFallbackAutoScroll):Ai(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var i=t.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?xi(document,"dragover",this._handleAutoScroll):(xi(document,"pointermove",this._handleFallbackAutoScroll),xi(document,"touchmove",this._handleFallbackAutoScroll),xi(document,"mousemove",this._handleFallbackAutoScroll)),f8(),A2(),O0e()},nulling:function(){tw=F4=Hy=N4=Yy=NA=DA=null,Er.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,i){var n=this,s=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,l=document.elementFromPoint(s,r);if(tw=t,i||this.options.forceAutoScrollFallback||G1||Sd||y0){VA(t,this.options,l,i);var c=yh(l,!0);N4&&(!Yy||s!==NA||r!==DA)&&(Yy&&f8(),Yy=setInterval(function(){var h=yh(document.elementFromPoint(s,r),!0);h!==c&&(c=h,A2()),VA(t,n.options,h,i)},10),NA=s,DA=r)}else{if(!this.options.bubbleScroll||yh(l,!0)===tc()){A2();return}VA(t,this.options,yh(l,!1),!1)}}},fd(a,{pluginName:"scroll",initializeByDefault:!0})}function A2(){Er.forEach(function(a){clearInterval(a.pid)}),Er=[]}function f8(){clearInterval(Yy)}var VA=vB(function(a,e,t,i){if(e.scroll){var n=(a.touches?a.touches[0]:a).clientX,s=(a.touches?a.touches[0]:a).clientY,r=e.scrollSensitivity,l=e.scrollSpeed,c=tc(),h=!1,g;F4!==t&&(F4=t,A2(),Hy=e.scroll,g=e.scrollFn,Hy===!0&&(Hy=yh(t,!0)));var b=0,v=Hy;do{var C=v,S=Lr(C),L=S.top,R=S.bottom,G=S.left,O=S.right,V=S.width,B=S.height,z=void 0,j=void 0,re=C.scrollWidth,ne=C.scrollHeight,te=Va(C),le=C.scrollLeft,ue=C.scrollTop;C===c?(z=V<re&&(te.overflowX==="auto"||te.overflowX==="scroll"||te.overflowX==="visible"),j=B<ne&&(te.overflowY==="auto"||te.overflowY==="scroll"||te.overflowY==="visible")):(z=V<re&&(te.overflowX==="auto"||te.overflowX==="scroll"),j=B<ne&&(te.overflowY==="auto"||te.overflowY==="scroll"));var fe=z&&(Math.abs(O-n)<=r&&le+V<re)-(Math.abs(G-n)<=r&&!!le),be=j&&(Math.abs(R-s)<=r&&ue+B<ne)-(Math.abs(L-s)<=r&&!!ue);if(!Er[b])for(var Pe=0;Pe<=b;Pe++)Er[Pe]||(Er[Pe]={});(Er[b].vx!=fe||Er[b].vy!=be||Er[b].el!==C)&&(Er[b].el=C,Er[b].vx=fe,Er[b].vy=be,clearInterval(Er[b].pid),(fe!=0||be!=0)&&(h=!0,Er[b].pid=setInterval((function(){i&&this.layer===0&&Za.active._onTouchMove(tw);var Be=Er[this.layer].vy?Er[this.layer].vy*l:0,Me=Er[this.layer].vx?Er[this.layer].vx*l:0;typeof g=="function"&&g.call(Za.dragged.parentNode[Lo],Me,Be,a,tw,Er[this.layer].el)!=="continue"||xB(Er[this.layer].el,Me,Be)}).bind({layer:b}),24))),b++}while(e.bubbleScroll&&v!==c&&(v=yh(v,!1)));N4=h}},30),MB=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,s=e.activeSortable,r=e.dispatchSortableEvent,l=e.hideGhostForTarget,c=e.unhideGhostForTarget;if(t){var h=i||s;l();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,b=document.elementFromPoint(g.clientX,g.clientY);c(),h&&!h.el.contains(b)&&(r("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function E5(){}E5.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=Jp(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:MB};fd(E5,{pluginName:"revertOnSpill"});function M5(){}M5.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable,n=i||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:MB};fd(M5,{pluginName:"removeOnSpill"});Za.mount(new $0e);Za.mount(M5,E5);function D4(a,e){let t;const i={dragClass:"lux-sortable-drag",ghostClass:"lux-sortable-ghost",sort:!0,handle:".drag-handle",forceFallback:sre};return e!=null&&e.onSort&&(i.onSort=n=>e.onSort(n.to.children)),a&&(t=Za.create(a,{...i,...e&&(({onSort:n,...s})=>s)(e)||{}})),t}const LB=.5,e1e=!1,aw=rl("slider",()=>{const a=mn(),e=Qe(LB),t=Qe(e1e),i=Ft(()=>[...a.layers].reverse()[0]);function n(r){let l=r;r<.1?l=.1:r>.9&&(l=.9),e.value=l}function s(r){t.value=r??!t.value}return{sliderActive:t,sliderRatio:e,sliderTopLayer:i,setRatio:n,toggleSlider:s}},{});function RB(a,e){const{t}=ya();function i(){e==null||e.emit("clickInfo",a)}return{t,onClickInfo:i}}const t1e={class:"lux-layer-manager-item mt-2.5"},a1e=["title"],i1e={class:"flex-1 text-left cursor-default"},n1e=["aria-label","title"],r1e=bt({__name:"layer-item-background",props:{showEditButton:{type:Boolean},layer:{}},emits:["clickEdit","clickInfo"],setup(a,{emit:e}){const t=a,i=e,{t:n,onClickInfo:s}=RB(t.layer,{emit:i}),r=Ft(()=>n('Display informations for "{{layerName}}"',{ns:"app",layerName:c()})),l=Ft(()=>!qp().isOffLine.value);function c(){return n(t.layer.name,{ns:"client"})}return(h,g)=>(se(),Ie("div",t1e,[l.value?(se(),Ie("button",{key:0,class:"fa fa-info w-3",title:r.value,onClick:g[0]||(g[0]=(...b)=>X(s)&&X(s)(...b))},null,8,a1e)):je("",!0),q("span",i1e,Fe(c()),1),h.showEditButton?(se(),Ie("button",{key:1,"data-cy":"openStylePanel",class:"fa fa-pencil","aria-label":X(n)("Open editor panel",{ns:"app"}),title:X(n)("Open editor panel",{ns:"app"}),onClick:g[1]||(g[1]=b=>h.$emit("clickEdit"))},null,8,n1e)):je("",!0)]))}}),s1e=["id"],o1e=["aria-checked","title"],l1e=["id","value","aria-label"],u1e=["aria-checked","aria-label"],c1e=bt({__name:"layer-item-sub",props:{layer:{},isOpen:{type:Boolean},isLayerComparatorOpen:{type:Boolean},displayLayerComparatorOpen:{type:Boolean}},emits:["changeOpacity","clickToggleLayerComparator"],setup(a,{emit:e}){var C,S;const t=a,i=e,{t:n}=ya(),s=al(),r=Ft(()=>n(s.getLayerCurrentLabel(t.layer),{ns:"client"})),l=Wi((((C=t.layer)==null?void 0:C.opacity)??1)*100),c=Wi((((S=t.layer)==null?void 0:S.previousOpacity)??l.value)*100);function h(){l.value===0?l.value=c.value:(c.value=l.value,l.value=0),v()}function g(L){L.target&&(l.value=parseInt(L.target.value),v())}function b(){i("clickToggleLayerComparator",t.layer)}function v(){i("changeOpacity",t.layer,l.value)}return(L,R)=>(se(),Ie("div",{class:ti(["lux-layer-manager-item-content",L.isOpen?"h-6":"h-0"]),id:`layer-manager-item-content-${L.layer.id}`,"data-cy":"myLayerSubContent"},[q("button",{class:ti(["w-5 fa-solid",l.value===0?"fa-eye-slash":"fa-eye"]),role:"switch","aria-checked":l.value===0,title:X(n)("Toggle layer opacity for {{layerName}}",{ns:"app",layerName:r.value}),onClick:h},null,10,o1e),q("input",{id:`${L.layer.id}-steps-range`,type:"range",min:"0",max:"100",value:l.value,step:"25",onChange:g,class:"m-2.5 w-16 h-[5px] rounded-lg appearance-none cursor-pointer","aria-label":X(n)("Change opacity for {{layerName}}",{ns:"app",layerName:r.value})},null,40,l1e),L.displayLayerComparatorOpen?(se(),Ie("button",{key:0,"data-cy":"myLayerComparatorBtn",role:"switch",class:ti(["fa ml-auto text-sm cursor-pointer",L.isLayerComparatorOpen?"fa-adjust":"fa-circle"]),"aria-checked":L.isLayerComparatorOpen,"aria-label":X(n)("Toggle layer comparator for {{ layerName }}",{ns:"app",layerName:r.value}),onClick:b},null,10,u1e)):je("",!0)],10,s1e))}}),d1e=["min","max","value"],V4=bt({__name:"layer-time-datepicker",props:{minDateAllowed:{default:""},maxDateAllowed:{default:""},dateValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Ft(()=>aA(t.minDateAllowed)),s=Ft(()=>aA(t.maxDateAllowed));function r(l){i("change",l.target.value)}return(l,c)=>(se(),Ie("input",{class:"lux-time-datepicker",type:"date",min:n.value,max:s.value,value:l.dateValue?X(aA)(l.dateValue):"",onChange:r},null,40,d1e))}}),h1e={class:"lux-time-slider w-full"},_1e=["for"],m1e=bt({__name:"layer-time-datepicker-value",props:{layer:{}},emits:["changeTime"],setup(a){const{t:e}=ya(),t=a,i=Wi(t.layer.currentTimeMinValue);return(n,s)=>{var r,l;return se(),Ie("div",h1e,[q("div",null,[q("label",{for:`${n.layer.id}-time-slider-start`,class:"lux-time-slider-label"},Fe(X(e)("Date:")),9,_1e),dt(V4,{id:`${n.layer.id}-time-slider-start`,"date-value":i.value,"min-date-allowed":(r=t.layer.time)==null?void 0:r.minValue,"max-date-allowed":(l=t.layer.time)==null?void 0:l.maxValue,onChange:s[0]||(s[0]=c=>n.$emit("changeTime",c))},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])])}}}),g1e={class:"lux-time-slider w-full"},p1e=["for"],f1e=["for"],y1e=bt({__name:"layer-time-datepicker-range",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const{t}=ya(),i=a,n=e,s=Wi(i.layer.currentTimeMinValue),r=Wi(i.layer.currentTimeMaxValue);function l(h){n("changeTime",h,i.layer.currentTimeMaxValue)}function c(h){n("changeTime",i.layer.currentTimeMinValue,h)}return(h,g)=>{var b,v,C,S;return se(),Ie("div",g1e,[q("div",null,[q("label",{for:`${h.layer.id}-time-slider-start`,class:"lux-time-slider-label"},Fe(X(t)("From:")),9,p1e),dt(V4,{id:`${h.layer.id}-time-slider-start`,"date-value":s.value,"min-date-allowed":(b=i.layer.time)==null?void 0:b.minValue,"max-date-allowed":(v=i.layer.time)==null?void 0:v.maxValue,onChange:l},null,8,["id","date-value","min-date-allowed","max-date-allowed"])]),q("div",null,[q("label",{for:`${h.layer.id}-time-slider-end`,class:"lux-time-slider-label"},Fe(X(t)("To:")),9,f1e),dt(V4,{id:`${h.layer.id}-time-slider-end`,"date-value":r.value,"min-date-allowed":(C=i.layer.time)==null?void 0:C.minValue,"max-date-allowed":(S=i.layer.time)==null?void 0:S.maxValue,onChange:c},null,8,["id","date-value","min-date-allowed","max-date-allowed"])])])}}}),b1e=["onKeydown","aria-label","title"],y8=bt({__name:"slider-range-thumb",props:{ariaLabel:{},maxLimit:{default:100},minLimit:{default:0},selectedValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Qe(!1),s=Qe(),r=Qe(),l=Ft(()=>{var V;return((V=s.value)==null?void 0:V.offsetWidth)||274}),c=Ft(()=>{var V;return((V=r.value)==null?void 0:V.offsetWidth)||9}),h=Qe(t.selectedValue),g=Ft(()=>l.value*h.value/100-c.value/2),b=Ft(()=>({left:`${g.value}px`}));Ds(()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",G)}),Kt(()=>t.selectedValue,V=>{h.value=V});function v(V){h.value=Math.max(Math.min(V,100),0),i("change",h.value,n.value)}function C(){v(h.value-1)}function S(){v(h.value+1)}function L(){n.value=!0,document.addEventListener("mousemove",R),document.addEventListener("mouseup",G)}function R(V){n.value&&v(O(V))}function G(V){n.value=!1,v(O(V)),document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",G)}function O(V){var z,j;const B=(z=s.value)!=null&&z.offsetWidth?(V.clientX-c.value*2)*100/((j=s.value)==null?void 0:j.offsetWidth):0;return Math.round(Math.max(Math.min(B,t.maxLimit),t.minLimit))}return(V,B)=>(se(),Ie("div",{class:"w-full",role:"slider",ref_key:"elRefTrack",ref:s},[q("button",{class:ti(["lux-slidebar-thumb",n.value?"dragging":""]),ref_key:"elRefThumb",ref:r,style:Oh(b.value),onKeydown:[Yl(Hl(S,["stop"]),["space"]),Yl(Hl(S,["stop"]),["right"]),Yl(Hl(C,["stop"]),["left"]),Yl(Hl(C,["stop"]),["delete"])],onMousedown:L,onMousemove:R,onMouseup:G,"aria-label":V.ariaLabel,title:V.ariaLabel},null,46,b1e)],512))}}),v1e=bt({__name:"slider-range-active-track",props:{selectedMinValue:{},selectedMaxValue:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Qe(),s=Qe(),r=Ft(()=>n.value?Math.round(n.value.offsetWidth*t.selectedMinValue/100):0),l=Ft(()=>{var b,v;let g=0;return t.selectedMaxValue!==void 0&&((b=n.value)!=null&&b.offsetWidth)&&(g=((v=n.value)==null?void 0:v.offsetWidth)*t.selectedMaxValue/100-r.value),Math.round(g)}),c=Ft(()=>({left:`${r.value}px`,width:`${l.value}px`}));function h(g){if(n.value){const b=n.value.getBoundingClientRect().x,v=(g.clientX-b)*100/n.value.offsetWidth;i("change",v)}}return(g,b)=>(se(),Ie("div",{ref_key:"elRefFullTrack",ref:n,class:"lux-slidebar-track"},[g.selectedMaxValue!==void 0?(se(),Ie("div",{key:0,ref_key:"elRefSelectionTrack",ref:s,class:"lux-slidebar-track-selection",style:Oh(c.value),onClick:h},null,4)):je("",!0),q("div",{class:"lux-slidebar-track-full",onClick:h})],512))}}),x1e={class:"lux-slidebar-fake"},b8=bt({__name:"slider-range",props:{selectedMinValue:{},selectedMaxValue:{},ariaLabelMin:{},ariaLabelMax:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,n=Qe(t.selectedMinValue),s=Qe(t.selectedMaxValue);function r(h,g){i("change",h,t.selectedMaxValue,g)}function l(h,g){i("change",t.selectedMinValue,h,g)}function c(h){s.value===void 0?n.value=h:h>=s.value?s.value=h:h<=t.selectedMinValue?n.value=h:Math.abs(s.value-h)<Math.abs(n.value-h)?s.value=h:n.value=h,i("change",n.value,s.value,!1)}return(h,g)=>(se(),Ie("div",x1e,[s.value!==void 0?(se(),xa(y8,{key:0,ariaLabel:h.ariaLabelMax,minLimit:h.selectedMinValue,selectedValue:s.value,onChange:l},null,8,["ariaLabel","minLimit","selectedValue"])):je("",!0),dt(y8,{ariaLabel:h.ariaLabelMin,maxLimit:h.selectedMaxValue,selectedValue:n.value,onChange:r},null,8,["ariaLabel","maxLimit","selectedValue"]),dt(v1e,{selectedMinValue:h.selectedMinValue,selectedMaxValue:h.selectedMaxValue,onChange:c},null,8,["selectedMinValue","selectedMaxValue"])]))}}),w1e={class:"lux-time-slider w-full"},I1e={key:0,class:"lux-time-slider-value mr-1.5"},C1e={key:1,class:"lux-time-slider-range mr-1.5"},A1e={class:"lux-time-displayed-dates"},S1e={key:0,class:"lux-time-start-date grow"},T1e={key:1,class:"lux-time-slider-end-date grow text-right"},E1e=bt({__name:"layer-time-slider",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const{t}=ya(),i=a,n=e,s=Ft(R),r=Ft(()=>{var B,z;return(B=i.layer.time)!=null&&B.minValue?new Date((z=i.layer.time)==null?void 0:z.minValue).getTime():0}),l=Ft(()=>{var B,z;return(B=i.layer.time)!=null&&B.maxValue?new Date((z=i.layer.time)==null?void 0:z.maxValue).getTime():0}),c=Ft(()=>l.value-r.value),h=Qe(i.layer.currentTimeMaxValue),g=Qe(i.layer.currentTimeMinValue),b=Ft(()=>g.value?new Date(g.value).getTime():void 0),v=Ft(()=>h.value?new Date(h.value).getTime():void 0),C=Ft(()=>L(b.value)),S=Ft(()=>L(v.value));function L(B){return B?(B-r.value)/c.value*100:0}function R(){const B=i.layer.time,z=[];if(!B)return;if(B.values)return B.values.map(ue=>new Date(ue).getTime());const j=new Date(B.minValue),re=new Date(B.maxValue??Date.now()),ne=1024,te=new Date(j.getTime()),le=B.interval??pG;if(te.setFullYear(j.getFullYear()+ne*le[0]),te.setMonth(j.getMonth()+ne*le[1],j.getDate()+ne*le[2]),te.setSeconds(j.getSeconds()+ne*le[3]),te>re)for(let ue=0;;ue++){const fe=new Date(j.getTime());if(fe.setFullYear(j.getFullYear()+ue*le[0]),fe.setMonth(j.getMonth()+ue*le[1],j.getDate()+ue*le[2]),fe.setSeconds(j.getSeconds()+ue*le[3]),fe<=re)z.push(fe.getTime());else break}return z}function G(B){var re;const z=B/100*(l.value-r.value)+r.value,j=Yte(z,{minValue:r.value,maxValue:l.value,timeValueList:s.value,timeInterval:(re=i.layer.time)==null?void 0:re.interval});return KS(j)}function O(B,z){const j=G(B);if(g.value=j,z){const re=G(z);h.value=re}}function V(B,z,j){O(B,z),j||n("changeTime",g.value,h.value)}return(B,z)=>{var j,re,ne,te,le,ue,fe;return se(),Ie("div",w1e,[((j=B.layer.time)==null?void 0:j.mode)===X(ed).VALUE?(se(),Ie("div",I1e,[dt(b8,{ariaLabelMin:`${X(t)("Edit the start date",{ns:"app"})}`,selectedMinValue:C.value,onChange:V},null,8,["ariaLabelMin","selectedMinValue"])])):je("",!0),((re=B.layer.time)==null?void 0:re.mode)===X(ed).RANGE?(se(),Ie("div",C1e,[dt(b8,{ariaLabelMin:`${X(t)("Edit the start date",{ns:"app"})}`,ariaLabelMax:`${X(t)("Edit the end date",{ns:"app"})}`,selectedMinValue:C.value,selectedMaxValue:S.value,onChange:V},null,8,["ariaLabelMin","ariaLabelMax","selectedMinValue","selectedMaxValue"])])):je("",!0),q("div",A1e,[((ne=B.layer.time)==null?void 0:ne.mode)===X(ed).RANGE||((te=B.layer.time)==null?void 0:te.mode)===X(ed).VALUE?(se(),Ie("div",S1e,[q("span",null,Fe(g.value?X(qR)(g.value,(le=B.layer.time)==null?void 0:le.resolution):"-"),1)])):je("",!0),((ue=B.layer.time)==null?void 0:ue.mode)===X(ed).RANGE?(se(),Ie("div",T1e,[q("span",null,Fe(h.value?X(qR)(h.value,(fe=B.layer.time)==null?void 0:fe.resolution):"-"),1)])):je("",!0)])])}}}),M1e=bt({__name:"layer-time",props:{layer:{}},emits:["changeTime"],setup(a,{emit:e}){const t=e;function i(n,s){t("changeTime",n,s)}return(n,s)=>{var r,l,c,h,g;return se(),Ie(ua,null,[((r=n.layer.time)==null?void 0:r.widget)===X(u2).SLIDER?(se(),xa(E1e,{key:0,layer:n.layer,onChangeTime:i},null,8,["layer"])):je("",!0),((l=n.layer.time)==null?void 0:l.widget)===X(u2).DATEPICKER&&((c=n.layer.time)==null?void 0:c.mode)===X(ed).VALUE?(se(),xa(m1e,{key:1,layer:n.layer,onChangeTime:i},null,8,["layer"])):je("",!0),((h=n.layer.time)==null?void 0:h.widget)===X(u2).DATEPICKER&&((g=n.layer.time)==null?void 0:g.mode)===X(ed).RANGE?(se(),xa(y1e,{key:2,layer:n.layer,onChangeTime:i},null,8,["layer"])):je("",!0)],64)}}}),L1e={class:"lux-layer-manager-item relative"},R1e={class:"w-full flex flex-nowrap items-start gap-x-2"},k1e=["title"],W1e=["aria-label","title"],G1e=["aria-expanded","aria-controls","data-cy"],O1e={class:"grow"},P1e=["title","aria-label"],v8=bt({__name:"layer-item",props:{is3d:{type:Boolean},layer:{},dragHandleClassName:{},isOpen:{type:Boolean},isLayerComparatorOpen:{type:Boolean},displayLayerComparatorOpen:{type:Boolean}},emits:["clickInfo","clickToggle","clickToggleLayerComparator","clickRemove","changeOpacity","changeTime"],setup(a,{emit:e}){const t=a,i=e,{t:n,onClickInfo:s}=RB(t.layer,{emit:i}),r=al(),l=Ft(()=>n(r.getLayerCurrentLabel(t.layer),{ns:"client"})),c=Ft(()=>!qp().isOffLine.value),h=Ft(()=>n('Sort "{{layerName}}" in the list',{ns:"app",layerName:l.value})),g=Ft(()=>n('Display informations for "{{layerName}}"',{ns:"app",layerName:l.value})),b=Ft(()=>n('Remove layer "{{layerName}}"',{ns:"app",layerName:l.value}));function v(C,S){i("changeTime",C,S)}return(C,S)=>(se(),Ie("div",L1e,[q("div",R1e,[q("button",{class:ti(["fa-solid fa-bars cursor-move mt-1",C.dragHandleClassName]),title:h.value},null,10,k1e),c.value?(se(),Ie("button",{key:0,class:"fa-solid fa-info mt-1","aria-label":g.value,title:g.value,onClick:S[0]||(S[0]=(...L)=>X(s)&&X(s)(...L))},null,8,W1e)):je("",!0),q("button",{"aria-expanded":C.isOpen,"aria-controls":`layer-manager-item-content-${C.layer.id}`,"data-cy":`myLayerItemLabel-${C.layer.id}`,class:ti([C.is3d?"cursor-default":"","grow text-left break-words w-[70%] flex items-center"]),onClick:S[1]||(S[1]=L=>C.$emit("clickToggle",C.layer))},[q("span",O1e,Fe(l.value),1),C.is3d?je("",!0):(se(),Ie("span",{key:0,class:ti(["w-3.5 fa-solid",C.isOpen?"fa-xmark":"fa-ellipsis"]),"aria-hidden":"true"},null,2))],10,G1e),q("button",{class:"mt-1 fa-regular fa-trash-can",title:b.value,"aria-label":b.value,onClick:S[2]||(S[2]=L=>C.$emit("clickRemove",C.layer))},null,8,P1e)]),C.is3d?je("",!0):(se(),xa(c1e,{key:0,layer:C.layer,isOpen:C.isOpen,isLayerComparatorOpen:C.isLayerComparatorOpen,displayLayerComparatorOpen:C.displayLayerComparatorOpen,onClickToggleLayerComparator:S[3]||(S[3]=L=>C.$emit("clickToggleLayerComparator",L)),onChangeOpacity:S[4]||(S[4]=(L,R)=>C.$emit("changeOpacity",L,R))},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen"])),C.layer.time?(se(),xa(M1e,{key:1,layer:C.layer,onChangeTime:v},null,8,["layer"])):je("",!0)]))}}),B1e={key:0,class:"text-black"},F1e={key:1,class:"mb-4 sortable-layers-3d"},N1e=["id"],D1e={class:"sortable-layers"},V1e=["id"],Z1e={key:2,class:"flex flex-row justify-center space-x-1 my-2"},x8="drag-handle",z1e=bt({__name:"layer-manager",emits:["displayCatalog"],setup(a,{emit:e}){const{t}=ya(),{setMetadataLayer:i}=A5(),n=mn(),s=yi(),r=Uh(),l=aw(),{bgLayer:c}=Zt(n),{sliderActive:h}=Zt(l),{isOffLine:g}=Zt(s),{setRemoteLayersOpen:b}=s,v=Ft(()=>[...n.layers].reverse()),C=Ft(()=>[...n.layers3d].reverse()),S=Wi(),L=Ft(()=>r.isLayerStyleEditable(c.value)),R=Ft(()=>!g.value),G=e;tr(()=>{const le=document.querySelector(".sortable-layers"),ue=document.querySelector(".sortable-layers-3d");D4(le,{onSort:O}),D4(ue,{onSort:V})});function O(le,ue){const fe=[...le].map(be=>Number(be.id)).reverse();n.reorderLayers(fe,ue)}function V(le){O(le,!0)}function B(le,ue){n.setLayerOpacity(le.id,ue/100)}function z(le,ue,fe){n.setLayerTime(le.id,ue,fe)}function j(le){n.removeLayers(le.id)}function re(le){S.value=S.value!==le.id?le.id:void 0}function ne(){s.openStyleEditorPanel()}function te(){l.toggleSlider()}return(le,ue)=>(se(),Ie("div",null,[X(g)&&v.value.length===0?(se(),Ie("div",B1e,Fe(X(t)("No layer selected",{ns:"client"})),1)):je("",!0),C.value.length>0?(se(),Ie("ul",F1e,[(se(!0),Ie(ua,null,Gn(C.value,(fe,be)=>(se(),Ie("li",{key:fe.id,id:fe.id,"data-cy":"myLayer"},[dt(v8,{is3d:!0,dragHandleClassName:x8,layer:fe,isOpen:S.value===fe.id,isLayerComparatorOpen:X(h),displayLayerComparatorOpen:be===0,onClickRemove:j,onClickToggle:re,onClickToggleLayerComparator:te,onClickInfo:Pe=>X(i)(fe),onChangeOpacity:B,onChangeTime:(Pe,Be)=>z(fe,Pe,Be)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,N1e))),128))])):je("",!0),q("ul",D1e,[(se(!0),Ie(ua,null,Gn(v.value,(fe,be)=>(se(),Ie("li",{key:fe.id,id:fe.id,"data-cy":"myLayer"},[dt(v8,{is3d:!1,dragHandleClassName:x8,layer:fe,isOpen:S.value===fe.id,isLayerComparatorOpen:X(h),displayLayerComparatorOpen:be===0,onClickRemove:j,onClickToggle:re,onClickToggleLayerComparator:te,onClickInfo:Pe=>X(i)(fe),onChangeOpacity:B,onChangeTime:(Pe,Be)=>z(fe,Pe,Be)},null,8,["layer","isOpen","isLayerComparatorOpen","displayLayerComparatorOpen","onClickInfo","onChangeTime"])],8,V1e))),128))]),dt(r1e,{layer:X(c)||X(jx),showEditButton:L.value,onClickInfo:ue[0]||(ue[0]=()=>X(c)&&X(i)(X(c))),onClickEdit:ne},null,8,["layer","showEditButton"]),R.value?(se(),Ie("div",Z1e,[q("button",{"data-cy":"addLayer",class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:ue[1]||(ue[1]=fe=>G("displayCatalog"))},Fe(X(t)("+ Add layers",{ns:"client"})),1),q("button",{"data-cy":"addRemoteLayer",class:"bg-white text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:ue[2]||(ue[2]=fe=>X(b)(!0))},Fe(X(t)("+ Add external Wms",{ns:"client"})),1)])):je("",!0),ue[3]||(ue[3]=q("div",{class:"lux-preload"},[q("i",{class:"fa-regular fa-trash-can"})],-1))]))}}),U1e=["data-cy"],X1e={key:0,class:"lux-panel-title h-16 shrink-0 flex justify-between"},H1e=["aria-label"],Y1e={key:1,class:"lux-panel-tabs flex flex-row gap-2 h-10 text-2xl"},K1e={class:"lux-panel-content relative grow p-2.5 bg-primary overflow-auto"},P1=bt({__name:"side-panel-layout",props:{dataCyValue:{},closeFn:{type:Function}},setup(a){const{t:e}=ya();return(t,i)=>(se(),Ie("div",{"data-cy":t.dataCyValue,class:"lux-panel flex flex-col h-full pt-1.5"},[t.$slots.header?(se(),Ie("div",X1e,[qa(t.$slots,"header"),q("span",null,[q("button",{"data-cy":"panelClose",onClick:i[0]||(i[0]=()=>t.closeFn()),"aria-label":X(e)("Close",{ns:"client"}),class:"fa-sharp fa-solid fa-close"},null,8,H1e)])])):je("",!0),t.$slots.tabs?(se(),Ie("div",Y1e,[qa(t.$slots,"tabs")])):je("",!0),q("div",K1e,[qa(t.$slots,"content")])],8,U1e))}}),q1e=["aria-expanded"],j1e={key:0},J1e=["aria-expanded"],Q1e=bt({__name:"layer-panel",setup(a){const{t:e}=ya(),t=yi(),{setLayersOpen:i}=t,{myLayersTabOpen:n}=Zt(t),{layers:s}=Zt(mn()),r=Ft(()=>!qp().isOffLine.value),l=Ft(()=>n.value||qp().isOffLine.value);function c(){t.setMyLayersTabOpen(!0)}function h(){t.setMyLayersTabOpen(!1)}return(g,b)=>(se(),xa(P1,{"data-cy-value":"layerPanel","close-fn":()=>X(i)(!1)},{header:Ha(()=>[q("h1",null,Fe(X(e)("layers",{ns:"client"})),1)]),tabs:Ha(()=>[q("button",{"data-cy":"myLayersButton",onClick:c,class:ti(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",l.value?"bg-primary":"bg-tertiary"]),"aria-expanded":l.value},[wr(Fe(X(e)("my_layers",{ns:"client"}))+" ",1),X(s).length?(se(),Ie("span",j1e,"("+Fe(X(s).length)+")",1)):je("",!0)],10,q1e),r.value?(se(),Ie("button",{key:0,"data-cy":"catalogButton",onClick:h,class:ti(["text-white px-4 hover:bg-primary cursor-pointer text-center uppercase",l.value?"bg-tertiary":"bg-primary"]),"aria-expanded":!l.value},Fe(X(e)("Catalog",{ns:"client"})),11,J1e)):je("",!0)]),content:Ha(()=>[Mi(dt(z1e,{"data-cy":"myLayers",onDisplayCatalog:h},null,512),[[xh,l.value]]),Mi(q("div",null,[dt(E0e)],512),[[xh,!l.value]])]),_:1},8,["close-fn"]))}}),$1e={class:"lux-legends absolute"},ebe={key:0,class:"text-white"},tbe={class:"pb-5"},abe={class:"pb-5"},ibe=bt({__name:"legends-panel",setup(a){const{t:e}=ya(),t=yi(),i=mn(),n=al(),{layers:s,bgLayer:r}=Zt(i),l=Ft(()=>[...s.value].reverse()),c=Qe(new Map),h=Qe(!1);return er(()=>h.value=[...c.value].some(([g,b])=>b)),Ds(()=>c.value.clear()),N6(()=>c.value.clear()),(g,b)=>(se(),xa(P1,{"data-cy-value":"legendsPanel","close-fn":()=>X(t).toggleLegendsOpen(!1)},{header:Ha(()=>[q("h1",null,Fe(X(e)("Legends")),1)]),content:Ha(()=>[q("div",$1e,[h.value?je("",!0):(se(),Ie("div",ebe,Fe(X(e)("Aucune légende n'est disponible pour les couches sélectionnées.")),1)),(se(!0),Ie(ua,null,Gn(l.value,v=>(se(),xa(W4,{"data-cy":"legendLayer",class:"pt-10",key:v.id,layer:v,onHasLegend:C=>c.value.set(v.id,C),onRemovedLegend:()=>c.value.delete(v.id)},{title:Ha(()=>[q("h1",tbe,Fe(X(e)(X(n).getLayerCurrentLabel(v))),1)]),_:2},1032,["layer","onHasLegend","onRemovedLegend"]))),128)),X(r)?(se(),xa(W4,{"data-cy":"legendBgLayer",class:"pt-10",key:X(r).id,layer:X(r)},{title:Ha(()=>[q("h1",abe,Fe(X(e)(X(n).getLayerCurrentLabel(X(r)))),1)]),_:1},8,["layer"])):je("",!0)])]),_:1},8,["close-fn"]))}});class nbe{constructor(e){_a(this,"timeoutID");const t=mn(),i=eu(),n=zi(),s=Uh(),r=l5(),{getIsOffline:l}=qp(),{appliedStyle:c}=Zt(i);Kt(()=>t.layers,(h,g)=>{const b={layers:g},v={layers:h},C=n.getRemovedLayers(v,b),S=n.getAddedLayers(v,b),L=n.getMutatedLayers(v,b);C.forEach(R=>r.removeLayer(e,R.id)),S.forEach(R=>{r.addLayer(e,R.layer),r.setLayerTime(e,R.layer)}),L.forEach(R=>{n.getMutationType(R.id,v,b)===h3.ON_LAYER_TYPE?(r.removeLayer(e,R.id),r.addLayer(e,R)):r.setLayerOpacity(e,R.id,R.opacity),r.setLayerTime(e,R)}),v.layers&&r.reorderLayers(e,v.layers)}),Kt(()=>t.bgLayer,h=>h!==void 0&&r.setBgLayer(e,h,i.bgVectorSources)),er(()=>{i.isExpertStyleActive||(c.value=s.applyDefaultStyle(t.bgLayer,i.bgVectorBaseStyles,i.bgStyle))}),Kt(c,h=>{l()||(i.bgStyle===null&&!i.isExpertStyleActive?s.unregisterStyle(i.styleSerial).then(i.styleSerial=null):(clearTimeout(this.timeoutID),this.timeoutID=setTimeout(()=>{s.registerStyle(h,i.styleSerial).then(g=>{var v;i.styleSerial=g;const b=(v=t==null?void 0:t.bgLayer)==null?void 0:v.id;t!=null&&t.bgLayer&&b!==void 0&&g!==void 0&&r.setBgLayer(e,t==null?void 0:t.bgLayer,i.bgVectorSources)})},2e3))),r.applyOnBgLayer(e,g=>s.applyConsolidatedStyle(g,h))}),Kt(()=>i.bgVectorSources,(h,g)=>{var b;for(const v of h.keys())(!g||g.get(v)!==h.get(v))&&(r.removeFromCache(v),v===((b=t==null?void 0:t.bgLayer)==null?void 0:b.id)&&r.setBgLayer(e,t==null?void 0:t.bgLayer,h))})}}class rbe{constructor(e){const t=e.getView(),i=mn();t.setMaxZoom(V7),t.setMinZoom(DY),t.setConstrainResolution(!0),Kt(()=>i.minZoom,n=>n!==void 0&&t.setMinZoom(n)),Kt(()=>i.maxZoom,n=>n!==void 0&&t.setMaxZoom(n))}}const sbe={xs:0,sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function L5(a){return window.innerWidth>=sbe[a]}function kB(){const a=ro(),{drawStateActive:e,drawnFeatures:t}=Zt(a),{addDrawnFeature:i}=a,{feedbackOpen:n,feedbackanfOpen:s,feedbackageOpen:r,feedbackcruesOpen:l}=Zt(yi()),{toggleMyMapsOpen:c}=yi(),h=t.value;function g(v){var O;const C=h.length,S=e.value==="drawCircle"?"drawnCircle":e.value==="drawLabel"?"drawnLabel":`drawn${(O=v.getGeometry())==null?void 0:O.getType().replace("String","")}`,L=v.get("name")||`${JN(S.replace("drawn",""))} ${t.value.length+1}`,R={angle:0,color:"#ed1c24",arrowcolor:void 0,stroke:1.25,linestyle:"plain",opacity:.2,showOrientation:!1,shape:"circle",symbolId:void 0,symboltype:void 0,size:10},G=Object.assign(new Xh,v,{id:Vw(),label:L,description:"",display_order:C,editable:!0,selected:!1,map_id:void 0,saving:!1,featureType:S,featureStyle:R});i(G),L5("md")&&n.value!==!0&&s.value!==!0&&r.value!==!0&&l.value!==!0&&c(!0)}function b(v){const C=v.getGeometry();let S;if(C)switch(C.getType()){case"Point":S=C.getFlatCoordinates();break;case"LineString":S=C.getFlatMidpoint();break;case"Polygon":S=C.getFlatInteriorPoint();break;case"Circle":S=C.getCenter();break}return S}return{addFeature:g,getFeatCoordinates:b}}class obe{constructor(){_a(this,"measureTooltipElement",null);_a(this,"measureTooltipOverlay",null);_a(this,"changeEventKey",null)}add(e,t){this.createMeasureTooltip(e);const i=t.feature.getGeometry();if(i===void 0)return;const n=e.getView().getProjection();this.changeEventKey=La(i,"change",()=>this.updateTootip(i,n),this)}remove(){this.removeMeasureTooltip(),this.changeEventKey!==null&&(CT(this.changeEventKey),this.changeEventKey=null)}createMeasureTooltip(e){this.removeMeasureTooltip(),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.classList.add("lux-tooltip"),this.measureTooltipOverlay=new OP({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center",stopEvent:!1}),e.addOverlay(this.measureTooltipOverlay)}removeMeasureTooltip(){var e;this.measureTooltipElement!==null&&((e=this.measureTooltipElement.parentNode)==null||e.removeChild(this.measureTooltipElement),this.measureTooltipElement=null,this.measureTooltipOverlay=null)}updateTootip(e,t){var s;let i,n="";if(e.getType()==="LineString"){const r=e;i=r.getLastCoordinate(),i!==null&&(n=U0(Yx(r,t)))}else if(e.getType()==="Polygon"){const r=e;r.getCoordinates()[0].length>2&&(i=r.getInteriorPoint().getCoordinates()),i!==null&&(n=Z7(kP(r)))}else if(e.getType()==="Circle"){const r=e;i=r.getLastCoordinate();const l=r.getCenter();l!==null&&i!==null&&(n=U0(Yx(new is([l,i]),t)))}this.measureTooltipElement&&(this.measureTooltipElement.innerText=n,(s=this.measureTooltipOverlay)==null||s.setPosition(i))}}const ZA=new obe;function Sy(a){const{addFeature:e}=kB(),t=new sfe(a);t.setActive(!1);const i=zi().getOlMap();i.addInteraction(t),La(t,"drawstart",r=>ZA.add(i,r)),La(t,"drawend",r=>{n(r)}),La(document,"keyup",r=>{s(r)});function n(r){ZA.remove(),e(r.feature),r.stopPropagation()}function s(r){r.key==="Escape"&&(ZA.remove(),t.finishDrawing(),t.setActive(!1))}return{drawInteraction:t}}function WB(){const a=ro(),{drawStateActive:e,drawnFeatures:t}=Zt(a),i=zi().getOlMap(),n=p2.createOlLayerDrawnFeatures(),s={drawPoint:Sy({type:"Point"}).drawInteraction,drawLabel:Sy({type:"Point"}).drawInteraction,drawLine:Sy({type:"LineString"}).drawInteraction,drawCircle:Sy({type:"Circle"}).drawInteraction,drawPolygon:Sy({type:"Polygon"}).drawInteraction};Kt(e,h=>{Object.keys(s).forEach(g=>{`${[g]}`==`${h}`?s[g].setActive(!0):s[g].setActive(!1)})}),Kt(()=>t.value,h=>{c(h)});function r(h){h.addLayer(n)}function l(h,g){const b=Xh.clone(h),v=b.getGeometry();return u5(v,g,i),b}function c(h){const g=n.getSource();g==null||g.clear(),g==null||g.addFeatures(h)}return{createConcentricCircle:l,addDrawLayer:r}}function lbe(){const a=zi().getOlMap(),e=yi(),{drawStateActive:t,editStateActive:i,activeFeatureId:n,editingFeatureId:s,drawnFeatures:r}=Zt(ro()),{layersOpen:l,myMapsOpen:c}=Zt(e),{layers:h}=Zt(mn());La(a,"click",b=>g(b)),Kt(n,(b,v)=>{s.value!==b&&(s.value=void 0),r.value.filter(C=>C.id===v).forEach(C=>{C.selected=!1,C.changed()}),r.value.filter(C=>C.id===b).forEach(C=>{C.selected=!0,C.editable=!1,C.changed()})});const g=function(b){const v=b.pixel;if(t.value!==void 0||i.value!==void 0)return!0;if(n.value=void 0,a.forEachFeatureAtPixel(v,S=>{const L=r.value.includes(S);if(L&&(l.value||c.value)&&r.value.length>0||L&&h.value.length===0)return e.toggleMyMapsOpen(!0),n.value=S.id,!0},{hitTolerance:5}))return!1}}const ube="featureInfoLayer",cbe=17;class dbe{constructor(){_a(this,"map");_a(this,"featureLayer")}init(e){this.map=e,this.createFeatureLayer()}createFeatureLayer(){this.featureLayer=new El({source:new Cd,zIndex:1e3});const e=new bs({color:[255,255,0,.6]}),t=new Vr({color:[255,155,55,1],width:3}),i=new uu({radius:10,fill:e,stroke:t});this.featureLayer.set("cyLayerType",ube),this.featureLayer.setStyle(function(n){var h;const s=n.get("color")||"#ffcc33",r=n.get("width")||3,l=[new Qn({fill:new bs({color:[255,255,0,.6]})}),new Qn({stroke:new Vr({color:"#ffffff",width:5})}),new Qn({stroke:new Vr({color:s,width:r})})],c=(h=n.getGeometry())==null?void 0:h.getType();return c==="Point"||c==="MultiPoint"?[new Qn({image:i})]:l}),this.map.addLayer(this.featureLayer)}highlightFeatures(e,t,i){var n,s,r,l;if(e!=null){this.map.getLayers().getArray().indexOf(this.featureLayer)===-1&&this.map.addLayer(this.featureLayer);const c={dataProjection:cu,featureProjection:this.map.getView().getProjection()},h=new Lm().readFeatures({type:"FeatureCollection",features:e},c);if(h.length>0){let g=((n=h[0].getGeometry())==null?void 0:n.getExtent())||[0,0,0,0];for(const b of h){const v=((s=b.getGeometry())==null?void 0:s.getExtent())||[0,0,0,0];g=gT(g,v),b.getId()==null&&b.setId(void 0),((r=b.getGeometry())==null?void 0:r.getType())==="GeometryCollection"?b.getGeometry().getGeometriesArray().forEach(S=>{var R;const L=b.clone();L.setGeometry(S),(R=this.featureLayer.getSource())==null||R.addFeature(L)}):(l=this.featureLayer.getSource())==null||l.addFeature(b)}if(t&&g){const b={size:this.map.getSize(),maxZoom:i||cbe};this.map.getView().fit(g,b)}}}}clearFeatures(){var e;(e=this.featureLayer.getSource())==null||e.clear()}}const Ky=new dbe,hbe="https://migration.geoportail.lu/getfeatureinfo";async function w8(a){const e=await mf(hbe,a,"GET");if(!e.ok)throw new Error("Error while trying to get profile");return await e.json()}function _be(){const a=zi().getOlMap(),{setFeatureInfoPanelContent:e,setLoading:t,setDisplayStarOnMobile:i}=pm(),{fid:n,isLoading:s}=Zt(pm()),{toggleInfoOpen:r}=yi(),{layersOpen:l,myMapsOpen:c}=Zt(yi()),{findById:h}=od(),{drawStateActive:g,editStateActive:b,drawnFeatures:v}=Zt(ro()),{locationInfoCoords:C,isStreetviewActive:S}=Zt(pd()),{maxZoom:L}=Zt(mn()),R=Qe([]),G=Qe([]),O=Qe([]),V=Qe([]),B=Qe(null);function z(){Ky.init(a),La(a,"pointerdown",be=>{O.value=be.pixel}),La(a,"pointerup",sO(be=>j(be),499)),La(a,"pointermove",be=>{re(be)}),er(()=>{n.value&&(async()=>await ne(n.value))()})}function j(be){(async()=>(V.value=be.pixel,!(be.originalEvent.button===2||S.value&&C.value||g.value||b.value||s.value)&&(B.value=window.setTimeout(()=>{let Pe=!1;if((l.value||c.value)&&v.value.length>0&&(Pe=fe(be.pixel)),!Pe&&O.value&&V.value){const Be=Math.abs(O.value[0]-V.value[0]),Me=Math.abs(O.value[1]-V.value[1]);Be+Me<6&&(te(be),O.value=null,V.value=null)}},500))))()}async function re(be){if(be.dragging||s.value)return;const Pe=await Promise.all(a.getLayers().getArray().filter(Be=>Be instanceof _0).map(async Be=>{const Me=Be.getData(be.pixel);if(Be.getVisible()&&Be.getOpacity()>0&&!(Me!=null&&Me.every(ke=>ke===0))){const ke=Be.get(Nx);return ke&&ke.is_queryable}return!1})).then(Be=>Be.some(Boolean));a.getViewport().style.cursor=Pe?"pointer":""}async function ne(be){const Pe=be.split(",");for(const Be of Pe){const Me=Be.split("_")[0],ke=[Me],Je={};try{if(ke.length>0){t(!0),a.getViewport().style.cursor="wait";const ut=await w8({fid:Be});let ht=!1;L5("sm")?(ht=!0,i(!1)):i(!0);const Dt=h(Me);Dt&&(Je[Me]=Dt.layers),ut.length>0&&le(!0,ut,Je,ht,!0)}}catch{ue()}}}async function te(be){const Pe=a.getLayers().getArray(),Be=[],Me={};for(let ke=Pe.length-1;ke>=0;ke--){const Je=Pe[ke].get(Nx);if(Je!=null&&Je.is_queryable&&Pe[ke].getVisible()&&Pe[ke].getOpacity()>0){const ut=Pe[ke].get("queryable_id");Be.push(ut),Me[ut]=Pe[ke].get("label")}}if(Be.length>0){const ke=a.getView().getResolution();let Je=0,ut=0;ke&&(Je=20*ke,ut=1*ke);const ht=Ns(be.coordinate,a.getView().getProjection(),cu),Dt=[[ht[0]-Je,ht[1]+Je],[ht[0]+Je,ht[1]-Je]],We=[[ht[0]-ut,ht[1]+ut],[ht[0]+ut,ht[1]-ut]];t(!0),a.getViewport().style.cursor="wait";const oa=a.getSize()||[0,0],da=a.getView().calculateExtent(oa).join(","),Ji={layers:Be.join(),box1:Dt.join(),box2:We.join(),srs:tm,zoom:a.getView().getZoom(),BBOX:da,WIDTH:oa[0],HEIGHT:oa[1],X:be.pixel[0],Y:be.pixel[1]};try{const sa=await w8(Ji);sa.length>0?le(be.originalEvent.shiftKey,sa,Me,!0,!1):(G.value=[],Ky.highlightFeatures(G.value,!1,L.value),ue())}catch{ue()}}}function le(be,Pe,Be,Me,ke){be?Pe.forEach(ht=>{ht.layerLabel=Be[ht.layer];let Dt=!1;for(let We=0;We<R.value.length;We++)if(R.value[We].layer===ht.layer){Dt=!0;let oa=!1;for(let li=0;li<ht.features.length;li++){for(let da=0;da<R.value[We].features.length;da++)if(R.value[We].features[da].fid==ht.features[li].fid){oa=!0,R.value[We].features.splice(da,1);break}oa||(R.value[We].features=R.value[We].features.concat(ht.features[li]))}break}Dt||R.value.push(ht)}):(R.value=Pe,R.value.forEach(ht=>{ht.layerLabel=Be[ht.layer]}));const Je=R.value.filter(ht=>"features"in ht&&ht.features.length>0),ut=R.value.length>0?Me:!1;ue(ut),G.value=[];for(let ht=0;ht<R.value.length;ht++)G.value.push(...R.value[ht].features);Ky.highlightFeatures(G.value,ke,L.value),e(Je)}function ue(be=!1){r(be),t(!1),a.getViewport().style.cursor="",Ky.clearFeatures()}function fe(be){const Pe=[];return a.forEachFeatureAtPixel(be,Be=>v.value.indexOf(Be)!==-1?(Pe.push(Be),!1):!0,{hitTolerance:5}),Pe.length>0}return{init:z}}function mbe(){const{t:a}=ya(),{addNotification:e}=oc(),{drawStateActive:t}=Zt(ro());Kt(t,i);function i(n){let s;switch(n){case"drawPoint":s=a("Click to draw the point");break;case"drawLine":s=a("Click to start drawing line<br>Double-click to finish");break;case"drawPolygon":s=a("Click to start drawing polygon<br>Double-click or click last point to finish");break;case"drawCircle":s=a("Click to start drawing circle");break;case"drawLabel":s=a("Click to place the label");break}s&&e(s)}return{}}const gbe=1001,I8="featureEditLayer";function pbe(){const{editStateActive:a,editingFeatureId:e,drawnFeatures:t}=Zt(ro()),{updateDrawnFeature:i,setEditActiveState:n}=ro();let s;const r=zi().getOlMap(),l=new Cd({features:[]}),c=new El({source:l,zIndex:gbe});c.set(Fx,I8),c.set("cyLayerType",I8),r.addLayer(c),Kt(a,g=>{g?h():r.removeInteraction(s)}),Kt(e,g=>{g||(n(void 0),t.value.forEach(v=>{v.editable&&(v.editable=!1,v.changed())})),l.clear();const b=t.value.find(v=>v.id===g);if(b){const v=b.featureType.replace("drawn","edit");n(v),b.editable=!0,b.changed(),l.addFeature(b)}});function h(){s&&r.removeInteraction(s),s=new cfe({source:l,pixelTolerance:20,deleteCondition:function(g){return Bw(g)&&XT(g)}}),r.addInteraction(s),La(s,"modifyend",g=>{const b=g.features.getArray()[0];b.profileData=void 0,i(b)})}return{}}const fbe={0:8,1:9,2:9,3:10,4:11,5:12,6:13,7:14,8:16,9:17,10:18,11:19,12:20,13:21};class ybe{bootstrap(){this.restore(),this.persist()}persistZoom(){const e=zi().getOlMap().getView(),t=()=>{const i=e.getZoom();Ia.setValue(l9,i?Math.ceil(i):null)};t(),La(e,"change:resolution",h0(t,300))}persistRotation(){const e=zi().getOlMap().getView(),t=()=>{const i=e.getRotation();Ia.setValue(u9,i||0)};t(),La(e,"change:rotation",h0(t,300))}persistXY(){const e=zi().getOlMap().getView(),t=()=>{const i=e.getCenter();Ia.setValue(t4,i?Math.round(i[0]):null),Ia.setValue(a4,i?Math.round(i[1]):null)};t(),La(e,dm.PROPERTYCHANGE,h0(t,300))}persist(){this.persistXY(),this.persistZoom(),this.persistRotation()}restore(){const e=zi().getOlMap().getView(),t=Ia.getValue(l9,K_),i=Ia.getValue(u9,K_),n=Ia.getInitialVersion(),s=Ia.getValue(t4,K_),r=Ia.getValue(a4,K_),l=Ia.getValue(ere),c=um(cu,tm);let h,g;t!==void 0?g=n===3?Number(t):fbe[t]:g=parseInt("8",10),s!=null&&r!=null?n===3&&l!=null?h=Ns([s,r],l,tm):h=n===3?[s,r]:c([r,s],void 0,2):h=Ns([6,49.7],Dp,tm),e.setCenter(h),e.setZoom(g),e.setRotation(i||0)}}const bbe=new ybe,Xc={ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",SHOW_LABEL:"b",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"},Jc={LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon"},vbe={LineString:Jc.LINE_STRING,Point:Jc.POINT,Polygon:Jc.POLYGON,MultiLineString:Jc.LINE_STRING,MultiPoint:Jc.POINT,MultiPolygon:Jc.POLYGON};let I0={};class xbe extends kpe{constructor(t){super();_a(this,"accuracy_");_a(this,"encodeStyles_");_a(this,"propertiesFunction_");_a(this,"setStyle_");_a(this,"prevX_");_a(this,"prevY_");const i=t??{};this.accuracy_=i.accuracy??wbe,this.encodeStyles_=i.encodeStyles??!0,this.propertiesFunction_=i.properties??Ibe,this.setStyle_=i.setStyle??!0,this.prevX_=0,this.prevY_=0,I0=i.propertiesType!==void 0&&i.propertiesType}decodeCoordinates_(t,i){const n=t.length;let s=0;const r=i!==void 0?i:[];let l=r.length;for(;s<n;){let c,h=0,g=0;do c=iw.indexOf(t.charAt(s++)),g|=(c&31)<<h,h+=5;while(c>=32);const b=g&1?~(g>>1):g>>1;this.prevX_+=b,h=0,g=0;do c=iw.indexOf(t.charAt(s++)),g|=(c&31)<<h,h+=5;while(c>=32);const v=g&1?~(g>>1):g>>1;this.prevY_+=v,r[l++]=this.prevX_*this.accuracy_,r[l++]=this.prevY_*this.accuracy_}return r}encodeCoordinates_(t,i,n,s){let r="";for(let l=n;l<s;l+=i){let c=t[l],h=t[l+1];c=Math.floor(c/this.accuracy_),h=Math.floor(h/this.accuracy_);const g=c-this.prevX_,b=h-this.prevY_;this.prevX_=c,this.prevY_=h,r+=C8(g)+C8(b)}return r}readFeatureFromText(t){let i=t.indexOf("~");const n=i>=0?t.substring(0,i)+")":t,s=this.readGeometryFromText(n),r=new Jn(s);if(i>=0){const l=t.substring(i+1,t.length-1);i=l.indexOf("~");const c=i>=0?l.substring(0,i):l;if(c!=""){const h=c.split("'");for(let g=0;g<h.length;++g){const v=h[g].split("*");let C=v[0];const S=v[1];!this.setStyle_&&I0[C]&&(C=I0[C]),r.set(C,S)}}if(i>=0){const h=l.substring(i+1);this.setStyle_?Pbe(h,r):Bbe(h,r)}}return r}readFeaturesFromText(t){const i=[];for(t=t.substring(1);t.length>0;){const n=t.indexOf(")"),s=this.readFeatureFromText(t.substring(0,n+1));i.push(s),t=t.substring(n+1)}return i}readGeometryFromText(t){const i=Ube[t[0]];return this.prevX_=0,this.prevY_=0,i.call(this,t)}getCastShortProperty(t,i){const n=dp[i];return GB(i,t.get(n))}decodeShortProperties(t,i){var g;const n=(g=t.getGeometry())==null?void 0:g.getType(),s=this.getCastShortProperty(t,"isCircle")?"drawnCircle":this.getCastShortProperty(t,"isLabel")?"drawnLabel":`drawn${n==null?void 0:n.replace("String","")}`,r={showOrientation:!1,...Object.fromEntries(Hbe.map(b=>[b,this.getCastShortProperty(t,b)]))},l=t.get(dp.name),c=t.get(dp.description);return Object.values(dp).forEach(b=>t.unset(b)),Object.assign(new Xh,t,{id:Math.floor(Math.random()*Date.now()),label:l,description:c,editable:!1,display_order:i,selected:!1,map_id:void 0,saving:!1,featureType:s,featureStyle:r})}writeFeatureText(t,i){const n=[];let s="";const r=t.getGeometry();r!=null&&(s=this.writeGeometryText(r,i)),s.length>0&&(s=s.substring(0,s.length-1),n.push(s));const l=[],c=function(g,b){if(b!==t.getGeometryName()){l.length!==0&&l.push("'");const v=b.replace(/[()'*]/g,"_")+"*"+g.toString().replace(/[()'*]/g,"_");l.push(v)}},h=this.propertiesFunction_(t);for(const g in h)c(h[g],g);if(l.length>0&&(n.push("~"),Array.prototype.push.apply(n,l)),this.encodeStyles_){const g=t.getStyleFunction();if(g!==void 0){let b=g.call(this,t,0);if(b!==null){const v=[];b=Array.isArray(b)?b:[b],Abe(b,r==null?void 0:r.getType(),v),v.length>0&&(n.push("~"),Array.prototype.push.apply(n,v))}}}return n.push(")"),n.join("")}writeFeaturesText(t,i){const n=[];if(t.length>0){n.push("F");for(let s=0,r=t.length;s<r;++s)n.push(this.writeFeatureText(t[s],i))}return n.join("")}writeGeometryText(t,i){const n=Xbe[t.getType()],s=Ml(t,!0,i);return this.prevX_=0,this.prevY_=0,n.call(this,s)}}const iw=".-_!*ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghjkmnpqrstuvwxyz",wbe=1;function Ibe(a){return a.getProperties()}function C8(a){let e=a<<1;return a<0&&(e=~e),Cbe(e)}function Cbe(a){let e="";for(;a>=32;)e+=iw.charAt(32|a&31),a>>=5;return e+=iw.charAt(a),e}function Abe(a,e,t){const i=vbe[e];for(let n=0;n<a.length;++n){const s=a[n],r=s.getFill(),l=s.getImage(),c=s.getStroke(),h=s.getText();i==Jc.POLYGON?r!==null&&c&&Ebe(r,c,t):i==Jc.LINE_STRING?c!==null&&Sbe(c,t):i==Jc.POINT&&l!==null&&Tbe(l,t),h!==null&&Mbe(h,t)}}function Sbe(a,e){k5(a,e)}function Tbe(a,e){if(a instanceof uu){const t=a.getRadius();e.length>0&&e.push("'"),e.push("pointRadius*"+t);const i=a.getFill();i!==null&&R5(i,e);const n=a.getStroke();n!==null&&k5(n,e)}}function Ebe(a,e,t){R5(a,t),e!==null&&k5(e,t)}function R5(a,e,t){const i=t!==void 0?t:"fillColor",n=a.getColor();if(n!==null){const s=Cl(n),r=BP(s);e.length>0&&e.push("'"),e.push(i+"*"+r)}}function k5(a,e){const t=a.getColor();if(t!==null){const n=Cl(t),s=BP(n);e.length>0&&e.push("'"),e.push("strokeColor*"+s)}const i=a.getWidth();i!==void 0&&(e.length>0&&e.push("'"),e.push("strokeWidth*"+i))}function Mbe(a,e){const t=a.getFont();if(t!==void 0){const n=t.split(" ");n.length>=3&&(e.length>0&&e.push("'"),e.push("fontSize*"+n[1]))}const i=a.getFill();i!==null&&R5(i,e,"fontColor")}function Lbe(a){a=a.substring(2,a.length-1);const e=this==null?void 0:this.decodeCoordinates_(a);return new is(e)}function Rbe(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split("'");for(let n=0,s=i.length;n<s;++n)e=this==null?void 0:this.decodeCoordinates_(i[n],e),t[n]=e.length;return new zh(e,"XY",t)}function kbe(a){a=a.substring(2,a.length-1);const e=this==null?void 0:this.decodeCoordinates_(a);return new Zr(e)}function Wbe(a){a=a.substring(2,a.length-1);const e=this==null?void 0:this.decodeCoordinates_(a);return new bm(e)}function Gbe(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split("'");for(let n=0,s=i.length;n<s;++n){e=this==null?void 0:this.decodeCoordinates_(i[n],e);let r=e.length;n===0?(e[r++]=e[0],e[r++]=e[1]):(e[r++]=e[t[n-1]],e[r++]=e[t[n-1]+1]),t[n]=r}return new nc(e,"XY",t)}function Obe(a){a=a.substring(2,a.length-1);let e=[];const t=[],i=a.split(")(");for(let n=0,s=i.length;n<s;++n){const r=i[n].split("'"),l=t[n]=[];for(let c=0,h=r.length;c<h;++c){e=this==null?void 0:this.decodeCoordinates_(r[c],e);let g=e.length;c===0?(e[g++]=e[0],e[g++]=e[1]):(e[g++]=e[l[c-1]],e[g++]=e[l[c-1]+1]),l[c]=g}}return new L1(e,"XY",t)}function Pbe(a,e){if(a=="")return;const t=OB(a),i=t.fillColor,n=t.fontSize,s=t.fontColor,r=t.pointRadius,l=t.strokeColor,c=t.strokeWidth;let h;i!==void 0&&(h=new bs({color:i}));let g;l!==void 0&&c!==void 0&&(g=new Vr({color:l,width:c}));let b;r!==void 0&&(b=new uu({radius:r,fill:h,stroke:g}),h=g=void 0);let v;n!==void 0&&s!==void 0&&(v=new g1({font:n+" sans-serif",fill:new bs({color:s})}));const C=new Qn({fill:h,image:b,stroke:g,text:v});e.setStyle(C)}function Bbe(a,e){const t=OB(a),i=e.getGeometry();if(i instanceof Zr?t.isLabel||t[Xc.IS_TEXT]?(delete t.strokeColor,delete t.fillColor):(delete t.fontColor,delete t.fontSize):(delete t.fontColor,i instanceof is&&(delete t.fillColor,delete t.fillOpacity)),t.fontSize){let s=parseFloat(t.fontSize);t.fontSize.indexOf("px")!==-1&&(s=Math.round(s/1.333333)),t.fontSize=s}const n={};for(const s in t){const r=t[s];I0[s]?n[I0[s]]=r:n[s]=r}e.setProperties(n)}function GB(a,e){const t=[Xc.ANGLE,Xc.OPACITY,Xc.SIZE,Xc.STROKE,"pointRadius","strokeWidth","stroke","angle","opacity","size"],i=[Xc.IS_CIRCLE,Xc.IS_RECTANGLE,Xc.IS_TEXT,Xc.SHOW_MEASURE,"isCircle","isRectangle","isLabel","showMeasure","showOrientation"];return t.includes(a)?+e:i.includes(a)?e==="true":e}function OB(a){const e=a.split("'"),t={};for(let i=0;i<e.length;++i){const s=e[i].split("*"),r=s[0],l=s[1];t[r]=GB(r,l)}return t}function Fbe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"l("+(this==null?void 0:this.encodeCoordinates_(t,i,0,n))+")"}function Nbe(a){const e=a,t=e.getEnds(),i=t.length,n=e.getFlatCoordinates(),s=e.getStride();let r=0;const l=["L("];for(let c=0;c<i;++c){const h=t[c],g=this==null?void 0:this.encodeCoordinates_(n,s,r,h);c!==0&&l.push("'"),l.push(g),r=h}return l.push(")"),l.join("")}function Dbe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"p("+(this==null?void 0:this.encodeCoordinates_(t,i,0,n))+")"}function Vbe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=t.length;return"P("+(this==null?void 0:this.encodeCoordinates_(t,i,0,n))+")"}function PB(a,e,t,i,n){const s=i.length;for(let r=0;r<s;++r){const l=i[r]-e,c=this==null?void 0:this.encodeCoordinates_(a,e,t,l);r!==0&&n.push("'"),n.push(c),t=i[r]}return t}function Zbe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=e.getEnds(),s=0,r=["a("];return PB.call(this,t,i,s,n,r),r.push(")"),r.join("")}function zbe(a){const e=a,t=e.getFlatCoordinates(),i=e.getStride(),n=e.getEndss(),s=n.length;let r=0;const l=["A"];for(let c=0;c<s;++c){const h=n[c];l.push("("),r=PB.call(this,t,i,r,h,l),l.push(")")}return l.join("")}const Ube={P:Wbe,L:Rbe,A:Obe,l:Lbe,p:kbe,a:Gbe},Xbe={MultiLineString:Nbe,MultiPoint:Vbe,MultiPolygon:zbe,LineString:Fbe,Point:Dbe,Polygon:Zbe},dp={angle:"a",color:"c",description:"d",stroke:"e",isLabel:"i",linestyle:"l",name:"n",opacity:"o",showOrientation:"r",shape:"s",size:"t",isCircle:"u",symbolId:"symbolId",symboltype:"symboltype"},Hbe=["angle","color","stroke","linestyle","opacity","showOrientation","shape","size","symbolId","symboltype"],S2=new xbe({encodeStyles:!1,properties:function(a){const e=a.toProperties();for(const t in e)if(e[t]===null||e[t]===void 0)delete e[t];else if(dp[t]){const i=e[t];delete e[t],e[dp[t]]=i}return e}});window.Cypress&&(window.featureHash=S2);class Ybe{featuresToUrl(e){if(!e)return"";const t=e.filter(i=>!i.map_id).sort((i,n)=>i.display_order-n.display_order).map(i=>{const n=new Xh(i);return WP(n)});return t.length>0?S2.writeFeatures(t):""}urlToFeatures(e){return(e?S2.readFeatures(e):[]).map((n,s)=>S2.decodeShortProperties(n,s)).map(n=>Khe(n))}}const A8=new Ybe;class Kbe{bootstrap(){this.restore();let e;e=er(()=>{this.persist(),e&&e()})}persist(){const{drawnFeatures:e}=Zt(ro());Kt(e,t=>{Ia.setValue($S,t,A8.featuresToUrl)},{immediate:!0})}restore(){const{drawnFeatures:e}=Zt(ro()),i=Ia.getValue($S,A8.urlToFeatures).filter(n=>n!=null);e.value=[...e.value,...i]}}const qbe=new Kbe;class jbe{bootstrap(){this.restore();let e;e=er(()=>{this.persist(),e&&e()})}persist(){const{locationInfoCoords:e}=Zt(pd());Kt(e,t=>{t===void 0?Ia.removeItem(lA):(Ia.setValue(lA,!0),Ia.setValue(t4,t[0]),Ia.setValue(a4,t[1]))},{immediate:!0})}restore(){const{locationInfoCoords:e}=Zt(pd()),t=zi().getOlMap(),i=Ia.getValue(lA);i&&i!=="false"&&(e.value=t.getView().getCenter())}}const Jbe=new jbe,Qbe={key:0,"data-cy":"attributionControl",class:"absolute bottom-0 z-10 text-[0.8em] px-[4px] text-[#6b818f] bg-[#ffffffb3]"},$be=bt({__name:"attribution-control",setup(a){const e=mn(),t=Qe("");return er(()=>{var i,n;t.value=((n=(i=e.bgLayer)==null?void 0:i.metadata)==null?void 0:n.attribution)||""}),(i,n)=>{const s=Fh("dompurify-html");return t.value?Mi((se(),Ie("div",Qbe,null,512)),[[s,t.value]]):je("",!0)}}});function gf(a,e){const t=new a(e),i=zi(),n=ys("olMap");return tr(()=>{n.addControl(t),n.changed()}),Ds(()=>{const s=i.getOlMap();s.removeControl(t),s.changed()}),{control:t}}const eve=["title"],tve=bt({__name:"location-control",props:{className:{default:"location-button"},label:{default:""},tipLabel:{default:"Location"}},setup(a){const{t:e}=ya(),t=a,i=Qe(null);function n(){}return tr(()=>gf(Cm,{...t,target:i})),(s,r)=>(se(),Ie("div",{ref_key:"controlElement",ref:i,class:ti(`tracker-off ${t.className} ${X(Dh)} ${X(Im)}`)},[q("button",{title:X(e)(t.tipLabel),onClick:n},Fe(t.label),9,eve)],2))}}),ave=["title"],ive=bt({__name:"map-3d",props:{className:{default:"map-3d-button"},label:{default:""},tipLabel:{default:"3d"}},setup(a){const e=mn(),{t}=ya(),i=a,n=Qe(null);tr(()=>gf(Cm,{...i,target:n}));const s=()=>{e.setIs3dActive(!e.is3dActive)};return(r,l)=>(se(),Ie("div",{ref_key:"controlElement",ref:n,class:ti(`${i.className} ${X(Dh)} ${X(Im)} ${X(e).is3dActive?"active":""}`)},[q("button",{title:X(t)(i.tipLabel),onClick:s},Fe(i.label),9,ave)],2))}}),S8=["fullscreenchange","webkitfullscreenchange"],T8={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class nve extends Cm{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const i=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof i=="string"?document.createTextNode(i):i;const n=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(Ba.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Dh} ${Im}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(E8(t))if(M8(t))sve(t);else{let i;this.source_?i=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:i=e.getTargetElement(),this.keys_?rve(i):BB(i)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=M8(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?($2(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(T8.ENTERFULLSCREEN)):($2(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(T8.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(Qr.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(Qr.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let i=0,n=e.length;i<n;++i)dn(e[i]);e.length=0;const t=this.getMap();if(t){const i=t.getOwnerDocument();E8(i)?this.element.classList.remove(OL):this.element.classList.add(OL);for(let n=0,s=S8.length;n<s;++n)e.push(La(i,S8[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function E8(a){const e=a.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&a.fullscreenEnabled)}function M8(a){return!!(a.webkitIsFullScreen||a.fullscreenElement)}function BB(a){a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()}function rve(a){a.webkitRequestFullscreen?a.webkitRequestFullscreen():BB(a)}function sve(a){a.exitFullscreen?a.exitFullscreen():a.webkitExitFullscreen&&a.webkitExitFullscreen()}const ove=nve,lve=bt({__name:"fullscreen-control",props:{className:{},label:{default:""},labelActive:{default:""}},setup(a){return gf(ove,a),(t,i)=>je("",!0)}}),uve=bt({__name:"zoom-control",props:{className:{},zoomInLabel:{default:""},zoomOutLabel:{default:""}},setup(a){return gf(h7,a),(t,i)=>je("",!0)}}),cve=bt({__name:"rotate-control",props:{className:{},label:{}},setup(a){return gf(d7,a),(t,i)=>je("",!0)}});let dve=class extends Cm{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.extent=e.extent?e.extent:null;const t=e.className!==void 0?e.className:"ol-zoom-extent",i=e.label!==void 0?e.label:"E",n=e.tipLabel!==void 0?e.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=n,s.appendChild(typeof i=="string"?document.createTextNode(i):i),s.addEventListener(Ba.CLICK,this.handleClick_.bind(this),!1);const r=t+" "+Dh+" "+Im,l=this.element;l.className=r,l.appendChild(s)}handleClick_(e){e.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),i=this.extent?yl(this.extent,t.getProjection()):t.getProjection().getExtent();t.fitInternal(CS(i))}};const hve=dve;class _ve extends hve{constructor(t){super(t);_a(this,"ol3dm")}handleZoomToExtent(){this.ol3dm&&this.ol3dm.luxCameraExtentInRadians&&this.ol3dm.is3dEnabled()||super.handleZoomToExtent()}}const mve=bt({__name:"zoom-to-extent-control",props:{className:{},label:{default:""},tipLabel:{},extent:{}},setup(a){return gf(_ve,a),(t,i)=>je("",!0)}}),L8=bt({__name:"map-container",props:{v4_standalone:{type:Boolean,default:!1}},setup(a){const e=yi(),{embedded:t}=Zt(e),i=zi(),n=Qe(null),s=i.createMap(),r=a;s.getInteractions().forEach(h=>{h instanceof ES&&s.removeInteraction(h)});const l=new ES({condition:XX});s.addInteraction(l),r.v4_standalone&&(mbe(),pbe(),WB().addDrawLayer(s),lbe(),_be().init());const c=[425152.9429259216,632446599999133e-8,914349.9239510496,6507914867875754e-9];return tr(()=>{n.value&&(new nbe(s),new rbe(s),bbe.bootstrap(),qbe.bootstrap(),Jbe.bootstrap(),s.setTarget(n.value),window.olMap=s)}),er(()=>{n.value&&t.value&&setTimeout(()=>{i.resize()},1e3)}),fw("olMap",s),(h,g)=>(se(),Ie("div",{id:"map-container","data-cy":"mapContainer",ref_key:"mapContainer",ref:n,class:"h-full w-full bg-white relative"},[dt(uve),dt(mve,{extent:c}),X(t)?je("",!0):(se(),Ie(ua,{key:0},[dt(lve),dt($be),h.v4_standalone?(se(),xa(ive,{key:0})):je("",!0),dt(tve),dt(cve)],64))],512))}});function gve(a,e){var t,i;return a.children&&!e.children||((t=e.children)==null?void 0:t.length)===0?1:e.children&&!a.children||((i=a.children)==null?void 0:i.length)===0?-1:0}function FB(a,e,t=0){const{name:i="",type:n=Qu.WMS,children:s}=a,r=`${n}||${e}||${i}`.split("-").join("%2D"),l=mn();return{id:r,name:i,depth:t,children:s==null?void 0:s.sort(gve).map(c=>FB(c,e,t+1)),checked:l.hasLayer(r),expanded:!1}}function pve(a){const e=decodeURIComponent(a),[t,i,n]=e.split("||");return NB({id:e,url:J0.getProxyfiedUrl(i),remoteLayer:{name:n,type:t}})}function NB({id:a,url:e,remoteLayer:t}){const{name:i="",type:n=Qu.WMS}=t;return{id:a,name:i,layers:i,url:e,type:n,imageType:_W.PNG}}const fve={class:"relative text-center","data-cy":"remoteLayerModalContent"},yve=["placeholder","value"],bve={key:0,class:"text-center"},vve={class:"lux-label"},xve={key:1,class:"text-center"},wve={class:"lux-label"},Ive={key:2,class:"text-center"},Cve={key:3,class:"overflow-auto max-h-[calc(400px-36px)]"},Ave=bt({__name:"remote-layers",setup(a){const{t:e}=ya(),t=mn(),i=al(),n=Wi([]),s=Wi(),{remoteLayersOpen:r}=Zt(yi()),{setRemoteLayersOpen:l}=yi();let c=!1,h,g,b;er(v);function v(){s.value=s.value?Lp.updateLayers(s.value,t.layers):void 0}Q0.fetchRemoteWmsEndpoint().then(B=>{n.value=B.map(({url:z,label:j})=>({label:j,value:z}))});async function C(B){c=!0,b=await Q0.getRemoteEndpoint(B).catch(()=>alert(e("Impossible de contacter ce WMS",{ns:"client"}))),g=B,c=!1}async function S(){const B=b,z=B==null?void 0:B.getLayers();if(z&&z[0]){const j=FB(z[0],g);s.value=Lp.updateLayers(j,t.layers)}}async function L(B){g=h=B,await C(g),S()}function R(B){h=B.target.value}async function G(){await C(h),S()}function O(B){s.value=Lp.toggleNode(B.id,s.value,"expanded")}function V(B){const{id:z,name:j}=B,re=b;if(B.checked===!0)t.removeLayers(z);else{const ne=re==null?void 0:re.getLayerByName(j);if(ne){const te=i.initLayer(NB({id:z,url:J0.getProxyfiedUrl(g),remoteLayer:ne}));t.addLayers(te)}}}return(B,z)=>X(r)?(se(),xa(gB,{key:0,title:X(e)("Add external data",{ns:"client"}),onClose:z[0]||(z[0]=j=>X(l)(!1))},{content:Ha(()=>{var j,re;return[q("div",fve,[dt(dx,{class:"lux-remote-services-dropdown",options:n.value,placeholder:X(e)("Predefined wms",{ns:"client"}),onChange:L},null,8,["options","placeholder"]),q("input",{class:"lux-input w-[300px]",type:"url",placeholder:X(e)("Choose or write a WMS url",{ns:"client"}),value:X(g)||"",onChange:R},null,40,yve),q("button",{type:"button",class:"lux-btn",onClick:G},Fe(X(e)("Get the layers",{ns:"client"})),1)]),!X(c)&&X(b)?(se(),Ie("div",bve,[q("span",vve,Fe(X(e)("Description du service :",{ns:"client"})),1),wr(" "+Fe((j=X(b).getServiceInfo())==null?void 0:j.abstract),1)])):je("",!0),!X(c)&&X(b)?(se(),Ie("div",xve,[q("span",wve,Fe(X(e)("Access constraints :",{ns:"client"})),1),wr(" "+Fe((re=X(b).getServiceInfo())==null?void 0:re.constraints),1)])):je("",!0),X(c)?(se(),Ie("div",Ive,[z[1]||(z[1]=q("div",{class:"fa fa-refresh fa-spin"},null,-1)),q("span",null,Fe(X(e)("Chargement des informations",{ns:"client"})),1)])):je("",!0),X(c)?je("",!0):(se(),Ie("div",Cve,[s.value?(se(),xa(G4,{key:0,class:"block p-[10px] mb-[11px]",node:s.value,onToggleParent:O,onToggleLayer:V},null,8,["node"])):je("",!0)]))]}),_:1},8,["title"])):je("",!0)}});class Sve{bootstrap(){let e;e=er(()=>{this.restore(),this.persist(),e&&e()})}persist(){const e=aw();Kt([()=>e.sliderActive,()=>e.sliderRatio],([t,i],[n])=>{t!==n&&Ia.setValue(i4,t),Ia.setValue(n4,i)})}restore(){const e=Ia.getValue(i4,N3),t=Ia.getValue(n4,K_),{toggleSlider:i,setRatio:n}=aw();typeof e<"u"&&e!==null&&(i(e),typeof t!==void 0&&t!==null&&n(t??LB))}}const Tve=new Sve,Eve=["onKeydown"],Mve={key:0,"data-cy":"sliderLayerLabel",class:"lux-slider-layer-label"},R8=30,Lve=bt({__name:"splitter-element",props:{sliderActive:{type:Boolean},sliderRatio:{},sliderTopLayer:{},sliderOffset:{},containerOffset:{}},emits:["moveSplitBar","escSplitBar"],setup(a,{expose:e,emit:t}){const i=a,n=t,{t:s}=ya(),r=Qe(null),l=Ft(()=>({left:`${i.sliderOffset}px`}));let c=!1;e({sliderElement:r});function h(R){n("moveSplitBar",R+r.value.offsetWidth/2)}function g(){c=!0,document.addEventListener("mousemove",b),document.addEventListener("mouseup",v)}function b(R){c&&h(R.clientX)}function v(){c=!1,document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",v)}function C(){const R=i.containerOffset+r.value.offsetLeft;h(R+R8)}function S(){const R=i.containerOffset+r.value.offsetLeft;h(R-R8)}function L(){n("escSplitBar")}return tr(()=>{var R;(R=r.value)==null||R.focus({focusVisible:!0})}),Ds(()=>{document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",v)}),(R,G)=>(se(),Ie("button",{ref_key:"sliderElement",ref:r,onMousedown:g,onMousemove:b,onMouseup:v,onKeydown:[Yl(Hl(C,["stop"]),["space"]),Yl(Hl(C,["stop"]),["right"]),Yl(Hl(S,["stop"]),["left"]),Yl(Hl(S,["stop"]),["delete"]),Yl(Hl(L,["stop"]),["esc"])],class:"left-[20px] absolute h-full w-[32px] block",style:Oh(l.value),role:"seperator","aria-controls":"map-container","data-cy":"sliderElement"},[G[1]||(G[1]=q("span",{class:"lux-slider-line"},null,-1)),G[2]||(G[2]=q("span",{class:"lux-slider-arrows"},[q("span"),q("span")],-1)),R.sliderTopLayer?(se(),Ie("span",Mve,[G[0]||(G[0]=q("i",{class:"fa fa-arrow-left mr-2"},null,-1)),q("span",null,Fe(X(s)(R.sliderTopLayer.name)),1)])):je("",!0)],44,Eve))}}),Rve=bt({__name:"slider-comparator",setup(a){const e=aw(),t=l5(),i=zi().olMap,n=Qe(null),{sliderActive:s,sliderRatio:r,sliderTopLayer:l}=Zt(e),c=Ft(()=>{var B,z;return((z=(B=n.value)==null?void 0:B.sliderElement)==null?void 0:z.offsetWidth)||0}),h=Qe([0,0]),g=function(){var z,j,re;let B=(re=(j=(z=i.value)==null?void 0:z.getViewport())==null?void 0:j.parentElement)==null?void 0:re.offsetLeft;return(B===void 0||B===0)&&(B=L==null?void 0:L.offsetLeft),B!==void 0?B:0},b=Ft(()=>{var B,z;return i.value&&n.value?r.value*h.value[0]-((z=(B=n.value)==null?void 0:B.sliderElement)==null?void 0:z.offsetWidth)/2:0});let v,C,S,L;Tve.bootstrap(),Kt([l,s],([B,z],[j])=>{var re;B&&z?(B!==j&&G(),R()):G(),(re=i.value)==null||re.render()}),Kt(b,()=>{var B;(B=i.value)==null||B.render()});function R(){var z;const B=t.getLayerFromCache(l.value);h.value=(z=i.value)==null?void 0:z.getSize(),B&&(v=B.on(Ro.PRERENDER,function(j){const re=j.context,ne=b.value+c.value/2,te=kv(j,[0,0]),le=kv(j,[ne,0]),ue=kv(j,[0,h.value[1]]),fe=kv(j,[ne,h.value[1]]);re.save(),re.beginPath(),re.moveTo(te[0],te[1]),re.lineTo(ue[0],ue[1]),re.lineTo(fe[0],fe[1]),re.lineTo(le[0],le[1]),re.closePath(),re.clip()}),C=B.on(Ro.POSTRENDER,function(j){j.context.restore()}),S=i==null?void 0:i.value.on("change:size",()=>{var j;h.value=(j=i.value)==null?void 0:j.getSize()}))}function G(){CT([v,C,S])}function O(B){var re;const z=(re=i.value)==null?void 0:re.getSize(),j=(B-g())/z[0];e.setRatio(j)}function V(){e.toggleSlider()}return tr(()=>{var B,z;L=(z=(B=i.value)==null?void 0:B.getTargetElement())==null?void 0:z.closest(".map-wrapper")}),Ds(()=>{G()}),(B,z)=>X(l)&&X(s)?(se(),xa(Lve,{key:0,ref_key:"splitterElement",ref:n,sliderActive:X(s),sliderRatio:X(r),sliderTopLayer:X(l),sliderOffset:b.value,containerOffset:g(),onMoveSplitBar:O,onEscSplitBar:V},null,8,["sliderActive","sliderRatio","sliderTopLayer","sliderOffset","containerOffset"])):je("",!0)}}),kve=bt({__name:"simple-style-item",props:{styleName:{},colors:{}},setup(a){const e=a;return(t,i)=>(se(!0),Ie(ua,null,Gn(e.colors,(n,s)=>(se(),Ie("span",{key:`${t.styleName}-${s}`,class:"grow m-px",style:Oh(`background-color: ${n}`)},"   ",4))),128))}}),Wve={class:"text-white border-2 p-[10px] m-[10px]"},Gve={class:"text-center mb-3"},Ove=["title"],Pve={class:"text-white"},Bve=["title","onClick"],Fve={class:"flex"},Nve=bt({__name:"simple-style-selector",setup(a){const{t:e}=ya(),t=eu(),i=Uh(),{bgStyle:n}=Zt(t),s=ud().simple_styles.road,r=Qe(s);Kt(n,c=>r.value=i.checkSelection(c||[],s),{immediate:!0});function l(c){t.setSimpleStyle(c)}return(c,h)=>(se(),Ie("div",Wve,[q("h5",Gve,Fe(X(e)("Sélectionner un set de couleurs",{ns:"client"})),1),(se(!0),Ie(ua,null,Gn(r.value,g=>(se(),Ie("div",{key:g.unlocalized_label,title:X(e)(g.unlocalized_label,{ns:"client"}),class:ti(`${g.selected?"border-dotted":"border-hidden"} border-2 p-px`)},[q("span",Pve,Fe(X(e)(g.unlocalized_label,{ns:"client"}))+" : ",1),q("button",{title:X(e)("Select style: {{styleName}}",{ns:"app",styleName:X(e)(g.unlocalized_label)}),onClick:b=>l(g),class:"w-full"},[q("span",Fve,[dt(kve,{colors:g.colors,"style-name":g.unlocalized_label},null,8,["colors","style-name"])])],8,Bve)],10,Ove))),128))]))}});function Dve(a){const e=Vve(a);return!e||!e.medium_style_class?[]:ud().medium_default_styles[e.medium_style_class]}function Vve(a){return ud().bg_layers.find(e=>e.id==(a==null?void 0:a.id))}const Zve={class:"flex w-full items-center"},zve={for:"colorId",class:"w-40 m-0 font-medium"},Uve={class:"grow"},Xve=["value"],Hve=["checked","aria-label"],Yve=bt({__name:"medium-style-item",props:{style:{},colorEditable:{type:Boolean}},emits:["changeStyle"],setup(a,{emit:e}){const{t}=ya(),i=a,n=e;function s(l){if(l.target){const c={...i.style,color:l.target.value};n("changeStyle",c)}}function r(l){if(l){const c={...i.style,visible:l.target.checked};n("changeStyle",c)}}return(l,c)=>(se(),Ie("div",Zve,[q("label",zve,Fe(X(t)(l.style.label)),1),q("div",Uve,[l.colorEditable&&i.style.color?(se(),Ie("input",{key:0,id:"colorId",type:"color",class:"w-11 h-5 py-[1px] px-[2px]",value:i.style.color,onInput:s},null,40,Xve)):je("",!0)]),q("input",{type:"checkbox",class:"flex-none mr-3",checked:i.style.visible,onChange:r,"aria-label":X(t)("Show or hide {{thematicName}}",{ns:"app",thematicName:i.style.label})},null,40,Hve)]))}}),Kve={class:"text-white border-2 p-[10px] m-[10px]"},qve={class:"text-center mb-3"},jve=bt({__name:"medium-style-selector",props:{layer:{}},setup(a){const e=["basemap_2015_global"],t=eu(),{bgStyle:i}=Zt(t),{t:n}=ya(),s=a,r=Ft(()=>e.includes(s.layer.name)),l=Ft(()=>i.value||Dve(s.layer));function c(h,g){i.value=l.value.map((b,v)=>v===h?g:b),t.disableExpertStyle()}return(h,g)=>(se(),Ie("div",Kve,[q("h5",qve,Fe(r.value?X(n)("Sélectionner une couleur par couche"):X(n)("Afficher une catégorie par couche")),1),(se(!0),Ie(ua,null,Gn(l.value,(b,v)=>(se(),xa(Yve,{key:b.label,style:Oh(b),onChangeStyle:C=>c(v,C),colorEditable:r.value},null,8,["style","onChangeStyle","colorEditable"]))),128))]))}});var DB={exports:{}};(function(a,e){(function(t,i){i()})(Hg,function(){function t(h,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function i(h,g,b){var v=new XMLHttpRequest;v.open("GET",h),v.responseType="blob",v.onload=function(){c(v.response,g,b)},v.onerror=function(){console.error("could not download file")},v.send()}function n(h){var g=new XMLHttpRequest;g.open("HEAD",h,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function s(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(g)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hg=="object"&&Hg.global===Hg?Hg:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(h,g,b){var v=r.URL||r.webkitURL,C=document.createElement("a");g=g||h.name||"download",C.download=g,C.rel="noopener",typeof h=="string"?(C.href=h,C.origin===location.origin?s(C):n(C.href)?i(h,g,b):s(C,C.target="_blank")):(C.href=v.createObjectURL(h),setTimeout(function(){v.revokeObjectURL(C.href)},4e4),setTimeout(function(){s(C)},0))}:"msSaveOrOpenBlob"in navigator?function(h,g,b){if(g=g||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(t(h,b),g);else if(n(h))i(h,g,b);else{var v=document.createElement("a");v.href=h,v.target="_blank",setTimeout(function(){s(v)})}}:function(h,g,b,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof h=="string")return i(h,g,b);var C=h.type==="application/octet-stream",S=/constructor/i.test(r.HTMLElement)||r.safari,L=/CriOS\/[\d]+/.test(navigator.userAgent);if((L||C&&S||l)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var V=R.result;V=L?V:V.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=V:location=V,v=null},R.readAsDataURL(h)}else{var G=r.URL||r.webkitURL,O=G.createObjectURL(h);v?v.location=O:location.href=O,v=null,setTimeout(function(){G.revokeObjectURL(O)},4e4)}});r.saveAs=c.saveAs=c,a.exports=c})})(DB);var Jve=DB.exports;const Qve={class:"text-white border-2 p-[10px] m-[10px] flex flex-col overflow-hidden"},$ve={class:"text-center mb-3"},e2e={class:"flex flex-row justify-center"},t2e={class:"absolute top-[70px] w-full text-center text-base leading-3 font-medium text-white"},a2e={class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] text-sm hover:bg-secondary"},i2e={class:"'block z-[5] w-full h-full cursor-pointer after:absolute after:pt-[15px] after:px-[15px] after:w-full after:text-center after:content-upload",for:"uploadMvtStyle"},n2e={class:"absolute top-[70px] w-full text-center text-base leading-3 font-medium"},r2e=["href"],s2e=bt({__name:"expert-style-selector",setup(a){const e=mn(),t=eu(),i=Uh(),{appliedStyle:n}=Zt(t),{t:s}=ya();function r(){const h=n.value,g=JSON.stringify(h),b=new Blob([g],{type:"text/plain;charset=utf-8"}),v="styles.json";Jve.saveAs(b,v)}function l(h){const g=h.target.files;if((g==null?void 0:g.length)!==1)return;const b=g[0];b.type==="application/json"&&(b.text().then(v=>{t.enableExpertStyle(),n.value=JSON.parse(v)}),h.target.value="")}function c(){return t.styleSerial===null?i.getDefaultMapBoxStyleUrl(i.getVectorId(e.bgLayer)):`${Uy.mvtStylesGetUrl}?id=${t.styleSerial}`}return(h,g)=>(se(),Ie("div",Qve,[q("h5",$ve,Fe(X(s)("Lancer éditeur externe ou importer json")),1),q("div",e2e,[q("a",{href:"#",class:"text-white border-2 relative h-[100px] w-[85px] mx-[10px] my-0 mb-[15px] z-5 text-sm after:absolute after:left-[20px] after:top-[10px] after:z-4 after:w-[3.6em] after:text-center after:content-download hover:bg-secondary",onClick:g[0]||(g[0]=b=>r())},[q("span",t2e,Fe(X(s)("Download style")),1)]),q("div",a2e,[q("label",i2e,[q("span",n2e,Fe(X(s)("Upload style")),1)]),q("input",{class:"invisible",type:"file",name:"uploadMvtStyle",id:"uploadMvtStyle",onChange:l},null,32)])]),q("a",{href:`https://maputnik.github.io/editor/?style=${c()}`,target:"_blank",class:"lux-btn text-center"},Fe(X(s)("Open Maputnik editor")),9,r2e)]))}}),o2e={key:0,class:"lux","data-cy":"styleSelector"},l2e={key:0,class:"mb-px"},u2e={key:1,class:"mb-px"},c2e={key:2,class:"mb-px"},d2e=bt({__name:"style-selector",setup(a){const{t:e}=ya(),t=mn(),i=yi(),n=eu(),{bgStyle:s,isExpertStyleActive:r}=Zt(n),{bgLayer:l}=Zt(t),{styleEditorOpenedSection:c}=Zt(i),h=Uh(),g=Ft(()=>h.getStyleCapabilitiesFromLayer(l.value)),b=Ft(()=>g.value.styleEditors);Kt(l,L=>{h.isLayerStyleEditable(L)?v():i.closeStyleEditorPanel()}),tr(()=>{v()});function v(){(!c.value||!b.value.includes(c.value))&&(c.value=b.value[0])}function C(){n.setStyle(null)}function S(L){c.value=c.value===L?void 0:L}return(L,R)=>g.value.isEditable?(se(),Ie("div",o2e,[b.value.includes(X(Ko).simpleStyle)?(se(),Ie("div",l2e,[dt(v2,{title:X(e)("Simple"),expanded:X(c)===X(Ko).simpleStyle,onTogglePanel:R[0]||(R[0]=()=>S(X(Ko).simpleStyle))},{default:Ha(()=>[dt(Nve)]),_:1},8,["title","expanded"])])):je("",!0),b.value.includes(X(Ko).mediumStyle)?(se(),Ie("div",u2e,[dt(v2,{title:X(e)("Medium"),expanded:X(c)===X(Ko).mediumStyle,onTogglePanel:R[1]||(R[1]=()=>S(X(Ko).mediumStyle))},{default:Ha(()=>[X(l)?(se(),xa(jve,{key:0,layer:X(l)},null,8,["layer"])):je("",!0)]),_:1},8,["title","expanded"])])):je("",!0),b.value.includes(X(Ko).advancedStyle)?(se(),Ie("div",c2e,[dt(v2,{title:X(e)("Expert (style.json)"),expanded:X(c)===X(Ko).advancedStyle,onTogglePanel:R[2]||(R[2]=()=>S(X(Ko).advancedStyle))},{default:Ha(()=>[X(l)?(se(),xa(s2e,{key:0,layer:X(l)},null,8,["layer"])):je("",!0)]),_:1},8,["title","expanded"])])):je("",!0),X(s)||X(r)?(se(),Ie("button",{key:3,onClick:C,class:"lux-btn my-2"},Fe(X(e)("Réinitialiser style",{ns:"client"})),1)):je("",!0)])):je("",!0)}}),h2e=bt({__name:"style-panel",setup(a){const{t:e}=ya(),t=yi();return(i,n)=>(se(),xa(P1,{"data-cy-value":"stylePanel","close-fn":X(t).closeStyleEditorPanel},{header:Ha(()=>[q("h1",null,Fe(X(e)("Vector tiles editor",{ns:"client"})),1)]),content:Ha(()=>[dt(d2e)]),_:1},8,["close-fn"]))}});class _2e{bootstrap(){this.restore();let e;e=er(()=>{this.persist(),e&&e()})}persist(){this.persistLayersOpen()}persistLayersOpen(){const e=yi(),{layersOpen:t}=Zt(e);Kt(t,(i,n)=>{n!==i&&Ia.setValue(vx,i)},{immediate:!0})}restore(){this.restoreLayersOpen(),this.restoreEmbeddedMode(),this.restoreIsAppMode()}restoreEmbeddedMode(){const e=Ia.getValue(Qne),t=e!==null&&e!=="false",{embedded:i}=Zt(yi());i.value=t}restoreLayersOpen(){const e=Ia.getValue(vx)!=="false",{setLayersOpen:t}=yi();t(e)}restoreIsAppMode(){const{setIsApp:e}=yi(),t=Ia.getValue(Wh)==="android"||Ia.getValue(Wh)==="ios"||Ia.getValue(Mm)==="yes";e(t)}}const m2e=new _2e,Kv="-",zA=",",k8="--";class g2e{constructor(){_a(this,"layersOpacitiesToNumbersV2",e=>this.layersOpacitiesToNumbers(e,zA))}layerTimesToStrings(e){return e?e.split(k8):[]}layerIdsToLayers(e){const t=od(),i=al();return(e?e.split(Kv):[]).map(s=>{const r=Q0.isRemoteLayer(s)?pve(s):t.findById(parseInt(s,10));return r?i.initLayer(r):void 0}).reverse()}layerNamesToLayersV2(e){const t=od(),i=al();return(e?e.split(zA):[]).map(s=>{const r=t.findByName(s);return r?i.initLayer(r):void 0}).reverse()}layersOpacitiesToNumbers(e,t=Kv){return ire(e,t).reverse()}layersVisibilitiesToBooleansV2(e){return nre(e,zA)}layersToLayerIds(e){return(e==null?void 0:e.map(t=>t.id).reverse().join(Kv))||""}layersToLayerOpacities(e){return(e==null?void 0:e.map(t=>t.opacity??1).reverse().join(Kv))||""}layersToLayerTimes(e){return(e==null?void 0:e.map(t=>al().getLayerCurrentTime(t)??"").reverse().join(k8))||""}bgLayerNameToBgLayer(e){const t=od();return e?t.findBgLayerByName(e):null}bgLayerToBgLayerName(e){return(e==null?void 0:e.name)||jx.name}}const qo=new g2e,p2e="basemap_2015_global",f2e="orthogr_2013_global",y2e={webbasemap:"basemap_2015_global","pixelmaps-color":"topogr_global","pixelmaps-gray":"topo_bw_jpeg",streets:"streets_jpeg",voidlayer:"blank"};class b2e{bootstrap(){const e=ps();let t;t=er(()=>{e.bgLayers.length>0&&(this.restore(),this.persist(),t&&t())})}persist(){const e=mn(),{bgLayer:t}=Zt(e);Kt(t,(i,n)=>{n!==i&&Ia.setValue(r9,i,qo.bgLayerToBgLayerName)},{immediate:!0})}restore(){const{setMapBackground:e}=hB(),t=this.getBgLayerFromStorage();e(t)}getBgLayerFromStorage(){const e=Ia.getInitialVersion(),t=Ia.getValue(r9);return t?e===2?this.getBgLayerFromStorageV2(t):qo.bgLayerNameToBgLayer(t):qo.bgLayerNameToBgLayer(p2e)}getBgLayerFromStorageV2(e){const t=Ia.getValue(nO,K_);let i="";return e?i=y2e[e]:t===0&&(i=f2e),qo.bgLayerNameToBgLayer(i)}}const v2e=new b2e;class x2e{bootstrap(){const e=ps();let t;t=er(()=>{e.themes&&(this.restore(),this.persist(),t&&t())})}persist(){const e=mn(),{layers:t}=Zt(e);Kt(t,(i,n)=>{n!==i&&(Ia.setValue(n9,i,qo.layersToLayerIds),Ia.setValue(s9,i,qo.layersToLayerOpacities),Ia.setValue(o9,i,qo.layersToLayerTimes))},{immediate:!0})}restore(){const e=Ia.getInitialVersion(),t=mn(),i=Ia.getValue(n9,e===2?qo.layerNamesToLayersV2:qo.layerIdsToLayers);this.restoreLayersOpacities(i,e),this.restoreLayersTimes(i),e===2&&(Ia.removeItem(nO),Ia.removeItem(tre),Ia.removeItem(c9),Ia.removeItem(d9)),t.addLayers(...(i==null?void 0:i.filter(n=>n))||[])}restoreLayersOpacities(e,t){const i=t===2?this.getOpacitiesFromStorageV2():this.getOpacitiesFromStorage();i.length&&(e==null||e.forEach((n,s)=>n&&(n.opacity=i[s]??1)))}restoreLayersTimes(e){const t=Ia.getValue(o9,qo.layerTimesToStrings);t.length&&(e==null||e.forEach((i,n)=>i&&t[n]&&this.restoreLayerTime(i,t[n])))}restoreLayerTime(e,t){const i=t.split("/");e.currentTimeMinValue=i[0],e.currentTimeMaxValue=i[1]}getOpacitiesFromStorage(){return Ia.getValue(s9,qo.layersOpacitiesToNumbers)}getOpacitiesFromStorageV2(){const e=Ia.getValue(c9,qo.layersOpacitiesToNumbersV2),t=Ia.getValue(d9,qo.layersVisibilitiesToBooleansV2);return e.map((i,n)=>t[n]?i:0).reverse()}}const w2e=new x2e;class I2e{bootstrap(){this.restore();let e;e=er(()=>{this.persist(),e&&e()})}persist(){}restore(){const e=Ia.getValue($ne);yi().setMapId(e)}}const C2e=new I2e;class A2e{themeToThemeName(e){return(e==null?void 0:e.name)||""}}const S2e=new A2e;class T2e{bootstrap(){this.restore();let e;e=er(()=>{this.persist(),e&&e()})}persist(){const e=ps();Kt(()=>e.theme,(t,i)=>{i!==t&&t&&Ia.setValue($0,t,S2e.themeToThemeName)},{immediate:!0})}restore(){const e=Ia.getValue($0);if(e){const{setTheme:t}=ps();t(e)}}}const E2e=new T2e;dW();class M2e extends dB{constructor(){super(...arguments);_a(this,"geojsonFormatCustom",new Lm)}encodeVectorStylePoint(t,i,n){let s;n instanceof uu?s=this.encodeVectorStylePointStyleCircle(t,n):n instanceof rc?s=this.encodeVectorStylePointStyleIcon(t,n):n instanceof uh&&(s=this.encodeVectorStylePointRegularShape(t,n)),s&&(this.customizer_.point(this.layerState_,t,s,n),i.push(s))}encodeVectorStylePointRegularShape(t,i){const n={type:"point"},s=i.getPoints(),r=i.getAngle();s===4&&r!==0?n.graphicName="square":s===4&&r===0?n.graphicName="cross":s===3?n.graphicName="triangle":s===5?n.graphicName="star":s===8&&(n.graphicName="cross");const l=i.getOpacity();l!==null&&(n.graphicOpacity=l);const c=i.getSize();if(c!==null){let v=i.getScale();Array.isArray(v)&&(v=(v[0]+v[1])/2),isNaN(v)&&(v=1),n.graphicWidth=c[1]*v}let h=i.getRotation();isNaN(h)&&(h=0),n.rotation=sm(h);const g=i.getFill(),b=i.getStroke();return g!==null&&this.encodeVectorStyleFill(t,n,g),b!==null&&this.encodeVectorStyleStroke(t,n,b),n!==void 0&&n.graphicName==="cross"&&(n.strokeWidth=0,n.fillOpacity=1),n}encodeVectorStylePointStyleIcon(t,i){const n=i.getSrc();if(n===void 0)return;const s={type:"point",externalGraphic:n},r=i.getOpacity();r!==null&&(s.graphicOpacity=r);const l=i.getSize();if(l!==null){let h=i.getScale();Array.isArray(h)&&(h=(h[0]+h[1])/2),isNaN(h)&&(h=1);const g=l[0]*h,b=l[1]*h;s.graphicWidth=b,this.addGraphicOffset_(s,i,g,b)}let c=i.getRotation();return isNaN(c)&&(c=0),s.rotation=sm(c),s.labelAlign&&(s.labelAlign="lm"),s.externalGraphic&&(s.graphicFormat="image/png",s.externalGraphic.indexOf("scale=")>0?delete s.graphicWidth:s.externalGraphic.indexOf("getarrow")>0&&(s.graphicWidth=10)),s}}const W8=127;class L2e extends Ope{async encodeLayerState(e,t,i){let n;const s=e.layer;if(s instanceof d3)n=this.encodeXYZLayer_(s.getXYZ());else if(s instanceof El){n=new M2e(e,i).encodeVectorLayer(t);const r=e.layer.get("renderAsSvg");r!==void 0&&(n.renderAsSvg=r)}else n=await super.encodeLayerState(e,t,i);return Array.isArray(n)?n=n.map(r=>this.legacyMFPAppendCustomParams(s,r)):n&&(n=this.legacyMFPAppendCustomParams(s,n)),n}legacyMFPAppendCustomParams(e,t){return t?{...t,...e instanceof El?{}:{customParams:{TRANSPARENT:!0,MAP_RESOLUTION:W8}}}:null}encodeXYZLayer_(e){const t=e.indexOf("/{z}/{x}/{y}"),i=e.lastIndexOf(".");if(t===-1||i===-1)return;const n=e.substring(0,t),s=e.substring(i+1),r=n.substring(n.lastIndexOf("/styles/")+8);return r==="topomap"||r==="roadmap"||r==="topomap_gray"?{baseURL:"https://wms.geoportail.lu/vectortiles_wms_4_print/service",imageFormat:"image/"+s,layers:[r],customParams:{TRANSPARENT:!0,MAP_RESOLUTION:W8},type:"wms",opacity:1,version:"1.1.1",useNativeAngle:!0}:{baseURL:n,type:"OSM",imageExtension:s}}}const Ty="https://migration.geoportail.lu",R2e="https://migration.geoportail.lu/legends/get_html",k2e="https://migration.geoportail.lu/short/create",G8="https://migration.geoportail.lu/printproxy",W2e="https://migration.geoportail.lu/qr",G2e=[1500,2500,5e3,1e4,15e3,2e4,25e3,5e4,8e4,1e5,125e3,2e5,25e4,4e5],UA=[[715,395],[470,650],[1065,640],[715,975],[1558,985],[1064,1475],[2255,1482],[1558,2175],[3241,2173],[2254,3155]],XA=["A4 landscape","A4 portrait","A3 landscape","A3 portrait","A2 landscape","A2 portrait","A1 landscape","A1 portrait","A0 landscape","A0 portrait"],O8=127,O2e=(a,e,t)=>Math.round(e/k4/R4*a/t);class P2e{getScales(){var t,i;const e=(t=ps().theme)==null?void 0:t.metadata;return((i=e==null?void 0:e.print_scales)==null?void 0:i.map(n=>+n).sort((n,s)=>n-s))||G2e}getLayouts(){return XA}async print(e,t){const i=`${G8}/report.${t.toLocaleLowerCase()||"pdf"}`,s=await(await fetch(i,{method:"POST",body:JSON.stringify(e)})).json(),r=Ty+s.statusURL.replace(/print/,"printproxy");return{downloadURL:Ty+s.downloadURL.replace(/print/,"printproxy"),ref:s.ref,statusURL:r}}cancel(e){return fetch(`${G8}/cancel/${e}`,{method:"DELETE"})}async getJobStatus(e){const t=await(await fetch(e)).json();return t.downloadURL&&(t.downloadURL=Ty+t.downloadURL.replace(/print/,"printproxy")),t}async getSpec(e,t){const i=new L2e(Ty),n=new mpe,s=await this.getShortLink(),r=await i.encodeMap({map:t,scale:e.scale,printResolution:t.getView().getResolution(),dpi:O8,customizer:n});r.layers=r.layers.filter(g=>g!==null);const l=await this.getLegends(t.getLayers().getArray(),e.lang),c=[];return VB(t.getLayerGroup(),c,e.framestate),{attributes:{map:r,disclaimer:e.disclaimer,scaleTitle:e.scaleTitle,appTitle:e.appTitle,scale:e.scale,name:e.title,url:s,qrimage:`${W2e}?url=${s}`,lang:e.lang,legend:e.legend?l:null,scalebar:{geodetic:!0},dataOwner:[...new Set(c)].join(" "),dateText:e.dateText,queryResults:e.queryResults},format:e.format.toLowerCase(),layout:e.layout}}getLayersForPrint(e){return e.getLayers().getArray().filter(i=>i.get(Fx)!==RP)}getSize(e){return UA[XA.indexOf(e)]}getNearestScale(e,t,i){const n=this.getScales(),s=UA[XA.indexOf(t)][0]||UA[0][0];return n.reverse().find(r=>O2e(r,s,i)<e)||n[0]}async getShortLink(){const t={url:Ty+cO.getRelativeUrl()};return(await(await mf(k2e,t,"POST")).json()).short_url}async getLegends(e,t){const i=[];let n=O8;const s=R2e;return e.reverse().forEach(r=>{const l=r.get("metadata"),c=l==null?void 0:l.max_dpi;if(c!==void 0){const g=parseInt(c,10);n>g&&(n=g)}const h=l==null?void 0:l.legend_name;if(h!==void 0)i.push({name:h});else{const g=r.get("queryable_id");if(l!=null&&l.isExternalWms){const b=l==null?void 0:l.legendUrl,v=l==null?void 0:l.legendAccessConstraints,C=l==null?void 0:l.legendTitle;b!==void 0&&i.push({name:null,legendUrl:b,accessConstraints:v,legendTitle:C})}else if(g!==void 0){const b=new URLSearchParams({lang:t,id:g,dpi:n.toString(),legend_title:r.get("label")});i.push({name:r.get("label"),restUrl:s+"?"+b.toString(),legendTitle:r.get("label")})}}}),i}}function VB(a,e,t){var i,n;if(a instanceof rf)a.getLayers().forEach(s=>VB(s,e,t));else{const s=(i=a.getSource())==null?void 0:i.getAttributions(),r=(n=a.get("metadata"))==null?void 0:n.attribution,l=[];s&&l.push(...s(t)),r&&l.push(r),e.push(...l)}}const bh=new P2e,B2e=1e3;function F2e(a){return typeof a=="number"&&a>=400&&a<=500||a==="error"}function N2e(){const a=Qe(null),e=Qe(null),t=Qe(!1),i=Qe(!1);let n=null;const s=async c=>{try{const{status:h,done:g,downloadURL:b}=await bh.getJobStatus(c);a.value=h,F2e(h)&&(t.value=!0,l()),h==="finished"&&g&&b&&(e.value=b,l())}catch{l()}},r=(c,h=B2e)=>{t.value=!1,l(),i.value=!0,n=window.setInterval(()=>s(c),h)},l=()=>{n!==null&&(clearInterval(n),n=null),a.value=null,i.value=!1,t.value=!1};return Ds(()=>l()),{jobStatus:a,url:e,startPolling:r,clearPolling:l,error:t,loading:i}}function D2e(){const{t:a}=ya(),{featureInfoPrintableRef:e,locationInfoPrintableRef:t}=Zt(C5()),{locationInfoCoords:i}=Zt(pd()),{startPolling:n,clearPolling:s,url:r,error:l,loading:c}=N2e(),h=zi().getOlMap(),g=Qe(null);async function b(G){const O=v(),V={disclaimer:a(`www.geoportail.lu est un portail d'accès aux informations géolocalisées, données et services qui sont mis à disposition par les administrations publiques luxembourgeoises. Responsabilité: Malgré la grande attention qu’elles portent à la justesse des informations diffusées sur ce site, les autorités ne peuvent endosser aucune responsabilité quant à la fidélité, à l’exactitude, à l’actualité, à la fiabilité et à l’intégralité de ces informations. Information dépourvue de foi publique. 
Droits d'auteur: Administration du Cadastre et de la Topographie. http://g-o.lu/copyright`),scaleTitle:a("Echelle approximative 1:"),appTitle:a("Le géoportail national du Grand-Duché du Luxembourg",{ns:"app"}),dateText:a("Date d'impression:"),queryResults:O,...G},B=await bh.getSpec(V,h);try{const z=await bh.print(B,G.format);g.value=z.ref,n(z.statusURL)}catch{g.value=null,l.value=!0,s()}}function v(){const G=S(),O=L();return`${G??""}${O??""}`||void 0}async function C(){g.value&&(await bh.cancel(g.value),g.value=null,s())}function S(){if(!(!i.value||!t.value))return R(t.value)}function L(){if(!(i.value||!e.value))return R(e.value)}function R(G){const O=G.cloneNode(!0);return O.querySelectorAll("[data-cy], [v-]").forEach(z=>{z.removeAttribute("data-cy"),z.removeAttribute("v-")}),O.querySelectorAll(".no-print").forEach(z=>z.remove()),O.innerHTML}return{print:b,abortPrint:C,url:r,error:l,loading:c}}var Z4=(a=>(a.PDF="PDF",a.PNG="PNG",a))(Z4||{});const V2e={"data-cy":"toolbarPrint"},Z2e={class:"absolute bottom-full top-auto z-20 flex flex-col divide-gray-400 divide-solid box-content border-y border-x border-gray-400 bg-primary md:w-64 p-3 gap-3"},z2e={class:"md:w-full"},U2e=["placeholder"],X2e={class:"flex gap-1 items-center"},H2e=["id"],Y2e=["for"],K2e={class:"flex gap-1 items-center secondary-button"},q2e={class:"md:w-1/2"},j2e={class:"md:w-1/2"},J2e={class:"flex gap-1 justify-end items-center"},Q2e={key:0,"data-cy":"printLoading",class:"mr-4 flex gap-2 items-center"},$2e=["disabled"],exe=["disabled"],txe=2e3,axe=bt({__name:"toolbar-print",setup(a){const{addNotification:e}=oc(),{t}=ya(),{lang:i}=yi(),{print:n,abortPrint:s,url:r,error:l,loading:c}=D2e(),h=Vw();let g=null;const b=zi().getOlMap(),v=new Ppe({id:"mask",opacity:0});v.setZIndex(txe);const C=Qe(""),S=Qe(!1),L=Ft(()=>!S.value),R=Qe(""),G=Ft(()=>bh.getLayouts().map(ne=>({label:t(ne),value:ne,ariaLabel:t("Change layout:",{ns:"app"})}))),O=ne=>{R.value=ne,V.value=ne,v.setSize(bh.getSize(ne)),b.render()},V=Qe(""),B=Qe(""),z=Ft(()=>bh.getScales().map(ne=>({label:`1 : ${ne.toLocaleString()}`,value:ne.toString(),ariaLabel:t("Change scale:",{ns:"app"})}))),j=ne=>{B.value=ne,v.setScale(parseInt(ne,10)),b.render()};function re(ne){n({format:ne,layout:R.value,scale:parseInt(B.value,10),resolution:b.getView().getResolution(),title:C.value,legend:S.value,lang:i,framestate:g})}return Kt(l,ne=>{ne&&e(t("An error occurred while printing"),su.ERROR)}),Kt(r,ne=>ne&&window.open(ne,"_blank")),tr(()=>{b.addLayer(v),v.setOpacity(.5),b.on("rendercomplete",ne=>{g=ne.frameState||null}),O(G.value[0].value),j(bh.getNearestScale(b.getSize()[0],R.value,b.getView().getResolution()).toString())}),Ds(()=>{b.removeLayer(v),v.setOpacity(0)}),(ne,te)=>(se(),Ie("div",V2e,[q("div",Z2e,[q("div",z2e,[Mi(q("input",{class:"cursor-pointer w-full p-2 lux-input",type:"text","onUpdate:modelValue":te[0]||(te[0]=le=>C.value=le),placeholder:X(t)("Title",{ns:"client"}),"data-cy":"printTitle"},null,8,U2e),[[ac,C.value]])]),q("div",X2e,[Mi(q("input",{id:X(h),class:"hover:cursor-pointer",type:"checkbox","onUpdate:modelValue":te[1]||(te[1]=le=>S.value=le),"data-cy":"printWithLegend"},null,8,H2e),[[kZ,S.value]]),q("label",{class:"font-bold block lux-text-default hover:cursor-pointer",for:X(h)},Fe(X(t)("Avec légende")),9,Y2e)]),q("div",K2e,[q("div",q2e,[dt(dx,{"data-cy":"printLayouts",class:"w-full",options:G.value,modelValue:R.value,"onUpdate:modelValue":te[2]||(te[2]=le=>R.value=le),onChange:O,direction:"up"},null,8,["options","modelValue"])]),q("div",j2e,[dt(dx,{"data-cy":"printScales",class:"w-full",options:z.value,modelValue:B.value,"onUpdate:modelValue":te[3]||(te[3]=le=>B.value=le),onChange:j,direction:"up"},null,8,["options","modelValue"])])]),q("div",J2e,[X(c)?(se(),Ie("div",Q2e,[te[7]||(te[7]=q("span",{class:"text-black fa-solid fa-arrows-rotate animate-spin","aria-hidden":"true"},null,-1)),q("button",{class:"btn btn-link opacity-75 text-white hover:underline hover:opacity-100",onClick:te[4]||(te[4]=le=>X(s)())},Fe(X(t)("Abort")),1)])):je("",!0),q("button",{"data-cy":"printPng",class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:te[5]||(te[5]=le=>re(X(Z4).PNG)),disabled:X(c)||!L.value},Fe(X(t)("PNG")),9,$2e),q("button",{"data-cy":"printPdf",class:"bg-white disabled:opacity-75 disabled:cursor-not-allowed text-primary hover:bg-primary hover:text-white border border-slate-300 py-1.5 px-2.5",onClick:te[6]||(te[6]=le=>re(X(Z4).PDF)),disabled:X(c)},Fe(X(t)("PDF")),9,exe)])])]))}});const ixe=x3(axe,[["__scopeId","data-v-9820d18c"]]),nxe={class:"flex flex-col w-12 justify-between bg-white z-5 shrink-0 sm:flex-row sm:w-full sm:h-14 sm:shadow-footer"},rxe={class:"flex flex-col w-full sm:w-80 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},sxe={"data-cy":"layersOpenClose"},oxe={"data-cy":"mymapsOpenClose"},lxe={"data-cy":"infoOpenClose"},uxe={"data-cy":"legendsOpenClose"},cxe={class:"relative flex flex-col w-12 sm:w-64 sm:flex-row justify-start text-primary divide-y sm:divide-y-0 sm:divide-x divide-gray-400 divide-solid box-content border-y sm:border-y-0 border-x border-gray-400"},dxe={class:"w-[466px] hidden sm:flex flex-row justify-end text-gray-500 whitespace-nowrap"},hxe=bt({__name:"footer-bar",setup(a){const{t:e,i18next:t}=ya(),i=yi(),n=ro(),{setLayersOpen:s,togglePrintToolbarOpen:r,toggleDrawToolbarOpen:l,toggleMyMapsOpen:c,toggleLegendsOpen:h,toggleInfoOpen:g}=i,{layersOpen:b,legendsOpen:v,drawToolbarOpen:C,measureToolbarOpen:S,styleEditorOpen:L,myMapsOpen:R,infoOpen:G,themeGridOpen:O,printToolbarOpen:V}=Zt(i),{setEditActiveState:B}=n;function z(){const le=!b.value;s(le),le&&(L.value=!1,R.value=!1,G.value=!1),O.value=!1}Kt(C,le=>{le?(S.value=!1,V.value=!1):B(void 0)}),Kt(S,le=>{le&&(C.value=!1,V.value=!1)}),Kt(V,le=>{le&&(C.value=!1,S.value=!1)});const j=pm(),{displayStarOnMobile:re}=Zt(j),{setDisplayStarOnMobile:ne}=j;function te(){g(),ne(!1)}return(le,ue)=>(se(),Ie("footer",nxe,[q("ul",rxe,[q("li",sxe,[dt(Dc,{label:X(e)("layers",{ns:"client"}),icon:"layers",active:X(b),onClick:z},null,8,["label","active"])]),q("li",oxe,[dt(Dc,{label:X(e)("my_maps",{ns:"client"}),icon:"mymaps",active:X(R),onClick:ue[0]||(ue[0]=()=>X(c)())},null,8,["label","active"])]),q("li",lxe,[dt(Dc,{label:`${X(e)("Infos",{ns:"client"})}${X(re)?"(*)":""}`,icon:"infos",active:X(G),onClick:te},null,8,["label","active"])]),q("li",uxe,[dt(Dc,{label:X(e)("Legends",{ns:"client"}),icon:"legends",active:X(v),onClick:ue[1]||(ue[1]=()=>X(h)())},null,8,["label","active"])]),q("li",null,[dt(Dc,{class:"text-gray-300",label:X(e)("Routing",{ns:"client"}),icon:"routing"},null,8,["label"])])]),q("div",cxe,[X(C)?(se(),xa(Dre,{key:0})):je("",!0),X(V)?(se(),xa(ixe,{key:1})):je("",!0),dt(Dc,{label:X(e)("Dessin",{ns:"client"}),icon:"draw",active:X(C),onClick:ue[2]||(ue[2]=()=>X(l)()),"data-cy":"drawButton"},null,8,["label","active"]),X(S)?(se(),xa(_pe,{key:2})):je("",!0),dt(Dc,{label:X(e)("Mesurer",{ns:"client"}),active:X(S),icon:"measure",onClick:ue[3]||(ue[3]=()=>S.value=!X(S))},null,8,["label","active"]),dt(Dc,{class:"hidden sm:block",label:X(e)("Imprimer",{ns:"client"}),active:X(V),onClick:ue[4]||(ue[4]=()=>X(r)()),icon:"print","data-cy":"printButton"},null,8,["label","active"]),dt(Dc,{class:"text-gray-300",label:X(e)("Partager",{ns:"client"}),icon:"share"},null,8,["label"])]),q("div",dxe,[dt(qd,{class:"hidden lg:flex text-gray-500",label:X(e)("What's new",{ns:"client"}),link:`https://geoportail.lu/${X(t).language}/questions/whats-new/`},null,8,["label","link"]),dt(qd,{class:"hidden lg:flex text-gray-500",label:X(e)("Geocatalogue",{ns:"client"}),link:""},null,8,["label"]),dt(qd,{class:"hidden lg:flex text-gray-500",label:X(e)("Feedback",{ns:"client"}),link:""},null,8,["label"]),dt(qd,{class:"hidden lg:flex text-gray-500",label:X(e)("A Propos",{ns:"client"}),link:`https://www.geoportail.lu/${X(t).language}/propos/`},null,8,["label","link"]),dt(qd,{class:"hidden lg:flex text-gray-500",label:X(e)("Aide",{ns:"client"}),link:`https://www.geoportail.lu/${X(t).language}/documentation/`},null,8,["label","link"]),dt(qd,{class:"hidden lg:flex text-gray-500",label:X(e)("Contact",{ns:"client"}),link:`https://www.geoportail.lu/${X(t).language}/propos/contactez-nous/`},null,8,["label","link"]),dt(qd,{class:"text-gray-500",label:X(e)("Legalites",{ns:"client"}),link:`https://www.geoportail.lu/${X(t).language}/propos/mentions-legales/`},null,8,["label","link"]),dt(qd,{class:"text-gray-500",label:X(e)("ACT",{ns:"client"}),link:"http://www.act.public.lu/"},null,8,["label"])])]))}}),_xe={class:"lux-menu-popup"},mxe=["aria-label","aria-labelledby"],ZB=bt({__name:"menu-popup",props:{items:{},direction:{},ariaLabel:{},ariaLabelledby:{}},setup(a){const e=a,t=Wi(!1),i=Qe(null),n=Qe(null);function s(c){c.stopPropagation(),r()}function r(c){t.value=c??!t.value}function l(){r(!1)}return tr(()=>document.addEventListener("click",l)),Ds(()=>document.removeEventListener("click",l)),Kt(t,c=>{if(!c)return;const h=i.value,g=n.value,b=h.getBoundingClientRect(),v=e.direction==="down"?b.bottom:b.top-g.offsetHeight;g.style.top=`${v}px`,g.style.left=`${b.left+b.width-g.offsetWidth}px`}),(c,h)=>(se(),Ie("div",_xe,[q("button",{onClick:s,ref_key:"btnElement",ref:i},[qa(c.$slots,"default")],512),(se(),xa(mw,{to:"body"},[q("ul",{"aria-label":c.ariaLabel,"aria-labelledby":c.ariaLabelledby,class:ti(["lux-menu-popup-list",t.value?"":"invisible"]),ref_key:"ddElement",ref:n,role:"menu"},[(se(!0),Ie(ua,null,Gn(e.items,g=>(se(),Ie("li",{key:g.label},[qa(c.$slots,"item",{item:g},()=>[wr(Fe(g.label),1)])]))),128))],10,mxe)]))]))}}),zB=bt({__name:"menu-popup-item",props:{item:{}},emits:["click"],setup(a,{emit:e}){const t=a,i=e;function n(){i("click",t.item)}return(s,r)=>(se(),Ie("button",{class:"lux-dropdown-list-item",onClick:n},[qa(s.$slots,"default",{},()=>[wr(Fe(s.item.label),1)])]))}}),gxe=bt({__name:"feature-menu-popup",emits:["newConcentricCircle"],setup(a,{emit:e}){const{t}=ya(),i=ys("feature"),n=e;function s(l){v5.export(i.map,l,[i],i.label,!0)}let r=[{label:"Exporter un GPX",action:()=>s("gpx")},{label:"Exporter un KML",action:()=>s("kml")},{label:"Exporter un Shapefile",action:()=>s("shapefile")}];return(i==null?void 0:i.featureType)==="drawnLine"&&(r=[...r,{label:"Continuer la ligne",action:()=>alert("TODO: Continuer la ligne (!!!ne pas oublier de unset profileData)")},{label:"Changer sens de la ligne",action:()=>GP(i)}]),(i==null?void 0:i.featureType)==="drawnCircle"&&(r=[...r,{label:"Créer cercle concentrique",action:()=>n("newConcentricCircle")}]),(l,c)=>(se(),xa(ZB,{"data-cy":"featMenuPopup",items:X(r),direction:"up",ariaLabel:X(t)("Drawings menu")},{item:Ha(({item:h})=>[dt(zB,{"data-cy":"featMenuPopupItem",item:h,onClick:()=>h.action&&h.action()},{default:Ha(()=>[wr(Fe(X(t)(h.label)),1)]),_:2},1032,["item","onClick"])]),default:Ha(()=>[c[0]||(c[0]=q("i",{class:"fa-solid fa-square-caret-down hover:text-tertiary"},null,-1))]),_:1},8,["items","ariaLabel"]))}}),P8=bt({__name:"feature-confirm-delete",setup(a){const{t:e}=ya();return(t,i)=>(se(),Ie(ua,null,[wr(Fe(X(e)("Êtes-vous certain de vouloir effacer cet élément de la carte ?"))+" ",1),qa(t.$slots,"footer")],64))}}),B8=bt({__name:"feature-edit-info",setup(a){const{t:e}=ya(),t=ys("feature");return(i,n)=>(se(),Ie(ua,null,[wr(Fe(X(e)("Modification des informations"))+" ",1),X(t)?Mi((se(),Ie("input",{key:0,"data-cy":"featureLabelEdit",type:"text",class:"form-control block mt-2 mb-4","onUpdate:modelValue":n[0]||(n[0]=s=>X(t).label=s)},null,512)),[[ac,X(t).label]]):je("",!0),X(t)?Mi((se(),Ie("textarea",{key:1,rows:"3",class:"form-control block w-full","onUpdate:modelValue":n[1]||(n[1]=s=>X(t).description=s)},null,512)),[[ac,X(t).description]]):je("",!0),qa(i.$slots,"footer")],64))}}),pxe={class:"flex"},fxe=["min","max","name","step"],yxe=["min","max","name","step"],qv=bt({__name:"range-input",props:{min:{default:0},max:{default:10},step:{default:1},value:{default:0},name:{default:"range"}},emits:["change"],setup(a){const t=Qe(a.value);return(i,n)=>(se(),Ie("div",pxe,[Mi(q("input",{type:"range",class:"m-2.5 w-16 h-[5px] rounded-lg appearance-none cursor-pointer",min:i.min,max:i.max,name:`range-${i.name}`,step:i.step,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value=s),onInput:n[1]||(n[1]=s=>i.$emit("change",t.value))},null,40,fxe),[[ac,t.value,void 0,{number:!0}]]),Mi(q("input",{type:"number",class:"w-12",min:i.min,max:i.max,name:i.name,step:i.step,"onUpdate:modelValue":n[2]||(n[2]=s=>t.value=s),onChange:n[3]||(n[3]=s=>i.$emit("change",t.value))},null,40,yxe),[[ac,t.value]])]))}}),bxe=bt({__name:"feature-edit-style-circle",props:{feature:{}},setup(a){return(e,t)=>(se(),Ie(ua,null,[qa(e.$slots,"title"),qa(e.$slots,"color"),qa(e.$slots,"lineWidth"),qa(e.$slots,"transparency"),qa(e.$slots,"footer")],64))}}),vxe=bt({__name:"feature-edit-style-point",props:{feature:{}},setup(a){const e=Qe(!1);function t(){e.value=!1}return(i,n)=>e.value?qa(i.$slots,"symbolIcon",{key:1,closeEditIcon:t},()=>[qa(i.$slots,"symbolcolor")]):(se(),Ie(ua,{key:0},[qa(i.$slots,"title"),qa(i.$slots,"color"),qa(i.$slots,"styleSymbol",{openEditIcon:()=>e.value=!0}),qa(i.$slots,"size",{maxsize:900}),qa(i.$slots,"angle"),qa(i.$slots,"footer")],64))}}),xxe=bt({__name:"feature-edit-style-line",props:{feature:{}},setup(a){return(e,t)=>(se(),Ie(ua,null,[qa(e.$slots,"title"),qa(e.$slots,"color"),qa(e.$slots,"lineWidth"),qa(e.$slots,"style"),qa(e.$slots,"orientation"),qa(e.$slots,"footer")],64))}}),wxe=bt({__name:"feature-edit-style-polygon",props:{feature:{}},setup(a){return(e,t)=>(se(),Ie(ua,null,[qa(e.$slots,"title"),qa(e.$slots,"color"),qa(e.$slots,"lineWidth"),qa(e.$slots,"transparency"),qa(e.$slots,"footer")],64))}}),Ixe=bt({__name:"feature-edit-style-label",props:{feature:{}},setup(a){return(e,t)=>(se(),Ie(ua,null,[qa(e.$slots,"title"),qa(e.$slots,"color"),qa(e.$slots,"size",{maxsize:40}),qa(e.$slots,"angle"),qa(e.$slots,"footer")],64))}}),Cxe=bt({__name:"feature-edit-linestyle-item",props:{linestyle:{}},emits:["changeLinestyle"],setup(a,{emit:e}){const{t}=ya(),i=e,n=ys("feature");function s(r){i("changeLinestyle",r)}return(r,l)=>(se(),Ie("button",{class:ti(`lux-btn-grey${X(n).featureStyle.linestyle===r.linestyle?" pressed":""}`),onClick:l[0]||(l[0]=c=>s(r.linestyle))},Fe(X(t)(X(ure)(r.linestyle))),3))}}),Axe=["cx","cy","r","fill"],UB=bt({__name:"circleSymbol",props:{radius:{default:9},fillColor:{default:"red"}},setup(a){const t=a.radius*2;return(i,n)=>(se(),Ie("svg",{height:t,width:t},[q("circle",{cx:i.radius,cy:i.radius,r:i.radius,fill:i.fillColor},null,8,Axe)]))}}),Sxe=["height","width"],Txe=["fill"],XB=bt({__name:"squareSymbol",props:{fillColor:{default:"red"},height:{default:18},width:{default:18}},setup(a){return(e,t)=>(se(),Ie("svg",{height:e.height,width:e.width},[q("rect",{height:"100%",width:"100%",fill:e.fillColor},null,8,Txe)],8,Sxe))}}),Exe=["height","width"],Mxe=["y","font-size","fill"],HB=bt({__name:"crossSymbol",props:{fillColor:{default:"red"},fontSize:{default:42},height:{default:18},width:{default:18}},setup(a){return(e,t)=>(se(),Ie("svg",{height:e.height,width:e.width},[q("text",{x:"1",y:e.height+2,"font-size":e.fontSize,fill:e.fillColor},"+",8,Mxe)],8,Exe))}}),Lxe=["height","width"],Rxe=["fill"],YB=bt({__name:"triangleSymbol",props:{fillColor:{default:"red"},size:{default:18}},setup(a){const e=a,t=e.size/2,i=`0,${e.size} ${t},0 ${e.size},${e.size}`;return(n,s)=>(se(),Ie("svg",{height:n.size,width:n.size},[q("polygon",{points:i,fill:n.fillColor},null,8,Rxe)],8,Lxe))}}),kxe={class:"flex gap-2 items-center mt-1 mb-2"},Wxe={class:"font-bold block"},Gxe=["src"],Oxe=bt({__name:"feature-edit-style-symbol",emits:["clickSymbolIcon"],setup(a){const e="https://migration.geoportail.lu/mymaps/symbol",{t}=ya(),i=ys("feature"),n={circle:UB,square:XB,cross:HB,triangle:YB};return(s,r)=>(se(),Ie("div",kxe,[q("label",Wxe,Fe(X(t)("Symbol")),1),X(i).featureStyle.symbolId?(se(),Ie("button",{key:0,class:"lux-btn items-center",onClick:r[0]||(r[0]=l=>s.$emit("clickSymbolIcon")),"data-cy":"featStyleSymbolEdit"},[q("img",{class:"symbol-style max-h-10",src:`${X(e)}/${X(i).featureStyle.symbolId}`},null,8,Gxe)])):(se(),Ie("button",{key:1,class:"lux-btn items-center flex gap-2",onClick:r[1]||(r[1]=l=>s.$emit("clickSymbolIcon")),"data-cy":"featStyleSymbolEdit"},[wr(Fe(X(t)("Symbole"))+" ",1),X(i).featureStyle.shape?(se(),xa(c1(n[X(i).featureStyle.shape]),{key:0,fillColor:X(i).featureStyle.color},null,8,["fillColor"])):je("",!0)]))]))}}),KB="https://migration.geoportail.lu/mymaps/symbols",Pxe="https://migration.geoportail.lu/mymaps",Bxe="http://migration.geoportail.lu/mymaps/upload_symbol";let O_,P_;async function Fxe(a=!1){return(!(O_!=null&&O_.results)||a)&&(O_=await(await mf(KB,{symboltype:"public"},"GET")).json()),O_==null?void 0:O_.results}async function Nxe(a=!1){return(!(P_!=null&&P_.results)||a)&&(P_=await(await mf(KB,{symboltype:"us"},"GET")).json()),P_==null?void 0:P_.results}async function Dxe(a){const e=new FormData;return e.append("file",a),await mf(Bxe,e,"POST")}const Vxe=["placeholder"],Zxe=["id","title","onClick"],zxe={class:"w-12"},Uxe=["src"],Xxe={class:"break-all"},Hxe=bt({__name:"feature-edit-symbol-list",props:{symbols:{}},emits:["change"],setup(a,{emit:e}){const t=a,i=e,{t:n}=ya(),s=Qe(""),r=Ft(()=>s.value?t.symbols.filter(c=>c.name.includes(s.value)):t.symbols);function l(c){i("change",c)}return(c,h)=>(se(),Ie("div",null,[Mi(q("input",{"data-cy":"featStyleSymbolFilterList",class:"text-white w-full placeholder-white border-[1px] border-gray-300 mb-2",type:"text",placeholder:X(n)("Rechercher un symbole"),"onUpdate:modelValue":h[0]||(h[0]=g=>s.value=g)},null,8,Vxe),[[ac,s.value,void 0,{trim:!0}]]),wr(" "+Fe(X(n)("Symbole"))+" ",1),q("ul",null,[(se(!0),Ie(ua,null,Gn(r.value,g=>(se(),Ie("li",{key:g.id,class:"border-b-[1px] border-b-gray-300"},[q("button",{id:g.id.toString(),class:"leading-5 p-1 items-center flex hover:bg-slate-100 w-full text-left",title:g.name,onClick:()=>l(g.id),"data-cy":"featStyleSymbolIcon"},[q("span",zxe,[q("img",{class:"max-h-10",src:`${X(Pxe)}${g.url}`},null,8,Uxe)]),q("span",Xxe,Fe(g.name),1)],8,Zxe)]))),128))])]))}}),Yxe={class:"border-b-gray-300 border-b-[1px] mb-2"},Kxe=["data-cy","onClick"],qxe={class:"flex gap-1 my-2"},jxe=["onClick","data-cy"],Jxe={class:"text-right mt-3"};var qB=(a=>(a.configurables="Configurables",a.mySymbols="Mes symboles",a.publics="Publics",a))(qB||{});const Qxe=bt({__name:"feature-edit-symbol-icon",emits:["close","changeSymbolIcon","changeSymbolShape"],setup(a,{emit:e}){const t=e,{t:i}=ya(),{addNotification:n}=oc(),s=w1(),r=ys("feature"),l={circle:UB,square:XB,cross:HB,triangle:YB},c=Qe("Configurables"),h=Qe(void 0),g=Qe([]);Kt(c,async S=>{if(S==="Mes symboles"||S==="Publics")try{g.value=await b(S==="Mes symboles")}catch{g.value=[]}}),tr(()=>{r.featureStyle.symbolId&&(c.value=r.featureStyle.symboltype==="us"?"Mes symboles":"Publics")});async function b(S=!1,L=!1){const R=S?await Nxe(L):await Fxe(L);return R.sort((G,O)=>G.name.localeCompare(O.name)),R}async function v(){var S;if((S=h.value)!=null&&S.files&&h.value.files[0]){const L=h.value.files[0];try{await Dxe(L),g.value=await b(!0,!0)}catch{n(i("Error while trying to upload new symbol."),su.ERROR)}}}function C(S){t("changeSymbolShape",S)}return(S,L)=>(se(),Ie(ua,null,[wr(Fe(X(i)("Veuillez choisir un symbole dans une des catégories"))+" ",1),q("div",Yxe,[(se(),Ie(ua,null,Gn(qB,(R,G)=>(se(),Ie(ua,{key:G},[G==="mySymbols"&&!X(s).isAuthenticated()?je("",!0):(se(),Ie("button",{key:0,"data-cy":`featStyleSymbolTab${G==="mySymbols"?"_private":""}`,onClick:()=>c.value=R,class:ti(["lux-tab",{active:c.value===R}])},Fe(X(i)(R)),11,Kxe))],64))),64))]),c.value==="Configurables"?(se(),Ie(ua,{key:0},[q("div",qxe,[(se(!0),Ie(ua,null,Gn(Object.keys(l),R=>(se(),Ie("button",{key:R,class:"lux-btn p-2 rounded-sm border-gray-600",onClick:G=>C(R),"data-cy":`featStyleSymbol_${R}`},[(se(),xa(c1(l[R]),{fillColor:X(r).featureStyle.color},null,8,["fillColor"]))],8,jxe))),128))]),qa(S.$slots,"symbolcolor")],64)):je("",!0),c.value==="Publics"||c.value==="Mes symboles"?(se(),xa(Hxe,{key:1,symbols:g.value,class:"max-h-80 overflow-y-auto",onChange:L[0]||(L[0]=R=>S.$emit("changeSymbolIcon",`${R}`,c.value==="Mes symboles"?"us":"public"))},null,8,["symbols"])):je("",!0),q("div",Jxe,[c.value==="Mes symboles"?(se(),Ie(ua,{key:0},[q("input",{accept:"image/*",ref_key:"fileInput",ref:h,type:"file",id:"file",hidden:"",onChange:v},null,544),q("button",{class:"lux-btn mr-2",onClick:L[1]||(L[1]=()=>{var R;return(R=h.value)==null?void 0:R.click()})},Fe(X(i)("Importer un symbole")),1)],64)):je("",!0),q("button",{class:"lux-btn",onClick:L[2]||(L[2]=()=>S.$emit("close")),"data-cy":"featClosePopup"},Fe(X(i)("Fermer")),1)])],64))}}),$xe={class:"flex gap-1 items-center"},ewe={class:"font-bold block",for:"color"},twe={class:"md:w-2/3"},awe=["value"],iwe={class:"flex gap-1 items-center mt-1"},nwe={class:"font-bold block",for:"size"},rwe={key:0,class:"flex gap-1 items-center mt-1 mb-2"},swe={class:"font-bold block",for:"angle"},owe={class:"flex gap-1 items-center mt-1 mb-2","data-cy":"featStyleLineStyle"},lwe={class:"font-bold block"},uwe={class:"flex gap-1"},cwe={class:"flex gap-1 items-center"},dwe={class:"font-bold block",for:"color"},hwe={class:"md:w-2/3"},_we=["value"],mwe={class:"flex gap-1 items-center mt-1"},gwe={class:"font-bold block",for:"stroke"},pwe={class:"flex gap-1 items-center mt-1"},fwe={class:"font-bold block",for:"transparency"},ywe={class:"flex gap-2 items-center mt-1 mb-2"},bwe={class:"font-bold block",for:"showOrientation"},vwe=["checked"],xwe={class:"flex gap-1 items-center mt-1 mb-2"},F8=bt({__name:"feature-edit-style",setup(a){const{t:e}=ya(),t=ys("feature"),i=Ft(()=>!(t.featureType==="drawnPoint"&&t.featureStyle.shape==="circle")),n={FeatureEditStyleCircle:bxe,FeatureEditStyleLine:xxe,FeatureEditStylePoint:vxe,FeatureEditStylePolygon:wxe,FeatureEditStyleLabel:Ixe},s=["plain","dashed","dotted"],r=Ft(()=>t==null?void 0:t.featureType.replace("drawn","FeatureEditStyle"));function l(G){t.featureStyle={...t.featureStyle,color:G.target.value}}function c(G){t.featureStyle={...t.featureStyle,size:G}}function h(G){t.featureStyle={...t.featureStyle,angle:G*Math.PI/180}}function g(G){t.featureStyle={...t.featureStyle,stroke:G}}function b(G){t.featureStyle={...t.featureStyle,opacity:(100-G)/100}}function v(G){t.featureStyle={...t.featureStyle,showOrientation:G.target.checked}}function C(){GP(t)}function S(G){t.featureStyle={...t.featureStyle,linestyle:G}}function L(G,O){t.featureStyle={...t.featureStyle,shape:G,symbolId:void 0,symboltype:void 0},O&&O()}function R(G,O,V){t.featureStyle={...t.featureStyle,symbolId:G,symboltype:O,size:100,shape:void 0},V&&V()}return(G,O)=>(se(),xa(c1(n[r.value]),{feature:X(t)},{title:Ha(()=>[wr(Fe(X(e)("Style your drawing")),1)]),color:Ha(()=>[q("div",$xe,[q("label",ewe,Fe(X(e)("Color")),1),q("div",twe,[q("input",{name:"color",class:"cursor-pointer",type:"color",value:X(t).featureStyle.color,onInput:l,"data-cy":"featStyleColor"},null,40,awe)])])]),size:Ha(V=>[q("div",iwe,[q("label",nwe,Fe(X(e)("Size")),1),dt(qv,{name:"size",class:"md:w-2/3",max:V.maxsize,value:X(t).featureStyle.size,"data-cy":"featStyleSize",onChange:c},null,8,["max","value"])])]),angle:Ha(()=>[i.value?(se(),Ie("div",rwe,[q("label",swe,Fe(X(e)("Angle")),1),dt(qv,{name:"angle",class:"md:w-2/3",min:-180,max:180,value:(Math.round(X(t).featureStyle.angle*180/Math.PI)+180)%360-180,onChange:h,"data-cy":"featStyleAngle"},null,8,["value"])])):je("",!0)]),style:Ha(()=>[q("div",owe,[q("label",lwe,Fe(X(e)("Style")),1),q("div",uwe,[(se(),Ie(ua,null,Gn(s,(V,B)=>dt(Cxe,{key:B,linestyle:V,onChangeLinestyle:S},null,8,["linestyle"])),64))])])]),styleSymbol:Ha(({openEditIcon:V})=>[dt(Oxe,{"data-cy":"featStyleSymbol",onClickSymbolIcon:V},null,8,["onClickSymbolIcon"])]),symbolIcon:Ha(({closeEditIcon:V})=>[dt(Qxe,{onChangeSymbolIcon:(B,z)=>R(B,z,V),onChangeSymbolShape:B=>L(B,V),onClose:V},{symbolcolor:Ha(()=>[q("div",cwe,[q("label",dwe,Fe(X(e)("Color")),1),q("div",hwe,[q("input",{name:"color",class:"cursor-pointer",type:"color",value:X(t).featureStyle.color,onInput:l,"data-cy":"featStyleColor"},null,40,_we)])])]),_:2},1032,["onChangeSymbolIcon","onChangeSymbolShape","onClose"])]),lineWidth:Ha(()=>[q("div",mwe,[q("label",gwe,Fe(X(e)("Stroke width")),1),dt(qv,{name:"stroke","data-cy":"featStyleLineWidth",value:X(t).featureStyle.stroke,onChange:g},null,8,["value"])])]),transparency:Ha(()=>[q("div",pwe,[q("label",fwe,Fe(X(e)("Transparence")),1),dt(qv,{name:"transparency",class:"md:w-2/3","data-cy":"featStyleTransparency",max:100,value:100-X(t).featureStyle.opacity*100,onChange:b},null,8,["value"])])]),orientation:Ha(()=>[q("div",ywe,[q("label",bwe,Fe(X(e)("Show orientation")),1),q("input",{type:"checkbox",id:"showOrientation",onChange:v,checked:X(t).featureStyle.showOrientation},null,40,vwe)]),q("div",xwe,[q("button",{class:"lux-btn-primary",onClick:C},Fe(X(e)("Changer sens de la ligne")),1)])]),footer:Ha(()=>[qa(G.$slots,"footer")]),_:3},8,["feature"]))}}),wwe={class:"flex gap-2 items-center"},Iwe={class:"flex items-center"},Cwe={class:"mt-3 text-right"},N8=bt({__name:"feature-concentric-circle",emits:["cancel","validate"],setup(a,{emit:e}){const t=e,{t:i}=ya(),n=zi().getOlMap(),s=ys("feature"),r=Qe(parseFloat(o1(s.getGeometry(),n.getView().getProjection()).toFixed(2)));return(l,c)=>(se(),Ie(ua,null,[wr(Fe(X(i)("Veuillez entrer les caractéristiques de votre nouveau cercle"))+" ",1),q("div",wwe,[q("span",null,Fe(X(i)("Rayon:")),1),q("div",Iwe,[Mi(q("input",{class:"form-control block bg-secondary border !border-gray-300 mr-1",type:"number","onUpdate:modelValue":c[0]||(c[0]=h=>r.value=h)},null,512),[[ac,r.value,void 0,{number:!0}]]),q("span",null,Fe(X(i)("mètres")),1)])]),q("div",Cwe,[q("button",{"data-cy":"featureEditCancel",class:"lux-btn mr-2",onClick:c[1]||(c[1]=h=>t("cancel"))},Fe(X(i)("Cancel")),1),q("button",{"data-cy":"featureEditValidate",class:"lux-btn-primary",onClick:c[2]||(c[2]=h=>t("validate",{radius:r.value,baseFeature:X(s)}))},Fe(X(i)("Validate")),1)])],64))}}),Awe={class:"lux-drawing-item-measurements"},Swe={key:0,"data-cy":"featItemLength"},Twe={key:1,"data-cy":"featItemArea"},Ewe={key:2,"data-cy":"featItemRadius",class:"flex items-center"},Mwe={key:0},Lwe={key:1,class:"flex"},Rwe={key:3},kwe={"data-cy":"featItemElevation"},Wwe=bt({__name:"feature-measurements",props:{isEditingFeature:{type:Boolean}},setup(a){var S,L;const{t:e}=ya(),t=ro(),i=zi().getOlMap(),n=i.getView().getProjection(),s=Qe(ys("feature")),r=Qe(((S=s.value)==null?void 0:S.featureType)||""),l=Qe((L=s.value)==null?void 0:L.getGeometry()),c=Ft(()=>{if(l.value){if(["drawnLine","drawnPolygon"].includes(r.value))return Yx(l.value,n);if(r.value==="drawnCircle")return Hhe(l.value,n)}}),h=Ft(()=>{if(l.value){if(r.value==="drawnPolygon")return kP(l.value);if(r.value==="drawnCircle")return Yhe(l.value,n)}}),g=Ft(()=>l.value&&r.value==="drawnCircle"?o1(l.value,n):void 0),b=Qe(g.value||0),v=Qe();er(async()=>{const R=l.value.getCoordinates();l.value&&r.value==="drawnPoint"?v.value?v.value=await Kpe(R):v.value=await w5(R):v.value=void 0}),er(()=>{b.value=r.value==="drawnCircle"?parseFloat(o1(l.value,n).toFixed(2)):0});function C(R){if(s.value){const G=s.value.getGeometry();(G==null?void 0:G.getType())==="Circle"&&(u5(G,R,i),t.updateDrawnFeature(s.value))}}return(R,G)=>{const O=Fh("format-measure");return se(),Ie("div",Awe,[c.value?(se(),Ie("div",Swe,[q("span",null,Fe(X(e)("Length:"))+" ",1),Mi(q("span",null,null,512),[[O,c.value,void 0,{length:!0}]])])):je("",!0),h.value?(se(),Ie("div",Twe,[q("span",null,Fe(X(e)("Area:"))+" ",1),Mi(q("span",null,null,512),[[O,h.value,void 0,{area:!0}]])])):je("",!0),r.value==="drawnCircle"?(se(),Ie("div",Ewe,[q("span",null,Fe(X(e)("Rayon:"))+" ",1),R.isEditingFeature?(se(),Ie("div",Lwe,[Mi(q("input",{"data-cy":"featItemInputRadius",class:"form-control block bg-secondary border !border-gray-300",type:"number","onUpdate:modelValue":G[0]||(G[0]=V=>b.value=V),onKeyup:G[1]||(G[1]=Yl(V=>C(b.value),["enter"]))},null,544),[[ac,b.value,void 0,{number:!0}]]),q("button",{class:"lux-btn-primary",onClick:G[2]||(G[2]=V=>C(b.value))},Fe(X(e)("Valider")),1)])):Mi((se(),Ie("span",Mwe,null,512)),[[O,g.value,void 0,{length:!0}]])])):je("",!0),r.value==="drawnPoint"?(se(),Ie("div",Rwe,[q("span",null,Fe(X(e)("Elevation"))+": ",1),Mi(q("span",kwe,null,512),[[O,v.value,"2",{elevation:!0}]])])):je("",!0),r.value==="drawnLine"?(se(),xa(x5,{key:4,class:"mb-2",feature:s.value},null,8,["feature"])):je("",!0)])}}}),Gwe={key:1},Owe={class:"flex justify-between items-center mt-1 gap-2"},Pwe={"data-cy":"featItemActions"},Bwe={class:"flex text-primary items-center gap-1"},Fwe={class:"mt-3 text-right"},Nwe=bt({__name:"feature-sub-content",props:{isDocked:{type:Boolean},isEditingFeature:{type:Boolean}},emits:["toggleEditFeature","toggleDock","clickDelete","resetInfo","resetStyle","submitEditFeature","submitNewConcentricCircle"],setup(a,{emit:e}){const t=e,{t:i}=ya(),n=ys("feature");let s=n.label,r=n.description,l={...n.featureStyle};const c={FeatureConcentricCircle:N8,FeatureEditInfo:B8,FeatureEditStyle:F8,FeatureConfirmDelete:P8},h=Qe(void 0);fw("currentEditCompKey",h);function g(){h.value==="FeatureEditStyle"?(n.selected=!0,t("resetStyle",l)):h.value==="FeatureEditInfo"&&t("resetInfo",s,r),h.value=void 0}function b(v){const C=c[h.value];switch(s=n.label,r=n.description,l={...n.featureStyle},C){case N8:t("submitNewConcentricCircle",v);break;case P8:t("clickDelete");break;case B8:case F8:n.selected=!0,t("submitEditFeature");break;default:alert("Not implemented")}h.value=void 0}return(v,C)=>{var S;return h.value?(se(),xa(c1(c[h.value]),{key:1,onCancel:g,onValidate:b},{footer:Ha(()=>[q("div",Fwe,[q("button",{"data-cy":"featureEditCancel",class:"lux-btn mr-2",onClick:g},Fe(X(i)("Cancel")),1),q("button",{"data-cy":"featureEditValidate",class:"lux-btn-primary",onClick:b},Fe(X(i)("Validate")),1)])]),_:1},32)):(se(),Ie(ua,{key:0},[v.isDocked?je("",!0):(se(),Ie("i",{key:0,"data-cy":"featItemDock",class:"fa fa-object-ungroup float-right",role:"button",onClick:C[0]||(C[0]=()=>t("toggleDock"))})),v.isDocked?(se(),Ie("h6",Gwe,Fe((S=X(n))==null?void 0:S.label),1)):je("",!0),C[11]||(C[11]=q("div",{class:"min-h-2"},null,-1)),dt(Wwe,{isEditingFeature:v.isEditingFeature},null,8,["isEditingFeature"]),q("div",Owe,[q("div",null,[q("button",{"data-cy":"featItemToggleEdit",class:"lux-btn-primary",onClick:C[1]||(C[1]=L=>t("toggleEditFeature"))},Fe(v.isEditingFeature?X(i)("Terminer édition"):X(i)("Editer l'objet")),1)]),q("div",Pwe,[q("div",Bwe,[q("button",{"data-cy":"featItemActionSearch",class:"hover:text-tertiary",onClick:C[2]||(C[2]=()=>{var L;return(L=X(n))==null?void 0:L.fit()})},C[7]||(C[7]=[q("i",{class:"fa fa-search"},null,-1)])),q("button",{"data-cy":"featItemActionEdit",class:"hover:text-tertiary",onClick:C[3]||(C[3]=()=>h.value="FeatureEditInfo")},C[8]||(C[8]=[q("i",{class:"fa fa-pencil"},null,-1)])),q("button",{"data-cy":"featItemActionStyle",class:"hover:text-tertiary",onClick:C[4]||(C[4]=()=>h.value="FeatureEditStyle")},C[9]||(C[9]=[q("i",{class:"fa fa-paint-brush"},null,-1)])),q("button",{"data-cy":"featItemActionDelete",class:"hover:text-tertiary",onClick:C[5]||(C[5]=()=>h.value="FeatureConfirmDelete")},C[10]||(C[10]=[q("i",{class:"fa fa-trash"},null,-1)])),dt(gxe,{onNewConcentricCircle:C[6]||(C[6]=()=>h.value="FeatureConcentricCircle")})])])])],64))}}}),Dwe=bt({__name:"map-popup",props:{anchor:{}},emits:["closePopup"],setup(a,{emit:e}){const t=a,i=e,n=zi(),s=Qe(null),r=Wi(new OP({autoPan:{animation:{duration:250}}}));return tr(()=>{s.value&&(r.value.setElement(s.value),n.getOlMap().addOverlay(r.value))}),er(()=>{r.value.setPosition(t.anchor)}),(l,c)=>(se(),xa(mw,{to:"body"},[q("div",{ref_key:"popupContainer",ref:s,"data-cy":"mapPopup",class:"popup"},[q("button",{class:"fa-sharp fa-solid fa-close float-right mt-2 hover:text-primary",onClick:c[0]||(c[0]=()=>i("closePopup"))}),qa(l.$slots,"default")],512)]))}});const Vwe=bt({__name:"feature-sub-wrapper",props:{isDocked:{type:Boolean}},emits:["closePopup"],setup(a,{emit:e}){const{getFeatCoordinates:t}=kB(),i=e,n=ys("feature"),s=Qe(c());function r(){i("closePopup")}const l=h0(()=>{s.value=c()},1e3);function c(){return JSON.parse(JSON.stringify(t(n)))}return er(()=>{n!=null&&n.getGeometry()&&t(n)&&l()}),(h,g)=>h.isDocked?(se(),xa(Dwe,{key:0,anchor:s.value,onClosePopup:r},{default:Ha(()=>[qa(h.$slots,"default")]),_:3},8,["anchor"])):qa(h.$slots,"default",{key:1})}}),Zwe=["aria-expanded","aria-controls"],zwe=["id"],Uwe=bt({__name:"feature-item",props:{isDocked:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},feature:{}},emits:["clickDelete","closePopup","toggleFeatureSub","toggleEditFeature","toggleDock","submitFeature","submitNewConcentricCircle"],setup(a,{emit:e}){const t=a,i=t.feature,n=e;fw("feature",i);function s(){n("toggleFeatureSub",i.id,!t.isOpen)}function r(){n("toggleEditFeature",i.id,!t.isEditing)}function l(){n("clickDelete",i.id)}function c(v,C){i.label=v,i.description=C}function h(v){i.featureStyle={...v}}function g(){n("submitFeature",i)}function b(v,C){n("submitNewConcentricCircle",v,C)}return(v,C)=>(se(),Ie(ua,null,[q("button",{"data-cy":"featItemName",class:"lux-drawing-item-label flex items-center gap-1","aria-expanded":v.isOpen,"aria-controls":`drawing-item-content-${X(i).id}`,onClick:s},[C[2]||(C[2]=q("span",{class:"sortable-handle drag-handle fa fa-reorder ui-sortable-handle cursor-move"},null,-1)),q("span",{class:ti(["lux-icon",{point:X(i).featureType==="drawnPoint"||X(i).featureType==="drawnLabel",line:X(i).featureType==="drawnLine",polygon:X(i).featureType==="drawnPolygon"||X(i).featureType==="drawnCircle"}])},null,2),q("span",{class:ti({selected:v.isOpen})},Fe(X(i).label),3)],8,Zwe),v.isOpen?(se(),xa(Vwe,{key:0,isDocked:v.isDocked,onClosePopup:C[1]||(C[1]=()=>n("toggleDock"))},{default:Ha(()=>[q("div",{class:"lux-drawing-item-content",id:`drawing-item-content-${X(i).id}`},[dt(Nwe,{isDocked:v.isDocked,isEditingFeature:v.isEditing,onToggleEditFeature:r,onToggleDock:C[0]||(C[0]=()=>n("toggleDock")),onClickDelete:l,onResetInfo:c,onResetStyle:h,onSubmitEditFeature:g,onSubmitNewConcentricCircle:b},null,8,["isDocked","isEditingFeature"])],8,zwe)]),_:1},8,["isDocked"])):je("",!0)],64))}}),Xwe={key:0,class:"mx-1 sortable-features"},Hwe=["id"],Ywe=bt({__name:"draw-panel-features",setup(a){const e=ro(),{activeFeatureId:t,editingFeatureId:i,drawnFeatures:n,featureEditionDocked:s}=Zt(e);function r(g,b){t.value=b?g:void 0,i.value=void 0}function l(g,b){i.value=b?g:void 0}function c(g){const b=[...g].map(v=>v.id);e.reorderFeatures(b)}function h(g){const b=WB().createConcentricCircle(g.baseFeature,g.radius);e.addDrawnFeature(b)}return tr(()=>{D4(document.querySelector(".sortable-features"),{onSort:c})}),(g,b)=>X(n).length?(se(),Ie("ul",Xwe,[(se(!0),Ie(ua,null,Gn(X(n),v=>(se(),Ie("li",{class:"lux-drawing-item",id:`f-${v.id}`,key:v.id},[dt(Uwe,{isDocked:X(s),isEditing:X(i)===v.id,isOpen:X(t)===v.id,feature:v,onToggleFeatureSub:r,onToggleEditFeature:l,onToggleDock:b[0]||(b[0]=()=>s.value=!X(s)),onClosePopup:b[1]||(b[1]=()=>s.value=!1),onClickDelete:b[2]||(b[2]=C=>X(e).removeFeature(C)),onSubmitFeature:C=>X(e).updateDrawnFeature(C),onSubmitNewConcentricCircle:h},null,8,["isDocked","isEditing","isOpen","feature","onSubmitFeature"])],8,Hwe))),128))])):je("",!0)}}),Kwe={class:"lux-draw-panel absolute w-[93%]","data-cy":"drawPanel"},qwe={class:"lux-draw-panel-title flex"},jwe={class:"grow"},Jwe=bt({__name:"draw-panel",setup(a){const{t:e}=ya(),t=ro(),{drawnFeatures:i}=Zt(t),n=[{label:"Copier dans ma carte",action:()=>alert("TODO: Draw feature click drawingMenuOptions")},{label:"Effacer tous les dessins",action:()=>alert("TODO: Draw feature click drawingMenuOptions")},{label:"Créer une nouvelle carte à partir de ces dessins",action:()=>alert("TODO: Draw feature click drawingMenuOptions")},{label:"Fusionner des lignes",action:()=>alert("TODO: Draw feature click drawingMenuOptions")},{label:"Couper une ligne",action:()=>alert("TODO: Draw feature click drawingMenuOptions")}];return(s,r)=>X(i).length>0?(se(),Ie(ua,{key:0},[r[1]||(r[1]=q("hr",{class:"separator my-5"},null,-1)),q("div",Kwe,[q("div",qwe,[q("h5",jwe,Fe(X(e)("Dessins")),1),dt(ZB,{"data-cy":"drawPanelMenuPopup",items:n,direction:"down",ariaLabel:X(e)("Drawings menu")},{item:Ha(({item:l})=>[dt(zB,{"data-cy":"drawPanelMenuPopupItem",item:l,onClick:()=>l.action&&l.action()},{default:Ha(()=>[wr(Fe(X(e)(l.label)),1)]),_:2},1032,["item","onClick"])]),default:Ha(()=>[r[0]||(r[0]=q("i",{class:"fa-solid fa-square-caret-down hover:text-tertiary"},null,-1))]),_:1},8,["ariaLabel"])]),dt(Ywe)])],64)):je("",!0)}});const Qwe=x3(Jwe,[["__scopeId","data-v-6c1ac536"]]),$we=bt({__name:"my-map-edit-form",props:{modalOpened:{type:Boolean,default:!1}},setup(a){const e=a,{t}=ya(),i=Qe(e.modalOpened);return(n,s)=>{const r=V6("ModalDialog");return se(),xa(r,{key:0,title:X(t)("Title and description of the map",{ns:"client"}),onClose:s[0]||(s[0]=l=>i.value=!1)},{content:Ha(()=>s[1]||(s[1]=[q("form",null,[q("div",null,[q("label",null,"Titre de la carte"),q("input",{type:"text",class:"form-control"})]),q("div",null,[q("label",null,[q("input",{type:"checkbox"}),q("span",null,"Public Map")])]),q("div",{class:"dropdown"},[q("button",{type:"button",class:"btn btn-default","data-toggle":"dropdown"},[wr(" Maps TODO"),q("span",{class:"caret"})])]),q("div",{class:"form-group"},[q("label",null,"Description"),q("textarea",{class:"form-control",rows:"3","ng-model":"ctrl.newDescription"})])],-1)])),_:1},8,["title"])}}}),eIe={class:"text-white"},tIe={class:"flex justify-center flex-col items-center"},aIe=bt({__name:"my-maps-panel",setup(a){const{t:e}=ya(),{addNotification:t}=oc(),i=yi(),{toggleAuthFormOpen:n}=i,{authenticated:s}=Zt(w1()),r=Qe(!1);function l(){h()&&(alert("TODO call api"),t(e("You have no existing Maps, please create a New Map"),su.WARNING))}function c(){h()&&(r.value=!0)}function h(){return s.value?!0:(t(e("Veuillez vous identifier afin d'accéder à vos cartes")),n(!0),!1)}return(g,b)=>(se(),Ie(ua,null,[dt(P1,{"data-cy-value":"myMapsPanel","close-fn":()=>X(i).toggleMyMapsOpen(!1)},{header:Ha(()=>[q("h1",null,Fe(X(e)("My Maps",{ns:"client"})),1)]),content:Ha(()=>[q("div",eIe,Fe(X(e)("Create, save and share your own maps.",{ns:"client"})),1),q("div",tIe,[q("button",{class:"lux-btn mt-3",onClick:l},Fe(X(e)("Ouvrir une carte",{ns:"client"})),1),q("button",{class:"lux-btn mt-3",onClick:c},Fe(X(e)("Créer une nouvelle carte",{ns:"client"})),1)]),dt(Qwe)]),_:1},8,["close-fn"]),dt($we,{modalOpened:r.value},null,8,["modalOpened"])],64))}});var W5={},ts={};Object.defineProperty(ts,"__esModule",{value:!0});ts.BLANK_URL=ts.relativeFirstCharacters=ts.whitespaceEscapeCharsRegex=ts.urlSchemeRegex=ts.ctrlCharactersRegex=ts.htmlCtrlEntityRegex=ts.htmlEntitiesRegex=ts.invalidProtocolRegex=void 0;ts.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im;ts.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g;ts.htmlCtrlEntityRegex=/&(newline|tab);/gi;ts.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim;ts.urlSchemeRegex=/^.+(:|&colon;)/gim;ts.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g;ts.relativeFirstCharacters=[".","/"];ts.BLANK_URL="about:blank";Object.defineProperty(W5,"__esModule",{value:!0});var jB=W5.sanitizeUrl=void 0,Ls=ts;function iIe(a){return Ls.relativeFirstCharacters.indexOf(a[0])>-1}function nIe(a){var e=a.replace(Ls.ctrlCharactersRegex,"");return e.replace(Ls.htmlEntitiesRegex,function(t,i){return String.fromCharCode(i)})}function rIe(a){return URL.canParse(a)}function D8(a){try{return decodeURIComponent(a)}catch{return a}}function sIe(a){if(!a)return Ls.BLANK_URL;var e,t=D8(a.trim());do t=nIe(t).replace(Ls.htmlCtrlEntityRegex,"").replace(Ls.ctrlCharactersRegex,"").replace(Ls.whitespaceEscapeCharsRegex,"").trim(),t=D8(t),e=t.match(Ls.ctrlCharactersRegex)||t.match(Ls.htmlEntitiesRegex)||t.match(Ls.htmlCtrlEntityRegex)||t.match(Ls.whitespaceEscapeCharsRegex);while(e&&e.length>0);var i=t;if(!i)return Ls.BLANK_URL;if(iIe(i))return i;var n=i.trimStart(),s=n.match(Ls.urlSchemeRegex);if(!s)return i;var r=s[0].toLowerCase().trim();if(Ls.invalidProtocolRegex.test(r))return Ls.BLANK_URL;var l=n.replace(/\\/g,"/");if(r==="mailto:"||r.includes("://"))return l;if(r==="http:"||r==="https:"){if(!rIe(l))return Ls.BLANK_URL;var c=new URL(l);return c.protocol=c.protocol.toLowerCase(),c.hostname=c.hostname.toLowerCase(),c.toString()}return l}jB=W5.sanitizeUrl=sIe;function oIe(a,e){const t="f_";return Object.entries(a).filter(([i])=>i!=="showProfile").map(([i,n])=>({key:t+i,value:n})).sort((i,n)=>e?0:i.key.localeCompare(n.key))}function z4(a){return a.attributes!==void 0&&Object.keys(a.attributes).length>0}function lIe(a){return a==null||a.length===0}function Vg(a){const e=String(a).toLowerCase();return e.startsWith("http://")||e.startsWith("https://")}function uIe(a,e,t){const{key:i}=a;let n=!1;return e==="2407"&&(i==="f_Cl_erosion"||i==="f_Erosion_kl"||i==="f_Erosion_Cl"||i==="f_Erosioun_K")?(t==="fr"&&i==="f_Cl_erosion"||t==="de"&&i==="f_Erosion_kl"||t==="en"&&i==="f_Erosion_Cl"||t==="lb"&&i==="f_Erosioun_K")&&(n=!0):e==="2714"&&(i==="f_LABEL_eng"||i==="f_LC_class_name_fr"||i==="f_LC_class_name_de"||i==="f_LC_class_name")?(t==="fr"&&i==="f_LC_class_name_fr"||t==="de"&&i==="f_LC_class_name_de"||t==="en"&&i==="f_LABEL_eng"||t==="lb"&&i==="f_LC_class_name")&&(n=!0):e==="2444"&&(i==="f_Betriebsform"||i==="f_Forme_d_entreprise"||i==="f_Operation_Form"||i==="f_Form_vun_Geschaeft")?(t==="fr"&&i==="f_Forme_d_entreprise"||t==="de"&&i==="f_Betriebsform"||t==="en"&&i==="f_Operation_Form"||t==="lb"&&i==="f_Form_vun_Geschaeft")&&(n=!0):i.endsWith("_FR")||i.endsWith("_DE")||i.endsWith("_EN")||i.endsWith("_LU")||i.endsWith("_LB")?(t==="fr"&&i.endsWith("_FR")||t==="de"&&i.endsWith("_DE")||t==="en"&&i.endsWith("_EN")||t==="lb"&&(i.endsWith("_LB")||i.endsWith("_LU")))&&(n=!0):n=!0,n}function JB(a){return"fid"in a&&cIe(a.fid)}function cIe(a){return a==null?!1:a.split(",").every(t=>!!t&&t.split("_").length>=2)}function dIe(a){return jB(a)}const QB=bt({__name:"profile-feature-info",props:{feature:{}},setup(a){const e=a,t=zi().getOlMap(),i=Ft(()=>new Xh(new Lm().readFeature(e.feature,{dataProjection:cu,featureProjection:t.getView().getProjection()})));return(n,s)=>(se(),xa(x5,{feature:i.value},null,8,["feature"]))}}),hIe={class:"flex flex-col"},_Ie={class:"lux-poi-title","data-cy":"defaultTemplateTitle"},mIe={key:0},gIe={key:1,"data-cy":"defaultTemplateAttributes"},pIe={key:0},fIe={key:0},yIe={key:1},bIe=["href"],vIe=["href"],xIe={class:"lux-solarkataster-button"},wIe={key:4},IIe={controls:"",autoplay:"",style:{width:"260px",height:"50px"}},CIe=["src"],AIe=["src"],SIe={key:2,class:"query-profile"},TIe={key:3,class:"no-print"},EIe=["onClick"],MIe=["onClick"],LIe={key:4,class:"no-print"},RIe={key:5,class:"no-print"},kIe=["href"],WIe=bt({__name:"default-template",props:{layers:{type:Object,required:!0}},emits:["export"],setup(a){const{t:e}=ya(),t=window.location.href;function i(l,c){return!(l.startsWith("myenergy_solarkataster_luxemburg")||l.startsWith("eau_new_Wasserstand"))&&Vg(c.value)}function n(l,c){return l.startsWith("myenergy_solarkataster_luxemburg")&&Vg(c.value)&&c.key==="f_href"}function s(l,c){return l.startsWith("eau_new_Wasserstand")&&Vg(c.value)&&c.key==="f_Graph"}function r(l){return Vg(l.value)&&l.key==="f_AudioURL"}return(l,c)=>{const h=Fh("dompurify-html");return se(),Ie("div",hIe,[q("div",null,[q("h2",_Ie,Fe(X(e)(a.layers.layerLabel)),1),(se(!0),Ie(ua,null,Gn(a.layers.features,g=>(se(),Ie("div",{key:g.id,class:"lux-feature-info"},[g.attributes.label?(se(),Ie("h4",mIe,Fe(X(e)(g.attributes.label)),1)):je("",!0),X(z4)(g)?(se(),Ie("div",gIe,[(se(!0),Ie(ua,null,Gn(X(oIe)(g.attributes,a.layers.ordered),b=>(se(),Ie("div",{key:b.key},[!X(lIe)(b.value)&&X(uIe)(b,a.layers.layer,X(_n).language)?(se(),Ie("div",pIe,[X(Vg)(b.value)?je("",!0):(se(),Ie("label",fIe,Fe(X(e)(b.key))+" : ",1)),X(Vg)(b.value)?je("",!0):Mi((se(),Ie("span",yIe,null,512)),[[h,b.value]]),i(a.layers.layerLabel,b)?(se(),Ie("a",{key:2,href:b.value,target:"_blank"},Fe(X(e)(b.key)),9,bIe)):je("",!0),n(a.layers.layerLabel,b)?(se(),Ie("a",{key:3,"data-cy":"defaultTemplateSolarLink",href:b.value,target:"_blank"},[q("button",xIe,[q("span",null,Fe(X(e)("Lien direct vers le calculateur d'efficacité économique")),1)])],8,vIe)):je("",!0),r(b)?(se(),Ie("span",wIe,[q("audio",IIe,[q("source",{src:b.value,type:"audio/wav"},null,8,CIe)])])):je("",!0),s(a.layers.layerLabel,b)?(se(),Ie("iframe",{key:5,width:"260px",height:"560px",src:X(dIe)(b.value),title:"water level graph"},null,8,AIe)):je("",!0)])):je("",!0)]))),128))])):je("",!0),a.layers.has_profile?(se(),Ie("div",SIe,[dt(QB,{feature:g},null,8,["feature"])])):je("",!0),a.layers.has_profile?(se(),Ie("div",TIe,[q("button",{class:"lux-feature-info-export",onClick:b=>l.$emit("export",{feature:g,format:"kml"})},Fe(X(e)("Exporter KMl")),9,EIe),q("button",{class:"lux-feature-info-export",onClick:b=>l.$emit("export",{feature:g,format:"gpx"})},Fe(X(e)("Exporter GPX")),9,MIe)])):je("",!0),X(z4)(g)?je("",!0):(se(),Ie("div",LIe,[q("span",null,Fe(X(e)("Aucune information disponible pour cette couche")),1)])),X(JB)(g)?(se(),Ie("div",RIe,[q("span",null,[q("a",{"data-cy":"defaultTemplateLink",href:X(t)+"&fid="+g.fid,target:"_blank"},Fe(X(e)("Lien direct vers cet objet")),9,kIe)])])):je("",!0)]))),128))])])}}}),GIe={class:"flex flex-col"},OIe={"data-cy":"mymapsTemplate"},PIe={class:"lux-poi-title","data-cy":"mymapsTemplateTitle"},BIe={key:0},FIe=["href"],NIe=["src"],DIe={key:2},VIe={key:3},ZIe={key:4},zIe={key:5},UIe={key:6,class:"query-profile"},XIe={key:7,class:"no-print"},HIe=["onClick"],YIe=["onClick"],KIe={key:8,class:"no-print"},qIe=["src"],jIe={key:9,class:"no-print"},JIe=["href"],QIe={key:10,class:"no-print"},$Ie=["href"],eCe=bt({__name:"mymaps-template",props:{layers:{type:Object,required:!0}},emits:["export"],setup(a){const{t:e}=ya(),t=window.location.href;return(i,n)=>{const s=Fh("dompurify-html");return se(),Ie("div",GIe,[q("div",OIe,[q("h2",PIe,Fe(X(e)(a.layers.layerLabel)),1),(se(!0),Ie(ua,null,Gn(a.layers.features,r=>(se(),Ie("div",{key:r.id,class:"lux-feature-info"},[r.attributes.sentier?(se(),Ie("h4",BIe,Fe(X(e)(r.attributes.sentier)),1)):je("",!0),r.attributes.image&&r.attributes.thumbnail?(se(),Ie("a",{key:1,href:X(l8)(r.attributes.image),target:"_blank"},[q("img",{src:X(l8)(r.attributes.thumbnail)},null,8,NIe)],8,FIe)):je("",!0),r.attributes.sentier?(se(),Ie("div",DIe,[q("label",null,Fe(X(e)("sentier")),1),Mi(q("span",null,null,512),[[s,r.attributes.sentier]])])):je("",!0),r.attributes.name?(se(),Ie("div",VIe,[q("label",null,Fe(X(e)("name"))+": ",1),Mi(q("span",null,null,512),[[s,r.attributes.name]])])):je("",!0),r.attributes.description?(se(),Ie("div",ZIe,[q("label",null,Fe(X(e)("description"))+": ",1),Mi(q("span",null,null,512),[[s,r.attributes.description]])])):je("",!0),r.attributes.length?(se(),Ie("div",zIe,[q("label",null,Fe(X(e)("length"))+": ",1),Mi((se(),Ie("span",null,n[0]||(n[0]=[wr(" Km")]))),[[s,r.attributes.length]])])):je("",!0),a.layers.has_profile?(se(),Ie("div",UIe,[dt(QB,{feature:r},null,8,["feature"])])):je("",!0),a.layers.has_profile?(se(),Ie("div",XIe,[q("button",{class:"lux-feature-info-export",onClick:l=>i.$emit("export",{feature:r,format:"kml"})},Fe(X(e)("Exporter KMl")),9,HIe),q("button",{class:"lux-feature-info-export",onClick:l=>i.$emit("export",{feature:r,format:"gpx"})},Fe(X(e)("Exporter GPX")),9,YIe)])):je("",!0),X(z4)(r)?je("",!0):(se(),Ie("div",KIe,[q("span",null,Fe(X(e)("Aucune information disponible pour cette couche")),1)])),n[1]||(n[1]=q("br",null,null,-1)),q("img",{src:X(jfe)(r.attributes.map_id),alt:"QR code"},null,8,qIe),r.attributes.map_id?(se(),Ie("div",jIe,[q("span",null,[q("a",{"data-cy":"mymapsTemplateLinkMap",href:X(t)+"&map_id="+r.attributes.map_id,target:"_blank"},Fe(X(e)("Lien vers la carte")),9,JIe)])])):je("",!0),X(JB)(r)?(se(),Ie("div",QIe,[q("span",null,[q("a",{"data-cy":"mymapsTemplateLink",href:X(t)+"&fid="+r.fid,target:"_blank"},Fe(X(e)("Lien direct vers cet objet")),9,$Ie)])])):je("",!0)]))),128))])])}}}),tCe=bt({__name:"lignes-bus-template",props:{layers:{type:Object,required:!0}},emits:["export"],setup(a){return(e,t)=>(se(),Ie("h1",null,Fe(a.layers.layerLabel),1))}}),aCe=bt({__name:"feature-info",props:{content:{type:Array,required:!0}},emits:["export"],setup(a){const e=zi().getOlMap(),{featureInfoPrintableRef:t}=Zt(C5()),i=r=>t.value=r;Ds(()=>Ky.clearFeatures());function n(r){switch(r){case"mymaps.html":return eCe;case"lignes_bus.html":return tCe;case"default.html":default:return WIe}}function s(r){r.feature.attributes&&!r.feature.properties&&(r.feature.properties=r.feature.attributes);const l=new Lm().readFeature(r.feature,{dataProjection:cu,featureProjection:e.getView().getProjection()});v5.export(e,r.format,[l],r.feature.attributes.name||r.format,!0)}return(r,l)=>a.content&&a.content.length?(se(),Ie("div",{key:0,ref:i,class:"absolute w-11/12"},[(se(!0),Ie(ua,null,Gn(a.content,(c,h)=>(se(),xa(c1(n(c.template)),{key:h,layers:c,onExport:s},null,40,["layers"]))),128))])):je("",!0)}}),iCe={key:0,"data-cy":"locationInfo",class:"absolute"},nCe={key:1,class:"text-white absolute"},rCe={class:"flex flex-col gap-3 mr-5 mt-4 italic"},sCe=bt({__name:"info-panel",setup(a){const{t:e}=ya(),t=yi(),{locationInfoCoords:i}=Zt(pd()),n=zi().olMap,{infoOpen:s}=Zt(t),{clearContent:r}=pm(),{featureInfoPanelContent:l,isLoading:c}=Zt(pm());return Kt(s,h=>{h||r()}),(h,g)=>(se(),xa(P1,{"data-cy-value":"infoPanel","close-fn":()=>X(t).toggleInfoOpen(!1)},{header:Ha(()=>[q("h1",null,Fe(X(e)("infos",{ns:"client"})),1)]),content:Ha(()=>[X(n)?Mi((se(),Ie("div",iCe,[dt(pye)],512)),[[xh,X(i)]]):je("",!0),!X(i)&&!X(l)?(se(),Ie("div",nCe,[q("ul",rCe,[q("li",null,Fe(X(e)("A right click (tap and hold on mobile)...",{ns:"app"})),1),q("li",null,Fe(X(e)("A short click (tap on mobile)...",{ns:"app"})),1)])])):je("",!0),X(l)&&!X(c)?(se(),xa(aCe,{key:2,content:X(l)},null,8,["content"])):je("",!0)]),_:1},8,["close-fn"]))}}),oCe={key:0,class:"w-full md:w-80 bg-secondary z-10"},lCe={key:1,class:"w-full md:w-80 bg-secondary z-10"},uCe={key:2,class:"w-full md:w-80 bg-secondary z-10"},cCe={key:3,class:"w-full md:w-80 bg-secondary z-10"},dCe={class:"w-full md:w-80 bg-secondary z-10"},hCe=bt({__name:"side-panel",setup(a){const e=yi(),{layersOpen:t,legendsOpen:i,myMapsOpen:n,infoOpen:s,styleEditorOpen:r,themeGridOpen:l,drawToolbarOpen:c}=Zt(e);return Kt(t,h=>{h&&(i.value=n.value=r.value=!1)}),Kt(n,h=>{h&&(r.value=t.value=l.value=i.value=s.value=!1)}),Kt(i,h=>{h&&(n.value=r.value=t.value=l.value=s.value=!1)}),Kt(c,h=>{h&&L5("md")&&(n.value=!0,t.value=!1,i.value=!1,l.value=!1,s.value=!1)}),Kt(s,h=>{h&&(n.value=r.value=t.value=l.value=i.value=!1)}),(h,g)=>(se(),Ie(ua,null,[X(t)?(se(),Ie("div",oCe,[dt(Q1e)])):je("",!0),X(i)?(se(),Ie("div",lCe,[dt(ibe)])):je("",!0),X(r)?(se(),Ie("div",uCe,[dt(h2e)])):je("",!0),X(n)?(se(),Ie("div",cCe,[dt(aIe)])):je("",!0),Mi(q("div",dCe,[dt(sCe)],512),[[xh,X(s)]])],64))}});class _Ce{bootstrap(){this.restore()}restore(){const e=Ia.getValue(Xp);if(e){const{setFid:t}=pm();t(e),Ah.removeQueryParam(Xp)}}}const mCe=new _Ce,gCe={class:"h-screen flex flex-col overflow-hidden"},pCe={class:"flex grow"},fCe={class:"map-wrapper grow bg-blue-100 relative"},yCe={class:"absolute right-1 top-16"},bCe={key:1,class:"flex grow"},vCe={class:"map-wrapper grow bg-blue-100 relative"},xCe={class:"absolute right-1 top-2"},wCe=bt({__name:"App",setup(a){const e=yi(),t=Uh(),i=zi();C2e.bootstrap(),w2e.bootstrap(),E2e.bootstrap(),m2e.bootstrap(),$O.bootstrap(),v2e.bootstrap(),t.initBackgroundsConfigs(),mCe.bootstrap();const{embedded:n,layersOpen:s,legendsOpen:r,myMapsOpen:l,infoOpen:c,styleEditorOpen:h}=Zt(e);Kt(s,g),Kt(r,g),Kt(h,g),Kt(l,g),Kt(c,g);function g(){setTimeout(()=>i.resize(),50)}return tr(()=>window.addEventListener("resize",i.resize)),Ds(()=>window.removeEventListener("resize",i.resize)),(b,v)=>(se(),Ie("div",gCe,[X(n)?(se(),Ie("main",bCe,[q("div",vCe,[dt(L8,{v4_standalone:!0})]),q("div",xCe,[dt(i8)])])):(se(),Ie(ua,{key:0},[dt(kre),q("main",pCe,[dt(hCe),q("div",fCe,[dt(L8,{v4_standalone:!0}),dt(Rve,{class:"absolute top-0"}),dt(Ave),dt(Jye)]),q("div",yCe,[dt(i8)])]),dt(hxe,{class:"fixed bottom-5 sm:static"}),dt(Npe)],64))]))}});dW();_n.use(Y8);_n.init({lng:"fr",debug:!1,defaultNS:"client",returnEmptyString:!1,supportedLngs:["de","en","fr","lb"],ns:["app","client","legends","server","tooltips"],fallbackLng:"en",backend:{loadPath:"/luxembourg-geoportail/GITLAB-49-my_maps/assets/locales/{{ns}}.{{lng}}.json"},nsSeparator:!1,keySeparator:!1});const B1=NZ(wCe);B1.use(Az());B1.use(ZZ,{i18next:_n});B1.use(Iz);B1.use(KY);B1.mount("#app");ps().setThemes(YQ());export{wP as C,c5 as F,Aw as P,sh as R,SCe as V,nc as a,Zr as b,Hg as c,is as d,bm as e,zh as f,FY as g,Li as h,_X as i,ww as j,fi as k,ur as l,XU as m,Wo as n,L1 as o,IP as p,nd as q,b7 as r,n2 as s,Ml as t,qhe as u,Hx as v};
